{"version":3,"sources":["bootstrap.ts","utils/createPack.tsx","components/error-boundary.tsx","components/exception.tsx","components/loading.tsx","components/breadcrumb.tsx","components/logout-confirm-modal.tsx","components/app-header.tsx","containers/home/index.ts","containers/login/index.tsx","app.tsx","serviceWorker.ts","index.tsx","components/checkbox.tsx","data/useReportTemplate.ts","utils/history.ts","components/collapse.ts","components/snippet-template-modal.tsx","components/snippet-template-wrapper.tsx","components/snippet-template-input-text.tsx","components/input-number.tsx","components/snippet-template-input-number.tsx","components/editable-table.tsx","components/snippet-template-selection-modal.tsx","components/snippet-template-multiple-selection.tsx","components/snippet-template-single-selection.tsx","components/snippet-template-date.tsx","components/snippet-template-time.tsx","components/snippet-template-select.tsx","components/snippet-template-section-header.tsx","components/snippet-template-cloze.tsx","components/snippet-template-list.tsx","theme.ts","components/radio.tsx","components/select.tsx","hooks/useApp.ts","hooks/useAuth.tsx","components/datepicker.tsx","constants/item-types.ts","utils/message.tsx","data/useReport.ts","components/snippet-utils.tsx","components/modal.tsx","utils/request.ts","utils/get-display-name.ts","components/snippet-toolbar.tsx","components/withTinyMCE.js","components/snippet.tsx","components/tabs.ts","components/draggable-tabs.js","utils/webHelper.ts","services/report.ts","hooks/useTitle.ts","components/layout.tsx","components/table.tsx","hooks/useVisible.ts","components/withScroll.js","components/snippet-scrollable-container.tsx","components/input.tsx","components/app-footer.tsx","../theme.js","constants/enums.ts","containers/report-template-editor/index.ts","containers/report-template-list/index.ts","containers/report-inquiry/index.ts","services/pathology.ts","containers/report-typing/header.tsx","containers/report-typing/components.tsx","containers/report-typing/autoHeight.tsx","containers/report-typing/report-typing.tsx","containers/report-typing/pie.tsx","containers/report-typing/index.ts","containers/pathol-images-viewer/index.ts","containers/radiol-images-viewer/index.ts","containers/report-list/index.ts","containers/yellow-card-inquiry/index.ts","containers/blood-bank-review/index.ts","containers/medical-order/index.ts","constants/routes.ts","components/snippet-block-placeholder.ts","components/snippets-container.tsx","components/snippet-list-menu-item.tsx","components/snippet-list-menu.tsx","constants/env.ts","components/button.tsx","services/reportTemplate.ts","utils/form.ts"],"names":["dayjs","extend","isSameOrBefore","isSameOrAfter","advancedFormat","customParseFormat","weekYear","weekOfYear","isMoment","localeData","badMutable","weekday","locale","pack","children","components","length","Component","rest","React","type","props","ErrorFallbackWrapper","styled","div","ErrorFallback","error","componentStack","resetErrorBoundary","role","className","message","onClick","initialState","info","ErrorBoundary","state","args","onReset","setState","this","onError","prevProps","resetKeys","a","b","some","item","index","Object","is","changedArray","onResetKeysChange","fallbackRender","FallbackComponent","fallback","isValidElement","Error","Exception","ExceptionWrapper","style","backgroundImage","envStore","publicUrl","to","color","Wrapper","memo","justify","Loading3QuartersOutlined","spin","StyledBreadcrumb","StyledModal","Modal","LogoutConfirmModal","onOk","onCancel","visible","centered","closable","bodyStyle","paddingTop","width","footer","key","minWidth","marginRight","ExclamationCircleFilled","fontSize","AppHeader","useBreadcrumbState","items","content","useHeaderContentValue","logout","useAuth","useState","history","location","pathname","current","setCurrentPath","useVisible","logoutModalVisible","handleLogoutModalVisible","handleTo","push","getMenuClassName","targetUrl","cx","includes","Header","Logo","src","alt","mode","borderBottom","lineHeight","MenuItem","routes","SettingOutlined","SubMenu","popupOffset","popupClassName","title","CaretDownOutlined","Item","icon","ExportOutlined","borderColor","separator","minHeight","display","alignItems","HomeOutlined","top","map","x","idx","href","name","p","theme","primary","purple150","lazy","Login","ForgetPassword","LoginRoute","Suspense","exact","path","component","App","isAuthenticated","useRoutes","renderRouteItem","useCallback","param","id","renderRoute","data","hide","Home","Boolean","window","hostname","match","redirect","EnhancedApp","createPack","initializeState","set","zhTW","value","suspense","fetcher","request","DndProvider","backend","HTML5Backend","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","console","CheckboxGroup","Group","StyledCheckbox","secondary","CheckboxComponent","forwardRef","ref","displayName","compose","require","snippetCategoryOfReport","PATHOLOGICAL_DIAGNOSIS","GROSS","MICROSCOPY","NOTES","REFERENCES","fakeReportTemplateList","setComponent","Store","get","defaultSnippetsOfReport","mergeAll","values","reportTemplateListState","atom","default","reportPreviewState","selectorFamily","find","categoryState","head","useReportTemplates","useRecoilState","reportTemplates","total","useReportTemplateState","useReportTemplate","reportTemplateList","setting","reportTemplate","setReportTemplate","useEffect","of","_snippetList","pathOr","setSnippetList","JSON","stringify","snippetList","snippetById","filter","flatten","useReportPreview","isPreview","setIsPreview","prev","useToggleReportPreview","useCurrentCategoryOfSnippet","createHashHistory","basename","appBaseName","StyledCollapse","TemplateModal","maskClosable","keyboard","StyledCard","darkGrey","SnippetTemplateWrapper","onDelete","onEdit","titleVisible","bodyVisible","FontColorsOutlined","InputTextModal","useForm","form","validateFields","createFormItemLayout","labelAlign","initialValues","label","valuePropName","StyledInputNumber","attrs","min","ThousandSeprartorInput","thosandSeprartor","CurrencyInput","currency","PercentInput","percent","InputNumberModal","EditableTable","onChange","onRowAdd","onRowDelete","triggerChange","changedValue","rowKey","pagination","size","dataSource","onAddRowClick","onDeleteRowClick","editable","defaultValue","options","uuid","text","selected","freetext","SnippetTemplateSelectionModal","columns","v","r","noStyle","align","concat","__","undefined","invoker","SnippetTemplateMultipleSelection","editModalVisible","handleEditModalVisible","onUpdate","useUpdateSnippet","handleOk","paddingLeft","mapIndexed","defaultChecked","bordered","placeholder","SnippetTemplateSingleSelection","InputDateModal","allowClear","picker","InputTimeModal","format","SnippetTemplateCloze","input","html","componentType","inline","BoldOutlined","FontSizeOutlined","inputProps","tooltip","multipleLine","autoSize","minRows","NumberOutlined","max","formatter","units","DatabaseOutlined","Option","UnorderedListOutlined","TemplateMultipleSelection","OrderedListOutlined","TemplateSingleSelection","CalendarOutlined","ClockCircleOutlined","Cloze","reportTemplateById","s","keys","StyledRadio","RadioComponent","StyledSelect","SelectComponent","breadcrumbState","useBreadcrumb","setter","useSetRecoilState","headerContentState","useHeaderContent","node","useRecoilValue","AuthContext","createContext","user","setUser","_","setIsAuthenticated","_user","Cookies","getJSON","_token","AuthProvider","isNil","onCompleted","remove","useMemo","Provider","context","useContext","borderLess","css","RangePicker","StyledDatePicker","StyledTimePicker","DatePickerComponent","CARD","BOARD","SNIPPET","marginTop","marginBottom","modalDefaultProps","okText","cancelText","autoFocusButton","okButtonProps","cancelButtonProps","confirm","reportListState","useReportList","useReportItem","reportList","setData","hasClassName","nodes","n","canMoveSnippet","element","elem","parentNode","unshift","getPlaceHolderIndex","clientOffset","overSnippet","findSnippet","classList","contains","parentElement","elementFromPoint","y","snippetIndex","dataset","placeholderIndex","Number","isOverSnippet","padding","renderSnippets","wrapperId","draggable","tabSize","dangerouslySetInnerHTML","__html","ModalComponent","success","cond","contentTypeIs","ifElse","identity","c","toQueryString","paramsObject","join","Array","isArray","val","encodeURIComponent","url","body","headers","errorMsg","fullUrl","always","T","apiBaseUrl","fetch","FormData","Accept","response","json","ok","Promise","reject","blob","err","getDisplayName","ToolbarWrapper","SHIFT_TYPES","SnippetToolbar","tabIndex","onShift","handleShift","shift","LeftOutlined","RightOutlined","EditOutlined","DeleteOutlined","defaultConfig","block_formats","menubar","external_plugins","dropdown","inputtext","fontsize_formats","force_br_newlines","force_p_newlines","forced_root_block","plugins","tinymce","link_title","table_toolbar","textcolor_cols","content_security_policy","allow_unsafe_link_target","relative_urls","convert_urls","valid_elements","valid_children","toolbar1","withDragSource","DragSource","ItemTypes","beginDrag","fromMenu","originalIndex","canDrag","connect","monitor","connectDragSource","dragSource","connectDragPreview","dragPreview","isDragging","Snippet","componentDidMount","getEmptyImage","shiftSnippet","handleRemove","removeSnippet","_onMouseOver","_onMouseOut","styles","mergeRight","isFocus","borderRadius","border","outlineColor","cursor","position","marginLeft","getItemStyles","onMouseOver","onMouseOut","data-index","Children","child","cloneElement","ComposedComponent","withTinyMCE","editor","toolbarMouseOver","toolbarVisible","initialize","snippet","_get","_config","clone","config","init","selector","language_url","setup","on","e","onEditorBlur","onEditorFocus","Function","execInit","setContent","init_instance_callback","undoManager","add","updateSnippet","target","getContent","offsetTop","onBlur","prevState","equals","defaultProps","hoist","bg","TabNode","connectDropTarget","isOver","draggingItem","moveTabNode","withDropTarget","DropTarget","drop","dragKey","getItem","hoverKey","dropTarget","WrapTabNode","DraggableTabs","order","newOrder","slice","forEach","indexOf","dragIndex","hoverIndex","splice","renderTabBar","DefaultTabBar","TabPane","Tabs","addIndex","isEmpty","either","RisNil","not","queryString","search","params","URLSearchParams","result","d","Date","now","performance","replace","Math","random","floor","toString","getNumberFromString","str","isEnvDev","appUrl","useReports","totalPages","setReportList","refetch","loading","useAddNewReport","handler","newList","createdAt","moment","createdAtStr","updatedAt","updatedAtStr","store","useUpdateReport","findIndex","update","DEFAULT_USE_TITLE_OPTIONS","restoreOnUnmount","prevTitleRef","useRef","appTitle","_title","background","borderTopLeftRadius","borderTopRightRadius","Page","Content","StyledTable","TableComponent","isRowDeletable","isCanEdit","_columns","canEdit","placement","emptyText","image","PRESENTED_IMAGE_SIMPLE","description","Column","onRequestOpen","setVisible","handleVisible","evt","handleClose","noop","intBetween","createVerticalStrength","_buffer","point","h","w","buffer","defaultHorizontalStrength","defaultVerticalStrength","ScrollableComponent","WrappedComponent","ScrollingComponent","ctx","handleEvent","dragging","attached","attach","updateScrolling","throttle","container","getBoundingClientRect","box","left","height","coords","changedTouches","clientX","clientY","getCoords","scaleX","horizontalStrength","scaleY","verticalStrength","frame","startScrolling","trailing","useScroll","_initial","findDOMNode","wrappedInstance","addEventListener","clearMonitorSubscription","dragDropManager","getMonitor","subscribeToStateChange","handleMonitorChange","_remove","removeEventListener","stopScrolling","i","tick","strengthMultiplier","onScrollChange","scrollLeft","scrollTop","scrollWidth","scrollHeight","clientWidth","clientHeight","raf","detach","cancel","contextType","DndContext","withScroll","vStrength","ReactDndProvider","StyledInput","TextArea","AppFooter","Footer","module","exports","danger","cornblue","comet","btn","sider","login","cyan","ActionTypes","reportAnnotations","menuState","StyledAnchor","PieChart","chartWidth","legendWidth","leftContentVisible","rightContentVisible","onLayoutChange","dropdownMatchSelectWidth","dropdownStyle","autoFocus","onSelect","VISIBLE_LEFT","CheckOutlined","VISIBLE_RIGHT","RADIOL_IMAGE","dropLast","split","open","REPORT_INQUIRY","computeHeight","parseInt","getComputedStyle","paddingBottom","autoHeight","computedHeight","root","handleRoot","getAutoHeight","ReactFitText","DataView","Pie","legendData","legendBlock","requestRef","chart","getG2Instance","requestAnimationFrame","getLegendData","resize","geom","getAllGeoms","origin","_origin","checked","handleLegendClick","newItem","filteredLegendData","l","Debounce","hasLegend","passive","preProps","cancelAnimationFrame","formatColor","valueFormat","subTitle","forceFit","inner","animate","colors","lineWidth","pieClassName","classNames","propsData","propsSelected","defaultColors","parseFloat","dv","source","transform","field","dimension","as","maxFontSize","scale","range","onGetG2Instance","showTitle","innerRadius","stroke","toFixed","backgroundColor","isNaN","PureComponent","Link","Anchor","col","whiteSpace","getAnchorStyles","affixed","borderBottomLeftRadius","borderBottomRightRadius","ReportTyping","useTitle","useSwr","method","classification","noType","no","others","usePathology","visibleLayouts","setVisibleLayouts","qs","templateId","setCurrentTemplateId","category","handleTabEdit","handleTabChange","handleTabMove","handleTabNameChange","handleSnippetUpdate","setFieldsValue","reviewDoctor","serialNo","REPORT_EDIT","handleAdd","handleUpdate","payload","setIsAffixed","percentage","setPercentage","handleValuesChange","round","getFieldsValue","colSpan","onValuesChange","gutter","span","defaultActiveKey","expandIcon","Panel","header","showInkInFixed","affix","link","preventDefault","tab","scroll","behavior","activeKey","tabBarGutter","contentEditable","suppressContentEditableWarning","spellCheck","onSnippetUpdate","gt","renderCategory","ORREQNO","ORWORKNO","HNAMEC","HSEX","CSECT","HHISNUM","HBED","HBIRTHDT","ORPROCED","PATHOL_IMAGE","REPORT_TEMPLATE_LIST","REPORT_INPUT","REPORT_TEMPLATE_EDIT","REPORT_TEMPLATE_CREATE","REPORT_LIST","PHRASE_LIST","IMAGE_SCHEDULE","BLOOD_BANK_REVIEW","YELLOW_CARD_INQUIRY","MEDICAL_ORDER","PatholImagesViewer","RadiolImagesViewer","ReportList","ReportInquiry","YellowCardInquiry","BloodBankReview","MedicalOrder","ReportTemplateList","ReportTemplateBuilder","canDrop","handleSnippetDrop","handleSnippetMove","getClientOffset","hover","hoverBoundingRect","hoverMiddleY","bottom","didDrop","SnippetsContainer","atIndex","handleFindSnippet","isPlaced","droppedItem","nextIndex","insert","handleSnippetRemove","handleSnippetShift","lt","isPlaceHold","cardList","withRouter","endDrag","SnippetListMenuItem","SnippetListMenuWrapper","comp","SnippetListMenu","snippetTemplateList","pageSize","process","REACT_APP_API_ROOT","REACT_APP_BASE_NAME","REACT_APP_TITLE","protocol","host","REACT_APP_FAKE_API_ROOT","createElement","StyledButton","ButtonComponent","actionType","setSetting","useReportTemplateItem","setCategory","handleTabAdd","last","inc","Rlast","sort","handleTabRemove","targetKey","omit","action","snippetKeys","orderA","orderB","newTabName","innerHTML","useAddNewTemplate","setReportTemplates","useUpdateTemplate","wrapper","labelCol","xs","sm","wrapperCol","parser","rules","required","number","account","pattern","RegExp","password"],"mappings":"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","file":"static/js/main.56a9c9db.chunk.js","sourcesContent":["import dayjs from 'dayjs'\nimport customParseFormat from 'dayjs/plugin/customParseFormat'\nimport weekOfYear from 'dayjs/plugin/weekOfYear'\nimport weekday from 'dayjs/plugin/weekday'\nimport isMoment from 'dayjs/plugin/isMoment'\nimport badMutable from 'dayjs/plugin/badMutable'\nimport localeData from 'dayjs/plugin/localeData'\nimport advancedFormat from 'dayjs/plugin/advancedFormat'\nimport weekYear from 'dayjs/plugin/weekYear'\nimport isSameOrBefore from 'dayjs/plugin/isSameOrBefore'\nimport isSameOrAfter from 'dayjs/plugin/isSameOrAfter'\nimport 'dayjs/locale/zh-tw'\n\ndayjs.extend(isSameOrBefore)\ndayjs.extend(isSameOrAfter)\ndayjs.extend(advancedFormat)\ndayjs.extend(customParseFormat)\ndayjs.extend(weekYear)\ndayjs.extend(weekOfYear)\ndayjs.extend(isMoment)\ndayjs.extend(localeData)\ndayjs.extend(badMutable)\ndayjs.extend(weekday)\n\ndayjs.locale('zh-tw')\n","import * as React from 'react'\n\nexport interface WithChildrenProps {\n  children: React.ReactNode\n}\n\nexport type PackComponentType<\n  T extends WithChildrenProps = WithChildrenProps\n> = React.ElementType<T>\n\nexport function pack(\n  children: React.ReactNode = null,\n  ...components: PackComponentType[]\n) {\n  if (!components.length) {\n    return children as JSX.Element\n  }\n\n  const [Component, ...rest] = components\n\n  if (React.isValidElement(Component)) {\n    return (\n      <Component.type {...Component.props}>\n        {pack(children, ...rest)}\n      </Component.type>\n    )\n  }\n\n  return <Component>{pack(children, ...rest)}</Component>\n}\n\nexport function createPack(...components: any[]) {\n  return function PackComponent({ children }: WithChildrenProps) {\n    return pack(children, ...components)\n  }\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport Button from '@/components/button'\n\ntype ErrorInfo = {\n  componentStack: string\n}\n\ntype FallbackProps = {\n  error?: Error\n  componentStack?: string\n  resetErrorBoundary: () => void\n}\n\ntype ErrorBoundaryProps = {\n  onResetKeysChange?: (\n    prevResetKeys: Array<any> | undefined,\n    resetKeys: Array<any> | undefined\n  ) => void\n  onReset?: (...args: any) => void\n  onError?: (error: Error, componentStack: string) => void\n  resetKeys?: Array<any>\n  FallbackComponent?: React.ComponentType<FallbackProps>\n  fallbackRender?: (props: FallbackProps) => React.ReactElement<any, any> | null\n  fallback?: React.ReactElement<any, any> | null\n}\n\ntype ErrorBoundaryState = {\n  hasError?: boolean\n  error?: Error | null\n  info?: ErrorInfo | null\n}\n\nconst ErrorFallbackWrapper = styled.div`\n  width: 100%;\n  height: 100vh;\n  margin: 0 auto;\n  padding: 50px;\n`\n\nfunction ErrorFallback({\n  error,\n  componentStack,\n  resetErrorBoundary,\n}: FallbackProps) {\n  return (\n    <ErrorFallbackWrapper role=\"alert\">\n      <p className=\"text-xl\">Something went wrong:</p>\n      <pre className=\"text-sm\">{error?.message}</pre>\n      <pre className=\"text-sm\">{componentStack}</pre>\n      <Button onClick={resetErrorBoundary}>Try again</Button>\n    </ErrorFallbackWrapper>\n  )\n}\n\nconst changedArray = (a: any[] | undefined = [], b: any[] | undefined = []) =>\n  a.length !== b.length || a.some((item, index) => !Object.is(item, b[index]))\n\nconst initialState = { error: null, info: null }\nexport default class ErrorBoundary extends React.Component<\n  ErrorBoundaryProps,\n  ErrorBoundaryState\n> {\n  state: ErrorBoundaryState = initialState\n\n  resetErrorBoundary = (...args: any) => {\n    this.props.onReset?.(...args)\n    this.setState(initialState)\n  }\n\n  componentDidCatch(error: Error, info: ErrorInfo) {\n    this.props.onError?.(error, info?.componentStack)\n    this.setState({ error, info })\n  }\n\n  componentDidUpdate(prevProps: ErrorBoundaryProps) {\n    const { error } = this.state\n    const { resetKeys } = this.props\n    if (error !== null && changedArray(prevProps.resetKeys, resetKeys)) {\n      this.props.onResetKeysChange?.(prevProps.resetKeys, resetKeys)\n      this.setState(initialState)\n    }\n  }\n\n  render() {\n    const { error, info } = this.state\n    const {\n      fallbackRender,\n      FallbackComponent = ErrorFallback,\n      fallback,\n    } = this.props\n\n    if (error !== null) {\n      const props = {\n        componentStack: info?.componentStack,\n        error,\n        resetErrorBoundary: this.resetErrorBoundary,\n      }\n      if (React.isValidElement(fallback)) {\n        return fallback\n      } else if (typeof fallbackRender === 'function') {\n        return fallbackRender(props)\n      } else if (FallbackComponent) {\n        return <FallbackComponent {...props} />\n      } else {\n        throw new Error(\n          'react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop'\n        )\n      }\n    }\n\n    return this.props.children\n  }\n}\n\nfunction withErrorBoundary<P>(\n  Component: React.ComponentType<P>,\n  errorBoundaryProps: ErrorBoundaryProps\n) {\n  function Wrapped(props: any) {\n    return (\n      <ErrorBoundary {...errorBoundaryProps}>\n        <Component {...props} />\n      </ErrorBoundary>\n    )\n  }\n\n  // Format for display in DevTools\n  const name = Component.displayName || Component.name || 'Unknown'\n  Wrapped.displayName = `withErrorBoundary(${name})`\n\n  return Wrapped\n}\n\nfunction useErrorHandler<P = Error>(givenError?: P) {\n  const [error, setError] = React.useState(null)\n  if (givenError) throw givenError\n  if (error) throw error\n  return setError\n}\n\nexport { ErrorBoundary, withErrorBoundary, useErrorHandler }\n","import React from 'react'\nimport { Link } from 'react-router-dom'\nimport styled from 'styled-components'\nimport Button from '@/components/button'\nimport { envStore } from '@/constants/env'\n\ntype Props = {\n  type?: number | string | 404\n}\n\nexport default function Exception({ type = 404 }: Props) {\n  return (\n    <ExceptionWrapper>\n      <div className=\"exception\">\n        <div className=\"exception__imgBlock\">\n          <div\n            className=\"exception__imgEle\"\n            style={{\n              backgroundImage: `url(\"${envStore.publicUrl}/images/${type}.svg\")`,\n            }}\n          />\n        </div>\n        <div className=\"exception__content\">\n          <h1>404</h1>\n          <div className=\"exception__desc\">抱歉，你訪問的頁面不存在</div>\n          <div className=\"exception__actions\">\n            <Link to=\"/\">\n              <Button color=\"primary\">回首頁</Button>\n            </Link>\n          </div>\n        </div>\n      </div>\n    </ExceptionWrapper>\n  )\n}\n\nconst ExceptionWrapper = styled.div`\n  height: 100%;\n  margin-right: -24px;\n  background: #f9f9fb;\n  border-radius: 4px;\n\n  .exception {\n    display: flex;\n    align-items: center;\n    height: 100%;\n  }\n\n  .exception .exception__imgBlock {\n    flex: 0 0 62.5%;\n    width: 62.5%;\n    padding-right: 152px;\n    zoom: 1;\n  }\n\n  .exception .exception__imgEle {\n    float: right;\n    width: 100%;\n    max-width: 430px;\n    height: 360px;\n    background-repeat: no-repeat;\n    background-position: 50% 50%;\n    background-size: contain;\n  }\n\n  .exception .exception__content {\n    flex: auto;\n  }\n\n  .exception .exception__content h1 {\n    margin-bottom: 24px;\n    color: #434e59;\n    font-weight: 600;\n    font-size: 72px;\n    line-height: 72px;\n  }\n\n  .exception .exception__content .exception__desc {\n    margin-bottom: 24px;\n    color: rgba(0, 0, 0, 0.45);\n    font-size: 20px;\n    line-height: 28px;\n  }\n`\n","import React from 'react'\nimport styled from 'styled-components'\nimport { Row, Col } from 'antd'\nimport { Loading3QuartersOutlined } from '@ant-design/icons'\n\ntype PropTypes = {\n  className?: string\n  style?: React.CSSProperties\n}\n\nconst Wrapper = styled.div`\n  .ant-spin {\n    &--inner {\n      margin: 0 auto;\n    }\n  }\n`\n\nexport function Loading(props: PropTypes) {\n  return <Loading3QuartersOutlined {...props} />\n}\n\nexport default React.memo(function Loading({\n  className,\n  style,\n  ...props\n}: PropTypes) {\n  return (\n    <Wrapper className=\"bg-greyF9\">\n      <Row justify=\"center\" className={className}>\n        <Col className=\"ant-spin--inner\">\n          <Loading3QuartersOutlined spin style={style} />\n        </Col>\n      </Row>\n    </Wrapper>\n  )\n})\n","import { Breadcrumb } from 'antd'\nimport styled from 'styled-components'\n\nconst StyledBreadcrumb = styled(Breadcrumb)`\n  &.ant-breadcrumb {\n    font-size: 16px;\n\n    .ant-breadcrumb-link {\n      cursor: pointer;\n    }\n\n    .ant-breadcrumb-link,\n    a {\n      color: #fff;\n    }\n\n    .anticon {\n      font-size: 16px;\n    }\n\n    .ant-breadcrumb-link:hover,\n    a:hover {\n      text-decoration: underline;\n    }\n\n    .ant-breadcrumb-separator {\n      margin: 0 16px;\n      color: #fff;\n    }\n\n    > span:last-child {\n      color: #fff;\n      text-decoration: underline;\n    }\n  }\n`\n\nexport default StyledBreadcrumb\n","import React from 'react'\nimport { ModalProps } from 'antd/lib/modal'\nimport styled from 'styled-components'\nimport { ExclamationCircleFilled } from '@ant-design/icons'\nimport Modal from '@/components/modal'\nimport Button from '@/components/button'\n\ninterface Props extends ModalProps {}\n\nconst StyledModal = styled(Modal)`\n  .ant-modal-footer {\n    border-top: none;\n  }\n`\n\nexport default function LogoutConfirmModal({\n  onOk,\n  onCancel,\n  ...props\n}: Props) {\n  return (\n    <StyledModal\n      {...props}\n      visible\n      centered\n      closable={false}\n      bodyStyle={{ paddingTop: 48 }}\n      width={350}\n      footer={[\n        <div\n          key=\"logout-modal-footer\"\n          className=\"flex items-center justify-center mb-4\">\n          <Button\n            key=\"btn-ok\"\n            color=\"primary\"\n            style={{ minWidth: 120, marginRight: 16 }}\n            onClick={onOk}>\n            確定\n          </Button>\n          <Button\n            key=\"btn-cancel\"\n            color=\"outline\"\n            style={{ minWidth: 120 }}\n            onClick={onCancel}>\n            取消\n          </Button>\n        </div>,\n      ]}>\n      <div className=\"text-center\">\n        <ExclamationCircleFilled\n          className=\"mb-6\"\n          style={{ fontSize: 48, color: '#e53e3e' }}\n        />\n        <div className=\"text-lg font-medium text-darkGrey mb-4\">\n          請問是否確定要登出？\n        </div>\n      </div>\n    </StyledModal>\n  )\n}\n","import React from 'react'\nimport cx from 'classnames'\nimport { Layout, Avatar, Menu } from 'antd'\nimport {\n  SettingOutlined,\n  ExportOutlined,\n  HomeOutlined,\n  CaretDownOutlined,\n} from '@ant-design/icons'\nimport styled from 'styled-components'\nimport Button from '@/components/button'\nimport Breadcrumb from '@/components/breadcrumb'\nimport LogoutConfirmModal from '@/components/logout-confirm-modal'\nimport { useBreadcrumbState, useHeaderContentValue } from '@/hooks/useApp'\nimport useAuth from '@/hooks/useAuth'\nimport useVisible from '@/hooks/useVisible'\nimport history from '@/utils/history'\nimport { envStore } from '@/constants/env'\nimport * as routes from '@/constants/routes'\n\nexport default function AppHeader() {\n  const [items] = useBreadcrumbState()\n  const content = useHeaderContentValue()\n\n  const { logout } = useAuth()\n\n  const [current, setCurrentPath] = React.useState(history.location.pathname)\n\n  const [logoutModalVisible, handleLogoutModalVisible] = useVisible()\n\n  const handleTo = (pathname?: string) => () => {\n    if (pathname) {\n      setCurrentPath(pathname)\n      history.push(pathname)\n    }\n  }\n\n  const getMenuClassName = (targetUrl: string) => {\n    return cx({ 'is--current': current !== '/' && targetUrl.includes(current) })\n  }\n\n  return (\n    <>\n      {logoutModalVisible && (\n        <LogoutConfirmModal\n          onOk={logout as any}\n          onCancel={handleLogoutModalVisible}\n        />\n      )}\n      <Header>\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center\">\n            <Logo onClick={handleTo('/')}>\n              <img\n                src={`${envStore.publicUrl}/images/logo-sm@2x.png`}\n                alt=\"app-logo\"\n                className=\"cursor-pointer\"\n              />\n            </Logo>\n            <Menu\n              mode=\"horizontal\"\n              className=\"bg-transparent ml-3\"\n              style={{ borderBottom: 'none', lineHeight: '46px' }}>\n              <MenuItem\n                key={routes.IMAGE_SCHEDULE}\n                onClick={handleTo(routes.IMAGE_SCHEDULE)}\n                className={getMenuClassName(routes.IMAGE_SCHEDULE)}>\n                <div className=\"flex items-center text-base\">\n                  <SettingOutlined />\n                  影像排班\n                </div>\n              </MenuItem>\n              <SubMenu\n                key={routes.REPORT_LIST}\n                className={getMenuClassName(routes.REPORT_LIST)}\n                popupOffset={[-14, 0]}\n                popupClassName=\"rounded\"\n                title={\n                  <div className=\"flex items-center text-base\">\n                    <SettingOutlined />\n                    清單查詢\n                    <CaretDownOutlined className=\"ml-2 mr-0\" />\n                  </div>\n                }>\n                <Menu.Item\n                  key={routes.REPORT_LIST}\n                  onClick={handleTo(routes.REPORT_LIST)}\n                  className={getMenuClassName(routes.REPORT_LIST)}>\n                  <div className=\"flex items-center text-sm\">\n                    <SettingOutlined />\n                    清單查詢\n                  </div>\n                </Menu.Item>\n                <Menu.Item\n                  key={routes.YELLOW_CARD_INQUIRY}\n                  onClick={handleTo(routes.YELLOW_CARD_INQUIRY)}\n                  className={getMenuClassName(routes.YELLOW_CARD_INQUIRY)}>\n                  <div className=\"flex items-center text-sm\">\n                    <SettingOutlined />\n                    黃卡新檢索\n                  </div>\n                </Menu.Item>\n                <Menu.Item\n                  key={routes.BLOOD_BANK_REVIEW}\n                  onClick={handleTo(routes.BLOOD_BANK_REVIEW)}\n                  className={getMenuClassName(routes.BLOOD_BANK_REVIEW)}>\n                  <div className=\"flex items-center text-sm\">\n                    <SettingOutlined />\n                    血庫備血審查作業\n                  </div>\n                </Menu.Item>\n              </SubMenu>\n              <MenuItem\n                key={routes.REPORT_INQUIRY}\n                onClick={handleTo(routes.REPORT_INQUIRY)}\n                className={getMenuClassName(routes.REPORT_INQUIRY)}>\n                <div className=\"flex items-center text-base\">\n                  <SettingOutlined />\n                  輸入報告\n                </div>\n              </MenuItem>\n              <SubMenu\n                key={routes.REPORT_TEMPLATE_LIST}\n                className={getMenuClassName(routes.REPORT_TEMPLATE_LIST)}\n                popupOffset={[-14, 0]}\n                popupClassName=\"rounded\"\n                title={\n                  <div className=\"flex items-center text-base\">\n                    <SettingOutlined />\n                    報告模版\n                    <CaretDownOutlined className=\"ml-2 mr-0\" />\n                  </div>\n                }>\n                <Menu.Item\n                  key={routes.REPORT_TEMPLATE_LIST}\n                  onClick={handleTo(routes.REPORT_TEMPLATE_LIST)}\n                  className={getMenuClassName(routes.REPORT_TEMPLATE_LIST)}>\n                  <div className=\"flex items-center text-sm\">\n                    <SettingOutlined />\n                    結構式報告模版\n                  </div>\n                </Menu.Item>\n                <Menu.Item\n                  key={routes.PHRASE_LIST}\n                  onClick={handleTo(routes.PHRASE_LIST)}\n                  className={getMenuClassName(routes.PHRASE_LIST)}>\n                  <div className=\"flex items-center text-sm\">\n                    <SettingOutlined />\n                    片語模版\n                  </div>\n                </Menu.Item>\n              </SubMenu>\n              <MenuItem\n                key=\"outside\"\n                onClick={handleTo('/')}\n                className={getMenuClassName('outside')}>\n                <div className=\"flex items-center text-base\">\n                  <SettingOutlined />\n                  醫學影像教學平台\n                </div>\n              </MenuItem>\n            </Menu>\n          </div>\n          <div className=\"flex items-center\">\n            <div className=\"text-white text-lg mr-4\">Hi, 使用者</div>\n            <Avatar className=\"flex items-center h-12 w-12\">\n              <div className=\"text-2xl\">C</div>\n            </Avatar>\n            <Button\n              icon={\n                <ExportOutlined\n                  className=\"text-white text-2xl\"\n                  style={{ marginRight: 0 }}\n                />\n              }\n              onClick={handleLogoutModalVisible}\n              className=\"ml-4 bg-transparent border border-white rounded pr-1 hover--none\"\n              style={{ minWidth: 35, borderColor: '#fff' }}\n            />\n          </div>\n        </div>\n        <div className=\"mt-3 ml-4 pb-0 flex justify-between\">\n          <Breadcrumb\n            separator=\">\"\n            style={{ minHeight: 32, display: 'flex', alignItems: 'center' }}>\n            <Breadcrumb.Item onClick={handleTo('/')}>\n              <HomeOutlined className=\"relative\" style={{ top: -4 }} />\n            </Breadcrumb.Item>\n            {items.map((x, idx) => (\n              <Breadcrumb.Item\n                key={`breadcrumb-${idx}`}\n                onClick={handleTo(x.href)}>\n                {x.name}\n              </Breadcrumb.Item>\n            ))}\n          </Breadcrumb>\n          {content}\n        </div>\n      </Header>\n    </>\n  )\n}\n\nconst Header = styled(Layout.Header)`\n  &.ant-layout-header {\n    height: auto;\n    padding: 16px 1.7rem 10px 2.1rem;\n    background: ${p => `linear-gradient(-90deg, #42c2b8, ${p.theme.primary})`};\n    color: ${p => p.theme.primary};\n    box-shadow: 0 0 20px ${p => p.theme.purple150};\n  }\n\n  .anticon {\n    cursor: pointer;\n  }\n`\n\nconst MenuItem = styled(Menu.Item)`\n  &.ant-menu-item {\n    margin: 0 2px !important;\n    padding: 0 10px !important;\n    border-radius: 6px;\n    border-bottom: none !important;\n    color: #fff;\n\n    &.is--current,\n    &:hover {\n      color: #fff !important;\n      background: rgba(24, 144, 138, 1) !important;\n    }\n  }\n\n  &.ant-menu-item-selected {\n    color: #fff !important;\n  }\n`\n\nconst SubMenu = styled(Menu.SubMenu)`\n  &.ant-menu-submenu {\n    margin: 0 5px !important;\n    padding: 0 15px !important;\n    border-radius: 6px;\n    border-bottom: none !important;\n\n    .ant-menu-submenu-title {\n      color: #fff;\n    }\n\n    &.is--current,\n    &:hover {\n      background: rgba(24, 144, 138, 1) !important;\n    }\n  }\n`\n\nconst Logo = styled.div``\n","import React from 'react'\n\nexport default React.lazy(() => import('./home'))\n","import React from 'react'\nimport { Route, Switch } from 'react-router-dom'\nimport Loading from '@/components/loading'\n\nconst Login = React.lazy(() => import('./login'))\n\nconst ForgetPassword = React.lazy(() => import('./forget-password'))\n\nexport default function LoginRoute() {\n  return (\n    <React.Suspense fallback={<Loading />}>\n      <Switch>\n        <Route exact path=\"/\" component={Login} />\n        <Route path=\"/login\" component={Login} />\n        <Route path=\"/forget-password\" component={ForgetPassword} />\n        <Route component={Login} />\n      </Switch>\n    </React.Suspense>\n  )\n}\n","import React from 'react'\nimport { Switch, Route } from 'react-router-dom'\nimport { Layout } from 'antd'\nimport ErrorBoundary from '@/components/error-boundary'\nimport Exception from '@/components/exception'\nimport Loading from '@/components/loading'\nimport AppHeader from '@/components/app-header'\nimport { useRoutes, RouteItem } from '@/constants/routes'\nimport Home from '@/containers/home'\nimport Login from '@/containers/login'\nimport useAuth from '@/hooks/useAuth'\n\nfunction App() {\n  const { isAuthenticated } = useAuth()\n\n  const routes = useRoutes()\n\n  const renderRouteItem = React.useCallback((item: RouteItem) => {\n    const path = `${item.path}${item.param ? `/${item.param}` : ''}`\n\n    return (\n      <Route\n        exact\n        key={item.id}\n        path={path}\n        component={\n          item.component ? item.component : () => <h1> {item.title} </h1>\n        }\n      />\n    )\n  }, [])\n\n  const renderRoute: any = React.useCallback(\n    (data: RouteItem[]) => {\n      return data.map((item: RouteItem) => {\n        return [\n          renderRouteItem(item),\n          item.children && renderRoute(item.children),\n          item.hide && renderRoute(item.hide),\n        ]\n      })\n    },\n    [renderRouteItem]\n  )\n\n  return (\n    <ErrorBoundary>\n      {!isAuthenticated && <Login />}\n      {isAuthenticated && (\n        <Layout>\n          <AppHeader />\n          <React.Suspense fallback={<Loading />}>\n            <Switch>\n              <Route exact path=\"/\" component={Home} />\n              {renderRoute(routes)}\n              <Route component={Exception} />\n            </Switch>\n          </React.Suspense>\n        </Layout>\n      )}\n    </ErrorBoundary>\n  )\n}\n\nexport default App\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import './bootstrap'\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport { Router } from 'react-router-dom'\nimport { DndProvider } from 'react-dnd'\nimport { HTML5Backend } from 'react-dnd-html5-backend'\nimport { RecoilRoot, MutableSnapshot } from 'recoil'\nimport { ConfigProvider } from 'antd'\nimport zhTW from 'antd/lib/locale/zh_TW'\nimport { ThemeProvider } from 'styled-components'\nimport { SWRConfig } from 'swr'\nimport request from '@/utils/request'\nimport history from '@/utils/history'\nimport { createPack } from '@/utils/createPack'\nimport { redirect } from '@/utils/webHelper'\nimport { AuthProvider } from '@/hooks/useAuth'\nimport App from './app'\nimport theme from './theme'\nimport * as serviceWorker from './serviceWorker'\nimport './index.css'\n\nredirect()\n\nconst initializeState = ({ set }: MutableSnapshot) => {\n  // set('reportTemplateListState', Store.get('reportTemplateListState'))\n  // for(const [key, value] of Storage.entries()) {\n  //   set(myLookupOfAtomWithKey(key), JSON.parse(value).value);\n  // }\n}\n\nconst EnhancedApp = createPack(\n  <RecoilRoot initializeState={initializeState} />,\n  <ThemeProvider theme={theme} />,\n  <ConfigProvider locale={zhTW} />,\n  <AuthProvider />,\n  <SWRConfig value={{ suspense: true, fetcher: request }} />,\n  <DndProvider backend={HTML5Backend} />,\n  <Router history={history} />\n)\n\n// ReactDOM.unstable_createRoot(document.getElementById('root') as any).render(\n//   <EnhancedApp>\n//     <App />\n//   </EnhancedApp>\n// )\nReactDOM.render(\n  <EnhancedApp>\n    <App />\n  </EnhancedApp>,\n  document.getElementById('root')\n)\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister()\n","import React from 'react'\nimport { Checkbox } from 'antd'\nimport { CheckboxProps } from 'antd/lib/checkbox'\nimport styled from 'styled-components'\nimport { RefProps } from '@/constants/types'\n\nconst CheckboxGroup = Checkbox.Group\n\nconst StyledCheckbox = styled(Checkbox)`\n  .ant-checkbox-checked .ant-checkbox-inner {\n    background-color: ${p => p.theme.primary};\n    border-color: ${p => p.theme.primary};\n  }\n\n  &.ant-checkbox-wrapper:hover .ant-checkbox-inner,\n  .ant-checkbox:hover .ant-checkbox-inner,\n  .ant-checkbox-input:focus + .ant-checkbox-inner {\n    border-color: ${p => p.theme.primary};\n  }\n\n  .ant-checkbox-checked .ant-checkbox-inner:after {\n    border: 2px solid #fff;\n    border-top: 0;\n    border-left: 0;\n  }\n\n  .ant-checkbox-inner {\n    border: 1px solid ${p => p.theme.secondary};\n  }\n\n  &.is--normal {\n    font-size: 14px !important;\n    font-weight: normal !important;\n  }\n`\n\ntype Props = RefProps & CheckboxProps\n\nconst CheckboxComponent: React.ElementType<Props> = React.forwardRef<\n  typeof StyledCheckbox,\n  Props\n>(({ ...props }, ref) => <StyledCheckbox forwardRef={ref} {...props} />)\n\nCheckboxComponent.displayName = 'Checkbox'\n\nexport { CheckboxComponent as Checkbox, CheckboxGroup }\n\nexport default CheckboxComponent\n","import React from 'react'\nimport { atom, useRecoilState, selectorFamily } from 'recoil'\nimport {\n  find,\n  mergeAll,\n  map,\n  values,\n  head,\n  pathOr,\n  flatten,\n  length,\n  of,\n  filter,\n} from 'ramda'\nimport Store from 'store'\nimport { setComponent } from '@/components/snippet-template-list'\nimport { Snippets, SnippetProps, ReportTemplate } from '@/constants/types'\nconst { compose } = require('ramda')\n\n// 模版分類\nconst snippetCategoryOfReport = {\n  PATHOLOGICAL_DIAGNOSIS: 'Pathological diagnosis',\n  GROSS: 'Gross',\n  MICROSCOPY: 'Microscopy',\n  NOTES: 'Notes',\n  REFERENCES: 'References',\n}\n\nconst fakeReportTemplateList: ReportTemplate[] = setComponent(\n  Store.get('reportTemplateListState')\n)\n\nconst defaultSnippetsOfReport = compose(\n  mergeAll,\n  map((key: string) => ({ [key]: [] })),\n  values\n)(snippetCategoryOfReport)\n\nconst reportTemplateListState = atom({\n  key: 'reportTemplateListState',\n  default: fakeReportTemplateList,\n})\n\nexport const snippetsOfReportState = selectorFamily<\n  ReportTemplate,\n  React.Key | undefined\n>({\n  key: 'reportSnippetsState',\n  get: id => ({ get }) => {\n    return compose(\n      // pathOr(defaultSnippetsOfReport, ['setting']),\n      find((x: ReportTemplate) => `${x.id}` === `${id}`)\n    )(setComponent(get(reportTemplateListState)))\n  },\n})\n\nconst reportPreviewState = atom({\n  key: 'reportPreviewState',\n  default: false,\n})\n\nconst categoryState = atom<string>({\n  key: 'categoryState',\n  default: compose(head, values)(snippetCategoryOfReport),\n})\n\n// 報告模版清單\nexport function useReportTemplates() {\n  const [reportTemplates] = useRecoilState(reportTemplateListState)\n\n  return {\n    content: reportTemplates,\n    total: length(reportTemplates),\n  }\n}\n\n// 報告模版清單\nexport function useReportTemplateState() {\n  return useRecoilState(reportTemplateListState)\n}\n\n// 模版報告資料\nexport function useReportTemplate({\n  id,\n  data,\n}: {\n  id?: React.Key\n  data?: any\n}) {\n  const [reportTemplateList] = useRecoilState(reportTemplateListState)\n\n  const [reportTemplate, setReportTemplate] = React.useState<ReportTemplate>({\n    setting: defaultSnippetsOfReport,\n  } as any)\n\n  // const [reportTemplate] = useRecoilState<ReportTemplate>(\n  //   snippetsOfReportState(id) as any\n  // )\n\n  React.useEffect(() => {\n    if (data?.id) {\n      setReportTemplate(compose(head, setComponent, of)(data))\n    }\n  }, [data])\n\n  React.useEffect(() => {\n    if (id) {\n      setReportTemplate(\n        compose(find((x: ReportTemplate) => `${x.id}` === `${id}`))(\n          setComponent(reportTemplateList)\n        )\n      )\n    }\n  }, [id]) // eslint-disable-line\n\n  let _snippetList = pathOr(defaultSnippetsOfReport, ['setting'])(\n    reportTemplate\n  )\n\n  React.useEffect(() => {\n    setSnippetList(_snippetList)\n  }, [JSON.stringify(_snippetList)]) // eslint-disable-line\n\n  const [snippetList, setSnippetList] = React.useState<Snippets>(_snippetList)\n\n  let snippetById: { [key: string]: SnippetProps } = {}\n\n  return {\n    reportTemplate,\n    snippetList,\n    setSnippetList,\n    total: compose(\n      length,\n      filter((x: SnippetProps) => x.type !== 'TemplateSectionHeader'),\n      flatten,\n      values\n    )(snippetList),\n    snippetById: compose(\n      map((x: SnippetProps) => (snippetById[x.id] = x)),\n      flatten,\n      values\n    )(snippetList),\n  }\n}\n\n// 切換編輯/檢視模式\nexport function useReportPreview() {\n  const [isPreview, setIsPreview] = useRecoilState(reportPreviewState)\n\n  return [isPreview, () => setIsPreview(prev => !prev)] as [boolean, () => void]\n}\n\n// 更方便切換編輯/檢視模式\nexport function useToggleReportPreview(state: boolean = false) {\n  const [isPreview, setIsPreview] = useRecoilState(reportPreviewState)\n\n  React.useEffect(() => {\n    setIsPreview(state)\n\n    return () => {\n      setIsPreview(false)\n    }\n  }, [state]) // eslint-disable-line\n\n  return [isPreview, () => setIsPreview(prev => !prev)] as [boolean, () => void]\n}\n\n// 編輯報告/模版時，當前的分類\nexport function useCurrentCategoryOfSnippet() {\n  return useRecoilState(categoryState)\n}\n","import { History, createHashHistory } from 'history'\nimport { envStore } from '@/constants/env'\n\nconst history = createHashHistory({ basename: envStore.appBaseName })\n\nexport default history as NonNullable<History>\n","import { Collapse } from 'antd'\nimport styled from 'styled-components'\n\nconst borderRadius = '8px'\n\nconst StyledCollapse = styled(Collapse)`\n  &.ant-collapse {\n    border-radius: ${borderRadius};\n    border-bottom: none;\n\n    > .ant-collapse-item > .ant-collapse-header {\n      padding-left: 0;\n      background: ${p => p.theme.primary};\n      color: #fff;\n    }\n\n    &.header-pl-clear > .ant-collapse-item > .ant-collapse-header {\n      padding-left: 16px;\n    }\n\n    > .ant-collapse-item:first-child > .ant-collapse-header {\n      border-top-left-radius: ${borderRadius};\n      border-top-right-radius: ${borderRadius};\n    }\n\n    > .ant-collapse-item:last-child {\n      border-bottom: none;\n    }\n\n    > .ant-collapse-item:last-child > .ant-collapse-content {\n      border-bottom-left-radius: ${borderRadius};\n      border-bottom-right-radius: ${borderRadius};\n    }\n\n    > .ant-collapse-item.ant-collapse-item-active:last-child {\n      border-bottom: 1px solid #d9d9d9;\n    }\n\n    > .ant-collapse-item:not(.ant-collapse-item-active):last-child\n      > .ant-collapse-header {\n      border-bottom-left-radius: ${borderRadius};\n      border-bottom-right-radius: ${borderRadius};\n    }\n  }\n`\n\nexport default StyledCollapse\n","import React from 'react'\nimport { ModalProps as AntModalProps } from 'antd/lib/modal'\nimport Modal from '@/components/modal'\nimport Button from '@/components/button'\n\nexport interface ModalProps<T = any>\n  extends Omit<AntModalProps, 'onOk' | 'onCancel'> {\n  item?: T\n  onOk?: (data?: any) => void\n  onCancel: () => void\n  children?: React.ReactNode\n}\n\nfunction TemplateModal<T = any>({\n  onCancel,\n  onOk,\n  item,\n  children,\n  ...props\n}: ModalProps<T>) {\n  const handleOk = () => {\n    if (onOk) {\n      onOk()\n    }\n  }\n  return (\n    <Modal\n      visible\n      onCancel={onCancel}\n      width={650}\n      maskClosable={false}\n      keyboard={false}\n      footer={[\n        <Button\n          key=\"btn-cancel\"\n          color=\"outline\"\n          style={{ minWidth: 80, marginRight: 16 }}\n          onClick={onCancel}>\n          取消\n        </Button>,\n        <Button\n          key=\"btn-save\"\n          color=\"primary\"\n          style={{ minWidth: 80 }}\n          onClick={handleOk}>\n          儲存\n        </Button>,\n      ]}\n      {...props}>\n      {children}\n    </Modal>\n  )\n}\n\nexport { TemplateModal as Modal }\n\nexport default TemplateModal\n","import React from 'react'\nimport cx from 'classnames'\nimport { Card } from 'antd'\nimport { CardProps } from 'antd/lib/card'\nimport { FontColorsOutlined } from '@ant-design/icons'\nimport styled from 'styled-components'\nimport { useReportPreview } from '@/data/useReportTemplate'\n// import { isNil } from '@/utils/webHelper'\n\nconst StyledCard = styled(Card)`\n  &.ant-card {\n    border-radius: 10px;\n    border: none;\n    cursor: move;\n  }\n\n  .ant-card-head {\n    padding-left: 18px;\n    border-bottom: none;\n    color: ${p => p.theme.darkGrey};\n    font-size: 14px;\n    font-weight: 600;\n  }\n\n  &.ant-card-head--hide .ant-card-head {\n    display: none;\n  }\n\n  &.ant-card-body--hide {\n    .ant-card-head {\n      padding-bottom: 16px;\n      border-bottom: 1px dashed #f0f0f0;\n    }\n\n    .ant-card-body {\n      display: none;\n    }\n  }\n\n  &.is--preview .ant-card-head {\n    min-height: auto;\n  }\n\n  &.is--preview .ant-card-head-title {\n    padding-top: 0;\n  }\n\n  &.is--preview .ant-card-body {\n    padding-top: 12px;\n    padding-bottom: 8px;\n  }\n\n  .ant-card-head-title {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    padding-bottom: 0;\n  }\n\n  .ant-card-body {\n    padding-top: 6px;\n    padding-left: 26px;\n    padding-bottom: 20px;\n  }\n`\n\ninterface Props extends CardProps {\n  titleVisible?: boolean\n  bodyVisible?: boolean\n  onEdit?: () => void\n  onDelete?: () => void\n}\n\nfunction SnippetTemplateWrapper({\n  title,\n  children,\n  onDelete,\n  onEdit,\n  titleVisible = false,\n  bodyVisible = true,\n  ...props\n}: Props) {\n  const [isPreview] = useReportPreview()\n\n  return (\n    <StyledCard\n      title={\n        <div className=\"flex items-center\">\n          {!isPreview && <FontColorsOutlined className=\"mr-3\" />}\n          {title || '模版標題 (點鉛筆圖示可進行編輯)'}\n        </div>\n      }\n      className={cx({\n        // 'ant-card-head--hide': isNil(title) && !titleVisible,\n        'ant-card-body--hide': !bodyVisible,\n        // 'is--preview': isPreview,\n      })}\n      {...props}>\n      {children}\n    </StyledCard>\n  )\n}\n\nexport default SnippetTemplateWrapper\n","import React from 'react'\nimport { Form } from 'antd'\nimport { Input, TextArea } from '@/components/input'\nimport Checkbox from '@/components/checkbox'\nimport { Modal, ModalProps } from '@/components/snippet-template-modal'\nimport TemplateWrapper from '@/components/snippet-template-wrapper'\nimport { createFormItemLayout } from '@/utils/form'\nimport { ReportTemplateSetting, ReportTemplateProps } from '@/constants/types'\nimport { useUpdateSnippet } from '@/services/reportTemplate'\n\ninterface Setting extends ReportTemplateSetting {\n  defaultValue?: string\n  multipleLine?: boolean\n}\n\nexport default function SnippetTemplateInputText(props: ReportTemplateProps) {\n  const { editModalVisible, handleEditModalVisible, onUpdate, item } = props\n\n  const { setting, handleOk } = useUpdateSnippet<Setting>({ item, onUpdate })\n\n  const inputProps = {\n    bordered: false,\n    className: 'w-2/3',\n    placeholder: setting.tooltip || '輸入內容',\n    defaultValue: setting.defaultValue,\n  }\n\n  return (\n    <>\n      {editModalVisible && (\n        <InputTextModal\n          item={setting}\n          onCancel={handleEditModalVisible}\n          onOk={handleOk}\n        />\n      )}\n      <TemplateWrapper title={setting.text || ''}>\n        <Form.Item noStyle name={['data', item.id]}>\n          {setting.multipleLine ? (\n            <TextArea {...inputProps} autoSize={{ minRows: 3 }} />\n          ) : (\n            <Input {...inputProps} />\n          )}\n        </Form.Item>\n      </TemplateWrapper>\n    </>\n  )\n}\n\nfunction InputTextModal({\n  onOk,\n  onCancel,\n  item,\n  ...props\n}: ModalProps<Setting>) {\n  const [form] = Form.useForm()\n\n  const handleOk = () => {\n    form.validateFields().then(values => {\n      if (onOk) {\n        onOk(values)\n      }\n      onCancel()\n    })\n  }\n\n  return (\n    <Modal<Setting>\n      {...props}\n      title={\n        <>\n          <div>\n            Text\n            <div className=\"inline ml-2 text-sm text-gray-600\">\n              typically used for description something.\n            </div>\n          </div>\n        </>\n      }\n      onCancel={onCancel}\n      onOk={handleOk}>\n      <Form\n        {...createFormItemLayout(5, 16)}\n        labelAlign=\"left\"\n        form={form}\n        initialValues={item}>\n        <Form.Item label=\"Text\" name=\"text\">\n          <Input />\n        </Form.Item>\n        <Form.Item label=\"Default Value\" name=\"defaultValue\">\n          <Input />\n        </Form.Item>\n        <Form.Item label=\"Tooltip\" name=\"tooltip\">\n          <Input />\n        </Form.Item>\n        <Form.Item\n          label=\"Multiple Lines\"\n          name=\"multipleLine\"\n          valuePropName=\"checked\">\n          <Checkbox />\n        </Form.Item>\n      </Form>\n    </Modal>\n  )\n}\n","import React from 'react'\nimport { InputNumber } from 'antd'\nimport { InputNumberProps } from 'antd/lib/input-number'\nimport styled from 'styled-components'\nimport { RefProps } from '@/constants/types'\nimport { percent, currency, thosandSeprartor } from '@/utils/form'\n\ntype Props = RefProps & InputNumberProps & { bordered?: boolean }\n\nconst StyledInputNumber = styled(InputNumber).attrs({\n  min: 0 as any, // dont know why error\n})<Props>`\n  &.ant-input-number {\n    border-color: ${p => p.theme.primary};\n\n    ::placeholder {\n      color: red;\n    }\n  }\n\n  &.ant-input-number-focused,\n  &.ant-input-number:focus,\n  &.ant-input-number:hover {\n    border-color: ${p => p.theme.primary};\n  }\n\n  &.ant-input-number-focused:not(.ant-input-number-borderless),\n  &.ant-input-number:focus:not(.ant-input-number-borderless) {\n    box-shadow: 0 0 0 1px ${p => p.theme.primary};\n  }\n\n  &.ant-input-number-borderless,\n  &.ant-input-number-borderless:hover,\n  &.ant-input-number-borderless:focus,\n  &.ant-input-number-borderless-focused,\n  &.ant-input-number-borderless-disabled,\n  &.ant-input-number-borderless[disabled] {\n    border: none;\n    border-bottom: 1px solid ${p => p.theme.primary};\n  }\n`\n\nexport const ThousandSeprartorInput = React.forwardRef<\n  typeof InputNumber,\n  Props\n>(({ ...props }, ref) => (\n  <StyledInputNumber forwardRef={ref} {...props} {...thosandSeprartor} />\n))\n\nexport const CurrencyInput = React.forwardRef<typeof InputNumber, Props>(\n  ({ ...props }, ref) => (\n    <StyledInputNumber forwardRef={ref} {...props} {...currency} />\n  )\n)\n\nexport const PercentInput = React.forwardRef<typeof InputNumber, Props>(\n  ({ ...props }, ref) => (\n    <StyledInputNumber forwardRef={ref} {...props} {...percent} />\n  )\n)\n\nThousandSeprartorInput.displayName = 'ThousandSeprartorInput'\n\nCurrencyInput.displayName = 'CurrencyInput'\n\nPercentInput.displayName = 'PercentInput'\n\nexport { StyledInputNumber as InputNumber }\n\nexport default StyledInputNumber\n","import React from 'react'\nimport { Form } from 'antd'\nimport Input from '@/components/input'\nimport InputNumber from '@/components/input-number'\nimport { Modal, ModalProps } from '@/components/snippet-template-modal'\nimport TemplateWrapper from '@/components/snippet-template-wrapper'\nimport { createFormItemLayout } from '@/utils/form'\nimport { ReportTemplateSetting, ReportTemplateProps } from '@/constants/types'\nimport { useUpdateSnippet } from '@/services/reportTemplate'\n\ninterface Setting extends ReportTemplateSetting {\n  defaultValue?: number\n  max?: number\n  min?: number\n  units?: string\n}\n\nexport default function SnippetTemplateInputNumber(props: ReportTemplateProps) {\n  const { editModalVisible, handleEditModalVisible, item, onUpdate } = props\n\n  const { setting, handleOk } = useUpdateSnippet<Setting>({ item, onUpdate })\n\n  return (\n    <>\n      {editModalVisible && (\n        <InputNumberModal\n          item={setting}\n          onCancel={handleEditModalVisible}\n          onOk={handleOk}\n        />\n      )}\n      <TemplateWrapper title={setting.text || ''}>\n        <Form.Item noStyle name={['data', item.id]}>\n          <InputNumber\n            style={{ width: '33.333333%' }}\n            className=\"ant-input-number-borderless\"\n            defaultValue={setting.defaultValue}\n            min={setting.min}\n            max={setting.max}\n            formatter={value => `${setting.units || ''} ${value}`}\n            placeholder={setting.tooltip || '輸入數值'}\n          />\n        </Form.Item>\n      </TemplateWrapper>\n    </>\n  )\n}\n\nfunction InputNumberModal({ onOk, onCancel, item, ...props }: ModalProps) {\n  const [form] = Form.useForm()\n\n  const handleOk = () => {\n    form.validateFields().then(values => {\n      if (onOk) {\n        onOk(values)\n      }\n      onCancel()\n    })\n  }\n\n  return (\n    <Modal\n      {...props}\n      title={\n        <>\n          <div>\n            Number\n            <div className=\"inline ml-2 text-sm text-gray-600\">\n              typically used for input number.\n            </div>\n          </div>\n        </>\n      }\n      onOk={handleOk}\n      onCancel={onCancel}>\n      <Form\n        {...createFormItemLayout(5, 16)}\n        labelAlign=\"left\"\n        form={form}\n        initialValues={item}>\n        <Form.Item label=\"Text\" name=\"text\">\n          <Input />\n        </Form.Item>\n        <Form.Item label=\"Default Value\" name=\"defaultValue\">\n          <Input />\n        </Form.Item>\n        <Form.Item label=\"Tooltip\" name=\"tooltip\">\n          <Input />\n        </Form.Item>\n        <Form.Item label=\"Minimum Value\" name=\"min\">\n          <InputNumber />\n        </Form.Item>\n        <Form.Item label=\"Maximum Value\" name=\"max\">\n          <InputNumber />\n        </Form.Item>\n        <Form.Item label=\"Units\" name=\"units\">\n          <Input />\n        </Form.Item>\n      </Form>\n    </Modal>\n  )\n}\n","// tslint:disable: quotemark no-implicit-dependencies no-shadowed-variable no-var-requires\nimport React from 'react'\nimport { TableProps } from 'antd/lib/table'\nimport { FormInstance } from 'antd/lib/form'\nimport Table from '@/components/table'\n\ntype EditableTableProps<T> = Omit<TableProps<T>, 'onChange'> & {\n  value?: T[]\n  form: FormInstance\n  onChange?(changedValue: T[] | null): void\n  onRowAdd: (form: FormInstance) => any\n  onRowDelete: (value: { id: React.Key; form: FormInstance }) => any\n}\n\nexport default function EditableTable<T = any>({\n  form,\n  value,\n  onChange,\n  onRowAdd,\n  onRowDelete,\n  ...props\n}: EditableTableProps<T>) {\n  const triggerChange = (changedValue: T[]) => {\n    if (onChange) {\n      onChange(changedValue)\n    }\n  }\n\n  const handleAdd = () => {\n    triggerChange(onRowAdd(form))\n  }\n\n  const handleDelete = (id: string) => {\n    triggerChange(onRowDelete({ id, form }))\n  }\n\n  return (\n    <Table\n      {...props}\n      rowKey=\"id\"\n      pagination={false}\n      size=\"small\"\n      dataSource={value as any}\n      onAddRowClick={handleAdd}\n      onDeleteRowClick={handleDelete}\n      editable={true}\n    />\n  )\n}\n","import React from 'react'\nimport { Form } from 'antd'\nimport { ColumnProps } from 'antd/lib/table'\nimport { FormInstance } from 'antd/lib/form'\nimport { concat, __, pathOr, invoker, filter } from 'ramda'\nimport Input from '@/components/input'\nimport Checkbox from '@/components/checkbox'\nimport EditableTable from '@/components/editable-table'\nimport { uuid } from '@/utils/webHelper'\nimport { createFormItemLayout } from '@/utils/form'\nimport { ReportTemplateSetting } from '@/constants/types'\nimport { Modal, ModalProps } from './snippet-template-modal'\nconst { compose } = require('ramda')\n\nexport interface Setting extends ReportTemplateSetting {\n  options?: Option[]\n}\n\nexport type Option = {\n  id: React.Key\n  text?: string\n  selected?: boolean\n  freetext?: boolean\n}\n\nexport const defaultValue: Setting = {\n  options: [\n    {\n      id: uuid(),\n      text: '預設選項 1',\n      selected: true,\n      freetext: false,\n    },\n    {\n      id: uuid(),\n      text: '預設選項 2',\n      selected: true,\n      freetext: false,\n    },\n    {\n      id: uuid(),\n      text: '預設選項 3',\n      selected: true,\n      freetext: false,\n    },\n  ],\n}\n\nexport function SnippetTemplateSelectionModal({\n  onCancel,\n  onOk,\n  item,\n  ...props\n}: ModalProps) {\n  const [form] = Form.useForm()\n\n  const handleOk = () => {\n    form.validateFields().then(values => {\n      if (onOk) {\n        onOk(values)\n      }\n      onCancel()\n    })\n  }\n\n  const handleRowAdd = (form: FormInstance) => {\n    return compose(\n      concat(__, [\n        {\n          id: uuid(),\n          text: undefined,\n          selected: true,\n          freetext: false,\n        },\n      ]),\n      pathOr([], ['options']),\n      invoker(0, 'getFieldsValue')()\n    )(form)\n  }\n\n  const handleRowDelete = ({\n    id,\n    form,\n  }: {\n    id: React.Key\n    form: FormInstance\n  }) => {\n    return compose(\n      filter((x: any) => x.id !== id),\n      pathOr([], ['options']),\n      invoker(0, 'getFieldsValue')()\n    )(form)\n  }\n\n  const columns: ColumnProps<Option>[] = [\n    {\n      title: '選項名稱',\n      render: (v, r, idx) => (\n        <Form.Item noStyle name={['options', idx, 'text']}>\n          <Input />\n        </Form.Item>\n      ),\n    },\n    {\n      title: '是否可選',\n      align: 'center',\n      render: (v, r, idx) => (\n        <Form.Item\n          noStyle\n          name={['options', idx, 'selected']}\n          valuePropName=\"checked\">\n          <Checkbox />\n        </Form.Item>\n      ),\n    },\n    {\n      title: '是否可輸入',\n      align: 'center',\n      render: (v, r, idx) => (\n        <Form.Item\n          noStyle\n          name={['options', idx, 'freetext']}\n          valuePropName=\"checked\">\n          <Checkbox />\n        </Form.Item>\n      ),\n    },\n  ]\n\n  return (\n    <Modal\n      {...props}\n      title={\n        <>\n          <div>Single Selection List</div>\n          <div className=\"mt-1 text-sm text-gray-600\">\n            Typically used for shorter lists so that all responses are visible\n            as radio buttons. Only allow a single selection.\n          </div>\n        </>\n      }\n      onCancel={onCancel}\n      onOk={handleOk}>\n      <Form\n        {...createFormItemLayout(3, 16)}\n        labelAlign=\"left\"\n        form={form}\n        initialValues={item}>\n        <Form.Item label=\"Text\" name=\"text\">\n          <Input />\n        </Form.Item>\n        <Form.Item label=\"Tooltip\" name=\"tooltip\">\n          <Input />\n        </Form.Item>\n        <Form.Item label=\"Options\" />\n        <Form.Item noStyle name=\"options\">\n          <EditableTable\n            columns={columns}\n            form={form}\n            onRowAdd={handleRowAdd}\n            onRowDelete={handleRowDelete}\n          />\n        </Form.Item>\n      </Form>\n    </Modal>\n  )\n}\n","import React from 'react'\nimport { Form } from 'antd'\nimport cx from 'classnames'\nimport { pathOr } from 'ramda'\nimport { Checkbox, CheckboxGroup } from '@/components/checkbox'\nimport Input from '@/components/input'\nimport TemplateWrapper from '@/components/snippet-template-wrapper'\nimport {\n  SnippetTemplateSelectionModal,\n  Setting,\n  Option,\n  defaultValue,\n} from '@/components/snippet-template-selection-modal'\nimport { mapIndexed } from '@/utils/webHelper'\nimport { ReportTemplateProps } from '@/constants/types'\nimport { useUpdateSnippet } from '@/services/reportTemplate'\nconst { compose } = require('ramda')\n\nfunction SnippetTemplateMultipleSelection(props: ReportTemplateProps) {\n  const { item, editModalVisible, handleEditModalVisible, onUpdate } = props\n\n  const { setting, handleOk } = useUpdateSnippet<Setting>({\n    item,\n    onUpdate,\n    defaultValue,\n  })\n\n  return (\n    <>\n      {editModalVisible && (\n        <SnippetTemplateSelectionModal\n          item={setting}\n          onCancel={handleEditModalVisible}\n          onOk={handleOk}\n          title={\n            <>\n              <div>Multiple Selection List</div>\n              <div className=\"mt-1 text-sm text-gray-600\">\n                typically used for shorter lists so that all responses are\n                visible as checkboxes. Allows Multiple selections.\n              </div>\n            </>\n          }\n        />\n      )}\n      <TemplateWrapper\n        title={setting.text || ''}\n        bodyStyle={{ paddingLeft: 36 }}>\n        <Form.Item noStyle name={['data', item.id]}>\n          <CheckboxGroup>\n            {compose(\n              mapIndexed((x: Option, idx: number) => (\n                <Checkbox\n                  key={x.id}\n                  className={cx('block ml-0', { 'mt-1': idx > 0 })}\n                  defaultChecked={false}\n                  value={`${idx}`}>\n                  {x.text}\n                  {x.freetext && (\n                    <Input\n                      bordered={false}\n                      size=\"small\"\n                      placeholder=\"輸入備註\"\n                      className=\"ml-4 w-1/3\"\n                    />\n                  )}\n                </Checkbox>\n              )),\n              pathOr([], ['options'])\n            )(setting)}\n          </CheckboxGroup>\n        </Form.Item>\n      </TemplateWrapper>\n    </>\n  )\n}\n\nexport default SnippetTemplateMultipleSelection\n","import React from 'react'\nimport cx from 'classnames'\nimport { Form } from 'antd'\nimport { pathOr } from 'ramda'\nimport Radio from '@/components/radio'\nimport Input from '@/components/input'\nimport TemplateWrapper from '@/components/snippet-template-wrapper'\nimport {\n  SnippetTemplateSelectionModal,\n  Setting,\n  Option,\n  defaultValue,\n} from '@/components/snippet-template-selection-modal'\nimport { mapIndexed } from '@/utils/webHelper'\nimport { ReportTemplateProps } from '@/constants/types'\nimport { useUpdateSnippet } from '@/services/reportTemplate'\nconst { compose } = require('ramda')\n\nfunction SnippetTemplateSingleSelection(props: ReportTemplateProps) {\n  const { item, editModalVisible, handleEditModalVisible, onUpdate } = props\n\n  const { setting, handleOk } = useUpdateSnippet<Setting>({\n    item,\n    onUpdate,\n    defaultValue,\n  })\n\n  return (\n    <>\n      {editModalVisible && (\n        <SnippetTemplateSelectionModal\n          item={setting}\n          onCancel={handleEditModalVisible}\n          onOk={handleOk}\n        />\n      )}\n      <TemplateWrapper\n        title={setting.text || ''}\n        bodyStyle={{ paddingLeft: 36 }}>\n        <Form.Item noStyle name={['data', item.id]}>\n          <Radio.Group>\n            {compose(\n              mapIndexed((x: Option, idx: number) => (\n                <Radio\n                  key={x.id}\n                  className={cx('block', { 'mt-1': idx > 0 })}\n                  defaultChecked={false}\n                  value={`${idx}`}>\n                  {x.text}\n                  {x.freetext && (\n                    <Input\n                      size=\"small\"\n                      bordered={false}\n                      placeholder=\"輸入備註\"\n                      className=\"ml-3 w-1/3\"\n                    />\n                  )}\n                </Radio>\n              )),\n              pathOr([], ['options'])\n            )(setting)}\n          </Radio.Group>\n        </Form.Item>\n      </TemplateWrapper>\n    </>\n  )\n}\n\nexport default SnippetTemplateSingleSelection\n","import React from 'react'\nimport { Form } from 'antd'\nimport Input from '@/components/input'\nimport DatePicker from '@/components/datepicker'\nimport { Modal, ModalProps } from '@/components/snippet-template-modal'\nimport TemplateWrapper from '@/components/snippet-template-wrapper'\nimport { createFormItemLayout } from '@/utils/form'\nimport { ReportTemplateProps } from '@/constants/types'\nimport { useUpdateSnippet } from '@/services/reportTemplate'\n\ntype Setting = {\n  text?: string\n  defaultValue?: moment.Moment\n  tooltip?: string\n}\n\nexport default function SnippetTemplateDate(props: ReportTemplateProps) {\n  const { editModalVisible, handleEditModalVisible, item, onUpdate } = props\n\n  const { setting, handleOk } = useUpdateSnippet<Setting>({ item, onUpdate })\n\n  return (\n    <>\n      {editModalVisible && (\n        <InputDateModal\n          item={setting}\n          onCancel={handleEditModalVisible}\n          onOk={handleOk}\n        />\n      )}\n      <TemplateWrapper title={setting.text || ''}>\n        <Form.Item noStyle name={['data', item.id]}>\n          <DatePicker\n            bordered={false}\n            className=\"w-1/3\"\n            placeholder={setting.tooltip || '選擇日期'}\n            defaultValue={setting.defaultValue}\n          />\n        </Form.Item>\n      </TemplateWrapper>\n    </>\n  )\n}\n\nfunction InputDateModal({\n  onOk,\n  onCancel,\n  item,\n  ...props\n}: ModalProps<Setting>) {\n  const [form] = Form.useForm()\n\n  const handleOk = () => {\n    form.validateFields().then(values => {\n      if (onOk) {\n        onOk(values)\n      }\n      onCancel()\n    })\n  }\n\n  return (\n    <Modal<Setting>\n      {...props}\n      title={\n        <>\n          <div>\n            Date\n            <div className=\"inline ml-2 text-sm text-gray-600\">\n              typically used for target date.\n            </div>\n          </div>\n        </>\n      }\n      onCancel={onCancel}\n      onOk={handleOk}>\n      <Form\n        {...createFormItemLayout(5, 16)}\n        labelAlign=\"left\"\n        form={form}\n        initialValues={item}>\n        <Form.Item label=\"Text\" name=\"text\">\n          <Input />\n        </Form.Item>\n        <Form.Item label=\"Default Value\" name=\"defaultValue\">\n          <DatePicker allowClear picker=\"date\" className=\"w-full\" />\n        </Form.Item>\n        <Form.Item label=\"Tooltip\" name=\"tooltip\">\n          <Input />\n        </Form.Item>\n      </Form>\n    </Modal>\n  )\n}\n","import React from 'react'\nimport { Form } from 'antd'\nimport Input from '@/components/input'\nimport { TimePicker } from '@/components/datepicker'\nimport { Modal, ModalProps } from '@/components/snippet-template-modal'\nimport TemplateWrapper from '@/components/snippet-template-wrapper'\nimport { createFormItemLayout } from '@/utils/form'\nimport { ReportTemplateSetting, ReportTemplateProps } from '@/constants/types'\nimport { useUpdateSnippet } from '@/services/reportTemplate'\n\ninterface Setting extends ReportTemplateSetting {\n  defaultValue?: moment.Moment\n}\n\nexport default function ReportTemplateTime(props: ReportTemplateProps) {\n  const { editModalVisible, handleEditModalVisible, item, onUpdate } = props\n\n  const { setting, handleOk } = useUpdateSnippet<Setting>({ item, onUpdate })\n\n  return (\n    <>\n      {editModalVisible && (\n        <InputTimeModal\n          item={setting}\n          onCancel={handleEditModalVisible}\n          onOk={handleOk}\n        />\n      )}\n      <TemplateWrapper title={setting.text || ''}>\n        <Form.Item noStyle name={['data', item.id]}>\n          <TimePicker\n            bordered={false}\n            className=\"w-1/3\"\n            placeholder={setting.tooltip || '選擇時間'}\n            defaultValue={setting.defaultValue}\n          />\n        </Form.Item>\n      </TemplateWrapper>\n    </>\n  )\n}\n\nfunction InputTimeModal({\n  onOk,\n  onCancel,\n  item,\n  ...props\n}: ModalProps<Setting>) {\n  const [form] = Form.useForm()\n\n  const handleOk = () => {\n    form.validateFields().then(values => {\n      if (onOk) {\n        onOk(values)\n      }\n      onCancel()\n    })\n  }\n\n  return (\n    <Modal<Setting>\n      {...props}\n      title={\n        <>\n          <div>\n            Time\n            <div className=\"inline ml-2 text-sm text-gray-600\">\n              typically used for target time.\n            </div>\n          </div>\n        </>\n      }\n      onCancel={onCancel}\n      onOk={handleOk}>\n      <Form\n        {...createFormItemLayout(5, 16)}\n        labelAlign=\"left\"\n        form={form}\n        initialValues={item}>\n        <Form.Item label=\"Text\" name=\"text\">\n          <Input />\n        </Form.Item>\n        <Form.Item label=\"Default Value\" name=\"defaultValue\">\n          <TimePicker allowClear format=\"HH:mm\" className=\"w-full\" />\n        </Form.Item>\n        <Form.Item label=\"Tooltip\" name=\"tooltip\">\n          <Input />\n        </Form.Item>\n      </Form>\n    </Modal>\n  )\n}\n","import React from 'react'\nimport { pathOr, map } from 'ramda'\nimport { Form } from 'antd'\nimport Select from '@/components/select'\nimport TemplateWrapper from '@/components/snippet-template-wrapper'\nimport {\n  SnippetTemplateSelectionModal,\n  Option,\n  defaultValue,\n} from '@/components/snippet-template-selection-modal'\nimport { ReportTemplateSetting, ReportTemplateProps } from '@/constants/types'\nimport { useUpdateSnippet } from '@/services/reportTemplate'\nconst { compose } = require('ramda')\n\ninterface Setting extends ReportTemplateSetting {\n  options?: Option[]\n  selectionType?: 'single' | 'multiple'\n}\n\nexport default function SnippetTemplateSelect(props: ReportTemplateProps) {\n  const { item, editModalVisible, handleEditModalVisible, onUpdate } = props\n\n  const { setting, handleOk } = useUpdateSnippet<Setting>({\n    item,\n    onUpdate,\n    defaultValue,\n  })\n\n  return (\n    <>\n      {editModalVisible && (\n        <SnippetTemplateSelectionModal\n          item={setting}\n          onCancel={handleEditModalVisible}\n          onOk={handleOk}\n          title={\n            <>\n              <div>Drop-down List</div>\n              <div className=\"mt-1 text-sm text-gray-600\">\n                typically used for lists of greater than 6 or 7 options.\n              </div>\n            </>\n          }\n        />\n      )}\n      <TemplateWrapper title={setting.text || ''}>\n        <Form.Item noStyle name={['data', item.id]}>\n          <Select\n            allowClear\n            bordered={false}\n            className=\"w-1/3\"\n            placeholder={setting.tooltip || '請選擇...'}>\n            {compose(\n              map((x: Option) => (\n                <Select.Option key={x.id} value={x.text as any}>\n                  {x.text}\n                </Select.Option>\n              )),\n              pathOr([], ['options'])\n            )(setting)}\n          </Select>\n        </Form.Item>\n      </TemplateWrapper>\n    </>\n  )\n}\n","import React from 'react'\nimport { Form } from 'antd'\nimport Input from '@/components/input'\nimport { Modal, ModalProps } from '@/components/snippet-template-modal'\nimport TemplateWrapper from '@/components/snippet-template-wrapper'\nimport { createFormItemLayout } from '@/utils/form'\nimport { useUpdateSnippet } from '@/services/reportTemplate'\nimport { ReportTemplateSetting, ReportTemplateProps } from '@/constants/types'\n\ninterface Setting extends ReportTemplateSetting {}\n\nexport default function TemplateSectionHeader(props: ReportTemplateProps) {\n  const { item, editModalVisible, handleEditModalVisible, onUpdate } = props\n\n  const { setting, handleOk } = useUpdateSnippet<Setting>({\n    item,\n    onUpdate,\n  })\n\n  return (\n    <>\n      {editModalVisible && (\n        <InputTextModal\n          item={setting}\n          onCancel={handleEditModalVisible}\n          onOk={handleOk}\n        />\n      )}\n      <TemplateWrapper\n        titleVisible\n        bodyVisible={false}\n        title={setting.text}\n        onEdit={handleEditModalVisible}></TemplateWrapper>\n    </>\n  )\n}\n\nfunction InputTextModal({\n  onOk,\n  onCancel,\n  item,\n  ...props\n}: ModalProps<Setting>) {\n  const [form] = Form.useForm()\n\n  const handleOk = () => {\n    form.validateFields().then(values => {\n      if (onOk) {\n        onOk(values)\n      }\n      onCancel()\n    })\n  }\n\n  return (\n    <Modal<Setting>\n      {...props}\n      title={\n        <>\n          <div>\n            Section Header\n            <div className=\"inline ml-2 text-sm text-gray-600\">\n              typically used for section.\n            </div>\n          </div>\n        </>\n      }\n      onCancel={onCancel}\n      onOk={handleOk}>\n      <Form\n        {...createFormItemLayout(5, 16)}\n        labelAlign=\"left\"\n        form={form}\n        initialValues={item}>\n        <Form.Item label=\"Text\" name=\"text\">\n          <Input />\n        </Form.Item>\n        <Form.Item label=\"Tooltip\" name=\"tooltip\">\n          <Input />\n        </Form.Item>\n      </Form>\n    </Modal>\n  )\n}\n","import React from 'react'\n\nfunction SnippetTemplateCloze() {\n  return <div></div>\n}\n\nlet input = `\n  <input\n    class=\"ant-input ant-input-sm ant-input-borderless\"\n    placeholder=\"\"\n    style=\"border: none; border-bottom: 1px solid #38a8a9; width: 70px;\"\n    type=\"text\"\n    value=\"\"\n    data-mce-style=\"border: none; border-bottom: 1px solid #38a8a9; width: 70px;\"\n  >\n`\n\nexport const html = `\n  <div>\n    The specimen is submitted in ${input} parts. \n    Part (A) consists of ${input} piece of liver tissue, \n    labelled ${input} , measuring ${input} cm and weighing ___ gm. \n    There is a solitary / are tumor mass(es), measuring up to ${input} cm, \n    located in ${input} lobe. \n    The cut sections show it is / they are golden yellow and firm. \n    (Foci of hemorrhage and necrosis are noted). \n    The hepatic surgical margin is free of tumor / very close to tumor / involved by tumor, \n    grossly. The remaining liver tissue shows unremarkable / micronodular cirrhosis (all less than 3mm) / macronodular cirrhosis (greater than 3mm). \n    Part (B) consists of ${input} pieces of grayish white soft tissue, labelled ${input} , \n    measuring up to ${input} cm. Representative parts are embedded in ${input} blocks. \n    (Block A~B: cut margin, C~E: tumor, F: non-neoplastic liver)\n  </div>\n`\n\nexport const Component = SnippetTemplateCloze\n\nexport default SnippetTemplateCloze\n","import { map, mergeAll, pathOr, path, keys } from 'ramda'\nimport {\n  CalendarOutlined,\n  ClockCircleOutlined,\n  OrderedListOutlined,\n  UnorderedListOutlined,\n  FontSizeOutlined,\n  DatabaseOutlined,\n  NumberOutlined,\n  BoldOutlined,\n  FontColorsOutlined,\n} from '@ant-design/icons'\nimport { uuid } from '@/utils/webHelper'\nimport TemplateInputText from '@/components/snippet-template-input-text'\nimport TemplateInputNumber from '@/components/snippet-template-input-number'\nimport TemplateMultipleSelection from '@/components/snippet-template-multiple-selection'\nimport TemplateSingleSelection from '@/components/snippet-template-single-selection'\nimport TemplateDate from '@/components/snippet-template-date'\nimport TemplateTime from '@/components/snippet-template-time'\nimport TemplateSelect from '@/components/snippet-template-select'\nimport TempldateSectionHeader from '@/components/snippet-template-section-header'\nimport * as Cloze from '@/components/snippet-template-cloze'\nimport { SnippetProps, ReportTemplate } from '@/constants/types'\nconst { compose } = require('ramda')\n\ninterface ReportTemplateListItem {\n  id: React.Key\n  type: string\n  name: string\n  Component: React.Component\n  inline: boolean\n}\n\nconst reportTemplateList = [\n  {\n    id: uuid(),\n    type: 'TemplateSectionHeader',\n    componentType: 'header',\n    name: 'Section Header',\n    inline: false,\n    icon: BoldOutlined,\n    Component: TempldateSectionHeader,\n  },\n  {\n    id: uuid(),\n    type: 'TemplateInputText',\n    name: 'Text',\n    inline: false,\n    icon: FontSizeOutlined,\n    Component: TemplateInputText,\n  },\n  {\n    id: uuid(),\n    type: 'TemplateInputNumber',\n    name: 'Number',\n    inline: false,\n    icon: NumberOutlined,\n    Component: TemplateInputNumber,\n  },\n  {\n    id: uuid(),\n    type: 'TemplateSelect',\n    name: 'Drop-down List',\n    inline: false,\n    icon: DatabaseOutlined,\n    Component: TemplateSelect,\n  },\n  {\n    id: uuid(),\n    type: 'TemplateMultipleSelection',\n    name: 'Multiple Selection List',\n    inline: false,\n    icon: UnorderedListOutlined,\n    Component: TemplateMultipleSelection,\n  },\n  {\n    id: uuid(),\n    type: 'TemplateSingleSelection',\n    name: 'Single Selection List',\n    inline: false,\n    icon: OrderedListOutlined,\n    Component: TemplateSingleSelection,\n  },\n  {\n    id: uuid(),\n    type: 'TemplateDate',\n    name: 'Date',\n    inline: false,\n    icon: CalendarOutlined,\n    Component: TemplateDate,\n  },\n  {\n    id: uuid(),\n    type: 'TemplateTime',\n    name: 'Time',\n    inline: false,\n    icon: ClockCircleOutlined,\n    Component: TemplateTime,\n  },\n  {\n    id: uuid(),\n    type: 'TemplateCloze',\n    name: 'Cloze',\n    inline: true,\n    icon: FontColorsOutlined,\n    html: Cloze.html,\n    Component: Cloze.Component,\n  },\n]\n\nexport const reportTemplateById = compose(\n  mergeAll,\n  map((x: ReportTemplateListItem) => ({ [x.type]: x }))\n)(reportTemplateList)\n\nexport const setComponent = compose(\n  map((x: ReportTemplate) => ({\n    ...x,\n    setting: compose(\n      mergeAll,\n      map((key: string) => ({\n        [key]: compose(\n          map((s: SnippetProps) => ({\n            ...s,\n            Component: path([s.type, 'Component'])(reportTemplateById),\n          })),\n          pathOr([], ['setting', key])\n        )(x),\n      })),\n      keys,\n      pathOr({}, ['setting'])\n    )(x),\n  })),\n  pathOr([], [])\n)\n\nexport default reportTemplateList\n","export { default } from '../theme'\n","import React from 'react'\nimport { Radio } from 'antd'\nimport { RadioProps } from 'antd/lib/radio'\nimport styled from 'styled-components'\n\nconst StyledRadio = styled(Radio)`\n  &.ant-radio-wrapper {\n    color: ${p => p.theme.darkGrey};\n\n    span.ant-radio + * {\n      padding-left: 16px;\n    }\n\n    .ant-radio-inner,\n    .ant-radio-checked .ant-radio-inner {\n      border-color: ${p => p.theme.primary};\n    }\n\n    .ant-radio-inner::after {\n      background: ${p => p.theme.primary};\n    }\n\n    &:hover,\n    .ant-radio:hover .ant-radio-inner,\n    .ant-radio-input:focus + .ant-radio-inner {\n      border-color: ${p => p.theme.primary};\n    }\n  }\n`\n\ninterface Props extends RadioProps {\n  css?: React.CSSProperties\n}\n\nclass RadioComponent extends React.Component<Props, any> {\n  public static Group = Radio.Group\n\n  public static displayName = 'Radio'\n\n  public render() {\n    return <StyledRadio {...this.props} />\n  }\n}\n\nexport default RadioComponent\n","import React from 'react'\nimport { Select } from 'antd'\nimport { SelectProps } from 'antd/lib/select'\nimport styled from 'styled-components'\n\nconst StyledSelect: any = styled(Select)`\n  &.ant-select {\n    &.ant-select-single:not(.ant-select-customize-input) .ant-select-selector,\n    .ant-select-selection:hover,\n    .ant-select-selection:active,\n    .ant-select-selection:focus {\n      border-color: #d9d9d9;\n    }\n\n    .ant-select-selection {\n      border-color: ${p => p.theme.secondary};\n    }\n\n    .ant-select-selection:active,\n    .ant-select-selection:focus {\n      box-shadow: none;\n    }\n\n    .ant-select-arrow {\n      color: ${p => p.theme.primary};\n    }\n\n    .ant-select-arrow-icon {\n      position: relative;\n      top: -1px;\n      font-size: 14px;\n    }\n\n    &.ant-select-borderless .ant-select-selector {\n      position: relative;\n      bottom: 1px;\n      border: 0;\n      border-bottom: #d9d9d9 !important;\n      border-bottom-left-radius: 0;\n      border-bottom-right-radius: 0;\n    }\n  }\n\n  &.ant-select.is--outline {\n    > .ant-select-selector {\n      background: transparent;\n      border: 1px solid #fff;\n      color: #fff;\n\n      &:active,\n      &:focus,\n      &:hover {\n        border: 1px solid #fff;\n      }\n    }\n\n    .ant-select-selection-placeholder,\n    .ant-select-arrow {\n      color: #fff;\n    }\n\n    .ant-select-selection-placeholder {\n      opacity: 1;\n      left: 30%;\n    }\n  }\n\n  &.ant-select.is--transparent {\n    &.ant-select-focused > .ant-select-selector {\n      border: 1px solid #666a8f;\n    }\n\n    > .ant-select-selector {\n      background: transparent;\n      border: 1px solid #666a8f;\n      color: #a9b6d8;\n\n      &:active,\n      &:focus,\n      &:hover {\n        border: 1px solid #666a8f;\n      }\n    }\n\n    .ant-select-arrow {\n      color: #a9b6d8;\n    }\n  }\n`\n\nclass SelectComponent<T = any> extends React.Component<SelectProps<T>, any> {\n  public static Option = Select.Option\n\n  public static displayName = 'Select'\n\n  render() {\n    return <StyledSelect {...this.props}>{this.props.children}</StyledSelect>\n  }\n}\n\nexport default SelectComponent\n","import React from 'react'\nimport { atom, useRecoilState, useRecoilValue, useSetRecoilState } from 'recoil'\n\ntype BreadcrumbItem = {\n  href?: string\n  name: string\n}\n\nexport const breadcrumbState = atom<BreadcrumbItem[]>({\n  key: 'breadcrumbState',\n  default: [],\n})\n\nexport function useBreadcrumbState() {\n  const state = useRecoilState(breadcrumbState)\n  return state\n}\n\nexport function useBreadcrumb(items: BreadcrumbItem[] = []) {\n  const setter = useSetRecoilState(breadcrumbState)\n\n  React.useEffect(() => {\n    setter(items)\n  }, []) // eslint-disable-line\n\n  return setter\n}\n\nexport const headerContentState = atom<React.ReactNode>({\n  key: 'headerContentState',\n  default: null,\n})\n\nexport function useHeaderContentState() {\n  return useRecoilState(headerContentState)\n}\n\nexport function useHeaderContent(node?: React.ReactNode) {\n  const setter = useSetRecoilState(headerContentState)\n\n  React.useEffect(() => {\n    setter(node)\n\n    return () => {\n      setter(null)\n    }\n  }, [node]) // eslint-disable-line\n}\n\nexport function useHeaderContentValue() {\n  const value = useRecoilValue(headerContentState)\n  return value\n}\n","import React from 'react'\nimport { isNil } from 'ramda'\nimport Cookies from 'js-cookie'\nimport { User } from '@/services/authService'\n\nexport type LogoutFn = (params?: { onCompleted?: () => any }) => any\n\nexport type AuthContextType = {\n  logout: LogoutFn\n  isAuthenticated: boolean\n  user: User\n  setUser: React.Dispatch<React.SetStateAction<User | null>>\n  setIsAuthenticated: React.Dispatch<React.SetStateAction<boolean>>\n}\n\nexport const AuthContext = React.createContext<AuthContextType>({\n  isAuthenticated: false,\n  user: {} as User,\n  logout: () => ({}),\n  setUser: (_: React.SetStateAction<User | null>) => ({}),\n  setIsAuthenticated: (_: React.SetStateAction<boolean>) => ({}),\n})\n\nconst _user = Cookies.getJSON('vghks_user')\nconst _token = Cookies.get('vghks_token')\n\nexport function AuthProvider(props: any) {\n  const [isAuthenticated, setIsAuthenticated] = React.useState(\n    !isNil(_user) && !isNil(_token)\n  )\n\n  const [user, setUser] = React.useState<User>(_user)\n\n  const logout = React.useCallback(({ onCompleted } = {}) => {\n    Cookies.remove('vghks_token')\n    Cookies.remove('vghks_user')\n\n    setIsAuthenticated(false)\n\n    if (onCompleted) {\n      onCompleted()\n    }\n  }, [])\n\n  const value = React.useMemo(\n    () => ({\n      isAuthenticated,\n      setIsAuthenticated,\n      setUser,\n      logout,\n      user,\n    }),\n    [isAuthenticated, logout, user, setUser, setIsAuthenticated]\n  )\n\n  return <AuthContext.Provider value={value} {...props} />\n}\n\nexport function useAuth() {\n  const context = React.useContext(AuthContext)\n  if (context === undefined) {\n    throw new Error(`useAuth must be used within a AuthProvider`)\n  }\n  return context\n}\n\nexport default useAuth\n","import React from 'react'\nimport styled, { css } from 'styled-components'\nimport { DatePicker, TimePicker } from 'antd'\nimport { DatePickerProps } from 'antd/lib/date-picker'\n\nconst borderLess = css`\n  &.ant-picker-borderless {\n    border: none;\n    border-bottom: 1px solid #d9d9d9 !important;\n    border-bottom-left-radius: 0;\n    border-bottom-right-radius: 0;\n  }\n\n  &.ant-picker-focused:not(.ant-picker-borderless) {\n    box-shadow: 0 0 0 1px ${p => p.theme.primary};\n  }\n`\n\nconst RangePicker = styled(DatePicker.RangePicker)`\n  &.ant-picker {\n    border: 1px solid #d9d9d9;\n\n    &:hover,\n    &:focus {\n      border-color: ${p => p.theme.secondary};\n    }\n\n    &.ant-picker-focused {\n      box-shadow: 0 0 0 1px ${p => p.theme.primary};\n    }\n  }\n`\n\nconst StyledDatePicker: any = styled(DatePicker)`\n  &.ant-picker {\n    border: 1px solid #d9d9d9;\n\n    &:hover,\n    &:focus {\n      border-color: ${p => p.theme.secondary};\n    }\n\n    .ant-picker-suffix {\n      color: ${p => p.theme.primary};\n    }\n\n    ${borderLess};\n  }\n`\n\nconst StyledTimePicker = styled(TimePicker)`\n  &.ant-picker {\n    border: 1px solid #d9d9d9;\n\n    &:hover,\n    &:focus {\n      border-color: ${p => p.theme.secondary};\n    }\n\n    .ant-picker-suffix {\n      color: ${p => p.theme.primary};\n    }\n\n    ${borderLess};\n  }\n`\n\nfunction DatePickerComponent(props: DatePickerProps) {\n  return <StyledDatePicker {...props} />\n}\n\nexport {\n  DatePickerComponent as DatePicker,\n  RangePicker,\n  StyledTimePicker as TimePicker,\n}\n\nexport default DatePickerComponent\n","export default {\n  CARD: 'card',\n  BOARD: 'board',\n  SNIPPET: 'snippet',\n}\n","import React from 'react'\nimport { Modal } from 'antd'\nimport { ModalProps, ModalFuncProps } from 'antd/lib/modal'\n\nexport const modalDefaultProps = (\n  content?: React.ReactNode,\n  props?: ModalProps\n): ModalFuncProps => ({\n  content: (\n    <div\n      className=\"text-darkGrey font-medium\"\n      css={{ marginTop: 16, marginBottom: 30 }}>\n      {content}\n    </div>\n  ),\n  icon: null,\n  width: 440,\n  okText: '刪除',\n  cancelText: '取消',\n  centered: true,\n  // maskStyle: {\n  //   background: theme.modal.maskDarken,\n  // },\n  autoFocusButton: null,\n  okButtonProps: {\n    className: 'c-btn is--danger',\n    style: { minWidth: 80, marginRight: 24 },\n  },\n  cancelButtonProps: {\n    className: 'c-btn is--outline mr-0 float-right',\n    style: { minWidth: 80 },\n  },\n  ...props,\n})\n\nexport const success = ({\n  onOk,\n  onCancel,\n  content = '資料已儲存',\n  ...props\n}: ModalFuncProps) => {\n  Modal.info({\n    ...modalDefaultProps(),\n    ...props,\n    onOk: () => {\n      if (onOk) {\n        onOk()\n      }\n    },\n    onCancel() {\n      if (onCancel) {\n        onCancel()\n      }\n    },\n  })\n}\n\nexport const confirm = ({\n  onOk,\n  onCancel,\n  content = '刪除後將無法還原，確認繼續？',\n  ...props\n}: ModalFuncProps) => {\n  Modal.confirm({\n    ...modalDefaultProps(content),\n    ...props,\n    onOk: () => {\n      if (onOk) {\n        onOk()\n      }\n    },\n    onCancel() {\n      if (onCancel) {\n        onCancel()\n      }\n    },\n  })\n}\n","import React from 'react'\nimport { atom, useRecoilState } from 'recoil'\nimport Store from 'store'\nimport { setComponent } from '@/components/snippet-template-list'\n// const { compose } = require('ramda')\n\nexport const reportListState = atom({\n  key: 'reportListState',\n  default: setComponent(Store.get('reportListState') || []),\n})\n\n// 輸入報告清單\nexport function useReportList() {\n  return useRecoilState(reportListState)\n}\n\nexport function useReportItem(id: string) {\n  const [reportList] = useRecoilState(reportListState)\n\n  const [data, setData] = React.useState<any>()\n\n  React.useEffect(() => {\n    setData(reportList.find((x: any) => x.id === id))\n  }, [id]) // eslint-disable-line\n\n  return data\n}\n","import React from 'react'\nimport { includes, pathOr } from 'ramda'\nimport { XYCoord } from 'react-dnd'\nimport { isNil, mapIndexed } from '@/utils/webHelper'\nimport Snippet from '@/components/snippet'\nimport { SnippetProps } from '@/constants/types'\nconst { compose } = require('ramda')\n\n/* prettier-ignore */\nconst REPORT_TEMPLATE_BUILDER_CLASSNAME = 'report-template-builder__main-content'\nconst UI_DRAGGABLE_CLASSNAME = 'ui-draggable'\n\nconst hasClassName = (nodes: Element[], className: string) => {\n  return nodes.find(\n    n => !isNil(n.className) && includes(className)(n.className)\n  )\n}\n\nexport function canMoveSnippet(\n  element: Element | null,\n  className = REPORT_TEMPLATE_BUILDER_CLASSNAME\n) {\n  let elem = element\n\n  const nodes: Element[] = []\n  nodes.push(elem as Element)\n\n  while (elem?.parentNode) {\n    nodes.unshift(elem.parentNode as Element)\n    elem = elem.parentNode as Element\n  }\n\n  if (\n    hasClassName(nodes, 'report-template-builder-contentarea--fixed-layout') ||\n    hasClassName(nodes, 'snippet-drawer-menu')\n  ) {\n    return false\n  }\n  if (\n    hasClassName(nodes, className) ||\n    hasClassName(nodes, UI_DRAGGABLE_CLASSNAME)\n  ) {\n    return true\n  }\n\n  return false\n}\n\nfunction findSnippet(\n  element: HTMLElement,\n  className = UI_DRAGGABLE_CLASSNAME\n): HTMLElement | null {\n  if (element.classList.contains(className)) {\n    return element\n  }\n  return element.parentElement && findSnippet(element.parentElement, className)\n}\n\nexport function getPlaceHolderIndex(clientOffset: XYCoord) {\n  const hoverElement = document.elementFromPoint(clientOffset.x, clientOffset.y)\n\n  // find ui-draggable classname\n  const overSnippet = findSnippet(hoverElement as NonNullable<HTMLElement>)\n\n  const snippetIndex = overSnippet && overSnippet.dataset.index\n  const placeholderIndex = overSnippet ? Number(overSnippet.dataset.index) : -1\n\n  const isOverSnippet = !isNil(snippetIndex)\n\n  return {\n    overSnippet,\n    placeholderIndex,\n    isOverSnippet: isOverSnippet,\n  }\n}\n\nexport function renderSnippets(props: { [key: string]: any } = {}) {\n  return (snippetList?: SnippetProps[]) =>\n    compose(\n      mapIndexed((item: SnippetProps, idx: number) => (\n        <Snippet\n          {...props}\n          key={item.id}\n          wrapperId={`${item.id}`}\n          item={item}\n          draggable={false}\n          tabSize={item.tabSize}>\n          {item.inline ? (\n            <div\n              id={`${item.id}`}\n              className={`${item.id}`}\n              css={{ padding: 16 }}\n              dangerouslySetInnerHTML={{ __html: item.html }}\n            />\n          ) : (\n            <item.Component\n              id={item.id}\n              className={item.id}\n              item={item}\n              index={idx}\n            />\n          )}\n        </Snippet>\n      )),\n      pathOr([], [])\n    )(snippetList)\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport { Modal } from 'antd'\nimport { ModalProps } from 'antd/lib/modal'\n\nconst StyledModal = styled(Modal)`\n  animation-duration: 0s !important;\n  transition: none !important;\n\n  .ant-modal-header--border-none {\n    border-bottom: none;\n  }\n\n  .ant-modal-footer {\n    padding-top: 14px;\n    padding-bottom: 14px;\n  }\n`\n\nexport default class ModalComponent extends React.Component<ModalProps, any> {\n  static confirm = Modal.confirm\n  static error = Modal.error\n  static success = Modal.success\n  static info = Modal.info\n\n  render() {\n    return <StyledModal {...this.props}>{this.props.children}</StyledModal>\n  }\n}\n","import {\n  compose,\n  ifElse,\n  invoker,\n  path,\n  identity,\n  includes,\n  always,\n  T,\n  join,\n  map,\n  filter,\n  keys,\n  equals,\n  __,\n} from 'ramda'\nimport { isNil } from '@/utils/webHelper'\nimport { MutationOptions } from '@/constants/types'\nimport envStore from '@/constants/env'\nconst { cond } = require('ramda')\n\ntype RequestInit_ = {\n  body?: any\n  credentials?: RequestCredentials_\n  headers?: HeadersInit_\n  integrity?: string\n  keepalive?: boolean\n  method?: string\n  mode?: RequestMode_\n  referrer?: string\n  window?: any\n  errorMsg?: boolean\n  successMsg?: boolean\n  onCompleted?: (data: any) => any\n  onError?: (err: Error) => any\n}\n\nconst contentTypeIs = (s: string) => {\n  return compose(\n    ifElse(isNil, identity, (c = '') => c.includes(s)),\n    invoker(1, 'get')('content-type'),\n    path(['headers'])\n  )\n}\n\nfunction useLoading() {\n  const [loading, setIsLoading] = React.useState(false)\n\n  const withMeta = React.useCallback((handler: any) => {\n    setIsLoading(true)\n\n    return handler().then((response: any) => {\n      setIsLoading(false)\n\n      return response\n    })\n  }, [])\n\n  return [loading, withMeta] as [boolean, (handler: any) => any]\n}\n\nexport function toQueryString(\n  paramsObject: {\n    [key: string]: any\n  } = {}\n) {\n  if (!paramsObject) {\n    return ''\n  }\n\n  return compose(\n    join('&'),\n    map((key: string) =>\n      Array.isArray(paramsObject[key])\n        ? // convert to key=val1,val2,val3 string\n          `${key}=${paramsObject[key]\n            .map((val: string | number) => `${encodeURIComponent(val)}`)\n            .join(',')}`\n        : // convert to key=val string\n          `${key}=${encodeURIComponent(paramsObject[key])}`\n    ),\n    filter(\n      (key: string) =>\n        paramsObject[key] !== '' &&\n        paramsObject[key] !== null &&\n        typeof paramsObject[key] !== 'undefined'\n    ),\n    keys\n  )(paramsObject)\n}\n\nexport const postRequest = (url: string, options: RequestInit_) =>\n  fetch(url, { ...options, method: 'POST' })\n\nexport const putRequest = (url: string, options: RequestInit_) =>\n  fetch(url, { ...options, method: 'PUT' })\n\nexport const deleteRequest = (url: string, options: RequestInit_) =>\n  fetch(url, { ...options, method: 'DELETE' })\n\nexport function request(\n  url: string,\n  {\n    body,\n    headers,\n    errorMsg = true,\n    onCompleted,\n    onError,\n    ...options\n  }: RequestInit_ = {}\n) {\n  let fullUrl = cond([\n    [includes('http'), always(url)],\n    [T, always(envStore.apiBaseUrl + url)],\n  ])(url)\n\n  return fetch(fullUrl, {\n    ...options,\n    body: body instanceof FormData ? body : JSON.stringify(body),\n    headers: {\n      'Content-Type': 'application/json',\n      Accept: 'application/json',\n      //   authorization: '',\n      ...headers,\n    },\n  })\n    .then(async (response: Response) => {\n      if (onCompleted) {\n        onCompleted(response)\n      }\n\n      // if (successMsg) {\n      //   success()\n      // }\n\n      if (contentTypeIs('application/json')(response)) {\n        const json = await response.json()\n\n        if (!response.ok) {\n          return Promise.reject(json)\n        }\n\n        return json\n      }\n\n      if (contentTypeIs('sheet')(response)) {\n        return await response.blob()\n      }\n\n      return response.text()\n    })\n    .catch((err: Error) => {\n      //   if (errorMsg) {\n      //     error(err)\n      //   }\n\n      if (onError) {\n        onError(err)\n      }\n\n      return err\n    })\n}\n\nexport function useRequest<T = any>({\n  onCompleted,\n  onError,\n  ..._options\n}: MutationOptions = {}) {\n  const [loading, withMeta] = useLoading()\n\n  const [data, setData] = React.useState<any>()\n  const [error, setError] = React.useState<Error>()\n\n  const fetcher = (url: string, { body, method, ...options }: RequestInit) => {\n    let fullUrl = cond([\n      [equals(__, 'GET'), always(`${url}?${toQueryString(body as any)}`)],\n      [T, always(url)],\n    ])(method)\n\n    return withMeta(async () =>\n      request(fullUrl, {\n        ..._options,\n        ...options,\n        method,\n        onError: error => {\n          if (onError) {\n            onError(error)\n          }\n          setError(error)\n        },\n        onCompleted: data => {\n          if (onCompleted) {\n            onCompleted(error)\n          }\n          setData(data)\n        },\n      })\n    )\n  }\n\n  return [\n    fetcher,\n    {\n      loading,\n      data,\n      error,\n    },\n  ] as [\n    (url: string, options?: RequestInit) => Promise<T>,\n    { loading: boolean; data?: any; error?: Error }\n  ]\n}\n\nexport default request\n","export default function getDisplayName(Component: any) {\n  return (\n    Component.displayName ||\n    Component.name ||\n    (typeof Component === 'string' && Component.length > 0\n      ? Component\n      : 'Unknown')\n  )\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport {\n  EditOutlined,\n  DeleteOutlined,\n  RightOutlined,\n  LeftOutlined,\n} from '@ant-design/icons'\nimport cx from 'classnames'\nimport { Tooltip } from 'antd'\n\ntype Props = {\n  editable?: boolean\n  tabIndex: number\n  onEdit: () => void\n  onDelete: () => void\n  onShift: (shift: number) => void\n}\n\nconst ToolbarWrapper = styled.div`\n  position: absolute;\n  top: 8px;\n  right: 15px;\n  visibility: hidden;\n  transition: visibility 0s, opacity 0.3s, max-height 0.6s linear;\n  opacity: 0;\n  z-index: 1;\n\n  &.is--over {\n    visibility: visible;\n    transition: visibility 0s, opacity 0.3s, max-height 0.6s linear;\n    opacity: 0.8;\n  }\n`\n\nexport const SHIFT_TYPES = {\n  LEFT: -1,\n  RIGHT: 1,\n}\n\nexport default function SnippetToolbar({\n  tabIndex,\n  onEdit,\n  onDelete,\n  onShift,\n  editable = true,\n}: Props) {\n  const handleShift = (shift: number) => () => {\n    onShift(shift)\n  }\n\n  return (\n    <ToolbarWrapper\n      className={cx('text-primary', { 'is--over': tabIndex === 1 })}>\n      <Tooltip title=\"向左縮排\">\n        <LeftOutlined\n          className=\"mr-2 cursor-pointer\"\n          onClick={handleShift(SHIFT_TYPES.LEFT)}\n        />\n      </Tooltip>\n      <Tooltip title=\"向右縮排\">\n        <RightOutlined\n          className=\"mr-2 cursor-pointer\"\n          onClick={handleShift(SHIFT_TYPES.RIGHT)}\n        />\n      </Tooltip>\n      {editable && (\n        <Tooltip title=\"編輯\">\n          <EditOutlined className=\"mr-2 cursor-pointer\" onClick={onEdit} />\n        </Tooltip>\n      )}\n      <Tooltip title=\"刪除\">\n        <DeleteOutlined className=\"cursor-pointer\" onClick={onDelete} />\n      </Tooltip>\n    </ToolbarWrapper>\n  )\n}\n\nexport { SnippetToolbar }\n","/* eslint-disable no-undef */\nimport React from 'react'\nimport { clone, is, equals } from 'ramda'\nimport envStore from '@/constants/env'\nimport hoist from 'hoist-non-react-statics'\nimport getDisplayName from '@/utils/get-display-name'\n\nlet defaultConfig = {\n  block_formats: 'Heading 1=h1;Heading 2=h2;Heading 3=h3;Paragraph=p',\n  inline: true,\n  menubar: false,\n  external_plugins: {\n    dropdown: `${envStore.publicUrl}/js/tinymce/plugins/dropdown/plugin.js`,\n    inputtext: `${envStore.publicUrl}/js/tinymce/plugins/inputtext/plugin.js`,\n  },\n  fontsize_formats: '10px 12px 14px 16px 18px 20px 24px 32px 36px',\n  force_br_newlines: true,\n  force_p_newlines: false,\n  forced_root_block: 'div',\n  plugins: 'image textcolor lists emoticons link table media code',\n  tinymce: `${envStore.publicUrl}/js/tinymce/4.9.2/tinymce.min.js`,\n  link_title: false,\n  table_toolbar:\n    'tablemergecells tablesplitcells | tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol',\n  textcolor_cols: '5',\n  content_security_policy: '',\n  allow_unsafe_link_target: true,\n  relative_urls: false,\n  convert_urls: false,\n  valid_elements: '*[*]',\n  valid_children:\n    'h1[div|strong|b],h2[div|strong|b],h3[div|strong|b],p[div|strong|b]',\n  toolbar1:\n    'undo redo | custom-formatselect fontsizeselect | bold italic underline strikethrough forecolor removeformat | align numlist bullist outdent indent | link | fontawesome | inputtext | dropdown',\n}\n\nexport default function withTinyMCE(ComposedComponent) {\n  class withTinyMCE extends React.Component {\n    static displayName = `withTinyMCE(${getDisplayName(ComposedComponent)})`\n\n    static defaultProps = {\n      inline: false,\n    }\n\n    state = {\n      top: 0,\n      tabIndex: -1,\n      editor: null,\n      toolbarMouseOver: false,\n      toolbarVisible: false,\n    }\n\n    componentDidMount() {\n      if (this.props.inline) {\n        this.initialize(this.props.item)\n      }\n    }\n\n    componentDidUpdate(prevProps, prevState) {\n      if (!this.props.isDragging && prevProps.isDragging) {\n        this.setState({ toolbarVisible: false })\n      }\n      if (!this.props.inline) {\n        return\n      }\n      if (!equals(this.props.id, prevProps.id)) {\n        this.initialize(this.props.item)\n      }\n      if (!equals(this.props.item?.html, prevProps.item?.html)) {\n        this.state.editor.setContent(this.props.item?.html)\n      }\n    }\n\n    initialize = snippet => {\n      if (this._get(snippet.id)) {\n        this.remove(snippet.id)\n      }\n\n      const _config = clone(snippet.config || defaultConfig)\n\n      tinymce.init({\n        ..._config,\n        selector: `#${snippet.id}`,\n        language_url: `${envStore.publicUrl}/js/tinymce/langs/zh_TW.js`,\n        content: snippet.html,\n        setup: editor => {\n          editor.on('blur', e => this.onEditorBlur(e))\n          editor.on('focus', e => this.onEditorFocus(e))\n\n          if (is(Function, _config.execInit)) {\n            _config.execInit(editor)\n          }\n\n          if (snippet.html) {\n            editor.on('init', () => editor.setContent(snippet.html))\n          }\n        },\n        init_instance_callback: editor => {\n          if (editor) {\n            this.setState({ editor })\n          }\n          editor.undoManager.add()\n        },\n      })\n    }\n\n    onEditorBlur = e => {\n      const { updateSnippet, item } = this.props\n      if (updateSnippet) {\n        updateSnippet({ ...item, html: e.target.getContent() })\n      }\n    }\n\n    // 這裡應該不用做事\n    onEditorFocus = () => {\n      // const { index } = this.props\n      // $(`.sort-item`).removeClass(s.focus)\n      // $(`.sort-item:nth-child(${index + 1})`).addClass(s.focus)\n    }\n\n    onClick = () => {\n      const { toolbarVisible } = this.state\n\n      if (!toolbarVisible) {\n        const snippetEl = document.getElementById(this.props.id)\n        const top = snippetEl.offsetTop + 30\n\n        this.setState({ toolbarVisible: true, tabIndex: 1, top })\n      }\n    }\n\n    onBlur = () => {\n      const { toolbarVisible, toolbarMouseOver } = this.state\n      if (toolbarVisible && !toolbarMouseOver) {\n        this.setState({ toolbarVisible: false, tabIndex: -1 })\n      }\n    }\n\n    _get = id => {\n      return tinymce.get(id)\n    }\n\n    remove = id => {\n      tinymce.remove(this._get(id || this.props.id))\n    }\n\n    render() {\n      return <ComposedComponent {...this.state} {...this.props} />\n    }\n  }\n\n  return hoist(withTinyMCE, ComposedComponent)\n}\n","import React from 'react'\nimport { DragSource, ConnectDragPreview, ConnectDragSource } from 'react-dnd'\nimport { getEmptyImage } from 'react-dnd-html5-backend'\nimport { mergeRight } from 'ramda'\nimport cx from 'classnames'\nimport { confirm } from '@/utils/message'\nimport { SnippetProps } from '@/constants/types'\nimport ItemTypes from '@/constants/item-types'\nimport SnippetToolbar from './snippet-toolbar'\nimport theme from '../theme'\nimport withTinyMCE from './withTinyMCE'\nconst { compose } = require('ramda')\n\ntype Props = {\n  id?: React.Key\n  wrapperId?: string\n  className?: string\n  style?: React.CSSProperties\n  index?: number\n  tabSize?: number\n  isDragging?: boolean\n  draggable?: boolean\n  inline?: boolean\n  fromMenu?: boolean\n  item: SnippetProps\n  connectDragPreview?: ConnectDragPreview\n  connectDragSource?: ConnectDragSource\n  children?: React.ReactNode\n  updateSnippet?(data: any): void\n  findSnippet?(id: React.Key): { index: number; snippet: SnippetProps }\n  shiftSnippet?(id: React.Key, shift: number): any\n  removeSnippet?(index: number): void\n}\n\ntype State = {\n  tabIndex: number\n  editModalVisible: boolean\n}\n\nconst withDragSource = DragSource(\n  ItemTypes.BOARD,\n  {\n    beginDrag(props: Props) {\n      return {\n        ...props,\n        fromMenu: false,\n        originalIndex: (props as any).findSnippet(props.id).index,\n      }\n    },\n    canDrag(props: Props) {\n      return !!(props.draggable && !props.fromMenu)\n    },\n  },\n  (connect, monitor) => ({\n    connectDragSource: connect.dragSource(),\n    connectDragPreview: connect.dragPreview(),\n    isDragging: monitor.isDragging(),\n  })\n)\n\nclass Snippet extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props)\n\n    this.state = {\n      tabIndex: -1,\n      editModalVisible: false,\n    }\n  }\n\n  componentDidMount = () => {\n    const { connectDragPreview } = this.props\n    if (connectDragPreview) {\n      connectDragPreview(getEmptyImage() /* { anchorX: 0.2, anchorY: 0.1 } */)\n    }\n  }\n\n  handleShift = (shift: number) => {\n    const { id, shiftSnippet } = this.props\n\n    if (shiftSnippet && id) {\n      shiftSnippet(id, shift)\n    }\n  }\n\n  handleRemove = () => {\n    confirm({\n      content: '刪除後將無法還原，確認繼續？',\n      title: '確認要刪除這個模版?',\n      onOk: () => {\n        ;(this.props as any).removeSnippet(this.props.index)\n      },\n      onCancel() {},\n    })\n  }\n\n  handleEditModalVisible = () => {\n    this.setState(prev => ({ editModalVisible: !prev.editModalVisible }))\n  }\n\n  _onMouseOver = () => {\n    this.setState({ tabIndex: 1 })\n  }\n\n  _onMouseOut = () => {\n    this.setState({ tabIndex: -1 })\n  }\n\n  render() {\n    const {\n      props: {\n        connectDragSource = (node: any) => node,\n        connectDragPreview = (node: any) => node,\n        wrapperId,\n        index,\n        draggable,\n        style = {},\n        className = 'mb-3',\n        item,\n      },\n      state: { tabIndex, editModalVisible },\n    } = this\n\n    const styles = mergeRight(\n      getItemStyles({ ...this.props, ...this.state }),\n      style\n    )\n\n    return connectDragSource(\n      connectDragPreview(\n        <div\n          id={wrapperId}\n          style={styles}\n          className={cx(\n            'ui-sortable',\n            { 'ui-draggable': draggable },\n            className\n          )}\n          tabIndex={tabIndex}\n          onMouseOver={this._onMouseOver}\n          onMouseOut={this._onMouseOut}\n          data-index={index}>\n          {draggable && (\n            <SnippetToolbar\n              tabIndex={tabIndex}\n              editable={!item.inline}\n              onEdit={this.handleEditModalVisible}\n              onDelete={this.handleRemove}\n              onShift={this.handleShift}\n            />\n          )}\n          {React.Children.map(this.props.children, child =>\n            React.cloneElement(child as any, {\n              editModalVisible,\n              handleEditModalVisible: this.handleEditModalVisible,\n            })\n          )}\n        </div>\n      )\n    )\n  }\n}\n\nfunction getItemStyles(props: Partial<Props & State>): React.CSSProperties {\n  const { isDragging, tabIndex, draggable, tabSize = 0 } = props\n\n  const isFocus = tabIndex === 1\n\n  return {\n    ...(isFocus ? { borderRadius: 3 } : {}),\n    ...(draggable\n      ? { border: `1px dashed ${draggable ? '#e7e7e7' : 'transparent'}` }\n      : {\n          outlineColor: isFocus ? theme.purple150 : 'transparent',\n        }),\n    cursor: 'default',\n    position: 'relative',\n    display: isDragging ? 'none' : 'block',\n    marginLeft: tabSize * 50,\n  }\n}\n\nexport default compose(withDragSource, withTinyMCE)(Snippet) as typeof Snippet\n","import { Tabs } from 'antd'\nimport styled from 'styled-components'\n\nconst bg = 'rgb(43,193,183)'\n\nexport default styled(Tabs)`\n  &.ant-tabs {\n    .ant-tabs-tab {\n      display: flex;\n      align-items: center;\n      padding: 10px 24px !important;\n      margin-right: 4px !important;\n      color: #fff !important;\n      border-color: ${bg} !important;\n      background: ${bg} !important;\n      border-top-left-radius: 12px !important;\n      border-top-right-radius: 12px !important;\n    }\n\n    .ant-tabs-tab-active {\n      border-color: #fff !important;\n      background: #fff !important;\n\n      svg path {\n        fill: ${p => p.theme.primary} !important;\n      }\n    }\n\n    .ant-tabs-tab .anticon {\n      color: #fff !important;\n    }\n\n    .ant-tabs-tab.is--over {\n      border: 1px dashed lightgrey !important;\n    }\n\n    .ant-tabs-tab.is--dragging {\n      opacity: 0.3;\n    }\n\n    > .ant-tabs-nav .ant-tabs-nav-add,\n    .ant-tabs > div > .ant-tabs-nav .ant-tabs-nav-add {\n      background: transparent;\n      border-color: transparent;\n      color: ${p => p.theme.darkGrey};\n\n      .anticon-plus {\n        color: ${p => p.theme.darkGrey};\n      }\n\n      .anticon-plus:hover {\n        color: ${p => p.theme.primary};\n      }\n    }\n\n    .ant-tabs-tab-btn:focus,\n    .ant-tabs-tab-remove:focus,\n    .ant-tabs-tab-btn:active,\n    .ant-tabs-tab-remove:active,\n    .ant-tabs-tab.ant-tabs-tab-active .ant-tabs-tab-btn {\n      color: ${p => p.theme.secondary} !important;\n    }\n  }\n\n  &.ant-tabs-top > .ant-tabs-nav,\n  &.ant-tabs-top > div > .ant-tabs-nav {\n    margin-bottom: 0;\n  }\n\n  &.ant-tabs-top > .ant-tabs-nav::before {\n    border-bottom: none;\n  }\n`\n","import React from 'react'\nimport { DragSource, DropTarget } from 'react-dnd'\nimport cx from 'classnames'\nimport { compose } from 'ramda'\nimport Tabs from '@/components/tabs'\n\n// Drag & Drop node\nclass TabNode extends React.Component {\n  render() {\n    const {\n      connectDragSource,\n      connectDropTarget,\n      isDragging,\n      isOver,\n      moveTabNode,\n      draggingItem,\n      id,\n      ...props\n    } = this.props\n\n    return connectDragSource(\n      connectDropTarget(\n        React.cloneElement(props.children, {\n          className: cx(props.children.props.className, {\n            'is--dragging': isDragging,\n            'is--over': isOver && id !== draggingItem?.id,\n          }),\n        })\n      )\n    )\n  }\n}\n\nconst withDropTarget = DropTarget(\n  'DND_NODE',\n  {\n    drop(props, monitor) {\n      const dragKey = monitor.getItem().index\n      const hoverKey = props.index\n\n      if (dragKey === hoverKey) {\n        return\n      }\n\n      props.moveTabNode(dragKey, hoverKey)\n      monitor.getItem().index = hoverKey\n    },\n  },\n  (connect, monitor) => ({\n    connectDropTarget: connect.dropTarget(),\n    isOver: monitor.isOver(),\n    draggingItem: monitor.getItem(),\n  })\n)\n\nconst withDragSource = DragSource(\n  'DND_NODE',\n  {\n    beginDrag(props) {\n      return {\n        id: props.id,\n        index: props.index,\n      }\n    },\n  },\n  (connect, monitor) => ({\n    connectDragSource: connect.dragSource(),\n    isDragging: monitor.isDragging(),\n  })\n)\n\nconst WrapTabNode = compose(withDropTarget, withDragSource)(TabNode)\n\nexport default class DraggableTabs extends React.Component {\n  static defaultProps = {\n    order: [],\n  }\n\n  moveTabNode = (dragKey, hoverKey) => {\n    const { children, order, moveTabNode } = this.props\n    const newOrder = order.slice()\n\n    React.Children.forEach(children, c => {\n      if (newOrder.indexOf(c.key) === -1) {\n        newOrder.push(c.key)\n      }\n    })\n\n    const dragIndex = newOrder.indexOf(dragKey)\n    const hoverIndex = newOrder.indexOf(hoverKey)\n\n    newOrder.splice(dragIndex, 1)\n    newOrder.splice(hoverIndex, 0, dragKey)\n\n    moveTabNode(newOrder)\n  }\n\n  renderTabBar = (props, DefaultTabBar) => (\n    <DefaultTabBar {...props}>\n      {node => (\n        <WrapTabNode\n          key={node.key}\n          id={node.key}\n          index={node.key}\n          moveTabNode={this.moveTabNode}>\n          {node}\n        </WrapTabNode>\n      )}\n    </DefaultTabBar>\n  )\n\n  render() {\n    const { moveTabNode, children, ...props } = this.props\n\n    return (\n      <Tabs renderTabBar={this.renderTabBar} {...props}>\n        {children}\n      </Tabs>\n    )\n  }\n}\n\nDraggableTabs.TabPane = Tabs.TabPane\n","import moment from 'moment'\nimport { envStore } from '@/constants/env'\nconst {\n  forEach,\n  addIndex,\n  map,\n  isEmpty,\n  either,\n  compose,\n  not,\n  isNil: RisNil,\n  path,\n} = require('ramda')\n\nexport function queryString(search: string): { [key: string]: any } {\n  if (!search) {\n    search = window.location.search\n  }\n\n  const params = new URLSearchParams(search)\n\n  let result: object | any = {}\n\n  params.forEach((value: string, key: string) => (result[key] = value))\n\n  return result\n}\n\nexport function uuid() {\n  let d = Date.now()\n  if (\n    typeof performance !== 'undefined' &&\n    typeof performance.now === 'function'\n  ) {\n    d += performance.now()\n  }\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {\n    const r = (d + Math.random() * 16) % 16 | 0\n    d = Math.floor(d / 16)\n    return (c === 'x' ? r : (r & 0x3) | 0x8).toString(16)\n  })\n}\n\nexport function isUUID(uuid: string) {\n  return /^[0-9a-f]{8}-[0-9a-f]{4}-[0-5][0-9a-f]{3}-[089ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(\n    uuid\n  )\n}\n\nexport const forEachIndexed = addIndex(forEach)\nexport const mapIndexed: any = addIndex(map)\n\nexport const isNil = either(isEmpty, RisNil)\n\nexport const hasPath = (namedPath: Array<string | number>) =>\n  compose(not, isNil, path(namedPath))\n\nexport const getRangeDate = (\n  date: [moment.Moment, moment.Moment],\n  dateFormat?: string\n) => {\n  const [startDate, stopDate] = date\n\n  return [\n    startDate\n      ? dateFormat\n        ? startDate.format(dateFormat)\n        : startDate.toISOString()\n      : undefined,\n    stopDate\n      ? dateFormat\n        ? stopDate.format(dateFormat)\n        : stopDate.toISOString()\n      : undefined,\n  ]\n}\n\nexport const toThousandSeparator = (number: number | string) => {\n  if (number && (typeof number === 'number' || isNaN(number as any))) {\n    return number.toLocaleString()\n  }\n  return number\n}\n\nexport const capitalize = (s: string) => {\n  if (typeof s !== 'string') return ''\n  return s.charAt(0).toUpperCase() + s.slice(1)\n}\n\nexport function getNumberFromString(str?: string) {\n  if (!str) {\n    return str\n  }\n  return str.replace(/[^\\d.]/g, '')\n}\n\nexport const redirect = () => {\n  if (!envStore.isEnvDev && window.location.pathname === '/') {\n    window.location.href = envStore.appUrl\n    return\n  }\n}\n","import React from 'react'\nimport store from 'store'\nimport moment from 'moment'\nimport { update, length } from 'ramda'\nimport { Mutation, MutationOptions, DataSource } from '@/constants/types'\nimport { useReportList } from '@/data/useReport'\nimport { uuid } from '@/utils/webHelper'\n\nexport const useReports = () => {\n  const [data, setData] = React.useState<DataSource>({\n    content: [],\n    total: 0,\n    totalPages: 0,\n  })\n\n  const [reportList, setReportList] = useReportList()\n\n  const refetch = (values?: any) => {\n    setData({\n      content: reportList,\n      total: length(reportList),\n      totalPages: Math.floor(length(reportList) / 10) + 1,\n    })\n  }\n\n  return {\n    data,\n    refetch,\n    loading: false,\n    reportList,\n    setReportList,\n  }\n}\n\nexport const useAddNewReport = ({ onCompleted }: MutationOptions = {}) => {\n  const [reportList, setReportList] = useReportList()\n  const handler = (values: any) => {\n    let id = uuid()\n    let newList = [\n      ...reportList,\n      {\n        ...values,\n        id,\n        createdAt: moment(),\n        createdAtStr: moment().format('YYYY/MM/DD HH:mm'),\n        updatedAt: moment(),\n        updatedAtStr: moment().format('YYYY/MM/DD HH:mm'),\n      },\n    ]\n\n    setReportList(newList)\n    store.set('reportListState', newList)\n\n    if (onCompleted) {\n      onCompleted({ ...values, id })\n    }\n  }\n  return [false, handler] as Mutation\n}\n\nexport const useUpdateReport = ({ onCompleted }: MutationOptions = {}) => {\n  const [reportList, setReportList] = useReportList()\n\n  const handler = (values: any) => {\n    let index = reportList.findIndex((x: any) => `${x.id}` === `${values.id}`)\n    let newList = update(\n      index,\n      {\n        ...values,\n        updatedAt: moment(),\n        updatedAtStr: moment().format('YYYY/MM/DD HH:mm'),\n      },\n      reportList\n    )\n    setReportList(newList)\n    store.set('reportListState', newList)\n\n    if (onCompleted) {\n      onCompleted()\n    }\n  }\n  return [false, handler] as Mutation\n}\n","import React from 'react'\nimport { replace } from 'ramda'\nimport { envStore } from '@/constants/env'\n\nexport interface UseTitleOptions {\n  restoreOnUnmount?: boolean\n}\n\nconst DEFAULT_USE_TITLE_OPTIONS: UseTitleOptions = {\n  restoreOnUnmount: false,\n}\n\nfunction useTitle(\n  title: string,\n  options: UseTitleOptions = DEFAULT_USE_TITLE_OPTIONS\n) {\n  const prevTitleRef = React.useRef(document.title)\n  document.title = replace(/%s/, title)(envStore.appTitle)\n  React.useEffect(() => {\n    if (options && options.restoreOnUnmount) {\n      return () => {\n        document.title = prevTitleRef.current // eslint-disable-line\n      }\n    } else {\n      return\n    }\n  }, []) // eslint-disable-line\n}\n\nexport default typeof document !== 'undefined'\n  ? useTitle\n  : (_title: string) => {}\n","import React from 'react'\nimport { Layout } from 'antd'\nimport cx from 'classnames'\nimport AppFooter from '@/components/app-footer'\nimport theme from '../theme'\n\ninterface PageProps {\n  children: React.ReactNode\n  style?: React.CSSProperties\n  className?: string\n  wrapperClassName?: string\n  wrapperStyle?: React.CSSProperties\n}\n\nexport function Page({ children, style, className = 'pr-10' }: PageProps) {\n  return (\n    <Layout>\n      <Layout.Content\n        style={{\n          background: `linear-gradient(-90deg,#42c2b8,${theme.primary})`,\n        }}>\n        <div\n          className={cx('pl-8 pt-6 pb-12', className)}\n          style={style}\n          css={{\n            background: 'rgb(221, 228, 237)',\n            borderTopLeftRadius: 32,\n            borderTopRightRadius: 32,\n          }}>\n          {children}\n        </div>\n      </Layout.Content>\n      <AppFooter />\n    </Layout>\n  )\n}\n","import React from 'react'\nimport { Table, Empty, Tooltip } from 'antd'\nimport { TableProps } from 'antd/lib/table'\nimport { CloseOutlined, PlusOutlined } from '@ant-design/icons'\nimport styled from 'styled-components'\n\nconst StyledTable: any = styled(Table)`\n  &.ant-table-wrapper {\n    .ant-pagination-prev .ant-pagination-item-link,\n    .ant-pagination-next .ant-pagination-item-link {\n      border-color: ${p => p.theme.pagination};\n      border-radius: 6px;\n      color: ${p => p.theme.pagination};\n    }\n\n    .ant-pagination-item {\n      border-color: ${p => p.theme.pagination};\n    }\n\n    .ant-pagination-item a {\n      color: ${p => p.theme.pagination};\n    }\n\n    .ant-pagination-item-active,\n    .ant-pagination-item-active:focus,\n    .ant-pagination-item:hover {\n      border-color: ${p => p.theme.pagination};\n      background: ${p => p.theme.pagination};\n\n      a {\n        color: #fff;\n      }\n    }\n\n    .ant-table-pagination.ant-pagination {\n      margin-top: 32px;\n    }\n\n    .ant-pagination-prev:hover .ant-pagination-item-link,\n    .ant-pagination-next:hover .ant-pagination-item-link {\n      border-color: ${p => p.theme.pagination};\n      background: ${p => p.theme.pagination};\n      color: #fff;\n    }\n\n    .ant-pagination-simple-pager {\n      color: ${p => p.theme.pagination};\n    }\n  }\n\n  .ant-table {\n    background: transparent;\n  }\n\n  .ant-table-tbody > tr > td {\n    height: 40px;\n    padding-top: 10px;\n    padding-bottom: 10px;\n    line-height: 1em;\n    color: #4a4a4a;\n    background: transparent !important;\n    border-bottom: 1px solid #e9e9e9;\n  }\n\n  .ant-table-thead > tr > th {\n    padding: 12px;\n    background: ${p => p.theme.primary};\n    border-bottom: 1px solid #e9e9e9;\n    color: #fff;\n    font-weight: 500;\n  }\n`\n\ntype Props<T> = TableProps<T> & {\n  editable?: boolean\n  isRowDeletable?: (row: T) => boolean\n  onAddRowClick?: (param?: any) => any\n  onDeleteRowClick?: (param?: any) => any\n  isCanEdit?: any\n}\n\nfunction TableComponent<T = any>({\n  editable = false,\n  columns = [],\n  onAddRowClick,\n  isRowDeletable = () => true,\n  onDeleteRowClick,\n  isCanEdit = '',\n  ...props\n}: Props<T>) {\n  const _columns = React.useMemo(() => {\n    let canEdit: boolean = true\n    if (!editable) {\n      return columns\n    }\n    if (isCanEdit !== '') {\n      canEdit = isCanEdit\n    }\n\n    const handleRowDelete = (key: React.Key) => () => {\n      if (onDeleteRowClick) {\n        onDeleteRowClick(key)\n      }\n    }\n\n    return [\n      {\n        title: (\n          <Tooltip placement=\"topLeft\" title=\"新增\">\n            <PlusOutlined\n              className=\"ml-1 relative\"\n              style={{ top: -3 }}\n              onClick={canEdit ? onAddRowClick : undefined}\n            />\n          </Tooltip>\n        ),\n        width: 50,\n        render: (_: any, __: any, idx: number) => (\n          <div className=\"text-center\">#{idx + 1}</div>\n        ),\n      },\n      ...columns,\n      {\n        width: 50,\n        render: (_: any, r: any, idx: number) => (\n          <Tooltip placement=\"topLeft\" title=\"刪除\">\n            <CloseOutlined\n              onClick={isRowDeletable(r) ? handleRowDelete(r.id) : undefined}\n            />\n          </Tooltip>\n        ),\n      },\n    ]\n  }, [columns, editable]) // eslint-disable-line\n\n  return (\n    <StyledTable\n      columns={_columns}\n      locale={{\n        emptyText: (\n          <Empty\n            image={Empty.PRESENTED_IMAGE_SIMPLE}\n            description={\n              <span>\n                <span className=\"d-block\">\n                  尚無資料，請點選「＋新增」新增資料。\n                </span>\n              </span>\n            }\n          />\n        ),\n      }}\n      {...props}>\n      {props.children}\n    </StyledTable>\n  )\n}\n\nTableComponent.displayName = 'Table'\nTableComponent.Column = Table.Column\n\nexport default TableComponent\n","import React from 'react'\n\ntype Props = {\n  /**\n   * 開關 Modal 時希望處理的事情\n   */\n  onRequestOpen?: () => any\n}\n\nexport default function useVisible({ onRequestOpen }: Props = {}) {\n  const [visible, setVisible] = React.useState(false)\n\n  const handleVisible: any = (evt: React.MouseEvent<HTMLElement>) => {\n    setVisible(prev => !prev)\n\n    if (onRequestOpen) {\n      onRequestOpen()\n    }\n  }\n\n  const handleClose = () => {\n    setVisible(false)\n  }\n\n  return [visible, handleVisible, handleClose]\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { findDOMNode } from 'react-dom'\nimport { DndContext } from 'react-dnd'\nimport throttle from 'lodash.throttle'\nimport raf from 'raf'\nimport hoist from 'hoist-non-react-statics'\nimport getDisplayName from '@/utils/get-display-name'\n\nfunction noop() {}\n\nfunction intBetween(min, max, val) {\n  return Math.floor(Math.min(max, Math.max(min, val)))\n}\n\nfunction getCoords(evt) {\n  if (evt.type === 'touchmove') {\n    return {\n      x: evt.changedTouches[0].clientX,\n      y: evt.changedTouches[0].clientY,\n    }\n  }\n\n  return { x: evt.clientX, y: evt.clientY }\n}\n\nconst DEFAULT_BUFFER = 150\n\nexport function createHorizontalStrength(_buffer) {\n  return function defaultHorizontalStrength({ x, w, y, h }, point) {\n    const buffer = Math.min(w / 2, _buffer)\n    const inRange = point.x >= x && point.x <= x + w\n    const inBox = inRange && point.y >= y && point.y <= y + h\n\n    if (inBox) {\n      if (point.x < x + buffer) {\n        return (point.x - x - buffer) / buffer\n      } else if (point.x > x + w - buffer) {\n        return -(x + w - point.x - buffer) / buffer\n      }\n    }\n\n    return 0\n  }\n}\n\nexport function createVerticalStrength(_buffer) {\n  return function defaultVerticalStrength({ y, h, x, w }, point) {\n    const buffer = Math.min(h / 2, _buffer)\n    const inRange = point.y >= y && point.y <= y + h\n    const inBox = inRange && point.x >= x && point.x <= x + w\n\n    if (inBox) {\n      if (point.y < y + buffer) {\n        return (point.y - y - buffer) / buffer\n      } else if (point.y > y + h - buffer) {\n        return -(y + h - point.y - buffer) / buffer\n      }\n    }\n\n    return 0\n  }\n}\n\nexport const defaultHorizontalStrength = createHorizontalStrength(\n  DEFAULT_BUFFER\n)\n\nexport const defaultVerticalStrength = createVerticalStrength(DEFAULT_BUFFER)\n\nexport default function createScrollingComponent(WrappedComponent) {\n  class ScrollingComponent extends React.Component {\n    static displayName = `Scrolling(${getDisplayName(WrappedComponent)})`\n\n    static propTypes = {\n      onScrollChange: PropTypes.func,\n      verticalStrength: PropTypes.func,\n      horizontalStrength: PropTypes.func,\n      strengthMultiplier: PropTypes.number,\n    }\n\n    static defaultProps = {\n      useScroll: true,\n      onScrollChange: noop,\n      verticalStrength: defaultVerticalStrength,\n      horizontalStrength: defaultHorizontalStrength,\n      strengthMultiplier: 30,\n    }\n\n    static contextType = DndContext\n\n    constructor(props, ctx) {\n      super(props, ctx)\n\n      this.scaleX = 0\n      this.scaleY = 0\n      this.frame = null\n\n      this.attached = false\n      this.dragging = false\n    }\n\n    componentDidMount() {\n      if (this.props.useScroll) {\n        this._initial()\n      }\n    }\n\n    _initial() {\n      // window.document.body.addEventListener('dragover', this.handleEvent);\n      this.container = findDOMNode(this.wrappedInstance)\n      this.container.addEventListener('dragover', this.handleEvent)\n      // touchmove events don't seem to work across siblings, so we unfortunately\n      // have to attach the listeners to the body\n      window.document.body.addEventListener('touchmove', this.handleEvent)\n\n      this.clearMonitorSubscription = this.context.dragDropManager\n        .getMonitor()\n        .subscribeToStateChange(() => this.handleMonitorChange())\n    }\n\n    componentWillUnmount() {\n      if (this.props.useScroll) {\n        this._remove()\n      }\n    }\n\n    _remove() {\n      // window.document.body.removeEventListener('dragover', this.handleEvent);\n      this.container.removeEventListener('dragover', this.handleEvent)\n      window.document.body.removeEventListener('touchmove', this.handleEvent)\n      this.clearMonitorSubscription()\n      this.stopScrolling()\n    }\n\n    handleEvent = evt => {\n      if (this.dragging && !this.attached) {\n        this.attach()\n        this.updateScrolling(evt)\n      }\n    }\n\n    handleMonitorChange() {\n      const isDragging = this.context.dragDropManager.getMonitor().isDragging()\n\n      if (!this.dragging && isDragging) {\n        this.dragging = true\n      } else if (this.dragging && !isDragging) {\n        this.dragging = false\n        this.stopScrolling()\n      }\n    }\n\n    attach() {\n      this.attached = true\n      window.document.body.addEventListener('dragover', this.updateScrolling)\n      window.document.body.addEventListener('touchmove', this.updateScrolling)\n    }\n\n    detach() {\n      this.attached = false\n      window.document.body.removeEventListener('dragover', this.updateScrolling)\n      window.document.body.removeEventListener(\n        'touchmove',\n        this.updateScrolling\n      )\n    }\n\n    // Update scaleX and scaleY every 100ms or so\n    // and start scrolling if necessary\n    updateScrolling = throttle(\n      evt => {\n        const {\n          left: x,\n          top: y,\n          width: w,\n          height: h,\n        } = this.container.getBoundingClientRect()\n        const box = { x, y, w, h }\n        const coords = getCoords(evt)\n\n        // calculate strength\n        this.scaleX = this.props.horizontalStrength(box, coords)\n        this.scaleY = this.props.verticalStrength(box, coords)\n\n        // start scrolling if we need to\n        if (!this.frame && (this.scaleX || this.scaleY)) {\n          this.startScrolling()\n        }\n      },\n      100,\n      { trailing: false }\n    )\n\n    startScrolling() {\n      let i = 0\n      const tick = () => {\n        const { scaleX, scaleY, container } = this\n        const { strengthMultiplier, onScrollChange } = this.props\n\n        // stop scrolling if there's nothing to do\n        if (strengthMultiplier === 0 || scaleX + scaleY === 0) {\n          this.stopScrolling()\n          return\n        }\n\n        // there's a bug in safari where it seems like we can't get\n        // mousemove events from a container that also emits a scroll\n        // event that same frame. So we double the strengthMultiplier and only adjust\n        // the scroll position at 30fps\n        if (i++ % 2) {\n          const {\n            scrollLeft,\n            scrollTop,\n            scrollWidth,\n            scrollHeight,\n            clientWidth,\n            clientHeight,\n          } = container\n\n          const newLeft = scaleX\n            ? (container.scrollLeft = intBetween(\n                0,\n                scrollWidth - clientWidth,\n                scrollLeft + scaleX * strengthMultiplier\n              ))\n            : scrollLeft\n\n          const newTop = scaleY\n            ? (container.scrollTop = intBetween(\n                0,\n                scrollHeight - clientHeight,\n                scrollTop + scaleY * strengthMultiplier\n              ))\n            : scrollTop\n\n          onScrollChange(newLeft, newTop)\n        }\n        this.frame = raf(tick)\n      }\n\n      tick()\n    }\n\n    stopScrolling() {\n      this.detach()\n      this.scaleX = 0\n      this.scaleY = 0\n\n      if (this.frame) {\n        raf.cancel(this.frame)\n        this.frame = null\n      }\n    }\n\n    render() {\n      const {\n        // not passing down these props\n        strengthMultiplier,\n        verticalStrength,\n        horizontalStrength,\n        onScrollChange,\n        ...props\n      } = this.props\n\n      return (\n        <WrappedComponent\n          ref={ref => {\n            this.wrappedInstance = ref\n          }}\n          {...props}\n        />\n      )\n    }\n  }\n\n  return hoist(ScrollingComponent, WrappedComponent)\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport cx from 'classnames'\nimport withScroll, { createVerticalStrength } from './withScroll'\n\ninterface Props {\n  className?: string\n  useScroll?: boolean\n}\n\nconst DndScrollableElement = styled.div`\n  height: 85vh;\n  padding-top: 0;\n  overflow-y: scroll;\n\n  .report-template-builder {\n    &__main-content {\n      min-height: 371.25mm;\n      margin: 0 auto;\n      padding: 16px;\n      box-sizing: border-box;\n      max-width: 100%;\n      background: #fff;\n      border-top-right-radius: 16px;\n      border-bottom-left-radius: 16px;\n      border-bottom-right-radius: 16px;\n    }\n\n    &__contentarea {\n      min-height: 348.75mm;\n    }\n\n    &__contentarea--fixed-layout {\n      min-height: auto;\n    }\n\n    &__snippet-toolbar {\n      visibility: hidden;\n    }\n  }\n\n  .ui-draggable {\n    &:focus,\n    &:active {\n      outline: 0;\n\n      .course-builder__snippet-toolbar {\n        visibility: visible;\n        opacity: 1;\n        transition: visibility 0s, opacity 0.3s, max-height 0.6s linear;\n      }\n    }\n  }\n\n  &.is--preview {\n    height: auto;\n  }\n`\n\nconst ScrollableComponent = withScroll(DndScrollableElement)\n\nconst vStrength = createVerticalStrength(150)\n\nexport default class ReactDndProvider extends React.Component<Props> {\n  static defaultProps = {\n    useScroll: true,\n  }\n\n  render() {\n    const { className, useScroll } = this.props\n\n    return (\n      <ScrollableComponent\n        useScroll={useScroll}\n        verticalStrength={vStrength}\n        strengthMultiplier={100}\n        className={cx('report-template-builder', className)}>\n        {this.props.children}\n      </ScrollableComponent>\n    )\n  }\n}\n","import { Input } from 'antd'\nimport styled, { css } from 'styled-components'\n\nconst borderLess = css`\n  &.ant-input-borderless {\n    border: none;\n    border-bottom: 1px solid #d9d9d9;\n    border-bottom-left-radius: 0;\n    border-bottom-right-radius: 0;\n  }\n\n  &:active:not(.ant-input-borderless) {\n    box-shadow: 0 0 0 1px ${p => p.theme.primary};\n  }\n`\n\nconst StyledInput = styled(Input)`\n  &.ant-input-affix-wrapper .ant-input,\n  &.ant-input {\n    border-color: #d9d9d9;\n\n    &:hover,\n    &:focus {\n      border-color: ${p => p.theme.secondary};\n    }\n\n    ${borderLess};\n  }\n`\n\nconst Search = styled(Input.Search)`\n  &.ant-input-search {\n    .ant-input {\n      border-color: #d9d9d9;\n\n      &:hover,\n      &:focus {\n        border-color: ${p => p.theme.secondary};\n      }\n\n      &:focus {\n        box-shadow: 0 0 0 1px ${p => p.theme.primary};\n      }\n    }\n\n    .anticon-search {\n      font-size: 20px;\n      color: ${p => p.theme.primary};\n    }\n  }\n`\n\nconst TextArea = styled(Input.TextArea)`\n  &.ant-input {\n    resize: none;\n    border: 1px solid #d9d9d9;\n\n    &:hover,\n    &:focus {\n      border-color: ${p => p.theme.secondary};\n    }\n\n    ${borderLess};\n  }\n`\n\nexport { StyledInput as Input, TextArea, Search }\n\nexport default StyledInput\n","import React from 'react'\nimport { Layout } from 'antd'\n\nexport default function AppFooter() {\n  return (\n    <Layout.Footer\n      className=\"pb-6 text-center text-gray-600 border-t border-gray-400\"\n      style={{ background: 'rgb(221, 228, 237)' }}>\n      2020 高雄榮總數位病理平台\n    </Layout.Footer>\n  )\n}\n","const primary = '#38a8a9'\n\nmodule.exports = {\n  primary,\n  secondary: '#42c2b8',\n  danger: '#d74c4c',\n  darkGrey: '#4a4a4a',\n  purple150: 'rgba(115, 105, 215, 0.15)',\n  cornblue: '#a9b6d8',\n  comet: '#555977',\n  btn: {\n    danger: '#d74c4c',\n    primary: '#2c908a',\n    secondary: '#42c2b8',\n  },\n  sider: {\n    bg: primary,\n  },\n  login: {\n    cyan: 'rgba(5,124,147,1)',\n  },\n  pagination: primary,\n}\n","export enum ActionTypes {\n  DELETABLE = 'deletable',\n  UPDATABLE = 'updatable',\n  CREATABLE = 'creatable',\n  READABLE = 'readable',\n}\n\nexport const reportAnnotations = [\n  '檢體不適當',\n  '不符合',\n  '通知惡性或疑似',\n  '通知癌前病灶',\n  '其他危險值',\n  '肺結核',\n  '是否保留',\n]\n","import React from 'react'\n\nexport default React.lazy(() => import('./report-template-builder'))\n","import React from 'react'\n\nexport default React.lazy(\n  () => import('../report-template-list/report-template-list')\n)\n","import React from 'react'\n\nexport default React.lazy(() => import('./report-inquiry'))\n","import useSwr, { mutate } from 'swr'\nimport request from '@/utils/request'\nimport { pathOr, head } from 'ramda'\nconst { compose } = require('ramda')\n\nexport function usePathology() {\n  const { data, ...others } = useSwr(`/api/b2/getPathologyResult`, url =>\n    request(url, {\n      method: 'POST',\n      body: {\n        classification: 'pathorderview',\n        noType: 'HHISNUM',\n        no: '16685033',\n      },\n    })\n  )\n\n  return {\n    ...others,\n    data: compose(head, pathOr({}, ['result']))(data),\n  }\n}\n\n// export function useQueryData(url: string) {\n//   const [data, setData] = React.useState()\n\n//   const handleQuery = async (values: any) => {\n//     const response = await mutate(url, { ...values}, )\n\n//     setData(response)\n//   }\n\n//   return [handleQuery, { data }]\n// }\n","import React from 'react'\nimport { CheckOutlined } from '@ant-design/icons'\nimport { replace, join, dropLast, split } from 'ramda'\nimport { envStore } from '@/constants/env'\nimport Button from '@/components/button'\nimport Select from '@/components/select'\nimport { confirm } from '@/utils/message'\nimport history from '@/utils/history'\nimport { REPORT_INQUIRY, RADIOL_IMAGE } from '@/constants/routes'\nconst { compose } = require('ramda')\n\nexport enum menuState {\n  VISIBLE_RIGHT = '1',\n  VISIBLE_LEFT = '2',\n}\n\ntype Props = {\n  rightContentVisible: boolean\n  leftContentVisible: boolean\n  onLayoutChange: (value: string) => void\n  onOk: () => void\n}\n\nexport default function Header({\n  leftContentVisible,\n  rightContentVisible,\n  onLayoutChange,\n  onOk,\n}: Props) {\n  const handleConfirm = () => {\n    confirm({\n      title: '確認要取消嗎？',\n      content: '取消後未儲存的資料將會消失，確認取消嗎？',\n      okText: '確認',\n      onOk: () => {\n        history.push(REPORT_INQUIRY)\n      },\n    })\n  }\n\n  const handleSave = () => {\n    onOk()\n  }\n\n  const handleOpenImageViewer = () => {\n    let pathname = replace(\n      ':studyInstanceUIDs',\n      '1.3.6.1.4.1.14519.5.2.1.5099.8010.199920086920823171706454903251'\n    )(RADIOL_IMAGE)\n\n    // remove last `/`\n    let url = compose(join('/'), dropLast(1), split('/'))(envStore.appUrl)\n\n    window.open(`${url}${pathname}`, '__blank')\n  }\n\n  return (\n    <div className=\"inline-flex\">\n      <Select\n        mode=\"multiple\"\n        placeholder=\"檢 視\"\n        className=\"is--outline cursor-pointer\"\n        style={{ minWidth: 80 }}\n        dropdownMatchSelectWidth={false}\n        dropdownStyle={{ minWidth: 138 }}\n        autoFocus={false}\n        onSelect={onLayoutChange}\n        value={[]}>\n        <Select.Option value={menuState.VISIBLE_LEFT}>\n          <div className=\"flex items-center\">\n            顯示左邊內容\n            {leftContentVisible && <CheckOutlined className=\"ml-4\" />}\n          </div>\n        </Select.Option>\n        <Select.Option value={menuState.VISIBLE_RIGHT}>\n          <div className=\"flex items-center\">\n            顯示右邊內容\n            {rightContentVisible && <CheckOutlined className=\"ml-4\" />}\n          </div>\n        </Select.Option>\n      </Select>\n      <Button\n        color=\"outline\"\n        className=\"ml-2 text-white border-white bg-transparent\"\n        onClick={handleOpenImageViewer}\n        style={{ minWidth: 80 }}>\n        影像\n      </Button>\n      <Button\n        color=\"outline\"\n        className=\"ml-2 text-white border-white bg-transparent\"\n        onClick={handleSave}\n        style={{ minWidth: 80 }}>\n        儲存\n      </Button>\n      <Button\n        color=\"outline\"\n        className=\"ml-2 text-white border-white bg-transparent\"\n        onClick={handleConfirm}\n        style={{ minWidth: 80 }}>\n        取消\n      </Button>\n      <Button\n        color=\"outline\"\n        className=\"ml-6 text-white border-white bg-transparent\">\n        下載 JSON\n      </Button>\n      <Button\n        color=\"outline\"\n        className=\"ml-2 text-white border-white bg-transparent\">\n        輸出報告\n      </Button>\n    </div>\n  )\n}\n","import { Anchor } from 'antd'\nimport styled from 'styled-components'\n\nconst StyledAnchor = styled(Anchor)`\n  &.ant-anchor-wrapper {\n    background: transparent;\n  }\n\n  .fixed {\n    position: relative !important;\n  }\n\n  a:hover,\n  .ant-anchor-link-active > .ant-anchor-link-title {\n    color: ${p => p.theme.primary};\n  }\n\n  .ant-anchor-ink-ball {\n    border: 2px solid ${p => p.theme.primary};\n  }\n\n  .ant-anchor-ink::before {\n    /* background-color: ${p => p.theme.secondary}; */\n  }\n`\n\nconst PieChart = styled.div<{\n  legendWidth?: number\n  chartWidth?: number\n}>`\n  &.pie {\n    position: relative;\n\n    .chart {\n      position: relative;\n    }\n\n    &.hasLegend .chart {\n      width: calc(100% - ${p => p.chartWidth + 'px'});\n    }\n\n    .legend {\n      position: absolute;\n      top: 50%;\n      right: 0;\n      min-width: ${p => p.legendWidth}px;\n      margin: 0 20px;\n      padding: 0;\n      list-style: none;\n      transform: translateY(-50%);\n      li {\n        height: 22px;\n        margin-bottom: 16px;\n        line-height: 22px;\n        cursor: pointer;\n        &:last-child {\n          margin-bottom: 0;\n        }\n      }\n    }\n\n    .dot {\n      position: relative;\n      top: -1px;\n      display: inline-block;\n      width: 8px;\n      height: 8px;\n      margin-right: 8px;\n      border-radius: 8px;\n    }\n\n    .line {\n      display: inline-block;\n      width: 1px;\n      height: 16px;\n      margin-right: 8px;\n      background-color: hsv(0, 0, 91%);\n    }\n\n    .legendTitle {\n      color: rgba(0, 0, 0, 0.65);\n    }\n\n    .percent {\n      color: rgba(0, 0, 0, 0.45);\n    }\n\n    .value {\n      position: absolute;\n      right: 0;\n    }\n\n    .title {\n      margin-bottom: 8px;\n    }\n\n    .total {\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      max-height: 62px;\n      text-align: center;\n      transform: translate(-50%, -50%);\n      font-size: 14px;\n\n      & > h4 {\n        height: 22px;\n        margin-bottom: 8px;\n        color: rgba(0, 0, 0, 0.45);\n        font-weight: normal;\n        font-size: 14px;\n        line-height: 22px;\n      }\n      & > p {\n        display: block;\n        height: 32px;\n        color: rgba(0, 0, 0, 0.85);\n        font-size: 1.2em;\n        line-height: 32px;\n        white-space: nowrap;\n      }\n    }\n  }\n\n  &.legendBlock {\n    &.hasLegend .chart {\n      width: 100%;\n      margin: 0 0 32px 0;\n    }\n    .legend {\n      position: relative;\n      transform: none;\n    }\n  }\n`\n\nexport { StyledAnchor as Anchor, PieChart }\n","/* eslint eqeqeq: 0 */\nimport React from 'react'\n\nexport type IReactComponent<P = any> =\n  | React.StatelessComponent<P>\n  | React.ComponentClass<P>\n  | React.ClassicComponentClass<P>\n\nfunction computeHeight(node: HTMLDivElement) {\n  const totalHeight = parseInt(getComputedStyle(node).height, 10)\n  const padding =\n    parseInt(getComputedStyle(node).paddingTop, 10) +\n    parseInt(getComputedStyle(node).paddingBottom, 10)\n  return totalHeight - padding\n}\n\nfunction getAutoHeight(n: HTMLDivElement | undefined) {\n  if (!n) {\n    return 0\n  }\n\n  let node = n\n\n  let height = computeHeight(node)\n\n  while (!height) {\n    node = node.parentNode as HTMLDivElement\n    if (node) {\n      height = computeHeight(node)\n    } else {\n      break\n    }\n  }\n\n  return height\n}\n\ninterface AutoHeightProps {\n  height?: number\n}\n\nfunction autoHeight() {\n  return <P extends AutoHeightProps>(\n    WrappedComponent: React.ComponentClass<P> | React.FC<P>\n  ) =>\n    class extends React.Component<P & AutoHeightProps> {\n      state = {\n        computedHeight: 0,\n      }\n\n      root: HTMLDivElement | undefined = undefined\n\n      componentDidMount() {\n        const { height } = this.props\n        if (!height) {\n          const h = getAutoHeight(this.root)\n          // eslint-disable-next-line\n          this.setState({ computedHeight: h })\n        }\n      }\n\n      handleRoot = (node: HTMLDivElement) => {\n        this.root = node\n      }\n\n      render() {\n        const { height } = this.props\n        const { computedHeight } = this.state\n        const h = height || computedHeight\n        return (\n          <div ref={this.handleRoot}>\n            {h > 0 && <WrappedComponent {...this.props} height={h} />}\n          </div>\n        )\n      }\n    }\n}\n\nexport default autoHeight\n","import React from 'react'\nimport { RouteComponentProps } from 'react-router-dom'\nimport { Row, Col, BackTop, Affix, Form, Select, message } from 'antd'\nimport cx from 'classnames'\nimport {\n  map,\n  pathOr,\n  keys,\n  gt,\n  __,\n  length,\n  ifElse,\n  equals,\n  always,\n  filter,\n  values,\n  not,\n  replace,\n  split,\n  join,\n} from 'ramda'\nimport useTitle from '@/hooks/useTitle'\nimport { useBreadcrumb, useHeaderContent } from '@/hooks/useApp'\nimport {\n  useReportTemplateState,\n  useToggleReportPreview,\n} from '@/data/useReportTemplate'\nimport { useReportItem } from '@/data/useReport'\nimport { isNil, mapIndexed, queryString } from '@/utils/webHelper'\nimport { SnippetProps } from '@/constants/types'\nimport { reportAnnotations } from '@/constants/enums'\nimport { Page } from '@/components/layout'\nimport ReactDndProvider from '@/components/snippet-scrollable-container'\nimport SnippetsContainer from '@/components/snippets-container'\nimport { Checkbox, CheckboxGroup } from '@/components/checkbox'\nimport Radio from '@/components/radio'\nimport Input from '@/components/input'\nimport Collapse from '@/components/collapse'\nimport SnippetListMenu from '@/components/snippet-list-menu'\nimport { renderSnippets } from '@/components/snippet-utils'\nimport Tabs from '@/components/draggable-tabs'\nimport { useReportTemplate } from '@/services/reportTemplate'\nimport { useAddNewReport, useUpdateReport } from '@/services/report'\nimport { usePathology } from '@/services/pathology'\nimport history from '@/utils/history'\nimport { REPORT_EDIT } from '@/constants/routes'\nimport { Anchor } from './components'\nimport Header from './header'\nimport Pie from './pie'\nconst { compose } = require('ramda')\n\nconst { Link } = Anchor\n\nenum menuState {\n  VISIBLE_RIGHT = '1',\n  VISIBLE_LEFT = '2',\n}\n\n// interface Props extends RouteComponentProps<{ id: string }> {}\n\ninterface Props extends RouteComponentProps<{ id: string }> {\n  id: any\n  reviewDoctor: string\n  serialNo: string\n}\n\nconst col = ifElse(equals(false), always(5), always(0))\n\nexport default function ReportTyping(props: Props) {\n  useTitle('輸入報告')\n  useBreadcrumb([{ name: '輸入報告' }, { name: '病理報告輸入' }])\n  useToggleReportPreview(true)\n\n  const [form] = Form.useForm()\n\n  const [reportTemplates] = useReportTemplateState()\n\n  const { data /* isValidating */ } = usePathology()\n\n  const [visibleLayouts, setVisibleLayouts] = React.useState<string[]>([\n    menuState.VISIBLE_LEFT,\n    menuState.VISIBLE_RIGHT,\n  ])\n\n  // 沒有 QS 代表是編輯，會有 params.id 要用 useReportItem 取得報告資料後，\n  // 再餵進去 useReportTemplate 作編輯\n  const { params } = props.match\n\n  // 有 QS 代表新增，會沒有 params.id，此時的資料要用 reportTemplate\n  const qs = queryString(props.location.search)\n\n  // 只有新增時有 QS 才會有\n  const [templateId, setCurrentTemplateId] = React.useState(qs.templateId)\n\n  React.useEffect(() => {\n    setCurrentTemplateId(qs.templateId)\n  }, [qs.templateId])\n\n  const item = useReportItem(params.id)\n\n  const {\n    total,\n    category,\n    reportTemplate,\n    snippetList,\n    handleTabEdit,\n    handleTabChange,\n    handleTabMove,\n    handleTabNameChange,\n    handleSnippetUpdate,\n  } = useReportTemplate({\n    id: templateId,\n    data: item,\n  })\n\n  React.useEffect(() => {\n    form.setFieldsValue(reportTemplate)\n  }, [JSON.stringify(reportTemplate)]) // eslint-disable-line\n\n  React.useEffect(() => {\n    if (qs.reviewDoctor) {\n      form.setFieldsValue({ reviewDoctor: qs.reviewDoctor })\n    }\n    if (qs.serialNo) {\n      form.setFieldsValue({ serialNo: qs.serialNo })\n    }\n  }, [JSON.stringify(qs)]) // eslint-disable-line\n\n  const handleLayoutChange = (value: string) => {\n    setVisibleLayouts((prev: string[]) =>\n      prev.includes(value) ? prev.filter(x => x !== value) : [...prev, value]\n    )\n  }\n\n  const leftContentVisible = visibleLayouts.includes(menuState.VISIBLE_LEFT)\n  const rightContentVisible = visibleLayouts.includes(menuState.VISIBLE_RIGHT)\n\n  const [, handleAdd] = useAddNewReport({\n    onCompleted: ({ id }: any) => {\n      history.push(replace(':id', id)(REPORT_EDIT))\n      message.success('報告資料已新增')\n    },\n  })\n\n  const [, handleUpdate] = useUpdateReport({\n    onCompleted: () => message.success('報告資料已儲存'),\n  })\n\n  const handleOk = () => {\n    form.validateFields().then(values => {\n      let payload = {\n        ...values,\n        ...(params.id ? { id: params.id } : {}),\n        ...data,\n        setting: snippetList,\n      }\n\n      const handler = params.id ? handleUpdate : handleAdd\n\n      handler(payload)\n    })\n  }\n\n  useHeaderContent(\n    <Header\n      leftContentVisible={leftContentVisible}\n      rightContentVisible={rightContentVisible}\n      onLayoutChange={handleLayoutChange}\n      onOk={handleOk}\n    />\n  )\n\n  const handleReportChange = (value: string) => {\n    setCurrentTemplateId(value)\n  }\n\n  const [affixed, setIsAffixed] = React.useState<boolean | undefined>(false)\n\n  const [percentage, setPercentage] = React.useState(0)\n\n  const handleAffixChange = (affixed?: boolean) => {\n    setIsAffixed(affixed)\n  }\n\n  // TODO: 還要切換 category\n  const handleAnchorClick = (\n    e: React.MouseEvent<HTMLElement>,\n    link: {\n      title: React.ReactNode\n      href: string\n    }\n  ) => {\n    e.preventDefault()\n\n    const [tab, href] = compose(\n      ([tab, ...rest]: string[]) => [tab, join('-')(rest)],\n      split('-'),\n      pathOr('', ['href'])\n    )(link)\n\n    if (category !== 'overview') {\n      handleTabChange(tab)\n    }\n\n    if (!href) {\n      return\n    }\n\n    window.scroll({\n      behavior: 'smooth',\n      left: 0,\n      top: document.getElementById(href)?.offsetTop,\n    })\n  }\n\n  const handleValuesChange = React.useCallback(\n    (_: any, { data }: { data: { [key: string]: any } }) => {\n      setPercentage(\n        Math.round(\n          (compose(length, filter(compose(not, isNil)), values)(data) / total) *\n            100\n        )\n      )\n    },\n    [total]\n  )\n\n  React.useEffect(() => {\n    handleValuesChange(null, form.getFieldsValue())\n  }, [total]) // eslint-disable-line\n\n  const renderCategory = (category: string) => {\n    return compose(gt(__, 0), length, pathOr([], [category]))(snippetList) ? (\n      <h2 id={category} className=\"my-2\">\n        {category}\n      </h2>\n    ) : null\n  }\n\n  let colSpan = 14 + col(leftContentVisible) + col(rightContentVisible)\n\n  return (\n    <ReactDndProvider className=\"is--preview\">\n      <BackTop />\n      <Page>\n        <Form form={form} onValuesChange={handleValuesChange}>\n          <Row gutter={16}>\n            {leftContentVisible && (\n              <Col span={5}>\n                <Collapse\n                  // accordion\n                  defaultActiveKey={[1, 2]}\n                  expandIcon={() => null}\n                  className=\"shadow-2xl\">\n                  <Collapse.Panel\n                    header={<div className=\"text-center\">報告內容</div>}\n                    key={1}>\n                    <Row className=\"mb-2 text-sm text-darkGrey\">\n                      <Col span={24} className=\"mb-3\">\n                        <div className=\"inline-block\" css={{ width: 65 }}>\n                          審核醫師\n                        </div>\n                        <Form.Item noStyle name=\"reviewDoctor\">\n                          <Input className=\"w-2/3\" bordered={false} />\n                        </Form.Item>\n                      </Col>\n                      <Col span={24} className=\"my-3\">\n                        <div className=\"inline-block\" css={{ width: 65 }}>\n                          申請序號\n                        </div>\n                        <Form.Item noStyle name=\"serialNo\">\n                          <Input className=\"w-2/3\" bordered={false} />\n                        </Form.Item>\n                      </Col>\n                      <Col span={24} className=\"my-3\">\n                        <div className=\"inline-block\" css={{ width: 65 }}>\n                          報告格式\n                        </div>\n                        <Select\n                          className=\"w-2/3\"\n                          bordered={false}\n                          value={templateId}\n                          onChange={handleReportChange}>\n                          {reportTemplates.map(x => (\n                            <Select.Option key={x.id} value={x.id}>\n                              {x.name}\n                            </Select.Option>\n                          ))}\n                        </Select>\n                      </Col>\n                      <Col span={24} className=\"mt-3\">\n                        <Affix offsetTop={0} onChange={handleAffixChange}>\n                          <Anchor\n                            showInkInFixed\n                            affix={false}\n                            className=\"is--fixed\"\n                            style={getAnchorStyles(affixed)}\n                            onClick={handleAnchorClick}>\n                            {compose(\n                              mapIndexed((key: string, idx: number) => (\n                                <Link\n                                  key={`${key}-${idx}`}\n                                  href={key}\n                                  title={key}>\n                                  {compose(\n                                    mapIndexed((x: SnippetProps) => (\n                                      <Link\n                                        key={x.id}\n                                        href={`${key}-${x.id}`}\n                                        title={pathOr(\n                                          x.id,\n                                          ['setting', 'text'],\n                                          x\n                                        )}\n                                      />\n                                    )),\n                                    pathOr([], [key])\n                                  )(snippetList)}\n                                </Link>\n                              )),\n                              keys\n                            )(snippetList)}\n                          </Anchor>\n                        </Affix>\n                      </Col>\n                    </Row>\n                  </Collapse.Panel>\n                  <Collapse.Panel\n                    header={<div className=\"text-center\">模版工具</div>}\n                    key={2}>\n                    <Row>\n                      <Col span={24}>\n                        <SnippetListMenu />\n                      </Col>\n                    </Row>\n                  </Collapse.Panel>\n                </Collapse>\n              </Col>\n            )}\n\n            <Col span={colSpan}>\n              <div className=\"pt-2 bg-white rounded-lg shadow-2xl\">\n                <Affix offsetTop={0}>\n                  <div\n                    className={cx(\n                      'px-4 mb-4 -mt-2',\n                      'flex items-center justify-between',\n                      'rounded-lg shadow-sm',\n                      'text-xl text-darkGrey font-medium'\n                    )}\n                    css={{ background: '#fff' }}>\n                    <div>\n                      Pathological Image Report\n                      <div className=\"text-base text-gray-600\">\n                        Imaging Report From for Hepatocellular Carcinoma\n                      </div>\n                    </div>\n                    <Pie\n                      percent={percentage}\n                      total={`${percentage}%`}\n                      style={{ width: 70, paddingTop: 6 }}\n                      height={80}\n                    />\n                  </div>\n                </Affix>\n              </div>\n\n              <div className=\"rounded-lg shadow-2xl\">\n                <Tabs\n                  type=\"editable-card\"\n                  activeKey={category}\n                  onChange={handleTabChange}\n                  onEdit={handleTabEdit}\n                  tabBarGutter={8}\n                  moveTabNode={handleTabMove}\n                  className=\"flex-1\">\n                  {compose(\n                    map((category: string) => (\n                      <Tabs.TabPane\n                        closable\n                        key={category}\n                        tab={\n                          <span\n                            contentEditable\n                            suppressContentEditableWarning\n                            spellCheck={false}\n                            className=\"outline-none\"\n                            css={{ whiteSpace: 'nowrap' }}\n                            onChange={handleTabNameChange(category)}>\n                            {category}\n                          </span>\n                        }>\n                        <Col\n                          span={24}\n                          className=\"p-4 report-template-builder__main-content\">\n                          <SnippetsContainer\n                            // draggable={!isPreview}\n                            draggable\n                            snippetList={snippetList[category]}\n                            onSnippetUpdate={handleSnippetUpdate}\n                          />\n                        </Col>\n                      </Tabs.TabPane>\n                    )),\n                    keys\n                  )(snippetList)}\n                  <Tabs.TabPane key=\"overview\" tab=\"Overview\">\n                    {compose(\n                      map((category: string) => (\n                        <div key={category} className=\"px-3 bg-white\">\n                          {renderCategory(category)}\n                          {compose(\n                            renderSnippets({ className: 'mb-0' }),\n                            pathOr([], [category])\n                          )(snippetList)}\n                        </div>\n                      )),\n                      keys\n                    )(snippetList)}\n                  </Tabs.TabPane>\n                </Tabs>\n              </div>\n            </Col>\n\n            {rightContentVisible && (\n              <Col span={5}>\n                <Collapse\n                  activeKey={[1, 2, 3, 4]}\n                  expandIcon={() => null}\n                  className=\"shadow-2xl\">\n                  <Collapse.Panel\n                    header={<div className=\"text-center\">醫囑內容</div>}\n                    key={1}>\n                    <div className=\"border-b border-gray-600 p-3\">\n                      申請序號：{data?.ORREQNO}\n                    </div>\n                    <div className=\"border-b border-gray-600 p-3\">\n                      病理號：{data?.ORWORKNO}\n                    </div>\n                    <div className=\"border-b border-gray-600 p-3\">\n                      病患姓名：{data?.HNAMEC}\n                    </div>\n                    <div className=\"border-b border-gray-600 p-3\">\n                      性別：{data?.HSEX}\n                    </div>\n                    <div className=\"border-b border-gray-600 p-3\">\n                      申請科別：{data?.CSECT}\n                    </div>\n                    <div className=\"border-b border-gray-600 p-3\">\n                      病例號：{data?.HHISNUM}\n                    </div>\n                    <div className=\"border-b border-gray-600 p-3\">\n                      病房床號：{data?.HBED}\n                    </div>\n                    <div className=\"border-b border-gray-600 p-3\">\n                      出生日期：{data?.HBIRTHDT}\n                    </div>\n                    <div className=\"border-b border-gray-600 p-3\">\n                      醫屬名稱：{data?.ORPROCED}\n                    </div>\n                    <div className=\"border-b border-gray-600 p-3\">\n                      現在輸入：{'LoginUser'}\n                    </div>\n                    <div className=\"border-b border-gray-600 p-3\">\n                      審核者：{props.reviewDoctor}\n                    </div>\n                  </Collapse.Panel>\n                  <Collapse.Panel\n                    header={<div className=\"text-center\">儲存狀態</div>}\n                    key={2}>\n                    <Form.Item noStyle name=\"state\">\n                      <Radio.Group className=\"pl-3\">\n                        <Radio className=\"block\" value=\"1\">\n                          已輸\n                        </Radio>\n                        <Radio className=\"block mt-1\" value=\"2\">\n                          待發\n                        </Radio>\n                        <Radio className=\"block mt-1\" value=\"3\">\n                          急發\n                        </Radio>\n                      </Radio.Group>\n                    </Form.Item>\n                  </Collapse.Panel>\n                  <Collapse.Panel\n                    header={<div className=\"text-center\">報告註記</div>}\n                    key={3}>\n                    <Form.Item noStyle name=\"annotations\">\n                      <CheckboxGroup>\n                        {reportAnnotations.map((x, idx) => (\n                          <Checkbox\n                            key={`annotations-${idx}`}\n                            className={cx('block ml-0 pl-2', {\n                              'mt-1': idx > 0,\n                            })}\n                            defaultChecked={false}\n                            value={`${idx}`}>\n                            {x}\n                          </Checkbox>\n                        ))}\n                      </CheckboxGroup>\n                    </Form.Item>\n                  </Collapse.Panel>\n                  <Collapse.Panel\n                    header={<div className=\"text-center\">操作熱鍵</div>}\n                    key={4}>\n                    <div className=\"pl-6\">\n                      <code className=\"bg-yellow-400 px-1\">CTRL＋W</code>,{' '}\n                      <code className=\"bg-yellow-400 px-1\">CTRL+S</code> 儲存\n                    </div>\n                    <div className=\"pl-6 pt-2\">\n                      <code className=\"bg-yellow-400 px-1\">F9</code> 片語視窗\n                    </div>\n                  </Collapse.Panel>\n                </Collapse>\n              </Col>\n            )}\n          </Row>\n        </Form>\n      </Page>\n    </ReactDndProvider>\n  )\n}\n\nfunction getAnchorStyles(affixed?: boolean): React.CSSProperties | undefined {\n  if (!affixed) {\n    return undefined\n  }\n\n  return {\n    marginLeft: -16,\n    marginRight: -16,\n    background: '#fff',\n    padding: 24,\n    borderBottomLeftRadius: 8,\n    borderBottomRightRadius: 8,\n  }\n}\n","import { G2 } from 'bizcharts/typings/index'\nimport React from 'react'\nimport Chart from 'bizcharts/lib/components/Chart'\nimport Tooltip from 'bizcharts/lib/components/Tooltip'\nimport Coord from 'bizcharts/lib/components/Coord'\nimport Geom from 'bizcharts/lib/components/Geom'\nimport { Divider } from 'antd'\nimport classNames from 'classnames'\nimport Debounce from 'lodash.debounce'\nimport autoHeight from './autoHeight'\nimport { PieChart } from './components'\nimport theme from '../../theme'\nconst ReactFitText = require('react-fittext')\nconst { DataView } = require('@antv/data-set')\n\ninterface PieProps {\n  animate?: boolean\n  color?: string\n  colors?: string[]\n  selected?: boolean\n  height?: number\n  margin?: [number, number, number, number]\n  hasLegend?: boolean\n  padding?: [number, number, number, number]\n  percent?: number\n  data?: {\n    x: string | string\n    y: number\n  }[]\n  inner?: number\n  lineWidth?: number\n  forceFit?: boolean\n  style?: React.CSSProperties\n  className?: string\n  total?: React.ReactNode | number | (() => React.ReactNode | number)\n  title?: React.ReactNode\n  tooltip?: boolean\n  valueFormat?: (value: string) => string | React.ReactNode\n  subTitle?: React.ReactNode\n  width?: number\n  legendWidth?: number\n}\n\ninterface PieState {\n  legendData: {\n    checked: boolean\n    x: string\n    color: string\n    percent: number\n    y: string\n  }[]\n  legendBlock: boolean\n}\n\nclass Pie extends React.PureComponent<PieProps, PieState> {\n  state: PieState = {\n    legendData: [],\n    legendBlock: false,\n  }\n\n  requestRef: number | undefined = undefined\n\n  root: HTMLDivElement | undefined = undefined\n\n  chart: G2.Chart | undefined = undefined\n\n  componentDidMount() {\n    window.addEventListener(\n      'resize',\n      () => {\n        this.requestRef = requestAnimationFrame(() => this.resize())\n      },\n      { passive: true }\n    )\n  }\n\n  componentDidUpdate(preProps: PieProps) {\n    const { data } = this.props\n    if (data !== preProps.data) {\n      // because of charts data create when rendered\n      // so there is a trick for get rendered time\n      this.getLegendData()\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.requestRef) {\n      window.cancelAnimationFrame(this.requestRef)\n    }\n    if (this.resize) {\n      window.removeEventListener('resize', this.resize)\n      this.resize.cancel()\n    }\n  }\n\n  getG2Instance = (chart: G2.Chart) => {\n    this.chart = chart\n    requestAnimationFrame(() => {\n      this.getLegendData()\n      this.resize()\n    })\n  }\n\n  // for custom lengend view\n  getLegendData = () => {\n    if (!this.chart) return\n    const geom = this.chart.getAllGeoms()[0] // 获取所有的图形\n    if (!geom) return\n    const items = (geom as any).get('dataArray') || [] // 获取图形对应的\n\n    const legendData = items.map((item: { color: any; _origin: any }[]) => {\n      /* eslint no-underscore-dangle:0 */\n      const origin = item[0]._origin\n      origin.color = item[0].color\n      origin.checked = true\n      return origin\n    })\n\n    this.setState({\n      legendData,\n    })\n  }\n\n  handleRoot = (n: HTMLDivElement) => {\n    this.root = n\n  }\n\n  handleLegendClick = (item: any, i: number) => {\n    const newItem = item\n    newItem.checked = !newItem.checked\n\n    const { legendData } = this.state\n    legendData[i] = newItem\n\n    const filteredLegendData = legendData.filter(l => l.checked).map(l => l.x)\n\n    if (this.chart) {\n      this.chart.filter('x', val => filteredLegendData.indexOf(`${val}`) > -1)\n    }\n\n    this.setState({\n      legendData,\n    })\n  }\n\n  resize = Debounce(() => {\n    const { hasLegend } = this.props\n    const { legendBlock } = this.state\n    if (!hasLegend || !this.root) {\n      window.removeEventListener('resize', this.resize)\n      return\n    }\n    if (\n      this.root &&\n      this.root.parentNode &&\n      (this.root.parentNode as HTMLElement).clientWidth <= 380\n    ) {\n      if (!legendBlock) {\n        this.setState({\n          legendBlock: true,\n        })\n      }\n    } else if (legendBlock) {\n      this.setState({\n        legendBlock: false,\n      })\n    }\n  }, 400)\n\n  render() {\n    const {\n      valueFormat,\n      subTitle,\n      total,\n      hasLegend = false,\n      className,\n      style,\n      height,\n      forceFit = true,\n      percent,\n      color,\n      inner = 0.75,\n      animate = true,\n      colors,\n      lineWidth = 0,\n      width = 240,\n      legendWidth = 250,\n    } = this.props\n\n    const { legendData, legendBlock } = this.state\n    const pieClassName = classNames('pie', className, {\n      hasLegend: !!hasLegend,\n      legendBlock: legendBlock,\n    })\n\n    const {\n      data: propsData,\n      selected: propsSelected = true,\n      tooltip: propsTooltip = true,\n    } = this.props\n\n    let data = propsData || []\n    let selected = propsSelected\n    let tooltip = propsTooltip\n\n    const defaultColors = colors\n    data = data || []\n    selected = selected || true\n    tooltip = tooltip || true\n    let formatColor\n\n    const scale = {\n      x: {\n        type: 'cat',\n        range: [0, 1],\n      },\n      y: {\n        min: 0,\n      },\n    }\n\n    if (percent || percent === 0) {\n      selected = false\n      tooltip = false\n      formatColor = (value: string) => {\n        if (value === '占比') {\n          return color || theme.primary\n        }\n        return '#f0f2f5'\n      }\n\n      data = [\n        {\n          x: '占比',\n          y: parseFloat(`${percent}`),\n        },\n        {\n          x: '反比',\n          y: 100 - parseFloat(`${percent}`),\n        },\n      ]\n    }\n\n    const tooltipFormat = [\n      'x*percent',\n      (x: string, p: number) => ({\n        name: x,\n        value: `${(p * 100).toFixed(2)}%`,\n      }),\n    ]\n\n    const padding = [6, 0, 6, 0]\n\n    const dv = new DataView()\n    dv.source(data).transform({\n      type: 'percent',\n      field: 'y',\n      dimension: 'x',\n      as: 'percent',\n    })\n\n    return (\n      <PieChart\n        ref={this.handleRoot}\n        className={pieClassName}\n        chartWidth={width}\n        style={style}\n        legendWidth={legendWidth}>\n        <ReactFitText maxFontSize={25}>\n          <div className=\"chart\">\n            <Chart\n              scale={scale}\n              height={height}\n              forceFit={forceFit}\n              data={dv}\n              padding={padding}\n              animate={animate}\n              onGetG2Instance={this.getG2Instance}>\n              {!!tooltip && <Tooltip showTitle={false} />}\n              <Coord type=\"theta\" innerRadius={inner} />\n              <Geom\n                style={{ lineWidth, stroke: '#fff' }}\n                tooltip={tooltip && tooltipFormat}\n                type=\"intervalStack\"\n                position=\"percent\"\n                color={[\n                  'x',\n                  percent || percent === 0 ? formatColor : defaultColors,\n                ]}\n                selected={selected}\n              />\n            </Chart>\n\n            {(subTitle || total) && (\n              <div className=\"total\">\n                {subTitle && <h4 className=\"pie-sub-title\">{subTitle}</h4>}\n                {/* eslint-disable-next-line */}\n                {total && (\n                  <div className=\"pie-stat\">\n                    {typeof total === 'function' ? total() : total}\n                  </div>\n                )}\n              </div>\n            )}\n          </div>\n        </ReactFitText>\n\n        {hasLegend && (\n          <ul className=\"legend\">\n            {legendData.map((item, i) => (\n              <li key={item.x} onClick={() => this.handleLegendClick(item, i)}>\n                <span\n                  className=\"dot\"\n                  style={{\n                    backgroundColor: !item.checked ? '#aaa' : item.color,\n                  }}\n                />\n                <span className=\"legendTitle\">{item.x}</span>\n                <Divider type=\"vertical\" />\n                <span className=\"percent\">\n                  {`${(Number.isNaN(item.percent)\n                    ? 0\n                    : item.percent * 100\n                  ).toFixed(2)}%`}\n                </span>\n                <span className=\"value\">\n                  {valueFormat ? valueFormat(item.y) : item.y}\n                </span>\n              </li>\n            ))}\n          </ul>\n        )}\n      </PieChart>\n    )\n  }\n}\n\nexport default autoHeight()(Pie)\n","import ReportTyping from './report-typing'\n\nexport default ReportTyping\n// import React from 'react'\n\n// export default React.lazy(() => import('../report-typing/report-typing'))\n","import React from 'react'\n\nexport default React.lazy(() => import('./pathol-image-viewer'))\n","import React from 'react'\n\nexport default React.lazy(() => import('./radiol-image-viewer'))\n","import React from 'react'\n\nexport default React.lazy(() => import('./report-list'))\n","import React from 'react'\n\nexport default React.lazy(() => import('./yellow-card-inquiry'))\n","import React from 'react'\n\nexport default React.lazy(() => import('./blood-bank-review'))\n","import React from 'react'\n\nexport default React.lazy(() => import('./medical-order'))\n","import ReportTemplateBuilder from '@/containers/report-template-editor'\nimport ReportTemplateList from '@/containers/report-template-list'\nimport ReportInquiry from '@/containers/report-inquiry'\nimport ReportTyping from '@/containers/report-typing'\nimport PatholImagesViewer from '@/containers/pathol-images-viewer'\nimport RadiolImagesViewer from '@/containers/radiol-images-viewer'\nimport ReportList from '@/containers/report-list'\nimport YellowCardInquiry from '@/containers/yellow-card-inquiry'\nimport BloodBankReview from '@/containers/blood-bank-review'\nimport MedicalOrder from '@/containers/medical-order'\n\nexport type RouteItem = {\n  id: number\n  title: string\n  path: string\n  component: typeof React.Component\n  icon?: React.FunctionComponent\n  disabled?: boolean\n  param?: string\n  children?: RouteItem[]\n  hide?: RouteItem[]\n}\n\nexport type Route = RouteItem & {\n  children: Array<RouteItem>\n  hide: Array<RouteItem>\n  disabled: boolean\n}\n\nexport const PATHOL_IMAGE = '/pathol-images/:studyInstanceUIDs'\nexport const RADIOL_IMAGE = '/radiol-images/:studyInstanceUIDs'\nexport const REPORT_TEMPLATE_LIST = '/report-templates'\nexport const REPORT_INPUT = '/report-input'\nexport const REPORT_EDIT = `${REPORT_INPUT}/:id`\nexport const REPORT_TEMPLATE_EDIT = `${REPORT_TEMPLATE_LIST}/:id`\nexport const REPORT_TEMPLATE_CREATE = `${REPORT_TEMPLATE_LIST}/create`\nexport const REPORT_INQUIRY = '/report-inquiry'\nexport const REPORT_LIST = '/report-list'\nexport const PHRASE_LIST = '/phrase-list'\nexport const PHRASE_EDIT = `${PHRASE_LIST}/:id`\nexport const IMAGE_SCHEDULE = '/image-schedule'\nexport const BLOOD_BANK_REVIEW = '/blood-bank-review'\nexport const YELLOW_CARD_INQUIRY = '/yellow-card-inquiry'\nexport const MEDICAL_ORDER = '/medical-order/:id'\n\nexport function useRoutes() {\n  return [\n    {\n      id: 1,\n      title: '病理影像',\n      path: PATHOL_IMAGE,\n      component: PatholImagesViewer,\n    },\n    {\n      id: 2,\n      title: '放射影像',\n      path: RADIOL_IMAGE,\n      component: RadiolImagesViewer,\n    },\n    {\n      id: 999,\n      title: '清單查詢',\n      path: REPORT_LIST,\n      component: ReportList,\n    },\n    {\n      id: 3,\n      title: '報告查詢',\n      path: REPORT_INQUIRY,\n      component: ReportInquiry,\n    },\n    {\n      id: 15,\n      title: '輸入報告',\n      path: REPORT_EDIT,\n      component: ReportTyping,\n    },\n    {\n      id: 10,\n      title: '輸入報告',\n      path: REPORT_INPUT,\n      component: ReportTyping,\n    },\n    {\n      id: 87,\n      title: '黃卡新檢索',\n      path: YELLOW_CARD_INQUIRY,\n      component: YellowCardInquiry,\n    },\n    {\n      id: 88,\n      title: '血庫備血審查作業',\n      path: BLOOD_BANK_REVIEW,\n      component: BloodBankReview,\n    },\n    {\n      id: 89,\n      title: '醫囑內容',\n      path: MEDICAL_ORDER,\n      component: MedicalOrder,\n    },\n    {\n      id: 4,\n      title: '結構式報告模版',\n      path: 'report-template',\n      children: [\n        {\n          id: 5,\n          title: '報告模版清單',\n          path: REPORT_TEMPLATE_LIST,\n          component: ReportTemplateList,\n        },\n        {\n          id: 6,\n          title: '報告模版新增',\n          path: REPORT_TEMPLATE_CREATE,\n          component: ReportTemplateBuilder,\n        },\n        {\n          id: 7,\n          title: '報告模版編輯',\n          path: REPORT_TEMPLATE_EDIT,\n          component: ReportTemplateBuilder,\n        },\n      ],\n    },\n  ]\n}\n\nexport default useRoutes\n","import styled from 'styled-components'\n\ntype Props = {\n  border?: string\n}\n\nexport default styled.div.attrs({\n  className: 'block-placeholder',\n})<Props>`\n  display: flex;\n  align-items: center;\n  padding-left: 25px;\n  height: 50px;\n  border: rgba(225, 225, 225, 0.9) 2px ${p => p.border || 'dashed'};\n  background-color: transparent;\n  margin-bottom: 35px;\n`\n","/**\n * NOTE:\n * nerver using index as list component key forever,\n * it will completely fucked up your page\n */\nimport React from 'react'\nimport { withRouter } from 'react-router-dom'\nimport { DropTarget, ConnectDropTarget, XYCoord } from 'react-dnd'\nimport {\n  equals,\n  length,\n  remove,\n  update,\n  insert,\n  cond,\n  gt,\n  lt,\n  T,\n  __,\n  add,\n  pathOr,\n  identity,\n  always,\n} from 'ramda'\nimport cx from 'classnames'\nimport { uuid } from '@/utils/webHelper'\nimport ItemTypes from '@/constants/item-types'\nimport { SnippetProps } from '@/constants/types'\nimport Snippet from '@/components/snippet'\nimport BlockPlaceholder from '@/components/snippet-block-placeholder'\nimport { canMoveSnippet, getPlaceHolderIndex } from './snippet-utils'\nconst { compose } = require('ramda')\n\ninterface Props {\n  draggingItem: any\n  isOver?: boolean\n  draggable?: boolean\n  canDrop?: boolean\n  snippetList: SnippetProps[]\n  connectDropTarget: ConnectDropTarget\n  onSnippetUpdate(data: any): void\n}\n\ninterface State {\n  placeholderIndex: number | null\n}\n\nconst withDropTarget = DropTarget<Props>(\n  ItemTypes.BOARD,\n  {\n    drop(_, monitor, component) {\n      if (!component || !component.props.draggable) {\n        return\n      }\n\n      const canDrop = monitor.canDrop()\n      let { placeholderIndex } = component.state\n      const item = monitor.getItem()\n\n      if (canDrop && item.fromMenu) {\n        component.handleSnippetDrop({ ...item, placeholderIndex })\n      }\n\n      if (canDrop && !item.fromMenu) {\n        component.handleSnippetMove(item.id, placeholderIndex)\n      }\n    },\n    canDrop({ snippetList }, monitor) {\n      // if there is no items in cards, and is over on the board currently,\n      // we can display a placeholder and drop the snippet item on the board.\n      if (snippetList.length === 0 && monitor.isOver()) {\n        return true\n      }\n\n      const clientOffset = monitor.getClientOffset() as XYCoord\n      const element = document.elementFromPoint(clientOffset.x, clientOffset.y)\n\n      return canMoveSnippet(element)\n    },\n    hover(_, monitor, component) {\n      // Determine mouse position\n      const clientOffset = monitor.getClientOffset() as XYCoord\n\n      let {\n        placeholderIndex,\n        isOverSnippet,\n        overSnippet,\n      } = getPlaceHolderIndex(clientOffset)\n\n      // 還要判斷是否是在最後一個 snippet 下面及 snippets-container 裡面\n      if (!isOverSnippet) {\n        return\n      }\n\n      const hoverBoundingRect = (overSnippet as HTMLElement).getBoundingClientRect()\n      const hoverMiddleY =\n        (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2\n      const hoverClientY = clientOffset.y - hoverBoundingRect.top\n\n      if (hoverClientY < hoverMiddleY) {\n        placeholderIndex -= 1\n      }\n\n      if (\n        monitor.canDrop() &&\n        !equals(component.state.placeholderIndex, placeholderIndex)\n      ) {\n        component.setState({ placeholderIndex })\n      }\n    },\n  },\n  (connect, monitor) => ({\n    connectDropTarget: connect.dropTarget(),\n    isOver: monitor.isOver(),\n    canDrop: monitor.canDrop(),\n    didDrop: monitor.didDrop(),\n    draggingItem: monitor.getItem(),\n  })\n)\n\nclass SnippetsContainer extends React.Component<Props, State> {\n  static defaultProps = {\n    draggable: true,\n    snippetList: [],\n  }\n\n  public state: State = {\n    placeholderIndex: null,\n  }\n\n  handleSnippetMove = (id: React.Key, atIndex: number) => {\n    const { snippetList } = this.props\n    const { snippet, index } = this.handleFindSnippet(id)\n\n    const newList = []\n    let isPlaced = false\n\n    snippetList.forEach((s, idx) => {\n      if (idx === index) {\n        return\n      }\n\n      if (!isPlaced && atIndex < idx) {\n        newList.push(snippet)\n        isPlaced = true\n      }\n\n      newList.push(s)\n\n      if (!isPlaced && atIndex === idx) {\n        newList.push(snippet)\n        isPlaced = true\n      }\n    })\n\n    // we dropped the only one snippet in the list so let it back to list.\n    if (length(snippetList) === 1 && !atIndex) {\n      newList.push(snippet)\n    }\n\n    this.props.onSnippetUpdate(newList)\n    this.setState({ placeholderIndex: null })\n  }\n\n  // prettier-ignore\n  handleSnippetDrop = (droppedItem: { [key: string]: any; placeholderIndex: number }) => {\n    const { placeholderIndex, ...item } = droppedItem\n\n    const snippetList = [...this.props.snippetList]\n\n    const nextIndex = placeholderIndex + 1\n    let newList: any[] = []\n\n    const snippet: Partial<SnippetProps> = {\n      ...item,\n      fromMenu: false,\n      id: `${item.id}__${uuid()}`,\n    }\n\n    if (length(snippetList) === 0) {\n      newList = insert(0, snippet)(snippetList)\n    }\n    if (length(snippetList) > 0) {\n      newList = insert(nextIndex, snippet)(snippetList)\n    }\n\n    this.props.onSnippetUpdate(newList)\n    this.setState({ placeholderIndex: null })\n  }\n\n  handleSnippetRemove = (index: number) => {\n    this.props.onSnippetUpdate(remove(index, 1)(this.props.snippetList))\n  }\n\n  handleSnippetShift = (id: React.Key, shift: number) => {\n    const { snippet } = this.handleFindSnippet(id)\n\n    this.handleSnippetUpdate({\n      ...snippet,\n      tabSize: compose(\n        cond([\n          [gt(__, 2), always(2)],\n          [lt(__, 0), always(0)],\n          [T, identity],\n        ]),\n        add(shift),\n        pathOr(0, ['tabSize'])\n      )(snippet),\n    })\n  }\n\n  handleSnippetUpdate = (data: any) => {\n    const { snippet, index } = this.handleFindSnippet(data.id)\n\n    this.props.onSnippetUpdate(\n      update(index, { ...snippet, ...data })(this.props.snippetList)\n    )\n  }\n\n  handleFindSnippet = (id: React.Key) => {\n    const { snippetList } = this.props\n    const snippet = snippetList.filter(x => x.id === id)[0]\n\n    return {\n      snippet,\n      index: snippetList.indexOf(snippet),\n    }\n  }\n\n  render() {\n    const {\n      connectDropTarget,\n      isOver,\n      canDrop,\n      snippetList,\n      draggingItem,\n      draggable, // 模版是否可拖曳，編輯模式下才會是 true\n    } = this.props\n\n    const { placeholderIndex } = this.state\n\n    let isPlaceHold = false\n    const cardList = []\n\n    snippetList.forEach((item, idx) => {\n      if (isOver && canDrop) {\n        isPlaceHold = false\n        if (idx === 0 && placeholderIndex === -1) {\n          cardList.push(<BlockPlaceholder key={`block-placeholder-${idx}`} />)\n        } else if ((placeholderIndex as any) > idx) {\n          isPlaceHold = true\n        }\n      }\n\n      if (item !== undefined) {\n        cardList.push(\n          <Snippet\n            key={item.id}\n            id={item.id}\n            index={idx}\n            draggable={draggable}\n            item={item}\n            inline={item.inline}\n            wrapperId={(item.id || `snippet-wrapper-${idx}`) as string}\n            tabSize={item.tabSize}\n            className={item.inline ? 'p-3 mb-3' : undefined}\n            findSnippet={this.handleFindSnippet}\n            updateSnippet={this.handleSnippetUpdate}\n            shiftSnippet={this.handleSnippetShift}\n            removeSnippet={this.handleSnippetRemove}>\n            {item.inline ? (\n              <div\n                id={`${item.id}`}\n                className={`${item.id}`}\n                css={{ padding: 16 }}\n              />\n            ) : (\n              <item.Component\n                id={item.id}\n                className={item.id}\n                item={item}\n                index={idx}\n                onUpdate={this.handleSnippetUpdate}\n              />\n            )}\n          </Snippet>\n        )\n      }\n\n      if (isOver && canDrop && placeholderIndex === idx) {\n        cardList.push(<BlockPlaceholder key={`block-placeholder-${idx}`} />)\n      }\n    })\n\n    // if placeholder index is greater than array.length, display placeholder as last\n    if (isPlaceHold) {\n      cardList.push(<BlockPlaceholder key={'block-placeholder-bottom'} />)\n    }\n\n    // if there is no items in cards currently, display a placeholder anyway\n    if (isOver && canDrop && snippetList.length === 0) {\n      cardList.push(<BlockPlaceholder key={'block-placeholder-zero'} />)\n    }\n\n    // if just has only one item in list and currently dragged, display a placeholder\n    if (isOver && canDrop && snippetList.length === 1) {\n      if (!draggingItem.fromMenu) {\n        cardList.push(<BlockPlaceholder key={'block-placeholder-zero'} />)\n      }\n    }\n\n    return connectDropTarget(\n      <div\n        className={cx('report-template-builder__contentarea', {\n          'report-template-builder__contentarea--fixed-layout': !draggable,\n        })}>\n        {cardList}\n      </div>\n    )\n  }\n}\n\nexport default compose(withRouter, withDropTarget)(SnippetsContainer)\n","import React from 'react'\nimport { DragSource, ConnectDragSource } from 'react-dnd'\nimport styled from 'styled-components'\nimport ItemTypes from '@/constants/item-types'\n\ninterface Props {\n  connectDragSource: ConnectDragSource\n  children?: React.ReactNode\n  className?: string\n  id?: React.Key\n}\n\nconst withDragSource = DragSource(\n  ItemTypes.BOARD,\n  {\n    beginDrag(props: Props) {\n      const { children, className, ...rest } = props // eslint-disable-line\n      return {\n        ...rest,\n        fromMenu: true,\n      }\n    },\n    endDrag(_, monitor) {\n      if (!monitor.didDrop()) {\n        return\n      }\n    },\n    isDragging(props, monitor) {\n      const isDragging = props.id === monitor.getItem().id\n\n      return isDragging\n    },\n  },\n  (connect, monitor) => ({\n    connectDragSource: connect.dragSource(),\n    connectDragPreview: connect.dragPreview(),\n    isDragging: monitor.isDragging(),\n  })\n)\n\nclass SnippetListMenuItem extends React.Component<Props> {\n  render() {\n    const { connectDragSource, id, ...rest } = this.props\n\n    return (\n      <SnippetListMenuWrapper\n        {...rest}\n        ref={comp => connectDragSource(comp)}\n        id={`${id}`}>\n        <div className=\"snippet-drawer-menu__item--content\">\n          {this.props.children}\n        </div>\n      </SnippetListMenuWrapper>\n    )\n  }\n}\n\nconst SnippetListMenuWrapper = styled.div`\n  cursor: move;\n`\n\nexport default withDragSource(SnippetListMenuItem)\n","import React from 'react'\nimport cx from 'classnames'\nimport { FontColorsOutlined } from '@ant-design/icons'\nimport styled from 'styled-components'\nimport SnippetListMenuItem from '@/components/snippet-list-menu-item'\nimport snippetTemplateList from '@/components/snippet-template-list'\n\ninterface Props {\n  className?: string\n  style?: React.CSSProperties\n}\n\nexport default class SnippetListMenu extends React.Component<Props> {\n  render() {\n    return (\n      <SnippetListMenuWrapper\n        className={cx('snippet-drawer-menu', this.props.className)}\n        {...this.props}>\n        <div className=\"snippet-drawer-menu__list\">\n          {snippetTemplateList.map(item => (\n            <SnippetListMenuItem\n              {...item}\n              key={item.id}\n              className=\"snippet-drawer-menu__item py-3\">\n              <div className=\"flex items-center\">\n                {item.icon ? (\n                  <item.icon className=\"mr-2\" />\n                ) : (\n                  <FontColorsOutlined className=\"mr-2\" />\n                )}\n                {item.name}\n              </div>\n            </SnippetListMenuItem>\n          ))}\n        </div>\n      </SnippetListMenuWrapper>\n    )\n  }\n}\n\nconst SnippetListMenuWrapper = styled.div`\n  .snippet-drawer-menu {\n    &__list {\n      height: 100%;\n      overflow-y: auto;\n      overflow-x: hidden;\n\n      ::-webkit-scrollbar {\n        display: none;\n      }\n    }\n  }\n`\n","class EnvStore {\n  pageSize = 10\n  apiBaseUrl =\n    process.env.REACT_APP_API_ROOT ||\n    'https://cors-anywhere.herokuapp.com/http://18.181.199.235:8080'\n\n  get isEnvDev(): boolean {\n    return process.env.NODE_ENV === 'development'\n  }\n  get appBaseName(): string {\n    return process.env.REACT_APP_BASE_NAME || ''\n  }\n  get appTitle(): string {\n    return `%s | ${\n      process.env.REACT_APP_TITLE || '高雄榮民總醫院 數位病理平台'\n    }`\n  }\n  get appUrl(): string {\n    return `${window.location.protocol}//${window.location.host}${this.appBaseName}/#/`\n  }\n  get appBaseUrl(): string {\n    return `/#/${this.appBaseName}`\n  }\n  get fakeApiBaseUrl(): string {\n    return (\n      process.env.REACT_APP_FAKE_API_ROOT ||\n      (this.isEnvDev ? 'http://localhost:3004' : 'http://localhost:3004')\n    )\n  }\n  get publicUrl(): string {\n    return process.env.PUBLIC_URL || ''\n  }\n  get canUseDOM(): boolean {\n    return !!(\n      typeof window !== 'undefined' &&\n      window.document &&\n      window.document.createElement\n    )\n  }\n  set setPageSize(pageSize: number | undefined) {\n    this.pageSize = pageSize || 50\n  }\n  set setApiBaseUrl(url: string) {\n    this.apiBaseUrl = url\n  }\n}\n\nexport const envStore = new EnvStore()\n\nexport function isMobile() {\n  let check = false\n  ;(function (a) {\n    if (\n      /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(\n        a\n      ) ||\n      // eslint-disable-next-line no-useless-escape\n      /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(\n        a.substr(0, 4)\n      )\n    )\n      check = true\n  })(navigator.userAgent || navigator.vendor || (window as any).opera)\n  return check\n}\n\nexport default envStore\n","import React from 'react'\nimport styled, { css } from 'styled-components'\nimport { Button } from 'antd'\nimport { ButtonProps } from 'antd/lib/button'\nimport { ActionTypes } from '@/constants/enums'\n// import useRouteCRUDAuthCheck from 'shared/hooks/useRouteCRUDAuthCheck'\n// import * as Icons from 'shared/components/Icons'\n\ninterface Props extends Omit<ButtonProps, 'icon'> {\n  children?: React.ReactNode\n  circle?: boolean\n  color?: string\n  css?: React.CSSProperties\n  icon?: string | React.ReactNode\n  onClick?: (evt: React.MouseEvent<HTMLElement>) => any\n  actionType?: ActionTypes\n}\n\nconst StyledButton = styled(Button)<Props>`\n  &.ant-btn {\n    min-width: 80px;\n    border-radius: 4px;\n\n    .anticon {\n      margin-right: 6px;\n    }\n\n    svg {\n      width: 20px;\n      height: 20px;\n    }\n\n    &.ant-btn-sm svg {\n      width: 16px;\n      height: 16px;\n    }\n\n    ${p =>\n      p.color === 'primary' &&\n      css`\n        color: #fff;\n        border-color: ${p => p.theme.btn.primary};\n        background: ${p => p.theme.btn.primary};\n\n        &:hover,\n        &:focus,\n        &:active {\n          color: #fff;\n          background: ${p => p.theme.btn.secondary};\n          border-color: ${p => p.theme.btn.secondary};\n        }\n      `};\n\n    ${p =>\n      p.color === 'outline' &&\n      css`\n        padding: 0 8px;\n        color: ${p => p.theme.btn.primary};\n        border: 1.3px solid ${p => p.theme.btn.primary};\n        background: transparent;\n\n        &:hover,\n        &:focus,\n        &:active {\n          color: ${p => p.theme.primary};\n          background: transparent;\n          border: 1.3px solid ${p => p.theme.btn.primary};\n        }\n      `};\n\n    ${p =>\n      p.color === 'danger' &&\n      css`\n        color: ${p => p.theme.btn.danger};\n        border: 1.3px solid ${p => p.theme.btn.danger};\n        background: #fff;\n\n        &:hover,\n        &:focus,\n        &:active {\n          color: ${p => p.theme.btn.danger};\n          background: #fff6e4;\n          border: 1.3px solid ${p => p.theme.btn.danger};\n        }\n      `};\n\n    ${p =>\n      p.type === 'link' &&\n      css`\n        min-width: auto;\n        padding-left: 0;\n        padding-right: 0;\n        background: transparent;\n        border-color: transparent;\n        color: ${p.theme.primary};\n\n        > span {\n          text-decoration: underline;\n        }\n\n        &:hover {\n          background: transparent;\n          border-color: transparent;\n        }\n      `};\n\n    ${p =>\n      p.size === 'small' &&\n      css`\n        line-height: 1.2;\n      `}\n\n    &.hover--none {\n      &:hover,\n      &:focus,\n      &:active {\n        color: initial;\n        background: initial;\n        border-color: initial;\n      }\n    }\n  }\n\n  &.ant-btn.ant-btn-loading:not(.ant-btn-circle):not(.ant-btn-circle-outline):not(.ant-btn-icon-only) {\n    padding-left: 20px;\n  }\n\n  &.ant-btn[disabled] {\n    svg > g path:nth-child(2) {\n      transition: fill 0.4s ease;\n      fill: darkgrey;\n    }\n  }\n`\n\nexport { StyledButton as Butotn }\n\nexport default function ButtonComponent({\n  // icon,\n  children,\n  loading,\n  actionType,\n  ...props\n}: Props) {\n  // const [, checkIsAuthenticated] = useRouteCRUDAuthCheck()\n\n  // if (actionType && !checkIsAuthenticated(actionType)) {\n  //   return null\n  // }\n\n  return (\n    <StyledButton {...props} loading={loading}>\n      {(() => {\n        // if (icon && !loading) {\n        //   let Icon\n\n        //   const isElement = React.isValidElement(icon)\n\n        //   if (!isElement) {\n        //     Icon = icon\n        //   }\n\n        //   if (typeof icon === 'string') {\n        //     const nameCapitalized = icon.charAt(0).toUpperCase() + icon.slice(1)\n        //     const iconName = 'Icon' + nameCapitalized\n        //     Icon = (Icons as any)[iconName]\n        //   }\n\n        //   return (\n        //     <div className=\"l-flex--center\">\n        //       {isElement ? icon : <Icon className=\"c-icon is--secondary\" />}\n        //       {children}\n        //     </div>\n        //   )\n        // }\n\n        return children\n      })()}\n    </StyledButton>\n  )\n}\n","import React from 'react'\nimport store from 'store'\nimport moment from 'moment'\nimport {\n  update,\n  mergeAll,\n  map,\n  last as Rlast,\n  filter,\n  omit,\n  keys,\n  sort,\n  inc,\n  pathOr,\n} from 'ramda'\nimport {\n  Mutation,\n  MutationOptions,\n  SnippetProps,\n  ReportTemplate,\n  ReportTemplateSetting,\n} from '@/constants/types'\nimport {\n  useReportTemplate as useReportTemplateItem,\n  useReportTemplateState,\n  useCurrentCategoryOfSnippet,\n} from '@/data/useReportTemplate'\nimport { uuid, getNumberFromString } from '@/utils/webHelper'\nimport { confirm } from '@/utils/message'\nconst { compose } = require('ramda')\n\nexport function useUpdateSnippet<T = ReportTemplateSetting>(options: {\n  item: SnippetProps\n  onUpdate: (data: any) => void\n  defaultValue?: any\n}) {\n  const { item, onUpdate, defaultValue = {} } = options\n\n  const [setting, setSetting] = React.useState<T>(\n    pathOr(defaultValue, ['setting'], item) as T\n  )\n\n  const handleOk = (values: T) => {\n    setSetting(values)\n    onUpdate({ ...item, setting: values })\n  }\n\n  return { setting, handleOk }\n}\n\nexport const useReportTemplate = (options: { id?: React.Key; data?: any }) => {\n  const { setSnippetList, snippetList, ...rest } = useReportTemplateItem(\n    options\n  )\n\n  const [category, setCategory] = useCurrentCategoryOfSnippet()\n\n  const handleSnippetUpdate = (data: any[]) => {\n    setSnippetList(prev => ({ ...prev, [category]: data }))\n  }\n\n  const handleTabChange = (activeKey: string) => {\n    setCategory(activeKey)\n  }\n\n  const handleTabMove = (order: string[]) => {\n    const snippetKeys = keys(snippetList)\n\n    setSnippetList(\n      compose(\n        mergeAll,\n        map((key: string) => ({ [key]: snippetList[key] })),\n        sort((a: string, b: string) => {\n          const orderA = order.indexOf(a)\n          const orderB = order.indexOf(b)\n\n          if (orderA !== -1 && orderB !== -1) {\n            return orderA - orderB\n          }\n          if (orderA !== -1) {\n            return -1\n          }\n          if (orderB !== -1) {\n            return 1\n          }\n\n          const ia = snippetKeys.indexOf(a)\n          const ib = snippetKeys.indexOf(b)\n\n          return ia - ib\n        }),\n        keys\n      )(snippetList)\n    )\n  }\n\n  const handleTabAdd = () => {\n    const last = compose(\n      inc,\n      pathOr(0, []),\n      getNumberFromString,\n      Rlast,\n      sort((a: any, b: any) => a - b),\n      keys\n    )(snippetList)\n\n    setSnippetList(prev => ({ ...prev, [`新標籤頁${last}`]: [] }))\n    setCategory(`新標籤頁${last}`)\n  }\n\n  const handleTabRemove = (targetKey: string) => {\n    confirm({\n      title: '確認要刪除此頁籤嗎？',\n      content: '刪除會連同模版資料一起刪除，確認繼續？',\n      onOk: () => {\n        setSnippetList(prev => omit([targetKey], prev))\n\n        if (category === targetKey) {\n          setCategory(\n            compose(\n              Rlast,\n              filter((key: string) => key !== targetKey),\n              keys\n            )(snippetList)\n          )\n        }\n      },\n    })\n  }\n\n  const handleTabNameChange = (targetKey: string) => (\n    evt: React.FocusEvent<HTMLSpanElement>\n  ) => {\n    const newTabName = evt.target.innerHTML\n\n    setSnippetList(prev =>\n      compose(\n        mergeAll,\n        map((key: string) => ({\n          [key === targetKey ? newTabName : key]: prev[key],\n        })),\n        keys\n      )(prev)\n    )\n    setCategory(newTabName)\n  }\n\n  const handleTabEdit = (\n    e:\n      | string\n      | React.MouseEvent<Element, MouseEvent>\n      | React.KeyboardEvent<Element>,\n    action: 'add' | 'remove'\n  ) => {\n    const handler = action === 'add' ? handleTabAdd : handleTabRemove\n\n    handler(e as string)\n  }\n\n  return {\n    ...rest,\n    category,\n    snippetList,\n    setCategory,\n    setSnippetList,\n    handleTabEdit,\n    handleTabChange,\n    handleTabMove,\n    handleTabAdd,\n    handleTabRemove,\n    handleTabNameChange,\n    handleSnippetUpdate,\n  }\n}\n\nexport const useAddNewTemplate = ({ onCompleted }: MutationOptions = {}) => {\n  const [reportTemplates, setReportTemplates] = useReportTemplateState()\n\n  const handler = (values: ReportTemplate) => {\n    let id = uuid()\n    let newList = [\n      ...reportTemplates,\n      {\n        ...values,\n        id,\n        createdAt: moment(),\n        createdAtStr: moment().format('YYYY/MM/DD HH:mm'),\n        updatedAt: moment(),\n        updatedAtStr: moment().format('YYYY/MM/DD HH:mm'),\n      },\n    ]\n\n    setReportTemplates(newList)\n\n    store.set('reportTemplateListState', newList)\n\n    if (onCompleted) {\n      onCompleted({ ...values, id })\n    }\n  }\n\n  return [false, handler] as Mutation\n}\n\nexport const useUpdateTemplate = ({ onCompleted }: MutationOptions = {}) => {\n  const [reportTemplates, setReportTemplates] = useReportTemplateState()\n\n  const handler = (values: ReportTemplate) => {\n    let index = reportTemplates.findIndex(x => `${x.id}` === `${values.id}`)\n    let newList = update(\n      index,\n      {\n        ...values,\n        updatedAt: moment(),\n        updatedAtStr: moment().format('YYYY/MM/DD HH:mm'),\n      },\n      reportTemplates\n    )\n\n    setReportTemplates(newList)\n    store.set('reportTemplateListState', newList)\n\n    if (onCompleted) {\n      onCompleted()\n    }\n  }\n\n  return [false, handler] as Mutation\n}\n","import { ReactText } from 'react'\n\nexport const createFormItemLayout = (label: number = 3, wrapper?: number) => ({\n  labelCol: {\n    xs: { span: label },\n    sm: { span: label },\n  },\n  wrapperCol: {\n    xs: { span: wrapper || 24 - label },\n    sm: { span: wrapper || 24 - label },\n  },\n})\n\nexport const thosandSeprartor = {\n  formatter: (value: number | string | undefined) => {\n    if (!value) {\n      return value as string\n    }\n    return `${value}`.replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')\n  },\n  parser: (value: string | undefined) =>\n    (value ? value.replace(/\\$\\s?|(,*)/g, '') : value) as ReactText,\n}\n\nexport const currency = {\n  formatter: (value: number | string | undefined) => {\n    if (!value) {\n      return value as string\n    }\n    return `$ ${value}`.replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')\n  },\n  parser: (value: string | undefined) =>\n    (value ? value.replace(/\\$\\s?|(,*)/g, '') : value) as ReactText,\n}\n\nexport const percent = {\n  // min: 0,\n  max: 100,\n  formatter: (value: number | string | undefined) => {\n    if (!value) {\n      return value as string\n    }\n    return `${value}%`\n  },\n  parser: (value: string | undefined) =>\n    (value ? value.replace('%', '') : value) as ReactText,\n}\n\nexport const rules = {\n  required: { required: true, message: '此欄位必填' },\n  number: {\n    required: false,\n    type: 'number',\n    message: '請填寫數字',\n    transform(value: any) {\n      if (!value) {\n        return value\n      }\n      return Number(value)\n    },\n  },\n  account: {\n    required: true,\n    message: '欄位長度為8~128字元,特殊符號-,_',\n    pattern: new RegExp(/^.{8,128}$/),\n  },\n  password: {\n    required: true,\n    message: '密碼長度為6~128字元',\n    pattern: new RegExp(/^.{6,128}$/),\n  },\n}\n"],"sourceRoot":""}