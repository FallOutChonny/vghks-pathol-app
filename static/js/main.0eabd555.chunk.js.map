{"version":3,"sources":["constants/enums.ts","containers/report-template-editor/index.ts","containers/report-template-list/index.ts","containers/report-inquiry/index.ts","services/pathology.ts","containers/report-typing/header.tsx","containers/report-typing/components.tsx","containers/report-typing/autoHeight.tsx","containers/report-typing/report-typing.tsx","containers/report-typing/pie.tsx","containers/report-typing/index.ts","services/report.ts","containers/pathol-images-viewer/index.ts","containers/radiol-images-viewer/index.ts","containers/report-list/index.ts","constants/routes.ts","bootstrap.ts","utils/createPack.tsx","components/error-boundary.tsx","components/exception.tsx","components/loading.tsx","components/breadcrumb.tsx","components/app-header.tsx","containers/home/index.ts","containers/login/index.tsx","app.tsx","serviceWorker.ts","index.tsx","components/checkbox.tsx","data/useReportTemplate.ts","utils/history.ts","components/collapse.ts","components/snippet-template-modal.tsx","components/snippet-template-wrapper.tsx","components/snippet-template-input-text.tsx","components/input-number.tsx","components/snippet-template-input-number.tsx","components/editable-table.tsx","components/snippet-template-selection-modal.tsx","components/snippet-template-multiple-selection.tsx","components/snippet-template-single-selection.tsx","components/snippet-template-date.tsx","components/snippet-template-time.tsx","components/snippet-template-select.tsx","components/snippet-template-section-header.tsx","components/snippet-template-cloze.tsx","components/snippet-template-list.tsx","theme.ts","components/radio.tsx","components/select.tsx","hooks/useApp.ts","constants/item-types.ts","utils/message.tsx","components/datepicker.tsx","components/snippet-utils.tsx","data/useReport.ts","utils/request.ts","hooks/useAuth.tsx","utils/get-display-name.ts","components/snippet-toolbar.tsx","components/withTinyMCE.js","components/snippet.tsx","components/tabs.ts","components/draggable-tabs.js","utils/webHelper.ts","hooks/useTitle.ts","components/layout.tsx","components/modal.tsx","components/table.tsx","components/withScroll.js","components/snippet-scrollable-container.tsx","components/input.tsx","components/app-footer.tsx","../theme.js","components/snippet-block-placeholder.ts","components/snippets-container.tsx","components/snippet-list-menu-item.tsx","components/snippet-list-menu.tsx","constants/env.ts","services/reportTemplate.ts","utils/form.ts","components/button.tsx"],"names":["ActionTypes","React","lazy","reportAnnotations","compose","require","menuState","StyledAnchor","styled","p","theme","primary","PieChart","div","chartWidth","legendWidth","Header","leftContentVisible","rightContentVisible","onLayoutChange","onOk","className","mode","placeholder","style","minWidth","dropdownMatchSelectWidth","dropdownStyle","autoFocus","onSelect","value","Option","VISIBLE_LEFT","CheckOutlined","VISIBLE_RIGHT","color","onClick","pathname","replace","RADIOL_IMAGE","url","join","dropLast","split","envStore","appUrl","window","open","confirm","title","content","okText","history","push","REPORT_INQUIRY","computeHeight","node","parseInt","getComputedStyle","height","paddingTop","paddingBottom","autoHeight","WrappedComponent","state","computedHeight","root","undefined","handleRoot","this","props","h","n","parentNode","getAutoHeight","setState","ref","Component","ReactFitText","DataView","Pie","legendData","legendBlock","requestRef","chart","getG2Instance","requestAnimationFrame","getLegendData","resize","geom","getAllGeoms","get","map","item","origin","_origin","checked","handleLegendClick","i","newItem","filteredLegendData","filter","l","x","val","indexOf","Debounce","hasLegend","clientWidth","removeEventListener","addEventListener","passive","preProps","data","cancelAnimationFrame","cancel","formatColor","valueFormat","subTitle","total","forceFit","percent","inner","animate","colors","lineWidth","width","pieClassName","classNames","propsData","selected","propsSelected","tooltip","defaultColors","y","parseFloat","dv","source","transform","type","field","dimension","as","maxFontSize","scale","range","min","padding","onGetG2Instance","showTitle","innerRadius","stroke","name","toFixed","position","key","backgroundColor","Number","isNaN","PureComponent","Link","Anchor","col","ifElse","equals","always","background","whiteSpace","getAnchorStyles","affixed","marginLeft","marginRight","borderBottomLeftRadius","borderBottomRightRadius","ReportTyping","useTitle","useBreadcrumb","useToggleReportPreview","useForm","form","useReportTemplateState","reportTemplates","useSwr","request","method","body","classification","noType","no","others","head","pathOr","usePathology","useState","visibleLayouts","setVisibleLayouts","params","match","qs","queryString","location","search","templateId","setCurrentTemplateId","useEffect","useReportItem","id","useReportTemplate","category","reportTemplate","snippetList","handleTabEdit","handleTabChange","handleTabMove","handleTabNameChange","handleSnippetUpdate","setFieldsValue","JSON","stringify","reviewDoctor","serialNo","includes","onCompleted","useReportList","reportList","setReportList","handler","values","uuid","newList","createdAt","moment","createdAtStr","format","updatedAt","updatedAtStr","store","set","useAddNewReport","REPORT_EDIT","success","handleAdd","index","findIndex","update","useUpdateReport","handleUpdate","useHeaderContent","prev","validateFields","then","payload","setting","setIsAffixed","percentage","setPercentage","handleValuesChange","useCallback","_","Math","round","length","not","isNil","getFieldsValue","colSpan","onValuesChange","gutter","span","defaultActiveKey","expandIcon","Panel","header","Item","noStyle","bordered","onChange","offsetTop","showInkInFixed","affix","e","link","preventDefault","scroll","behavior","left","top","document","getElementById","href","mapIndexed","idx","keys","cx","activeKey","onEdit","tabBarGutter","moveTabNode","TabPane","closable","tab","contentEditable","suppressContentEditableWarning","spellCheck","draggable","onSnippetUpdate","gt","__","renderCategory","renderSnippets","ORREQNO","ORWORKNO","HNAMEC","HSEX","CSECT","HHISNUM","HBED","HBIRTHDT","ORPROCED","Group","defaultChecked","REPORT_TEMPLATE_LIST","REPORT_INPUT","REPORT_TEMPLATE_EDIT","REPORT_TEMPLATE_CREATE","REPORT_LIST","useRoutes","path","component","PatholImagesViewer","RadiolImagesViewer","ReportList","ReportInquiry","children","ReportTemplateList","ReportTemplateBuilder","dayjs","extend","isSameOrBefore","isSameOrAfter","advancedFormat","customParseFormat","weekYear","weekOfYear","isMoment","localeData","badMutable","weekday","locale","pack","components","rest","ErrorFallbackWrapper","ErrorFallback","error","componentStack","resetErrorBoundary","role","message","initialState","info","ErrorBoundary","args","onReset","onError","prevProps","resetKeys","a","b","some","Object","is","changedArray","onResetKeysChange","fallbackRender","FallbackComponent","fallback","isValidElement","Error","Exception","ExceptionWrapper","backgroundImage","publicUrl","to","Wrapper","memo","justify","Loading3QuartersOutlined","spin","StyledBreadcrumb","AppHeader","useBreadcrumbState","items","useHeaderContentValue","current","setCurrentPath","handleTo","getMenuClassName","targetUrl","Logo","src","alt","borderBottom","lineHeight","MenuItem","routes","SettingOutlined","icon","ExportOutlined","borderColor","separator","minHeight","display","alignItems","HomeOutlined","purple150","Login","ForgetPassword","LoginRoute","Suspense","exact","App","isAuthenticated","useAuth","renderRouteItem","param","renderRoute","hide","Home","Boolean","hostname","redirect","EnhancedApp","createPack","initializeState","zhTW","suspense","fetcher","DndProvider","backend","HTML5Backend","ReactDOM","render","navigator","serviceWorker","ready","registration","unregister","catch","console","CheckboxGroup","StyledCheckbox","secondary","CheckboxComponent","forwardRef","displayName","snippetCategoryOfReport","PATHOLOGICAL_DIAGNOSIS","GROSS","MICROSCOPY","NOTES","REFERENCES","fakeReportTemplateList","setComponent","Store","defaultSnippetsOfReport","mergeAll","reportTemplateListState","atom","default","reportPreviewState","selectorFamily","find","categoryState","useReportTemplates","useRecoilState","reportTemplateList","setReportTemplate","of","_snippetList","setSnippetList","snippetById","flatten","useReportPreview","isPreview","setIsPreview","useCurrentCategoryOfSnippet","createHashHistory","basename","appBaseName","StyledCollapse","TemplateModal","onCancel","visible","maskClosable","keyboard","footer","StyledCard","darkGrey","SnippetTemplateWrapper","onDelete","titleVisible","bodyVisible","FontColorsOutlined","InputTextModal","createFormItemLayout","labelAlign","initialValues","label","valuePropName","StyledInputNumber","attrs","ThousandSeprartorInput","thosandSeprartor","CurrencyInput","currency","PercentInput","InputNumberModal","EditableTable","onRowAdd","onRowDelete","triggerChange","changedValue","rowKey","pagination","size","dataSource","onAddRowClick","onDeleteRowClick","editable","defaultValue","options","text","freetext","SnippetTemplateSelectionModal","columns","v","r","align","concat","invoker","SnippetTemplateMultipleSelection","editModalVisible","handleEditModalVisible","onUpdate","useUpdateSnippet","handleOk","bodyStyle","paddingLeft","SnippetTemplateSingleSelection","InputDateModal","allowClear","picker","InputTimeModal","SnippetTemplateCloze","input","html","componentType","inline","BoldOutlined","FontSizeOutlined","inputProps","multipleLine","autoSize","minRows","NumberOutlined","max","formatter","units","DatabaseOutlined","UnorderedListOutlined","TemplateMultipleSelection","OrderedListOutlined","TemplateSingleSelection","CalendarOutlined","ClockCircleOutlined","Cloze","reportTemplateById","s","StyledRadio","RadioComponent","StyledSelect","SelectComponent","breadcrumbState","setter","useSetRecoilState","headerContentState","useRecoilValue","CARD","BOARD","SNIPPET","marginTop","marginBottom","modalDefaultProps","cancelText","centered","autoFocusButton","okButtonProps","cancelButtonProps","borderLess","css","RangePicker","StyledDatePicker","StyledTimePicker","DatePickerComponent","hasClassName","nodes","canMoveSnippet","element","elem","unshift","getPlaceHolderIndex","clientOffset","overSnippet","findSnippet","classList","contains","parentElement","elementFromPoint","snippetIndex","dataset","placeholderIndex","isOverSnippet","wrapperId","tabSize","dangerouslySetInnerHTML","__html","reportListState","setData","cond","contentTypeIs","identity","c","toQueryString","paramsObject","Array","isArray","encodeURIComponent","headers","errorMsg","fullUrl","T","apiBaseUrl","fetch","FormData","Accept","response","json","ok","Promise","reject","blob","err","AuthContext","createContext","user","logout","setUser","setIsAuthenticated","_user","Cookies","getJSON","AuthProvider","remove","useMemo","Provider","context","useContext","getDisplayName","ToolbarWrapper","SHIFT_TYPES","SnippetToolbar","tabIndex","onShift","handleShift","shift","LeftOutlined","RightOutlined","EditOutlined","DeleteOutlined","defaultConfig","block_formats","menubar","external_plugins","dropdown","inputtext","fontsize_formats","force_br_newlines","force_p_newlines","forced_root_block","plugins","tinymce","link_title","table_toolbar","textcolor_cols","content_security_policy","allow_unsafe_link_target","relative_urls","convert_urls","valid_elements","valid_children","toolbar1","withDragSource","DragSource","ItemTypes","beginDrag","fromMenu","originalIndex","canDrag","connect","monitor","connectDragSource","dragSource","connectDragPreview","dragPreview","isDragging","Snippet","componentDidMount","getEmptyImage","shiftSnippet","handleRemove","removeSnippet","_onMouseOver","_onMouseOut","styles","mergeRight","isFocus","borderRadius","border","outlineColor","cursor","getItemStyles","onMouseOver","onMouseOut","data-index","Children","child","cloneElement","ComposedComponent","withTinyMCE","editor","toolbarMouseOver","toolbarVisible","initialize","snippet","_get","_config","clone","config","init","selector","language_url","setup","on","onEditorBlur","onEditorFocus","Function","execInit","setContent","init_instance_callback","undoManager","add","updateSnippet","target","getContent","onBlur","log","prevState","defaultProps","hoist","bg","TabNode","connectDropTarget","isOver","draggingItem","withDropTarget","DropTarget","drop","dragKey","getItem","hoverKey","dropTarget","WrapTabNode","DraggableTabs","order","newOrder","slice","forEach","dragIndex","hoverIndex","splice","renderTabBar","DefaultTabBar","Tabs","addIndex","isEmpty","either","RisNil","URLSearchParams","result","d","Date","now","performance","random","floor","toString","getNumberFromString","str","isEnvDev","DEFAULT_USE_TITLE_OPTIONS","restoreOnUnmount","prevTitleRef","useRef","appTitle","_title","borderTopLeftRadius","borderTopRightRadius","Page","Content","StyledModal","ModalComponent","StyledTable","TableComponent","isRowDeletable","isCanEdit","_columns","canEdit","placement","emptyText","image","PRESENTED_IMAGE_SIMPLE","description","Column","noop","intBetween","createVerticalStrength","_buffer","point","w","buffer","defaultHorizontalStrength","defaultVerticalStrength","ScrollableComponent","ScrollingComponent","ctx","handleEvent","evt","dragging","attached","attach","updateScrolling","throttle","container","getBoundingClientRect","box","coords","changedTouches","clientX","clientY","getCoords","scaleX","horizontalStrength","scaleY","verticalStrength","frame","startScrolling","trailing","useScroll","_initial","findDOMNode","wrappedInstance","clearMonitorSubscription","dragDropManager","getMonitor","subscribeToStateChange","handleMonitorChange","_remove","stopScrolling","tick","strengthMultiplier","onScrollChange","scrollLeft","scrollTop","scrollWidth","scrollHeight","clientHeight","raf","detach","contextType","DndContext","withScroll","vStrength","ReactDndProvider","StyledInput","TextArea","AppFooter","Footer","module","exports","danger","cornblue","comet","btn","sider","canDrop","handleSnippetDrop","handleSnippetMove","getClientOffset","hover","hoverBoundingRect","hoverMiddleY","bottom","didDrop","SnippetsContainer","atIndex","handleFindSnippet","isPlaced","droppedItem","nextIndex","insert","handleSnippetRemove","handleSnippetShift","lt","isPlaceHold","cardList","withRouter","endDrag","SnippetListMenuItem","SnippetListMenuWrapper","comp","SnippetListMenu","snippetTemplateList","pageSize","process","REACT_APP_API_ROOT","REACT_APP_TITLE","protocol","host","REACT_APP_FAKE_API_ROOT","createElement","setSetting","useReportTemplateItem","setCategory","handleTabAdd","last","inc","Rlast","sort","handleTabRemove","targetKey","omit","action","snippetKeys","orderA","orderB","newTabName","innerHTML","useAddNewTemplate","setReportTemplates","useUpdateTemplate","wrapper","labelCol","xs","sm","wrapperCol","parser","rules","required","number","account","pattern","RegExp","password","StyledButton","ButtonComponent","loading","actionType"],"mappings":"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","file":"static/js/main.0eabd555.chunk.js","sourcesContent":["export enum ActionTypes {\n  DELETABLE = 'deletable',\n  UPDATABLE = 'updatable',\n  CREATABLE = 'creatable',\n  READABLE = 'readable',\n}\n\nexport const reportAnnotations = [\n  '檢體不適當',\n  '不符合',\n  '通知惡性或疑似',\n  '通知癌前病灶',\n  '其他危險值',\n  '肺結核',\n  '是否保留',\n]\n","import React from 'react'\n\nexport default React.lazy(() => import('./report-template-builder'))\n","import React from 'react'\n\nexport default React.lazy(\n  () => import('../report-template-list/report-template-list')\n)\n","import React from 'react'\n\nexport default React.lazy(() => import('./report-inquiry'))\n","import useSwr from 'swr'\nimport request from '@/utils/request'\nimport { pathOr, head } from 'ramda'\nconst { compose } = require('ramda')\n\nexport function usePathology() {\n  const { data, ...others } = useSwr(`/api/b2/getPathologyResult`, url =>\n    request(url, {\n      method: 'POST',\n      body: {\n        classification: 'pathorderview',\n        noType: 'HHISNUM',\n        no: '16685033',\n      },\n    })\n  )\n\n  return {\n    ...others,\n    data: compose(head, pathOr({}, ['result']))(data),\n  }\n}\n","import React from 'react'\nimport { CheckOutlined } from '@ant-design/icons'\nimport { replace, join, dropLast, split } from 'ramda'\nimport { envStore } from '@/constants/env'\nimport Button from '@/components/button'\nimport Select from '@/components/select'\nimport { confirm } from '@/utils/message'\nimport history from '@/utils/history'\nimport { REPORT_INQUIRY, RADIOL_IMAGE } from '@/constants/routes'\nconst { compose } = require('ramda')\n\nexport enum menuState {\n  VISIBLE_RIGHT = '1',\n  VISIBLE_LEFT = '2',\n}\n\ntype Props = {\n  rightContentVisible: boolean\n  leftContentVisible: boolean\n  onLayoutChange: (value: string) => void\n  onOk: () => void\n}\n\nexport default function Header({\n  leftContentVisible,\n  rightContentVisible,\n  onLayoutChange,\n  onOk,\n}: Props) {\n  const handleConfirm = () => {\n    confirm({\n      title: '確認要取消嗎？',\n      content: '取消後未儲存的資料將會消失，確認取消嗎？',\n      okText: '確認',\n      onOk: () => {\n        history.push(REPORT_INQUIRY)\n      },\n    })\n  }\n\n  const handleSave = () => {\n    onOk()\n  }\n\n  const handleOpenImageViewer = () => {\n    let pathname = replace(\n      ':studyInstanceUIDs',\n      '1.3.6.1.4.1.14519.5.2.1.5099.8010.199920086920823171706454903251'\n    )(RADIOL_IMAGE)\n\n    // remove last `/`\n    let url = compose(join('/'), dropLast(1), split('/'))(envStore.appUrl)\n\n    window.open(`${url}${pathname}`, '__blank')\n  }\n\n  return (\n    <div className=\"inline-flex\">\n      <Select\n        mode=\"multiple\"\n        placeholder=\"檢 視\"\n        className=\"is--outline cursor-pointer\"\n        style={{ minWidth: 80 }}\n        dropdownMatchSelectWidth={false}\n        dropdownStyle={{ minWidth: 138 }}\n        autoFocus={false}\n        onSelect={onLayoutChange}\n        value={[]}>\n        <Select.Option value={menuState.VISIBLE_LEFT}>\n          <div className=\"flex items-center\">\n            顯示左邊內容\n            {leftContentVisible && <CheckOutlined className=\"ml-4\" />}\n          </div>\n        </Select.Option>\n        <Select.Option value={menuState.VISIBLE_RIGHT}>\n          <div className=\"flex items-center\">\n            顯示右邊內容\n            {rightContentVisible && <CheckOutlined className=\"ml-4\" />}\n          </div>\n        </Select.Option>\n      </Select>\n      <Button\n        color=\"outline\"\n        className=\"ml-2 text-white border-white bg-transparent\"\n        onClick={handleOpenImageViewer}\n        style={{ minWidth: 80 }}>\n        影像\n      </Button>\n      <Button\n        color=\"outline\"\n        className=\"ml-2 text-white border-white bg-transparent\"\n        onClick={handleSave}\n        style={{ minWidth: 80 }}>\n        儲存\n      </Button>\n      <Button\n        color=\"outline\"\n        className=\"ml-2 text-white border-white bg-transparent\"\n        onClick={handleConfirm}\n        style={{ minWidth: 80 }}>\n        取消\n      </Button>\n      <Button\n        color=\"outline\"\n        className=\"ml-6 text-white border-white bg-transparent\">\n        下載 JSON\n      </Button>\n      <Button\n        color=\"outline\"\n        className=\"ml-2 text-white border-white bg-transparent\">\n        輸出報告\n      </Button>\n    </div>\n  )\n}\n","import { Anchor } from 'antd'\nimport styled from 'styled-components'\n\nconst StyledAnchor = styled(Anchor)`\n  &.ant-anchor-wrapper {\n    background: transparent;\n  }\n\n  .fixed {\n    position: relative !important;\n  }\n\n  a:hover,\n  .ant-anchor-link-active > .ant-anchor-link-title {\n    color: ${p => p.theme.primary};\n  }\n\n  .ant-anchor-ink-ball {\n    border: 2px solid ${p => p.theme.primary};\n  }\n\n  .ant-anchor-ink::before {\n    /* background-color: ${p => p.theme.secondary}; */\n  }\n`\n\nconst PieChart = styled.div<{\n  legendWidth?: number\n  chartWidth?: number\n}>`\n  &.pie {\n    position: relative;\n\n    .chart {\n      position: relative;\n    }\n\n    &.hasLegend .chart {\n      width: calc(100% - ${p => p.chartWidth + 'px'});\n    }\n\n    .legend {\n      position: absolute;\n      top: 50%;\n      right: 0;\n      min-width: ${p => p.legendWidth}px;\n      margin: 0 20px;\n      padding: 0;\n      list-style: none;\n      transform: translateY(-50%);\n      li {\n        height: 22px;\n        margin-bottom: 16px;\n        line-height: 22px;\n        cursor: pointer;\n        &:last-child {\n          margin-bottom: 0;\n        }\n      }\n    }\n\n    .dot {\n      position: relative;\n      top: -1px;\n      display: inline-block;\n      width: 8px;\n      height: 8px;\n      margin-right: 8px;\n      border-radius: 8px;\n    }\n\n    .line {\n      display: inline-block;\n      width: 1px;\n      height: 16px;\n      margin-right: 8px;\n      background-color: hsv(0, 0, 91%);\n    }\n\n    .legendTitle {\n      color: rgba(0, 0, 0, 0.65);\n    }\n\n    .percent {\n      color: rgba(0, 0, 0, 0.45);\n    }\n\n    .value {\n      position: absolute;\n      right: 0;\n    }\n\n    .title {\n      margin-bottom: 8px;\n    }\n\n    .total {\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      max-height: 62px;\n      text-align: center;\n      transform: translate(-50%, -50%);\n      font-size: 14px;\n\n      & > h4 {\n        height: 22px;\n        margin-bottom: 8px;\n        color: rgba(0, 0, 0, 0.45);\n        font-weight: normal;\n        font-size: 14px;\n        line-height: 22px;\n      }\n      & > p {\n        display: block;\n        height: 32px;\n        color: rgba(0, 0, 0, 0.85);\n        font-size: 1.2em;\n        line-height: 32px;\n        white-space: nowrap;\n      }\n    }\n  }\n\n  &.legendBlock {\n    &.hasLegend .chart {\n      width: 100%;\n      margin: 0 0 32px 0;\n    }\n    .legend {\n      position: relative;\n      transform: none;\n    }\n  }\n`\n\nexport { StyledAnchor as Anchor, PieChart }\n","/* eslint eqeqeq: 0 */\nimport React from 'react'\n\nexport type IReactComponent<P = any> =\n  | React.StatelessComponent<P>\n  | React.ComponentClass<P>\n  | React.ClassicComponentClass<P>\n\nfunction computeHeight(node: HTMLDivElement) {\n  const totalHeight = parseInt(getComputedStyle(node).height, 10)\n  const padding =\n    parseInt(getComputedStyle(node).paddingTop, 10) +\n    parseInt(getComputedStyle(node).paddingBottom, 10)\n  return totalHeight - padding\n}\n\nfunction getAutoHeight(n: HTMLDivElement | undefined) {\n  if (!n) {\n    return 0\n  }\n\n  let node = n\n\n  let height = computeHeight(node)\n\n  while (!height) {\n    node = node.parentNode as HTMLDivElement\n    if (node) {\n      height = computeHeight(node)\n    } else {\n      break\n    }\n  }\n\n  return height\n}\n\ninterface AutoHeightProps {\n  height?: number\n}\n\nfunction autoHeight() {\n  return <P extends AutoHeightProps>(\n    WrappedComponent: React.ComponentClass<P> | React.FC<P>\n  ) =>\n    class extends React.Component<P & AutoHeightProps> {\n      state = {\n        computedHeight: 0,\n      }\n\n      root: HTMLDivElement | undefined = undefined\n\n      componentDidMount() {\n        const { height } = this.props\n        if (!height) {\n          const h = getAutoHeight(this.root)\n          // eslint-disable-next-line\n          this.setState({ computedHeight: h })\n        }\n      }\n\n      handleRoot = (node: HTMLDivElement) => {\n        this.root = node\n      }\n\n      render() {\n        const { height } = this.props\n        const { computedHeight } = this.state\n        const h = height || computedHeight\n        return (\n          <div ref={this.handleRoot}>\n            {h > 0 && <WrappedComponent {...this.props} height={h} />}\n          </div>\n        )\n      }\n    }\n}\n\nexport default autoHeight\n","import React from 'react'\nimport { RouteComponentProps } from 'react-router-dom'\nimport { Row, Col, BackTop, Affix, Form, Select, message } from 'antd'\nimport cx from 'classnames'\nimport {\n  map,\n  pathOr,\n  keys,\n  gt,\n  __,\n  length,\n  ifElse,\n  equals,\n  always,\n  filter,\n  values,\n  not,\n  replace,\n} from 'ramda'\nimport useTitle from '@/hooks/useTitle'\nimport { useBreadcrumb, useHeaderContent } from '@/hooks/useApp'\nimport {\n  useReportTemplateState,\n  useToggleReportPreview,\n} from '@/data/useReportTemplate'\nimport { useReportItem } from '@/data/useReport'\nimport { isNil, mapIndexed, queryString } from '@/utils/webHelper'\nimport { SnippetProps } from '@/constants/types'\nimport { reportAnnotations } from '@/constants/enums'\nimport { Page } from '@/components/layout'\nimport ReactDndProvider from '@/components/snippet-scrollable-container'\nimport SnippetsContainer from '@/components/snippets-container'\nimport { Checkbox, CheckboxGroup } from '@/components/checkbox'\nimport Radio from '@/components/radio'\nimport Input from '@/components/input'\nimport Collapse from '@/components/collapse'\nimport SnippetListMenu from '@/components/snippet-list-menu'\nimport { renderSnippets } from '@/components/snippet-utils'\nimport Tabs from '@/components/draggable-tabs'\nimport { useReportTemplate } from '@/services/reportTemplate'\nimport { useAddNewReport, useUpdateReport } from '@/services/report'\nimport { usePathology } from '@/services/pathology'\nimport history from '@/utils/history'\nimport { REPORT_EDIT } from '@/constants/routes'\nimport { Anchor } from './components'\nimport Header from './header'\nimport Pie from './pie'\nconst { compose } = require('ramda')\n\nconst { Link } = Anchor\n\nenum menuState {\n  VISIBLE_RIGHT = '1',\n  VISIBLE_LEFT = '2',\n}\n\n// interface Props extends RouteComponentProps<{ id: string }> {}\n\ninterface Props extends RouteComponentProps<{ id: string }> {\n  id: any\n  reviewDoctor: string\n  serialNo: string\n}\n\nconst col = ifElse(equals(false), always(5), always(0))\n\nexport default function ReportTyping(props: Props) {\n  useTitle('輸入報告')\n  useBreadcrumb([{ name: '輸入報告' }, { name: '病理報告輸入' }])\n  useToggleReportPreview(true)\n\n  const [form] = Form.useForm()\n\n  const [reportTemplates] = useReportTemplateState()\n\n  const { data /* isValidating */ } = usePathology()\n\n  const [visibleLayouts, setVisibleLayouts] = React.useState<string[]>([\n    menuState.VISIBLE_LEFT,\n    menuState.VISIBLE_RIGHT,\n  ])\n\n  // 沒有 QS 代表是編輯，會有 params.id 要用 useReportItem 取得報告資料後，\n  // 再餵進去 useReportTemplate 作編輯\n  const { params } = props.match\n\n  // 有 QS 代表新增，會沒有 params.id，此時的資料要用 reportTemplate\n  const qs = queryString(props.location.search)\n\n  // 只有新增時有 QS 才會有\n  const [templateId, setCurrentTemplateId] = React.useState(qs.templateId)\n\n  React.useEffect(() => {\n    setCurrentTemplateId(qs.templateId)\n  }, [qs.templateId])\n\n  const item = useReportItem(params.id)\n\n  const {\n    total,\n    category,\n    reportTemplate,\n    snippetList,\n    handleTabEdit,\n    handleTabChange,\n    handleTabMove,\n    handleTabNameChange,\n    handleSnippetUpdate,\n  } = useReportTemplate({\n    id: templateId,\n    data: item,\n  })\n\n  React.useEffect(() => {\n    form.setFieldsValue(reportTemplate)\n  }, [JSON.stringify(reportTemplate)]) // eslint-disable-line\n\n  React.useEffect(() => {\n    if (qs.reviewDoctor) {\n      form.setFieldsValue({ reviewDoctor: qs.reviewDoctor })\n    }\n    if (qs.serialNo) {\n      form.setFieldsValue({ serialNo: qs.serialNo })\n    }\n  }, [JSON.stringify(qs)]) // eslint-disable-line\n\n  const handleLayoutChange = (value: string) => {\n    setVisibleLayouts((prev: string[]) =>\n      prev.includes(value) ? prev.filter(x => x !== value) : [...prev, value]\n    )\n  }\n\n  const leftContentVisible = visibleLayouts.includes(menuState.VISIBLE_LEFT)\n  const rightContentVisible = visibleLayouts.includes(menuState.VISIBLE_RIGHT)\n\n  const [, handleAdd] = useAddNewReport({\n    onCompleted: ({ id }: any) => {\n      history.push(replace(':id', id)(REPORT_EDIT))\n      message.success('報告資料已新增')\n    },\n  })\n\n  const [, handleUpdate] = useUpdateReport({\n    onCompleted: () => message.success('報告資料已儲存'),\n  })\n\n  const handleOk = () => {\n    form.validateFields().then(values => {\n      let payload = {\n        ...values,\n        ...(params.id ? { id: params.id } : {}),\n        ...data,\n        setting: snippetList,\n      }\n\n      const handler = params.id ? handleUpdate : handleAdd\n\n      handler(payload)\n    })\n  }\n\n  useHeaderContent(\n    <Header\n      leftContentVisible={leftContentVisible}\n      rightContentVisible={rightContentVisible}\n      onLayoutChange={handleLayoutChange}\n      onOk={handleOk}\n    />\n  )\n\n  const handleReportChange = (value: string) => {\n    setCurrentTemplateId(value)\n  }\n\n  const [affixed, setIsAffixed] = React.useState<boolean | undefined>(false)\n\n  const [percentage, setPercentage] = React.useState(0)\n\n  const handleAffixChange = (affixed?: boolean) => {\n    setIsAffixed(affixed)\n  }\n\n  // TODO: 還要切換 category\n  const handleAnchorClick = (\n    e: React.MouseEvent<HTMLElement>,\n    link: {\n      title: React.ReactNode\n      href: string\n    }\n  ) => {\n    e.preventDefault()\n    window.scroll({\n      behavior: 'smooth',\n      left: 0,\n      top: document.getElementById(link.href)?.offsetTop,\n    })\n  }\n\n  const handleValuesChange = React.useCallback(\n    (_: any, { data }: { data: { [key: string]: any } }) => {\n      setPercentage(\n        Math.round(\n          (compose(length, filter(compose(not, isNil)), values)(data) / total) *\n            100\n        )\n      )\n    },\n    [total]\n  )\n\n  React.useEffect(() => {\n    handleValuesChange(null, form.getFieldsValue())\n  }, [total]) // eslint-disable-line\n\n  const renderCategory = (category: string) => {\n    return compose(gt(__, 0), length, pathOr([], [category]))(snippetList) ? (\n      <h2 id={category} className=\"my-2\">\n        {category}\n      </h2>\n    ) : null\n  }\n\n  let colSpan = 14 + col(leftContentVisible) + col(rightContentVisible)\n\n  return (\n    <ReactDndProvider className=\"is--preview\">\n      <BackTop />\n      <Page>\n        <Form form={form} onValuesChange={handleValuesChange}>\n          <Row gutter={16}>\n            {leftContentVisible && (\n              <Col span={5}>\n                <Collapse\n                  // accordion\n                  defaultActiveKey={[1, 2]}\n                  expandIcon={() => null}\n                  className=\"shadow-2xl\">\n                  <Collapse.Panel\n                    header={<div className=\"text-center\">報告內容</div>}\n                    key={1}>\n                    <Row className=\"mb-2 text-sm text-darkGrey\">\n                      <Col span={24} className=\"mb-3\">\n                        <div className=\"inline-block\" css={{ width: 65 }}>\n                          審核醫師\n                        </div>\n                        <Form.Item noStyle name=\"reviewDoctor\">\n                          <Input className=\"w-2/3\" bordered={false} />\n                        </Form.Item>\n                      </Col>\n                      <Col span={24} className=\"my-3\">\n                        <div className=\"inline-block\" css={{ width: 65 }}>\n                          申請序號\n                        </div>\n                        <Form.Item noStyle name=\"serialNo\">\n                          <Input className=\"w-2/3\" bordered={false} />\n                        </Form.Item>\n                      </Col>\n                      <Col span={24} className=\"my-3\">\n                        <div className=\"inline-block\" css={{ width: 65 }}>\n                          報告格式\n                        </div>\n                        <Select\n                          className=\"w-2/3\"\n                          bordered={false}\n                          value={templateId}\n                          onChange={handleReportChange}>\n                          {reportTemplates.map(x => (\n                            <Select.Option key={x.id} value={x.id}>\n                              {x.name}\n                            </Select.Option>\n                          ))}\n                        </Select>\n                      </Col>\n                      <Col span={24} className=\"mt-3\">\n                        <Affix offsetTop={0} onChange={handleAffixChange}>\n                          <Anchor\n                            showInkInFixed\n                            affix={false}\n                            className=\"is--fixed\"\n                            style={getAnchorStyles(affixed)}\n                            onClick={handleAnchorClick}>\n                            {compose(\n                              mapIndexed((key: string, idx: number) => (\n                                <Link\n                                  key={`${key}-${idx}`}\n                                  href={key}\n                                  title={key}>\n                                  {compose(\n                                    mapIndexed((x: SnippetProps) => (\n                                      <Link\n                                        key={x.id}\n                                        href={`${x.id}`}\n                                        title={pathOr(\n                                          x.id,\n                                          ['setting', 'text'],\n                                          x\n                                        )}\n                                      />\n                                    )),\n                                    pathOr([], [key])\n                                  )(snippetList)}\n                                </Link>\n                              )),\n                              keys\n                            )(snippetList)}\n                          </Anchor>\n                        </Affix>\n                      </Col>\n                    </Row>\n                  </Collapse.Panel>\n                  <Collapse.Panel\n                    header={<div className=\"text-center\">模版工具</div>}\n                    key={2}>\n                    <Row>\n                      <Col span={24}>\n                        <SnippetListMenu />\n                      </Col>\n                    </Row>\n                  </Collapse.Panel>\n                </Collapse>\n              </Col>\n            )}\n\n            <Col span={colSpan}>\n              <div className=\"pt-2 bg-white rounded-lg shadow-2xl\">\n                <Affix offsetTop={0}>\n                  <div\n                    className={cx(\n                      'px-4 mb-4 -mt-2',\n                      'flex items-center justify-between',\n                      'rounded-lg shadow-sm',\n                      'text-xl text-darkGrey font-medium'\n                    )}\n                    css={{ background: '#fff' }}>\n                    <div>\n                      Pathological Image Report\n                      <div className=\"text-base text-gray-600\">\n                        Imaging Report From for Hepatocellular Carcinoma\n                      </div>\n                    </div>\n                    <Pie\n                      percent={percentage}\n                      total={`${percentage}%`}\n                      style={{ width: 70, paddingTop: 6 }}\n                      height={80}\n                    />\n                  </div>\n                </Affix>\n              </div>\n\n              <div className=\"rounded-lg shadow-2xl\">\n                <Tabs\n                  type=\"editable-card\"\n                  activeKey={category}\n                  onChange={handleTabChange}\n                  onEdit={handleTabEdit}\n                  tabBarGutter={8}\n                  moveTabNode={handleTabMove}\n                  className=\"flex-1\">\n                  {compose(\n                    map((category: string) => (\n                      <Tabs.TabPane\n                        closable\n                        key={category}\n                        tab={\n                          <span\n                            contentEditable\n                            suppressContentEditableWarning\n                            spellCheck={false}\n                            className=\"outline-none\"\n                            css={{ whiteSpace: 'nowrap' }}\n                            onChange={handleTabNameChange(category)}>\n                            {category}\n                          </span>\n                        }>\n                        <Col\n                          span={24}\n                          className=\"p-4 report-template-builder__main-content\">\n                          <SnippetsContainer\n                            // draggable={!isPreview}\n                            draggable\n                            snippetList={snippetList[category]}\n                            onSnippetUpdate={handleSnippetUpdate}\n                          />\n                        </Col>\n                      </Tabs.TabPane>\n                    )),\n                    keys\n                  )(snippetList)}\n                  <Tabs.TabPane key=\"overview\" tab=\"Overview\">\n                    {compose(\n                      map((category: string) => (\n                        <div key={category} className=\"px-3 bg-white\">\n                          {renderCategory(category)}\n                          {compose(\n                            renderSnippets({ className: 'mb-0' }),\n                            pathOr([], [category])\n                          )(snippetList)}\n                        </div>\n                      )),\n                      keys\n                    )(snippetList)}\n                  </Tabs.TabPane>\n                </Tabs>\n              </div>\n            </Col>\n\n            {rightContentVisible && (\n              <Col span={5}>\n                <Collapse\n                  activeKey={[1, 2, 3, 4]}\n                  expandIcon={() => null}\n                  className=\"shadow-2xl\">\n                  <Collapse.Panel\n                    header={<div className=\"text-center\">醫囑內容</div>}\n                    key={1}>\n                    <div className=\"border-b border-gray-600 p-3\">\n                      申請序號：{data?.ORREQNO}\n                    </div>\n                    <div className=\"border-b border-gray-600 p-3\">\n                      病理號：{data?.ORWORKNO}\n                    </div>\n                    <div className=\"border-b border-gray-600 p-3\">\n                      病患姓名：{data?.HNAMEC}\n                    </div>\n                    <div className=\"border-b border-gray-600 p-3\">\n                      性別：{data?.HSEX}\n                    </div>\n                    <div className=\"border-b border-gray-600 p-3\">\n                      申請科別：{data?.CSECT}\n                    </div>\n                    <div className=\"border-b border-gray-600 p-3\">\n                      病例號：{data?.HHISNUM}\n                    </div>\n                    <div className=\"border-b border-gray-600 p-3\">\n                      病房床號：{data?.HBED}\n                    </div>\n                    <div className=\"border-b border-gray-600 p-3\">\n                      出生日期：{data?.HBIRTHDT}\n                    </div>\n                    <div className=\"border-b border-gray-600 p-3\">\n                      醫屬名稱：{data?.ORPROCED}\n                    </div>\n                    <div className=\"border-b border-gray-600 p-3\">\n                      現在輸入：{'LoginUser'}\n                    </div>\n                    <div className=\"border-b border-gray-600 p-3\">\n                      審核者：{props.reviewDoctor}\n                    </div>\n                  </Collapse.Panel>\n                  <Collapse.Panel\n                    header={<div className=\"text-center\">儲存狀態</div>}\n                    key={2}>\n                    <Form.Item noStyle name=\"state\">\n                      <Radio.Group className=\"pl-3\">\n                        <Radio className=\"block\" value=\"1\">\n                          已輸\n                        </Radio>\n                        <Radio className=\"block mt-1\" value=\"2\">\n                          待發\n                        </Radio>\n                        <Radio className=\"block mt-1\" value=\"3\">\n                          急發\n                        </Radio>\n                      </Radio.Group>\n                    </Form.Item>\n                  </Collapse.Panel>\n                  <Collapse.Panel\n                    header={<div className=\"text-center\">報告註記</div>}\n                    key={3}>\n                    <Form.Item noStyle name=\"annotations\">\n                      <CheckboxGroup>\n                        {reportAnnotations.map((x, idx) => (\n                          <Checkbox\n                            key={`annotations-${idx}`}\n                            className={cx('block ml-0 pl-2', {\n                              'mt-1': idx > 0,\n                            })}\n                            defaultChecked={false}\n                            value={`${idx}`}>\n                            {x}\n                          </Checkbox>\n                        ))}\n                      </CheckboxGroup>\n                    </Form.Item>\n                  </Collapse.Panel>\n                  <Collapse.Panel\n                    header={<div className=\"text-center\">操作熱鍵</div>}\n                    key={4}>\n                    <div className=\"pl-6\">\n                      <code className=\"bg-yellow-400 px-1\">CTRL＋W</code>,{' '}\n                      <code className=\"bg-yellow-400 px-1\">CTRL+S</code> 儲存\n                    </div>\n                    <div className=\"pl-6 pt-2\">\n                      <code className=\"bg-yellow-400 px-1\">F9</code> 片語視窗\n                    </div>\n                  </Collapse.Panel>\n                </Collapse>\n              </Col>\n            )}\n          </Row>\n        </Form>\n      </Page>\n    </ReactDndProvider>\n  )\n}\n\nfunction getAnchorStyles(affixed?: boolean): React.CSSProperties | undefined {\n  if (!affixed) {\n    return undefined\n  }\n\n  return {\n    marginLeft: -16,\n    marginRight: -16,\n    background: '#fff',\n    padding: 24,\n    borderBottomLeftRadius: 8,\n    borderBottomRightRadius: 8,\n  }\n}\n","import { G2 } from 'bizcharts/typings/index'\nimport React from 'react'\nimport Chart from 'bizcharts/lib/components/Chart'\nimport Tooltip from 'bizcharts/lib/components/Tooltip'\nimport Coord from 'bizcharts/lib/components/Coord'\nimport Geom from 'bizcharts/lib/components/Geom'\nimport { Divider } from 'antd'\nimport classNames from 'classnames'\nimport Debounce from 'lodash.debounce'\nimport autoHeight from './autoHeight'\nimport { PieChart } from './components'\nimport theme from '../../theme'\nconst ReactFitText = require('react-fittext')\nconst { DataView } = require('@antv/data-set')\n\ninterface PieProps {\n  animate?: boolean\n  color?: string\n  colors?: string[]\n  selected?: boolean\n  height?: number\n  margin?: [number, number, number, number]\n  hasLegend?: boolean\n  padding?: [number, number, number, number]\n  percent?: number\n  data?: {\n    x: string | string\n    y: number\n  }[]\n  inner?: number\n  lineWidth?: number\n  forceFit?: boolean\n  style?: React.CSSProperties\n  className?: string\n  total?: React.ReactNode | number | (() => React.ReactNode | number)\n  title?: React.ReactNode\n  tooltip?: boolean\n  valueFormat?: (value: string) => string | React.ReactNode\n  subTitle?: React.ReactNode\n  width?: number\n  legendWidth?: number\n}\n\ninterface PieState {\n  legendData: {\n    checked: boolean\n    x: string\n    color: string\n    percent: number\n    y: string\n  }[]\n  legendBlock: boolean\n}\n\nclass Pie extends React.PureComponent<PieProps, PieState> {\n  state: PieState = {\n    legendData: [],\n    legendBlock: false,\n  }\n\n  requestRef: number | undefined = undefined\n\n  root: HTMLDivElement | undefined = undefined\n\n  chart: G2.Chart | undefined = undefined\n\n  componentDidMount() {\n    window.addEventListener(\n      'resize',\n      () => {\n        this.requestRef = requestAnimationFrame(() => this.resize())\n      },\n      { passive: true }\n    )\n  }\n\n  componentDidUpdate(preProps: PieProps) {\n    const { data } = this.props\n    if (data !== preProps.data) {\n      // because of charts data create when rendered\n      // so there is a trick for get rendered time\n      this.getLegendData()\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.requestRef) {\n      window.cancelAnimationFrame(this.requestRef)\n    }\n    if (this.resize) {\n      window.removeEventListener('resize', this.resize)\n      this.resize.cancel()\n    }\n  }\n\n  getG2Instance = (chart: G2.Chart) => {\n    this.chart = chart\n    requestAnimationFrame(() => {\n      this.getLegendData()\n      this.resize()\n    })\n  }\n\n  // for custom lengend view\n  getLegendData = () => {\n    if (!this.chart) return\n    const geom = this.chart.getAllGeoms()[0] // 获取所有的图形\n    if (!geom) return\n    const items = (geom as any).get('dataArray') || [] // 获取图形对应的\n\n    const legendData = items.map((item: { color: any; _origin: any }[]) => {\n      /* eslint no-underscore-dangle:0 */\n      const origin = item[0]._origin\n      origin.color = item[0].color\n      origin.checked = true\n      return origin\n    })\n\n    this.setState({\n      legendData,\n    })\n  }\n\n  handleRoot = (n: HTMLDivElement) => {\n    this.root = n\n  }\n\n  handleLegendClick = (item: any, i: number) => {\n    const newItem = item\n    newItem.checked = !newItem.checked\n\n    const { legendData } = this.state\n    legendData[i] = newItem\n\n    const filteredLegendData = legendData.filter(l => l.checked).map(l => l.x)\n\n    if (this.chart) {\n      this.chart.filter('x', val => filteredLegendData.indexOf(`${val}`) > -1)\n    }\n\n    this.setState({\n      legendData,\n    })\n  }\n\n  resize = Debounce(() => {\n    const { hasLegend } = this.props\n    const { legendBlock } = this.state\n    if (!hasLegend || !this.root) {\n      window.removeEventListener('resize', this.resize)\n      return\n    }\n    if (\n      this.root &&\n      this.root.parentNode &&\n      (this.root.parentNode as HTMLElement).clientWidth <= 380\n    ) {\n      if (!legendBlock) {\n        this.setState({\n          legendBlock: true,\n        })\n      }\n    } else if (legendBlock) {\n      this.setState({\n        legendBlock: false,\n      })\n    }\n  }, 400)\n\n  render() {\n    const {\n      valueFormat,\n      subTitle,\n      total,\n      hasLegend = false,\n      className,\n      style,\n      height,\n      forceFit = true,\n      percent,\n      color,\n      inner = 0.75,\n      animate = true,\n      colors,\n      lineWidth = 0,\n      width = 240,\n      legendWidth = 250,\n    } = this.props\n\n    const { legendData, legendBlock } = this.state\n    const pieClassName = classNames('pie', className, {\n      hasLegend: !!hasLegend,\n      legendBlock: legendBlock,\n    })\n\n    const {\n      data: propsData,\n      selected: propsSelected = true,\n      tooltip: propsTooltip = true,\n    } = this.props\n\n    let data = propsData || []\n    let selected = propsSelected\n    let tooltip = propsTooltip\n\n    const defaultColors = colors\n    data = data || []\n    selected = selected || true\n    tooltip = tooltip || true\n    let formatColor\n\n    const scale = {\n      x: {\n        type: 'cat',\n        range: [0, 1],\n      },\n      y: {\n        min: 0,\n      },\n    }\n\n    if (percent || percent === 0) {\n      selected = false\n      tooltip = false\n      formatColor = (value: string) => {\n        if (value === '占比') {\n          return color || theme.primary\n        }\n        return '#f0f2f5'\n      }\n\n      data = [\n        {\n          x: '占比',\n          y: parseFloat(`${percent}`),\n        },\n        {\n          x: '反比',\n          y: 100 - parseFloat(`${percent}`),\n        },\n      ]\n    }\n\n    const tooltipFormat = [\n      'x*percent',\n      (x: string, p: number) => ({\n        name: x,\n        value: `${(p * 100).toFixed(2)}%`,\n      }),\n    ]\n\n    const padding = [6, 0, 6, 0]\n\n    const dv = new DataView()\n    dv.source(data).transform({\n      type: 'percent',\n      field: 'y',\n      dimension: 'x',\n      as: 'percent',\n    })\n\n    return (\n      <PieChart\n        ref={this.handleRoot}\n        className={pieClassName}\n        chartWidth={width}\n        style={style}\n        legendWidth={legendWidth}>\n        <ReactFitText maxFontSize={25}>\n          <div className=\"chart\">\n            <Chart\n              scale={scale}\n              height={height}\n              forceFit={forceFit}\n              data={dv}\n              padding={padding}\n              animate={animate}\n              onGetG2Instance={this.getG2Instance}>\n              {!!tooltip && <Tooltip showTitle={false} />}\n              <Coord type=\"theta\" innerRadius={inner} />\n              <Geom\n                style={{ lineWidth, stroke: '#fff' }}\n                tooltip={tooltip && tooltipFormat}\n                type=\"intervalStack\"\n                position=\"percent\"\n                color={[\n                  'x',\n                  percent || percent === 0 ? formatColor : defaultColors,\n                ]}\n                selected={selected}\n              />\n            </Chart>\n\n            {(subTitle || total) && (\n              <div className=\"total\">\n                {subTitle && <h4 className=\"pie-sub-title\">{subTitle}</h4>}\n                {/* eslint-disable-next-line */}\n                {total && (\n                  <div className=\"pie-stat\">\n                    {typeof total === 'function' ? total() : total}\n                  </div>\n                )}\n              </div>\n            )}\n          </div>\n        </ReactFitText>\n\n        {hasLegend && (\n          <ul className=\"legend\">\n            {legendData.map((item, i) => (\n              <li key={item.x} onClick={() => this.handleLegendClick(item, i)}>\n                <span\n                  className=\"dot\"\n                  style={{\n                    backgroundColor: !item.checked ? '#aaa' : item.color,\n                  }}\n                />\n                <span className=\"legendTitle\">{item.x}</span>\n                <Divider type=\"vertical\" />\n                <span className=\"percent\">\n                  {`${(Number.isNaN(item.percent)\n                    ? 0\n                    : item.percent * 100\n                  ).toFixed(2)}%`}\n                </span>\n                <span className=\"value\">\n                  {valueFormat ? valueFormat(item.y) : item.y}\n                </span>\n              </li>\n            ))}\n          </ul>\n        )}\n      </PieChart>\n    )\n  }\n}\n\nexport default autoHeight()(Pie)\n","import ReportTyping from './report-typing'\n\nexport default ReportTyping\n// import React from 'react'\n\n// export default React.lazy(() => import('../report-typing/report-typing'))\n","import store from 'store'\nimport moment from 'moment'\nimport { update } from 'ramda'\nimport { Mutation, MutationOptions } from '@/constants/types'\nimport { useReportList } from '@/data/useReport'\nimport { uuid } from '@/utils/webHelper'\n\nexport const useAddNewReport = ({ onCompleted }: MutationOptions = {}) => {\n  const [reportList, setReportList] = useReportList()\n  const handler = (values: any) => {\n    let id = uuid()\n    let newList = [\n      ...reportList,\n      {\n        ...values,\n        id,\n        createdAt: moment(),\n        createdAtStr: moment().format('YYYY/MM/DD HH:mm'),\n        updatedAt: moment(),\n        updatedAtStr: moment().format('YYYY/MM/DD HH:mm'),\n      },\n    ]\n\n    setReportList(newList)\n    store.set('reportListState', newList)\n\n    if (onCompleted) {\n      onCompleted({ ...values, id })\n    }\n  }\n  return [false, handler] as Mutation\n}\n\nexport const useUpdateReport = ({ onCompleted }: MutationOptions = {}) => {\n  const [reportList, setReportList] = useReportList()\n\n  const handler = (values: any) => {\n    let index = reportList.findIndex((x: any) => `${x.id}` === `${values.id}`)\n    let newList = update(\n      index,\n      {\n        ...values,\n        updatedAt: moment(),\n        updatedAtStr: moment().format('YYYY/MM/DD HH:mm'),\n      },\n      reportList\n    )\n    setReportList(newList)\n    store.set('reportListState', newList)\n\n    if (onCompleted) {\n      onCompleted()\n    }\n  }\n  return [false, handler] as Mutation\n}\n","import React from 'react'\n\nexport default React.lazy(() => import('./pathol-image-viewer'))\n","import React from 'react'\n\nexport default React.lazy(() => import('./radiol-image-viewer'))\n","import React from 'react'\n\nexport default React.lazy(() => import('./report-list'))\n","import ReportTemplateBuilder from '@/containers/report-template-editor'\nimport ReportTemplateList from '@/containers/report-template-list'\nimport ReportInquiry from '@/containers/report-inquiry'\nimport ReportTyping from '@/containers/report-typing'\nimport PatholImagesViewer from '@/containers/pathol-images-viewer'\nimport RadiolImagesViewer from '@/containers/radiol-images-viewer'\nimport ReportList from '@/containers/report-list'\n\nexport type RouteItem = {\n  id: number\n  title: string\n  path: string\n  component: typeof React.Component\n  icon?: React.FunctionComponent\n  disabled?: boolean\n  param?: string\n  children?: RouteItem[]\n  hide?: RouteItem[]\n}\n\nexport type Route = RouteItem & {\n  children: Array<RouteItem>\n  hide: Array<RouteItem>\n  disabled: boolean\n}\n\nexport const PATHOL_IMAGE = '/pathol-images/:studyInstanceUIDs'\nexport const RADIOL_IMAGE = '/radiol-images/:studyInstanceUIDs'\nexport const REPORT_TEMPLATE_LIST = '/report-templates'\nexport const REPORT_INPUT = '/report-input'\nexport const REPORT_EDIT = `${REPORT_INPUT}/:id`\nexport const REPORT_TEMPLATE_EDIT = `${REPORT_TEMPLATE_LIST}/:id`\nexport const REPORT_TEMPLATE_CREATE = `${REPORT_TEMPLATE_LIST}/create`\nexport const REPORT_INQUIRY = '/report-inquiry'\nexport const REPORT_LIST = '/report-list'\n\nexport function useRoutes() {\n  return [\n    {\n      id: 1,\n      title: '病理影像',\n      path: PATHOL_IMAGE,\n      component: PatholImagesViewer,\n    },\n    {\n      id: 2,\n      title: '放射影像',\n      path: RADIOL_IMAGE,\n      component: RadiolImagesViewer,\n    },\n    {\n      id: 999,\n      title: '清單查詢',\n      path: REPORT_LIST,\n      component: ReportList,\n    },\n    {\n      id: 3,\n      title: '報告查詢',\n      path: REPORT_INQUIRY,\n      component: ReportInquiry,\n    },\n    {\n      id: 15,\n      title: '輸入報告',\n      path: REPORT_EDIT,\n      component: ReportTyping,\n    },\n    {\n      id: 10,\n      title: '輸入報告',\n      path: REPORT_INPUT,\n      component: ReportTyping,\n    },\n    {\n      id: 4,\n      title: '結構式報告模版',\n      path: 'report-template',\n      children: [\n        {\n          id: 5,\n          title: '報告模版清單',\n          path: REPORT_TEMPLATE_LIST,\n          component: ReportTemplateList,\n        },\n        {\n          id: 6,\n          title: '報告模版新增',\n          path: REPORT_TEMPLATE_CREATE,\n          component: ReportTemplateBuilder,\n        },\n        {\n          id: 7,\n          title: '報告模版編輯',\n          path: REPORT_TEMPLATE_EDIT,\n          component: ReportTemplateBuilder,\n        },\n      ],\n    },\n  ]\n}\n\nexport default useRoutes\n","import dayjs from 'dayjs'\nimport customParseFormat from 'dayjs/plugin/customParseFormat'\nimport weekOfYear from 'dayjs/plugin/weekOfYear'\nimport weekday from 'dayjs/plugin/weekday'\nimport isMoment from 'dayjs/plugin/isMoment'\nimport badMutable from 'dayjs/plugin/badMutable'\nimport localeData from 'dayjs/plugin/localeData'\nimport advancedFormat from 'dayjs/plugin/advancedFormat'\nimport weekYear from 'dayjs/plugin/weekYear'\nimport isSameOrBefore from 'dayjs/plugin/isSameOrBefore'\nimport isSameOrAfter from 'dayjs/plugin/isSameOrAfter'\nimport 'dayjs/locale/zh-tw'\n\ndayjs.extend(isSameOrBefore)\ndayjs.extend(isSameOrAfter)\ndayjs.extend(advancedFormat)\ndayjs.extend(customParseFormat)\ndayjs.extend(weekYear)\ndayjs.extend(weekOfYear)\ndayjs.extend(isMoment)\ndayjs.extend(localeData)\ndayjs.extend(badMutable)\ndayjs.extend(weekday)\n\ndayjs.locale('zh-tw')\n","import * as React from 'react'\n\nexport interface WithChildrenProps {\n  children: React.ReactNode\n}\n\nexport type PackComponentType<\n  T extends WithChildrenProps = WithChildrenProps\n> = React.ElementType<T>\n\nexport function pack(\n  children: React.ReactNode = null,\n  ...components: PackComponentType[]\n) {\n  if (!components.length) {\n    return children as JSX.Element\n  }\n\n  const [Component, ...rest] = components\n\n  if (React.isValidElement(Component)) {\n    return (\n      <Component.type {...Component.props}>\n        {pack(children, ...rest)}\n      </Component.type>\n    )\n  }\n\n  return <Component>{pack(children, ...rest)}</Component>\n}\n\nexport function createPack(...components: any[]) {\n  return function PackComponent({ children }: WithChildrenProps) {\n    return pack(children, ...components)\n  }\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport Button from '@/components/button'\n\ntype ErrorInfo = {\n  componentStack: string\n}\n\ntype FallbackProps = {\n  error?: Error\n  componentStack?: string\n  resetErrorBoundary: () => void\n}\n\ntype ErrorBoundaryProps = {\n  onResetKeysChange?: (\n    prevResetKeys: Array<any> | undefined,\n    resetKeys: Array<any> | undefined\n  ) => void\n  onReset?: (...args: any) => void\n  onError?: (error: Error, componentStack: string) => void\n  resetKeys?: Array<any>\n  FallbackComponent?: React.ComponentType<FallbackProps>\n  fallbackRender?: (props: FallbackProps) => React.ReactElement<any, any> | null\n  fallback?: React.ReactElement<any, any> | null\n}\n\ntype ErrorBoundaryState = {\n  hasError?: boolean\n  error?: Error | null\n  info?: ErrorInfo | null\n}\n\nconst ErrorFallbackWrapper = styled.div`\n  width: 100%;\n  height: 100vh;\n  margin: 0 auto;\n  padding: 50px;\n`\n\nfunction ErrorFallback({\n  error,\n  componentStack,\n  resetErrorBoundary,\n}: FallbackProps) {\n  return (\n    <ErrorFallbackWrapper role=\"alert\">\n      <p className=\"text-xl\">Something went wrong:</p>\n      <pre className=\"text-sm\">{error?.message}</pre>\n      <pre className=\"text-sm\">{componentStack}</pre>\n      <Button onClick={resetErrorBoundary}>Try again</Button>\n    </ErrorFallbackWrapper>\n  )\n}\n\nconst changedArray = (a: any[] | undefined = [], b: any[] | undefined = []) =>\n  a.length !== b.length || a.some((item, index) => !Object.is(item, b[index]))\n\nconst initialState = { error: null, info: null }\nexport default class ErrorBoundary extends React.Component<\n  ErrorBoundaryProps,\n  ErrorBoundaryState\n> {\n  state: ErrorBoundaryState = initialState\n\n  resetErrorBoundary = (...args: any) => {\n    this.props.onReset?.(...args)\n    this.setState(initialState)\n  }\n\n  componentDidCatch(error: Error, info: ErrorInfo) {\n    this.props.onError?.(error, info?.componentStack)\n    this.setState({ error, info })\n  }\n\n  componentDidUpdate(prevProps: ErrorBoundaryProps) {\n    const { error } = this.state\n    const { resetKeys } = this.props\n    if (error !== null && changedArray(prevProps.resetKeys, resetKeys)) {\n      this.props.onResetKeysChange?.(prevProps.resetKeys, resetKeys)\n      this.setState(initialState)\n    }\n  }\n\n  render() {\n    const { error, info } = this.state\n    const {\n      fallbackRender,\n      FallbackComponent = ErrorFallback,\n      fallback,\n    } = this.props\n\n    if (error !== null) {\n      const props = {\n        componentStack: info?.componentStack,\n        error,\n        resetErrorBoundary: this.resetErrorBoundary,\n      }\n      if (React.isValidElement(fallback)) {\n        return fallback\n      } else if (typeof fallbackRender === 'function') {\n        return fallbackRender(props)\n      } else if (FallbackComponent) {\n        return <FallbackComponent {...props} />\n      } else {\n        throw new Error(\n          'react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop'\n        )\n      }\n    }\n\n    return this.props.children\n  }\n}\n\nfunction withErrorBoundary<P>(\n  Component: React.ComponentType<P>,\n  errorBoundaryProps: ErrorBoundaryProps\n) {\n  function Wrapped(props: any) {\n    return (\n      <ErrorBoundary {...errorBoundaryProps}>\n        <Component {...props} />\n      </ErrorBoundary>\n    )\n  }\n\n  // Format for display in DevTools\n  const name = Component.displayName || Component.name || 'Unknown'\n  Wrapped.displayName = `withErrorBoundary(${name})`\n\n  return Wrapped\n}\n\nfunction useErrorHandler<P = Error>(givenError?: P) {\n  const [error, setError] = React.useState(null)\n  if (givenError) throw givenError\n  if (error) throw error\n  return setError\n}\n\nexport { ErrorBoundary, withErrorBoundary, useErrorHandler }\n","import React from 'react'\nimport { Link } from 'react-router-dom'\nimport styled from 'styled-components'\nimport Button from '@/components/button'\nimport { envStore } from '@/constants/env'\n\ntype Props = {\n  type?: number | string | 404\n}\n\nexport default function Exception({ type = 404 }: Props) {\n  return (\n    <ExceptionWrapper>\n      <div className=\"exception\">\n        <div className=\"exception__imgBlock\">\n          <div\n            className=\"exception__imgEle\"\n            style={{\n              backgroundImage: `url(\"${envStore.publicUrl}/images/${type}.svg\")`,\n            }}\n          />\n        </div>\n        <div className=\"exception__content\">\n          <h1>404</h1>\n          <div className=\"exception__desc\">抱歉，你訪問的頁面不存在</div>\n          <div className=\"exception__actions\">\n            <Link to=\"/\">\n              <Button color=\"primary\">回首頁</Button>\n            </Link>\n          </div>\n        </div>\n      </div>\n    </ExceptionWrapper>\n  )\n}\n\nconst ExceptionWrapper = styled.div`\n  height: 100%;\n  margin-right: -24px;\n  background: #f9f9fb;\n  border-radius: 4px;\n\n  .exception {\n    display: flex;\n    align-items: center;\n    height: 100%;\n  }\n\n  .exception .exception__imgBlock {\n    flex: 0 0 62.5%;\n    width: 62.5%;\n    padding-right: 152px;\n    zoom: 1;\n  }\n\n  .exception .exception__imgEle {\n    float: right;\n    width: 100%;\n    max-width: 430px;\n    height: 360px;\n    background-repeat: no-repeat;\n    background-position: 50% 50%;\n    background-size: contain;\n  }\n\n  .exception .exception__content {\n    flex: auto;\n  }\n\n  .exception .exception__content h1 {\n    margin-bottom: 24px;\n    color: #434e59;\n    font-weight: 600;\n    font-size: 72px;\n    line-height: 72px;\n  }\n\n  .exception .exception__content .exception__desc {\n    margin-bottom: 24px;\n    color: rgba(0, 0, 0, 0.45);\n    font-size: 20px;\n    line-height: 28px;\n  }\n`\n","import React from 'react'\nimport styled from 'styled-components'\nimport { Row, Col } from 'antd'\nimport { Loading3QuartersOutlined } from '@ant-design/icons'\n\ntype PropTypes = {\n  className?: string\n  style?: React.CSSProperties\n}\n\nconst Wrapper = styled.div`\n  .ant-spin {\n    &--inner {\n      margin: 0 auto;\n    }\n  }\n`\n\nexport function Loading(props: PropTypes) {\n  return <Loading3QuartersOutlined {...props} />\n}\n\nexport default React.memo(function Loading({\n  className,\n  style,\n  ...props\n}: PropTypes) {\n  return (\n    <Wrapper className=\"bg-greyF9\">\n      <Row justify=\"center\" className={className}>\n        <Col className=\"ant-spin--inner\">\n          <Loading3QuartersOutlined spin style={style} />\n        </Col>\n      </Row>\n    </Wrapper>\n  )\n})\n","import { Breadcrumb } from 'antd'\nimport styled from 'styled-components'\n\nconst StyledBreadcrumb = styled(Breadcrumb)`\n  &.ant-breadcrumb {\n    font-size: 16px;\n\n    .ant-breadcrumb-link {\n      cursor: pointer;\n    }\n\n    .ant-breadcrumb-link,\n    a {\n      color: #fff;\n    }\n\n    .anticon {\n      font-size: 16px;\n    }\n\n    .ant-breadcrumb-link:hover,\n    a:hover {\n      text-decoration: underline;\n    }\n\n    .ant-breadcrumb-separator {\n      margin: 0 16px;\n      color: #fff;\n    }\n\n    > span:last-child {\n      color: #fff;\n      text-decoration: underline;\n    }\n  }\n`\n\nexport default StyledBreadcrumb\n","import React from 'react'\nimport cx from 'classnames'\nimport { Layout, Avatar, Menu } from 'antd'\nimport {\n  SettingOutlined,\n  ExportOutlined,\n  HomeOutlined,\n} from '@ant-design/icons'\nimport styled from 'styled-components'\nimport Button from '@/components/button'\nimport Breadcrumb from '@/components/breadcrumb'\nimport { useBreadcrumbState, useHeaderContentValue } from '@/hooks/useApp'\nimport history from '@/utils/history'\nimport { envStore } from '@/constants/env'\nimport * as routes from '@/constants/routes'\n\nexport default function AppHeader() {\n  const [items] = useBreadcrumbState()\n  const content = useHeaderContentValue()\n\n  const [current, setCurrentPath] = React.useState(history.location.pathname)\n\n  const handleTo = (pathname?: string) => () => {\n    if (pathname) {\n      setCurrentPath(pathname)\n      history.push(pathname)\n    }\n  }\n\n  const getMenuClassName = (targetUrl: string) => {\n    return cx({ 'is--current': current !== '/' && targetUrl.includes(current) })\n  }\n\n  return (\n    <Header>\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center\">\n          <Logo onClick={handleTo('/')}>\n            <img\n              src={`${envStore.publicUrl}/images/logo-sm@2x.png`}\n              alt=\"app-logo\"\n              className=\"cursor-pointer\"\n            />\n          </Logo>\n          <Menu\n            mode=\"horizontal\"\n            className=\"bg-transparent ml-3\"\n            style={{ borderBottom: 'none', lineHeight: '46px' }}>\n            <MenuItem\n              key={routes.REPORT_LIST}\n              onClick={handleTo(routes.REPORT_LIST)}\n              className={getMenuClassName(routes.REPORT_LIST)}>\n              <div className=\"flex items-center text-lg\">\n                <SettingOutlined />\n                清單查詢\n              </div>\n            </MenuItem>\n            <MenuItem\n              key={routes.REPORT_INQUIRY}\n              onClick={handleTo(routes.REPORT_INQUIRY)}\n              className={getMenuClassName(routes.REPORT_INQUIRY)}>\n              <div className=\"flex items-center text-lg\">\n                <SettingOutlined />\n                輸入報告\n              </div>\n            </MenuItem>\n            <MenuItem\n              key={routes.REPORT_TEMPLATE_LIST}\n              onClick={handleTo(routes.REPORT_TEMPLATE_LIST)}\n              className={getMenuClassName(routes.REPORT_TEMPLATE_LIST)}>\n              <div className=\"flex items-center text-lg\">\n                <SettingOutlined />\n                結構式報告\n              </div>\n            </MenuItem>\n            <MenuItem\n              key=\"outside\"\n              onClick={handleTo(routes.REPORT_TEMPLATE_EDIT)}\n              className={getMenuClassName('outside')}>\n              <div className=\"flex items-center text-lg\">\n                <SettingOutlined />\n                醫學影像教學平台\n              </div>\n            </MenuItem>\n          </Menu>\n        </div>\n        <div className=\"flex items-center\">\n          <div className=\"text-white text-lg mr-4\">Hi, 使用者</div>\n          <Avatar className=\"flex items-center h-12 w-12\">\n            <div className=\"text-2xl\">C</div>\n          </Avatar>\n          <Button\n            icon={\n              <ExportOutlined\n                className=\"text-white text-2xl\"\n                style={{ marginRight: 0 }}\n              />\n            }\n            className=\"ml-4 bg-transparent border border-white rounded pr-1 hover--none\"\n            style={{ minWidth: 35, borderColor: '#fff' }}\n          />\n        </div>\n      </div>\n      <div className=\"mt-3 ml-4 pb-0 flex justify-between\">\n        <Breadcrumb\n          separator=\">\"\n          style={{ minHeight: 32, display: 'flex', alignItems: 'center' }}>\n          <Breadcrumb.Item onClick={handleTo('/')}>\n            <HomeOutlined className=\"relative\" style={{ top: -4 }} />\n          </Breadcrumb.Item>\n          {items.map((x, idx) => (\n            <Breadcrumb.Item\n              key={`breadcrumb-${idx}`}\n              onClick={handleTo(x.href)}>\n              {x.name}\n            </Breadcrumb.Item>\n          ))}\n        </Breadcrumb>\n        {content}\n      </div>\n    </Header>\n  )\n}\n\nconst Header = styled(Layout.Header)`\n  &.ant-layout-header {\n    height: auto;\n    padding: 16px 1.7rem 10px 2.1rem;\n    background: ${p => `linear-gradient(-90deg, #42c2b8, ${p.theme.primary})`};\n    color: ${p => p.theme.primary};\n    box-shadow: 0 0 20px ${p => p.theme.purple150};\n  }\n\n  .anticon {\n    cursor: pointer;\n  }\n`\n\nconst MenuItem = styled(Menu.Item)`\n  &.ant-menu-item {\n    margin: 0 5px !important;\n    padding: 0 15px !important;\n    border-radius: 6px;\n    border-bottom: none !important;\n    color: #fff;\n\n    &.is--current,\n    &:hover {\n      color: #fff !important;\n      background: rgba(24, 144, 138, 1) !important;\n    }\n  }\n\n  &.ant-menu-item-selected {\n    color: #fff !important;\n  }\n`\n\nconst Logo = styled.div``\n","import React from 'react'\n\nexport default React.lazy(() => import('./home'))\n","import React from 'react'\nimport { Route, Switch } from 'react-router-dom'\nimport Loading from '@/components/loading'\n\nconst Login = React.lazy(() => import('./login'))\n\nconst ForgetPassword = React.lazy(() => import('./forget-password'))\n\nexport default function LoginRoute() {\n  return (\n    <React.Suspense fallback={<Loading />}>\n      <Switch>\n        <Route exact path=\"/\" component={Login} />\n        <Route path=\"/login\" component={Login} />\n        <Route path=\"/forget-password\" component={ForgetPassword} />\n      </Switch>\n    </React.Suspense>\n  )\n}\n","import React from 'react'\nimport { Switch, Route } from 'react-router-dom'\nimport { Layout } from 'antd'\nimport ErrorBoundary from '@/components/error-boundary'\nimport Exception from '@/components/exception'\nimport Loading from '@/components/loading'\nimport AppHeader from '@/components/app-header'\nimport { useRoutes, RouteItem } from '@/constants/routes'\nimport Home from '@/containers/home'\nimport Login from '@/containers/login'\nimport useAuth from '@/hooks/useAuth'\n\nfunction App() {\n  const { isAuthenticated } = useAuth()\n\n  const routes = useRoutes()\n\n  const renderRouteItem = React.useCallback((item: RouteItem) => {\n    const path = `${item.path}${item.param ? `/${item.param}` : ''}`\n\n    return (\n      <Route\n        exact\n        key={item.id}\n        path={path}\n        component={\n          item.component ? item.component : () => <h1> {item.title} </h1>\n        }\n      />\n    )\n  }, [])\n\n  const renderRoute: any = React.useCallback(\n    (data: RouteItem[]) => {\n      return data.map((item: RouteItem) => {\n        return [\n          renderRouteItem(item),\n          item.children && renderRoute(item.children),\n          item.hide && renderRoute(item.hide),\n        ]\n      })\n    },\n    [renderRouteItem]\n  )\n\n  return (\n    <ErrorBoundary>\n      {!isAuthenticated && <Login />}\n      {isAuthenticated && (\n        <Layout>\n          <AppHeader />\n          <React.Suspense fallback={<Loading />}>\n            <Switch>\n              <Route exact path=\"/\" component={Home} />\n              {renderRoute(routes)}\n              <Route component={Exception} />\n            </Switch>\n          </React.Suspense>\n        </Layout>\n      )}\n    </ErrorBoundary>\n  )\n}\n\nexport default App\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import './bootstrap'\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport { Router } from 'react-router-dom'\nimport { DndProvider } from 'react-dnd'\nimport { HTML5Backend } from 'react-dnd-html5-backend'\nimport { RecoilRoot, MutableSnapshot } from 'recoil'\nimport { ConfigProvider } from 'antd'\nimport zhTW from 'antd/lib/locale/zh_TW'\nimport { ThemeProvider } from 'styled-components'\nimport { SWRConfig } from 'swr'\nimport request from '@/utils/request'\nimport history from '@/utils/history'\nimport { createPack } from '@/utils/createPack'\nimport { redirect } from '@/utils/webHelper'\nimport { AuthProvider } from '@/hooks/useAuth'\nimport App from './app'\nimport theme from './theme'\nimport * as serviceWorker from './serviceWorker'\nimport './index.css'\n\nredirect()\n\nconst initializeState = ({ set }: MutableSnapshot) => {\n  // set('reportTemplateListState', Store.get('reportTemplateListState'))\n  // for(const [key, value] of Storage.entries()) {\n  //   set(myLookupOfAtomWithKey(key), JSON.parse(value).value);\n  // }\n}\n\nconst EnhancedApp = createPack(\n  <RecoilRoot initializeState={initializeState} />,\n  <ThemeProvider theme={theme} />,\n  <ConfigProvider locale={zhTW} />,\n  <AuthProvider />,\n  <SWRConfig value={{ suspense: true, fetcher: request }} />,\n  <DndProvider backend={HTML5Backend} />,\n  <Router history={history} />\n)\n\n// ReactDOM.unstable_createRoot(document.getElementById('root') as any).render(\n//   <EnhancedApp>\n//     <App />\n//   </EnhancedApp>\n// )\nReactDOM.render(\n  <EnhancedApp>\n    <App />\n  </EnhancedApp>,\n  document.getElementById('root')\n)\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister()\n","import React from 'react'\nimport { Checkbox } from 'antd'\nimport { CheckboxProps } from 'antd/lib/checkbox'\nimport styled from 'styled-components'\nimport { RefProps } from '@/constants/types'\n\nconst CheckboxGroup = Checkbox.Group\n\nconst StyledCheckbox = styled(Checkbox)`\n  .ant-checkbox-checked .ant-checkbox-inner {\n    background-color: ${p => p.theme.primary};\n    border-color: ${p => p.theme.primary};\n  }\n\n  &.ant-checkbox-wrapper:hover .ant-checkbox-inner,\n  .ant-checkbox:hover .ant-checkbox-inner,\n  .ant-checkbox-input:focus + .ant-checkbox-inner {\n    border-color: ${p => p.theme.primary};\n  }\n\n  .ant-checkbox-checked .ant-checkbox-inner:after {\n    border: 2px solid #fff;\n    border-top: 0;\n    border-left: 0;\n  }\n\n  .ant-checkbox-inner {\n    border: 1px solid ${p => p.theme.secondary};\n  }\n\n  &.is--normal {\n    font-size: 14px !important;\n    font-weight: normal !important;\n  }\n`\n\ntype Props = RefProps & CheckboxProps\n\nconst CheckboxComponent: React.ElementType<Props> = React.forwardRef<\n  typeof StyledCheckbox,\n  Props\n>(({ ...props }, ref) => <StyledCheckbox forwardRef={ref} {...props} />)\n\nCheckboxComponent.displayName = 'Checkbox'\n\nexport { CheckboxComponent as Checkbox, CheckboxGroup }\n\nexport default CheckboxComponent\n","import React from 'react'\nimport { atom, useRecoilState, selectorFamily } from 'recoil'\nimport {\n  find,\n  mergeAll,\n  map,\n  values,\n  head,\n  pathOr,\n  flatten,\n  length,\n  of,\n} from 'ramda'\nimport Store from 'store'\nimport { setComponent } from '@/components/snippet-template-list'\nimport { Snippets, SnippetProps, ReportTemplate } from '@/constants/types'\n\nconst { compose } = require('ramda')\n\n// 模版分類\nconst snippetCategoryOfReport = {\n  PATHOLOGICAL_DIAGNOSIS: 'Pathological diagnosis',\n  GROSS: 'Gross',\n  MICROSCOPY: 'Microscopy',\n  NOTES: 'Notes',\n  REFERENCES: 'References',\n}\n\nconst fakeReportTemplateList: ReportTemplate[] = setComponent(\n  Store.get('reportTemplateListState')\n)\n\nconst defaultSnippetsOfReport = compose(\n  mergeAll,\n  map((key: string) => ({ [key]: [] })),\n  values\n)(snippetCategoryOfReport)\n\nconst reportTemplateListState = atom({\n  key: 'reportTemplateListState',\n  default: fakeReportTemplateList,\n})\n\nexport const snippetsOfReportState = selectorFamily<\n  ReportTemplate,\n  React.Key | undefined\n>({\n  key: 'reportSnippetsState',\n  get: id => ({ get }) => {\n    return compose(\n      // pathOr(defaultSnippetsOfReport, ['setting']),\n      find((x: ReportTemplate) => `${x.id}` === `${id}`)\n    )(setComponent(get(reportTemplateListState)))\n  },\n})\n\nconst reportPreviewState = atom({\n  key: 'reportPreviewState',\n  default: false,\n})\n\nconst categoryState = atom<string>({\n  key: 'categoryState',\n  default: compose(head, values)(snippetCategoryOfReport),\n})\n\n// 報告模版清單\nexport function useReportTemplates() {\n  const [reportTemplates] = useRecoilState(reportTemplateListState)\n\n  return {\n    content: reportTemplates,\n    total: length(reportTemplates),\n  }\n}\n\n// 報告模版清單\nexport function useReportTemplateState() {\n  return useRecoilState(reportTemplateListState)\n}\n\n// 模版報告資料\nexport function useReportTemplate({\n  id,\n  data,\n}: {\n  id?: React.Key\n  data?: any\n}) {\n  const [reportTemplateList] = useRecoilState(reportTemplateListState)\n\n  const [reportTemplate, setReportTemplate] = React.useState<ReportTemplate>({\n    setting: defaultSnippetsOfReport,\n  } as any)\n\n  // const [reportTemplate] = useRecoilState<ReportTemplate>(\n  //   snippetsOfReportState(id) as any\n  // )\n\n  React.useEffect(() => {\n    if (data?.id) {\n      setReportTemplate(compose(head, setComponent, of)(data))\n    }\n  }, [data])\n\n  React.useEffect(() => {\n    if (id) {\n      setReportTemplate(\n        compose(find((x: ReportTemplate) => `${x.id}` === `${id}`))(\n          setComponent(reportTemplateList)\n        )\n      )\n    }\n  }, [id]) // eslint-disable-line\n\n  let _snippetList = pathOr(defaultSnippetsOfReport, ['setting'])(\n    reportTemplate\n  )\n\n  React.useEffect(() => {\n    setSnippetList(_snippetList)\n  }, [JSON.stringify(_snippetList)]) // eslint-disable-line\n\n  const [snippetList, setSnippetList] = React.useState<Snippets>(_snippetList)\n\n  let snippetById: { [key: string]: SnippetProps } = {}\n\n  return {\n    reportTemplate,\n    snippetList,\n    setSnippetList,\n    total: compose(length, flatten, values)(snippetList),\n    snippetById: compose(\n      map((x: SnippetProps) => (snippetById[x.id] = x)),\n      flatten,\n      values\n    )(snippetList),\n  }\n}\n\n// 切換編輯/檢視模式\nexport function useReportPreview() {\n  const [isPreview, setIsPreview] = useRecoilState(reportPreviewState)\n\n  return [isPreview, () => setIsPreview(prev => !prev)] as [boolean, () => void]\n}\n\n// 更方便切換編輯/檢視模式\nexport function useToggleReportPreview(state: boolean = false) {\n  const [isPreview, setIsPreview] = useRecoilState(reportPreviewState)\n\n  React.useEffect(() => {\n    setIsPreview(state)\n\n    return () => {\n      setIsPreview(false)\n    }\n  }, [state]) // eslint-disable-line\n\n  return [isPreview, () => setIsPreview(prev => !prev)] as [boolean, () => void]\n}\n\n// 編輯報告/模版時，當前的分類\nexport function useCurrentCategoryOfSnippet() {\n  return useRecoilState(categoryState)\n}\n","import { History, createHashHistory } from 'history'\nimport { envStore } from '@/constants/env'\n\nconst history = createHashHistory({ basename: envStore.appBaseName })\n\nexport default history as NonNullable<History>\n","import { Collapse } from 'antd'\nimport styled from 'styled-components'\n\nconst borderRadius = '8px'\n\nconst StyledCollapse = styled(Collapse)`\n  &.ant-collapse {\n    border-radius: ${borderRadius};\n    border-bottom: none;\n\n    > .ant-collapse-item > .ant-collapse-header {\n      padding-left: 0;\n      background: ${p => p.theme.primary};\n      color: #fff;\n    }\n\n    &.header-pl-clear > .ant-collapse-item > .ant-collapse-header {\n      padding-left: 16px;\n    }\n\n    > .ant-collapse-item:first-child > .ant-collapse-header {\n      border-top-left-radius: ${borderRadius};\n      border-top-right-radius: ${borderRadius};\n    }\n\n    > .ant-collapse-item:last-child {\n      border-bottom: none;\n    }\n\n    > .ant-collapse-item:last-child > .ant-collapse-content {\n      border-bottom-left-radius: ${borderRadius};\n      border-bottom-right-radius: ${borderRadius};\n    }\n\n    > .ant-collapse-item.ant-collapse-item-active:last-child {\n      border-bottom: 1px solid #d9d9d9;\n    }\n\n    > .ant-collapse-item:not(.ant-collapse-item-active):last-child\n      > .ant-collapse-header {\n      border-bottom-left-radius: ${borderRadius};\n      border-bottom-right-radius: ${borderRadius};\n    }\n  }\n`\n\nexport default StyledCollapse\n","import React from 'react'\nimport { ModalProps as AntModalProps } from 'antd/lib/modal'\nimport Modal from '@/components/modal'\nimport Button from '@/components/button'\n\nexport interface ModalProps<T = any>\n  extends Omit<AntModalProps, 'onOk' | 'onCancel'> {\n  item?: T\n  onOk?: (data?: any) => void\n  onCancel: () => void\n  children?: React.ReactNode\n}\n\nfunction TemplateModal<T = any>({\n  onCancel,\n  onOk,\n  item,\n  children,\n  ...props\n}: ModalProps<T>) {\n  const handleOk = () => {\n    if (onOk) {\n      onOk()\n    }\n  }\n  return (\n    <Modal\n      visible\n      onCancel={onCancel}\n      width={650}\n      maskClosable={false}\n      keyboard={false}\n      footer={[\n        <Button\n          key=\"btn-cancel\"\n          color=\"outline\"\n          style={{ minWidth: 80, marginRight: 16 }}\n          onClick={onCancel}>\n          取消\n        </Button>,\n        <Button\n          key=\"btn-save\"\n          color=\"primary\"\n          style={{ minWidth: 80 }}\n          onClick={handleOk}>\n          儲存\n        </Button>,\n      ]}\n      {...props}>\n      {children}\n    </Modal>\n  )\n}\n\nexport { TemplateModal as Modal }\n\nexport default TemplateModal\n","import React from 'react'\nimport cx from 'classnames'\nimport { Card } from 'antd'\nimport { CardProps } from 'antd/lib/card'\nimport { FontColorsOutlined } from '@ant-design/icons'\nimport styled from 'styled-components'\nimport { useReportPreview } from '@/data/useReportTemplate'\n// import { isNil } from '@/utils/webHelper'\n\nconst StyledCard = styled(Card)`\n  &.ant-card {\n    border-radius: 10px;\n    border: none;\n    cursor: move;\n  }\n\n  .ant-card-head {\n    padding-left: 18px;\n    border-bottom: none;\n    color: ${p => p.theme.darkGrey};\n    font-size: 14px;\n    font-weight: 600;\n  }\n\n  &.ant-card-head--hide .ant-card-head {\n    display: none;\n  }\n\n  &.ant-card-body--hide {\n    .ant-card-head {\n      padding-bottom: 16px;\n      border-bottom: 1px dashed #f0f0f0;\n    }\n\n    .ant-card-body {\n      display: none;\n    }\n  }\n\n  &.is--preview .ant-card-head {\n    min-height: auto;\n  }\n\n  &.is--preview .ant-card-head-title {\n    padding-top: 0;\n  }\n\n  &.is--preview .ant-card-body {\n    padding-top: 12px;\n    padding-bottom: 8px;\n  }\n\n  .ant-card-head-title {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    padding-bottom: 0;\n  }\n\n  .ant-card-body {\n    padding-top: 6px;\n    padding-left: 26px;\n    padding-bottom: 20px;\n  }\n`\n\ninterface Props extends CardProps {\n  titleVisible?: boolean\n  bodyVisible?: boolean\n  onEdit?: () => void\n  onDelete?: () => void\n}\n\nfunction SnippetTemplateWrapper({\n  title,\n  children,\n  onDelete,\n  onEdit,\n  titleVisible = false,\n  bodyVisible = true,\n  ...props\n}: Props) {\n  const [isPreview] = useReportPreview()\n\n  return (\n    <StyledCard\n      title={\n        <div className=\"flex items-center\">\n          {!isPreview && <FontColorsOutlined className=\"mr-3\" />}\n          {title || '模版標題 (點鉛筆圖示可進行編輯)'}\n        </div>\n      }\n      className={cx({\n        // 'ant-card-head--hide': isNil(title) && !titleVisible,\n        'ant-card-body--hide': !bodyVisible,\n        // 'is--preview': isPreview,\n      })}\n      {...props}>\n      {children}\n    </StyledCard>\n  )\n}\n\nexport default SnippetTemplateWrapper\n","import React from 'react'\nimport { Form } from 'antd'\nimport { Input, TextArea } from '@/components/input'\nimport Checkbox from '@/components/checkbox'\nimport { Modal, ModalProps } from '@/components/snippet-template-modal'\nimport TemplateWrapper from '@/components/snippet-template-wrapper'\nimport { createFormItemLayout } from '@/utils/form'\nimport { ReportTemplateSetting, ReportTemplateProps } from '@/constants/types'\nimport { useUpdateSnippet } from '@/services/reportTemplate'\n\ninterface Setting extends ReportTemplateSetting {\n  defaultValue?: string\n  multipleLine?: boolean\n}\n\nexport default function SnippetTemplateInputText(props: ReportTemplateProps) {\n  const { editModalVisible, handleEditModalVisible, onUpdate, item } = props\n\n  const { setting, handleOk } = useUpdateSnippet<Setting>({ item, onUpdate })\n\n  const inputProps = {\n    bordered: false,\n    className: 'w-2/3',\n    placeholder: setting.tooltip || '輸入內容',\n    defaultValue: setting.defaultValue,\n  }\n\n  return (\n    <>\n      {editModalVisible && (\n        <InputTextModal\n          item={setting}\n          onCancel={handleEditModalVisible}\n          onOk={handleOk}\n        />\n      )}\n      <TemplateWrapper title={setting.text || ''}>\n        <Form.Item noStyle name={['data', item.id]}>\n          {setting.multipleLine ? (\n            <TextArea {...inputProps} autoSize={{ minRows: 3 }} />\n          ) : (\n            <Input {...inputProps} />\n          )}\n        </Form.Item>\n      </TemplateWrapper>\n    </>\n  )\n}\n\nfunction InputTextModal({\n  onOk,\n  onCancel,\n  item,\n  ...props\n}: ModalProps<Setting>) {\n  const [form] = Form.useForm()\n\n  const handleOk = () => {\n    form.validateFields().then(values => {\n      if (onOk) {\n        onOk(values)\n      }\n      onCancel()\n    })\n  }\n\n  return (\n    <Modal<Setting>\n      {...props}\n      title={\n        <>\n          <div>\n            Text\n            <div className=\"inline ml-2 text-sm text-gray-600\">\n              typically used for description something.\n            </div>\n          </div>\n        </>\n      }\n      onCancel={onCancel}\n      onOk={handleOk}>\n      <Form\n        {...createFormItemLayout(5, 16)}\n        labelAlign=\"left\"\n        form={form}\n        initialValues={item}>\n        <Form.Item label=\"Text\" name=\"text\">\n          <Input />\n        </Form.Item>\n        <Form.Item label=\"Default Value\" name=\"defaultValue\">\n          <Input />\n        </Form.Item>\n        <Form.Item label=\"Tooltip\" name=\"tooltip\">\n          <Input />\n        </Form.Item>\n        <Form.Item\n          label=\"Multiple Lines\"\n          name=\"multipleLine\"\n          valuePropName=\"checked\">\n          <Checkbox />\n        </Form.Item>\n      </Form>\n    </Modal>\n  )\n}\n","import React from 'react'\nimport { InputNumber } from 'antd'\nimport { InputNumberProps } from 'antd/lib/input-number'\nimport styled from 'styled-components'\nimport { RefProps } from '@/constants/types'\nimport { percent, currency, thosandSeprartor } from '@/utils/form'\n\ntype Props = RefProps & InputNumberProps & { bordered?: boolean }\n\nconst StyledInputNumber = styled(InputNumber).attrs({\n  min: 0 as any, // dont know why error\n})<Props>`\n  &.ant-input-number {\n    border-color: ${p => p.theme.primary};\n\n    ::placeholder {\n      color: red;\n    }\n  }\n\n  &.ant-input-number-focused,\n  &.ant-input-number:focus,\n  &.ant-input-number:hover {\n    border-color: ${p => p.theme.primary};\n  }\n\n  &.ant-input-number-focused:not(.ant-input-number-borderless),\n  &.ant-input-number:focus:not(.ant-input-number-borderless) {\n    box-shadow: 0 0 0 1px ${p => p.theme.primary};\n  }\n\n  &.ant-input-number-borderless,\n  &.ant-input-number-borderless:hover,\n  &.ant-input-number-borderless:focus,\n  &.ant-input-number-borderless-focused,\n  &.ant-input-number-borderless-disabled,\n  &.ant-input-number-borderless[disabled] {\n    border: none;\n    border-bottom: 1px solid ${p => p.theme.primary};\n  }\n`\n\nexport const ThousandSeprartorInput = React.forwardRef<\n  typeof InputNumber,\n  Props\n>(({ ...props }, ref) => (\n  <StyledInputNumber forwardRef={ref} {...props} {...thosandSeprartor} />\n))\n\nexport const CurrencyInput = React.forwardRef<typeof InputNumber, Props>(\n  ({ ...props }, ref) => (\n    <StyledInputNumber forwardRef={ref} {...props} {...currency} />\n  )\n)\n\nexport const PercentInput = React.forwardRef<typeof InputNumber, Props>(\n  ({ ...props }, ref) => (\n    <StyledInputNumber forwardRef={ref} {...props} {...percent} />\n  )\n)\n\nThousandSeprartorInput.displayName = 'ThousandSeprartorInput'\n\nCurrencyInput.displayName = 'CurrencyInput'\n\nPercentInput.displayName = 'PercentInput'\n\nexport { StyledInputNumber as InputNumber }\n\nexport default StyledInputNumber\n","import React from 'react'\nimport { Form } from 'antd'\nimport Input from '@/components/input'\nimport InputNumber from '@/components/input-number'\nimport { Modal, ModalProps } from '@/components/snippet-template-modal'\nimport TemplateWrapper from '@/components/snippet-template-wrapper'\nimport { createFormItemLayout } from '@/utils/form'\nimport { ReportTemplateSetting, ReportTemplateProps } from '@/constants/types'\nimport { useUpdateSnippet } from '@/services/reportTemplate'\n\ninterface Setting extends ReportTemplateSetting {\n  defaultValue?: number\n  max?: number\n  min?: number\n  units?: string\n}\n\nexport default function SnippetTemplateInputNumber(props: ReportTemplateProps) {\n  const { editModalVisible, handleEditModalVisible, item, onUpdate } = props\n\n  const { setting, handleOk } = useUpdateSnippet<Setting>({ item, onUpdate })\n\n  return (\n    <>\n      {editModalVisible && (\n        <InputNumberModal\n          item={setting}\n          onCancel={handleEditModalVisible}\n          onOk={handleOk}\n        />\n      )}\n      <TemplateWrapper title={setting.text || ''}>\n        <Form.Item noStyle name={['data', item.id]}>\n          <InputNumber\n            style={{ width: '33.333333%' }}\n            className=\"ant-input-number-borderless\"\n            defaultValue={setting.defaultValue}\n            min={setting.min}\n            max={setting.max}\n            formatter={value => `${setting.units || ''} ${value}`}\n            placeholder={setting.tooltip || '輸入數值'}\n          />\n        </Form.Item>\n      </TemplateWrapper>\n    </>\n  )\n}\n\nfunction InputNumberModal({ onOk, onCancel, item, ...props }: ModalProps) {\n  const [form] = Form.useForm()\n\n  const handleOk = () => {\n    form.validateFields().then(values => {\n      if (onOk) {\n        onOk(values)\n      }\n      onCancel()\n    })\n  }\n\n  return (\n    <Modal\n      {...props}\n      title={\n        <>\n          <div>\n            Number\n            <div className=\"inline ml-2 text-sm text-gray-600\">\n              typically used for input number.\n            </div>\n          </div>\n        </>\n      }\n      onOk={handleOk}\n      onCancel={onCancel}>\n      <Form\n        {...createFormItemLayout(5, 16)}\n        labelAlign=\"left\"\n        form={form}\n        initialValues={item}>\n        <Form.Item label=\"Text\" name=\"text\">\n          <Input />\n        </Form.Item>\n        <Form.Item label=\"Default Value\" name=\"defaultValue\">\n          <Input />\n        </Form.Item>\n        <Form.Item label=\"Tooltip\" name=\"tooltip\">\n          <Input />\n        </Form.Item>\n        <Form.Item label=\"Minimum Value\" name=\"min\">\n          <InputNumber />\n        </Form.Item>\n        <Form.Item label=\"Maximum Value\" name=\"max\">\n          <InputNumber />\n        </Form.Item>\n        <Form.Item label=\"Units\" name=\"units\">\n          <Input />\n        </Form.Item>\n      </Form>\n    </Modal>\n  )\n}\n","// tslint:disable: quotemark no-implicit-dependencies no-shadowed-variable no-var-requires\nimport React from 'react'\nimport { TableProps } from 'antd/lib/table'\nimport { FormInstance } from 'antd/lib/form'\nimport Table from '@/components/table'\n\ntype EditableTableProps<T> = Omit<TableProps<T>, 'onChange'> & {\n  value?: T[]\n  form: FormInstance\n  onChange?(changedValue: T[] | null): void\n  onRowAdd: (form: FormInstance) => any\n  onRowDelete: (value: { id: React.Key; form: FormInstance }) => any\n}\n\nexport default function EditableTable<T = any>({\n  form,\n  value,\n  onChange,\n  onRowAdd,\n  onRowDelete,\n  ...props\n}: EditableTableProps<T>) {\n  const triggerChange = (changedValue: T[]) => {\n    if (onChange) {\n      onChange(changedValue)\n    }\n  }\n\n  const handleAdd = () => {\n    triggerChange(onRowAdd(form))\n  }\n\n  const handleDelete = (id: string) => {\n    triggerChange(onRowDelete({ id, form }))\n  }\n\n  return (\n    <Table\n      {...props}\n      rowKey=\"id\"\n      pagination={false}\n      size=\"small\"\n      dataSource={value as any}\n      onAddRowClick={handleAdd}\n      onDeleteRowClick={handleDelete}\n      editable={true}\n    />\n  )\n}\n","import React from 'react'\nimport { Form } from 'antd'\nimport { ColumnProps } from 'antd/lib/table'\nimport { FormInstance } from 'antd/lib/form'\nimport { concat, __, pathOr, invoker, filter } from 'ramda'\nimport Input from '@/components/input'\nimport Checkbox from '@/components/checkbox'\nimport EditableTable from '@/components/editable-table'\nimport { uuid } from '@/utils/webHelper'\nimport { createFormItemLayout } from '@/utils/form'\nimport { ReportTemplateSetting } from '@/constants/types'\nimport { Modal, ModalProps } from './snippet-template-modal'\nconst { compose } = require('ramda')\n\nexport interface Setting extends ReportTemplateSetting {\n  options?: Option[]\n}\n\nexport type Option = {\n  id: React.Key\n  text?: string\n  selected?: boolean\n  freetext?: boolean\n}\n\nexport const defaultValue: Setting = {\n  options: [\n    {\n      id: uuid(),\n      text: '預設選項 1',\n      selected: true,\n      freetext: false,\n    },\n    {\n      id: uuid(),\n      text: '預設選項 2',\n      selected: true,\n      freetext: false,\n    },\n    {\n      id: uuid(),\n      text: '預設選項 3',\n      selected: true,\n      freetext: false,\n    },\n  ],\n}\n\nexport function SnippetTemplateSelectionModal({\n  onCancel,\n  onOk,\n  item,\n  ...props\n}: ModalProps) {\n  const [form] = Form.useForm()\n\n  const handleOk = () => {\n    form.validateFields().then(values => {\n      if (onOk) {\n        onOk(values)\n      }\n      onCancel()\n    })\n  }\n\n  const handleRowAdd = (form: FormInstance) => {\n    return compose(\n      concat(__, [\n        {\n          id: uuid(),\n          text: undefined,\n          selected: true,\n          freetext: false,\n        },\n      ]),\n      pathOr([], ['options']),\n      invoker(0, 'getFieldsValue')()\n    )(form)\n  }\n\n  const handleRowDelete = ({\n    id,\n    form,\n  }: {\n    id: React.Key\n    form: FormInstance\n  }) => {\n    return compose(\n      filter((x: any) => x.id !== id),\n      pathOr([], ['options']),\n      invoker(0, 'getFieldsValue')()\n    )(form)\n  }\n\n  const columns: ColumnProps<Option>[] = [\n    {\n      title: '選項名稱',\n      render: (v, r, idx) => (\n        <Form.Item noStyle name={['options', idx, 'text']}>\n          <Input />\n        </Form.Item>\n      ),\n    },\n    {\n      title: '是否可選',\n      align: 'center',\n      render: (v, r, idx) => (\n        <Form.Item\n          noStyle\n          name={['options', idx, 'selected']}\n          valuePropName=\"checked\">\n          <Checkbox />\n        </Form.Item>\n      ),\n    },\n    {\n      title: '是否可輸入',\n      align: 'center',\n      render: (v, r, idx) => (\n        <Form.Item\n          noStyle\n          name={['options', idx, 'freetext']}\n          valuePropName=\"checked\">\n          <Checkbox />\n        </Form.Item>\n      ),\n    },\n  ]\n\n  return (\n    <Modal\n      {...props}\n      title={\n        <>\n          <div>Single Selection List</div>\n          <div className=\"mt-1 text-sm text-gray-600\">\n            Typically used for shorter lists so that all responses are visible\n            as radio buttons. Only allow a single selection.\n          </div>\n        </>\n      }\n      onCancel={onCancel}\n      onOk={handleOk}>\n      <Form\n        {...createFormItemLayout(3, 16)}\n        labelAlign=\"left\"\n        form={form}\n        initialValues={item}>\n        <Form.Item label=\"Text\" name=\"text\">\n          <Input />\n        </Form.Item>\n        <Form.Item label=\"Tooltip\" name=\"tooltip\">\n          <Input />\n        </Form.Item>\n        <Form.Item label=\"Options\" />\n        <Form.Item noStyle name=\"options\">\n          <EditableTable\n            columns={columns}\n            form={form}\n            onRowAdd={handleRowAdd}\n            onRowDelete={handleRowDelete}\n          />\n        </Form.Item>\n      </Form>\n    </Modal>\n  )\n}\n","import React from 'react'\nimport { Form } from 'antd'\nimport cx from 'classnames'\nimport { pathOr } from 'ramda'\nimport { Checkbox, CheckboxGroup } from '@/components/checkbox'\nimport Input from '@/components/input'\nimport TemplateWrapper from '@/components/snippet-template-wrapper'\nimport {\n  SnippetTemplateSelectionModal,\n  Setting,\n  Option,\n  defaultValue,\n} from '@/components/snippet-template-selection-modal'\nimport { mapIndexed } from '@/utils/webHelper'\nimport { ReportTemplateProps } from '@/constants/types'\nimport { useUpdateSnippet } from '@/services/reportTemplate'\nconst { compose } = require('ramda')\n\nfunction SnippetTemplateMultipleSelection(props: ReportTemplateProps) {\n  const { item, editModalVisible, handleEditModalVisible, onUpdate } = props\n\n  const { setting, handleOk } = useUpdateSnippet<Setting>({\n    item,\n    onUpdate,\n    defaultValue,\n  })\n\n  return (\n    <>\n      {editModalVisible && (\n        <SnippetTemplateSelectionModal\n          item={setting}\n          onCancel={handleEditModalVisible}\n          onOk={handleOk}\n          title={\n            <>\n              <div>Multiple Selection List</div>\n              <div className=\"mt-1 text-sm text-gray-600\">\n                typically used for shorter lists so that all responses are\n                visible as checkboxes. Allows Multiple selections.\n              </div>\n            </>\n          }\n        />\n      )}\n      <TemplateWrapper\n        title={setting.text || ''}\n        bodyStyle={{ paddingLeft: 36 }}>\n        <Form.Item noStyle name={['data', item.id]}>\n          <CheckboxGroup>\n            {compose(\n              mapIndexed((x: Option, idx: number) => (\n                <Checkbox\n                  key={x.id}\n                  className={cx('block ml-0', { 'mt-1': idx > 0 })}\n                  defaultChecked={false}\n                  value={`${idx}`}>\n                  {x.text}\n                  {x.freetext && (\n                    <Input\n                      bordered={false}\n                      size=\"small\"\n                      placeholder=\"輸入備註\"\n                      className=\"ml-4 w-1/3\"\n                    />\n                  )}\n                </Checkbox>\n              )),\n              pathOr([], ['options'])\n            )(setting)}\n          </CheckboxGroup>\n        </Form.Item>\n      </TemplateWrapper>\n    </>\n  )\n}\n\nexport default SnippetTemplateMultipleSelection\n","import React from 'react'\nimport cx from 'classnames'\nimport { Form } from 'antd'\nimport { pathOr } from 'ramda'\nimport Radio from '@/components/radio'\nimport Input from '@/components/input'\nimport TemplateWrapper from '@/components/snippet-template-wrapper'\nimport {\n  SnippetTemplateSelectionModal,\n  Setting,\n  Option,\n  defaultValue,\n} from '@/components/snippet-template-selection-modal'\nimport { mapIndexed } from '@/utils/webHelper'\nimport { ReportTemplateProps } from '@/constants/types'\nimport { useUpdateSnippet } from '@/services/reportTemplate'\nconst { compose } = require('ramda')\n\nfunction SnippetTemplateSingleSelection(props: ReportTemplateProps) {\n  const { item, editModalVisible, handleEditModalVisible, onUpdate } = props\n\n  const { setting, handleOk } = useUpdateSnippet<Setting>({\n    item,\n    onUpdate,\n    defaultValue,\n  })\n\n  return (\n    <>\n      {editModalVisible && (\n        <SnippetTemplateSelectionModal\n          item={setting}\n          onCancel={handleEditModalVisible}\n          onOk={handleOk}\n        />\n      )}\n      <TemplateWrapper\n        title={setting.text || ''}\n        bodyStyle={{ paddingLeft: 36 }}>\n        <Form.Item noStyle name={['data', item.id]}>\n          <Radio.Group>\n            {compose(\n              mapIndexed((x: Option, idx: number) => (\n                <Radio\n                  key={x.id}\n                  className={cx('block', { 'mt-1': idx > 0 })}\n                  defaultChecked={false}\n                  value={`${idx}`}>\n                  {x.text}\n                  {x.freetext && (\n                    <Input\n                      size=\"small\"\n                      bordered={false}\n                      placeholder=\"輸入備註\"\n                      className=\"ml-3 w-1/3\"\n                    />\n                  )}\n                </Radio>\n              )),\n              pathOr([], ['options'])\n            )(setting)}\n          </Radio.Group>\n        </Form.Item>\n      </TemplateWrapper>\n    </>\n  )\n}\n\nexport default SnippetTemplateSingleSelection\n","import React from 'react'\nimport { Form } from 'antd'\nimport Input from '@/components/input'\nimport DatePicker from '@/components/datepicker'\nimport { Modal, ModalProps } from '@/components/snippet-template-modal'\nimport TemplateWrapper from '@/components/snippet-template-wrapper'\nimport { createFormItemLayout } from '@/utils/form'\nimport { ReportTemplateProps } from '@/constants/types'\nimport { useUpdateSnippet } from '@/services/reportTemplate'\n\ntype Setting = {\n  text?: string\n  defaultValue?: moment.Moment\n  tooltip?: string\n}\n\nexport default function SnippetTemplateDate(props: ReportTemplateProps) {\n  const { editModalVisible, handleEditModalVisible, item, onUpdate } = props\n\n  const { setting, handleOk } = useUpdateSnippet<Setting>({ item, onUpdate })\n\n  return (\n    <>\n      {editModalVisible && (\n        <InputDateModal\n          item={setting}\n          onCancel={handleEditModalVisible}\n          onOk={handleOk}\n        />\n      )}\n      <TemplateWrapper title={setting.text || ''}>\n        <Form.Item noStyle name={['data', item.id]}>\n          <DatePicker\n            bordered={false}\n            className=\"w-1/3\"\n            placeholder={setting.tooltip || '選擇日期'}\n            defaultValue={setting.defaultValue}\n          />\n        </Form.Item>\n      </TemplateWrapper>\n    </>\n  )\n}\n\nfunction InputDateModal({\n  onOk,\n  onCancel,\n  item,\n  ...props\n}: ModalProps<Setting>) {\n  const [form] = Form.useForm()\n\n  const handleOk = () => {\n    form.validateFields().then(values => {\n      if (onOk) {\n        onOk(values)\n      }\n      onCancel()\n    })\n  }\n\n  return (\n    <Modal<Setting>\n      {...props}\n      title={\n        <>\n          <div>\n            Date\n            <div className=\"inline ml-2 text-sm text-gray-600\">\n              typically used for target date.\n            </div>\n          </div>\n        </>\n      }\n      onCancel={onCancel}\n      onOk={handleOk}>\n      <Form\n        {...createFormItemLayout(5, 16)}\n        labelAlign=\"left\"\n        form={form}\n        initialValues={item}>\n        <Form.Item label=\"Text\" name=\"text\">\n          <Input />\n        </Form.Item>\n        <Form.Item label=\"Default Value\" name=\"defaultValue\">\n          <DatePicker allowClear picker=\"date\" className=\"w-full\" />\n        </Form.Item>\n        <Form.Item label=\"Tooltip\" name=\"tooltip\">\n          <Input />\n        </Form.Item>\n      </Form>\n    </Modal>\n  )\n}\n","import React from 'react'\nimport { Form } from 'antd'\nimport Input from '@/components/input'\nimport { TimePicker } from '@/components/datepicker'\nimport { Modal, ModalProps } from '@/components/snippet-template-modal'\nimport TemplateWrapper from '@/components/snippet-template-wrapper'\nimport { createFormItemLayout } from '@/utils/form'\nimport { ReportTemplateSetting, ReportTemplateProps } from '@/constants/types'\nimport { useUpdateSnippet } from '@/services/reportTemplate'\n\ninterface Setting extends ReportTemplateSetting {\n  defaultValue?: moment.Moment\n}\n\nexport default function ReportTemplateTime(props: ReportTemplateProps) {\n  const { editModalVisible, handleEditModalVisible, item, onUpdate } = props\n\n  const { setting, handleOk } = useUpdateSnippet<Setting>({ item, onUpdate })\n\n  return (\n    <>\n      {editModalVisible && (\n        <InputTimeModal\n          item={setting}\n          onCancel={handleEditModalVisible}\n          onOk={handleOk}\n        />\n      )}\n      <TemplateWrapper title={setting.text || ''}>\n        <Form.Item noStyle name={['data', item.id]}>\n          <TimePicker\n            bordered={false}\n            className=\"w-1/3\"\n            placeholder={setting.tooltip || '選擇時間'}\n            defaultValue={setting.defaultValue}\n          />\n        </Form.Item>\n      </TemplateWrapper>\n    </>\n  )\n}\n\nfunction InputTimeModal({\n  onOk,\n  onCancel,\n  item,\n  ...props\n}: ModalProps<Setting>) {\n  const [form] = Form.useForm()\n\n  const handleOk = () => {\n    form.validateFields().then(values => {\n      if (onOk) {\n        onOk(values)\n      }\n      onCancel()\n    })\n  }\n\n  return (\n    <Modal<Setting>\n      {...props}\n      title={\n        <>\n          <div>\n            Time\n            <div className=\"inline ml-2 text-sm text-gray-600\">\n              typically used for target time.\n            </div>\n          </div>\n        </>\n      }\n      onCancel={onCancel}\n      onOk={handleOk}>\n      <Form\n        {...createFormItemLayout(5, 16)}\n        labelAlign=\"left\"\n        form={form}\n        initialValues={item}>\n        <Form.Item label=\"Text\" name=\"text\">\n          <Input />\n        </Form.Item>\n        <Form.Item label=\"Default Value\" name=\"defaultValue\">\n          <TimePicker allowClear format=\"HH:mm\" className=\"w-full\" />\n        </Form.Item>\n        <Form.Item label=\"Tooltip\" name=\"tooltip\">\n          <Input />\n        </Form.Item>\n      </Form>\n    </Modal>\n  )\n}\n","import React from 'react'\nimport { pathOr, map } from 'ramda'\nimport { Form } from 'antd'\nimport Select from '@/components/select'\nimport TemplateWrapper from '@/components/snippet-template-wrapper'\nimport {\n  SnippetTemplateSelectionModal,\n  Option,\n  defaultValue,\n} from '@/components/snippet-template-selection-modal'\nimport { ReportTemplateSetting, ReportTemplateProps } from '@/constants/types'\nimport { useUpdateSnippet } from '@/services/reportTemplate'\nconst { compose } = require('ramda')\n\ninterface Setting extends ReportTemplateSetting {\n  options?: Option[]\n  selectionType?: 'single' | 'multiple'\n}\n\nexport default function SnippetTemplateSelect(props: ReportTemplateProps) {\n  const { item, editModalVisible, handleEditModalVisible, onUpdate } = props\n\n  const { setting, handleOk } = useUpdateSnippet<Setting>({\n    item,\n    onUpdate,\n    defaultValue,\n  })\n\n  return (\n    <>\n      {editModalVisible && (\n        <SnippetTemplateSelectionModal\n          item={setting}\n          onCancel={handleEditModalVisible}\n          onOk={handleOk}\n          title={\n            <>\n              <div>Drop-down List</div>\n              <div className=\"mt-1 text-sm text-gray-600\">\n                typically used for lists of greater than 6 or 7 options.\n              </div>\n            </>\n          }\n        />\n      )}\n      <TemplateWrapper title={setting.text || ''}>\n        <Form.Item noStyle name={['data', item.id]}>\n          <Select\n            allowClear\n            bordered={false}\n            className=\"w-1/3\"\n            placeholder={setting.tooltip || '請選擇...'}>\n            {compose(\n              map((x: Option) => (\n                <Select.Option key={x.id} value={x.text as any}>\n                  {x.text}\n                </Select.Option>\n              )),\n              pathOr([], ['options'])\n            )(setting)}\n          </Select>\n        </Form.Item>\n      </TemplateWrapper>\n    </>\n  )\n}\n","import React from 'react'\nimport { Form } from 'antd'\nimport Input from '@/components/input'\nimport { Modal, ModalProps } from '@/components/snippet-template-modal'\nimport TemplateWrapper from '@/components/snippet-template-wrapper'\nimport { createFormItemLayout } from '@/utils/form'\nimport { useUpdateSnippet } from '@/services/reportTemplate'\nimport { ReportTemplateSetting, ReportTemplateProps } from '@/constants/types'\n\ninterface Setting extends ReportTemplateSetting {}\n\nexport default function TemplateSectionHeader(props: ReportTemplateProps) {\n  const { item, editModalVisible, handleEditModalVisible, onUpdate } = props\n\n  const { setting, handleOk } = useUpdateSnippet<Setting>({\n    item,\n    onUpdate,\n  })\n\n  return (\n    <>\n      {editModalVisible && (\n        <InputTextModal\n          item={setting}\n          onCancel={handleEditModalVisible}\n          onOk={handleOk}\n        />\n      )}\n      <TemplateWrapper\n        titleVisible\n        bodyVisible={false}\n        title={setting.text}\n        onEdit={handleEditModalVisible}></TemplateWrapper>\n    </>\n  )\n}\n\nfunction InputTextModal({\n  onOk,\n  onCancel,\n  item,\n  ...props\n}: ModalProps<Setting>) {\n  const [form] = Form.useForm()\n\n  const handleOk = () => {\n    form.validateFields().then(values => {\n      if (onOk) {\n        onOk(values)\n      }\n      onCancel()\n    })\n  }\n\n  return (\n    <Modal<Setting>\n      {...props}\n      title={\n        <>\n          <div>\n            Section Header\n            <div className=\"inline ml-2 text-sm text-gray-600\">\n              typically used for section.\n            </div>\n          </div>\n        </>\n      }\n      onCancel={onCancel}\n      onOk={handleOk}>\n      <Form\n        {...createFormItemLayout(5, 16)}\n        labelAlign=\"left\"\n        form={form}\n        initialValues={item}>\n        <Form.Item label=\"Text\" name=\"text\">\n          <Input />\n        </Form.Item>\n        <Form.Item label=\"Tooltip\" name=\"tooltip\">\n          <Input />\n        </Form.Item>\n      </Form>\n    </Modal>\n  )\n}\n","import React from 'react'\n\nfunction SnippetTemplateCloze() {\n  return <div></div>\n}\n\nlet input = `\n  <input\n    class=\"ant-input ant-input-sm ant-input-borderless\"\n    placeholder=\"\"\n    style=\"border: none; border-bottom: 1px solid #38a8a9; width: 70px;\"\n    type=\"text\"\n    value=\"\"\n    data-mce-style=\"border: none; border-bottom: 1px solid #38a8a9; width: 70px;\"\n  >\n`\n\nexport const html = `\n  <div>\n    The specimen is submitted in ${input} parts. \n    Part (A) consists of ${input} piece of liver tissue, \n    labelled ${input} , measuring ${input} cm and weighing ___ gm. \n    There is a solitary / are tumor mass(es), measuring up to ${input} cm, \n    located in ${input} lobe. \n    The cut sections show it is / they are golden yellow and firm. \n    (Foci of hemorrhage and necrosis are noted). \n    The hepatic surgical margin is free of tumor / very close to tumor / involved by tumor, \n    grossly. The remaining liver tissue shows unremarkable / micronodular cirrhosis (all less than 3mm) / macronodular cirrhosis (greater than 3mm). \n    Part (B) consists of ${input} pieces of grayish white soft tissue, labelled ${input} , \n    measuring up to ${input} cm. Representative parts are embedded in ${input} blocks. \n    (Block A~B: cut margin, C~E: tumor, F: non-neoplastic liver)\n  </div>\n`\n\nexport const Component = SnippetTemplateCloze\n\nexport default SnippetTemplateCloze\n","import { map, mergeAll, pathOr, path, keys } from 'ramda'\nimport {\n  CalendarOutlined,\n  ClockCircleOutlined,\n  OrderedListOutlined,\n  UnorderedListOutlined,\n  FontSizeOutlined,\n  DatabaseOutlined,\n  NumberOutlined,\n  BoldOutlined,\n  FontColorsOutlined,\n} from '@ant-design/icons'\nimport { uuid } from '@/utils/webHelper'\nimport TemplateInputText from '@/components/snippet-template-input-text'\nimport TemplateInputNumber from '@/components/snippet-template-input-number'\nimport TemplateMultipleSelection from '@/components/snippet-template-multiple-selection'\nimport TemplateSingleSelection from '@/components/snippet-template-single-selection'\nimport TemplateDate from '@/components/snippet-template-date'\nimport TemplateTime from '@/components/snippet-template-time'\nimport TemplateSelect from '@/components/snippet-template-select'\nimport TempldateSectionHeader from '@/components/snippet-template-section-header'\nimport * as Cloze from '@/components/snippet-template-cloze'\nimport { SnippetProps, ReportTemplate } from '@/constants/types'\nconst { compose } = require('ramda')\n\ninterface ReportTemplateListItem {\n  id: React.Key\n  type: string\n  name: string\n  Component: React.Component\n  inline: boolean\n}\n\nconst reportTemplateList = [\n  {\n    id: uuid(),\n    type: 'TemplateSectionHeader',\n    componentType: 'header',\n    name: 'Section Header',\n    inline: false,\n    icon: BoldOutlined,\n    Component: TempldateSectionHeader,\n  },\n  {\n    id: uuid(),\n    type: 'TemplateInputText',\n    name: 'Text',\n    inline: false,\n    icon: FontSizeOutlined,\n    Component: TemplateInputText,\n  },\n  {\n    id: uuid(),\n    type: 'TemplateInputNumber',\n    name: 'Number',\n    inline: false,\n    icon: NumberOutlined,\n    Component: TemplateInputNumber,\n  },\n  {\n    id: uuid(),\n    type: 'TemplateSelect',\n    name: 'Drop-down List',\n    inline: false,\n    icon: DatabaseOutlined,\n    Component: TemplateSelect,\n  },\n  {\n    id: uuid(),\n    type: 'TemplateMultipleSelection',\n    name: 'Multiple Selection List',\n    inline: false,\n    icon: UnorderedListOutlined,\n    Component: TemplateMultipleSelection,\n  },\n  {\n    id: uuid(),\n    type: 'TemplateSingleSelection',\n    name: 'Single Selection List',\n    inline: false,\n    icon: OrderedListOutlined,\n    Component: TemplateSingleSelection,\n  },\n  {\n    id: uuid(),\n    type: 'TemplateDate',\n    name: 'Date',\n    inline: false,\n    icon: CalendarOutlined,\n    Component: TemplateDate,\n  },\n  {\n    id: uuid(),\n    type: 'TemplateTime',\n    name: 'Time',\n    inline: false,\n    icon: ClockCircleOutlined,\n    Component: TemplateTime,\n  },\n  {\n    id: uuid(),\n    type: 'TemplateCloze',\n    name: 'Cloze',\n    inline: true,\n    icon: FontColorsOutlined,\n    html: Cloze.html,\n    Component: Cloze.Component,\n  },\n]\n\nexport const reportTemplateById = compose(\n  mergeAll,\n  map((x: ReportTemplateListItem) => ({ [x.type]: x }))\n)(reportTemplateList)\n\nexport const setComponent = compose(\n  map((x: ReportTemplate) => ({\n    ...x,\n    setting: compose(\n      mergeAll,\n      map((key: string) => ({\n        [key]: compose(\n          map((s: SnippetProps) => ({\n            ...s,\n            Component: path([s.type, 'Component'])(reportTemplateById),\n          })),\n          pathOr([], ['setting', key])\n        )(x),\n      })),\n      keys,\n      pathOr({}, ['setting'])\n    )(x),\n  })),\n  pathOr([], [])\n)\n\nexport default reportTemplateList\n","export { default } from '../theme'\n","import React from 'react'\nimport { Radio } from 'antd'\nimport { RadioProps } from 'antd/lib/radio'\nimport styled from 'styled-components'\n\nconst StyledRadio = styled(Radio)`\n  &.ant-radio-wrapper {\n    color: ${p => p.theme.darkGrey};\n\n    span.ant-radio + * {\n      padding-left: 16px;\n    }\n\n    .ant-radio-inner,\n    .ant-radio-checked .ant-radio-inner {\n      border-color: ${p => p.theme.primary};\n    }\n\n    .ant-radio-inner::after {\n      background: ${p => p.theme.primary};\n    }\n\n    &:hover,\n    .ant-radio:hover .ant-radio-inner,\n    .ant-radio-input:focus + .ant-radio-inner {\n      border-color: ${p => p.theme.primary};\n    }\n  }\n`\n\ninterface Props extends RadioProps {\n  css?: React.CSSProperties\n}\n\nclass RadioComponent extends React.Component<Props, any> {\n  public static Group = Radio.Group\n\n  public static displayName = 'Radio'\n\n  public render() {\n    return <StyledRadio {...this.props} />\n  }\n}\n\nexport default RadioComponent\n","import React from 'react'\nimport { Select } from 'antd'\nimport { SelectProps } from 'antd/lib/select'\nimport styled from 'styled-components'\n\nconst StyledSelect: any = styled(Select)`\n  &.ant-select {\n    &.ant-select-single:not(.ant-select-customize-input) .ant-select-selector,\n    .ant-select-selection:hover,\n    .ant-select-selection:active,\n    .ant-select-selection:focus {\n      border-color: ${p => p.theme.primary};\n    }\n\n    .ant-select-selection {\n      border-color: ${p => p.theme.secondary};\n    }\n\n    .ant-select-selection:active,\n    .ant-select-selection:focus {\n      box-shadow: none;\n    }\n\n    .ant-select-arrow {\n      color: ${p => p.theme.primary};\n    }\n\n    .ant-select-arrow-icon {\n      position: relative;\n      top: -1px;\n      font-size: 14px;\n    }\n\n    &.ant-select-borderless .ant-select-selector {\n      position: relative;\n      bottom: 1px;\n      border: 0;\n      border-bottom: 1px solid ${p => p.theme.primary} !important;\n      border-bottom-left-radius: 0;\n      border-bottom-right-radius: 0;\n    }\n  }\n\n  &.ant-select.is--outline {\n    > .ant-select-selector {\n      background: transparent;\n      border: 1px solid #fff;\n      color: #fff;\n\n      &:active,\n      &:focus,\n      &:hover {\n        border: 1px solid #fff;\n      }\n    }\n\n    .ant-select-selection-placeholder,\n    .ant-select-arrow {\n      color: #fff;\n    }\n\n    .ant-select-selection-placeholder {\n      opacity: 1;\n      left: 30%;\n    }\n  }\n\n  &.ant-select.is--transparent {\n    &.ant-select-focused > .ant-select-selector {\n      border: 1px solid #666a8f;\n    }\n\n    > .ant-select-selector {\n      background: transparent;\n      border: 1px solid #666a8f;\n      color: #a9b6d8;\n\n      &:active,\n      &:focus,\n      &:hover {\n        border: 1px solid #666a8f;\n      }\n    }\n\n    .ant-select-arrow {\n      color: #a9b6d8;\n    }\n  }\n`\n\nclass SelectComponent<T = any> extends React.Component<SelectProps<T>, any> {\n  public static Option = Select.Option\n\n  public static displayName = 'Select'\n\n  render() {\n    return <StyledSelect {...this.props}>{this.props.children}</StyledSelect>\n  }\n}\n\nexport default SelectComponent\n","import React from 'react'\nimport { atom, useRecoilState, useRecoilValue, useSetRecoilState } from 'recoil'\n\ntype BreadcrumbItem = {\n  href?: string\n  name: string\n}\n\nexport const breadcrumbState = atom<BreadcrumbItem[]>({\n  key: 'breadcrumbState',\n  default: [],\n})\n\nexport function useBreadcrumbState() {\n  const state = useRecoilState(breadcrumbState)\n  return state\n}\n\nexport function useBreadcrumb(items: BreadcrumbItem[] = []) {\n  const setter = useSetRecoilState(breadcrumbState)\n\n  React.useEffect(() => {\n    setter(items)\n  }, []) // eslint-disable-line\n}\n\nexport const headerContentState = atom<React.ReactNode>({\n  key: 'headerContentState',\n  default: null,\n})\n\nexport function useHeaderContentState() {\n  return useRecoilState(headerContentState)\n}\n\nexport function useHeaderContent(node?: React.ReactNode) {\n  const setter = useSetRecoilState(headerContentState)\n\n  React.useEffect(() => {\n    setter(node)\n\n    return () => {\n      setter(null)\n    }\n  }, [node]) // eslint-disable-line\n}\n\nexport function useHeaderContentValue() {\n  const value = useRecoilValue(headerContentState)\n  return value\n}\n","export default {\n  CARD: 'card',\n  BOARD: 'board',\n  SNIPPET: 'snippet',\n}\n","import React from 'react'\nimport { Modal } from 'antd'\nimport { ModalProps, ModalFuncProps } from 'antd/lib/modal'\n\nexport const modalDefaultProps = (\n  content?: React.ReactNode,\n  props?: ModalProps\n): ModalFuncProps => ({\n  content: (\n    <div\n      className=\"text-darkGrey font-medium\"\n      css={{ marginTop: 16, marginBottom: 30 }}>\n      {content}\n    </div>\n  ),\n  icon: null,\n  width: 440,\n  okText: '刪除',\n  cancelText: '取消',\n  centered: true,\n  // maskStyle: {\n  //   background: theme.modal.maskDarken,\n  // },\n  autoFocusButton: null,\n  okButtonProps: {\n    className: 'c-btn is--danger',\n    style: { minWidth: 80, marginRight: 24 },\n  },\n  cancelButtonProps: {\n    className: 'c-btn is--outline mr-0 float-right',\n    style: { minWidth: 80 },\n  },\n  ...props,\n})\n\nexport const success = ({\n  onOk,\n  onCancel,\n  content = '資料已儲存',\n  ...props\n}: ModalFuncProps) => {\n  Modal.info({\n    ...modalDefaultProps(),\n    ...props,\n    onOk: () => {\n      if (onOk) {\n        onOk()\n      }\n    },\n    onCancel() {\n      if (onCancel) {\n        onCancel()\n      }\n    },\n  })\n}\n\nexport const confirm = ({\n  onOk,\n  onCancel,\n  content = '刪除後將無法還原，確認繼續？',\n  ...props\n}: ModalFuncProps) => {\n  Modal.confirm({\n    ...modalDefaultProps(content),\n    ...props,\n    onOk: () => {\n      if (onOk) {\n        onOk()\n      }\n    },\n    onCancel() {\n      if (onCancel) {\n        onCancel()\n      }\n    },\n  })\n}\n","import React from 'react'\nimport styled, { css } from 'styled-components'\nimport { DatePicker, TimePicker } from 'antd'\nimport { DatePickerProps } from 'antd/lib/date-picker'\n\nconst borderLess = css`\n  &.ant-picker-borderless {\n    border: none;\n    border-bottom: 1px solid ${p => p.theme.primary} !important;\n    border-bottom-left-radius: 0;\n    border-bottom-right-radius: 0;\n  }\n\n  &.ant-picker-focused:not(.ant-picker-borderless) {\n    box-shadow: 0 0 0 1px ${p => p.theme.primary};\n  }\n`\n\nconst RangePicker = styled(DatePicker.RangePicker)`\n  &.ant-picker {\n    border: 1px solid ${p => p.theme.primary};\n\n    &:hover,\n    &:focus {\n      border-color: ${p => p.theme.secondary};\n    }\n\n    &.ant-picker-focused {\n      box-shadow: 0 0 0 1px ${p => p.theme.primary};\n    }\n  }\n`\n\nconst StyledDatePicker: any = styled(DatePicker)`\n  &.ant-picker {\n    border: 1px solid ${p => p.theme.primary};\n\n    &:hover,\n    &:focus {\n      border-color: ${p => p.theme.secondary};\n    }\n\n    .ant-picker-suffix {\n      color: ${p => p.theme.primary};\n    }\n\n    ${borderLess};\n  }\n`\n\nconst StyledTimePicker = styled(TimePicker)`\n  &.ant-picker {\n    border: 1px solid ${p => p.theme.primary};\n\n    &:hover,\n    &:focus {\n      border-color: ${p => p.theme.secondary};\n    }\n\n    .ant-picker-suffix {\n      color: ${p => p.theme.primary};\n    }\n\n    ${borderLess};\n  }\n`\n\nfunction DatePickerComponent(props: DatePickerProps) {\n  return <StyledDatePicker {...props} />\n}\n\nexport {\n  DatePickerComponent as DatePicker,\n  RangePicker,\n  StyledTimePicker as TimePicker,\n}\n\nexport default DatePickerComponent\n","import React from 'react'\nimport { includes, pathOr } from 'ramda'\nimport { XYCoord } from 'react-dnd'\nimport { isNil, mapIndexed } from '@/utils/webHelper'\nimport Snippet from '@/components/snippet'\nimport { SnippetProps } from '@/constants/types'\nconst { compose } = require('ramda')\n\n/* prettier-ignore */\nconst REPORT_TEMPLATE_BUILDER_CLASSNAME = 'report-template-builder__main-content'\nconst UI_DRAGGABLE_CLASSNAME = 'ui-draggable'\n\nconst hasClassName = (nodes: Element[], className: string) => {\n  return nodes.find(\n    n => !isNil(n.className) && includes(className)(n.className)\n  )\n}\n\nexport function canMoveSnippet(\n  element: Element | null,\n  className = REPORT_TEMPLATE_BUILDER_CLASSNAME\n) {\n  let elem = element\n\n  const nodes: Element[] = []\n  nodes.push(elem as Element)\n\n  while (elem?.parentNode) {\n    nodes.unshift(elem.parentNode as Element)\n    elem = elem.parentNode as Element\n  }\n\n  if (\n    hasClassName(nodes, 'report-template-builder-contentarea--fixed-layout') ||\n    hasClassName(nodes, 'snippet-drawer-menu')\n  ) {\n    return false\n  }\n  if (\n    hasClassName(nodes, className) ||\n    hasClassName(nodes, UI_DRAGGABLE_CLASSNAME)\n  ) {\n    return true\n  }\n\n  return false\n}\n\nfunction findSnippet(\n  element: HTMLElement,\n  className = UI_DRAGGABLE_CLASSNAME\n): HTMLElement | null {\n  if (element.classList.contains(className)) {\n    return element\n  }\n  return element.parentElement && findSnippet(element.parentElement, className)\n}\n\nexport function getPlaceHolderIndex(clientOffset: XYCoord) {\n  const hoverElement = document.elementFromPoint(clientOffset.x, clientOffset.y)\n\n  // find ui-draggable classname\n  const overSnippet = findSnippet(hoverElement as NonNullable<HTMLElement>)\n\n  const snippetIndex = overSnippet && overSnippet.dataset.index\n  const placeholderIndex = overSnippet ? Number(overSnippet.dataset.index) : -1\n\n  const isOverSnippet = !isNil(snippetIndex)\n\n  return {\n    overSnippet,\n    placeholderIndex,\n    isOverSnippet: isOverSnippet,\n  }\n}\n\nexport function renderSnippets(props: { [key: string]: any } = {}) {\n  return (snippetList?: SnippetProps[]) =>\n    compose(\n      mapIndexed((item: SnippetProps, idx: number) => (\n        <Snippet\n          {...props}\n          key={item.id}\n          wrapperId={`${item.id}`}\n          item={item}\n          draggable={false}\n          tabSize={item.tabSize}>\n          {item.inline ? (\n            <div\n              id={`${item.id}`}\n              className={`${item.id}`}\n              css={{ padding: 16 }}\n              dangerouslySetInnerHTML={{ __html: item.html }}\n            />\n          ) : (\n            <item.Component\n              id={item.id}\n              className={item.id}\n              item={item}\n              index={idx}\n            />\n          )}\n        </Snippet>\n      )),\n      pathOr([], [])\n    )(snippetList)\n}\n","import React from 'react'\nimport { atom, useRecoilState } from 'recoil'\nimport Store from 'store'\nimport { setComponent } from '@/components/snippet-template-list'\n// const { compose } = require('ramda')\n\nexport const reportListState = atom({\n  key: 'reportListState',\n  default: setComponent(Store.get('reportListState') || []),\n})\n\n// 輸入報告清單\nexport function useReportList() {\n  return useRecoilState(reportListState)\n}\n\nexport function useReportItem(id: string) {\n  const [reportList] = useRecoilState(reportListState)\n\n  const [data, setData] = React.useState<any>()\n\n  React.useEffect(() => {\n    setData(reportList.find((x: any) => x.id === id))\n  }, [id]) // eslint-disable-line\n\n  return data\n}\n","import {\n  compose,\n  ifElse,\n  invoker,\n  path,\n  identity,\n  includes,\n  always,\n  T,\n  join,\n  map,\n  filter,\n  keys,\n} from 'ramda'\nimport { isNil } from '@/utils/webHelper'\nimport envStore from '@/constants/env'\nconst { cond } = require('ramda')\n\ntype RequestInit = {\n  body?: any\n  credentials?: RequestCredentials_\n  headers?: HeadersInit_\n  integrity?: string\n  keepalive?: boolean\n  method?: string\n  mode?: RequestMode_\n  referrer?: string\n  window?: any\n  errorMsg?: boolean\n  onCompleted?: (data: any) => any\n  onError?: (err: Error) => any\n}\n\nconst contentTypeIs = (s: string) => {\n  return compose(\n    ifElse(isNil, identity, (c = '') => c.includes(s)),\n    invoker(1, 'get')('content-type'),\n    path(['headers'])\n  )\n}\n\nexport function toQueryString(\n  paramsObject: {\n    [key: string]: any\n  } = {}\n) {\n  if (!paramsObject) {\n    return ''\n  }\n\n  return compose(\n    join('&'),\n    map((key: string) =>\n      Array.isArray(paramsObject[key])\n        ? // convert to key=val1,val2,val3 string\n          `${key}=${paramsObject[key]\n            .map((val: string | number) => `${encodeURIComponent(val)}`)\n            .join(',')}`\n        : // convert to key=val string\n          `${key}=${encodeURIComponent(paramsObject[key])}`\n    ),\n    filter(\n      (key: string) =>\n        paramsObject[key] !== '' &&\n        paramsObject[key] !== null &&\n        typeof paramsObject[key] !== 'undefined'\n    ),\n    keys\n  )(paramsObject)\n}\n\nexport const post = (url: string, options: RequestInit) =>\n  fetch(url, { ...options, method: 'POST' })\n\nexport function request(\n  url: string,\n  {\n    body,\n    headers,\n    errorMsg = true,\n    onCompleted,\n    onError,\n    ...options\n  }: RequestInit = {}\n) {\n  const fullUrl = cond([\n    [includes('http'), always(url)],\n    [T, always(envStore.apiBaseUrl + url)],\n  ])(url)\n\n  return fetch(fullUrl, {\n    ...options,\n    body: body instanceof FormData ? body : JSON.stringify(body),\n    headers: {\n      'Content-Type': 'application/json',\n      Accept: 'application/json',\n      //   authorization: '',\n      ...headers,\n    },\n  })\n    .then(async (response: Response) => {\n      if (onCompleted) {\n        onCompleted(response)\n      }\n\n      if (contentTypeIs('application/json')(response)) {\n        const json = await response.json()\n\n        if (!response.ok) {\n          return Promise.reject(json)\n        }\n\n        return json\n      }\n\n      if (contentTypeIs('sheet')(response)) {\n        return await response.blob()\n      }\n\n      return response.text()\n    })\n    .catch((err: Error) => {\n      //   if (errorMsg) {\n      //     error(err)\n      //   }\n\n      if (onError) {\n        onError(err)\n      }\n\n      return err\n    })\n}\n\nexport default request\n","import React from 'react'\n// import { isNil } from 'ramda'\nimport Cookies from 'js-cookie'\nimport { User } from '@/services/authService'\n\nexport type LogoutFn = (params?: { onCompleted?: () => any }) => any\n\nexport type AuthContextType = {\n  logout: LogoutFn\n  isAuthenticated: boolean\n  user: User\n  setUser: React.Dispatch<React.SetStateAction<User | null>>\n  setIsAuthenticated: React.Dispatch<React.SetStateAction<boolean>>\n}\n\nexport const AuthContext = React.createContext<AuthContextType>({\n  isAuthenticated: false,\n  user: {} as User,\n  logout: () => ({}),\n  setUser: (_: React.SetStateAction<User | null>) => ({}),\n  setIsAuthenticated: (_: React.SetStateAction<boolean>) => ({}),\n})\n\nconst _user = Cookies.getJSON('vghks_user')\n// const _token = Cookies.get('vghks_token')\n\nexport function AuthProvider(props: any) {\n  const [isAuthenticated, setIsAuthenticated] = React.useState(\n    true // !isNil(_user) && !isNil(_token)\n  )\n\n  const [user, setUser] = React.useState<User>(_user)\n\n  const logout = React.useCallback(({ onCompleted } = {}) => {\n    Cookies.remove('vghks_token')\n    Cookies.remove('vghks_user')\n\n    setIsAuthenticated(false)\n\n    if (onCompleted) {\n      onCompleted()\n    }\n  }, [])\n\n  const value = React.useMemo(\n    () => ({\n      isAuthenticated,\n      setIsAuthenticated,\n      setUser,\n      logout,\n      user,\n    }),\n    [isAuthenticated, logout, user, setUser, setIsAuthenticated]\n  )\n\n  return <AuthContext.Provider value={value} {...props} />\n}\n\nexport function useAuth() {\n  const context = React.useContext(AuthContext)\n  if (context === undefined) {\n    throw new Error(`useAuth must be used within a AuthProvider`)\n  }\n  return context\n}\n\nexport default useAuth\n","export default function getDisplayName(Component: any) {\n  return (\n    Component.displayName ||\n    Component.name ||\n    (typeof Component === 'string' && Component.length > 0\n      ? Component\n      : 'Unknown')\n  )\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport {\n  EditOutlined,\n  DeleteOutlined,\n  RightOutlined,\n  LeftOutlined,\n} from '@ant-design/icons'\nimport cx from 'classnames'\nimport { Tooltip } from 'antd'\n\ntype Props = {\n  editable?: boolean\n  tabIndex: number\n  onEdit: () => void\n  onDelete: () => void\n  onShift: (shift: number) => void\n}\n\nconst ToolbarWrapper = styled.div`\n  position: absolute;\n  top: 8px;\n  right: 15px;\n  visibility: hidden;\n  transition: visibility 0s, opacity 0.3s, max-height 0.6s linear;\n  opacity: 0;\n  z-index: 1;\n\n  &.is--over {\n    visibility: visible;\n    transition: visibility 0s, opacity 0.3s, max-height 0.6s linear;\n    opacity: 0.8;\n  }\n`\n\nexport const SHIFT_TYPES = {\n  LEFT: -1,\n  RIGHT: 1,\n}\n\nexport default function SnippetToolbar({\n  tabIndex,\n  onEdit,\n  onDelete,\n  onShift,\n  editable = true,\n}: Props) {\n  const handleShift = (shift: number) => () => {\n    onShift(shift)\n  }\n\n  return (\n    <ToolbarWrapper\n      className={cx('text-primary', { 'is--over': tabIndex === 1 })}>\n      <Tooltip title=\"向左縮排\">\n        <LeftOutlined\n          className=\"mr-2 cursor-pointer\"\n          onClick={handleShift(SHIFT_TYPES.LEFT)}\n        />\n      </Tooltip>\n      <Tooltip title=\"向右縮排\">\n        <RightOutlined\n          className=\"mr-2 cursor-pointer\"\n          onClick={handleShift(SHIFT_TYPES.RIGHT)}\n        />\n      </Tooltip>\n      {editable && (\n        <Tooltip title=\"編輯\">\n          <EditOutlined className=\"mr-2 cursor-pointer\" onClick={onEdit} />\n        </Tooltip>\n      )}\n      <Tooltip title=\"刪除\">\n        <DeleteOutlined className=\"cursor-pointer\" onClick={onDelete} />\n      </Tooltip>\n    </ToolbarWrapper>\n  )\n}\n\nexport { SnippetToolbar }\n","/* eslint-disable no-undef */\nimport React from 'react'\nimport { clone, is, equals } from 'ramda'\nimport envStore from '@/constants/env'\nimport hoist from 'hoist-non-react-statics'\nimport getDisplayName from '@/utils/get-display-name'\n\nlet defaultConfig = {\n  block_formats: 'Heading 1=h1;Heading 2=h2;Heading 3=h3;Paragraph=p',\n  inline: true,\n  menubar: false,\n  external_plugins: {\n    dropdown: `${envStore.publicUrl}/js/tinymce/plugins/dropdown/plugin.js`,\n    inputtext: `${envStore.publicUrl}/js/tinymce/plugins/inputtext/plugin.js`,\n  },\n  fontsize_formats: '10px 12px 14px 16px 18px 20px 24px 32px 36px',\n  force_br_newlines: true,\n  force_p_newlines: false,\n  forced_root_block: 'div',\n  plugins: 'image textcolor lists emoticons link table media code',\n  tinymce: `${envStore.publicUrl}/js/tinymce/4.9.2/tinymce.min.js`,\n  link_title: false,\n  table_toolbar:\n    'tablemergecells tablesplitcells | tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol',\n  textcolor_cols: '5',\n  content_security_policy: '',\n  allow_unsafe_link_target: true,\n  relative_urls: false,\n  convert_urls: false,\n  valid_elements: '*[*]',\n  valid_children:\n    'h1[div|strong|b],h2[div|strong|b],h3[div|strong|b],p[div|strong|b]',\n  toolbar1:\n    'undo redo | custom-formatselect fontsizeselect | bold italic underline strikethrough forecolor removeformat | align numlist bullist outdent indent | link | upload-image image_options |fontawesome | inputtext | dropdown',\n}\n\nexport default function withTinyMCE(ComposedComponent) {\n  class withTinyMCE extends React.Component {\n    static displayName = `withTinyMCE(${getDisplayName(ComposedComponent)})`\n\n    static defaultProps = {\n      inline: false,\n    }\n\n    state = {\n      top: 0,\n      tabIndex: -1,\n      editor: null,\n      toolbarMouseOver: false,\n      toolbarVisible: false,\n    }\n\n    componentDidMount() {\n      if (this.props.inline) {\n        console.log(this.props.item)\n        this.initialize(this.props.item)\n      }\n    }\n\n    componentDidUpdate(prevProps, prevState) {\n      if (!this.props.isDragging && prevProps.isDragging) {\n        this.setState({ toolbarVisible: false })\n      }\n      if (!this.props.inline) {\n        return\n      }\n      if (!equals(this.props.id, prevProps.id)) {\n        this.initialize(this.props.item)\n      }\n      if (!equals(this.props.item?.html, prevProps.item?.html)) {\n        this.state.editor.setContent(this.props.item?.html)\n      }\n    }\n\n    initialize = snippet => {\n      if (this._get(snippet.id)) {\n        this.remove(snippet.id)\n      }\n\n      const _config = clone(snippet.config || defaultConfig)\n\n      tinymce.init({\n        ..._config,\n        selector: `#${snippet.id}`,\n        language_url: `${envStore.publicUrl}/js/tinymce/langs/zh_TW.js`,\n        content: snippet.html,\n        setup: editor => {\n          editor.on('blur', e => this.onEditorBlur(e))\n          editor.on('focus', e => this.onEditorFocus(e))\n\n          if (is(Function, _config.execInit)) {\n            _config.execInit(editor)\n          }\n\n          if (snippet.html) {\n            editor.on('init', () => editor.setContent(snippet.html))\n          }\n        },\n        init_instance_callback: editor => {\n          if (editor) {\n            this.setState({ editor })\n          }\n          editor.undoManager.add()\n        },\n      })\n    }\n\n    onEditorBlur = e => {\n      const { updateSnippet, item } = this.props\n      if (updateSnippet) {\n        updateSnippet({ ...item, html: e.target.getContent() })\n      }\n    }\n\n    // 這裡應該不用做事\n    onEditorFocus = () => {\n      // const { index } = this.props\n      // $(`.sort-item`).removeClass(s.focus)\n      // $(`.sort-item:nth-child(${index + 1})`).addClass(s.focus)\n    }\n\n    onClick = () => {\n      const { toolbarVisible } = this.state\n\n      if (!toolbarVisible) {\n        const snippetEl = document.getElementById(this.props.id)\n        const top = snippetEl.offsetTop + 30\n\n        this.setState({ toolbarVisible: true, tabIndex: 1, top })\n      }\n    }\n\n    onBlur = () => {\n      const { toolbarVisible, toolbarMouseOver } = this.state\n      if (toolbarVisible && !toolbarMouseOver) {\n        this.setState({ toolbarVisible: false, tabIndex: -1 })\n      }\n    }\n\n    _get = id => {\n      return tinymce.get(id)\n    }\n\n    remove = id => {\n      tinymce.remove(this._get(id || this.props.id))\n    }\n\n    render() {\n      return <ComposedComponent {...this.state} {...this.props} />\n    }\n  }\n\n  return hoist(withTinyMCE, ComposedComponent)\n}\n","import React from 'react'\nimport { DragSource, ConnectDragPreview, ConnectDragSource } from 'react-dnd'\nimport { getEmptyImage } from 'react-dnd-html5-backend'\nimport { mergeRight } from 'ramda'\nimport cx from 'classnames'\nimport { confirm } from '@/utils/message'\nimport { SnippetProps } from '@/constants/types'\nimport ItemTypes from '@/constants/item-types'\nimport SnippetToolbar from './snippet-toolbar'\nimport theme from '../theme'\nimport withTinyMCE from './withTinyMCE'\nconst { compose } = require('ramda')\n\ntype Props = {\n  id?: React.Key\n  wrapperId?: string\n  className?: string\n  style?: React.CSSProperties\n  index?: number\n  tabSize?: number\n  isDragging?: boolean\n  draggable?: boolean\n  inline?: boolean\n  fromMenu?: boolean\n  item: SnippetProps\n  connectDragPreview?: ConnectDragPreview\n  connectDragSource?: ConnectDragSource\n  children?: React.ReactNode\n  updateSnippet?(data: any): void\n  findSnippet?(id: React.Key): { index: number; snippet: SnippetProps }\n  shiftSnippet?(id: React.Key, shift: number): any\n  removeSnippet?(index: number): void\n}\n\ntype State = {\n  tabIndex: number\n  editModalVisible: boolean\n}\n\nconst withDragSource = DragSource(\n  ItemTypes.BOARD,\n  {\n    beginDrag(props: Props) {\n      return {\n        ...props,\n        fromMenu: false,\n        originalIndex: (props as any).findSnippet(props.id).index,\n      }\n    },\n    canDrag(props: Props) {\n      return !!(props.draggable && !props.fromMenu)\n    },\n  },\n  (connect, monitor) => ({\n    connectDragSource: connect.dragSource(),\n    connectDragPreview: connect.dragPreview(),\n    isDragging: monitor.isDragging(),\n  })\n)\n\nclass Snippet extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props)\n\n    this.state = {\n      tabIndex: -1,\n      editModalVisible: false,\n    }\n  }\n\n  componentDidMount = () => {\n    const { connectDragPreview } = this.props\n    if (connectDragPreview) {\n      connectDragPreview(getEmptyImage() /* { anchorX: 0.2, anchorY: 0.1 } */)\n    }\n  }\n\n  handleShift = (shift: number) => {\n    const { id, shiftSnippet } = this.props\n\n    if (shiftSnippet && id) {\n      shiftSnippet(id, shift)\n    }\n  }\n\n  handleRemove = () => {\n    confirm({\n      content: '刪除後將無法還原，確認繼續？',\n      title: '確認要刪除這個模版?',\n      onOk: () => {\n        ;(this.props as any).removeSnippet(this.props.index)\n      },\n      onCancel() {},\n    })\n  }\n\n  handleEditModalVisible = () => {\n    this.setState(prev => ({ editModalVisible: !prev.editModalVisible }))\n  }\n\n  _onMouseOver = () => {\n    this.setState({ tabIndex: 1 })\n  }\n\n  _onMouseOut = () => {\n    this.setState({ tabIndex: -1 })\n  }\n\n  render() {\n    const {\n      props: {\n        connectDragSource = (node: any) => node,\n        connectDragPreview = (node: any) => node,\n        wrapperId,\n        index,\n        draggable,\n        style = {},\n        className = 'mb-3',\n        item,\n      },\n      state: { tabIndex, editModalVisible },\n    } = this\n\n    const styles = mergeRight(\n      getItemStyles({ ...this.props, ...this.state }),\n      style\n    )\n\n    return connectDragSource(\n      connectDragPreview(\n        <div\n          id={wrapperId}\n          style={styles}\n          className={cx(\n            'ui-sortable',\n            { 'ui-draggable': draggable },\n            className\n          )}\n          tabIndex={tabIndex}\n          onMouseOver={this._onMouseOver}\n          onMouseOut={this._onMouseOut}\n          data-index={index}>\n          {draggable && (\n            <SnippetToolbar\n              tabIndex={tabIndex}\n              editable={!item.inline}\n              onEdit={this.handleEditModalVisible}\n              onDelete={this.handleRemove}\n              onShift={this.handleShift}\n            />\n          )}\n          {React.Children.map(this.props.children, child =>\n            React.cloneElement(child as any, {\n              editModalVisible,\n              handleEditModalVisible: this.handleEditModalVisible,\n            })\n          )}\n        </div>\n      )\n    )\n  }\n}\n\nfunction getItemStyles(props: Partial<Props & State>): React.CSSProperties {\n  const { isDragging, tabIndex, draggable, tabSize = 0 } = props\n\n  const isFocus = tabIndex === 1\n\n  return {\n    ...(isFocus ? { borderRadius: 3 } : {}),\n    ...(draggable\n      ? { border: `1px dashed ${draggable ? '#e7e7e7' : 'transparent'}` }\n      : {\n          outlineColor: isFocus ? theme.purple150 : 'transparent',\n        }),\n    cursor: 'default',\n    position: 'relative',\n    display: isDragging ? 'none' : 'block',\n    marginLeft: tabSize * 50,\n  }\n}\n\nexport default compose(withDragSource, withTinyMCE)(Snippet) as typeof Snippet\n","import { Tabs } from 'antd'\nimport styled from 'styled-components'\n\nconst bg = 'rgb(43,193,183)'\n\nexport default styled(Tabs)`\n  &.ant-tabs {\n    .ant-tabs-tab {\n      display: flex;\n      align-items: center;\n      padding: 10px 24px !important;\n      margin-right: 4px !important;\n      color: #fff !important;\n      border-color: ${bg} !important;\n      background: ${bg} !important;\n      border-top-left-radius: 12px !important;\n      border-top-right-radius: 12px !important;\n    }\n\n    .ant-tabs-tab-active {\n      border-color: #fff !important;\n      background: #fff !important;\n\n      svg path {\n        fill: ${p => p.theme.primary} !important;\n      }\n    }\n\n    .ant-tabs-tab .anticon {\n      color: #fff !important;\n    }\n\n    .ant-tabs-tab.is--over {\n      border: 1px dashed lightgrey !important;\n    }\n\n    .ant-tabs-tab.is--dragging {\n      opacity: 0.3;\n    }\n\n    > .ant-tabs-nav .ant-tabs-nav-add,\n    .ant-tabs > div > .ant-tabs-nav .ant-tabs-nav-add {\n      background: transparent;\n      border-color: transparent;\n      color: ${p => p.theme.darkGrey};\n\n      .anticon-plus {\n        color: ${p => p.theme.darkGrey};\n      }\n\n      .anticon-plus:hover {\n        color: ${p => p.theme.primary};\n      }\n    }\n\n    .ant-tabs-tab-btn:focus,\n    .ant-tabs-tab-remove:focus,\n    .ant-tabs-tab-btn:active,\n    .ant-tabs-tab-remove:active,\n    .ant-tabs-tab.ant-tabs-tab-active .ant-tabs-tab-btn {\n      color: ${p => p.theme.secondary} !important;\n    }\n  }\n\n  &.ant-tabs-top > .ant-tabs-nav,\n  &.ant-tabs-top > div > .ant-tabs-nav {\n    margin-bottom: 0;\n  }\n\n  &.ant-tabs-top > .ant-tabs-nav::before {\n    border-bottom: none;\n  }\n`\n","import React from 'react'\nimport { DragSource, DropTarget } from 'react-dnd'\nimport cx from 'classnames'\nimport { compose } from 'ramda'\nimport Tabs from '@/components/tabs'\n\n// Drag & Drop node\nclass TabNode extends React.Component {\n  render() {\n    const {\n      connectDragSource,\n      connectDropTarget,\n      isDragging,\n      isOver,\n      moveTabNode,\n      draggingItem,\n      id,\n      ...props\n    } = this.props\n\n    return connectDragSource(\n      connectDropTarget(\n        React.cloneElement(props.children, {\n          className: cx(props.children.props.className, {\n            'is--dragging': isDragging,\n            'is--over': isOver && id !== draggingItem?.id,\n          }),\n        })\n      )\n    )\n  }\n}\n\nconst withDropTarget = DropTarget(\n  'DND_NODE',\n  {\n    drop(props, monitor) {\n      const dragKey = monitor.getItem().index\n      const hoverKey = props.index\n\n      if (dragKey === hoverKey) {\n        return\n      }\n\n      props.moveTabNode(dragKey, hoverKey)\n      monitor.getItem().index = hoverKey\n    },\n  },\n  (connect, monitor) => ({\n    connectDropTarget: connect.dropTarget(),\n    isOver: monitor.isOver(),\n    draggingItem: monitor.getItem(),\n  })\n)\n\nconst withDragSource = DragSource(\n  'DND_NODE',\n  {\n    beginDrag(props) {\n      return {\n        id: props.id,\n        index: props.index,\n      }\n    },\n  },\n  (connect, monitor) => ({\n    connectDragSource: connect.dragSource(),\n    isDragging: monitor.isDragging(),\n  })\n)\n\nconst WrapTabNode = compose(withDropTarget, withDragSource)(TabNode)\n\nexport default class DraggableTabs extends React.Component {\n  static defaultProps = {\n    order: [],\n  }\n\n  moveTabNode = (dragKey, hoverKey) => {\n    const { children, order, moveTabNode } = this.props\n    const newOrder = order.slice()\n\n    React.Children.forEach(children, c => {\n      if (newOrder.indexOf(c.key) === -1) {\n        newOrder.push(c.key)\n      }\n    })\n\n    const dragIndex = newOrder.indexOf(dragKey)\n    const hoverIndex = newOrder.indexOf(hoverKey)\n\n    newOrder.splice(dragIndex, 1)\n    newOrder.splice(hoverIndex, 0, dragKey)\n\n    moveTabNode(newOrder)\n  }\n\n  renderTabBar = (props, DefaultTabBar) => (\n    <DefaultTabBar {...props}>\n      {node => (\n        <WrapTabNode\n          key={node.key}\n          id={node.key}\n          index={node.key}\n          moveTabNode={this.moveTabNode}>\n          {node}\n        </WrapTabNode>\n      )}\n    </DefaultTabBar>\n  )\n\n  render() {\n    const { moveTabNode, children, ...props } = this.props\n\n    return (\n      <Tabs renderTabBar={this.renderTabBar} {...props}>\n        {children}\n      </Tabs>\n    )\n  }\n}\n\nDraggableTabs.TabPane = Tabs.TabPane\n","import moment from 'moment'\nimport { envStore } from '@/constants/env'\nconst {\n  forEach,\n  addIndex,\n  map,\n  isEmpty,\n  either,\n  compose,\n  not,\n  isNil: RisNil,\n  path,\n} = require('ramda')\n\nexport function queryString(search: string): { [key: string]: any } {\n  if (!search) {\n    search = window.location.search\n  }\n\n  const params = new URLSearchParams(search)\n\n  let result: object | any = {}\n\n  params.forEach((value: string, key: string) => (result[key] = value))\n\n  return result\n}\n\nexport function uuid() {\n  let d = Date.now()\n  if (\n    typeof performance !== 'undefined' &&\n    typeof performance.now === 'function'\n  ) {\n    d += performance.now()\n  }\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {\n    const r = (d + Math.random() * 16) % 16 | 0\n    d = Math.floor(d / 16)\n    return (c === 'x' ? r : (r & 0x3) | 0x8).toString(16)\n  })\n}\n\nexport function isUUID(uuid: string) {\n  return /^[0-9a-f]{8}-[0-9a-f]{4}-[0-5][0-9a-f]{3}-[089ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(\n    uuid\n  )\n}\n\nexport const forEachIndexed = addIndex(forEach)\nexport const mapIndexed: any = addIndex(map)\n\nexport const isNil = either(isEmpty, RisNil)\n\nexport const hasPath = (namedPath: Array<string | number>) =>\n  compose(not, isNil, path(namedPath))\n\nexport const getRangeDate = (\n  date: [moment.Moment, moment.Moment],\n  dateFormat?: string\n) => {\n  const [startDate, stopDate] = date\n\n  return [\n    startDate\n      ? dateFormat\n        ? startDate.format(dateFormat)\n        : startDate.toISOString()\n      : undefined,\n    stopDate\n      ? dateFormat\n        ? stopDate.format(dateFormat)\n        : stopDate.toISOString()\n      : undefined,\n  ]\n}\n\nexport const toThousandSeparator = (number: number | string) => {\n  if (number && (typeof number === 'number' || isNaN(number as any))) {\n    return number.toLocaleString()\n  }\n  return number\n}\n\nexport const capitalize = (s: string) => {\n  if (typeof s !== 'string') return ''\n  return s.charAt(0).toUpperCase() + s.slice(1)\n}\n\nexport function getNumberFromString(str?: string) {\n  if (!str) {\n    return str\n  }\n  return str.replace(/[^\\d.]/g, '')\n}\n\nexport const redirect = () => {\n  if (!envStore.isEnvDev && window.location.pathname === '/') {\n    window.location.href = envStore.appUrl\n    return\n  }\n}\n","import React from 'react'\nimport { replace } from 'ramda'\nimport { envStore } from '@/constants/env'\n\nexport interface UseTitleOptions {\n  restoreOnUnmount?: boolean\n}\n\nconst DEFAULT_USE_TITLE_OPTIONS: UseTitleOptions = {\n  restoreOnUnmount: false,\n}\n\nfunction useTitle(\n  title: string,\n  options: UseTitleOptions = DEFAULT_USE_TITLE_OPTIONS\n) {\n  const prevTitleRef = React.useRef(document.title)\n  document.title = replace(/%s/, title)(envStore.appTitle)\n  React.useEffect(() => {\n    if (options && options.restoreOnUnmount) {\n      return () => {\n        document.title = prevTitleRef.current // eslint-disable-line\n      }\n    } else {\n      return\n    }\n  }, []) // eslint-disable-line\n}\n\nexport default typeof document !== 'undefined'\n  ? useTitle\n  : (_title: string) => {}\n","import React from 'react'\nimport { Layout } from 'antd'\nimport cx from 'classnames'\nimport AppFooter from '@/components/app-footer'\nimport theme from '../theme'\n\ninterface PageProps {\n  children: React.ReactNode\n  style?: React.CSSProperties\n  className?: string\n  wrapperClassName?: string\n  wrapperStyle?: React.CSSProperties\n}\n\nexport function Page({ children, style, className = 'pr-16' }: PageProps) {\n  return (\n    <Layout>\n      <Layout.Content\n        style={{\n          background: `linear-gradient(-90deg,#42c2b8,${theme.primary})`,\n        }}>\n        <div\n          className={cx('pl-8 pt-6 pb-12', className)}\n          style={style}\n          css={{\n            background: 'rgb(221, 228, 237)',\n            borderTopLeftRadius: 32,\n            borderTopRightRadius: 32,\n          }}>\n          {children}\n        </div>\n      </Layout.Content>\n      <AppFooter />\n    </Layout>\n  )\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport { Modal } from 'antd'\nimport { ModalProps } from 'antd/lib/modal'\n\nconst StyledModal = styled(Modal)`\n  animation-duration: 0s !important;\n  transition: none !important;\n\n  .ant-modal-header--border-none {\n    border-bottom: none;\n  }\n\n  .ant-modal-footer {\n    padding-top: 14px;\n    padding-bottom: 14px;\n  }\n`\n\nexport default class ModalComponent extends React.Component<ModalProps, any> {\n  static confirm = Modal.confirm\n  static error = Modal.error\n  static success = Modal.success\n  static info = Modal.info\n\n  render() {\n    return <StyledModal {...this.props}>{this.props.children}</StyledModal>\n  }\n}\n","import React from 'react'\nimport { Table, Empty, Tooltip } from 'antd'\nimport { TableProps } from 'antd/lib/table'\nimport { CloseOutlined, PlusOutlined } from '@ant-design/icons'\nimport styled from 'styled-components'\n\nconst StyledTable: any = styled(Table)`\n  &.ant-table-wrapper {\n    .ant-pagination-prev .ant-pagination-item-link,\n    .ant-pagination-next .ant-pagination-item-link {\n      border-color: ${p => p.theme.pagination};\n      border-radius: 6px;\n      color: ${p => p.theme.pagination};\n    }\n\n    .ant-pagination-item {\n      border-color: ${p => p.theme.pagination};\n    }\n\n    .ant-pagination-item a {\n      color: ${p => p.theme.pagination};\n    }\n\n    .ant-pagination-item-active,\n    .ant-pagination-item-active:focus,\n    .ant-pagination-item:hover {\n      border-color: ${p => p.theme.pagination};\n      background: ${p => p.theme.pagination};\n\n      a {\n        color: #fff;\n      }\n    }\n\n    .ant-table-pagination.ant-pagination {\n      margin-top: 32px;\n    }\n\n    .ant-pagination-prev:hover .ant-pagination-item-link,\n    .ant-pagination-next:hover .ant-pagination-item-link {\n      border-color: ${p => p.theme.pagination};\n      background: ${p => p.theme.pagination};\n      color: #fff;\n    }\n\n    .ant-pagination-simple-pager {\n      color: ${p => p.theme.pagination};\n    }\n  }\n\n  .ant-table-tbody > tr > td {\n    height: 40px;\n    padding-top: 10px;\n    padding-bottom: 10px;\n    line-height: 1em;\n    color: #4a4a4a;\n    background: #f0f2f5;\n    border-bottom: 1px solid #e9e9e9;\n  }\n\n  .ant-table-thead > tr > th {\n    background: rgb(39, 189, 179);\n    border-bottom: 1px solid #e9e9e9;\n    color: #fff;\n    font-weight: 600;\n    font-size: 16px;\n  }\n`\n\ntype Props<T> = TableProps<T> & {\n  editable?: boolean\n  isRowDeletable?: (row: T) => boolean\n  onAddRowClick?: (param?: any) => any\n  onDeleteRowClick?: (param?: any) => any\n  isCanEdit?: any\n}\n\nfunction TableComponent<T = any>({\n  editable = false,\n  columns = [],\n  onAddRowClick,\n  isRowDeletable = () => true,\n  onDeleteRowClick,\n  isCanEdit = '',\n  ...props\n}: Props<T>) {\n  const _columns = React.useMemo(() => {\n    let canEdit: boolean = true\n    if (!editable) {\n      return columns\n    }\n    if (isCanEdit !== '') {\n      canEdit = isCanEdit\n    }\n\n    const handleRowDelete = (key: React.Key) => () => {\n      if (onDeleteRowClick) {\n        onDeleteRowClick(key)\n      }\n    }\n\n    return [\n      {\n        title: (\n          <Tooltip placement=\"topLeft\" title=\"新增\">\n            <PlusOutlined\n              className=\"ml-1 relative\"\n              style={{ top: -3 }}\n              onClick={canEdit ? onAddRowClick : undefined}\n            />\n          </Tooltip>\n        ),\n        width: 50,\n        render: (_: any, __: any, idx: number) => (\n          <div className=\"text-center\">#{idx + 1}</div>\n        ),\n      },\n      ...columns,\n      {\n        width: 50,\n        render: (_: any, r: any, idx: number) => (\n          <Tooltip placement=\"topLeft\" title=\"刪除\">\n            <CloseOutlined\n              onClick={isRowDeletable(r) ? handleRowDelete(r.id) : undefined}\n            />\n          </Tooltip>\n        ),\n      },\n    ]\n  }, [columns, editable]) // eslint-disable-line\n\n  return (\n    <StyledTable\n      columns={_columns}\n      locale={{\n        emptyText: (\n          <Empty\n            image={Empty.PRESENTED_IMAGE_SIMPLE}\n            description={\n              <span>\n                <span className=\"d-block\">\n                  尚無資料，請點選「＋新增」新增資料。\n                </span>\n              </span>\n            }\n          />\n        ),\n      }}\n      {...props}>\n      {props.children}\n    </StyledTable>\n  )\n}\n\nTableComponent.displayName = 'Table'\nTableComponent.Column = Table.Column\n\nexport default TableComponent\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { findDOMNode } from 'react-dom'\nimport { DndContext } from 'react-dnd'\nimport throttle from 'lodash.throttle'\nimport raf from 'raf'\nimport hoist from 'hoist-non-react-statics'\nimport getDisplayName from '@/utils/get-display-name'\n\nfunction noop() {}\n\nfunction intBetween(min, max, val) {\n  return Math.floor(Math.min(max, Math.max(min, val)))\n}\n\nfunction getCoords(evt) {\n  if (evt.type === 'touchmove') {\n    return {\n      x: evt.changedTouches[0].clientX,\n      y: evt.changedTouches[0].clientY,\n    }\n  }\n\n  return { x: evt.clientX, y: evt.clientY }\n}\n\nconst DEFAULT_BUFFER = 150\n\nexport function createHorizontalStrength(_buffer) {\n  return function defaultHorizontalStrength({ x, w, y, h }, point) {\n    const buffer = Math.min(w / 2, _buffer)\n    const inRange = point.x >= x && point.x <= x + w\n    const inBox = inRange && point.y >= y && point.y <= y + h\n\n    if (inBox) {\n      if (point.x < x + buffer) {\n        return (point.x - x - buffer) / buffer\n      } else if (point.x > x + w - buffer) {\n        return -(x + w - point.x - buffer) / buffer\n      }\n    }\n\n    return 0\n  }\n}\n\nexport function createVerticalStrength(_buffer) {\n  return function defaultVerticalStrength({ y, h, x, w }, point) {\n    const buffer = Math.min(h / 2, _buffer)\n    const inRange = point.y >= y && point.y <= y + h\n    const inBox = inRange && point.x >= x && point.x <= x + w\n\n    if (inBox) {\n      if (point.y < y + buffer) {\n        return (point.y - y - buffer) / buffer\n      } else if (point.y > y + h - buffer) {\n        return -(y + h - point.y - buffer) / buffer\n      }\n    }\n\n    return 0\n  }\n}\n\nexport const defaultHorizontalStrength = createHorizontalStrength(\n  DEFAULT_BUFFER\n)\n\nexport const defaultVerticalStrength = createVerticalStrength(DEFAULT_BUFFER)\n\nexport default function createScrollingComponent(WrappedComponent) {\n  class ScrollingComponent extends React.Component {\n    static displayName = `Scrolling(${getDisplayName(WrappedComponent)})`\n\n    static propTypes = {\n      onScrollChange: PropTypes.func,\n      verticalStrength: PropTypes.func,\n      horizontalStrength: PropTypes.func,\n      strengthMultiplier: PropTypes.number,\n    }\n\n    static defaultProps = {\n      useScroll: true,\n      onScrollChange: noop,\n      verticalStrength: defaultVerticalStrength,\n      horizontalStrength: defaultHorizontalStrength,\n      strengthMultiplier: 30,\n    }\n\n    static contextType = DndContext\n\n    constructor(props, ctx) {\n      super(props, ctx)\n\n      this.scaleX = 0\n      this.scaleY = 0\n      this.frame = null\n\n      this.attached = false\n      this.dragging = false\n    }\n\n    componentDidMount() {\n      if (this.props.useScroll) {\n        this._initial()\n      }\n    }\n\n    _initial() {\n      // window.document.body.addEventListener('dragover', this.handleEvent);\n      this.container = findDOMNode(this.wrappedInstance)\n      this.container.addEventListener('dragover', this.handleEvent)\n      // touchmove events don't seem to work across siblings, so we unfortunately\n      // have to attach the listeners to the body\n      window.document.body.addEventListener('touchmove', this.handleEvent)\n\n      this.clearMonitorSubscription = this.context.dragDropManager\n        .getMonitor()\n        .subscribeToStateChange(() => this.handleMonitorChange())\n    }\n\n    componentWillUnmount() {\n      if (this.props.useScroll) {\n        this._remove()\n      }\n    }\n\n    _remove() {\n      // window.document.body.removeEventListener('dragover', this.handleEvent);\n      this.container.removeEventListener('dragover', this.handleEvent)\n      window.document.body.removeEventListener('touchmove', this.handleEvent)\n      this.clearMonitorSubscription()\n      this.stopScrolling()\n    }\n\n    handleEvent = evt => {\n      if (this.dragging && !this.attached) {\n        this.attach()\n        this.updateScrolling(evt)\n      }\n    }\n\n    handleMonitorChange() {\n      const isDragging = this.context.dragDropManager.getMonitor().isDragging()\n\n      if (!this.dragging && isDragging) {\n        this.dragging = true\n      } else if (this.dragging && !isDragging) {\n        this.dragging = false\n        this.stopScrolling()\n      }\n    }\n\n    attach() {\n      this.attached = true\n      window.document.body.addEventListener('dragover', this.updateScrolling)\n      window.document.body.addEventListener('touchmove', this.updateScrolling)\n    }\n\n    detach() {\n      this.attached = false\n      window.document.body.removeEventListener('dragover', this.updateScrolling)\n      window.document.body.removeEventListener(\n        'touchmove',\n        this.updateScrolling\n      )\n    }\n\n    // Update scaleX and scaleY every 100ms or so\n    // and start scrolling if necessary\n    updateScrolling = throttle(\n      evt => {\n        const {\n          left: x,\n          top: y,\n          width: w,\n          height: h,\n        } = this.container.getBoundingClientRect()\n        const box = { x, y, w, h }\n        const coords = getCoords(evt)\n\n        // calculate strength\n        this.scaleX = this.props.horizontalStrength(box, coords)\n        this.scaleY = this.props.verticalStrength(box, coords)\n\n        // start scrolling if we need to\n        if (!this.frame && (this.scaleX || this.scaleY)) {\n          this.startScrolling()\n        }\n      },\n      100,\n      { trailing: false }\n    )\n\n    startScrolling() {\n      let i = 0\n      const tick = () => {\n        const { scaleX, scaleY, container } = this\n        const { strengthMultiplier, onScrollChange } = this.props\n\n        // stop scrolling if there's nothing to do\n        if (strengthMultiplier === 0 || scaleX + scaleY === 0) {\n          this.stopScrolling()\n          return\n        }\n\n        // there's a bug in safari where it seems like we can't get\n        // mousemove events from a container that also emits a scroll\n        // event that same frame. So we double the strengthMultiplier and only adjust\n        // the scroll position at 30fps\n        if (i++ % 2) {\n          const {\n            scrollLeft,\n            scrollTop,\n            scrollWidth,\n            scrollHeight,\n            clientWidth,\n            clientHeight,\n          } = container\n\n          const newLeft = scaleX\n            ? (container.scrollLeft = intBetween(\n                0,\n                scrollWidth - clientWidth,\n                scrollLeft + scaleX * strengthMultiplier\n              ))\n            : scrollLeft\n\n          const newTop = scaleY\n            ? (container.scrollTop = intBetween(\n                0,\n                scrollHeight - clientHeight,\n                scrollTop + scaleY * strengthMultiplier\n              ))\n            : scrollTop\n\n          onScrollChange(newLeft, newTop)\n        }\n        this.frame = raf(tick)\n      }\n\n      tick()\n    }\n\n    stopScrolling() {\n      this.detach()\n      this.scaleX = 0\n      this.scaleY = 0\n\n      if (this.frame) {\n        raf.cancel(this.frame)\n        this.frame = null\n      }\n    }\n\n    render() {\n      const {\n        // not passing down these props\n        strengthMultiplier,\n        verticalStrength,\n        horizontalStrength,\n        onScrollChange,\n        ...props\n      } = this.props\n\n      return (\n        <WrappedComponent\n          ref={ref => {\n            this.wrappedInstance = ref\n          }}\n          {...props}\n        />\n      )\n    }\n  }\n\n  return hoist(ScrollingComponent, WrappedComponent)\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport cx from 'classnames'\nimport withScroll, { createVerticalStrength } from './withScroll'\n\ninterface Props {\n  className?: string\n  useScroll?: boolean\n}\n\nconst DndScrollableElement = styled.div`\n  height: 85vh;\n  padding-top: 0;\n  overflow-y: scroll;\n\n  .report-template-builder {\n    &__main-content {\n      min-height: 371.25mm;\n      margin: 0 auto;\n      padding: 16px;\n      box-sizing: border-box;\n      max-width: 100%;\n      background: #fff;\n      border-top-right-radius: 16px;\n      border-bottom-left-radius: 16px;\n      border-bottom-right-radius: 16px;\n    }\n\n    &__contentarea {\n      min-height: 348.75mm;\n    }\n\n    &__contentarea--fixed-layout {\n      min-height: auto;\n    }\n\n    &__snippet-toolbar {\n      visibility: hidden;\n    }\n  }\n\n  .ui-draggable {\n    &:focus,\n    &:active {\n      outline: 0;\n\n      .course-builder__snippet-toolbar {\n        visibility: visible;\n        opacity: 1;\n        transition: visibility 0s, opacity 0.3s, max-height 0.6s linear;\n      }\n    }\n  }\n\n  &.is--preview {\n    height: auto;\n  }\n`\n\nconst ScrollableComponent = withScroll(DndScrollableElement)\n\nconst vStrength = createVerticalStrength(150)\n\nexport default class ReactDndProvider extends React.Component<Props> {\n  static defaultProps = {\n    useScroll: true,\n  }\n\n  render() {\n    const { className, useScroll } = this.props\n\n    return (\n      <ScrollableComponent\n        useScroll={useScroll}\n        verticalStrength={vStrength}\n        strengthMultiplier={100}\n        className={cx('report-template-builder', className)}>\n        {this.props.children}\n      </ScrollableComponent>\n    )\n  }\n}\n","import { Input } from 'antd'\nimport styled, { css } from 'styled-components'\n\nconst borderLess = css`\n  &.ant-input-borderless {\n    border: none;\n    border-bottom: 1px solid ${p => p.theme.primary};\n    border-bottom-left-radius: 0;\n    border-bottom-right-radius: 0;\n  }\n\n  &:active:not(.ant-input-borderless) {\n    box-shadow: 0 0 0 1px ${p => p.theme.primary};\n  }\n`\n\nconst StyledInput = styled(Input)`\n  &.ant-input-affix-wrapper .ant-input,\n  &.ant-input {\n    border-color: ${p => p.theme.primary};\n\n    &:hover,\n    &:focus {\n      border-color: ${p => p.theme.secondary};\n    }\n\n    ${borderLess};\n  }\n`\n\nconst Search = styled(Input.Search)`\n  &.ant-input-search {\n    .ant-input {\n      border-color: ${p => p.theme.primary};\n\n      &:hover,\n      &:focus {\n        border-color: ${p => p.theme.secondary};\n      }\n\n      &:focus {\n        box-shadow: 0 0 0 1px ${p => p.theme.primary};\n      }\n    }\n\n    .anticon-search {\n      font-size: 20px;\n      color: ${p => p.theme.primary};\n    }\n  }\n`\n\nconst TextArea = styled(Input.TextArea)`\n  &.ant-input {\n    resize: none;\n    border: 1px solid ${p => p.theme.primary};\n\n    &:hover,\n    &:focus {\n      border-color: ${p => p.theme.secondary};\n    }\n\n    ${borderLess};\n  }\n`\n\nexport { StyledInput as Input, TextArea, Search }\n\nexport default StyledInput\n","import React from 'react'\nimport { Layout } from 'antd'\n\nexport default function AppFooter() {\n  return (\n    <Layout.Footer\n      className=\"pb-6 text-center text-gray-600 border-t border-gray-400\"\n      style={{ background: 'rgb(221, 228, 237)' }}>\n      2020 高雄榮總數位病理平台\n    </Layout.Footer>\n  )\n}\n","const primary = '#38a8a9'\n\nmodule.exports = {\n  primary,\n  secondary: '#42c2b8',\n  danger: '#d74c4c',\n  darkGrey: '#4a4a4a',\n  purple150: 'rgba(115, 105, 215, 0.15)',\n  cornblue: '#a9b6d8',\n  comet: '#555977',\n  btn: {\n    danger: '#d74c4c',\n    primary: '#2c908a',\n    secondary: '#42c2b8',\n  },\n  sider: {\n    bg: primary,\n  },\n  pagination: primary,\n}\n","import styled from 'styled-components'\n\ntype Props = {\n  border?: string\n}\n\nexport default styled.div.attrs({\n  className: 'block-placeholder',\n})<Props>`\n  display: flex;\n  align-items: center;\n  padding-left: 25px;\n  height: 50px;\n  border: rgba(225, 225, 225, 0.9) 2px ${p => p.border || 'dashed'};\n  background-color: transparent;\n  margin-bottom: 35px;\n`\n","/**\n * NOTE:\n * nerver using index as list component key forever,\n * it will completely fucked up your page\n */\nimport React from 'react'\nimport { withRouter } from 'react-router-dom'\nimport { DropTarget, ConnectDropTarget, XYCoord } from 'react-dnd'\nimport {\n  equals,\n  length,\n  remove,\n  update,\n  insert,\n  cond,\n  gt,\n  lt,\n  T,\n  __,\n  add,\n  pathOr,\n  identity,\n  always,\n} from 'ramda'\nimport cx from 'classnames'\nimport { uuid } from '@/utils/webHelper'\nimport ItemTypes from '@/constants/item-types'\nimport { SnippetProps } from '@/constants/types'\nimport Snippet from '@/components/snippet'\nimport BlockPlaceholder from '@/components/snippet-block-placeholder'\nimport { canMoveSnippet, getPlaceHolderIndex } from './snippet-utils'\nconst { compose } = require('ramda')\n\ninterface Props {\n  draggingItem: any\n  isOver?: boolean\n  draggable?: boolean\n  canDrop?: boolean\n  snippetList: SnippetProps[]\n  connectDropTarget: ConnectDropTarget\n  onSnippetUpdate(data: any): void\n}\n\ninterface State {\n  placeholderIndex: number | null\n}\n\nconst withDropTarget = DropTarget<Props>(\n  ItemTypes.BOARD,\n  {\n    drop(_, monitor, component) {\n      if (!component || !component.props.draggable) {\n        return\n      }\n\n      const canDrop = monitor.canDrop()\n      let { placeholderIndex } = component.state\n      const item = monitor.getItem()\n\n      if (canDrop && item.fromMenu) {\n        component.handleSnippetDrop({ ...item, placeholderIndex })\n      }\n\n      if (canDrop && !item.fromMenu) {\n        component.handleSnippetMove(item.id, placeholderIndex)\n      }\n    },\n    canDrop({ snippetList }, monitor) {\n      // if there is no items in cards, and is over on the board currently,\n      // we can display a placeholder and drop the snippet item on the board.\n      if (snippetList.length === 0 && monitor.isOver()) {\n        return true\n      }\n\n      const clientOffset = monitor.getClientOffset() as XYCoord\n      const element = document.elementFromPoint(clientOffset.x, clientOffset.y)\n\n      return canMoveSnippet(element)\n    },\n    hover(_, monitor, component) {\n      // Determine mouse position\n      const clientOffset = monitor.getClientOffset() as XYCoord\n\n      let {\n        placeholderIndex,\n        isOverSnippet,\n        overSnippet,\n      } = getPlaceHolderIndex(clientOffset)\n\n      // 還要判斷是否是在最後一個 snippet 下面及 snippets-container 裡面\n      if (!isOverSnippet) {\n        return\n      }\n\n      const hoverBoundingRect = (overSnippet as HTMLElement).getBoundingClientRect()\n      const hoverMiddleY =\n        (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2\n      const hoverClientY = clientOffset.y - hoverBoundingRect.top\n\n      if (hoverClientY < hoverMiddleY) {\n        placeholderIndex -= 1\n      }\n\n      if (\n        monitor.canDrop() &&\n        !equals(component.state.placeholderIndex, placeholderIndex)\n      ) {\n        component.setState({ placeholderIndex })\n      }\n    },\n  },\n  (connect, monitor) => ({\n    connectDropTarget: connect.dropTarget(),\n    isOver: monitor.isOver(),\n    canDrop: monitor.canDrop(),\n    didDrop: monitor.didDrop(),\n    draggingItem: monitor.getItem(),\n  })\n)\n\nclass SnippetsContainer extends React.Component<Props, State> {\n  static defaultProps = {\n    draggable: true,\n    snippetList: [],\n  }\n\n  public state: State = {\n    placeholderIndex: null,\n  }\n\n  handleSnippetMove = (id: React.Key, atIndex: number) => {\n    const { snippetList } = this.props\n    const { snippet, index } = this.handleFindSnippet(id)\n\n    const newList = []\n    let isPlaced = false\n\n    snippetList.forEach((s, idx) => {\n      if (idx === index) {\n        return\n      }\n\n      if (!isPlaced && atIndex < idx) {\n        newList.push(snippet)\n        isPlaced = true\n      }\n\n      newList.push(s)\n\n      if (!isPlaced && atIndex === idx) {\n        newList.push(snippet)\n        isPlaced = true\n      }\n    })\n\n    // we dropped the only one snippet in the list so let it back to list.\n    if (length(snippetList) === 1 && !atIndex) {\n      newList.push(snippet)\n    }\n\n    this.props.onSnippetUpdate(newList)\n    this.setState({ placeholderIndex: null })\n  }\n\n  // prettier-ignore\n  handleSnippetDrop = (droppedItem: { [key: string]: any; placeholderIndex: number }) => {\n    const { placeholderIndex, ...item } = droppedItem\n\n    const snippetList = [...this.props.snippetList]\n\n    const nextIndex = placeholderIndex + 1\n    let newList: any[] = []\n\n    const snippet: Partial<SnippetProps> = {\n      ...item,\n      fromMenu: false,\n      id: `${item.id}__${uuid()}`,\n    }\n\n    if (length(snippetList) === 0) {\n      newList = insert(0, snippet)(snippetList)\n    }\n    if (length(snippetList) > 0) {\n      newList = insert(nextIndex, snippet)(snippetList)\n    }\n\n    this.props.onSnippetUpdate(newList)\n    this.setState({ placeholderIndex: null })\n  }\n\n  handleSnippetRemove = (index: number) => {\n    this.props.onSnippetUpdate(remove(index, 1)(this.props.snippetList))\n  }\n\n  handleSnippetShift = (id: React.Key, shift: number) => {\n    const { snippet } = this.handleFindSnippet(id)\n\n    this.handleSnippetUpdate({\n      ...snippet,\n      tabSize: compose(\n        cond([\n          [gt(__, 2), always(2)],\n          [lt(__, 0), always(0)],\n          [T, identity],\n        ]),\n        add(shift),\n        pathOr(0, ['tabSize'])\n      )(snippet),\n    })\n  }\n\n  handleSnippetUpdate = (data: any) => {\n    const { snippet, index } = this.handleFindSnippet(data.id)\n\n    this.props.onSnippetUpdate(\n      update(index, { ...snippet, ...data })(this.props.snippetList)\n    )\n  }\n\n  handleFindSnippet = (id: React.Key) => {\n    const { snippetList } = this.props\n    const snippet = snippetList.filter(x => x.id === id)[0]\n\n    return {\n      snippet,\n      index: snippetList.indexOf(snippet),\n    }\n  }\n\n  render() {\n    const {\n      connectDropTarget,\n      isOver,\n      canDrop,\n      snippetList,\n      draggingItem,\n      draggable, // 模版是否可拖曳，編輯模式下才會是 true\n    } = this.props\n\n    const { placeholderIndex } = this.state\n\n    let isPlaceHold = false\n    const cardList = []\n\n    snippetList.forEach((item, idx) => {\n      if (isOver && canDrop) {\n        isPlaceHold = false\n        if (idx === 0 && placeholderIndex === -1) {\n          cardList.push(<BlockPlaceholder key={`block-placeholder-${idx}`} />)\n        } else if ((placeholderIndex as any) > idx) {\n          isPlaceHold = true\n        }\n      }\n\n      if (item !== undefined) {\n        cardList.push(\n          <Snippet\n            key={item.id}\n            id={item.id}\n            index={idx}\n            draggable={draggable}\n            item={item}\n            inline={item.inline}\n            wrapperId={`snippet-wrapper-${idx}`}\n            tabSize={item.tabSize}\n            findSnippet={this.handleFindSnippet}\n            updateSnippet={this.handleSnippetUpdate}\n            shiftSnippet={this.handleSnippetShift}\n            removeSnippet={this.handleSnippetRemove}>\n            {item.inline ? (\n              <div\n                id={`${item.id}`}\n                className={`${item.id}`}\n                css={{ padding: 16 }}\n              />\n            ) : (\n              <item.Component\n                id={item.id}\n                className={item.id}\n                item={item}\n                index={idx}\n                onUpdate={this.handleSnippetUpdate}\n              />\n            )}\n          </Snippet>\n        )\n      }\n\n      if (isOver && canDrop && placeholderIndex === idx) {\n        cardList.push(<BlockPlaceholder key={`block-placeholder-${idx}`} />)\n      }\n    })\n\n    // if placeholder index is greater than array.length, display placeholder as last\n    if (isPlaceHold) {\n      cardList.push(<BlockPlaceholder key={'block-placeholder-bottom'} />)\n    }\n\n    // if there is no items in cards currently, display a placeholder anyway\n    if (isOver && canDrop && snippetList.length === 0) {\n      cardList.push(<BlockPlaceholder key={'block-placeholder-zero'} />)\n    }\n\n    // if just has only one item in list and currently dragged, display a placeholder\n    if (isOver && canDrop && snippetList.length === 1) {\n      if (!draggingItem.fromMenu) {\n        cardList.push(<BlockPlaceholder key={'block-placeholder-zero'} />)\n      }\n    }\n\n    return connectDropTarget(\n      <div\n        className={cx('report-template-builder__contentarea', {\n          'report-template-builder__contentarea--fixed-layout': !draggable,\n        })}>\n        {cardList}\n      </div>\n    )\n  }\n}\n\nexport default compose(withRouter, withDropTarget)(SnippetsContainer)\n","import React from 'react'\nimport { DragSource, ConnectDragSource } from 'react-dnd'\nimport styled from 'styled-components'\nimport ItemTypes from '@/constants/item-types'\n\ninterface Props {\n  connectDragSource: ConnectDragSource\n  children?: React.ReactNode\n  className?: string\n  id?: React.Key\n}\n\nconst withDragSource = DragSource(\n  ItemTypes.BOARD,\n  {\n    beginDrag(props: Props) {\n      const { children, className, ...rest } = props // eslint-disable-line\n      return {\n        ...rest,\n        fromMenu: true,\n      }\n    },\n    endDrag(_, monitor) {\n      if (!monitor.didDrop()) {\n        return\n      }\n    },\n    isDragging(props, monitor) {\n      const isDragging = props.id === monitor.getItem().id\n\n      return isDragging\n    },\n  },\n  (connect, monitor) => ({\n    connectDragSource: connect.dragSource(),\n    connectDragPreview: connect.dragPreview(),\n    isDragging: monitor.isDragging(),\n  })\n)\n\nclass SnippetListMenuItem extends React.Component<Props> {\n  render() {\n    const { connectDragSource, id, ...rest } = this.props\n\n    return (\n      <SnippetListMenuWrapper\n        {...rest}\n        ref={comp => connectDragSource(comp)}\n        id={`${id}`}>\n        <div className=\"snippet-drawer-menu__item--content\">\n          {this.props.children}\n        </div>\n      </SnippetListMenuWrapper>\n    )\n  }\n}\n\nconst SnippetListMenuWrapper = styled.div`\n  cursor: move;\n`\n\nexport default withDragSource(SnippetListMenuItem)\n","import React from 'react'\nimport cx from 'classnames'\nimport { FontColorsOutlined } from '@ant-design/icons'\nimport styled from 'styled-components'\nimport SnippetListMenuItem from '@/components/snippet-list-menu-item'\nimport snippetTemplateList from '@/components/snippet-template-list'\n\ninterface Props {\n  className?: string\n  style?: React.CSSProperties\n}\n\nexport default class SnippetListMenu extends React.Component<Props> {\n  render() {\n    return (\n      <SnippetListMenuWrapper\n        className={cx('snippet-drawer-menu', this.props.className)}\n        {...this.props}>\n        <div className=\"snippet-drawer-menu__list\">\n          {snippetTemplateList.map(item => (\n            <SnippetListMenuItem\n              {...item}\n              key={item.id}\n              className=\"snippet-drawer-menu__item py-3\">\n              <div className=\"flex items-center\">\n                {item.icon ? (\n                  <item.icon className=\"mr-2\" />\n                ) : (\n                  <FontColorsOutlined className=\"mr-2\" />\n                )}\n                {item.name}\n              </div>\n            </SnippetListMenuItem>\n          ))}\n        </div>\n      </SnippetListMenuWrapper>\n    )\n  }\n}\n\nconst SnippetListMenuWrapper = styled.div`\n  .snippet-drawer-menu {\n    &__list {\n      height: 100%;\n      overflow-y: auto;\n      overflow-x: hidden;\n\n      ::-webkit-scrollbar {\n        display: none;\n      }\n    }\n  }\n`\n","class EnvStore {\n  pageSize = 10\n  apiBaseUrl =\n    process.env.REACT_APP_API_ROOT ||\n    'https://cors-anywhere.herokuapp.com/http://18.181.199.235:8080'\n\n  get isEnvDev(): boolean {\n    return process.env.NODE_ENV === 'development'\n  }\n  get appBaseName(): string {\n    return process.env.REACT_APP_BASE_NAME || ''\n  }\n  get appTitle(): string {\n    return `%s | ${\n      process.env.REACT_APP_TITLE || '高雄榮民總醫院 數位病理平台'\n    }`\n  }\n  get appUrl(): string {\n    return `${window.location.protocol}//${window.location.host}${this.appBaseName}/#/`\n  }\n  get appBaseUrl(): string {\n    return `/#/${this.appBaseName}`\n  }\n  get fakeApiBaseUrl(): string {\n    return (\n      process.env.REACT_APP_FAKE_API_ROOT ||\n      (this.isEnvDev ? 'http://localhost:3004' : 'http://localhost:3004')\n    )\n  }\n  get publicUrl(): string {\n    return process.env.PUBLIC_URL || ''\n  }\n  get canUseDOM(): boolean {\n    return !!(\n      typeof window !== 'undefined' &&\n      window.document &&\n      window.document.createElement\n    )\n  }\n  set setPageSize(pageSize: number | undefined) {\n    this.pageSize = pageSize || 50\n  }\n  set setApiBaseUrl(url: string) {\n    this.apiBaseUrl = url\n  }\n}\n\nexport const envStore = new EnvStore()\n\nexport function isMobile() {\n  let check = false\n  ;(function (a) {\n    if (\n      /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(\n        a\n      ) ||\n      // eslint-disable-next-line no-useless-escape\n      /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(\n        a.substr(0, 4)\n      )\n    )\n      check = true\n  })(navigator.userAgent || navigator.vendor || (window as any).opera)\n  return check\n}\n\nexport default envStore\n","import React from 'react'\nimport store from 'store'\nimport moment from 'moment'\nimport {\n  update,\n  mergeAll,\n  map,\n  last as Rlast,\n  filter,\n  omit,\n  keys,\n  sort,\n  inc,\n  pathOr,\n} from 'ramda'\nimport {\n  Mutation,\n  MutationOptions,\n  SnippetProps,\n  ReportTemplate,\n  ReportTemplateSetting,\n} from '@/constants/types'\nimport {\n  useReportTemplate as useReportTemplateItem,\n  useReportTemplateState,\n  useCurrentCategoryOfSnippet,\n} from '@/data/useReportTemplate'\nimport { uuid, getNumberFromString } from '@/utils/webHelper'\nimport { confirm } from '@/utils/message'\nconst { compose } = require('ramda')\n\nexport function useUpdateSnippet<T = ReportTemplateSetting>(options: {\n  item: SnippetProps\n  onUpdate: (data: any) => void\n  defaultValue?: any\n}) {\n  const { item, onUpdate, defaultValue = {} } = options\n\n  const [setting, setSetting] = React.useState<T>(\n    pathOr(defaultValue, ['setting'], item) as T\n  )\n\n  const handleOk = (values: T) => {\n    setSetting(values)\n    onUpdate({ ...item, setting: values })\n  }\n\n  return { setting, handleOk }\n}\n\nexport const useReportTemplate = (options: { id?: React.Key; data?: any }) => {\n  const { setSnippetList, snippetList, ...rest } = useReportTemplateItem(\n    options\n  )\n\n  const [category, setCategory] = useCurrentCategoryOfSnippet()\n\n  const handleSnippetUpdate = (data: any[]) => {\n    setSnippetList(prev => ({ ...prev, [category]: data }))\n  }\n\n  const handleTabChange = (activeKey: string) => {\n    setCategory(activeKey)\n  }\n\n  const handleTabMove = (order: string[]) => {\n    const snippetKeys = keys(snippetList)\n\n    setSnippetList(\n      compose(\n        mergeAll,\n        map((key: string) => ({ [key]: snippetList[key] })),\n        sort((a: string, b: string) => {\n          const orderA = order.indexOf(a)\n          const orderB = order.indexOf(b)\n\n          if (orderA !== -1 && orderB !== -1) {\n            return orderA - orderB\n          }\n          if (orderA !== -1) {\n            return -1\n          }\n          if (orderB !== -1) {\n            return 1\n          }\n\n          const ia = snippetKeys.indexOf(a)\n          const ib = snippetKeys.indexOf(b)\n\n          return ia - ib\n        }),\n        keys\n      )(snippetList)\n    )\n  }\n\n  const handleTabAdd = () => {\n    const last = compose(\n      inc,\n      pathOr(0, []),\n      getNumberFromString,\n      Rlast,\n      sort((a: any, b: any) => a - b),\n      keys\n    )(snippetList)\n\n    setSnippetList(prev => ({ ...prev, [`新標籤頁${last}`]: [] }))\n    setCategory(`新標籤頁${last}`)\n  }\n\n  const handleTabRemove = (targetKey: string) => {\n    confirm({\n      title: '確認要刪除此頁籤嗎？',\n      content: '刪除會連同模版資料一起刪除，確認繼續？',\n      onOk: () => {\n        setSnippetList(prev => omit([targetKey], prev))\n\n        if (category === targetKey) {\n          setCategory(\n            compose(\n              Rlast,\n              filter((key: string) => key !== targetKey),\n              keys\n            )(snippetList)\n          )\n        }\n      },\n    })\n  }\n\n  const handleTabNameChange = (targetKey: string) => (\n    evt: React.FocusEvent<HTMLSpanElement>\n  ) => {\n    const newTabName = evt.target.innerHTML\n\n    setSnippetList(prev =>\n      compose(\n        mergeAll,\n        map((key: string) => ({\n          [key === targetKey ? newTabName : key]: prev[key],\n        })),\n        keys\n      )(prev)\n    )\n    setCategory(newTabName)\n  }\n\n  const handleTabEdit = (\n    e:\n      | string\n      | React.MouseEvent<Element, MouseEvent>\n      | React.KeyboardEvent<Element>,\n    action: 'add' | 'remove'\n  ) => {\n    const handler = action === 'add' ? handleTabAdd : handleTabRemove\n\n    handler(e as string)\n  }\n\n  return {\n    ...rest,\n    category,\n    snippetList,\n    setCategory,\n    setSnippetList,\n    handleTabEdit,\n    handleTabChange,\n    handleTabMove,\n    handleTabAdd,\n    handleTabRemove,\n    handleTabNameChange,\n    handleSnippetUpdate,\n  }\n}\n\nexport const useAddNewTemplate = ({ onCompleted }: MutationOptions = {}) => {\n  const [reportTemplates, setReportTemplates] = useReportTemplateState()\n\n  const handler = (values: ReportTemplate) => {\n    let id = uuid()\n    let newList = [\n      ...reportTemplates,\n      {\n        ...values,\n        id,\n        createdAt: moment(),\n        createdAtStr: moment().format('YYYY/MM/DD HH:mm'),\n        updatedAt: moment(),\n        updatedAtStr: moment().format('YYYY/MM/DD HH:mm'),\n      },\n    ]\n\n    setReportTemplates(newList)\n\n    store.set('reportTemplateListState', newList)\n\n    if (onCompleted) {\n      onCompleted({ ...values, id })\n    }\n  }\n\n  return [false, handler] as Mutation\n}\n\nexport const useUpdateTemplate = ({ onCompleted }: MutationOptions = {}) => {\n  const [reportTemplates, setReportTemplates] = useReportTemplateState()\n\n  const handler = (values: ReportTemplate) => {\n    let index = reportTemplates.findIndex(x => `${x.id}` === `${values.id}`)\n    let newList = update(\n      index,\n      {\n        ...values,\n        updatedAt: moment(),\n        updatedAtStr: moment().format('YYYY/MM/DD HH:mm'),\n      },\n      reportTemplates\n    )\n\n    setReportTemplates(newList)\n    store.set('reportTemplateListState', newList)\n\n    if (onCompleted) {\n      onCompleted()\n    }\n  }\n\n  return [false, handler] as Mutation\n}\n","import { ReactText } from 'react'\n\nexport const createFormItemLayout = (label: number = 3, wrapper?: number) => ({\n  labelCol: {\n    xs: { span: label },\n    sm: { span: label },\n  },\n  wrapperCol: {\n    xs: { span: wrapper || 24 - label },\n    sm: { span: wrapper || 24 - label },\n  },\n})\n\nexport const thosandSeprartor = {\n  formatter: (value: number | string | undefined) => {\n    if (!value) {\n      return value as string\n    }\n    return `${value}`.replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')\n  },\n  parser: (value: string | undefined) =>\n    (value ? value.replace(/\\$\\s?|(,*)/g, '') : value) as ReactText,\n}\n\nexport const currency = {\n  formatter: (value: number | string | undefined) => {\n    if (!value) {\n      return value as string\n    }\n    return `$ ${value}`.replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')\n  },\n  parser: (value: string | undefined) =>\n    (value ? value.replace(/\\$\\s?|(,*)/g, '') : value) as ReactText,\n}\n\nexport const percent = {\n  // min: 0,\n  max: 100,\n  formatter: (value: number | string | undefined) => {\n    if (!value) {\n      return value as string\n    }\n    return `${value}%`\n  },\n  parser: (value: string | undefined) =>\n    (value ? value.replace('%', '') : value) as ReactText,\n}\n\nexport const rules = {\n  required: { required: true, message: '此欄位必填' },\n  number: {\n    required: false,\n    type: 'number',\n    message: '請填寫數字',\n    transform(value: any) {\n      if (!value) {\n        return value\n      }\n      return Number(value)\n    },\n  },\n  account: {\n    required: true,\n    message: '欄位長度為8~128字元,特殊符號-,_',\n    pattern: new RegExp(/^.{8,128}$/),\n  },\n  password: {\n    required: true,\n    message: '密碼長度為6~128字元',\n    pattern: new RegExp(/^.{6,128}$/),\n  },\n}\n","import React from 'react'\nimport styled, { css } from 'styled-components'\nimport { Button } from 'antd'\nimport { ButtonProps } from 'antd/lib/button'\nimport { ActionTypes } from '@/constants/enums'\n// import useRouteCRUDAuthCheck from 'shared/hooks/useRouteCRUDAuthCheck'\n// import * as Icons from 'shared/components/Icons'\n\ninterface Props extends Omit<ButtonProps, 'icon'> {\n  children?: React.ReactNode\n  circle?: boolean\n  color?: string\n  css?: React.CSSProperties\n  icon?: string | React.ReactNode\n  onClick?: (evt: React.MouseEvent<HTMLElement>) => any\n  actionType?: ActionTypes\n}\n\nconst StyledButton = styled(Button)<Props>`\n  &.ant-btn {\n    min-width: 80px;\n    border-radius: 4px;\n    font-weight: 500;\n\n    .anticon {\n      margin-right: 6px;\n    }\n\n    svg {\n      width: 20px;\n      height: 20px;\n    }\n\n    &.ant-btn-sm svg {\n      width: 16px;\n      height: 16px;\n    }\n\n    ${p =>\n      p.color === 'primary' &&\n      css`\n        color: #fff;\n        border-color: ${p => p.theme.btn.primary};\n        background: ${p => p.theme.btn.primary};\n\n        &:hover,\n        &:focus,\n        &:active {\n          color: #fff;\n          background: ${p => p.theme.btn.secondary};\n          border-color: ${p => p.theme.btn.secondary};\n        }\n      `};\n\n    ${p =>\n      p.color === 'outline' &&\n      css`\n        padding: 0 8px;\n        color: ${p => p.theme.btn.primary};\n        border: 1.3px solid ${p => p.theme.btn.primary};\n        background: #fff;\n\n        &:hover,\n        &:focus,\n        &:active {\n          color: #fff;\n          background: ${p => p.theme.btn.primary};\n          border: 1.3px solid ${p => p.theme.btn.primary};\n        }\n      `};\n\n    ${p =>\n      p.color === 'danger' &&\n      css`\n        color: ${p => p.theme.btn.danger};\n        border: 1.3px solid ${p => p.theme.btn.danger};\n        background: #fff;\n\n        &:hover,\n        &:focus,\n        &:active {\n          color: ${p => p.theme.btn.danger};\n          background: #fff6e4;\n          border: 1.3px solid ${p => p.theme.btn.danger};\n        }\n      `};\n\n    ${p =>\n      p.type === 'link' &&\n      css`\n        min-width: auto;\n        padding-left: 0;\n        padding-right: 0;\n        background: transparent;\n        border-color: transparent;\n        color: ${p.theme.primary};\n\n        > span {\n          text-decoration: underline;\n        }\n\n        &:hover {\n          background: transparent;\n          border-color: transparent;\n        }\n      `};\n\n    ${p =>\n      p.size === 'small' &&\n      css`\n        line-height: 1.2;\n      `}\n\n    &.hover--none {\n      &:hover,\n      &:focus,\n      &:active {\n        color: initial;\n        background: initial;\n        border-color: initial;\n      }\n    }\n  }\n\n  &.ant-btn.ant-btn-loading:not(.ant-btn-circle):not(.ant-btn-circle-outline):not(.ant-btn-icon-only) {\n    padding-left: 20px;\n  }\n\n  &.ant-btn[disabled] {\n    svg > g path:nth-child(2) {\n      transition: fill 0.4s ease;\n      fill: darkgrey;\n    }\n  }\n`\n\nexport { StyledButton as Butotn }\n\nexport default function ButtonComponent({\n  // icon,\n  children,\n  loading,\n  actionType,\n  ...props\n}: Props) {\n  // const [, checkIsAuthenticated] = useRouteCRUDAuthCheck()\n\n  // if (actionType && !checkIsAuthenticated(actionType)) {\n  //   return null\n  // }\n\n  return (\n    <StyledButton {...props} loading={loading}>\n      {(() => {\n        // if (icon && !loading) {\n        //   let Icon\n\n        //   const isElement = React.isValidElement(icon)\n\n        //   if (!isElement) {\n        //     Icon = icon\n        //   }\n\n        //   if (typeof icon === 'string') {\n        //     const nameCapitalized = icon.charAt(0).toUpperCase() + icon.slice(1)\n        //     const iconName = 'Icon' + nameCapitalized\n        //     Icon = (Icons as any)[iconName]\n        //   }\n\n        //   return (\n        //     <div className=\"l-flex--center\">\n        //       {isElement ? icon : <Icon className=\"c-icon is--secondary\" />}\n        //       {children}\n        //     </div>\n        //   )\n        // }\n\n        return children\n      })()}\n    </StyledButton>\n  )\n}\n"],"sourceRoot":""}