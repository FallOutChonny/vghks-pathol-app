{"version":3,"sources":["../node_modules/@ant-design/icons-svg/es/asn/EyeOutlined.js","../node_modules/@ant-design/icons/es/icons/EyeOutlined.js","containers/report-template-list/report-template-list.tsx","hooks/useModal.tsx","constants/item-types.ts","components/snippet-utils.ts","components/snippet-toolbar.tsx","components/snippet.tsx","components/withScroll.js","components/snippet-scrollable-container.tsx","components/snippet-preview-modal.tsx"],"names":["EyeOutlined","props","ref","React","AntdIcon","Object","assign","icon","EyeOutlinedSvg","displayName","ReportTemplateList","useTitle","useBreadcrumb","name","useReportTemplates","dataSource","content","key","onToggle","ownState","useState","editModalVisible","setEditModalVisible","item","setItem","findItem","useCallback","evt","find","x","path","currentTarget","dataset","handleModalToggle","prev","useModal","previewModalVisible","handlePreviewModalVisible","useReportPreview","setIsPreview","handleTo","pathname","history","push","handlePreview","columns","title","dataIndex","render","v","r","type","onClick","record","replace","id","routes","align","_","data-id","className","DeleteOutlined","snippetList","setting","onCancel","span","color","rowKey","CARD","BOARD","SNIPPET","hasClassName","nodes","n","isNil","includes","canMoveSnippet","element","elem","parentNode","unshift","getPlaceHolderIndex","clientOffset","overSnippet","findSnippet","classList","contains","parentElement","document","elementFromPoint","y","snippetIndex","index","placeholderIndex","Number","isOverSnippet","getDisplayName","Component","length","ToolbarWrapper","styled","div","SHIFT_TYPES","SnippetToolbar","tabIndex","onEdit","onDelete","onShift","handleShift","shift","cx","LeftOutlined","RightOutlined","EditOutlined","withDragSource","DragSource","ItemTypes","beginDrag","fromMenu","originalIndex","canDrag","draggable","connect","monitor","connectDragSource","dragSource","connectDragPreview","dragPreview","isDragging","Snippet","componentDidMount","getEmptyImage","shiftSnippet","handleRemove","confirm","onOk","removeSnippet","handleEditModalVisible","setState","_onMouseOver","_onMouseOut","state","top","this","wrapperId","style","styles","mergeRight","tabSize","isFocus","borderRadius","border","outlineColor","theme","purple150","cursor","position","display","marginLeft","getItemStyles","onMouseOver","onMouseOut","data-index","Children","map","children","child","cloneElement","noop","intBetween","min","max","val","Math","floor","createVerticalStrength","_buffer","point","h","w","buffer","defaultHorizontalStrength","defaultVerticalStrength","ScrollableComponent","WrappedComponent","ScrollingComponent","ctx","handleEvent","dragging","attached","attach","updateScrolling","throttle","container","getBoundingClientRect","box","left","width","height","coords","changedTouches","clientX","clientY","getCoords","scaleX","horizontalStrength","scaleY","verticalStrength","frame","startScrolling","trailing","useScroll","_initial","findDOMNode","wrappedInstance","addEventListener","window","body","clearMonitorSubscription","context","dragDropManager","getMonitor","subscribeToStateChange","handleMonitorChange","_remove","removeEventListener","stopScrolling","i","tick","strengthMultiplier","onScrollChange","scrollLeft","scrollTop","scrollWidth","scrollHeight","clientWidth","clientHeight","raf","detach","cancel","defaultProps","contextType","DndContext","hoist","withScroll","vStrength","ReactDndProvider","compose","require","SnippetPreviewModal","visible","maskClosable","keyboard","footer","gt","__","pathOr","mapIndexed","idx","keys"],"mappings":"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","file":"static/js/12.128876b6.chunk.js","sourcesContent":["// This icon file is generated automatically.\nvar EyeOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z\" } }] }, \"name\": \"eye\", \"theme\": \"outlined\" };\nexport default EyeOutlined;\n","// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport EyeOutlinedSvg from \"@ant-design/icons-svg/es/asn/EyeOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar EyeOutlined = function EyeOutlined(props, ref) {\n  return React.createElement(AntdIcon, Object.assign({}, props, {\n    ref: ref,\n    icon: EyeOutlinedSvg\n  }));\n};\n\nEyeOutlined.displayName = 'EyeOutlined';\nexport default React.forwardRef(EyeOutlined);","import React from 'react'\nimport { replace } from 'ramda'\nimport { Row, Col, Tooltip } from 'antd'\nimport { ColumnProps } from 'antd/lib/table'\nimport { EyeOutlined, DeleteOutlined } from '@ant-design/icons'\nimport { Page } from '@/components/layout'\nimport Button from '@/components/button'\nimport Table from '@/components/query-table'\nimport history from '@/utils/history'\nimport useTitle from '@/hooks/useTitle'\nimport { useReportTemplates, useReportPreview } from '@/hooks/useReportTemplate'\nimport { useBreadcrumb } from '@/hooks/useApp'\nimport useModal from '@/hooks/useModal'\nimport * as routes from '@/constants/routes'\nimport { ReportTemplate } from '@/services/reportService'\nimport ReactDndProvider from '@/components/snippet-scrollable-container'\nimport SnippetPreviewModal from '@/components/snippet-preview-modal'\n\nexport default function ReportTemplateList() {\n  useTitle('結構式報告模版列表')\n  useBreadcrumb([{ name: '結構式報告' }, { name: '結構式報告模版列表' }])\n\n  const [dataSource] = useReportTemplates()\n\n  const [previewModalVisible, handlePreviewModalVisible, { item }] = useModal({\n    content: dataSource.content,\n  })\n\n  const [, setIsPreview] = useReportPreview()\n\n  const handleTo = (pathname: string) => () => {\n    history.push(pathname)\n  }\n\n  const handleToEditPage = (record: ReportTemplate) => () => {\n    handleTo(replace(':id', `${record.id}`)(routes.REPORT_TEMPLATE_EDIT))()\n  }\n\n  const handlePreview = (evt: React.MouseEvent<HTMLElement>) => {\n    setIsPreview()\n    handlePreviewModalVisible(evt)\n  }\n\n  const columns: ColumnProps<ReportTemplate>[] = [\n    {\n      title: '報告名稱',\n      dataIndex: 'name',\n      render: (v, r) => (\n        <Button type=\"link\" onClick={handleToEditPage(r)}>\n          {v}\n        </Button>\n      ),\n    },\n    {\n      title: '創作者',\n      dataIndex: 'author',\n    },\n    {\n      title: '狀態',\n      dataIndex: 'statusName',\n    },\n    {\n      title: '創作時間',\n      dataIndex: 'createdAtStr',\n    },\n    {\n      title: '上次修改時間',\n      dataIndex: 'updatedAtStr',\n    },\n    {\n      title: '報告描述',\n      dataIndex: 'description',\n    },\n    {\n      title: 'actions',\n      dataIndex: 'delete',\n      align: 'center',\n      render: (_, r) => (\n        <>\n          <Tooltip title=\"檢視\">\n            <EyeOutlined\n              data-id={r.id}\n              className=\"c-icon text-lg cursor-pointer mr-3\"\n              onClick={handlePreview}\n            />\n          </Tooltip>\n          <Tooltip title=\"刪除\">\n            <DeleteOutlined\n              data-id={r.id}\n              className=\"c-icon text-lg cursor-pointer\"\n            />\n          </Tooltip>\n        </>\n      ),\n    },\n  ]\n\n  return (\n    <ReactDndProvider className=\"is--preview\">\n      {previewModalVisible && (\n        <SnippetPreviewModal\n          snippetList={item?.setting}\n          onCancel={handlePreview}\n        />\n      )}\n      <Page>\n        <Row className=\"mb-4\">\n          <Col span={24} className=\"flex justify-end\">\n            <Button color=\"outline\">匯入</Button>\n            <Button\n              color=\"outline\"\n              className=\"ml-4\"\n              onClick={handleTo(routes.REPORT_TEMPLATE_CREATE)}>\n              新增\n            </Button>\n          </Col>\n        </Row>\n        <Row>\n          <Col span={24}>\n            <Table rowKey=\"id\" columns={columns} dataSource={dataSource} />\n          </Col>\n        </Row>\n      </Page>\n    </ReactDndProvider>\n  )\n}\n","import React from 'react'\nimport { find, path } from 'ramda'\n\nexport default function useModal<T, TDetail = T>({\n  content,\n  key = 'id',\n  onToggle,\n  ownState,\n}: {\n  content: T[]\n  key?: string\n  ownState?: [T | null, React.Dispatch<React.SetStateAction<T | null>>]\n  onToggle?: (item: T) => any\n}) {\n  const [editModalVisible, setEditModalVisible] = React.useState(false)\n  const [item, setItem] = ownState || React.useState<T | null>(null) // eslint-disable-line\n\n  const findItem = React.useCallback(\n    (evt: React.MouseEvent<HTMLElement>) => {\n      return find(\n        x =>\n          `${path([key], x)}` ===\n          (evt.currentTarget as HTMLElement).dataset['id']\n      )(content)\n    },\n    [content, key]\n  )\n\n  const handleModalToggle = (evt?: React.MouseEvent<HTMLElement>) => {\n    if (!evt) {\n      return\n    }\n\n    const item = findItem(evt)\n\n    if (!item) {\n      setItem(null)\n    }\n\n    if (item) {\n      setItem(item as T)\n    }\n\n    if (onToggle) {\n      onToggle(item as T)\n    }\n  }\n\n  const handleEditModalVisible = (evt?: React.MouseEvent<HTMLElement>) => {\n    setEditModalVisible(prev => !prev)\n    handleModalToggle(evt)\n  }\n\n  return [\n    editModalVisible,\n    handleEditModalVisible,\n    {\n      item,\n      handleModalToggle,\n      setItem,\n    },\n  ] as [\n    boolean,\n    (evt?: React.MouseEvent<HTMLElement, MouseEvent> | undefined) => void,\n    {\n      item: T | null\n      setItem: (value: React.SetStateAction<T | null>) => void\n      handleModalToggle: (\n        evt?: React.MouseEvent<HTMLElement, MouseEvent> | undefined\n      ) => void\n      itemDetail: TDetail\n    }\n  ]\n}\n","export default {\n  CARD: 'card',\n  BOARD: 'board',\n  SNIPPET: 'snippet',\n}\n","import { includes } from 'ramda'\nimport { XYCoord } from 'react-dnd'\nimport { isNil } from '@/utils/webHelper'\n\n/* prettier-ignore */\nconst REPORT_TEMPLATE_BUILDER_CLASSNAME = 'report-template-builder__main-content'\nconst UI_DRAGGABLE_CLASSNAME = 'ui-draggable'\n\nconst hasClassName = (nodes: Element[], className: string) => {\n  return nodes.find(\n    n => !isNil(n.className) && includes(className)(n.className)\n  )\n}\n\nexport function canMoveSnippet(\n  element: Element | null,\n  className = REPORT_TEMPLATE_BUILDER_CLASSNAME\n) {\n  let elem = element\n\n  const nodes: Element[] = []\n  nodes.push(elem as Element)\n\n  while (elem?.parentNode) {\n    nodes.unshift(elem.parentNode as Element)\n    elem = elem.parentNode as Element\n  }\n\n  if (\n    hasClassName(nodes, 'report-template-builder-contentarea--fixed-layout') ||\n    hasClassName(nodes, 'snippet-drawer-menu')\n  ) {\n    return false\n  }\n  if (\n    hasClassName(nodes, className) ||\n    hasClassName(nodes, UI_DRAGGABLE_CLASSNAME)\n  ) {\n    return true\n  }\n\n  return false\n}\n\nfunction findSnippet(\n  element: HTMLElement,\n  className = UI_DRAGGABLE_CLASSNAME\n): HTMLElement | null {\n  if (element.classList.contains(className)) {\n    return element\n  }\n  return element.parentElement && findSnippet(element.parentElement, className)\n}\n\nexport function getPlaceHolderIndex(clientOffset: XYCoord) {\n  const hoverElement = document.elementFromPoint(clientOffset.x, clientOffset.y)\n\n  // find ui-draggable classname\n  const overSnippet = findSnippet(hoverElement as NonNullable<HTMLElement>)\n\n  const snippetIndex = overSnippet && overSnippet.dataset.index\n  const placeholderIndex = overSnippet ? Number(overSnippet.dataset.index) : -1\n\n  const isOverSnippet = !isNil(snippetIndex)\n\n  return {\n    overSnippet,\n    placeholderIndex,\n    isOverSnippet: isOverSnippet,\n  }\n}\n\nexport default function getDisplayName(Component: any) {\n  return (\n    Component.displayName ||\n    Component.name ||\n    (typeof Component === 'string' && Component.length > 0\n      ? Component\n      : 'Unknown')\n  )\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport {\n  EditOutlined,\n  DeleteOutlined,\n  RightOutlined,\n  LeftOutlined,\n} from '@ant-design/icons'\nimport cx from 'classnames'\nimport { Tooltip } from 'antd'\n\ntype Props = {\n  tabIndex: number\n  onEdit: () => void\n  onDelete: () => void\n  onShift: (shift: number) => void\n}\n\nconst ToolbarWrapper = styled.div`\n  position: absolute;\n  top: 8px;\n  right: 15px;\n  visibility: hidden;\n  transition: visibility 0s, opacity 0.3s, max-height 0.6s linear;\n  opacity: 0;\n  z-index: 1;\n\n  &.is--over {\n    visibility: visible;\n    transition: visibility 0s, opacity 0.3s, max-height 0.6s linear;\n    opacity: 0.8;\n  }\n`\n\nexport const SHIFT_TYPES = {\n  LEFT: -1,\n  RIGHT: 1,\n}\n\nexport default function SnippetToolbar({\n  tabIndex,\n  onEdit,\n  onDelete,\n  onShift,\n}: Props) {\n  const handleShift = (shift: number) => () => {\n    onShift(shift)\n  }\n\n  return (\n    <ToolbarWrapper\n      className={cx('text-primary', { 'is--over': tabIndex === 1 })}>\n      <Tooltip title=\"向左縮排\">\n        <LeftOutlined\n          className=\"mr-2 cursor-pointer\"\n          onClick={handleShift(SHIFT_TYPES.LEFT)}\n        />\n      </Tooltip>\n      <Tooltip title=\"向右縮排\">\n        <RightOutlined\n          className=\"mr-2 cursor-pointer\"\n          onClick={handleShift(SHIFT_TYPES.RIGHT)}\n        />\n      </Tooltip>\n      <Tooltip title=\"編輯\">\n        <EditOutlined className=\"mr-2 cursor-pointer\" onClick={onEdit} />\n      </Tooltip>\n      <Tooltip title=\"刪除\">\n        <DeleteOutlined className=\"cursor-pointer\" onClick={onDelete} />\n      </Tooltip>\n    </ToolbarWrapper>\n  )\n}\n\nexport { SnippetToolbar }\n","import React from 'react'\nimport { DragSource, ConnectDragPreview, ConnectDragSource } from 'react-dnd'\nimport { getEmptyImage } from 'react-dnd-html5-backend'\nimport { mergeRight } from 'ramda'\nimport cx from 'classnames'\nimport { confirm } from '@/utils/message'\nimport { SnippetProps } from '@/constants/types'\nimport ItemTypes from '@/constants/item-types'\nimport SnippetToolbar from './snippet-toolbar'\nimport theme from '../theme'\n\ntype Props = {\n  id?: React.Key\n  wrapperId?: string\n  className?: string\n  style?: React.CSSProperties\n  index?: number\n  tabSize?: number\n  isDragging?: boolean\n  draggable?: boolean\n  fromMenu?: boolean\n  connectDragPreview: ConnectDragPreview\n  connectDragSource: ConnectDragSource\n  children?: React.ReactNode\n  findSnippet?(id: React.Key): { index: number; snippet: SnippetProps }\n  shiftSnippet?(id: React.Key, shift: number): any\n  removeSnippet?(index: number): void\n}\n\ntype State = {\n  top: number\n  tabIndex: number\n  editModalVisible: boolean\n}\n\nconst withDragSource = DragSource(\n  ItemTypes.BOARD,\n  {\n    beginDrag(props: Props) {\n      return {\n        ...props,\n        fromMenu: false,\n        originalIndex: (props as any).findSnippet(props.id).index,\n      }\n    },\n    canDrag(props: Props) {\n      return !!(props.draggable && !props.fromMenu)\n    },\n  },\n  (connect, monitor) => ({\n    connectDragSource: connect.dragSource(),\n    connectDragPreview: connect.dragPreview(),\n    isDragging: monitor.isDragging(),\n  })\n)\n\nclass Snippet extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props)\n\n    this.state = {\n      top: 0,\n      tabIndex: -1,\n      editModalVisible: false,\n    }\n  }\n\n  componentDidMount = () => {\n    const { connectDragPreview } = this.props\n    if (connectDragPreview) {\n      connectDragPreview(getEmptyImage() /* { anchorX: 0.2, anchorY: 0.1 } */)\n    }\n  }\n\n  handleShift = (shift: number) => {\n    const { id, shiftSnippet } = this.props\n\n    if (shiftSnippet && id) {\n      shiftSnippet(id, shift)\n    }\n  }\n\n  handleRemove = () => {\n    confirm({\n      content: '刪除後將無法還原，確認繼續？',\n      title: '確認要刪除這個模版?',\n      onOk: () => {\n        ;(this.props as any).removeSnippet(this.props.index)\n      },\n      onCancel() {},\n    })\n  }\n\n  handleEditModalVisible = () => {\n    this.setState(prev => ({ editModalVisible: !prev.editModalVisible }))\n  }\n\n  _onMouseOver = () => {\n    this.setState({ tabIndex: 1 })\n  }\n\n  _onMouseOut = () => {\n    this.setState({ tabIndex: -1 })\n  }\n\n  render() {\n    const {\n      props: {\n        connectDragSource,\n        connectDragPreview,\n        wrapperId,\n        index,\n        draggable,\n        style = {},\n        className = 'mb-3',\n      },\n      state: { tabIndex, editModalVisible },\n    } = this\n\n    const styles = mergeRight(\n      getItemStyles({ ...this.props, ...this.state }),\n      style\n    )\n\n    return connectDragSource(\n      connectDragPreview(\n        <div\n          id={wrapperId}\n          style={styles}\n          className={cx(\n            'ui-sortable',\n            { 'ui-draggable': draggable },\n            className\n          )}\n          tabIndex={tabIndex}\n          onMouseOver={this._onMouseOver}\n          onMouseOut={this._onMouseOut}\n          data-index={index}>\n          {draggable && (\n            <SnippetToolbar\n              tabIndex={tabIndex}\n              onEdit={this.handleEditModalVisible}\n              onDelete={this.handleRemove}\n              onShift={this.handleShift}\n            />\n          )}\n          {React.Children.map(this.props.children, child =>\n            React.cloneElement(child as any, {\n              editModalVisible,\n              handleEditModalVisible: this.handleEditModalVisible,\n            })\n          )}\n        </div>\n      )\n    )\n  }\n}\n\nfunction getItemStyles(props: Partial<Props & State>): React.CSSProperties {\n  const { isDragging, tabIndex, draggable, tabSize = 0 } = props\n\n  const isFocus = tabIndex === 1\n\n  return {\n    ...(isFocus ? { borderRadius: 3 } : {}),\n    ...(draggable\n      ? { border: `1px dashed ${draggable ? '#e7e7e7' : 'transparent'}` }\n      : {\n          outlineColor: isFocus ? theme.purple150 : 'transparent',\n        }),\n    cursor: 'default',\n    position: 'relative',\n    display: isDragging ? 'none' : 'block',\n    marginLeft: tabSize * 50,\n  }\n}\n\nexport default withDragSource(Snippet)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { findDOMNode } from 'react-dom'\nimport { DndContext } from 'react-dnd'\nimport throttle from 'lodash.throttle'\nimport raf from 'raf'\nimport hoist from 'hoist-non-react-statics'\nimport getDisplayName from './snippet-utils'\n\nfunction noop() {}\n\nfunction intBetween(min, max, val) {\n  return Math.floor(Math.min(max, Math.max(min, val)))\n}\n\nfunction getCoords(evt) {\n  if (evt.type === 'touchmove') {\n    return {\n      x: evt.changedTouches[0].clientX,\n      y: evt.changedTouches[0].clientY,\n    }\n  }\n\n  return { x: evt.clientX, y: evt.clientY }\n}\n\nconst DEFAULT_BUFFER = 150\n\nexport function createHorizontalStrength(_buffer) {\n  return function defaultHorizontalStrength({ x, w, y, h }, point) {\n    const buffer = Math.min(w / 2, _buffer)\n    const inRange = point.x >= x && point.x <= x + w\n    const inBox = inRange && point.y >= y && point.y <= y + h\n\n    if (inBox) {\n      if (point.x < x + buffer) {\n        return (point.x - x - buffer) / buffer\n      } else if (point.x > x + w - buffer) {\n        return -(x + w - point.x - buffer) / buffer\n      }\n    }\n\n    return 0\n  }\n}\n\nexport function createVerticalStrength(_buffer) {\n  return function defaultVerticalStrength({ y, h, x, w }, point) {\n    const buffer = Math.min(h / 2, _buffer)\n    const inRange = point.y >= y && point.y <= y + h\n    const inBox = inRange && point.x >= x && point.x <= x + w\n\n    if (inBox) {\n      if (point.y < y + buffer) {\n        return (point.y - y - buffer) / buffer\n      } else if (point.y > y + h - buffer) {\n        return -(y + h - point.y - buffer) / buffer\n      }\n    }\n\n    return 0\n  }\n}\n\nexport const defaultHorizontalStrength = createHorizontalStrength(\n  DEFAULT_BUFFER\n)\n\nexport const defaultVerticalStrength = createVerticalStrength(DEFAULT_BUFFER)\n\nexport default function createScrollingComponent(WrappedComponent) {\n  class ScrollingComponent extends React.Component {\n    static displayName = `Scrolling(${getDisplayName(WrappedComponent)})`\n\n    static propTypes = {\n      onScrollChange: PropTypes.func,\n      verticalStrength: PropTypes.func,\n      horizontalStrength: PropTypes.func,\n      strengthMultiplier: PropTypes.number,\n    }\n\n    static defaultProps = {\n      useScroll: true,\n      onScrollChange: noop,\n      verticalStrength: defaultVerticalStrength,\n      horizontalStrength: defaultHorizontalStrength,\n      strengthMultiplier: 30,\n    }\n\n    static contextType = DndContext\n\n    constructor(props, ctx) {\n      super(props, ctx)\n\n      this.scaleX = 0\n      this.scaleY = 0\n      this.frame = null\n\n      this.attached = false\n      this.dragging = false\n    }\n\n    componentDidMount() {\n      if (this.props.useScroll) {\n        this._initial()\n      }\n    }\n\n    _initial() {\n      // window.document.body.addEventListener('dragover', this.handleEvent);\n      this.container = findDOMNode(this.wrappedInstance)\n      this.container.addEventListener('dragover', this.handleEvent)\n      // touchmove events don't seem to work across siblings, so we unfortunately\n      // have to attach the listeners to the body\n      window.document.body.addEventListener('touchmove', this.handleEvent)\n\n      this.clearMonitorSubscription = this.context.dragDropManager\n        .getMonitor()\n        .subscribeToStateChange(() => this.handleMonitorChange())\n    }\n\n    componentWillUnmount() {\n      if (this.props.useScroll) {\n        this._remove()\n      }\n    }\n\n    _remove() {\n      // window.document.body.removeEventListener('dragover', this.handleEvent);\n      this.container.removeEventListener('dragover', this.handleEvent)\n      window.document.body.removeEventListener('touchmove', this.handleEvent)\n      this.clearMonitorSubscription()\n      this.stopScrolling()\n    }\n\n    handleEvent = evt => {\n      if (this.dragging && !this.attached) {\n        this.attach()\n        this.updateScrolling(evt)\n      }\n    }\n\n    handleMonitorChange() {\n      const isDragging = this.context.dragDropManager.getMonitor().isDragging()\n\n      if (!this.dragging && isDragging) {\n        this.dragging = true\n      } else if (this.dragging && !isDragging) {\n        this.dragging = false\n        this.stopScrolling()\n      }\n    }\n\n    attach() {\n      this.attached = true\n      window.document.body.addEventListener('dragover', this.updateScrolling)\n      window.document.body.addEventListener('touchmove', this.updateScrolling)\n    }\n\n    detach() {\n      this.attached = false\n      window.document.body.removeEventListener('dragover', this.updateScrolling)\n      window.document.body.removeEventListener(\n        'touchmove',\n        this.updateScrolling\n      )\n    }\n\n    // Update scaleX and scaleY every 100ms or so\n    // and start scrolling if necessary\n    updateScrolling = throttle(\n      evt => {\n        const {\n          left: x,\n          top: y,\n          width: w,\n          height: h,\n        } = this.container.getBoundingClientRect()\n        const box = { x, y, w, h }\n        const coords = getCoords(evt)\n\n        // calculate strength\n        this.scaleX = this.props.horizontalStrength(box, coords)\n        this.scaleY = this.props.verticalStrength(box, coords)\n\n        // start scrolling if we need to\n        if (!this.frame && (this.scaleX || this.scaleY)) {\n          this.startScrolling()\n        }\n      },\n      100,\n      { trailing: false }\n    )\n\n    startScrolling() {\n      let i = 0\n      const tick = () => {\n        const { scaleX, scaleY, container } = this\n        const { strengthMultiplier, onScrollChange } = this.props\n\n        // stop scrolling if there's nothing to do\n        if (strengthMultiplier === 0 || scaleX + scaleY === 0) {\n          this.stopScrolling()\n          return\n        }\n\n        // there's a bug in safari where it seems like we can't get\n        // mousemove events from a container that also emits a scroll\n        // event that same frame. So we double the strengthMultiplier and only adjust\n        // the scroll position at 30fps\n        if (i++ % 2) {\n          const {\n            scrollLeft,\n            scrollTop,\n            scrollWidth,\n            scrollHeight,\n            clientWidth,\n            clientHeight,\n          } = container\n\n          const newLeft = scaleX\n            ? (container.scrollLeft = intBetween(\n                0,\n                scrollWidth - clientWidth,\n                scrollLeft + scaleX * strengthMultiplier\n              ))\n            : scrollLeft\n\n          const newTop = scaleY\n            ? (container.scrollTop = intBetween(\n                0,\n                scrollHeight - clientHeight,\n                scrollTop + scaleY * strengthMultiplier\n              ))\n            : scrollTop\n\n          onScrollChange(newLeft, newTop)\n        }\n        this.frame = raf(tick)\n      }\n\n      tick()\n    }\n\n    stopScrolling() {\n      this.detach()\n      this.scaleX = 0\n      this.scaleY = 0\n\n      if (this.frame) {\n        raf.cancel(this.frame)\n        this.frame = null\n      }\n    }\n\n    render() {\n      const {\n        // not passing down these props\n        strengthMultiplier,\n        verticalStrength,\n        horizontalStrength,\n        onScrollChange,\n        ...props\n      } = this.props\n\n      return (\n        <WrappedComponent\n          ref={ref => {\n            this.wrappedInstance = ref\n          }}\n          {...props}\n        />\n      )\n    }\n  }\n\n  return hoist(ScrollingComponent, WrappedComponent)\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport cx from 'classnames'\nimport withScroll, { createVerticalStrength } from './withScroll'\n\ninterface Props {\n  className?: string\n  useScroll?: boolean\n}\n\nconst DndScrollableElement = styled.div`\n  height: 85vh;\n  padding-top: 0;\n  overflow-y: scroll;\n\n  .report-template-builder {\n    &__main-content {\n      min-height: 371.25mm;\n      margin: 0 auto;\n      padding: 16px;\n      box-sizing: border-box;\n      max-width: 100%;\n      background: #fff;\n      border-top-right-radius: 16px;\n      border-bottom-left-radius: 16px;\n      border-bottom-right-radius: 16px;\n    }\n\n    &__contentarea {\n      min-height: 348.75mm;\n    }\n\n    &__contentarea--fixed-layout {\n      min-height: auto;\n    }\n\n    &__snippet-toolbar {\n      visibility: hidden;\n    }\n  }\n\n  .ui-draggable {\n    &:focus,\n    &:active {\n      outline: 0;\n\n      .course-builder__snippet-toolbar {\n        visibility: visible;\n        opacity: 1;\n        transition: visibility 0s, opacity 0.3s, max-height 0.6s linear;\n      }\n    }\n  }\n\n  &.is--preview {\n    height: auto;\n  }\n`\n\nconst ScrollableComponent = withScroll(DndScrollableElement)\n\nconst vStrength = createVerticalStrength(150)\n\nexport default class ReactDndProvider extends React.Component<Props> {\n  static defaultProps = {\n    useScroll: true,\n  }\n\n  render() {\n    const { className, useScroll } = this.props\n\n    return (\n      <ScrollableComponent\n        useScroll={useScroll}\n        verticalStrength={vStrength}\n        strengthMultiplier={100}\n        className={cx('report-template-builder', className)}>\n        {this.props.children}\n      </ScrollableComponent>\n    )\n  }\n}\n","import React from 'react'\nimport { ModalProps } from 'antd/lib/modal'\nimport { length, __, gt, keys, map, pathOr } from 'ramda'\nimport Modal from '@/components/modal'\nimport Snippet from '@/components/snippet'\nimport { mapIndexed } from '@/utils/webHelper'\nconst { compose } = require('ramda')\n\ninterface Props extends ModalProps {\n  snippetList?: { [key: string]: any[] }\n}\n\nexport default function SnippetPreviewModal({ onCancel, snippetList }: Props) {\n  return (\n    <Modal\n      visible\n      style={{ top: 30 }}\n      maskClosable={false}\n      className=\"ant-modal-header--border-none\"\n      keyboard={false}\n      width=\"85%\"\n      onCancel={onCancel}\n      footer={false}>\n      {compose(\n        map((key: string) => (\n          <div key={key}>\n            {compose(gt(__, 0), length, pathOr([], [key]))(snippetList) && (\n              <h2 className=\"my-2\">{key}</h2>\n            )}\n            {compose(\n              mapIndexed((item: any, idx: number) => (\n                <Snippet key={item.id} draggable={false}>\n                  <item.Component\n                    id={item.id}\n                    className={item.id}\n                    item={item}\n                    index={idx}\n                  />\n                </Snippet>\n              )),\n              pathOr([], [key])\n            )(snippetList)}\n          </div>\n        )),\n        keys\n      )(snippetList)}\n    </Modal>\n  )\n}\n"],"sourceRoot":""}