(this["webpackJsonpvghks-pathol-app"]=this["webpackJsonpvghks-pathol-app"]||[]).push([[8],{1134:function(e,t,a){"use strict";a.d(t,"a",(function(){return k}));a(432);var n=a(345),c=a.n(n),r=(a(100),a(20)),l=a.n(r),i=a(9),o=a(0),s=a.n(o),m=a(12),d=a(156),u=a(29),p=a(449),b=a(157),f=a(81),O=a(44),g=a(42),h=a(59),j=a(139),E=a(163),v=a(61),y=a(178),N=a(27).compose,w=m.d.div.withConfig({displayName:"snippet-preview-modal__SnippetPreviewWrapper",componentId:"sc-14u4a7f-0"})([".ant-card-head{min-height:auto;}.ant-card-head-title{padding-top:0;}.ant-card-body{padding-top:12px;padding-bottom:8px;}"]);function k(e){var t=e.item,a=e.onCancel,n=l.a.useForm(),r=Object(i.a)(n,1)[0],o=Object(h.h)({id:null===t||void 0===t?void 0:t.name}),m=o.snippetList,k=o.loading;return s.a.createElement(j.a,{visible:!0,style:{top:30},maskClosable:!1,className:"ant-modal-header--border-none",keyboard:!1,width:"65%",onCancel:a,footer:[s.a.createElement(v.a,{key:"btn-cancel",color:"outline",onClick:a},"\u78ba\u8a8d")]},s.a.createElement(c.a,{spinning:k},s.a.createElement(l.a,{form:r},s.a.createElement(w,null,Object(d.a)(Array,m)?Object(E.d)()(m):N(Object(u.a)((function(e){return s.a.createElement("div",{key:e},N(Object(p.a)(b.a,0),f.a,Object(O.a)([],[e]))(m)&&s.a.createElement("h2",{style:{background:y.a.darkGrey,width:"50%"},className:"bg-darkGrey text-white pl-3 my-2"},e),N(Object(E.d)(),Object(O.a)([],[e]))(m))})),g.a)(m)))))}},1138:function(e,t,a){"use strict";var n=a(0),c=a.n(n),r=a(127),l=a(211),i=a(36),o=a(49),s=a(45),m=a(46),d=function(e){Object(s.a)(a,e);var t=Object(m.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return c.a.createElement("div",null)}}]),a}(c.a.Component),u=a(163),p={position:"fixed",pointerEvents:"none",zIndex:100,left:0,top:0,width:"100%",height:"100%"};function b(e){var t=e.initialOffset,a=e.currentOffset;if(!t||!a)return{display:"none"};var n=a.x,c=a.y,r="translate(".concat(n,"px, ").concat(c,"px)");return{transform:r,WebkitTransform:r}}t.a=Object(r.DragLayer)((function(e){return{item:e.getItem(),itemType:e.getItemType(),initialOffset:e.getInitialSourceClientOffset(),currentOffset:e.getSourceClientOffset(),isDragging:e.isDragging()}}))((function(e){var t=e.itemType,a=e.isDragging,n=e.currentOffset;if(!a)return null;if(!n)return null;var r=document.elementFromPoint(n.x,n.y),i=!1;return r&&(i=Object(u.a)(r)),c.a.createElement("div",{className:"report-template-builder__drag-layer",style:p},c.a.createElement("div",{style:b(e)},function(e){var a=e.canDrop;switch(t){case l.a.BOARD:case l.a.SNIPPET:return c.a.createElement(d,{canDrop:a});default:return null}}({canDrop:i})))}))},1140:function(e,t,a){"use strict";a.d(t,"b",(function(){return n}));var n,c=a(3),r=a(0),l=a.n(r),i=a(44),o=a(340),s=a(63),m=a(139),d=a(144),u=a(27).compose,p=m.a.confirm;t.a=function(e){var t=e.content,a=e.dataSource,r=void 0===a?[]:a,m=e.onOk,b=e.onBeforeOpen,f=e.refetchQueries,O=e.onCancel,g=e.item,h=e.modalProps,j=void 0===h?{}:h,E=e.onCompleted,v=l.a.useRef((function(){return{}})),y=function(e){var a=u(Object(i.a)(g,[]),Object(o.a)((function(t){return"".concat(Object(s.a)(["id"],t))===e.currentTarget.dataset.id})))(r);n=p(Object(c.a)(Object(c.a)({},Object(d.b)(t,j)),{},{okText:"\u78ba\u8a8d",onOk:function(){return n&&n.update({okButtonProps:{className:"c-btn c-btn--danger",style:{minWidth:80,marginRight:24},loading:!0}}),new Promise((function(e){m&&m(a),E&&E(),v.current=function(){e(),f&&f()}}))},onCancel:function(){O&&O()}}))};return[function(e){b&&b(),y(e)},function(){n&&n.update({okButtonProps:{className:"c-btn c-btn--danger",style:{minWidth:96,marginRight:16},loading:!1}})}]}},1187:function(e,t,a){"use strict";var n=a(0),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h720c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"minus",theme:"outlined"},r=a(25),l=function(e,t){return n.createElement(r.a,Object.assign({},e,{ref:t,icon:c}))};l.displayName="MinusOutlined";t.a=n.forwardRef(l)},1188:function(e,t,a){"use strict";a.r(t);a(432);var n=a(345),c=a.n(n),r=(a(201),a(64)),l=a.n(r),i=(a(202),a(41)),o=a.n(i),s=a(74),m=a(3),d=a(11),u=(a(100),a(20)),p=a.n(u),b=a(9),f=(a(346),a(125)),O=a.n(f),g=a(12),h=a(0),j=a.n(h),E=a(1187),v=a(1103),y=a(50),N=a(420),w=a(138),k=a(29),C=a(44),x=a(42),S=a(433),_=a(61),I=a(33),T=a(436),P=a(434),D=a(170),B=a(1140),F=a(343),R=a(435),W=a(444),A=a(1138),L=a(443),G=a(1134),J=a(151),M=a(59),q=a(90),z=a(71),H=a(40),K=a(22),U=a(27).compose,V=Object(g.d)("div").withConfig({displayName:"report-template-builder___StyledDiv",componentId:"sc-550gpb-0"})({width:60}),Q=Object(g.d)("div").withConfig({displayName:"report-template-builder___StyledDiv2",componentId:"sc-550gpb-1"})({width:60}),X=Object(g.d)("div").withConfig({displayName:"report-template-builder___StyledDiv3",componentId:"sc-550gpb-2"})({width:60}),Y=Object(g.d)("span").withConfig({displayName:"report-template-builder___StyledSpan",componentId:"sc-550gpb-3"})({whiteSpace:"nowrap"});t.default=function(e){Object(P.a)("\u7d50\u69cb\u5f0f\u5831\u544a\u6a21\u7248"),Object(D.a)([{name:"\u5831\u544a\u6a21\u7248"},{name:"\u7d50\u69cb\u5f0f\u5831\u544a\u6a21\u7248"}]);var t=e.match.params,a=Object(M.h)({id:t.id,onError:function(e){Object(y.a)("template does not exist.",null===e||void 0===e?void 0:e.message)&&(q.a.push(H.n),O.a.error("\u5831\u544a\u6a21\u7248\u4e0d\u5b58\u5728"))}}),n=a.loading,r=a.category,i=a.reportTemplate,u=a.snippetList,f=a.handleTabChange,g=a.handleTabEdit,h=a.handleTabMove,Z=a.handleTabNameChange,$=a.handleSnippetUpdate;j.a.useEffect((function(){re.setFieldsValue(i)}),[JSON.stringify(i)]);var ee=Object(M.g)(),te=Object(b.a)(ee,2),ae=te[0],ne=te[1],ce=p.a.useForm(),re=Object(b.a)(ce,1)[0],le=Object(M.d)({onCompleted:function(e){q.a.push(Object(N.a)(":id",null===e||void 0===e?void 0:e.data.name)(H.m)),O.a.success("\u5831\u544a\u6a21\u7248\u5df2\u5efa\u7acb\u6210\u529f")}}),ie=Object(b.a)(le,2),oe=ie[0],se=ie[1],me=Object(M.l)({onCompleted:function(e){q.a.push(Object(N.a)(":id",null===e||void 0===e?void 0:e.data.name)(H.m)),O.a.success("\u5831\u544a\u6a21\u7248\u5df2\u5132\u5b58\u6210\u529f")}}),de=Object(b.a)(me,2),ue=de[0],pe=de[1],be=Object(M.l)({onCompleted:function(e){O.a.success("\u5831\u544a\u6a21\u7248\u5df2\u767c\u4f48\u6210\u529f"),B.b&&B.b.destroy()},onError:function(){B.b&&je()}}),fe=Object(b.a)(be,2)[1],Oe=Object(B.a)({content:"\u767c\u4f48\u5f8c\u6a21\u7248\u5c07\u53ef\u4ee5\u5728\u5831\u544a\u4e2d\u4f7f\u7528\uff0c\u78ba\u8a8d\u8981\u767c\u4f48\u55ce\uff1f",onOk:function(){return fe(Object(m.a)(Object(m.a)({},i),{},{templateName:i.name,status:K.e.FINISH}))}}),ge=Object(b.a)(Oe,2),he=ge[0],je=ge[1],Ee=Object(T.a)(H.n),ve=Object(M.f)({filename:"\u5831\u544a\u6a21\u7248",data:Object(m.a)(Object(m.a)({},i),{},{setting:u})});return Object(D.c)(j.a.createElement("div",{className:"inline-flex"},j.a.createElement(_.a,{color:"outline",className:"ml-6 bg-transparent text-white border-white",onClick:he},"\u767c\u4f48"),j.a.createElement(_.a,{color:"outline",className:"ml-6 bg-transparent text-white border-white",onClick:function(){re.validateFields().then((function(e){var t=(null===i||void 0===i?void 0:i.id)?pe:se,a=(e.data,Object(d.a)(e,["data"]));t(Object(m.a)(Object(m.a)(Object(m.a)({},i),a),{},{setting:U(w.a,Object(k.a)((function(e){return Object(s.a)({},e,U(Object(k.a)((function(t){t.Component,t.icon;var a=Object(d.a)(t,["Component","icon"]);return Object(m.a)(Object(m.a)({},a),{},{categoryName:e})})),Object(C.a)([],[e]))(u))})),x.a)(u)}))}))}},"\u5132\u5b58"),j.a.createElement(_.a,{color:"outline",className:"ml-6 bg-transparent text-white border-white",onClick:Ee},"\u53d6\u6d88"),j.a.createElement(_.a,{color:"outline",className:"ml-6 bg-transparent text-white border-white",onClick:ve},"\u532f\u51fa"),j.a.createElement(_.a,{color:"outline",className:"ml-6 bg-transparent text-white border-white",onClick:ne},"\u9810\u89bd"))),j.a.createElement(R.a,null,ae&&j.a.createElement(G.a,{item:Object(m.a)(Object(m.a)({},i),{},{setting:u}),onCancel:ne}),j.a.createElement(A.a,null),j.a.createElement(c.a,{spinning:!!(oe||ue||n)},j.a.createElement(S.a,null,j.a.createElement(p.a,{form:re,initialValues:Object(m.a)({},i)},j.a.createElement(l.a,{gutter:48,className:"pt-2 relative"},j.a.createElement(o.a,{lg:5,md:8,sm:24,className:"sm:px-3"},j.a.createElement(J.a,{defaultActiveKey:[1,2],expandIconPosition:"right",className:"shadow-2xl header-pl-clear",expandIcon:function(e){return e.isActive?j.a.createElement(E.a,null):j.a.createElement(v.a,null)}},j.a.createElement(J.a.Panel,{header:"\u6a21\u7248\u8cc7\u8a0a",key:1},j.a.createElement(l.a,{className:"mb-2 text-sm text-darkGrey"},j.a.createElement(o.a,{span:24,className:"mb-3"},j.a.createElement(V,{className:"inline-block"},"\u540d\u7a31:"),j.a.createElement(p.a.Item,{noStyle:!0,name:"name",rules:[z.d.required]},j.a.createElement(I.c,{className:"w-2/3 sm:w-full"}))),j.a.createElement(o.a,{span:24,className:"my-3"},j.a.createElement(Q,{className:"inline-block"},"\u63cf\u8ff0:"),j.a.createElement(p.a.Item,{noStyle:!0,name:"description"},j.a.createElement(I.c,{className:"w-2/3 sm:w-full"}))),j.a.createElement(o.a,{span:24,className:"my-3"},j.a.createElement(X,{className:"inline-block"},"\u5275\u4f5c\u8005:"),j.a.createElement(p.a.Item,{noStyle:!0,name:"author",rules:[z.d.required]},j.a.createElement(I.c,{className:"w-2/3 sm:w-full"}))))),j.a.createElement(J.a.Panel,{header:"\u5de5\u5177\u5217",key:2},j.a.createElement(l.a,null,j.a.createElement(o.a,{span:24},j.a.createElement(W.a,null)))))),j.a.createElement(F.a,{type:"editable-card",activeKey:r,onChange:f,onEdit:g,moveTabNode:h,className:"flex-1"},U(Object(k.a)((function(e){return j.a.createElement(F.a.TabPane,{closable:!0,key:e,tab:j.a.createElement(Y,{contentEditable:!0,suppressContentEditableWarning:!0,spellCheck:!1,className:"outline-none",onBlur:Z(e)},e)},j.a.createElement(o.a,{span:19,className:"report-template-builder__main-content"},j.a.createElement(L.a,{draggable:!ae,snippetList:u[e],onSnippetUpdate:$})))})),x.a)(u)))))))}}}]);
//# sourceMappingURL=8.1fe86802.chunk.js.map