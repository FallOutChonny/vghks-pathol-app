{"version":3,"sources":["hooks/useFormValues.ts","../node_modules/@ant-design/icons-svg/es/asn/EyeOutlined.js","../node_modules/@ant-design/icons/es/icons/EyeOutlined.js","containers/report-list/report-list.tsx"],"names":["useFormValues","startDateField","endDateField","format","values","date","rest","getRangeDate","startDate","endDate","evolve","createDate","ifElse","isNil","identity","invoker","reportDate","EyeOutlined","props","ref","React","AntdIcon","Object","assign","icon","EyeOutlinedSvg","displayName","compose","require","formItemLayout","createFormItemLayout","ReportList","useTitle","user","useAuth","setBreadcrumb","useBreadcrumb","name","useState","shouldRedirect","setShouldRedirect","useForm","form","transform","useReports","onCompleted","data","response","is","Array","head","hasTemplate","hasPath","isFinish","equals","__","path","hasORReqno","allPass","not","isClinician","history","push","replace","orreqno","REPORT_EDIT","REPORT_INQUIRY","error","loading","refetch","called","handleToReport","evt","report","find","propEq","currentTarget","dataset","id","pathOr","isUntype","isTyped","warning","handleToImageViewer","url","env","viewerUrl","window","open","handleToMedicalOrder","MEDICAL_ORDER","columns","title","dataIndex","sorter","render","_","r","data-id","className","onClick","hhisnum","renderFormField","children","Item","noStyle","shouldUpdate","getFieldValue","disabled","spinning","style","minHeight","justify","md","xs","layout","hideRequiredMark","labelAlign","colon","gutter","_rules","always","rules","required","labelCol","span","wrapperCol","label","addonBefore","allowClear","width","placeholder","Option","value","map","x","key","reportStatusEnums","color","resetFields","validateFields","then","a","classification","total","rowKey","dataSource"],"mappings":"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","file":"static/js/13.0d0bebd5.chunk.js","sourcesContent":["import { evolve, ifElse, isNil, identity, invoker } from 'ramda'\nimport { getRangeDate } from '@/utils/webHelper'\n\nexport default function useFormValues({\n  startDateField = 'startDate',\n  endDateField = 'endDate',\n  format,\n}: {\n  format?: string\n  startDateField?: string\n  endDateField?: string\n}) {\n  return (values: { [key: string]: any }) => {\n    if (!values) {\n      return {}\n    }\n\n    const { date = [], ...rest } = values\n\n    const [startDate, endDate] = getRangeDate(date, format)\n\n    return evolve({\n      createDate: ifElse(isNil, identity, invoker(1, 'format')('YYYY-MM-DD')),\n      reportDate: ifElse(isNil, identity, invoker(1, 'format')('YYYY-MM-DD')),\n    })({\n      ...rest,\n      [startDateField]: startDate,\n      [endDateField]: endDate,\n    })\n  }\n}\n","// This icon file is generated automatically.\nvar EyeOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z\" } }] }, \"name\": \"eye\", \"theme\": \"outlined\" };\nexport default EyeOutlined;\n","// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport EyeOutlinedSvg from \"@ant-design/icons-svg/es/asn/EyeOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar EyeOutlined = function EyeOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, Object.assign({}, props, {\n    ref: ref,\n    icon: EyeOutlinedSvg\n  }));\n};\n\nEyeOutlined.displayName = 'EyeOutlined';\nexport default /*#__PURE__*/React.forwardRef(EyeOutlined);","import React from 'react'\nimport {\n  ifElse,\n  __,\n  equals,\n  replace,\n  map,\n  hasPath,\n  allPass,\n  not,\n  always,\n  invoker,\n  is,\n  head,\n  path,\n  identity,\n  find,\n  propEq,\n  pathOr,\n} from 'ramda'\nimport { Row, Col, Form, Tooltip, Spin, message } from 'antd'\nimport FormItem from 'antd/lib/form/FormItem'\nimport { ColumnProps } from 'antd/lib/table'\nimport { EyeOutlined, EditOutlined } from '@ant-design/icons'\nimport useTitle from '@/hooks/useTitle'\nimport { useBreadcrumb } from '@/hooks/useApp'\nimport useFormValues from '@/hooks/useFormValues'\nimport { Report, useReports } from '@/services/report'\nimport Select from '@/components/select'\nimport Input from '@/components/input'\nimport { RangePicker } from '@/components/datepicker'\nimport { Page } from '@/components/layout'\nimport Table from '@/components/query-table'\nimport Button from '@/components/button'\nimport history from '@/utils/history'\nimport { reportStatusEnums } from '@/constants/enums'\nimport { REPORT_EDIT, MEDICAL_ORDER, REPORT_INQUIRY } from '@/constants/routes'\nimport { createFormItemLayout, rules } from '@/utils/form'\nimport { sorter } from '@/utils/webHelper'\nimport env from '@/constants/env'\nimport useAuth from '@/hooks/useAuth'\nconst { compose } = require('ramda')\n\nconst formItemLayout = createFormItemLayout(6)\n\nexport default function ReportList() {\n  useTitle('報告查詢')\n\n  const { user } = useAuth()\n\n  const setBreadcrumb = useBreadcrumb([{ name: '報告查詢' }])\n\n  const [shouldRedirect, setShouldRedirect] = React.useState(false)\n\n  const [form] = Form.useForm()\n\n  const transform = useFormValues({ format: 'YYYY-MM-DD' })\n\n  const { loading, data, refetch, called } = useReports({\n    onCompleted: data => {\n      setShouldRedirect(false)\n\n      if (!shouldRedirect) {\n        return\n      }\n\n      const response = ifElse(is(Array), head, identity)(data)\n\n      const hasTemplate = hasPath(['templateId'])\n      const isFinish = compose(equals(__, '完成'), path(['orstatus']))\n      const hasORReqno = hasPath(['orreqno'])\n\n      if (allPass([compose(not, isFinish), () => user.isClinician])(response)) {\n        return\n      }\n      if (allPass([hasORReqno, hasTemplate, isFinish])(response)) {\n        history.push(\n          `${replace(':id', response.orreqno)(REPORT_EDIT)}?finish=1`\n        )\n      }\n      if (allPass([hasORReqno, hasTemplate])(response)) {\n        history.push(replace(':id', response.orreqno)(REPORT_EDIT))\n      }\n      if (allPass([hasORReqno, compose(not, hasTemplate)])(response)) {\n        history.push(`${REPORT_INQUIRY}?orreqno=${response.orreqno}`)\n      }\n      if (compose(not, hasPath(['orreqno']))(response)) {\n        message.error('查無報告')\n      }\n    },\n  })\n\n  const handleOk = () => {\n    form.validateFields().then(async values => {\n      // 已完成 要跳到輸出報告頁面\n      // 未輸入 要跳到編輯報告頁面\n      if (values.classification === 'rpresult') {\n        setShouldRedirect(true)\n      }\n\n      refetch(\n        transform({\n          ...values,\n        })\n      )\n      setBreadcrumb([{ name: '報告查詢' }, { name: '查詢結果' }])\n    })\n  }\n\n  const handleToReport = (evt: React.MouseEvent<HTMLElement>) => {\n    const report = compose(\n      find(propEq('orreqno', evt.currentTarget.dataset.id)),\n      pathOr([], ['content'])\n    )(data)\n\n    if (!report) {\n      return\n    }\n\n    const isFinish = compose(equals(__, '完成'), path(['orstatus']))\n    const isUntype = compose(equals(__, '未輸'), path(['orstatus']))\n    const isTyped = compose(equals(__, '已輸'), path(['orstatus']))\n    const hasORReqno = hasPath(['orreqno'])\n\n    if (allPass([compose(not, isFinish), () => user.isClinician])(report)) {\n      message.warning('報告尚未輸入完成')\n      return\n    }\n    if (allPass([hasORReqno, isFinish])(report)) {\n      history.push(`${replace(':id', report.orreqno)(REPORT_EDIT)}?finish=1`)\n    }\n    if (allPass([hasORReqno, isTyped])(report)) {\n      history.push(replace(':id', report.orreqno)(REPORT_EDIT))\n    }\n    if (allPass([hasORReqno, isUntype])(report)) {\n      history.push(`${REPORT_INQUIRY}?orreqno=${report.orreqno}`)\n    }\n  }\n\n  const handleToImageViewer = (evt: React.MouseEvent<HTMLElement>) => {\n    const url = replace(':id', '')(env.viewerUrl)\n    window.open(`${url}?PatientID=${evt.currentTarget.dataset.id}`, '__blank')\n  }\n\n  const handleToMedicalOrder = (evt: React.MouseEvent<HTMLElement>) => {\n    history.push(\n      replace(':id', `${evt.currentTarget.dataset.id}`)(MEDICAL_ORDER)\n    )\n  }\n\n  const handleResetFields = () => form.resetFields()\n\n  const columns: ColumnProps<Report>[] = [\n    { title: '申請序號', dataIndex: 'orreqno', sorter: sorter('orreqno') },\n    { title: '姓名', dataIndex: 'hnamec' },\n    { title: '病理號', dataIndex: 'orworkno', sorter: sorter('orworkno') },\n    { title: '病歷號', dataIndex: 'hhisnum', sorter: sorter('hhisnum') },\n    { title: '病房', dataIndex: 'hnursta', sorter: sorter('hnursta') },\n    { title: '床號', dataIndex: 'hbed', sorter: sorter('hbed') },\n    { title: '性別', dataIndex: 'hsex', sorter: sorter('hsex') },\n    { title: '簽收日期', dataIndex: 'zrsregord', sorter: sorter('zrsregord') },\n    { title: '收費碼', dataIndex: 'ordclnm' },\n    { title: '科別', dataIndex: 'csect', sorter: sorter('csect') },\n    { title: '狀態', dataIndex: 'orstatus', sorter: sorter('orstatus') },\n    {\n      title: '醫囑',\n      dataIndex: 'ORPROCED',\n      render: (_, r) => (\n        <Tooltip title=\"查看醫囑內容\">\n          <EyeOutlined\n            data-id={r.orreqno}\n            className=\"cursor-pointer text-lg\"\n            onClick={handleToMedicalOrder}\n          />\n        </Tooltip>\n      ),\n    },\n    {\n      title: '報告',\n      dataIndex: 'x',\n      render: (_, r) => (\n        <Tooltip title=\"編輯、查看報告內容\">\n          <EditOutlined\n            data-id={r.orreqno}\n            className=\"cursor-pointer text-lg\"\n            onClick={handleToReport}\n          />\n        </Tooltip>\n      ),\n    },\n    {\n      title: '影像',\n      dataIndex: 'createAt',\n      render: (_, r) => (\n        <Tooltip title=\"開啟新視窗查看影像\">\n          <EyeOutlined\n            data-id={r.hhisnum}\n            className=\"cursor-pointer text-lg\"\n            onClick={handleToImageViewer}\n          />\n        </Tooltip>\n      ),\n    },\n  ]\n\n  const renderFormField = (children: any) => {\n    return (\n      <Form.Item noStyle shouldUpdate>\n        {({ getFieldValue }) => {\n          return children({\n            disabled: getFieldValue('classification') === 'rpresult',\n          })\n        }}\n      </Form.Item>\n    )\n  }\n\n  return (\n    <Spin spinning={loading}>\n      <Page style={{ minHeight: 'calc(100vh - 203px)' }}>\n        <Row justify=\"center\">\n          <Col md={22} xs={24}>\n            <Form\n              form={form}\n              layout=\"horizontal\"\n              hideRequiredMark={true}\n              labelAlign=\"left\"\n              colon={false}>\n              <Row gutter={12} justify=\"space-between\">\n                <Col md={7} xs={24}>\n                  <FormItem noStyle shouldUpdate>\n                    {form => {\n                      const _rules = compose(\n                        ifElse(\n                          equals(__, 'rpresult'),\n                          always({ rules: [rules.required] }),\n                          always({})\n                        ),\n                        invoker(1, 'getFieldValue')('classification')\n                      )(form)\n\n                      return (\n                        <Form.Item\n                          {..._rules}\n                          labelCol={{ span: 5 }}\n                          wrapperCol={{ span: 19 }}\n                          label=\"查詢單號\"\n                          name=\"no\">\n                          <Input\n                            addonBefore={\n                              <Form.Item noStyle name=\"noType\">\n                                <Select\n                                  {..._rules}\n                                  allowClear\n                                  style={{ width: 100 }}\n                                  placeholder=\"單號類型\">\n                                  <Select.Option value=\"ORREQNO\">\n                                    申請序號\n                                  </Select.Option>\n                                  <Select.Option value=\"ORWORKNO\">\n                                    病理號\n                                  </Select.Option>\n                                  <Select.Option value=\"HHISNUM\">\n                                    病歷號\n                                  </Select.Option>\n                                </Select>\n                              </Form.Item>\n                            }\n                          />\n                        </Form.Item>\n                      )\n                    }}\n                  </FormItem>\n                </Col>\n                <Col md={5} xs={24}>\n                  <Form.Item\n                    {...formItemLayout}\n                    label=\"查詢類別\"\n                    name=\"classification\"\n                    rules={[rules.required]}>\n                    <Select allowClear>\n                      <Select.Option value=\"pathorderview\">醫囑</Select.Option>\n                      <Select.Option value=\"rpresult\">報告</Select.Option>\n                    </Select>\n                  </Form.Item>\n                </Col>\n                <Col md={6} xs={24}>\n                  {renderFormField(({ disabled }: any) => (\n                    <Form.Item {...formItemLayout} label=\"簽收日期\" name=\"date\">\n                      <RangePicker className=\"w-full\" disabled={disabled} />\n                    </Form.Item>\n                  ))}\n                  {/* <Form.Item noStyle shouldUpdate>\n                    {({ getFieldValue }) => {\n                      const disabled =\n                        getFieldValue('classification') === 'rpresult'\n                      return (\n                        <Form.Item\n                          {...formItemLayout}\n                          label=\"簽收日期\"\n                          name=\"date\">\n                          <RangePicker className=\"w-full\" disabled={disabled} />\n                        </Form.Item>\n                      )\n                    }}\n                  </Form.Item> */}\n                </Col>\n                <Col md={6} xs={24}>\n                  {renderFormField(({ disabled }: any) => (\n                    <Form.Item\n                      {...formItemLayout}\n                      label=\"報告狀態\"\n                      name=\"reportStatus\">\n                      <Select allowClear disabled={disabled}>\n                        {map((x: { id: number; name: string }) => (\n                          <Select.Option key={x.id} value={x.id}>\n                            {x.name}\n                          </Select.Option>\n                        ))(reportStatusEnums)}\n                      </Select>\n                    </Form.Item>\n                  ))}\n                  {/* <Form.Item shouldUpdate noStyle>\n                    {({ getFieldValue }) => {\n                      const disabled =\n                        getFieldValue('classification') === 'rpresult'\n                      return (\n                        <Form.Item\n                          {...formItemLayout}\n                          label=\"報告狀態\"\n                          name=\"reportStatus\">\n                          <Select allowClear disabled={disabled}>\n                            {map((x: { id: number; name: string }) => (\n                              <Select.Option key={x.id} value={x.id}>\n                                {x.name}\n                              </Select.Option>\n                            ))(reportStatusEnums)}\n                          </Select>\n                        </Form.Item>\n                      )\n                    }}\n                  </Form.Item> */}\n                </Col>\n              </Row>\n              <Row className=\"mt-4\">\n                <Col md={24} xs={24} className=\"flex justify-end\">\n                  <Form.Item>\n                    <Button\n                      color=\"primary\"\n                      style={{ width: 96 }}\n                      className=\"mr-3\"\n                      onClick={handleResetFields}>\n                      重設\n                    </Button>\n                    <Button\n                      color=\"primary\"\n                      style={{ width: 96 }}\n                      onClick={handleOk}>\n                      搜尋\n                    </Button>\n                  </Form.Item>\n                </Col>\n              </Row>\n            </Form>\n          </Col>\n        </Row>\n        {called && !shouldRedirect && (\n          <>\n            <Row className=\"mb-2 mt-4\" justify=\"center\">\n              <Col md={24} xs={24} className=\"text-sm\">\n                檢索結果共 <span className=\"text-primary\">{data.total}</span> 筆\n              </Col>\n            </Row>\n            <Row justify=\"center\">\n              <Col md={24} xs={24}>\n                <Table rowKey=\"id\" dataSource={data} columns={columns} />\n              </Col>\n            </Row>\n          </>\n        )}\n      </Page>\n    </Spin>\n  )\n}\n"],"sourceRoot":""}