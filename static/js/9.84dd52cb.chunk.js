(this["webpackJsonpvghks-pathol-app"]=this["webpackJsonpvghks-pathol-app"]||[]).push([[9],{1231:function(e,t,a){"use strict";a.d(t,"a",(function(){return b}));var n=a(0),c=a.n(n),r=a(50),l=a(418),i=a(415),o=a(222),s=a(178),m=a(49),d=a(406),p=a(240),u=a(45).compose;function b(e){var t=e.onCancel,a=e.snippetList;return c.a.createElement(d.a,{visible:!0,style:{top:30},maskClosable:!1,className:"ant-modal-header--border-none",keyboard:!1,width:"85%",onCancel:t,footer:!1},u(Object(r.a)((function(e){return c.a.createElement("div",{key:e},u(Object(l.a)(i.a,0),o.a,Object(s.a)([],[e]))(a)&&c.a.createElement("h2",{className:"my-2"},e),u(Object(p.c)(),Object(s.a)([],[e]))(a))})),m.a)(a))}},1410:function(e,t,a){"use strict";a.r(t);a(327);var n=a(182),c=a.n(n),r=(a(328),a(102)),l=a.n(r),i=a(101),o=a(30),s=a(9),m=(a(644),a(251)),d=a.n(m),p=(a(130),a(18)),u=a.n(p),b=a(13),f=a(14),O=a(0),h=a.n(O),E={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h720c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"minus",theme:"outlined"},j=a(31),v=function(e,t){return O.createElement(j.a,Object.assign({},e,{ref:t,icon:E}))};v.displayName="MinusOutlined";var g=O.forwardRef(v),y=a(1187),N=a(389),w=a(258),C=a(50),S=a(178),k=a(49),x=a(404),D=a(89),_=a(46),I=a(403),T=a(195),Y=a(63),A=a(103),M=a(324),H=a(411),L=a(613),P=a(121),F=a(209),J=a(29),z=a(40),B=a(35),K=a(36),R=function(e){Object(B.a)(a,e);var t=Object(K.a)(a);function a(){return Object(J.a)(this,a),t.apply(this,arguments)}return Object(z.a)(a,[{key:"render",value:function(){return h.a.createElement("div",null)}}]),a}(h.a.Component),U=a(240),V={position:"fixed",pointerEvents:"none",zIndex:100,left:0,top:0,width:"100%",height:"100%"};function W(e){var t=e.initialOffset,a=e.currentOffset;if(!t||!a)return{display:"none"};var n=a.x,c=a.y,r="translate(".concat(n,"px, ").concat(c,"px)");return{transform:r,WebkitTransform:r}}var G=Object(P.DragLayer)((function(e){return{item:e.getItem(),itemType:e.getItemType(),initialOffset:e.getInitialSourceClientOffset(),currentOffset:e.getSourceClientOffset(),isDragging:e.isDragging()}}))((function(e){var t=e.itemType,a=e.isDragging,n=e.currentOffset;if(!a)return null;if(!n)return null;var c=document.elementFromPoint(n.x,n.y),r=!1;return c&&(r=Object(U.a)(c)),h.a.createElement("div",{className:"report-template-builder__drag-layer",style:V},h.a.createElement("div",{style:W(e)},function(e){var a=e.canDrop;switch(t){case F.a.BOARD:case F.a.SNIPPET:return h.a.createElement(R,{canDrop:a});default:return null}}({canDrop:r})))})),q=a(612),Q=a(1231),X=a(158),Z=a(96),$=a(188),ee=a.n($),te=a(69),ae=a.n(te),ne=a(207),ce=a(33),re=a(148),le=a(45).compose,ie=Object(f.d)("div").withConfig({displayName:"report-template-builder___StyledDiv",componentId:"sc-550gpb-0"})({width:60}),oe=Object(f.d)("div").withConfig({displayName:"report-template-builder___StyledDiv2",componentId:"sc-550gpb-1"})({width:60}),se=Object(f.d)("div").withConfig({displayName:"report-template-builder___StyledDiv3",componentId:"sc-550gpb-2"})({width:60}),me=Object(f.d)("span").withConfig({displayName:"report-template-builder___StyledSpan",componentId:"sc-550gpb-3"})({whiteSpace:"nowrap"});t.default=function(e){Object(I.a)("\u7d50\u69cb\u5f0f\u5831\u544a\u6a21\u7248\u7de8\u8f2f"),Object(T.a)([{href:A.h,name:"\u7d50\u69cb\u5f0f\u5831\u544a"},{name:"\u7d50\u69cb\u5f0f\u5831\u544a\u6a21\u7248\u7de8\u8f2f"}]);var t=e.match.params,a=Object(Y.b)({id:t.id}),n=a.category,r=a.reportTemplate,m=a.snippetList,p=a.handleTabChange,f=a.handleTabEdit,O=a.handleTabMove,E=a.handleTabNameChange,j=a.handleSnippetUpdate;h.a.useEffect((function(){B.setFieldsValue(r)}),[JSON.stringify(r)]);var v=Object(Y.a)(),P=Object(b.a)(v,2),F=P[0],J=P[1],z=u.a.useForm(),B=Object(b.a)(z,1)[0],K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onCompleted,a=Object(Y.c)(),n=Object(b.a)(a,2),c=n[0],r=n[1],l=function(e){var a=Object(ce.f)(),n=[].concat(Object(Z.a)(c),[Object(s.a)(Object(s.a)({},e),{},{id:a,createdAt:ae()(),createdAtStr:ae()().format("YYYY/MM/DD HH:mm"),updatedAt:ae()(),updatedAtStr:ae()().format("YYYY/MM/DD HH:mm")})]);r(n),ee.a.set("reportTemplateListState",n),t&&t(Object(s.a)(Object(s.a)({},e),{},{id:a}))};return[!1,l]}({onCompleted:function(e){var t=e.id;re.a.push(Object(N.a)(":id",t)(A.g)),d.a.success("\u5831\u544a\u6a21\u7248\u5df2\u5efa\u7acb\u6210\u529f")}}),R=Object(b.a)(K,2)[1],U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onCompleted,a=Object(Y.c)(),n=Object(b.a)(a,2),c=n[0],r=n[1],l=function(e){var a=c.findIndex((function(t){return"".concat(t.id)==="".concat(e.id)})),n=Object(ne.a)(a,Object(s.a)(Object(s.a)({},e),{},{updatedAt:ae()(),updatedAtStr:ae()().format("YYYY/MM/DD HH:mm")}),c);r(n),ee.a.set("reportTemplateListState",n),t&&t()};return[!1,l]}({onCompleted:function(){return d.a.success("\u5831\u544a\u6a21\u7248\u5df2\u5132\u5b58\u6210\u529f")}}),V=Object(b.a)(U,2)[1];return Object(T.c)(h.a.createElement("div",{className:"inline-flex"},h.a.createElement(D.a,{color:"outline",className:"bg-transparent text-white border-white"},"\u767c\u4f48"),h.a.createElement(D.a,{color:"outline",className:"ml-6 bg-transparent text-white border-white",onClick:function(){B.validateFields().then((function(e){((null===r||void 0===r?void 0:r.id)?V:R)(Object(s.a)(Object(s.a)(Object(s.a)({},r),e),{},{setting:le(w.a,Object(C.a)((function(e){return Object(i.a)({},e,le(Object(C.a)((function(t){t.Component,t.icon;var a=Object(o.a)(t,["Component","icon"]);return Object(s.a)(Object(s.a)({},a),{},{categoryName:e})})),Object(S.a)([],[e]))(m))})),k.a)(m)}))}))}},"\u5132\u5b58"),h.a.createElement(D.a,{color:"outline",className:"ml-6 bg-transparent text-white border-white",onClick:J},"\u9810\u89bd"))),h.a.createElement(H.a,null,F&&h.a.createElement(Q.a,{snippetList:m,onCancel:J}),h.a.createElement(G,null),h.a.createElement(x.a,null,h.a.createElement(u.a,{form:B,initialValues:Object(s.a)({},r)},h.a.createElement(c.a,{gutter:48,className:"pt-2 relative"},h.a.createElement(l.a,{span:5},h.a.createElement(X.a,{defaultActiveKey:[1,2],expandIconPosition:"right",className:"shadow-2xl header-pl-clear",expandIcon:function(e){return e.isActive?h.a.createElement(g,null):h.a.createElement(y.a,null)}},h.a.createElement(X.a.Panel,{header:"\u6a21\u7248\u8cc7\u8a0a",key:1},h.a.createElement(c.a,{className:"mb-2 text-sm text-darkGrey"},h.a.createElement(l.a,{span:24,className:"mb-3"},h.a.createElement(ie,{className:"inline-block"},"\u540d\u7a31:"),h.a.createElement(u.a.Item,{noStyle:!0,name:"name"},h.a.createElement(_.c,{className:"w-2/3"}))),h.a.createElement(l.a,{span:24,className:"my-3"},h.a.createElement(oe,{className:"inline-block"},"\u63cf\u8ff0:"),h.a.createElement(u.a.Item,{noStyle:!0,name:"description"},h.a.createElement(_.c,{className:"w-2/3"}))),h.a.createElement(l.a,{span:24,className:"my-3"},h.a.createElement(se,{className:"inline-block"},"\u5275\u4f5c\u8005:"),h.a.createElement(u.a.Item,{noStyle:!0,name:"author"},h.a.createElement(_.c,{className:"w-2/3"}))))),h.a.createElement(X.a.Panel,{header:"\u5de5\u5177\u5217",key:2},h.a.createElement(c.a,null,h.a.createElement(l.a,{span:24},h.a.createElement(L.a,null)))))),h.a.createElement(M.a,{type:"editable-card",activeKey:n,onChange:p,onEdit:f,moveTabNode:O,className:"flex-1"},le(Object(C.a)((function(e){return h.a.createElement(M.a.TabPane,{closable:!0,key:e,tab:h.a.createElement(me,{contentEditable:!0,suppressContentEditableWarning:!0,spellCheck:!1,className:"outline-none",onChange:E(e)},e)},h.a.createElement(l.a,{span:19,className:"report-template-builder__main-content"},h.a.createElement(q.a,{draggable:!F,snippetList:m[e],onSnippetUpdate:j})))})),k.a)(m))))))}}}]);
//# sourceMappingURL=9.84dd52cb.chunk.js.map