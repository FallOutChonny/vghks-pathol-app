{"version":3,"sources":["components/collapse.ts","containers/report-typing/components.tsx","containers/report-typing/circle-progress-bar.tsx","containers/report-typing/report-typing.tsx","components/input.tsx","constants/item-types.ts","hooks/useApp.ts","hooks/useReportTemplate.ts","components/snippet-utils.js","utils/message.tsx","components/box.ts","components/snippet-toolbar.tsx","components/snippet.tsx","hooks/useTitle.ts","components/modal.tsx","components/table.tsx","components/breadcrumb.tsx","components/app-header.tsx","components/app-footer.tsx","components/layout.tsx","components/withScroll.js","components/snippet-scrollable-container.tsx","components/select.tsx","components/checkbox.tsx","components/report-template-modal.tsx","components/report-template-wrapper.tsx","utils/form.ts","components/report-template-input-text.tsx","components/input-number.tsx","components/report-template-input-number.tsx","components/radio.tsx","components/editable-table.tsx","components/report-template-selection-modal.tsx","components/report-template-multiple-selection.tsx","components/report-template-single-selection.tsx","components/datepicker.tsx","components/report-template-date.tsx","components/report-template-time.tsx","components/report-template-select.tsx","components/report-template-list.tsx"],"names":["StyledCollapse","styled","p","theme","primary","StyledCard","StyledAnchor","CircleBar","div","CircleProgressBar","className","style","props","cx","compose","require","Link","Anchor","width","ReportTyping","useTitle","useBreadcrumb","name","useHeaderContent","color","minWidth","useToggleReportPreview","params","match","useReportSnippets","id","snippetList","React","useState","affixed","setIsAffixed","gutter","span","bordered","offsetTop","onChange","showInkInFixed","affix","getAnchorStyles","map","key","href","title","mapIndexed","x","pathOr","keys","gt","__","length","item","idx","wrapperId","draggable","Component","index","activeKey","expandIcon","Panel","header","marginLeft","marginRight","background","padding","borderBottomLeftRadius","borderBottomRightRadius","borderLess","css","StyledInput","secondary","TextArea","CARD","BOARD","SNIPPET","breadcrumbState","atom","default","useBreadcrumbState","useRecoilState","items","setter","useSetRecoilState","useEffect","headerContentState","node","useHeaderContentValue","useRecoilValue","faker","reportTemplateCategory","CLINICAL_HISTORY","HIGHT_RISK_REASONS","DATA_OF_PRIOR_SIMILAR_STUDY","IMAGING_PROTOCOL","TUMOR_LOCATION","fakeSnippetSetting","mergeAll","path","type","reportTemplateById","fakeSetting","fakeReportTemplateList","Array","from","_","lorem","word","author","findName","status","statusName","createdAt","moment","createdAtStr","format","updatedAt","updatedAtStr","description","setting","defaultSnippetList","values","reportSnippetsState","atomFamily","find","propEq","Number","snippetCategoryState","head","reportTemplateListState","content","total","reportPreviewState","useReportPreview","isPreview","setIsPreview","prev","_snippetList","setSnippetList","JSON","stringify","useSnippetCategory","state","useReportTemplateList","hasClassName","nodes","n","isNil","includes","canMoveSnippet","element","elem","push","parentNode","unshift","getPlaceHolderIndex","clientOffset","overSnippet","findSnippet","classList","contains","parentElement","document","elementFromPoint","y","snippetIndex","dataset","placeholderIndex","isOverSnippet","getDisplayName","displayName","marginTop","marginBottom","confirm","onOk","onCancel","icon","okText","cancelText","centered","autoFocusButton","okButtonProps","cancelButtonProps","modalDefaultProps","layout","space","flexbox","typography","border","position","ToolbarWrapper","Box","SnippetToolbar","tabIndex","onEdit","onDelete","EditOutlined","onClick","DeleteOutlined","withDragSource","DragSource","ItemTypes","beginDrag","fromMenu","originalIndex","canDrag","connect","monitor","connectDragSource","dragSource","connectDragPreview","dragPreview","isDragging","Snippet","componentDidMount","getEmptyImage","handleRemove","removeSnippet","console","log","handleEditModalVisible","setState","editModalVisible","handleIndent","align","_onMouseOver","_onMouseOut","top","this","styles","mergeRight","isFocus","borderRadius","outlineColor","purple150","cursor","display","getItemStyles","onMouseOver","onMouseOut","data-index","Children","children","child","cloneElement","DEFAULT_USE_TITLE_OPTIONS","restoreOnUnmount","options","prevTitleRef","useRef","replace","envStore","appTitle","current","_title","StyledModal","ModalComponent","error","success","info","StyledTable","pagination","TableComponent","editable","columns","onAddRowClick","isRowDeletable","onDeleteRowClick","isCanEdit","_columns","useMemo","canEdit","placement","undefined","render","r","locale","emptyText","image","PRESENTED_IMAGE_SIMPLE","Column","StyledBreadcrumb","AppHeader","history","location","pathname","setCurrentPath","handleTo","getMenuClassName","targetUrl","Header","Logo","src","publicUrl","alt","mode","borderBottom","lineHeight","MenuItem","routes","SettingOutlined","ExportOutlined","borderColor","separator","minHeight","Item","HomeOutlined","AppFooter","Footer","borderTopLeftRadius","borderTopRightRadius","Page","Content","noop","intBetween","min","max","val","Math","floor","createVerticalStrength","_buffer","point","h","w","buffer","defaultHorizontalStrength","defaultVerticalStrength","ScrollableComponent","WrappedComponent","ScrollingComponent","ctx","handleEvent","evt","dragging","attached","attach","updateScrolling","throttle","container","getBoundingClientRect","box","left","height","coords","changedTouches","clientX","clientY","getCoords","scaleX","horizontalStrength","scaleY","verticalStrength","frame","startScrolling","trailing","useScroll","_initial","findDOMNode","wrappedInstance","addEventListener","window","body","clearMonitorSubscription","context","dragDropManager","getMonitor","subscribeToStateChange","handleMonitorChange","_remove","removeEventListener","stopScrolling","i","tick","strengthMultiplier","onScrollChange","scrollLeft","scrollTop","scrollWidth","scrollHeight","clientWidth","clientHeight","raf","detach","cancel","ref","defaultProps","contextType","DndContext","hoist","withScroll","vStrength","ReactDndProvider","StyledSelect","SelectComponent","Option","StyledCheckbox","CheckboxComponent","forwardRef","Group","TemplateModal","visible","maskClosable","keyboard","footer","TemplateWrapper","FontColorsOutlined","createFormItemLayout","label","wrapper","labelCol","xs","sm","wrapperCol","thosandSeprartor","formatter","value","parser","currency","percent","RegExp","InputTextModal","useForm","form","validateFields","then","labelAlign","initialValues","valuePropName","StyledInputNumber","attrs","ThousandSeprartorInput","CurrencyInput","PercentInput","InputNumberModal","StyledRadio","darkGrey","RadioComponent","EditableTable","onRowAdd","onRowDelete","triggerChange","changedValue","rowKey","size","dataSource","defaultValue","uuid","text","selected","freetext","TemplateSelectionModal","v","noStyle","concat","invoker","filter","ReportTemplateMultipleSelection","onUpdate","setSetting","bodyStyle","paddingLeft","defaultChecked","placeholder","ReportTemplateSingleSelection","StyledDatePicker","StyledTimePicker","DatePickerComponent","InputDateModal","allowClear","picker","InputTimeModal","reportTemplateList","inputProps","tooltip","multipleLine","autoSize","minRows","units","TemplateMultipleSelection","TemplateSingleSelection"],"mappings":"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","file":"static/js/8.1261603f.chunk.js","sourcesContent":["import { Collapse } from 'antd'\nimport styled from 'styled-components'\n\nconst StyledCollapse = styled(Collapse)`\n  &.ant-collapse {\n    border-radius: 16px;\n    border-bottom: none;\n\n    > .ant-collapse-item > .ant-collapse-header {\n      padding-left: 0;\n      background: rgb(207, 224, 245);\n      color: ${p => p.theme.primary};\n    }\n\n    > .ant-collapse-item:first-child > .ant-collapse-header {\n      border-top-left-radius: 16px;\n      border-top-right-radius: 16px;\n    }\n\n    > .ant-collapse-item:last-child {\n      border-bottom: none;\n    }\n\n    > .ant-collapse-item:last-child > .ant-collapse-content {\n      border-bottom-left-radius: 16px;\n      border-bottom-right-radius: 16px;\n    }\n\n    > .ant-collapse-item.ant-collapse-item-active:last-child {\n      border-bottom: 1px solid #d9d9d9;\n    }\n\n    > .ant-collapse-item:not(.ant-collapse-item-active):last-child\n      > .ant-collapse-header {\n      border-bottom-left-radius: 16px;\n      border-bottom-right-radius: 16px;\n    }\n  }\n`\n\nexport default StyledCollapse\n","import { Card, Anchor } from 'antd'\nimport styled from 'styled-components'\n\nconst StyledCard = styled(Card)``\n\nconst StyledAnchor = styled(Anchor)`\n  &.ant-anchor-wrapper {\n    background: transparent;\n  }\n\n  .fixed {\n    position: relative !important;\n  }\n\n  a:hover,\n  .ant-anchor-link-active > .ant-anchor-link-title {\n    color: ${p => p.theme.primary};\n  }\n\n  .ant-anchor-ink-ball {\n    border: 2px solid ${p => p.theme.primary};\n  }\n\n  .ant-anchor-ink::before {\n    /* background-color: ${p => p.theme.secondary}; */\n  }\n`\n\nexport { StyledCard as Card, StyledAnchor as Anchor }\n","import React from 'react'\nimport cx from 'classnames'\nimport styled from 'styled-components'\n\ntype Props = {\n  className?: string\n  style?: React.CSSProperties\n}\n\nconst CircleBar = styled.div`\n  &.progress--circle {\n    position: relative;\n    display: inline-block;\n    width: 70px;\n    height: 70px;\n    border-radius: 50%;\n    background-color: #ddd;\n\n    &:before {\n      content: '';\n      position: absolute;\n      top: 5px;\n      left: 5px;\n      width: 60px;\n      height: 60px;\n      border-radius: 50%;\n      background-color: ${p => p.theme.primary};\n    }\n\n    &:after {\n      content: '';\n      display: inline-block;\n      width: 100%;\n      height: 100%;\n      border-radius: 50%;\n      background-color: #63b8ff;\n    }\n  }\n\n  .progress__number {\n    position: absolute;\n    top: 59%;\n    width: 100%;\n    line-height: 1;\n    margin-top: -0.75rem;\n    text-align: center;\n    font-size: 1rem;\n    color: #fff;\n  }\n`\n\nexport default function CircleProgressBar({\n  className,\n  style,\n  ...props\n}: Props) {\n  return (\n    <CircleBar\n      className={cx('progress--circle', className)}\n      style={style}\n      {...props}>\n      <div className=\"progress__number\">20%</div>\n    </CircleBar>\n  )\n}\n","import React from 'react'\nimport { RouteComponentProps } from 'react-router-dom'\nimport { Row, Col, BackTop, Affix } from 'antd'\nimport { map, gt, __, pathOr, length, keys } from 'ramda'\nimport useTitle from '@/hooks/useTitle'\nimport { useBreadcrumb, useHeaderContent } from '@/hooks/useApp'\nimport {\n  useReportSnippets,\n  useToggleReportPreview,\n} from '@/hooks/useReportTemplate'\nimport { mapIndexed } from '@/utils/webHelper'\nimport { SnippetProps } from '@/constants/types'\nimport { Page } from '@/components/layout'\nimport ReactDndProvider from '@/components/snippet-scrollable-container'\nimport Snippet from '@/components/snippet'\nimport Button from '@/components/button'\nimport Input from '@/components/input'\nimport Collapse from '@/components/collapse'\nimport { Card, Anchor } from './components'\nimport CircleProgressBar from './circle-progress-bar'\nconst { compose } = require('ramda')\n\nconst { Link } = Anchor\n\ninterface Props extends RouteComponentProps<{ id: string }> {}\n\nexport default function ReportTyping(props: Props) {\n  useTitle('輸入報告')\n\n  useBreadcrumb([{ name: '輸入報告' }, { name: '輸入報告查詢' }])\n\n  useHeaderContent(\n    <div className=\"inline-flex\">\n      <Button\n        color=\"outline\"\n        className=\"text-white border-white bg-transparent\"\n        style={{ minWidth: 80 }}>\n        儲存\n      </Button>\n      <Button\n        color=\"outline\"\n        className=\"ml-6 text-white border-white bg-transparent\">\n        下載 JSON\n      </Button>\n      <Button\n        color=\"outline\"\n        className=\"ml-6 text-white border-white bg-transparent\">\n        輸出報告\n      </Button>\n    </div>\n  )\n\n  useToggleReportPreview(true)\n\n  const { params } = props.match\n  const [snippetList] = useReportSnippets(params.id)\n\n  const [affixed, setIsAffixed] = React.useState<boolean | undefined>(false)\n\n  const handleAffixChange = (affixed?: boolean) => {\n    setIsAffixed(affixed)\n  }\n\n  return (\n    <ReactDndProvider className=\"is--preview\">\n      <BackTop />\n      <Page>\n        <Row gutter={16}>\n          <Col span={5}>\n            <Card className=\"rounded-lg shadow-2xl\">\n              <Row className=\"mb-2 text-sm text-primary\">\n                <Col span={24} className=\"mb-3\">\n                  <div className=\"inline-block\" css={{ width: 65 }}>\n                    審核醫師\n                  </div>\n                  <Input className=\"w-2/3\" bordered={false} />\n                </Col>\n                <Col span={24} className=\"my-3\">\n                  <div className=\"inline-block\" css={{ width: 65 }}>\n                    申請序號\n                  </div>\n                  <Input className=\"w-2/3\" bordered={false} />\n                </Col>\n                <Col span={24} className=\"my-3\">\n                  <div className=\"inline-block\" css={{ width: 65 }}>\n                    報告格式\n                  </div>\n                  <Input className=\"w-2/3\" bordered={false} />\n                </Col>\n                <Col span={24} className=\"mt-3\">\n                  <Affix offsetTop={0} onChange={handleAffixChange}>\n                    <Anchor\n                      showInkInFixed\n                      affix={false}\n                      className=\"is--fixed\"\n                      style={getAnchorStyles(affixed)}>\n                      {compose(\n                        map((key: string) => (\n                          <Link href={`#${key}`} title={key}>\n                            {compose(\n                              mapIndexed((x: SnippetProps) => (\n                                <Link\n                                  href={`#${x.id}`}\n                                  title={pathOr(x.id, ['setting', 'text'], x)}\n                                />\n                              )),\n                              pathOr([], [key])\n                            )(snippetList)}\n                          </Link>\n                        )),\n                        keys\n                      )(snippetList)}\n                    </Anchor>\n                  </Affix>\n                </Col>\n              </Row>\n            </Card>\n          </Col>\n          <Col span={14}>\n            <div className=\"py-2 bg-white rounded-lg shadow-2xl\">\n              <Affix offsetTop={0}>\n                <div className=\"px-4 py-2 mb-6 -mt-2 flex items-center justify-between rounded-t-lg shadow-sm bg-primary text-white text-xl font-medium\">\n                  <div>Imaging Report From for Hepatocellular Carcinoma</div>\n                  <CircleProgressBar />\n                </div>\n              </Affix>\n              {compose(\n                map((key: string) => (\n                  <div key={key} className=\"pl-8\">\n                    {compose(\n                      gt(__, 0),\n                      length,\n                      pathOr([], [key])\n                    )(snippetList) && (\n                      <h2 id={key} className=\"my-2\">\n                        {key}\n                      </h2>\n                    )}\n                    {compose(\n                      mapIndexed((item: SnippetProps, idx: number) => (\n                        <Snippet\n                          key={item.id}\n                          wrapperId={`${item.id}`}\n                          className=\"mb-0\"\n                          draggable={false}>\n                          <item.Component\n                            id={item.id}\n                            className={item.id}\n                            item={item}\n                            index={idx}\n                          />\n                        </Snippet>\n                      )),\n                      pathOr([], [key])\n                    )(snippetList)}\n                  </div>\n                )),\n                keys\n              )(snippetList)}\n            </div>\n          </Col>\n\n          <Col span={5}>\n            <Collapse\n              activeKey={[1, 2, 3, 4]}\n              expandIcon={() => null}\n              className=\"shadow-2xl\">\n              <Collapse.Panel\n                header={<div className=\"text-center\">醫屬內容</div>}\n                key={1}>\n                <div className=\"border-b border-gray-600 p-3\">申請序號</div>\n                <div className=\"border-b border-gray-600 p-3\">病理號</div>\n                <div className=\"border-b border-gray-600 p-3\">病患姓名</div>\n                <div className=\"border-b border-gray-600 p-3\">性別</div>\n                <div className=\"border-b border-gray-600 p-3\">申請科別</div>\n                <div className=\"border-b border-gray-600 p-3\">病例號</div>\n                <div className=\"border-b border-gray-600 p-3\">病房床號</div>\n                <div className=\"border-b border-gray-600 p-3\">出生日期</div>\n                <div className=\"border-b border-gray-600 p-3\">醫屬名稱</div>\n                <div className=\"border-b border-gray-600 p-3\">現在輸入</div>\n                <div className=\"border-b border-gray-600 p-3\">審核者</div>\n              </Collapse.Panel>\n              <Collapse.Panel\n                header={<div className=\"text-center\">儲存狀態</div>}\n                key={2}>\n                <div className=\"pl-6\">待發</div>\n              </Collapse.Panel>\n              <Collapse.Panel\n                header={<div className=\"text-center\">報告註記</div>}\n                key={3}>\n                <div className=\"pl-6\">檢體不適當</div>\n              </Collapse.Panel>\n              <Collapse.Panel\n                header={<div className=\"text-center\">操作熱鍵</div>}\n                key={4}>\n                <div className=\"pl-6\">\n                  <code className=\"bg-yellow-400 px-1\">CTRL＋W</code>,{' '}\n                  <code className=\"bg-yellow-400 px-1\">CTRL+S</code> 儲存\n                </div>\n                <div className=\"pl-6 pt-2\">\n                  <code className=\"bg-yellow-400 px-1\">F9</code> 片語視窗\n                </div>\n              </Collapse.Panel>\n            </Collapse>\n          </Col>\n        </Row>\n      </Page>\n    </ReactDndProvider>\n  )\n}\n\nfunction getAnchorStyles(affixed?: boolean): React.CSSProperties | undefined {\n  if (!affixed) {\n    return undefined\n  }\n\n  return {\n    marginLeft: -24,\n    marginRight: -24,\n    background: '#fff',\n    padding: 24,\n    borderBottomLeftRadius: 16,\n    borderBottomRightRadius: 16,\n  }\n}\n","import { Input } from 'antd'\nimport styled, { css } from 'styled-components'\n\nconst borderLess = css`\n  &.ant-input-borderless {\n    border: none;\n    border-bottom: 1px solid ${p => p.theme.primary};\n    border-bottom-left-radius: 0;\n    border-bottom-right-radius: 0;\n  }\n\n  &:active:not(.ant-input-borderless) {\n    box-shadow: 0 0 0 1px ${p => p.theme.primary};\n  }\n`\n\nconst StyledInput = styled(Input)`\n  &.ant-input-affix-wrapper .ant-input,\n  &.ant-input {\n    border-color: ${p => p.theme.primary};\n\n    &:hover,\n    &:focus {\n      border-color: ${p => p.theme.secondary};\n    }\n\n    ${borderLess};\n  }\n`\n\nconst Search = styled(Input.Search)`\n  &.ant-input-search {\n    .ant-input {\n      border-color: ${p => p.theme.primary};\n\n      &:hover,\n      &:focus {\n        border-color: ${p => p.theme.secondary};\n      }\n\n      &:focus {\n        box-shadow: 0 0 0 1px ${p => p.theme.primary};\n      }\n    }\n\n    .anticon-search {\n      font-size: 20px;\n      color: ${p => p.theme.primary};\n    }\n  }\n`\n\nconst TextArea = styled(Input.TextArea)`\n  &.ant-input {\n    resize: none;\n    border: 1px solid ${p => p.theme.primary};\n\n    &:hover,\n    &:focus {\n      border-color: ${p => p.theme.secondary};\n    }\n\n    ${borderLess};\n  }\n`\n\nexport { StyledInput as Input, TextArea, Search }\n\nexport default StyledInput\n","export default {\n  CARD: 'card',\n  BOARD: 'board',\n  SNIPPET: 'snippet',\n}\n","import React from 'react'\nimport { atom, useRecoilState, useRecoilValue, useSetRecoilState } from 'recoil'\n\ntype BreadcrumbItem = {\n  href?: string\n  name: string\n}\n\nexport const breadcrumbState = atom<BreadcrumbItem[]>({\n  key: 'breadcrumbState',\n  default: [],\n})\n\nexport function useBreadcrumbState() {\n  const state = useRecoilState(breadcrumbState)\n  return state\n}\n\nexport function useBreadcrumb(items: BreadcrumbItem[] = []) {\n  const setter = useSetRecoilState(breadcrumbState)\n\n  React.useEffect(() => {\n    setter(items)\n  }, []) // eslint-disable-line\n}\n\nexport const headerContentState = atom<React.ReactNode>({\n  key: 'headerContentState',\n  default: null,\n})\n\nexport function useHeaderContentState() {\n  return useRecoilState(headerContentState)\n}\n\nexport function useHeaderContent(node?: React.ReactNode) {\n  const setter = useSetRecoilState(headerContentState)\n\n  React.useEffect(() => {\n    setter(node)\n\n    return () => {\n      setter(null)\n    }\n  }, []) // eslint-disable-line\n}\n\nexport function useHeaderContentValue() {\n  const value = useRecoilValue(headerContentState)\n  return value\n}\n","import React from 'react'\nimport { atom, atomFamily, useRecoilState, useSetRecoilState } from 'recoil'\nimport {\n  find,\n  mergeAll,\n  map,\n  values,\n  head,\n  keys,\n  path,\n  pathOr,\n  propEq,\n} from 'ramda'\nimport moment from 'moment'\nimport fakeSetting from '@/mocks/fake-snippet-setting.json'\nimport { reportTemplateById } from '@/components/report-template-list'\nconst { compose } = require('ramda')\nconst faker = require('faker')\n\ntype SnippetList = { [key: string]: any[] }\n\nexport const reportTemplateCategory = {\n  CLINICAL_HISTORY: 'Clinical History',\n  HIGHT_RISK_REASONS: 'Hight Risk Reasons',\n  DATA_OF_PRIOR_SIMILAR_STUDY: 'Data of prior similar study',\n  IMAGING_PROTOCOL: 'Imaging Protocal',\n  TUMOR_LOCATION: 'Tumor Location/Size',\n}\n\nconst fakeSnippetSetting = compose(\n  mergeAll,\n  map((key: string) => ({\n    [key]: compose(\n      map((x: any) => ({\n        ...x,\n        Component: path([x.type, 'Component'])(reportTemplateById),\n      })),\n      pathOr([], [key])\n    )(fakeSetting),\n  })),\n  keys\n)(fakeSetting) as { [key: string]: any[] }\n\nconst fakeReportTemplateList = Array.from({ length: 100 }).map((_, idx) => ({\n  id: idx + 1,\n  name: faker.lorem.word(),\n  author: faker.name.findName(),\n  status: 1,\n  statusName: '已發佈',\n  createdAt: moment(),\n  createdAtStr: moment().format('YYYY/MM/DD HH:mm'),\n  updatedAt: moment(),\n  updatedAtStr: moment().format('YYYY/MM/DD HH:mm'),\n  description: faker.lorem.word(),\n  setting: fakeSnippetSetting,\n}))\n\nexport const defaultSnippetList = compose(\n  mergeAll,\n  map((key: string) => ({ [key]: [] })),\n  values\n)(reportTemplateCategory)\n\nexport const reportSnippetsState = atomFamily<\n  SnippetList,\n  React.Key | undefined\n>({\n  key: 'reportSnippetsState',\n  default: id =>\n    compose(\n      pathOr(defaultSnippetList, ['setting']),\n      find(propEq('id', Number(id)))\n    )(fakeReportTemplateList),\n})\n\nconst snippetCategoryState = atom<string>({\n  key: 'snippetCategoryState',\n  default: compose(head, values)(reportTemplateCategory),\n})\n\nconst reportTemplateListState = atom({\n  key: 'reportTemplateListState',\n  default: {\n    content: fakeReportTemplateList,\n    total: 100,\n  },\n})\n\nconst reportPreviewState = atom({\n  key: 'reportPreviewState',\n  default: false,\n})\n\nexport function useReportPreview() {\n  const [isPreview, setIsPreview] = useRecoilState(reportPreviewState)\n\n  return [isPreview, () => setIsPreview(prev => !prev)] as [boolean, () => void]\n}\n\nexport function useReportSnippets(id?: React.Key) {\n  const [_snippetList] = useRecoilState(reportSnippetsState(id))\n\n  React.useEffect(() => {\n    setSnippetList(_snippetList)\n  }, [JSON.stringify(_snippetList)]) // eslint-disable-line\n\n  const [snippetList, setSnippetList] = React.useState<SnippetList>(\n    _snippetList\n  )\n\n  return [snippetList, setSnippetList] as [\n    SnippetList,\n    React.Dispatch<React.SetStateAction<SnippetList>>\n  ]\n}\n\nexport function useSnippetCategory(values?: any) {\n  const state = useRecoilState(snippetCategoryState)\n\n  React.useEffect(() => {}, [])\n\n  return state\n}\n\nexport function useReportTemplateList() {\n  return useRecoilState(reportTemplateListState)\n}\n\nexport function useToggleReportPreview(state: boolean = false) {\n  const setter = useSetRecoilState(reportPreviewState)\n\n  React.useEffect(() => {\n    setter(state)\n\n    return () => {\n      setter(false)\n    }\n  }, [state]) // eslint-disable-line\n}\n","import { includes } from 'ramda'\nimport { isNil } from '@/utils/webHelper'\n\n/* prettier-ignore */\nconst REPORT_TEMPLATE_BUILDER_CLASSNAME = 'report-template-builder__main-content'\nconst UI_DRAGGABLE_CLASSNAME = 'ui-draggable'\n\nconst hasClassName = (nodes, className) => {\n  return nodes.find(\n    n => !isNil(n.className) && includes(className)(n.className)\n  )\n}\n\nexport function canMoveSnippet(\n  element,\n  className = REPORT_TEMPLATE_BUILDER_CLASSNAME\n) {\n  let elem = element\n\n  const nodes = []\n  nodes.push(elem)\n\n  while (elem.parentNode) {\n    nodes.unshift(elem.parentNode)\n    elem = elem.parentNode\n  }\n\n  if (\n    hasClassName(nodes, 'report-template-builder-contentarea--fixed-layout') ||\n    hasClassName(nodes, 'snippet-drawer-menu')\n  ) {\n    return false\n  }\n  if (\n    hasClassName(nodes, className) ||\n    hasClassName(nodes, UI_DRAGGABLE_CLASSNAME)\n  ) {\n    return true\n  }\n\n  return false\n}\n\nexport function findSnippet(element, className = UI_DRAGGABLE_CLASSNAME) {\n  if (element.classList.contains(className)) {\n    return element\n  }\n  return element.parentElement && findSnippet(element.parentElement, className)\n}\n\nexport function getPlaceHolderIndex(clientOffset) {\n  const hoverElement = document.elementFromPoint(clientOffset.x, clientOffset.y)\n\n  // find ui-draggable classname\n  const overSnippet = findSnippet(hoverElement)\n\n  const snippetIndex = overSnippet && overSnippet.dataset.index\n  const placeholderIndex = overSnippet ? +overSnippet.dataset.index : -1\n\n  const isOverSnippet = !isNil(snippetIndex)\n\n  return {\n    overSnippet,\n    placeholderIndex,\n    isOverSnippet: isOverSnippet,\n  }\n}\n\nexport default function getDisplayName(Component) {\n  return (\n    Component.displayName ||\n    Component.name ||\n    (typeof Component === 'string' && Component.length > 0\n      ? Component\n      : 'Unknown')\n  )\n}\n","import React from 'react'\nimport { Modal } from 'antd'\nimport { ModalProps, ModalFuncProps } from 'antd/lib/modal'\n\nexport const modalDefaultProps = (\n  content?: React.ReactNode,\n  props?: ModalProps\n): ModalFuncProps => ({\n  content: (\n    <div\n      className=\"text-primary font-medium\"\n      css={{ marginTop: 16, marginBottom: 30 }}>\n      {content}\n    </div>\n  ),\n  icon: null,\n  width: 440,\n  okText: '刪除',\n  cancelText: '取消',\n  centered: true,\n  // maskStyle: {\n  //   background: theme.modal.maskDarken,\n  // },\n  autoFocusButton: null,\n  okButtonProps: {\n    className: 'c-btn is--danger',\n    style: { minWidth: 80, marginRight: 24 },\n  },\n  cancelButtonProps: {\n    className: 'c-btn is--outline mr-0 float-right',\n    style: { minWidth: 80 },\n  },\n  ...props,\n})\n\nexport const confirm = ({\n  onOk,\n  onCancel,\n  content = '刪除後將無法還原，確認繼續？',\n  ...props\n}: ModalFuncProps) => {\n  Modal.confirm({\n    ...modalDefaultProps(content),\n    ...props,\n    onOk: () => {\n      if (onOk) {\n        onOk()\n      }\n    },\n    onCancel() {\n      if (onCancel) {\n        onCancel()\n      }\n    },\n  })\n}\n","import styled from 'styled-components'\nimport {\n  position,\n  color,\n  layout,\n  space,\n  flexbox,\n  background,\n  typography,\n  ColorProps,\n  border,\n  TypographyProps,\n  LayoutProps,\n  SpaceProps,\n  FlexboxProps,\n  BorderProps,\n  PositionProps,\n  BackgroundProps,\n} from 'styled-system'\n\nexport default styled.div<\n  ColorProps &\n    TypographyProps &\n    LayoutProps &\n    SpaceProps &\n    FlexboxProps &\n    BorderProps &\n    PositionProps &\n    BackgroundProps\n>`\n  ${color};\n  ${layout};\n  ${space};\n  ${flexbox};\n  ${typography};\n  ${border};\n  ${position};\n  ${background};\n`\n","import React from 'react'\nimport styled from 'styled-components'\nimport {\n  EditOutlined,\n  DeleteOutlined,\n  // RightOutlined,\n  // LeftOutlined,\n} from '@ant-design/icons'\nimport cx from 'classnames'\nimport { Tooltip } from 'antd'\nimport Box from '@/components/box'\n\ntype Props = {\n  tabIndex: number\n  onEdit: () => void\n  onDelete: () => void\n}\n\nconst ToolbarWrapper = styled(Box)`\n  position: absolute;\n  top: 16px;\n  right: 24px;\n  visibility: hidden;\n  transition: visibility 0s, opacity 0.3s, max-height 0.6s linear;\n  opacity: 0;\n  z-index: 1;\n\n  &.is--over {\n    visibility: visible;\n    transition: visibility 0s, opacity 0.3s, max-height 0.6s linear;\n    opacity: 0.8;\n  }\n`\n\nexport default function SnippetToolbar({ tabIndex, onEdit, onDelete }: Props) {\n  return (\n    <ToolbarWrapper\n      className={cx('text-primary', { 'is--over': tabIndex === 1 })}>\n      {/* <Tooltip title=\"向左縮排\">\n        <LeftOutlined className=\"mr-2 cursor-pointer\" />\n      </Tooltip>\n      <Tooltip title=\"向右縮排\">\n        <RightOutlined className=\"mr-2 cursor-pointer\" />\n      </Tooltip> */}\n      <Tooltip title=\"編輯\">\n        <EditOutlined className=\"mr-2 cursor-pointer\" onClick={onEdit} />\n      </Tooltip>\n      <Tooltip title=\"刪除\">\n        <DeleteOutlined className=\"cursor-pointer\" onClick={onDelete} />\n      </Tooltip>\n    </ToolbarWrapper>\n  )\n}\n","import React from 'react'\nimport { DragSource, ConnectDragPreview, ConnectDragSource } from 'react-dnd'\nimport { getEmptyImage } from 'react-dnd-html5-backend'\nimport { mergeRight } from 'ramda'\nimport cx from 'classnames'\nimport { confirm } from '@/utils/message'\nimport theme from '@/theme'\nimport ItemTypes from '@/constants/item-types'\nimport SnippetToolbar from './snippet-toolbar'\n\ntype Props = {\n  id?: React.Key\n  wrapperId?: string\n  className?: string\n  style?: React.CSSProperties\n  index?: number\n  isDragging?: boolean\n  draggable?: boolean\n  fromMenu?: boolean\n  connectDragPreview: ConnectDragPreview\n  connectDragSource: ConnectDragSource\n  children?: React.ReactNode\n  findSnippet?(id: React.Key): any\n  removeSnippet?(index: number): void\n}\n\ntype State = {\n  top: number\n  tabIndex: number\n  editModalVisible: boolean\n}\n\nconst withDragSource = DragSource(\n  ItemTypes.BOARD,\n  {\n    beginDrag(props: Props) {\n      return {\n        ...props,\n        fromMenu: false,\n        originalIndex: (props as any).findSnippet(props.id).index,\n      }\n    },\n    canDrag(props: Props) {\n      return !!(props.draggable && !props.fromMenu)\n    },\n  },\n  (connect, monitor) => ({\n    connectDragSource: connect.dragSource(),\n    connectDragPreview: connect.dragPreview(),\n    isDragging: monitor.isDragging(),\n  })\n)\n\nclass Snippet extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props)\n\n    this.state = {\n      top: 0,\n      tabIndex: -1,\n      editModalVisible: false,\n    }\n  }\n\n  componentDidMount = () => {\n    const { connectDragPreview } = this.props\n    if (connectDragPreview) {\n      connectDragPreview(getEmptyImage() /* { anchorX: 0.2, anchorY: 0.1 } */)\n    }\n  }\n\n  handleRemove = () => {\n    confirm({\n      content: '刪除後將無法還原，確認繼續？',\n      title: '確認要刪除這個模版?',\n      onOk: () => {\n        ;(this.props as any).removeSnippet(this.props.index)\n      },\n      onCancel() {\n        console.log('Cancel')\n      },\n    })\n  }\n\n  handleEditModalVisible = () => {\n    this.setState(prev => ({ editModalVisible: !prev.editModalVisible }))\n  }\n\n  handleIndent = (align: 'left' | 'right') => () => {}\n\n  _onMouseOver = () => {\n    this.setState({ tabIndex: 1 })\n  }\n\n  _onMouseOut = () => {\n    this.setState({ tabIndex: -1 })\n  }\n\n  render() {\n    const {\n      props: {\n        connectDragSource,\n        connectDragPreview,\n        isDragging,\n        wrapperId,\n        index,\n        draggable,\n        style = {},\n        className = 'mb-3',\n      },\n      state: { tabIndex, editModalVisible },\n    } = this\n\n    const styles = mergeRight(\n      getItemStyles({ isDragging, tabIndex, draggable }),\n      style\n    )\n\n    return connectDragSource(\n      connectDragPreview(\n        <div\n          id={wrapperId}\n          style={styles}\n          className={cx(\n            'ui-sortable',\n            { 'ui-draggable': draggable },\n            className\n          )}\n          tabIndex={tabIndex}\n          onMouseOver={this._onMouseOver}\n          onMouseOut={this._onMouseOut}\n          data-index={index}>\n          {draggable && (\n            <SnippetToolbar\n              tabIndex={tabIndex}\n              onEdit={this.handleEditModalVisible}\n              onDelete={this.handleRemove}\n            />\n          )}\n          {React.Children.map(this.props.children, child =>\n            React.cloneElement(child as any, {\n              editModalVisible,\n              handleEditModalVisible: this.handleEditModalVisible,\n            })\n          )}\n        </div>\n      )\n    )\n  }\n}\n\nfunction getItemStyles(props: Partial<Props & State>): React.CSSProperties {\n  const { isDragging, tabIndex, draggable } = props\n\n  const isFocus = tabIndex === 1\n\n  return {\n    ...(isFocus ? { borderRadius: 3 } : {}),\n    ...(draggable\n      ? { border: `1px dashed ${draggable ? '#e7e7e7' : 'transparent'}` }\n      : {\n          outlineColor: isFocus ? theme.purple150 : 'transparent',\n        }),\n    cursor: 'default',\n    position: 'relative',\n    display: isDragging ? 'none' : 'block',\n  }\n}\n\nexport default withDragSource(Snippet)\n","import React from 'react'\nimport { replace } from 'ramda'\nimport { envStore } from '@/constants/env'\n\nexport interface UseTitleOptions {\n  restoreOnUnmount?: boolean\n}\n\nconst DEFAULT_USE_TITLE_OPTIONS: UseTitleOptions = {\n  restoreOnUnmount: false,\n}\n\nfunction useTitle(\n  title: string,\n  options: UseTitleOptions = DEFAULT_USE_TITLE_OPTIONS\n) {\n  const prevTitleRef = React.useRef(document.title)\n  document.title = replace(/%s/, title)(envStore.appTitle)\n  React.useEffect(() => {\n    if (options && options.restoreOnUnmount) {\n      return () => {\n        document.title = prevTitleRef.current // eslint-disable-line\n      }\n    } else {\n      return\n    }\n  }, []) // eslint-disable-line\n}\n\nexport default typeof document !== 'undefined'\n  ? useTitle\n  : (_title: string) => {}\n","import React from 'react'\nimport styled from 'styled-components'\nimport { Modal } from 'antd'\nimport { ModalProps } from 'antd/lib/modal'\n\nconst StyledModal = styled(Modal)`\n  animation-duration: 0s !important;\n  transition: none !important;\n\n  .ant-modal-header--border-none {\n    border-bottom: none;\n  }\n\n  .ant-modal-footer {\n    padding-top: 14px;\n    padding-bottom: 14px;\n  }\n`\n\nexport default class ModalComponent extends React.Component<ModalProps, any> {\n  static confirm = Modal.confirm\n  static error = Modal.error\n  static success = Modal.success\n  static info = Modal.info\n\n  render() {\n    return <StyledModal {...this.props}>{this.props.children}</StyledModal>\n  }\n}\n","import React from 'react'\nimport { Table, Empty, Tooltip } from 'antd'\nimport { TableProps } from 'antd/lib/table'\nimport { CloseOutlined, PlusOutlined } from '@ant-design/icons'\nimport styled from 'styled-components'\n\nconst StyledTable: any = styled(Table)`\n  &.ant-table-wrapper {\n    .ant-pagination-prev .ant-pagination-item-link,\n    .ant-pagination-next .ant-pagination-item-link {\n      border-color: ${p => p.theme.pagination};\n      border-radius: 6px;\n      color: ${p => p.theme.pagination};\n    }\n\n    .ant-pagination-item {\n      border-color: ${p => p.theme.pagination};\n    }\n\n    .ant-pagination-item a {\n      color: ${p => p.theme.pagination};\n    }\n\n    .ant-pagination-item-active,\n    .ant-pagination-item-active:focus,\n    .ant-pagination-item:hover {\n      border-color: ${p => p.theme.pagination};\n      background: ${p => p.theme.pagination};\n\n      a {\n        color: #fff;\n      }\n    }\n\n    .ant-table-pagination.ant-pagination {\n      margin-top: 32px;\n    }\n\n    .ant-pagination-prev:hover .ant-pagination-item-link,\n    .ant-pagination-next:hover .ant-pagination-item-link {\n      border-color: ${p => p.theme.pagination};\n      background: ${p => p.theme.pagination};\n      color: #fff;\n    }\n\n    .ant-pagination-simple-pager {\n      color: ${p => p.theme.pagination};\n    }\n  }\n\n  .ant-table-tbody > tr > td {\n    height: 40px;\n    padding-top: 10px;\n    padding-bottom: 10px;\n    line-height: 1em;\n    color: #4a4a4a;\n    background: #f0f2f5;\n    border-bottom: 1px solid #e9e9e9;\n  }\n\n  .ant-table-thead > tr > th {\n    background: rgb(196, 213, 241);\n    border-bottom: 1px solid #e9e9e9;\n    color: ${p => p.theme.primary};\n    font-weight: 600;\n    font-size: 16px;\n  }\n`\n\ntype Props<T> = TableProps<T> & {\n  editable?: boolean\n  isRowDeletable?: (row: T) => boolean\n  onAddRowClick?: (param?: any) => any\n  onDeleteRowClick?: (param?: any) => any\n  isCanEdit?: any\n}\n\nfunction TableComponent<T = any>({\n  editable = false,\n  columns = [],\n  onAddRowClick,\n  isRowDeletable = () => true,\n  onDeleteRowClick,\n  isCanEdit = '',\n  ...props\n}: Props<T>) {\n  const _columns = React.useMemo(() => {\n    let canEdit: boolean = true\n    if (!editable) {\n      return columns\n    }\n    if (isCanEdit !== '') {\n      canEdit = isCanEdit\n    }\n\n    const handleRowDelete = (key: React.Key) => () => {\n      if (onDeleteRowClick) {\n        onDeleteRowClick(key)\n      }\n    }\n\n    return [\n      {\n        title: (\n          <Tooltip placement=\"topLeft\" title=\"新增\">\n            <PlusOutlined\n              className=\"ml-1 relative\"\n              style={{ top: -3 }}\n              onClick={canEdit ? onAddRowClick : undefined}\n            />\n          </Tooltip>\n        ),\n        width: 50,\n        render: (_: any, __: any, idx: number) => (\n          <div className=\"text-center\">#{idx + 1}</div>\n        ),\n      },\n      ...columns,\n      {\n        width: 50,\n        render: (_: any, r: any, idx: number) => (\n          <Tooltip placement=\"topLeft\" title=\"刪除\">\n            <CloseOutlined\n              onClick={isRowDeletable(r) ? handleRowDelete(r.id) : undefined}\n            />\n          </Tooltip>\n        ),\n      },\n    ]\n  }, [columns, editable]) // eslint-disable-line\n\n  return (\n    <StyledTable\n      columns={_columns}\n      locale={{\n        emptyText: (\n          <Empty\n            image={Empty.PRESENTED_IMAGE_SIMPLE}\n            description={\n              <span>\n                <span className=\"d-block\">\n                  尚無資料，請點選「＋新增」新增資料。\n                </span>\n              </span>\n            }\n          />\n        ),\n      }}\n      {...props}>\n      {props.children}\n    </StyledTable>\n  )\n}\n\nTableComponent.displayName = 'Table'\nTableComponent.Column = Table.Column\n\nexport default TableComponent\n","import { Breadcrumb } from 'antd'\nimport styled from 'styled-components'\n\nconst StyledBreadcrumb = styled(Breadcrumb)`\n  &.ant-breadcrumb {\n    font-size: 16px;\n\n    .ant-breadcrumb-link {\n      cursor: pointer;\n    }\n\n    .ant-breadcrumb-link,\n    a {\n      color: #fff;\n    }\n\n    .anticon {\n      font-size: 16px;\n    }\n\n    .ant-breadcrumb-link:hover,\n    a:hover {\n      text-decoration: underline;\n    }\n\n    .ant-breadcrumb-separator {\n      margin: 0 16px;\n      color: #fff;\n    }\n\n    > span:last-child {\n      color: #fff;\n      text-decoration: underline;\n    }\n  }\n`\n\nexport default StyledBreadcrumb\n","import React from 'react'\nimport cx from 'classnames'\nimport { Layout, Avatar, Menu } from 'antd'\nimport {\n  SettingOutlined,\n  ExportOutlined,\n  HomeOutlined,\n} from '@ant-design/icons'\nimport styled from 'styled-components'\nimport Button from '@/components/button'\nimport Breadcrumb from '@/components/breadcrumb'\nimport { useBreadcrumbState, useHeaderContentValue } from '@/hooks/useApp'\nimport history from '@/utils/history'\nimport { envStore } from '@/constants/env'\nimport * as routes from '@/constants/routes'\n\nexport default function AppHeader() {\n  const [items] = useBreadcrumbState()\n  const content = useHeaderContentValue()\n\n  const [current, setCurrentPath] = React.useState(history.location.pathname)\n\n  const handleTo = (pathname?: string) => () => {\n    if (pathname) {\n      setCurrentPath(pathname)\n      history.push(pathname)\n    }\n  }\n\n  const getMenuClassName = (targetUrl: string) => {\n    return cx({ 'is--current': current !== '/' && targetUrl.includes(current) })\n  }\n\n  return (\n    <Header>\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center\">\n          <Logo>\n            <img\n              src={`${envStore.publicUrl}/images/logo-sm@2x.png`}\n              alt=\"app-logo\"\n              className=\"cursor-pointer\"\n            />\n          </Logo>\n          <Menu\n            mode=\"horizontal\"\n            className=\"bg-transparent ml-3\"\n            style={{ borderBottom: 'none', lineHeight: '46px' }}>\n            <MenuItem\n              key={routes.RADIOL_IMAGES}\n              onClick={handleTo(routes.RADIOL_IMAGES)}\n              className={getMenuClassName(routes.RADIOL_IMAGES)}>\n              <div className=\"flex items-center text-lg\">\n                <SettingOutlined />\n                清單查詢 +\n              </div>\n            </MenuItem>\n            <MenuItem\n              key={routes.REPORT_INQUIRY}\n              onClick={handleTo(routes.REPORT_INQUIRY)}\n              className={getMenuClassName(routes.REPORT_INQUIRY)}>\n              <div className=\"flex items-center text-lg\">\n                <SettingOutlined />\n                輸入報告 +\n              </div>\n            </MenuItem>\n            <MenuItem\n              key={routes.REPORT_TEMPLATE_LIST}\n              onClick={handleTo(routes.REPORT_TEMPLATE_LIST)}\n              className={getMenuClassName(routes.REPORT_TEMPLATE_LIST)}>\n              <div className=\"flex items-center text-lg\">\n                <SettingOutlined />\n                結構式報告 +\n              </div>\n            </MenuItem>\n            <MenuItem\n              key=\"outside\"\n              onClick={handleTo(routes.REPORT_TEMPLATE_EDIT)}\n              className={getMenuClassName('outside')}>\n              <div className=\"flex items-center text-lg\">\n                <SettingOutlined />\n                醫學影像教學平台 +\n              </div>\n            </MenuItem>\n          </Menu>\n        </div>\n        <div className=\"flex items-center\">\n          <div className=\"text-white text-lg mr-4\">Hi, 使用者</div>\n          <Avatar className=\"flex items-center h-12 w-12\">\n            <div className=\"text-2xl\">C</div>\n          </Avatar>\n          <Button\n            icon={\n              <ExportOutlined\n                className=\"text-white text-2xl\"\n                style={{ marginRight: 0 }}\n              />\n            }\n            className=\"ml-4 bg-transparent border border-white rounded pr-1 hover--none\"\n            style={{ minWidth: 35, borderColor: '#fff' }}\n          />\n        </div>\n      </div>\n      <div className=\"mt-6 ml-4 pb-4 flex justify-between\">\n        <Breadcrumb separator=\">\" style={{ minHeight: 32 }}>\n          <Breadcrumb.Item onClick={handleTo('/')}>\n            <HomeOutlined className=\"relative\" style={{ top: -4 }} />\n          </Breadcrumb.Item>\n          {items.map((x, idx) => (\n            <Breadcrumb.Item\n              key={`breadcrumb-${idx}`}\n              onClick={handleTo(x.href)}>\n              {x.name}\n            </Breadcrumb.Item>\n          ))}\n        </Breadcrumb>\n        {content}\n      </div>\n    </Header>\n  )\n}\n\nconst Header = styled(Layout.Header)`\n  &.ant-layout-header {\n    height: auto;\n    padding: 16px 1.7rem 16px 2.1rem;\n    background: ${p => `linear-gradient(-90deg, #4252c4, ${p.theme.primary})`};\n    color: ${p => p.theme.primary};\n    box-shadow: 0 0 20px ${p => p.theme.purple150};\n  }\n\n  .anticon {\n    cursor: pointer;\n  }\n`\n\nconst MenuItem = styled(Menu.Item)`\n  &.ant-menu-item {\n    margin: 0 5px !important;\n    padding: 0 15px !important;\n    border-radius: 6px;\n    border-bottom: none !important;\n    color: #fff;\n\n    &.is--current,\n    &:hover {\n      color: #fff !important;\n      background: rgba(36, 48, 144, 1) !important;\n    }\n  }\n`\n\nconst Logo = styled.div``\n","import React from 'react'\nimport { Layout } from 'antd'\n\nexport default function AppFooter() {\n  return (\n    <Layout.Footer\n      className=\"pb-6 text-center text-lg text-gray-600\"\n      style={{ background: 'rgb(221, 228, 237)' }}>\n      高雄榮總數位病理平台\n    </Layout.Footer>\n  )\n}\n","import React from 'react'\nimport { Layout } from 'antd'\nimport AppHeader from '@/components/app-header'\nimport AppFooter from '@/components/app-footer'\nimport theme from '@/theme'\n\ninterface PageProps {\n  children: React.ReactNode\n}\n\nexport function Page({ children }: PageProps) {\n  return (\n    <Layout>\n      <AppHeader />\n      <Layout.Content\n        style={{\n          background: `linear-gradient(-90deg,#4252c4,${theme.primary})`,\n        }}>\n        <div\n          className=\"pl-8 pt-6 pr-16 pb-12\"\n          css={{\n            background: 'rgb(221, 228, 237)',\n            borderTopLeftRadius: 32,\n            borderTopRightRadius: 32,\n          }}>\n          {children}\n        </div>\n      </Layout.Content>\n      <AppFooter />\n    </Layout>\n  )\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { findDOMNode } from 'react-dom'\nimport { DndContext } from 'react-dnd'\nimport throttle from 'lodash.throttle'\nimport raf from 'raf'\nimport hoist from 'hoist-non-react-statics'\nimport getDisplayName from './snippet-utils'\n\nfunction noop() {}\n\nfunction intBetween(min, max, val) {\n  return Math.floor(Math.min(max, Math.max(min, val)))\n}\n\nfunction getCoords(evt) {\n  if (evt.type === 'touchmove') {\n    return {\n      x: evt.changedTouches[0].clientX,\n      y: evt.changedTouches[0].clientY,\n    }\n  }\n\n  return { x: evt.clientX, y: evt.clientY }\n}\n\nconst DEFAULT_BUFFER = 150\n\nexport function createHorizontalStrength(_buffer) {\n  return function defaultHorizontalStrength({ x, w, y, h }, point) {\n    const buffer = Math.min(w / 2, _buffer)\n    const inRange = point.x >= x && point.x <= x + w\n    const inBox = inRange && point.y >= y && point.y <= y + h\n\n    if (inBox) {\n      if (point.x < x + buffer) {\n        return (point.x - x - buffer) / buffer\n      } else if (point.x > x + w - buffer) {\n        return -(x + w - point.x - buffer) / buffer\n      }\n    }\n\n    return 0\n  }\n}\n\nexport function createVerticalStrength(_buffer) {\n  return function defaultVerticalStrength({ y, h, x, w }, point) {\n    const buffer = Math.min(h / 2, _buffer)\n    const inRange = point.y >= y && point.y <= y + h\n    const inBox = inRange && point.x >= x && point.x <= x + w\n\n    if (inBox) {\n      if (point.y < y + buffer) {\n        return (point.y - y - buffer) / buffer\n      } else if (point.y > y + h - buffer) {\n        return -(y + h - point.y - buffer) / buffer\n      }\n    }\n\n    return 0\n  }\n}\n\nexport const defaultHorizontalStrength = createHorizontalStrength(\n  DEFAULT_BUFFER\n)\n\nexport const defaultVerticalStrength = createVerticalStrength(DEFAULT_BUFFER)\n\nexport default function createScrollingComponent(WrappedComponent) {\n  class ScrollingComponent extends React.Component {\n    static displayName = `Scrolling(${getDisplayName(WrappedComponent)})`\n\n    static propTypes = {\n      onScrollChange: PropTypes.func,\n      verticalStrength: PropTypes.func,\n      horizontalStrength: PropTypes.func,\n      strengthMultiplier: PropTypes.number,\n    }\n\n    static defaultProps = {\n      useScroll: true,\n      onScrollChange: noop,\n      verticalStrength: defaultVerticalStrength,\n      horizontalStrength: defaultHorizontalStrength,\n      strengthMultiplier: 30,\n    }\n\n    static contextType = DndContext\n\n    constructor(props, ctx) {\n      super(props, ctx)\n\n      this.scaleX = 0\n      this.scaleY = 0\n      this.frame = null\n\n      this.attached = false\n      this.dragging = false\n    }\n\n    componentDidMount() {\n      if (this.props.useScroll) {\n        this._initial()\n      }\n    }\n\n    _initial() {\n      // window.document.body.addEventListener('dragover', this.handleEvent);\n      this.container = findDOMNode(this.wrappedInstance)\n      this.container.addEventListener('dragover', this.handleEvent)\n      // touchmove events don't seem to work across siblings, so we unfortunately\n      // have to attach the listeners to the body\n      window.document.body.addEventListener('touchmove', this.handleEvent)\n\n      this.clearMonitorSubscription = this.context.dragDropManager\n        .getMonitor()\n        .subscribeToStateChange(() => this.handleMonitorChange())\n    }\n\n    componentWillUnmount() {\n      if (this.props.useScroll) {\n        this._remove()\n      }\n    }\n\n    _remove() {\n      // window.document.body.removeEventListener('dragover', this.handleEvent);\n      this.container.removeEventListener('dragover', this.handleEvent)\n      window.document.body.removeEventListener('touchmove', this.handleEvent)\n      this.clearMonitorSubscription()\n      this.stopScrolling()\n    }\n\n    handleEvent = evt => {\n      if (this.dragging && !this.attached) {\n        this.attach()\n        this.updateScrolling(evt)\n      }\n    }\n\n    handleMonitorChange() {\n      const isDragging = this.context.dragDropManager.getMonitor().isDragging()\n\n      if (!this.dragging && isDragging) {\n        this.dragging = true\n      } else if (this.dragging && !isDragging) {\n        this.dragging = false\n        this.stopScrolling()\n      }\n    }\n\n    attach() {\n      this.attached = true\n      window.document.body.addEventListener('dragover', this.updateScrolling)\n      window.document.body.addEventListener('touchmove', this.updateScrolling)\n    }\n\n    detach() {\n      this.attached = false\n      window.document.body.removeEventListener('dragover', this.updateScrolling)\n      window.document.body.removeEventListener(\n        'touchmove',\n        this.updateScrolling\n      )\n    }\n\n    // Update scaleX and scaleY every 100ms or so\n    // and start scrolling if necessary\n    updateScrolling = throttle(\n      evt => {\n        const {\n          left: x,\n          top: y,\n          width: w,\n          height: h,\n        } = this.container.getBoundingClientRect()\n        const box = { x, y, w, h }\n        const coords = getCoords(evt)\n\n        // calculate strength\n        this.scaleX = this.props.horizontalStrength(box, coords)\n        this.scaleY = this.props.verticalStrength(box, coords)\n\n        // start scrolling if we need to\n        if (!this.frame && (this.scaleX || this.scaleY)) {\n          this.startScrolling()\n        }\n      },\n      100,\n      { trailing: false }\n    )\n\n    startScrolling() {\n      let i = 0\n      const tick = () => {\n        const { scaleX, scaleY, container } = this\n        const { strengthMultiplier, onScrollChange } = this.props\n\n        // stop scrolling if there's nothing to do\n        if (strengthMultiplier === 0 || scaleX + scaleY === 0) {\n          this.stopScrolling()\n          return\n        }\n\n        // there's a bug in safari where it seems like we can't get\n        // mousemove events from a container that also emits a scroll\n        // event that same frame. So we double the strengthMultiplier and only adjust\n        // the scroll position at 30fps\n        if (i++ % 2) {\n          const {\n            scrollLeft,\n            scrollTop,\n            scrollWidth,\n            scrollHeight,\n            clientWidth,\n            clientHeight,\n          } = container\n\n          const newLeft = scaleX\n            ? (container.scrollLeft = intBetween(\n                0,\n                scrollWidth - clientWidth,\n                scrollLeft + scaleX * strengthMultiplier\n              ))\n            : scrollLeft\n\n          const newTop = scaleY\n            ? (container.scrollTop = intBetween(\n                0,\n                scrollHeight - clientHeight,\n                scrollTop + scaleY * strengthMultiplier\n              ))\n            : scrollTop\n\n          onScrollChange(newLeft, newTop)\n        }\n        this.frame = raf(tick)\n      }\n\n      tick()\n    }\n\n    stopScrolling() {\n      this.detach()\n      this.scaleX = 0\n      this.scaleY = 0\n\n      if (this.frame) {\n        raf.cancel(this.frame)\n        this.frame = null\n      }\n    }\n\n    render() {\n      const {\n        // not passing down these props\n        strengthMultiplier,\n        verticalStrength,\n        horizontalStrength,\n        onScrollChange,\n        ...props\n      } = this.props\n\n      return (\n        <WrappedComponent\n          ref={ref => {\n            this.wrappedInstance = ref\n          }}\n          {...props}\n        />\n      )\n    }\n  }\n\n  return hoist(ScrollingComponent, WrappedComponent)\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport cx from 'classnames'\nimport withScroll, { createVerticalStrength } from './withScroll'\n\ninterface Props {\n  className?: string\n  useScroll?: boolean\n}\n\nconst DndScrollableElement = styled.div`\n  height: 100vh;\n  padding-top: 0;\n  overflow-y: scroll;\n\n  &.is--preview {\n    height: auto;\n  }\n`\n\nconst ScrollableComponent = withScroll(DndScrollableElement)\n\nconst vStrength = createVerticalStrength(150)\n\nexport default class ReactDndProvider extends React.Component<Props> {\n  static defaultProps = {\n    useScroll: true,\n  }\n\n  render() {\n    const { className, useScroll } = this.props\n\n    return (\n      <ScrollableComponent\n        useScroll={useScroll}\n        verticalStrength={vStrength}\n        strengthMultiplier={100}\n        className={cx('report-template-builder', className)}>\n        {this.props.children}\n      </ScrollableComponent>\n    )\n  }\n}\n","import React from 'react'\nimport { Select } from 'antd'\nimport { SelectProps } from 'antd/lib/select'\nimport styled from 'styled-components'\n\nconst StyledSelect: any = styled(Select)`\n  &.ant-select {\n    &.ant-select-single:not(.ant-select-customize-input) .ant-select-selector,\n    .ant-select-selection:hover,\n    .ant-select-selection:active,\n    .ant-select-selection:focus {\n      border-color: ${p => p.theme.primary};\n    }\n\n    .ant-select-selection {\n      border-color: ${p => p.theme.secondary};\n    }\n\n    .ant-select-selection:active,\n    .ant-select-selection:focus {\n      box-shadow: none;\n    }\n\n    .ant-select-arrow {\n      color: ${p => p.theme.primary};\n    }\n\n    .ant-select-arrow-icon {\n      position: relative;\n      top: -1px;\n      font-size: 14px;\n    }\n\n    &.ant-select-borderless .ant-select-selector {\n      position: relative;\n      bottom: 1px;\n      border: 0;\n      border-bottom: 1px solid ${p => p.theme.primary} !important;\n      border-bottom-left-radius: 0;\n      border-bottom-right-radius: 0;\n    }\n  }\n\n  &.ant-select.is--transparent {\n    &.ant-select-focused > .ant-select-selector {\n      border: 1px solid #666a8f;\n    }\n\n    > .ant-select-selector {\n      background: transparent;\n      border: 1px solid #666a8f;\n      color: #a9b6d8;\n\n      &:active,\n      &:focus,\n      &:hover {\n        border: 1px solid #666a8f;\n      }\n    }\n\n    .ant-select-arrow {\n      color: #a9b6d8;\n    }\n  }\n`\n\nclass SelectComponent<T = any> extends React.Component<SelectProps<T>, any> {\n  public static Option = Select.Option\n\n  public static displayName = 'Select'\n\n  render() {\n    return <StyledSelect {...this.props}>{this.props.children}</StyledSelect>\n  }\n}\n\nexport default SelectComponent\n","import React from 'react'\nimport { Checkbox } from 'antd'\nimport { CheckboxProps } from 'antd/lib/checkbox'\nimport styled from 'styled-components'\nimport { RefProps } from '@/constants/types'\n\nconst StyledCheckbox = styled(Checkbox)`\n  .ant-checkbox-checked .ant-checkbox-inner {\n    background-color: ${p => p.theme.primary};\n    border-color: ${p => p.theme.primary};\n  }\n\n  &.ant-checkbox-wrapper:hover .ant-checkbox-inner,\n  .ant-checkbox:hover .ant-checkbox-inner,\n  .ant-checkbox-input:focus + .ant-checkbox-inner {\n    border-color: ${p => p.theme.primary};\n  }\n\n  .ant-checkbox-checked .ant-checkbox-inner:after {\n    border: 2px solid #fff;\n    border-top: 0;\n    border-left: 0;\n  }\n\n  .ant-checkbox-inner {\n    border: 1px solid ${p => p.theme.secondary};\n  }\n\n  &.is--normal {\n    font-size: 14px !important;\n    font-weight: normal !important;\n  }\n`\n\ntype Props = RefProps & CheckboxProps\n\nconst CheckboxComponent: React.ElementType<Props> = React.forwardRef<\n  typeof StyledCheckbox,\n  Props\n>(({ ...props }, ref) => <StyledCheckbox forwardRef={ref} {...props} />)\n\nCheckboxComponent.displayName = 'Checkbox'\n\nexport const CheckboxGroup = Checkbox.Group\n\nexport default CheckboxComponent\n","import React from 'react'\nimport { ModalProps as AntModalProps } from 'antd/lib/modal'\nimport Modal from '@/components/modal'\nimport Button from '@/components/button'\n\nexport interface ModalProps<T = any>\n  extends Omit<AntModalProps, 'onOk' | 'onCancel'> {\n  item?: T\n  onOk?: (data?: any) => void\n  onCancel: () => void\n  children?: React.ReactNode\n}\n\nfunction TemplateModal<T = any>({\n  onCancel,\n  onOk,\n  item,\n  children,\n  ...props\n}: ModalProps<T>) {\n  const handleOk = () => {\n    if (onOk) {\n      onOk()\n    }\n  }\n  return (\n    <Modal\n      visible\n      onCancel={onCancel}\n      width={650}\n      maskClosable={false}\n      keyboard={false}\n      footer={[\n        <Button\n          key=\"btn-cancel\"\n          color=\"outline\"\n          style={{ minWidth: 80, marginRight: 16 }}\n          onClick={onCancel}>\n          取消\n        </Button>,\n        <Button\n          key=\"btn-save\"\n          color=\"primary\"\n          style={{ minWidth: 80 }}\n          onClick={handleOk}>\n          儲存\n        </Button>,\n      ]}\n      {...props}>\n      {children}\n    </Modal>\n  )\n}\n\nexport { TemplateModal as Modal }\n\nexport default TemplateModal\n","import React from 'react'\nimport cx from 'classnames'\nimport { Card } from 'antd'\nimport { CardProps } from 'antd/lib/card'\nimport { FontColorsOutlined } from '@ant-design/icons'\nimport styled from 'styled-components'\nimport { useReportPreview } from '@/hooks/useReportTemplate'\nimport { isNil } from '@/utils/webHelper'\n\nconst StyledCard = styled(Card)`\n  &.ant-card {\n    border-radius: 10px;\n    border: none;\n    cursor: move;\n  }\n\n  .ant-card-head {\n    padding-left: 18px;\n    border-bottom: none;\n    color: ${p => p.theme.primary};\n    font-size: 14px;\n    font-weight: 600;\n  }\n\n  &.ant-card-head--hide .ant-card-head {\n    display: none;\n  }\n\n  &.is--preview .ant-card-head {\n    min-height: auto;\n  }\n\n  &.is--preview .ant-card-head-title {\n    padding-top: 0;\n  }\n\n  &.is--preview .ant-card-body {\n    padding-top: 12px;\n    padding-bottom: 8px;\n  }\n\n  .ant-card-head-title {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    padding-bottom: 0;\n  }\n\n  .ant-card-body {\n    padding-top: 16px;\n    padding-left: 26px;\n    padding-bottom: 20px;\n  }\n`\n\ninterface Props extends CardProps {\n  onEdit?: () => void\n  onDelete?: () => void\n}\n\nfunction TemplateWrapper({\n  title,\n  children,\n  onDelete,\n  onEdit,\n  ...props\n}: Props) {\n  const [isPreview] = useReportPreview()\n\n  return (\n    <StyledCard\n      title={\n        <div className=\"flex items-center\">\n          {!isPreview && <FontColorsOutlined className=\"mr-3\" />}\n          {title || '預設標題 (可點鉛筆圖示可進行編輯)'}\n        </div>\n      }\n      className={cx({\n        'ant-card-head--hide': isNil(title),\n        'is--preview': isPreview,\n      })}\n      {...props}>\n      {children}\n    </StyledCard>\n  )\n}\n\nexport default TemplateWrapper\n","import { ReactText } from 'react'\n\nexport const createFormItemLayout = (label: number = 3, wrapper?: number) => ({\n  labelCol: {\n    xs: { span: label },\n    sm: { span: label },\n  },\n  wrapperCol: {\n    xs: { span: wrapper || 24 - label },\n    sm: { span: wrapper || 24 - label },\n  },\n})\n\nexport const thosandSeprartor = {\n  formatter: (value: number | string | undefined) => {\n    if (!value) {\n      return value as string\n    }\n    return `${value}`.replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')\n  },\n  parser: (value: string | undefined) =>\n    (value ? value.replace(/\\$\\s?|(,*)/g, '') : value) as ReactText,\n}\n\nexport const currency = {\n  formatter: (value: number | string | undefined) => {\n    if (!value) {\n      return value as string\n    }\n    return `$ ${value}`.replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')\n  },\n  parser: (value: string | undefined) =>\n    (value ? value.replace(/\\$\\s?|(,*)/g, '') : value) as ReactText,\n}\n\nexport const percent = {\n  // min: 0,\n  max: 100,\n  formatter: (value: number | string | undefined) => {\n    if (!value) {\n      return value as string\n    }\n    return `${value}%`\n  },\n  parser: (value: string | undefined) =>\n    (value ? value.replace('%', '') : value) as ReactText,\n}\n\nexport const rules = {\n  required: { required: true, message: '此欄位必填' },\n  number: {\n    required: false,\n    type: 'number',\n    message: '請填寫數字',\n    transform(value: any) {\n      if (!value) {\n        return value\n      }\n      return Number(value)\n    },\n  },\n  account: {\n    required: true,\n    message: '欄位長度為8~128字元,特殊符號-,_',\n    pattern: new RegExp(/^.{8,128}$/),\n  },\n  password: {\n    required: true,\n    message: '密碼長度為6~128字元',\n    pattern: new RegExp(/^.{6,128}$/),\n  },\n}\n","import React from 'react'\nimport { Form } from 'antd'\nimport { pathOr } from 'ramda'\nimport { Input, TextArea } from '@/components/input'\nimport Checkbox from '@/components/checkbox'\nimport { Modal, ModalProps } from '@/components/report-template-modal'\nimport TemplateWrapper from '@/components/report-template-wrapper'\nimport { createFormItemLayout } from '@/utils/form'\nimport { ReportTemplateSetting, ReportTemplateProps } from '@/constants/types'\n\ninterface Setting extends ReportTemplateSetting {\n  defaultValue?: string\n  multipleLine?: boolean\n}\n\nexport default function ReportTemplateInputText(props: ReportTemplateProps) {\n  const { editModalVisible, handleEditModalVisible, onUpdate, item } = props\n\n  const [setting, setSetting] = React.useState<Setting>(\n    pathOr({}, ['setting'], item)\n  )\n\n  const handleOk = (values: Setting) => {\n    setSetting(values)\n    onUpdate({ ...item, setting: values })\n  }\n\n  const inputProps = {\n    bordered: false,\n    className: 'w-2/3',\n    placeholder: setting.tooltip || '輸入內容',\n    defaultValue: setting.defaultValue,\n  }\n\n  return (\n    <>\n      {editModalVisible && (\n        <InputTextModal\n          item={setting}\n          onCancel={handleEditModalVisible}\n          onOk={handleOk}\n        />\n      )}\n      <TemplateWrapper title={setting.text || ''}>\n        {setting.multipleLine ? (\n          <TextArea {...inputProps} autoSize={{ minRows: 3 }} />\n        ) : (\n          <Input {...inputProps} />\n        )}\n      </TemplateWrapper>\n    </>\n  )\n}\n\nfunction InputTextModal({\n  onOk,\n  onCancel,\n  item,\n  ...props\n}: ModalProps<Setting>) {\n  const [form] = Form.useForm()\n\n  const handleOk = () => {\n    form.validateFields().then(values => {\n      if (onOk) {\n        onOk(values)\n      }\n      onCancel()\n    })\n  }\n\n  return (\n    <Modal<Setting>\n      {...props}\n      title={\n        <>\n          <div>\n            Text\n            <div className=\"inline ml-2 text-sm text-gray-600\">\n              typically used for description something.\n            </div>\n          </div>\n        </>\n      }\n      onCancel={onCancel}\n      onOk={handleOk}>\n      <Form\n        {...createFormItemLayout(5, 16)}\n        labelAlign=\"left\"\n        form={form}\n        initialValues={item}>\n        <Form.Item label=\"Text\" name=\"text\">\n          <Input />\n        </Form.Item>\n        <Form.Item label=\"Default Value\" name=\"defaultValue\">\n          <Input />\n        </Form.Item>\n        <Form.Item label=\"Tooltip\" name=\"tooltip\">\n          <Input />\n        </Form.Item>\n        <Form.Item\n          label=\"Multiple Lines\"\n          name=\"multipleLine\"\n          valuePropName=\"checked\">\n          <Checkbox />\n        </Form.Item>\n      </Form>\n    </Modal>\n  )\n}\n","import React from 'react'\nimport { InputNumber } from 'antd'\nimport { InputNumberProps } from 'antd/lib/input-number'\nimport styled from 'styled-components'\nimport { RefProps } from '@/constants/types'\nimport { percent, currency, thosandSeprartor } from '@/utils/form'\n\ntype Props = RefProps & InputNumberProps & { bordered?: boolean }\n\nconst StyledInputNumber = styled(InputNumber).attrs({\n  min: 0 as any, // dont know why error\n})<Props>`\n  &.ant-input-number {\n    border-color: ${p => p.theme.primary};\n\n    ::placeholder {\n      color: red;\n    }\n  }\n\n  &.ant-input-number-focused,\n  &.ant-input-number:focus,\n  &.ant-input-number:hover {\n    border-color: ${p => p.theme.primary};\n  }\n\n  &.ant-input-number-focused:not(.ant-input-number-borderless),\n  &.ant-input-number:focus:not(.ant-input-number-borderless) {\n    box-shadow: 0 0 0 1px ${p => p.theme.primary};\n  }\n\n  &.ant-input-number-borderless,\n  &.ant-input-number-borderless:hover,\n  &.ant-input-number-borderless:focus,\n  &.ant-input-number-borderless-focused,\n  &.ant-input-number-borderless-disabled,\n  &.ant-input-number-borderless[disabled] {\n    border: none;\n    border-bottom: 1px solid ${p => p.theme.primary};\n  }\n`\n\nexport const ThousandSeprartorInput = React.forwardRef<\n  typeof InputNumber,\n  Props\n>(({ ...props }, ref) => (\n  <StyledInputNumber forwardRef={ref} {...props} {...thosandSeprartor} />\n))\n\nexport const CurrencyInput = React.forwardRef<typeof InputNumber, Props>(\n  ({ ...props }, ref) => (\n    <StyledInputNumber forwardRef={ref} {...props} {...currency} />\n  )\n)\n\nexport const PercentInput = React.forwardRef<typeof InputNumber, Props>(\n  ({ ...props }, ref) => (\n    <StyledInputNumber forwardRef={ref} {...props} {...percent} />\n  )\n)\n\nThousandSeprartorInput.displayName = 'ThousandSeprartorInput'\n\nCurrencyInput.displayName = 'CurrencyInput'\n\nPercentInput.displayName = 'PercentInput'\n\nexport { StyledInputNumber as InputNumber }\n\nexport default StyledInputNumber\n","import React from 'react'\nimport { Form } from 'antd'\nimport { pathOr } from 'ramda'\nimport Input from '@/components/input'\nimport InputNumber from '@/components/input-number'\nimport { Modal, ModalProps } from '@/components/report-template-modal'\nimport TemplateWrapper from '@/components/report-template-wrapper'\nimport { createFormItemLayout } from '@/utils/form'\nimport { ReportTemplateSetting, ReportTemplateProps } from '@/constants/types'\n\ninterface Setting extends ReportTemplateSetting {\n  defaultValue?: number\n  max?: number\n  min?: number\n  units?: string\n}\n\nexport default function ReportTemplateInputNumber(props: ReportTemplateProps) {\n  const { editModalVisible, handleEditModalVisible, item, onUpdate } = props\n\n  const [setting, setSetting] = React.useState<Setting>(\n    pathOr({}, ['setting'], item)\n  )\n\n  const handleOk = (values: Setting) => {\n    setSetting(values)\n    onUpdate({ ...item, setting: values })\n  }\n\n  return (\n    <>\n      {editModalVisible && (\n        <InputNumberModal\n          item={setting}\n          onCancel={handleEditModalVisible}\n          onOk={handleOk}\n        />\n      )}\n      <TemplateWrapper title={setting.text || ''}>\n        <InputNumber\n          style={{ width: '33.333333%' }}\n          className=\"ant-input-number-borderless\"\n          defaultValue={setting.defaultValue}\n          min={setting.min}\n          max={setting.max}\n          formatter={value => `${setting.units || ''} ${value}`}\n          placeholder={setting.tooltip || '輸入數值'}\n        />\n      </TemplateWrapper>\n    </>\n  )\n}\n\nfunction InputNumberModal({ onOk, onCancel, item, ...props }: ModalProps) {\n  const [form] = Form.useForm()\n\n  const handleOk = () => {\n    form.validateFields().then(values => {\n      if (onOk) {\n        onOk(values)\n      }\n      onCancel()\n    })\n  }\n\n  return (\n    <Modal\n      {...props}\n      title={\n        <>\n          <div>\n            Number\n            <div className=\"inline ml-2 text-sm text-gray-600\">\n              typically used for input number.\n            </div>\n          </div>\n        </>\n      }\n      onOk={handleOk}\n      onCancel={onCancel}>\n      <Form\n        {...createFormItemLayout(5, 16)}\n        labelAlign=\"left\"\n        form={form}\n        initialValues={item}>\n        <Form.Item label=\"Text\" name=\"text\">\n          <Input />\n        </Form.Item>\n        <Form.Item label=\"Default Value\" name=\"defaultValue\">\n          <Input />\n        </Form.Item>\n        <Form.Item label=\"Tooltip\" name=\"tooltip\">\n          <Input />\n        </Form.Item>\n        <Form.Item label=\"Minimum Value\" name=\"min\">\n          <InputNumber />\n        </Form.Item>\n        <Form.Item label=\"Maximum Value\" name=\"max\">\n          <InputNumber />\n        </Form.Item>\n        <Form.Item label=\"Units\" name=\"units\">\n          <Input />\n        </Form.Item>\n      </Form>\n    </Modal>\n  )\n}\n","import React from 'react'\nimport { Radio } from 'antd'\nimport { RadioProps } from 'antd/lib/radio'\nimport styled from 'styled-components'\n\nconst StyledRadio = styled(Radio)`\n  &.ant-radio-wrapper {\n    color: ${p => p.theme.darkGrey};\n\n    span.ant-radio + * {\n      padding-left: 16px;\n    }\n\n    .ant-radio-inner,\n    .ant-radio-checked .ant-radio-inner {\n      border-color: ${p => p.theme.primary};\n    }\n\n    .ant-radio-inner::after {\n      background: ${p => p.theme.primary};\n    }\n\n    &:hover,\n    .ant-radio:hover .ant-radio-inner,\n    .ant-radio-input:focus + .ant-radio-inner {\n      border-color: ${p => p.theme.primary};\n    }\n  }\n`\n\ninterface Props extends RadioProps {\n  css?: React.CSSProperties\n}\n\nclass RadioComponent extends React.Component<Props, any> {\n  public static Group = Radio.Group\n\n  public static displayName = 'Radio'\n\n  public render() {\n    return <StyledRadio {...this.props} />\n  }\n}\n\nexport default RadioComponent\n","// tslint:disable: quotemark no-implicit-dependencies no-shadowed-variable no-var-requires\nimport React from 'react'\nimport { TableProps } from 'antd/lib/table'\nimport { FormInstance } from 'antd/lib/form'\nimport Table from '@/components/table'\n\ntype EditableTableProps<T> = Omit<TableProps<T>, 'onChange'> & {\n  value?: T[]\n  form: FormInstance\n  onChange?(changedValue: T[] | null): void\n  onRowAdd: (form: FormInstance) => any\n  onRowDelete: (value: { id: React.Key; form: FormInstance }) => any\n}\n\nexport default function EditableTable<T = any>({\n  form,\n  value,\n  onChange,\n  onRowAdd,\n  onRowDelete,\n  ...props\n}: EditableTableProps<T>) {\n  const triggerChange = (changedValue: T[]) => {\n    if (onChange) {\n      onChange(changedValue)\n    }\n  }\n\n  const handleAdd = () => {\n    triggerChange(onRowAdd(form))\n  }\n\n  const handleDelete = (id: string) => {\n    triggerChange(onRowDelete({ id, form }))\n  }\n\n  return (\n    <Table\n      {...props}\n      rowKey=\"id\"\n      pagination={false}\n      size=\"small\"\n      dataSource={value as any}\n      onAddRowClick={handleAdd}\n      onDeleteRowClick={handleDelete}\n      editable={true}\n    />\n  )\n}\n","import React from 'react'\nimport { Form } from 'antd'\nimport { ColumnProps } from 'antd/lib/table'\nimport { FormInstance } from 'antd/lib/form'\nimport { concat, __, pathOr, invoker, filter } from 'ramda'\nimport Input from '@/components/input'\nimport Checkbox from '@/components/checkbox'\nimport EditableTable from '@/components/editable-table'\nimport { uuid } from '@/utils/webHelper'\nimport { createFormItemLayout } from '@/utils/form'\nimport { ReportTemplateSetting } from '@/constants/types'\nimport { Modal, ModalProps } from './report-template-modal'\nconst { compose } = require('ramda')\n\nexport interface Setting extends ReportTemplateSetting {\n  options?: Option[]\n}\n\nexport type Option = {\n  id: React.Key\n  text?: string\n  selected?: boolean\n  freetext?: boolean\n}\n\nexport const defaultValue: Setting = {\n  options: [\n    {\n      id: uuid(),\n      text: '預設選項 1',\n      selected: true,\n      freetext: false,\n    },\n    {\n      id: uuid(),\n      text: '預設選項 2',\n      selected: true,\n      freetext: false,\n    },\n    {\n      id: uuid(),\n      text: '預設選項 3',\n      selected: true,\n      freetext: false,\n    },\n  ],\n}\n\nexport function TemplateSelectionModal({\n  onCancel,\n  onOk,\n  item,\n  ...props\n}: ModalProps) {\n  const [form] = Form.useForm()\n\n  const handleOk = () => {\n    form.validateFields().then(values => {\n      if (onOk) {\n        onOk(values)\n      }\n      onCancel()\n    })\n  }\n\n  const handleRowAdd = (form: FormInstance) => {\n    return compose(\n      concat(__, [\n        {\n          id: uuid(),\n          text: undefined,\n          selected: true,\n          freetext: false,\n        },\n      ]),\n      pathOr([], ['options']),\n      invoker(0, 'getFieldsValue')()\n    )(form)\n  }\n\n  const handleRowDelete = ({\n    id,\n    form,\n  }: {\n    id: React.Key\n    form: FormInstance\n  }) => {\n    return compose(\n      filter((x: any) => x.id !== id),\n      pathOr([], ['options']),\n      invoker(0, 'getFieldsValue')()\n    )(form)\n  }\n\n  const columns: ColumnProps<Option>[] = [\n    {\n      title: '選項名稱',\n      render: (v, r, idx) => (\n        <Form.Item noStyle name={['options', idx, 'text']}>\n          <Input />\n        </Form.Item>\n      ),\n    },\n    {\n      title: '是否可選',\n      align: 'center',\n      render: (v, r, idx) => (\n        <Form.Item\n          noStyle\n          name={['options', idx, 'selected']}\n          valuePropName=\"checked\">\n          <Checkbox />\n        </Form.Item>\n      ),\n    },\n    {\n      title: '是否可輸入',\n      align: 'center',\n      render: (v, r, idx) => (\n        <Form.Item\n          noStyle\n          name={['options', idx, 'freetext']}\n          valuePropName=\"checked\">\n          <Checkbox />\n        </Form.Item>\n      ),\n    },\n  ]\n\n  return (\n    <Modal\n      {...props}\n      title={\n        <>\n          <div>Single Selection List</div>\n          <div className=\"mt-1 text-sm text-gray-600\">\n            Typically used for shorter lists so that all responses are visible\n            as radio buttons. Only allow a single selection.\n          </div>\n        </>\n      }\n      onCancel={onCancel}\n      onOk={handleOk}>\n      <Form\n        {...createFormItemLayout(3, 16)}\n        labelAlign=\"left\"\n        form={form}\n        initialValues={item}>\n        <Form.Item label=\"Text\" name=\"text\">\n          <Input />\n        </Form.Item>\n        <Form.Item label=\"Tooltip\" name=\"tooltip\">\n          <Input />\n        </Form.Item>\n        <Form.Item label=\"Options\" />\n        <Form.Item noStyle name=\"options\">\n          <EditableTable\n            columns={columns}\n            form={form}\n            onRowAdd={handleRowAdd}\n            onRowDelete={handleRowDelete}\n          />\n        </Form.Item>\n      </Form>\n    </Modal>\n  )\n}\n","import React from 'react'\nimport cx from 'classnames'\nimport { pathOr } from 'ramda'\nimport Radio from '@/components/radio'\nimport Input from '@/components/input'\nimport TemplateWrapper from '@/components/report-template-wrapper'\nimport {\n  TemplateSelectionModal,\n  Setting,\n  Option,\n  defaultValue,\n} from '@/components/report-template-selection-modal'\nimport { mapIndexed } from '@/utils/webHelper'\nimport { ReportTemplateProps } from '@/constants/types'\nconst { compose } = require('ramda')\n\nfunction ReportTemplateMultipleSelection(props: ReportTemplateProps) {\n  const { item, editModalVisible, handleEditModalVisible, onUpdate } = props\n\n  const [setting, setSetting] = React.useState<Setting>(\n    pathOr(defaultValue, ['setting'], item)\n  )\n\n  const handleOk = (values: Setting) => {\n    setSetting(values)\n    onUpdate({ ...item, setting: values })\n  }\n\n  return (\n    <>\n      {editModalVisible && (\n        <TemplateSelectionModal\n          item={setting}\n          onCancel={handleEditModalVisible}\n          onOk={handleOk}\n          title={\n            <>\n              <div>Multiple Selection List</div>\n              <div className=\"mt-1 text-sm text-gray-600\">\n                typically used for shorter lists so that all responses are\n                visible as checkboxes. Allows Multiple selections.\n              </div>\n            </>\n          }\n        />\n      )}\n      <TemplateWrapper\n        title={setting.text || ''}\n        bodyStyle={{ paddingLeft: 36 }}>\n        {compose(\n          mapIndexed((x: Option, idx: number) => (\n            <Radio\n              key={x.id}\n              className={cx('block', { 'mt-1': idx > 0 })}\n              defaultChecked={false}\n              value={x.text}>\n              {x.text}\n              {x.freetext && (\n                <Input\n                  bordered={false}\n                  size=\"small\"\n                  placeholder=\"輸入備註\"\n                  className=\"ml-4 w-1/3\"\n                />\n              )}\n            </Radio>\n          )),\n          pathOr([], ['options'])\n        )(setting)}\n      </TemplateWrapper>\n    </>\n  )\n}\n\nexport default ReportTemplateMultipleSelection\n","import React from 'react'\nimport cx from 'classnames'\nimport { pathOr } from 'ramda'\nimport Radio from '@/components/radio'\nimport Input from '@/components/input'\nimport TemplateWrapper from '@/components/report-template-wrapper'\nimport {\n  TemplateSelectionModal,\n  Setting,\n  Option,\n  defaultValue,\n} from '@/components/report-template-selection-modal'\nimport { mapIndexed } from '@/utils/webHelper'\nimport { ReportTemplateProps } from '@/constants/types'\nconst { compose } = require('ramda')\n\nfunction ReportTemplateSingleSelection(props: ReportTemplateProps) {\n  const { item, editModalVisible, handleEditModalVisible, onUpdate } = props\n\n  const [setting, setSetting] = React.useState<Setting>(\n    pathOr(defaultValue, ['setting'], item)\n  )\n\n  const handleOk = (values: Setting) => {\n    setSetting(values)\n    onUpdate({ ...item, setting: values })\n  }\n\n  return (\n    <>\n      {editModalVisible && (\n        <TemplateSelectionModal\n          item={setting}\n          onCancel={handleEditModalVisible}\n          onOk={handleOk}\n        />\n      )}\n      <TemplateWrapper\n        title={setting.text || ''}\n        bodyStyle={{ paddingLeft: 36 }}>\n        <Radio.Group>\n          {compose(\n            mapIndexed((x: Option, idx: number) => (\n              <Radio\n                key={x.id}\n                className={cx('block', { 'mt-1': idx > 0 })}\n                defaultChecked={false}\n                value={x.text}>\n                {x.text}\n                {x.freetext && (\n                  <Input\n                    size=\"small\"\n                    bordered={false}\n                    placeholder=\"輸入備註\"\n                    className=\"ml-3 w-1/3\"\n                  />\n                )}\n              </Radio>\n            )),\n            pathOr([], ['options'])\n          )(setting)}\n        </Radio.Group>\n      </TemplateWrapper>\n    </>\n  )\n}\n\nexport default ReportTemplateSingleSelection\n","import React from 'react'\nimport styled, { css } from 'styled-components'\nimport { DatePicker, TimePicker } from 'antd'\nimport { DatePickerProps } from 'antd/lib/date-picker'\n\nconst borderLess = css`\n  &.ant-picker-borderless {\n    border: none;\n    border-bottom: 1px solid ${p => p.theme.primary} !important;\n    border-bottom-left-radius: 0;\n    border-bottom-right-radius: 0;\n  }\n\n  &.ant-picker-focused:not(.ant-picker-borderless) {\n    box-shadow: 0 0 0 1px ${p => p.theme.primary};\n  }\n`\n\nconst RangePicker = styled(DatePicker.RangePicker)`\n  &.ant-picker {\n    border: 1px solid ${p => p.theme.primary};\n\n    &:hover,\n    &:focus {\n      border-color: ${p => p.theme.secondary};\n    }\n\n    &.ant-picker-focused {\n      box-shadow: 0 0 0 1px ${p => p.theme.primary};\n    }\n  }\n`\n\nconst StyledDatePicker: any = styled(DatePicker)`\n  &.ant-picker {\n    border: 1px solid ${p => p.theme.primary};\n\n    &:hover,\n    &:focus {\n      border-color: ${p => p.theme.secondary};\n    }\n\n    .ant-picker-suffix {\n      color: ${p => p.theme.primary};\n    }\n\n    ${borderLess};\n  }\n`\n\nconst StyledTimePicker = styled(TimePicker)`\n  &.ant-picker {\n    border: 1px solid ${p => p.theme.primary};\n\n    &:hover,\n    &:focus {\n      border-color: ${p => p.theme.secondary};\n    }\n\n    .ant-picker-suffix {\n      color: ${p => p.theme.primary};\n    }\n\n    ${borderLess};\n  }\n`\n\nfunction DatePickerComponent(props: DatePickerProps) {\n  return <StyledDatePicker {...props} />\n}\n\nexport {\n  DatePickerComponent as DatePicker,\n  RangePicker,\n  StyledTimePicker as TimePicker,\n}\n\nexport default DatePickerComponent\n","import React from 'react'\nimport { Form } from 'antd'\nimport { pathOr } from 'ramda'\nimport Input from '@/components/input'\nimport DatePicker from '@/components/datepicker'\nimport { Modal, ModalProps } from '@/components/report-template-modal'\nimport TemplateWrapper from '@/components/report-template-wrapper'\nimport { createFormItemLayout } from '@/utils/form'\nimport { ReportTemplateProps } from '@/constants/types'\n\ntype Setting = {\n  text?: string\n  defaultValue?: moment.Moment\n  tooltip?: string\n}\n\nexport default function ReportTemplateDate(props: ReportTemplateProps) {\n  const { editModalVisible, handleEditModalVisible, item, onUpdate } = props\n\n  const [setting, setSetting] = React.useState<Setting>(\n    pathOr({}, ['setting'], item)\n  )\n\n  const handleOk = (values: Setting) => {\n    setSetting(values)\n    onUpdate({ ...item, setting: values })\n  }\n\n  return (\n    <>\n      {editModalVisible && (\n        <InputDateModal\n          item={setting}\n          onCancel={handleEditModalVisible}\n          onOk={handleOk}\n        />\n      )}\n      <TemplateWrapper title={setting.text || ''}>\n        <DatePicker\n          bordered={false}\n          className=\"w-1/3\"\n          placeholder={setting.tooltip || '選擇日期'}\n          defaultValue={setting.defaultValue}\n        />\n      </TemplateWrapper>\n    </>\n  )\n}\n\nfunction InputDateModal({\n  onOk,\n  onCancel,\n  item,\n  ...props\n}: ModalProps<Setting>) {\n  const [form] = Form.useForm()\n\n  const handleOk = () => {\n    form.validateFields().then(values => {\n      if (onOk) {\n        onOk(values)\n      }\n      onCancel()\n    })\n  }\n\n  return (\n    <Modal<Setting>\n      {...props}\n      title={\n        <>\n          <div>\n            Date\n            <div className=\"inline ml-2 text-sm text-gray-600\">\n              typically used for target date.\n            </div>\n          </div>\n        </>\n      }\n      onCancel={onCancel}\n      onOk={handleOk}>\n      <Form\n        {...createFormItemLayout(5, 16)}\n        labelAlign=\"left\"\n        form={form}\n        initialValues={item}>\n        <Form.Item label=\"Text\" name=\"text\">\n          <Input />\n        </Form.Item>\n        <Form.Item label=\"Default Value\" name=\"defaultValue\">\n          <DatePicker allowClear picker=\"date\" className=\"w-full\" />\n        </Form.Item>\n        <Form.Item label=\"Tooltip\" name=\"tooltip\">\n          <Input />\n        </Form.Item>\n      </Form>\n    </Modal>\n  )\n}\n","import React from 'react'\nimport { Form } from 'antd'\nimport { pathOr } from 'ramda'\nimport Input from '@/components/input'\nimport { TimePicker } from '@/components/datepicker'\nimport { Modal, ModalProps } from '@/components/report-template-modal'\nimport TemplateWrapper from '@/components/report-template-wrapper'\nimport { createFormItemLayout } from '@/utils/form'\nimport { ReportTemplateSetting, ReportTemplateProps } from '@/constants/types'\n\ninterface Setting extends ReportTemplateSetting {\n  defaultValue?: moment.Moment\n}\n\nexport default function ReportTemplateTime(props: ReportTemplateProps) {\n  const { editModalVisible, handleEditModalVisible, item, onUpdate } = props\n\n  const [setting, setSetting] = React.useState<Setting>(\n    pathOr({}, ['setting'], item)\n  )\n\n  const handleOk = (values: Setting) => {\n    setSetting(values)\n    onUpdate({ ...item, setting: values })\n  }\n\n  return (\n    <>\n      {editModalVisible && (\n        <InputTimeModal\n          item={setting}\n          onCancel={handleEditModalVisible}\n          onOk={handleOk}\n        />\n      )}\n      <TemplateWrapper title={setting.text || ''}>\n        <TimePicker\n          bordered={false}\n          className=\"w-1/3\"\n          placeholder={setting.tooltip || '選擇時間'}\n          defaultValue={setting.defaultValue}\n        />\n      </TemplateWrapper>\n    </>\n  )\n}\n\nfunction InputTimeModal({\n  onOk,\n  onCancel,\n  item,\n  ...props\n}: ModalProps<Setting>) {\n  const [form] = Form.useForm()\n\n  const handleOk = () => {\n    form.validateFields().then(values => {\n      if (onOk) {\n        onOk(values)\n      }\n      onCancel()\n    })\n  }\n\n  return (\n    <Modal<Setting>\n      {...props}\n      title={\n        <>\n          <div>\n            Time\n            <div className=\"inline ml-2 text-sm text-gray-600\">\n              typically used for target time.\n            </div>\n          </div>\n        </>\n      }\n      onCancel={onCancel}\n      onOk={handleOk}>\n      <Form\n        {...createFormItemLayout(5, 16)}\n        labelAlign=\"left\"\n        form={form}\n        initialValues={item}>\n        <Form.Item label=\"Text\" name=\"text\">\n          <Input />\n        </Form.Item>\n        <Form.Item label=\"Default Value\" name=\"defaultValue\">\n          <TimePicker allowClear format=\"HH:mm\" className=\"w-full\" />\n        </Form.Item>\n        <Form.Item label=\"Tooltip\" name=\"tooltip\">\n          <Input />\n        </Form.Item>\n      </Form>\n    </Modal>\n  )\n}\n","import React from 'react'\nimport { pathOr, map } from 'ramda'\nimport Select from '@/components/select'\nimport TemplateWrapper from '@/components/report-template-wrapper'\nimport {\n  TemplateSelectionModal,\n  Option,\n  defaultValue,\n} from '@/components/report-template-selection-modal'\nimport { ReportTemplateSetting, ReportTemplateProps } from '@/constants/types'\nconst { compose } = require('ramda')\n\ninterface Setting extends ReportTemplateSetting {\n  options?: Option[]\n  selectionType?: 'single' | 'multiple'\n}\n\nexport default function ReportTemplateSelect(props: ReportTemplateProps) {\n  const { item, editModalVisible, handleEditModalVisible, onUpdate } = props\n\n  const [setting, setSetting] = React.useState<Setting>(\n    pathOr(defaultValue, ['setting'], item)\n  )\n\n  const handleOk = (values: Setting) => {\n    setSetting(values)\n    onUpdate({ ...item, setting: values })\n  }\n\n  return (\n    <>\n      {editModalVisible && (\n        <TemplateSelectionModal\n          item={setting}\n          onCancel={handleEditModalVisible}\n          onOk={handleOk}\n          title={\n            <>\n              <div>Drop-down List</div>\n              <div className=\"mt-1 text-sm text-gray-600\">\n                typically used for lists of greater than 6 or 7 options.\n              </div>\n            </>\n          }\n        />\n      )}\n      <TemplateWrapper title={setting.text || ''}>\n        <Select\n          allowClear\n          bordered={false}\n          className=\"w-1/3\"\n          placeholder={setting.tooltip || '請選擇...'}>\n          {compose(\n            map((x: Option) => (\n              <Select.Option key={x.id} value={x.text as any}>\n                {x.text}\n              </Select.Option>\n            )),\n            pathOr([], ['options'])\n          )(setting)}\n        </Select>\n      </TemplateWrapper>\n    </>\n  )\n}\n","import { map, mergeAll } from 'ramda'\nimport { uuid } from '@/utils/webHelper'\nimport TemplateInputText from '@/components/report-template-input-text'\nimport TemplateInputNumber from '@/components/report-template-input-number'\nimport TemplateMultipleSelection from '@/components/report-template-multiple-selection'\nimport TemplateSingleSelection from '@/components/report-template-single-selection'\nimport TemplateDate from '@/components/report-template-date'\nimport TemplateTime from '@/components/report-template-time'\nimport TemplateSelect from '@/components/report-template-select'\n// import TempldateSectionHeader from './template-section-header'\nconst { compose } = require('ramda')\n\ninterface ReportTemplateListItem {\n  id: React.Key\n  type: string\n  name: string\n  Component: React.Component\n}\n\nconst reportTemplateList = [\n  // {\n  //   id: uuid(),\n  //   componentType: 'header',\n  //   name: renderSnippetName('Section Header'),\n  //   Component: TempldateSectionHeader,\n  // },\n  {\n    id: uuid(),\n    type: 'TemplateInputText',\n    name: 'Text',\n    Component: TemplateInputText,\n  },\n  {\n    id: uuid(),\n    type: 'TemplateInputNumber',\n    name: 'Number',\n    Component: TemplateInputNumber,\n  },\n  {\n    id: uuid(),\n    type: 'TemplateSelect',\n    name: 'Drop-down List',\n    Component: TemplateSelect,\n  },\n  {\n    id: uuid(),\n    type: 'TemplateMultipleSelection',\n    name: 'Multiple Selection List',\n    Component: TemplateMultipleSelection,\n  },\n  {\n    id: uuid(),\n    type: 'TemplateSingleSelection',\n    name: 'Single Selection List',\n    Component: TemplateSingleSelection,\n  },\n  {\n    id: uuid(),\n    type: 'TemplateDate',\n    name: 'Date',\n    Component: TemplateDate,\n  },\n  {\n    id: uuid(),\n    type: 'TemplateTime',\n    name: 'Time',\n    Component: TemplateTime,\n  },\n]\n\nexport const reportTemplateById = compose(\n  mergeAll,\n  map((x: ReportTemplateListItem) => ({ [x.type]: x }))\n)(reportTemplateList)\n\nexport default reportTemplateList\n"],"sourceRoot":""}