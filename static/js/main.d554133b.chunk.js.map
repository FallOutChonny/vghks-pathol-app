{"version":3,"sources":["components/snippet-template-modal.tsx","components/snippet-template-wrapper.tsx","components/snippet-template-input-text.tsx","components/input-number.tsx","components/snippet-template-input-number.tsx","components/editable-table.tsx","components/snippet-template-selection-modal.tsx","components/snippet-template-multiple-selection.tsx","components/snippet-template-single-selection.tsx","components/snippet-template-date.tsx","components/snippet-template-time.tsx","components/snippet-template-select.tsx","components/snippet-template-section-header.tsx","components/snippet-template-cloze.tsx","components/snippet-template-list.tsx","bootstrap.ts","utils/createPack.tsx","components/error-boundary.tsx","components/exception.tsx","components/loading.tsx","components/breadcrumb.tsx","components/logout-confirm-modal.tsx","components/app-header.tsx","containers/home/index.ts","containers/login/index.tsx","app.tsx","serviceWorker.ts","index.tsx","data/useReportTemplate.ts","components/checkbox.tsx","theme.ts","components/collapse.ts","utils/history.ts","components/select.tsx","hooks/useApp.ts","components/modal.tsx","utils/message.tsx","utils/camelcase.ts","utils/request.ts","components/radio.tsx","components/snippet-utils.tsx","constants/item-types.ts","components/datepicker.tsx","services/authService.ts","hooks/useAuth.tsx","hooks/useVisible.ts","data/useReport.ts","services/report.ts","components/input.tsx","components/table.tsx","utils/get-display-name.ts","components/snippet-toolbar.tsx","components/withTinyMCE.js","components/snippet.tsx","components/tabs.ts","components/draggable-tabs.js","utils/webHelper.ts","hooks/useTitle.ts","components/layout.tsx","components/query-table.tsx","components/withScroll.js","components/snippet-scrollable-container.tsx","hooks/useRouteLeaveConfirm.ts","components/snippet-block-placeholder.ts","components/snippets-container.tsx","components/snippet-list-menu-item.tsx","components/snippet-list-menu.tsx","data/usePhrase.ts","services/phrase.ts","containers/report-template-editor/index.ts","containers/report-template-list/index.ts","containers/report-inquiry/index.ts","containers/report-typing/autoHeight.tsx","containers/report-typing/report-typing-header.tsx","containers/report-typing/components.tsx","containers/report-typing/pie.tsx","constants/enums.ts","containers/report-typing/report-typing-medical-order.tsx","containers/report-typing/report-typing-affix.tsx","containers/report-typing/report-typing-preview.tsx","hooks/useDelete.tsx","containers/report-typing/phrase-list-modal.tsx","hooks/useTableRowSelection.ts","containers/report-typing/report-typing.tsx","containers/report-typing/index.ts","containers/radiol-images-viewer/index.ts","containers/report-list/index.ts","containers/yellow-card-inquiry/index.ts","containers/blood-bank-review/index.ts","containers/medical-order/index.ts","containers/phrase-list/index.ts","containers/report-version-comparison/index.ts","containers/image-scheduler/index.ts","constants/routes.ts","components/app-footer.tsx","../theme.js","components/button.tsx","hooks/useSWR.tsx","services/pathology.tsx","constants/env.ts","utils/form.ts","services/reportTemplate.ts"],"names":["TemplateModal","onCancel","onOk","children","item","props","visible","width","maskClosable","keyboard","footer","key","color","style","minWidth","marginRight","onClick","StyledCard","styled","p","theme","darkGrey","SnippetTemplateWrapper","title","onDelete","onEdit","titleVisible","bodyVisible","useReportPreview","isPreview","className","FontColorsOutlined","cx","InputTextModal","useForm","form","validateFields","then","values","createFormItemLayout","labelAlign","initialValues","Item","label","name","valuePropName","StyledInputNumber","attrs","min","primary","ThousandSeprartorInput","React","forwardRef","ref","thosandSeprartor","CurrencyInput","currency","PercentInput","percent","displayName","InputNumberModal","EditableTable","value","onChange","onRowAdd","onRowDelete","triggerChange","changedValue","rowKey","pagination","size","dataSource","onAddRowClick","onDeleteRowClick","id","editable","compose","require","defaultValue","options","uuid","text","selected","freetext","SnippetTemplateSelectionModal","freetextVisible","columns","render","v","r","idx","noStyle","align","concat","__","undefined","pathOr","invoker","filter","x","SnippetTemplateMultipleSelection","editModalVisible","handleEditModalVisible","onUpdate","useUpdateSnippet","setting","handleOk","bodyStyle","paddingLeft","mapIndexed","defaultChecked","bordered","placeholder","SnippetTemplateSingleSelection","Group","InputDateModal","allowClear","picker","InputTimeModal","format","SnippetTemplateCloze","input","html","Component","snippetTemplateList","type","componentType","inline","icon","BoldOutlined","FontSizeOutlined","inputProps","tooltip","multipleLine","autoSize","minRows","NumberOutlined","max","formatter","units","includes","getNumberFromString","parser","replace","RegExp","DatabaseOutlined","map","Option","UnorderedListOutlined","TemplateMultipleSelection","OrderedListOutlined","TemplateSingleSelection","CalendarOutlined","ClockCircleOutlined","Cloze","snippetTemplateById","mergeAll","setComponentByTab","s","path","keys","setComponent","dayjs","extend","isSameOrBefore","isSameOrAfter","advancedFormat","customParseFormat","weekYear","weekOfYear","isMoment","localeData","badMutable","weekday","locale","pack","components","length","rest","ErrorFallbackWrapper","div","ErrorFallback","error","componentStack","resetErrorBoundary","role","message","initialState","info","ErrorBoundary","state","args","onReset","setState","this","onError","prevProps","resetKeys","a","b","some","index","Object","is","changedArray","onResetKeysChange","fallbackRender","FallbackComponent","fallback","isValidElement","Error","Exception","ExceptionWrapper","backgroundImage","envStore","publicUrl","to","Wrapper","memo","justify","Loading3QuartersOutlined","spin","StyledBreadcrumb","StyledModal","Modal","LogoutConfirmModal","centered","closable","paddingTop","ExclamationCircleFilled","fontSize","AppHeader","useBreadcrumbState","items","content","useHeaderContentValue","logout","useAuth","useState","history","location","pathname","current","setCurrentPath","useVisible","logoutModalVisible","handleLogoutModalVisible","handleTo","push","getMenuClassName","targetUrl","Header","Logo","src","alt","mode","borderBottom","lineHeight","MenuItem","routes","SettingOutlined","SubMenu","popupOffset","popupClassName","CaretDownOutlined","display","ExportOutlined","borderColor","separator","minHeight","alignItems","HomeOutlined","top","href","purple150","lazy","Login","ForgetPassword","LoginRoute","Suspense","exact","component","App","isAuthenticated","useRoutes","renderRouteItem","useCallback","param","renderRoute","data","hide","Home","Boolean","window","hostname","match","redirect","EnhancedApp","createPack","initializeState","set","zhTW","suspense","fetcher","request","revalidateOnFocus","DndProvider","backend","HTML5Backend","ReactDOM","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","console","snippetCategoryOfReport","PATHOLOGICAL_DIAGNOSIS","GROSS","MICROSCOPY","NOTES","REFERENCES","fakeReportTemplateList","Store","get","defaultSnippetsOfReport","reportTemplateListState","atom","default","reportPreviewState","selectorFamily","find","categoryState","head","useReportTemplateState","useRecoilState","useReportTemplate","reportTemplateList","reportTemplate","setReportTemplate","useEffect","of","_snippetList","setSnippetList","JSON","stringify","snippetList","snippetById","categoryCountById","categoryCount","total","flatten","setIsPreview","prev","useToggleReportPreview","useCurrentCategoryOfSnippet","CheckboxGroup","StyledCheckbox","secondary","CheckboxComponent","StyledCollapse","createHashHistory","basename","appBaseName","StyledSelect","SelectComponent","breadcrumbState","useBreadcrumb","setter","useSetRecoilState","headerContentState","useHeaderContent","node","useRecoilValue","ModalComponent","confirm","success","marginTop","marginBottom","modalDefaultProps","okText","cancelText","autoFocusButton","okButtonProps","cancelButtonProps","preserveCamelCase","string","isLastCharLower","isLastCharUpper","isLastLastCharUpper","i","character","test","toUpperCase","slice","toLowerCase","camelCase","Array","isArray","TypeError","assign","pascalCase","postProcess","charAt","trim","join","hasUpperCase","_","p1","m","cond","url","params","regex","_params","_url","propName","replacedValue","fullUrl","toQueryString","paramsObject","val","encodeURIComponent","contentTypeIs","ifElse","isNil","identity","c","convertObjectKeys","object","keypath","o","String","reduce","acc","nestedKeyPath","camelcase","body","headers","msg","errorMsg","withToken","onCompleted","successMessage","endpoint","always","T","apiBaseUrl","fetch","FormData","merge","Authorization","Accept","response","json","result","ok","Promise","reject","blob","err","StyledRadio","RadioComponent","hasClassName","nodes","n","canMoveSnippet","element","elem","parentNode","unshift","getPlaceHolderIndex","clientOffset","overSnippet","findSnippet","classList","contains","parentElement","elementFromPoint","y","snippetIndex","dataset","placeholderIndex","Number","isOverSnippet","padding","renderSnippets","wrapperId","draggable","tabSize","dangerouslySetInnerHTML","__html","CARD","BOARD","SNIPPET","borderLess","css","RangePicker","StyledDatePicker","StyledTimePicker","DatePickerComponent","divisions","AuthContext","createContext","user","setUser","setIsAuthenticated","_user","Cookies","getJSON","AuthProvider","division","PATH","remove","useMemo","Provider","context","useContext","onRequestOpen","setVisible","handleVisible","evt","handleClose","reportListState","useReportList","useReports","totalPages","setData","reportList","setReportList","refetch","Math","floor","loading","useReportItem","_data","valueById","useAddNewReport","handler","newList","createdAt","moment","createdAtStr","updatedAt","updatedAtStr","store","useUpdateReport","findIndex","update","StyledInput","TextArea","StyledTable","TableComponent","isRowDeletable","isCanEdit","_columns","canEdit","placement","emptyText","image","PRESENTED_IMAGE_SIMPLE","description","Column","getDisplayName","ToolbarWrapper","SHIFT_TYPES","SnippetToolbar","tabIndex","onShift","handleShift","shift","hidden","LeftOutlined","RightOutlined","EditOutlined","DeleteOutlined","defaultConfig","block_formats","menubar","external_plugins","dropdown","inputtext","fontsize_formats","force_br_newlines","force_p_newlines","forced_root_block","plugins","tinymce","link_title","table_toolbar","textcolor_cols","content_security_policy","allow_unsafe_link_target","relative_urls","convert_urls","valid_elements","valid_children","toolbar1","withDragSource","DragSource","ItemTypes","beginDrag","fromMenu","originalIndex","canDrag","connect","monitor","connectDragSource","dragSource","connectDragPreview","dragPreview","isDragging","Snippet","componentDidMount","getEmptyImage","shiftSnippet","handleRemove","removeSnippet","_onMouseOver","_onMouseOut","styles","mergeRight","isFocus","borderRadius","border","outlineColor","cursor","position","marginLeft","getItemStyles","onMouseOver","onMouseOut","data-index","Children","child","cloneElement","ComposedComponent","withTinyMCE","editor","toolbarMouseOver","toolbarVisible","initialize","snippet","_get","_config","clone","config","init","selector","language_url","setup","on","e","onEditorBlur","onEditorFocus","Function","execInit","setContent","init_instance_callback","undoManager","add","updateSnippet","target","getContent","offsetTop","onBlur","prevState","equals","defaultProps","hoist","bg","TabNode","connectDropTarget","isOver","draggingItem","moveTabNode","withDropTarget","DropTarget","drop","dragKey","getItem","hoverKey","dropTarget","WrapTabNode","DraggableTabs","order","newOrder","forEach","indexOf","dragIndex","hoverIndex","splice","renderTabBar","DefaultTabBar","TabPane","Tabs","addIndex","isEmpty","either","not","RisNil","queryString","search","URLSearchParams","d","Date","now","performance","random","toString","hasPath","namedPath","str","isEnvDev","appUrl","downloadAsJson","filename","dataStr","downloadAnchorNode","createElement","setAttribute","appendChild","click","readFile","file","resolve","fileReader","FileReader","addEventListener","onerror","readAsText","DEFAULT_USE_TITLE_OPTIONS","restoreOnUnmount","prevTitleRef","useRef","appTitle","_title","background","borderTopLeftRadius","borderTopRightRadius","Page","Content","QueryTable","pageNum","rowSelection","paginationConfig","pageSize","showSizeChanger","noop","intBetween","createVerticalStrength","_buffer","point","h","w","buffer","defaultHorizontalStrength","defaultVerticalStrength","ScrollableComponent","WrappedComponent","ScrollingComponent","ctx","handleEvent","dragging","attached","attach","updateScrolling","throttle","container","getBoundingClientRect","box","left","height","coords","changedTouches","clientX","clientY","getCoords","scaleX","horizontalStrength","scaleY","verticalStrength","frame","startScrolling","trailing","useScroll","_initial","findDOMNode","wrappedInstance","clearMonitorSubscription","dragDropManager","getMonitor","subscribeToStateChange","handleMonitorChange","_remove","removeEventListener","stopScrolling","tick","strengthMultiplier","onScrollChange","scrollLeft","scrollTop","scrollWidth","scrollHeight","clientWidth","clientHeight","raf","detach","cancel","contextType","DndContext","withScroll","vStrength","ReactDndProvider","useRouteLeaveConfirm","canDrop","handleSnippetDrop","handleSnippetMove","getClientOffset","hover","hoverBoundingRect","hoverMiddleY","bottom","didDrop","SnippetsContainer","atIndex","handleFindSnippet","isPlaced","onSnippetUpdate","droppedItem","nextIndex","insert","handleSnippetRemove","handleSnippetShift","handleSnippetUpdate","gt","lt","isPlaceHold","cardList","withRouter","endDrag","SnippetListMenuItem","SnippetListMenuWrapper","comp","SnippetListMenu","fakePhraseTemplateList","phraseTemplateListState","usePhraseTemplates","usePhraseList","phraseTemplates","useAddNewPhrase","setPhraseTemplates","useUpdatePhrase","useRemovePhrase","usePhraseItem","phraseTemplateList","phraseTemplate","setPhraseTemplate","usePhraseTemplate","computeHeight","parseInt","getComputedStyle","paddingBottom","autoHeight","menuState","computedHeight","root","handleRoot","getAutoHeight","StyledAnchor","PieChart","chartWidth","legendWidth","ReactFitText","DataView","Pie","legendData","legendBlock","requestRef","chart","getG2Instance","requestAnimationFrame","getLegendData","resize","geom","getAllGeoms","origin","_origin","checked","handleLegendClick","newItem","filteredLegendData","l","Debounce","hasLegend","passive","preProps","cancelAnimationFrame","formatColor","valueFormat","subTitle","forceFit","inner","animate","colors","lineWidth","pieClassName","classNames","propsData","propsSelected","defaultColors","parseFloat","dv","source","transform","field","dimension","as","maxFontSize","scale","range","onGetG2Instance","showTitle","innerRadius","stroke","toFixed","backgroundColor","isNaN","PureComponent","html2pdf","isExport","onToggleExport","handleConfirm","REPORT_INQUIRY","exporting","setIsExporting","handleExport","querySelector","opt","margin","quality","html2canvas","jsPDF","unit","orientation","from","save","RADIOL_IMAGE","dropLast","split","open","ActionTypes","reportAnnotations","ReportMedicalOrder","reviewDoctor","onToggle","activeKey","expandIcon","Panel","header","DoubleRightOutlined","ORREQNO","ORWORKNO","HNAMEC","HSEX","CSECT","HHISNUM","HNURSTA","HBED","HBIRTHDT","ORPROCED","Link","Anchor","ReportTypingAffix","affixed","showInkInFixed","affix","getAnchorStyles","borderBottomLeftRadius","borderBottomRightRadius","formItemLayout","shortFormItemLayout","SnippetPreviewWrapper","ReportTypingPreview","medical","span","gutter","readOnly","offset","ORWORD","maxWidth","whiteSpace","modal","useDelete","isDeletable","onRequestDelete","onBeforeDelete","refetchQueries","deleteItem","modalProps","onAfterDelete","onAfterDeleteResolve","currentTarget","handleConfirmDeletion","handleDeleteFailure","PhraseListModal","limit","defaultRowKeys","defaultRows","multiple","selectedRowKeys","setSelectedRowKeys","selectedRows","setSelectedRows","onSelectChange","rowKeys","rows","takeLast","selectedRowCount","clearSelection","useTableRowSelection","paddingRight","pluck","dataIndex","col","right","ReportTyping","useTitle","useAllReportTemplates","reportTemplates","keyword","setKeyword","exportable","handleExportable","phraseListModalVisible","handlePhraseListModalVisible","usePathology","VISIBLE_LEFT","VISIBLE_RIGHT","visibleLayouts","setVisibleLayouts","qs","templateId","setCurrentTemplateId","category","handleTabEdit","handleTabChange","handleTabMove","handleTabNameChange","handleKeyPress","ctrlKey","keyCode","setFieldsValue","serialNo","handleLayoutChange","leftContentVisible","rightContentVisible","REPORT_EDIT","handleAdd","handleUpdate","payload","setIsAffixed","percentage","setPercentage","handleValuesChange","round","getFieldsValue","colSpan","filterReportTemplates","onValuesChange","defaultActiveKey","DoubleLeftOutlined","showSearch","filterOption","onSearch","link","preventDefault","tab","scroll","behavior","BulbOutlined","tabBarGutter","contentEditable","suppressContentEditableWarning","spellCheck","renderCategory","template","PhraseList","PhraseEdit","PATHOL_IMAGE","REPORT_TEMPLATE_LIST","REPORT_INPUT","REPORT_TEMPLATE_EDIT","REPORT_TEMPLATE_CREATE","REPORT_VERSION_COMPARISON","REPORT_LIST","PHRASE_LIST","PHRASE_CREATE","PHRASE_EDIT","BLOOD_BANK_REVIEW","YELLOW_CARD_INQUIRY","MEDICAL_ORDER","IMAGE_SCHEDULER","RadiolImagesViewer","ImageScheduler","ReportList","ReportInquiry","ReportVersionComparison","YellowCardInquiry","BloodBankReview","MedicalOrder","ReportTemplateList","ReportTemplateBuilder","AppFooter","Footer","module","exports","danger","cornblue","comet","btn","sider","login","cyan","StyledButton","ButtonComponent","actionType","useSWR","variables","fn","query","setQuery","_fn","_key","_useSWR","dedupingInterval","onSuccess","isValidating","useSwr","method","classification","noType","no","others","DoctorSelect","doctorId","useDoctors","doctor","process","REACT_APP_API_ROOT","REACT_APP_BASE_NAME","REACT_APP_TITLE","protocol","host","REACT_APP_FAKE_API_ROOT","wrapper","labelCol","xs","sm","wrapperCol","rules","required","number","account","pattern","password","setSetting","useReportTemplates","useReportTemplateItem","setCategory","handleTabAdd","last","inc","Rlast","sort","handleTabRemove","targetKey","omit","action","snippetKeys","orderA","orderB","newTabName","innerHTML","useAddNewTemplate","setReportTemplates","useUpdateTemplate","useExportTemplate"],"mappings":"8bAaA,SAASA,EAAT,GAMmB,IALjBC,EAKgB,EALhBA,SACAC,EAIgB,EAJhBA,KAEAC,GAEgB,EAHhBC,KAGgB,EAFhBD,UACGE,EACa,qDAMhB,OACE,kBAAC,IAAD,eACEC,SAAO,EACPL,SAAUA,EACVM,MAAO,IACPC,cAAc,EACdC,UAAU,EACVC,OAAQ,CACN,kBAAC,IAAD,CACEC,IAAI,aACJC,MAAM,UACNC,MAAO,CAAEC,SAAU,GAAIC,YAAa,IACpCC,QAASf,GAJX,gBAOA,kBAAC,IAAD,CACEU,IAAI,WACJC,MAAM,UACNC,MAAO,CAAEC,SAAU,IACnBE,QAxBS,WACXd,GACFA,MAkBE,kBAQEG,GACHF,G,OAOQH,I,mDC/CTiB,EAAaC,kBAAO,KAAV,uFAAGA,CAAH,opBAUH,SAAAC,GAAC,OAAIA,EAAEC,MAAMC,YAoFXC,MA9Bf,YAQW,IAPTC,EAOQ,EAPRA,MACApB,EAMQ,EANRA,SAMQ,KALRqB,SAKQ,EAJRC,OAIQ,EAHRC,aAGQ,EAFRC,oBAEQ,SADLtB,EACK,uFACYuB,cAAbC,EADC,oBAGR,OACE,kBAACZ,EAAD,eACEM,MACE,yBAAKO,UAAU,sBACXD,GAAa,kBAACE,EAAA,EAAD,CAAoBD,UAAU,SAC5CP,GAAK,mCAAYM,EAAY,GAAK,mEAGvCC,UAAWE,IAAG,CAEZ,uBAAwBL,KAGtBtB,GACHF,I,gBCjDP,SAAS8B,EAAT,GAKyB,IAJvB/B,EAIsB,EAJtBA,KACAD,EAGsB,EAHtBA,SACAG,EAEsB,EAFtBA,KACGC,EACmB,4CACP,IAAK6B,UAAbC,EADe,oBAYtB,OACE,kBAAC,EAAD,iBACM9B,EADN,CAEEkB,MACE,oCACE,oCAEE,yBAAKO,UAAU,qCAAf,+CAMN7B,SAAUA,EACVC,KAvBa,WACfiC,EAAKC,iBAAiBC,MAAK,SAAAC,GACrBpC,GACFA,EAAKoC,GAEPrC,UAmBA,uCACMsC,YAAqB,EAAG,IAD9B,CAEEC,WAAW,OACXL,KAAMA,EACNM,cAAerC,IACf,sBAAMsC,KAAN,CAAWC,MAAM,OAAOC,KAAK,QAC3B,kBAAC,IAAD,OAEF,sBAAMF,KAAN,CAAWC,MAAM,gBAAgBC,KAAK,gBACpC,kBAAC,IAAD,OAEF,sBAAMF,KAAN,CAAWC,MAAM,UAAUC,KAAK,WAC9B,kBAAC,IAAD,OAEF,sBAAMF,KAAN,CACEC,MAAM,iBACNC,KAAK,eACLC,cAAc,WACd,kBAAC,IAAD,S,6BC1FJC,EAAoB5B,kBAAO,KAAa6B,MAAM,CAClDC,IAAK,IADgB,sFAAG9B,CAAH,wiBAUH,SAAAC,GAAC,OAAIA,EAAEC,MAAM6B,WAKL,SAAA9B,GAAC,OAAIA,EAAEC,MAAM6B,WAc5BC,EAAyBC,IAAMC,YAG1C,WAAeC,GAAf,IAAMhD,EAAN,2BACA,kBAACyC,EAAD,eAAmBM,WAAYC,GAAShD,EAAWiD,SAGxCC,EAAgBJ,IAAMC,YACjC,WAAeC,GAAf,IAAMhD,EAAN,2BACE,kBAACyC,EAAD,eAAmBM,WAAYC,GAAShD,EAAWmD,SAI1CC,EAAeN,IAAMC,YAChC,WAAeC,GAAf,IAAMhD,EAAN,2BACE,kBAACyC,EAAD,eAAmBM,WAAYC,GAAShD,EAAWqD,SAIvDR,EAAuBS,YAAc,yBAErCJ,EAAcI,YAAc,gBAE5BF,EAAaE,YAAc,eAIZb,QCHf,SAASc,EAAT,GAA2E,IAA/C1D,EAA8C,EAA9CA,KAAMD,EAAwC,EAAxCA,SAAUG,EAA8B,EAA9BA,KAASC,EAAqB,4CACzD,IAAK6B,UAAbC,EADiE,oBAYxE,OACE,kBAAC,EAAD,iBACM9B,EADN,CAEEkB,MACE,oCACE,sCAEE,yBAAKO,UAAU,qCAAf,sCAMN5B,KAtBa,WACfiC,EAAKC,iBAAiBC,MAAK,SAAAC,GACrBpC,GACFA,EAAKoC,GAEPrC,QAkBAA,SAAUA,IACV,uCACMsC,YAAqB,EAAG,IAD9B,CAEEC,WAAW,OACXL,KAAMA,EACNM,cAAerC,IACf,sBAAMsC,KAAN,CAAWC,MAAM,OAAOC,KAAK,QAC3B,kBAAC,IAAD,OAEF,sBAAMF,KAAN,CAAWC,MAAM,gBAAgBC,KAAK,gBACpC,kBAAC,IAAD,OAEF,sBAAMF,KAAN,CAAWC,MAAM,UAAUC,KAAK,WAC9B,kBAAC,IAAD,OAEF,sBAAMF,KAAN,CAAWC,MAAM,gBAAgBC,KAAK,OACpC,kBAAC,EAAD,OAEF,sBAAMF,KAAN,CAAWC,MAAM,gBAAgBC,KAAK,OACpC,kBAAC,EAAD,OAEF,sBAAMF,KAAN,CAAWC,MAAM,QAAQC,KAAK,SAC5B,kBAAC,IAAD,S,2DChGK,SAASiB,GAAT,GAOY,IANzB1B,EAMwB,EANxBA,KACA2B,EAKwB,EALxBA,MACAC,EAIwB,EAJxBA,SACAC,EAGwB,EAHxBA,SACAC,EAEwB,EAFxBA,YACG5D,EACqB,oEAClB6D,EAAgB,SAACC,GACjBJ,GACFA,EAASI,IAYb,OACE,kBAAC,KAAD,iBACM9D,EADN,CAEE+D,OAAO,KACPC,YAAY,EACZC,KAAK,QACLC,WAAYT,EACZU,cAfc,WAChBN,EAAcF,EAAS7B,KAerBsC,iBAZiB,SAACC,GACpBR,EAAcD,EAAY,CAAES,KAAIvC,WAY9BwC,UAAU,K,ICjCRC,GAAYC,EAAQ,IAApBD,QAaKE,GAAwB,CACnCC,QAAS,CACP,CACEL,GAAIM,cACJC,KAAM,6BACNC,UAAU,EACVC,UAAU,GAEZ,CACET,GAAIM,cACJC,KAAM,6BACNC,UAAU,EACVC,UAAU,GAEZ,CACET,GAAIM,cACJC,KAAM,6BACNC,UAAU,EACVC,UAAU,KAST,SAASC,GAAT,GAMI,IALTnF,EAKQ,EALRA,SACAC,EAIQ,EAJRA,KACAE,EAGQ,EAHRA,KAGQ,IAFRiF,uBAEQ,SADLhF,EACK,8DACO,IAAK6B,UAAbC,EADC,oBAyCFmD,EAA8B,CAClC,CACE/D,MAAO,2BACPgE,OAAQ,SAACC,EAAGC,EAAGC,GAAP,OACN,sBAAMhD,KAAN,CAAWiD,SAAO,EAAC/C,KAAM,CAAC,UAAW8C,EAAK,SACxC,kBAAC,IAAD,SAIN,CACEnE,MAAO,2BACPqE,MAAO,SACPL,OAAQ,SAACC,EAAGC,EAAGC,GAAP,OACN,sBAAMhD,KAAN,CACEiD,SAAO,EACP/C,KAAM,CAAC,UAAW8C,EAAK,YACvB7C,cAAc,WACd,kBAAC,IAAD,UAjB4B,mBAqB7BwC,EACD,CACE,CACE9D,MAAO,iCACPqE,MAAO,SACPL,OAAQ,SAACC,EAAGC,EAAGC,GAAP,OACN,sBAAMhD,KAAN,CACEiD,SAAO,EACP/C,KAAM,CAAC,UAAW8C,EAAK,YACvB7C,cAAc,WACd,kBAAC,IAAD,UAKR,KAGN,OACE,kBAAC,EAAD,iBACMxC,EADN,CAEEkB,MACE,oCACE,sDACA,yBAAKO,UAAU,8BAAf,wHAMJ7B,SAAUA,EACVC,KA1Fa,WACfiC,EAAKC,iBAAiBC,MAAK,SAAAC,GACrBpC,GACFA,EAAKoC,GAEPrC,UAsFA,uCACMsC,YAAqB,EAAG,IAD9B,CAEEC,WAAW,OACXL,KAAMA,EACNM,cAAerC,IACf,sBAAMsC,KAAN,CAAWC,MAAM,OAAOC,KAAK,QAC3B,kBAAC,IAAD,OAEF,sBAAMF,KAAN,CAAWC,MAAM,UAAUC,KAAK,WAC9B,kBAAC,IAAD,OAEF,sBAAMF,KAAN,CAAWC,MAAM,YACjB,sBAAMD,KAAN,CAAWiD,SAAO,EAAC/C,KAAK,WACtB,kBAACiB,GAAD,CACEyB,QAASA,EACTnD,KAAMA,EACN6B,SAlGW,SAAC7B,GACpB,OAAOyC,GACLiB,YAAOC,IAAI,CACT,CACEpB,GAAIM,cACJC,UAAMc,EACNb,UAAU,EACVC,UAAU,KAGda,YAAO,GAAI,CAAC,YACZC,YAAQ,EAAG,iBAAXA,GAVKrB,CAWLzC,IAuFM8B,YApFc,SAAC,GAMlB,IALLS,EAKI,EALJA,GACAvC,EAII,EAJJA,KAKA,OAAOyC,GACLsB,cAAO,SAACC,GAAD,OAAYA,EAAEzB,KAAOA,KAC5BsB,YAAO,GAAI,CAAC,YACZC,YAAQ,EAAG,iBAAXA,GAHKrB,CAILzC,S,IChFEyC,GAAYC,EAAQ,IAApBD,QA6DOwB,OA3Df,SAA0C/F,GAA6B,IAC7DD,EAA6DC,EAA7DD,KAAMiG,EAAuDhG,EAAvDgG,iBAAkBC,EAAqCjG,EAArCiG,uBAAwBC,EAAalG,EAAbkG,SADY,EAGtCC,YAA0B,CACtDpG,OACAmG,WACAzB,kBAHM2B,EAH4D,EAG5DA,QAASC,EAHmD,EAGnDA,SAMjB,OACE,oCACGL,GACC,kBAACjB,GAAD,CACEhF,KAAMqG,EACNxG,SAAUqG,EACVpG,KAAMwG,EACNnF,MACE,oCACE,wDACA,yBAAKO,UAAU,8BAAf,oHAQR,kBAAC,EAAD,CACEP,MAAOkF,EAAQxB,MAAQ,GACvB0B,UAAW,CAAEC,YAAa,KAC1B,sBAAMlE,KAAN,CAAWiD,SAAO,EAAC/C,KAAM,CAAC,OAAQxC,EAAKsE,KACrC,kBAAC,IAAD,KACGE,GACCiC,aAAW,SAACV,EAAWT,GAAZ,OACT,kBAAC,IAAD,CACE/E,IAAKwF,EAAEzB,GACP5C,UAAWE,IAAG,aAAc,CAAE,OAAQ0D,EAAM,IAC5CoB,gBAAgB,EAChBhD,MAAK,UAAK4B,IACTS,EAAElB,KACFkB,EAAEhB,UACD,kBAAC,IAAD,CACE4B,UAAU,EACVzC,KAAK,QACL0C,YAAY,2BACZlF,UAAU,oBAKlBkE,YAAO,GAAI,CAAC,YAlBbpB,CAmBC6B,Q,UCrDN7B,GAAYC,EAAQ,IAApBD,QAoDOqC,OAlDf,SAAwC5G,GAA6B,IAC3DD,EAA6DC,EAA7DD,KAAMiG,EAAuDhG,EAAvDgG,iBAAkBC,EAAqCjG,EAArCiG,uBAAwBC,EAAalG,EAAbkG,SADU,EAGpCC,YAA0B,CACtDpG,OACAmG,WACAzB,kBAHM2B,EAH0D,EAG1DA,QAASC,EAHiD,EAGjDA,SAMjB,OACE,oCACGL,GACC,kBAACjB,GAAD,CACEhF,KAAMqG,EACNxG,SAAUqG,EACVpG,KAAMwG,IAGV,kBAAC,EAAD,CACEnF,MAAOkF,EAAQxB,MAAQ,GACvB0B,UAAW,CAAEC,YAAa,KAC1B,sBAAMlE,KAAN,CAAWiD,SAAO,EAAC/C,KAAM,CAAC,OAAQxC,EAAKsE,KACrC,kBAAC,KAAMwC,MAAP,KACGtC,GACCiC,aAAW,SAACV,EAAWT,GAAZ,OACT,kBAAC,KAAD,CACE/E,IAAKwF,EAAEzB,GACP5C,UAAWE,IAAG,QAAS,CAAE,OAAQ0D,EAAM,IACvCoB,gBAAgB,EAChBhD,MAAK,UAAK4B,IACTS,EAAElB,KACFkB,EAAEhB,UACD,kBAAC,IAAD,CACEb,KAAK,QACLyC,UAAU,EACVC,YAAY,2BACZlF,UAAU,oBAKlBkE,YAAO,GAAI,CAAC,YAlBbpB,CAmBC6B,Q,UChBd,SAASU,GAAT,GAKyB,IAJvBjH,EAIsB,EAJtBA,KACAD,EAGsB,EAHtBA,SACAG,EAEsB,EAFtBA,KACGC,EACmB,4CACP,IAAK6B,UAAbC,EADe,oBAYtB,OACE,kBAAC,EAAD,iBACM9B,EADN,CAEEkB,MACE,oCACE,oCAEE,yBAAKO,UAAU,qCAAf,qCAMN7B,SAAUA,EACVC,KAvBa,WACfiC,EAAKC,iBAAiBC,MAAK,SAAAC,GACrBpC,GACFA,EAAKoC,GAEPrC,UAmBA,uCACMsC,YAAqB,EAAG,IAD9B,CAEEC,WAAW,OACXL,KAAMA,EACNM,cAAerC,IACf,sBAAMsC,KAAN,CAAWC,MAAM,OAAOC,KAAK,QAC3B,kBAAC,IAAD,OAEF,sBAAMF,KAAN,CAAWC,MAAM,gBAAgBC,KAAK,gBACpC,kBAAC,KAAD,CAAYwE,YAAU,EAACC,OAAO,OAAOvF,UAAU,YAEjD,sBAAMY,KAAN,CAAWC,MAAM,UAAUC,KAAK,WAC9B,kBAAC,IAAD,SC9CV,SAAS0E,GAAT,GAKyB,IAJvBpH,EAIsB,EAJtBA,KACAD,EAGsB,EAHtBA,SACAG,EAEsB,EAFtBA,KACGC,EACmB,4CACP,IAAK6B,UAAbC,EADe,oBAYtB,OACE,kBAAC,EAAD,iBACM9B,EADN,CAEEkB,MACE,oCACE,oCAEE,yBAAKO,UAAU,qCAAf,qCAMN7B,SAAUA,EACVC,KAvBa,WACfiC,EAAKC,iBAAiBC,MAAK,SAAAC,GACrBpC,GACFA,EAAKoC,GAEPrC,UAmBA,uCACMsC,YAAqB,EAAG,IAD9B,CAEEC,WAAW,OACXL,KAAMA,EACNM,cAAerC,IACf,sBAAMsC,KAAN,CAAWC,MAAM,OAAOC,KAAK,QAC3B,kBAAC,IAAD,OAEF,sBAAMF,KAAN,CAAWC,MAAM,gBAAgBC,KAAK,gBACpC,kBAAC,KAAD,CAAYwE,YAAU,EAACG,OAAO,QAAQzF,UAAU,YAElD,sBAAMY,KAAN,CAAWC,MAAM,UAAUC,KAAK,WAC9B,kBAAC,IAAD,S,cC1EFgC,GAAYC,EAAQ,IAApBD,QCyBR,SAAS3C,GAAT,GAKyB,IAJvB/B,EAIsB,EAJtBA,KACAD,EAGsB,EAHtBA,SACAG,EAEsB,EAFtBA,KACGC,EACmB,4CACP,IAAK6B,UAAbC,EADe,oBAYtB,OACE,kBAAC,EAAD,iBACM9B,EADN,CAEEkB,MACE,oCACE,8CAEE,yBAAKO,UAAU,qCAAf,iCAMN7B,SAAUA,EACVC,KAvBa,WACfiC,EAAKC,iBAAiBC,MAAK,SAAAC,GACrBpC,GACFA,EAAKoC,GAEPrC,UAmBA,uCACMsC,YAAqB,EAAG,IAD9B,CAEEC,WAAW,OACXL,KAAMA,EACNM,cAAerC,IACf,sBAAMsC,KAAN,CAAWC,MAAM,OAAOC,KAAK,QAC3B,kBAAC,IAAD,OAEF,sBAAMF,KAAN,CAAWC,MAAM,UAAUC,KAAK,WAC9B,kBAAC,IAAD,SC5EV,SAAS4E,KACP,OAAO,8BAGT,IAAIC,GAAK,6RAWIC,GAAI,sDAEkBD,GAFlB,8CAGUA,GAHV,kDAIFA,GAJE,wBAImBA,GAJnB,oGAK+CA,GAL/C,iCAMAA,GANA,0ZAWUA,GAXV,0DAWiEA,GAXjE,oCAYKA,GAZL,qDAYuDA,GAZvD,2FAiBJE,GAAYH,GCXjB5C,GAAYC,EAAQ,IAApBD,QAUFgD,GAAsB,CAC1B,CACElD,GAAIM,cACJ6C,KAAM,wBACNC,cAAe,SACflF,KAAM,iBACNmF,QAAQ,EACRC,KAAMC,IACNN,UF9BW,SAA+BtH,GAA6B,IACjED,EAA6DC,EAA7DD,KAAMiG,EAAuDhG,EAAvDgG,iBAAkBC,EAAqCjG,EAArCiG,uBAAwBC,EAAalG,EAAbkG,SADgB,EAG1CC,YAA0B,CACtDpG,OACAmG,aAFME,EAHgE,EAGhEA,QAASC,EAHuD,EAGvDA,SAKjB,OACE,oCACGL,GACC,kBAAC,GAAD,CACEjG,KAAMqG,EACNxG,SAAUqG,EACVpG,KAAMwG,IAGV,kBAAC,EAAD,CACEhF,cAAY,EACZC,aAAa,EACbJ,MAAOkF,EAAQxB,KACfxD,OAAQ6E,OEWd,CACE5B,GAAIM,cACJ6C,KAAM,oBACNjF,KAAM,OACNmF,QAAQ,EACRC,KAAME,IACNP,UZlCW,SAAkCtH,GAA6B,IACpEgG,EAA6DhG,EAA7DgG,iBAAkBC,EAA2CjG,EAA3CiG,uBAAwBC,EAAmBlG,EAAnBkG,SAAUnG,EAASC,EAATD,KADe,EAG7CoG,YAA0B,CAAEpG,OAAMmG,aAAxDE,EAHmE,EAGnEA,QAASC,EAH0D,EAG1DA,SAEXyB,EAAa,CACjBpB,UAAU,EACVjF,UAAW,QACXkF,YAAaP,EAAQ2B,QACrBtD,aAAc2B,EAAQ3B,cAGxB,OACE,oCACGuB,GACC,kBAACpE,EAAD,CACE7B,KAAMqG,EACNxG,SAAUqG,EACVpG,KAAMwG,IAGV,kBAAC,EAAD,CAAiBnF,MAAOkF,EAAQxB,MAAQ,IACtC,sBAAMvC,KAAN,CAAWiD,SAAO,EAAC/C,KAAM,CAAC,OAAQxC,EAAKsE,KACpC+B,EAAQ4B,aACP,kBAAC,IAAD,iBAAcF,EAAd,CAA0BG,SAAU,CAAEC,QAAS,MAE/C,kBAAC,IAAUJ,QYUrB,CACEzD,GAAIM,cACJ6C,KAAM,sBACNjF,KAAM,SACNmF,QAAQ,EACRC,KAAMQ,IACNb,UVvCW,SAAoCtH,GAA6B,IACtEgG,EAA6DhG,EAA7DgG,iBAAkBC,EAA2CjG,EAA3CiG,uBAAwBlG,EAAmBC,EAAnBD,KAAMmG,EAAalG,EAAbkG,SADqB,EAG/CC,YAA0B,CAAEpG,OAAMmG,aAAxDE,EAHqE,EAGrEA,QAASC,EAH4D,EAG5DA,SAEjB,OACE,oCACGL,GACC,kBAACzC,EAAD,CACExD,KAAMqG,EACNxG,SAAUqG,EACVpG,KAAMwG,IAGV,kBAAC,EAAD,CAAiBnF,MAAOkF,EAAQxB,MAAQ,IACtC,sBAAMvC,KAAN,CAAWiD,SAAO,EAAC/C,KAAM,CAAC,OAAQxC,EAAKsE,KACrC,kBAAC,EAAD,CACE7D,MAAO,CAAEN,MAAO,cAChBuB,UAAU,8BACVgD,aAAc2B,EAAQ3B,aACtB9B,IAAKyD,EAAQzD,IACbyF,IAAKhC,EAAQgC,IACbC,UAAW,SAAC5E,GACV,OAAK2C,EAAQkC,MAGT7E,GAASA,EAAM8E,SAASnC,EAAQkC,OAC5B,GAAN,OAAUE,YAAoB/E,GAA9B,YAAwC2C,EAAQkC,OAE5C,GAAN,OAAU7E,EAAV,YAAmB2C,EAAQkC,OALlB7E,GAOXgF,OAAQ,SAAChF,GAAD,OACN2C,EAAQkC,MACJ7E,EAAMiF,QAAQ,IAAIC,OAAJ,YAAgBvC,EAAQkC,MAAxB,OAAoC,IAClD7E,GAENkD,YAAaP,EAAQ2B,eUK/B,CACE1D,GAAIM,cACJ6C,KAAM,iBACNjF,KAAM,iBACNmF,QAAQ,EACRC,KAAMiB,IACNtB,UH9CW,SAA+BtH,GAA6B,IACjED,EAA6DC,EAA7DD,KAAMiG,EAAuDhG,EAAvDgG,iBAAkBC,EAAqCjG,EAArCiG,uBAAwBC,EAAalG,EAAbkG,SADgB,EAG1CC,YAA0B,CACtDpG,OACAmG,WACAzB,kBAHM2B,EAHgE,EAGhEA,QAASC,EAHuD,EAGvDA,SAMjB,OACE,oCACGL,GACC,kBAACjB,GAAD,CACEhF,KAAMqG,EACNxG,SAAUqG,EACVpG,KAAMwG,EACNrB,iBAAiB,EACjB9D,MACE,oCACE,+CACA,yBAAKO,UAAU,8BAAf,+DAOR,kBAAC,EAAD,CAAiBP,MAAOkF,EAAQxB,MAAQ,IACtC,sBAAMvC,KAAN,CAAWiD,SAAO,EAAC/C,KAAM,CAAC,OAAQxC,EAAKsE,KACrC,kBAAC,KAAD,CACE0C,YAAU,EACVL,UAAU,EACVjF,UAAU,QACVkF,YAAaP,EAAQ2B,SACpBxD,GACCsE,aAAI,SAAC/C,GAAD,OACF,kBAAC,KAAOgD,OAAR,CAAexI,IAAKwF,EAAEzB,GAAIZ,MAAOqC,EAAElB,MAAQ,IACxCkB,EAAElB,MAAQ,OAGfe,YAAO,GAAI,CAAC,YANbpB,CAOC6B,SGOZ,CACE/B,GAAIM,cACJ6C,KAAM,4BACNjF,KAAM,0BACNmF,QAAQ,EACRC,KAAMoB,IACNzB,UAAW0B,IAEb,CACE3E,GAAIM,cACJ6C,KAAM,0BACNjF,KAAM,wBACNmF,QAAQ,EACRC,KAAMsB,IACN3B,UAAW4B,IAEb,CACE7E,GAAIM,cACJ6C,KAAM,eACNjF,KAAM,OACNmF,QAAQ,EACRC,KAAMwB,IACN7B,ULzEW,SAA6BtH,GAA6B,IAC/DgG,EAA6DhG,EAA7DgG,iBAAkBC,EAA2CjG,EAA3CiG,uBAAwBlG,EAAmBC,EAAnBD,KAAMmG,EAAalG,EAAbkG,SADc,EAGxCC,YAA0B,CAAEpG,OAAMmG,aAAxDE,EAH8D,EAG9DA,QAASC,EAHqD,EAGrDA,SAEjB,OACE,oCACGL,GACC,kBAACc,GAAD,CACE/G,KAAMqG,EACNxG,SAAUqG,EACVpG,KAAMwG,IAGV,kBAAC,EAAD,CAAiBnF,MAAOkF,EAAQxB,MAAQ,IACtC,sBAAMvC,KAAN,CAAWiD,SAAO,EAAC/C,KAAM,CAAC,OAAQxC,EAAKsE,KACrC,kBAAC,KAAD,CACEqC,UAAU,EACVjF,UAAU,QACVkF,YAAaP,EAAQ2B,QACrBtD,aAAc2B,EAAQ3B,oBKuDhC,CACEJ,GAAIM,cACJ6C,KAAM,eACNjF,KAAM,OACNmF,QAAQ,EACRC,KAAMyB,IACN9B,UJnFW,SAA4BtH,GAA6B,IAC9DgG,EAA6DhG,EAA7DgG,iBAAkBC,EAA2CjG,EAA3CiG,uBAAwBlG,EAAmBC,EAAnBD,KAAMmG,EAAalG,EAAbkG,SADa,EAGvCC,YAA0B,CAAEpG,OAAMmG,aAAxDE,EAH6D,EAG7DA,QAASC,EAHoD,EAGpDA,SAEjB,OACE,oCACGL,GACC,kBAACiB,GAAD,CACElH,KAAMqG,EACNxG,SAAUqG,EACVpG,KAAMwG,IAGV,kBAAC,EAAD,CAAiBnF,MAAOkF,EAAQxB,MAAQ,IACtC,sBAAMvC,KAAN,CAAWiD,SAAO,EAAC/C,KAAM,CAAC,OAAQxC,EAAKsE,KACrC,kBAAC,KAAD,CACEqC,UAAU,EACVjF,UAAU,QACVkF,YAAaP,EAAQ2B,QACrBtD,aAAc2B,EAAQ3B,oBIiEhC,CACEJ,GAAIM,cACJ6C,KAAM,gBACNjF,KAAM,QACNmF,QAAQ,EACRC,KAAMjG,IACN2F,KAAMgC,GACN/B,UAAW+B,KAIFC,GAAsB/E,GACjCgF,IACAV,aAAI,SAAC/C,GAAD,sBAAoCA,EAAE0B,KAAO1B,MAFhBvB,CAGjCgD,IAEWiC,GAAoBjF,GAC/BsE,aAAI,SAAC/C,GAAD,mBAAC,eACAA,GADD,IAEFM,QAAS7B,GACPgF,IACAV,aAAI,SAACvI,GAAD,sBACDA,EAAMiE,GACLsE,aAAI,SAACY,GAAD,mBAAC,eACAA,GADD,IAEFnC,UAAWoC,YAAK,CAACD,EAAEjC,KAAM,aAAdkC,CAA4BJ,SAEzC3D,YAAO,GAAI,CAAC,UAAWrF,IALlBiE,CAMLuB,OAEJ6D,IACAhE,YAAO,GAAI,CAAC,YAZLpB,CAaPuB,QAEJH,YAAO,GAAI,KAGAiE,GAAerF,GAC1BsE,aAAI,SAAC/C,GAAD,mBAAC,eACAA,GADD,IAEFM,QAAS7B,GACPsE,aAAI,SAACY,GAAD,mBAAC,eACAA,GADD,IAEFnC,UAAWoC,YAAK,CAACD,EAAEjC,KAAM,aAAdkC,CAA4BJ,SAEzC3D,YAAO,GAAI,CAAC,YALLpB,CAMPuB,QAEJH,YAAO,GAAI,KAGE4B,Q,ySCzIfsC,IAAMC,OAAOC,KACbF,IAAMC,OAAOE,KACbH,IAAMC,OAAOG,KACbJ,IAAMC,OAAOI,KACbL,IAAMC,OAAOK,KACbN,IAAMC,OAAOM,KACbP,IAAMC,OAAOO,KACbR,IAAMC,OAAOQ,KACbT,IAAMC,OAAOS,KACbV,IAAMC,OAAOU,KAEbX,IAAMY,OAAO,S,qICdN,SAASC,IAGd,IAAC,IAFD5K,EAEA,uDAF4B,KAE5B,mBADG6K,EACH,iCADGA,EACH,kBACA,IAAKA,EAAWC,OACd,OAAO9K,EAFT,IAKOwH,EAAsBqD,EAL7B,GAKqBE,EAAQF,EAL7B,SAOA,OAAI7H,iBAAqBwE,GAErB,gBAACA,EAAUE,KAASF,EAAUtH,MAC3B0K,EAAI,WAAJ,GAAK5K,GAAL,mBAAkB+K,MAKlB,gBAACvD,EAAD,KAAYoD,EAAI,WAAJ,GAAK5K,GAAL,mBAAkB+K,M,gGCKjCC,EAAuBjK,UAAOkK,IAAV,uFAAGlK,CAAH,yDAO1B,SAASmK,GAAT,GAImB,IAHjBC,EAGgB,EAHhBA,MACAC,EAEgB,EAFhBA,eACAC,EACgB,EADhBA,mBAEA,OACE,kBAACL,EAAD,CAAsBM,KAAK,SACzB,uBAAG3J,UAAU,WAAb,yBACA,yBAAKA,UAAU,WAAf,OAA0BwJ,QAA1B,IAA0BA,OAA1B,EAA0BA,EAAOI,SACjC,yBAAK5J,UAAU,WAAWyJ,GAC1B,kBAAC,IAAD,CAAQvK,QAASwK,GAAjB,cAKN,IAGMG,GAAe,CAAEL,MAAO,KAAMM,KAAM,MACrBC,G,4MAInBC,MAA4BH,G,EAE5BH,mBAAqB,WAAkB,IAAC,IAAD,uBAAdO,EAAc,yBAAdA,EAAc,gBACrC,eAAK1L,OAAM2L,eAAX,iCAAwBD,IACxB,EAAKE,SAASN,K,gEAGEL,EAAcM,GAAkB,IAAD,IAC/C,aAAAM,KAAK7L,OAAM8L,eAAX,gBAAqBb,EAArB,OAA4BM,QAA5B,IAA4BA,OAA5B,EAA4BA,EAAML,gBAClCW,KAAKD,SAAS,CAAEX,QAAOM,W,yCAGNQ,GAAgC,IAGmB,IAF5Dd,EAAUY,KAAKJ,MAAfR,MACAe,EAAcH,KAAK7L,MAAnBgM,UACM,OAAVf,GAvBa,eAACgB,EAAD,uDAAwB,GAAIC,EAA5B,uDAAmD,GAAnD,OACnBD,EAAErB,SAAWsB,EAAEtB,QAAUqB,EAAEE,MAAK,SAACpM,EAAMqM,GAAP,OAAkBC,OAAOC,GAAGvM,EAAMmM,EAAEE,OAsB5CG,CAAaR,EAAUC,UAAWA,KACtD,aAAAH,KAAK7L,OAAMwM,yBAAX,gBAA+BT,EAAUC,UAAWA,GACpDH,KAAKD,SAASN,O,+BAIR,IAAD,EACiBO,KAAKJ,MAArBR,EADD,EACCA,MAAOM,EADR,EACQA,KADR,EAMHM,KAAK7L,MAHPyM,EAHK,EAGLA,eAHK,IAILC,yBAJK,MAIe1B,GAJf,EAKL2B,EALK,EAKLA,SAGF,GAAc,OAAV1B,EAAgB,CAClB,IAAMjL,EAAQ,CACZkL,eAAc,OAAEK,QAAF,IAAEA,OAAF,EAAEA,EAAML,eACtBD,QACAE,mBAAoBU,KAAKV,oBAE3B,GAAIrI,IAAM8J,eAAeD,GACvB,OAAOA,EACF,GAA8B,oBAAnBF,EAChB,OAAOA,EAAezM,GACjB,GAAI0M,EACT,OAAO,kBAACA,EAAsB1M,GAE9B,MAAM,IAAI6M,MACR,8FAKN,OAAOhB,KAAK7L,MAAMF,a,GApDqBgD,IAAMwE,W,uBCjDlC,SAASwF,GAAT,GAA2C,IAAD,IAArBtF,YAAqB,MAAd,IAAc,EACvD,OACE,kBAACuF,GAAD,KACE,yBAAKtL,UAAU,aACb,yBAAKA,UAAU,uBACb,yBACEA,UAAU,oBACVjB,MAAO,CACLwM,gBAAgB,QAAD,OAAUC,KAASC,UAAnB,mBAAuC1F,EAAvC,cAIrB,yBAAK/F,UAAU,sBACb,mCACA,yBAAKA,UAAU,mBAAf,4EACA,yBAAKA,UAAU,sBACb,kBAAC,KAAD,CAAM0L,GAAG,KACP,kBAAC,IAAD,CAAQ5M,MAAM,WAAd,2BASd,IAAMwM,GAAmBlM,UAAOkK,IAAV,kFAAGlK,CAAH,qpB,8EC1BhBuM,GAAUvM,UAAOkK,IAAV,mEAAGlK,CAAH,yCAYEiC,WAAMuK,MAAK,YAIX,IAHb5L,EAGY,EAHZA,UACAjB,EAEY,EAFZA,MAEY,sCACZ,OACE,kBAAC4M,GAAD,CAAS3L,UAAU,aACjB,wBAAK6L,QAAQ,SAAS7L,UAAWA,GAC/B,wBAAKA,UAAU,mBACb,kBAAC8L,GAAA,EAAD,CAA0BC,MAAI,EAAChN,MAAOA,U,yJCMjCiN,GAlCU5M,kBAAO,MAAV,+EAAGA,CAAH,kT,qBCMhB6M,GAAc7M,kBAAO8M,MAAV,wFAAG9M,CAAH,yCAMF,SAAS+M,GAAT,GAIJ,IAHT/N,EAGQ,EAHRA,KACAD,EAEQ,EAFRA,SACGI,EACK,oCACR,OACE,kBAAC0N,GAAD,iBACM1N,EADN,CAEEC,SAAO,EACP4N,UAAQ,EACRC,UAAU,EACVxH,UAAW,CAAEyH,WAAY,IACzB7N,MAAO,IACPG,OAAQ,CACN,yBACEC,IAAI,sBACJmB,UAAU,yCACV,kBAAC,IAAD,CACEnB,IAAI,SACJC,MAAM,UACNC,MAAO,CAAEC,SAAU,IAAKC,YAAa,IACrCC,QAASd,GAJX,gBAOA,kBAAC,IAAD,CACES,IAAI,aACJC,MAAM,UACNC,MAAO,CAAEC,SAAU,KACnBE,QAASf,GAJX,oBASJ,yBAAK6B,UAAU,eACb,kBAACuM,GAAA,EAAD,CACEvM,UAAU,OACVjB,MAAO,CAAEyN,SAAU,GAAI1N,MAAO,aAEhC,yBAAKkB,UAAU,0CAAf,kE,iCCjCO,SAASyM,KAAa,IAAD,EAClBC,eAATC,EAD2B,oBAE5BC,EAAUC,eAERC,EAAWC,cAAXD,OAJ0B,EAMAzL,IAAM2L,SAASC,IAAQC,SAASC,UANhC,mBAM3BC,EAN2B,KAMlBC,EANkB,OAQqBC,eARrB,mBAQ3BC,EAR2B,KAQPC,EARO,KAU5BC,EAAW,SAACN,GAAD,OAAuB,WAClCA,IACFE,EAAeF,GACfF,IAAQS,KAAKP,MAIXQ,EAAmB,SAACC,GACxB,OAAO1N,KAAG,CAAE,cAA2B,MAAZkN,GAAmBQ,EAAU9G,SAASsG,MAGnE,OACE,oCACGG,GACC,kBAACpB,GAAD,CACE/N,KAAM0O,EACN3O,SAAUqP,IAGd,kBAACK,GAAD,KACE,yBAAK7N,UAAU,qCACb,yBAAKA,UAAU,qBACb,kBAAC8N,GAAD,CAAM5O,QAASuO,EAAS,MACtB,yBACEM,IAAG,UAAKvC,KAASC,UAAd,0BACHuC,IAAI,WACJhO,UAAU,oBAGd,wBACEiO,KAAK,aACLjO,UAAU,sBACVjB,MAAO,CAAEmP,aAAc,OAAQC,WAAY,SAC3C,kBAACC,GAAD,CACEvP,IAAKwP,KACLnP,QAASuO,EAASY,MAClBrO,UAAW2N,EAAiBU,OAC5B,yBAAKrO,UAAU,+BACb,kBAACsO,GAAA,EAAD,MADF,6BAKF,kBAACC,GAAD,CACE1P,IAAKwP,KACLrO,UAAW2N,EAAiBU,MAC5BG,YAAa,EAAE,GAAI,GACnBC,eAAe,UACfhP,MACE,yBAAKO,UAAU,+BACb,kBAACsO,GAAA,EAAD,MADF,2BAGE,kBAACI,GAAA,EAAD,CAAmB1O,UAAU,gBAGjC,uBAAMY,KAAN,CACE/B,IAAKwP,KACLnP,QAASuO,EAASY,MAClBrO,UAAW2N,EAAiBU,OAC5B,yBAAKrO,UAAU,6BACb,kBAACsO,GAAA,EAAD,MADF,6BAKF,uBAAM1N,KAAN,CACE/B,IAAKwP,KACLnP,QAASuO,EAASY,MAClBrO,UAAW2N,EACTU,OAEF,yBAAKrO,UAAU,6BACb,kBAACsO,GAAA,EAAD,MADF,6BAKF,uBAAM1N,KAAN,CACE/B,IAAKwP,KACLnP,QAASuO,EAASY,MAClBrO,UAAW2N,EAAiBU,OAC5B,yBAAKrO,UAAU,6BACb,kBAACsO,GAAA,EAAD,MADF,mCAKF,uBAAM1N,KAAN,CACE/B,IAAKwP,KACLnP,QAASuO,EAASY,MAClBrO,UAAW2N,EAAiBU,MAC5BtP,MAAO,CAAE4P,QAAS,SAClB,yBAAK3O,UAAU,6BACb,kBAACsO,GAAA,EAAD,MADF,sDAMJ,kBAACF,GAAD,CACEvP,IAAKwP,KACLnP,QAASuO,EAASY,MAClBrO,UAAW2N,EAAiBU,OAC5B,yBAAKrO,UAAU,+BACb,kBAACsO,GAAA,EAAD,MADF,6BAKF,kBAACC,GAAD,CACE1P,IAAKwP,KACLrO,UAAW2N,EAAiBU,MAC5BG,YAAa,EAAE,GAAI,GACnBC,eAAe,UACfhP,MACE,yBAAKO,UAAU,+BACb,kBAACsO,GAAA,EAAD,MADF,2BAGE,kBAACI,GAAA,EAAD,CAAmB1O,UAAU,gBAGjC,uBAAMY,KAAN,CACE/B,IAAKwP,KACLnP,QAASuO,EAASY,MAClBrO,UAAW2N,EAAiBU,OAC5B,yBAAKrO,UAAU,6BACb,kBAACsO,GAAA,EAAD,MADF,+CAKF,uBAAM1N,KAAN,CACE/B,IAAKwP,KACLnP,QAASuO,EAASY,MAClBrO,UAAW2N,EAAiBU,OAC5B,yBAAKrO,UAAU,6BACb,kBAACsO,GAAA,EAAD,MADF,8BAMJ,kBAACF,GAAD,CACEvP,IAAI,UACJK,QAASuO,EAAS,KAClBzN,UAAW2N,EAAiB,YAC5B,yBAAK3N,UAAU,+BACb,kBAACsO,GAAA,EAAD,MADF,uDAON,yBAAKtO,UAAU,qBACb,yBAAKA,UAAU,2BAAf,0BACA,wBAAQA,UAAU,+BAChB,yBAAKA,UAAU,YAAf,MAEF,kBAAC,IAAD,CACEkG,KACE,kBAAC0I,GAAA,EAAD,CACE5O,UAAU,sBACVjB,MAAO,CAAEE,YAAa,KAG1BC,QAASsO,EACTxN,UAAU,mEACVjB,MAAO,CAAEC,SAAU,GAAI6P,YAAa,YAI1C,yBAAK7O,UAAU,uCACb,kBAAC,GAAD,CACE8O,UAAU,IACV/P,MAAO,CAAEgQ,UAAW,GAAIJ,QAAS,OAAQK,WAAY,WACrD,kBAAC,GAAWpO,KAAZ,CAAiB1B,QAASuO,EAAS,MACjC,kBAACwB,GAAA,EAAD,CAAcjP,UAAU,WAAWjB,MAAO,CAAEmQ,KAAM,MAEnDvC,EAAMvF,KAAI,SAAC/C,EAAGT,GAAJ,OACT,kBAAC,GAAWhD,KAAZ,CACE/B,IAAG,qBAAgB+E,GACnB1E,QAASuO,EAASpJ,EAAE8K,OACnB9K,EAAEvD,UAIR8L,KAOX,IAAMiB,GAASzO,kBAAO,IAAOyO,QAAjB,qEAAGzO,CAAH,iJAIM,SAAAC,GAAC,iDAAwCA,EAAEC,MAAM6B,QAAhD,QACN,SAAA9B,GAAC,OAAIA,EAAEC,MAAM6B,WACC,SAAA9B,GAAC,OAAIA,EAAEC,MAAM8P,aAQlChB,GAAWhP,kBAAO,KAAKwB,MAAf,uEAAGxB,CAAH,0QAoBRmP,GAAUnP,kBAAO,KAAKmP,SAAf,sEAAGnP,CAAH,gOAkBP0O,GAAO1O,UAAOkK,IAAV,mEAAGlK,CAAH,MCzQKiC,OAAMgO,MAAK,kBAAM,mCCE1BC,GAAQjO,IAAMgO,MAAK,kBAAM,mCAEzBE,GAAiBlO,IAAMgO,MAAK,kBAAM,kCAEzB,SAASG,KACtB,OACE,kBAAC,IAAMC,SAAP,CAAgBvE,SAAU,kBAAC,GAAD,OACxB,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOwE,OAAK,EAACzH,KAAK,IAAI0H,UAAWL,KACjC,kBAAC,IAAD,CAAOrH,KAAK,SAAS0H,UAAWL,KAChC,kBAAC,IAAD,CAAOrH,KAAK,mBAAmB0H,UAAWJ,KAC1C,kBAAC,IAAD,CAAOI,UAAWL,OCiDXM,OApDf,WAAgB,IACNC,EAAoB9C,cAApB8C,gBAEFxB,EAASyB,eAETC,EAAkB1O,IAAM2O,aAAY,SAAC1R,GACzC,IAAM2J,EAAI,UAAM3J,EAAK2J,MAAX,OAAkB3J,EAAK2R,MAAL,WAAiB3R,EAAK2R,OAAU,IAE5D,OACE,kBAAC,IAAD,CACEP,OAAK,EACL7Q,IAAKP,EAAKsE,GACVqF,KAAMA,EACN0H,UACErR,EAAKqR,UAAYrR,EAAKqR,UAAY,kBAAM,gCAAMrR,EAAKmB,MAAX,UAI7C,IAEGyQ,EAAmB7O,IAAM2O,aAC7B,SAACG,GACC,OAAOA,EAAK/I,KAAI,SAAC9I,GACf,MAAO,CACLyR,EAAgBzR,GAChBA,EAAKD,UAAY6R,EAAY5R,EAAKD,UAClCC,EAAK8R,MAAQF,EAAY5R,EAAK8R,YAIpC,CAACL,IAGH,OACE,kBAAC,GAAD,MACIF,GAAmB,kBAAC,GAAD,MACpBA,GACC,2BACE,kBAACpD,GAAD,MACA,kBAAC,IAAMgD,SAAP,CAAgBvE,SAAU,kBAAC,GAAD,OACxB,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOwE,OAAK,EAACzH,KAAK,IAAI0H,UAAWU,KAChCH,EAAY7B,GACb,kBAAC,IAAD,CAAOsB,UAAWtE,U,UC3CZiF,QACW,cAA7BC,OAAOrD,SAASsD,UAEe,UAA7BD,OAAOrD,SAASsD,UAEhBD,OAAOrD,SAASsD,SAASC,MACvB,2D,QCGNC,cAEA,IAOMC,GXCC,WAA2C,IAAD,uBAAnBzH,EAAmB,yBAAnBA,EAAmB,gBAC/C,OAAO,YAAyD,IAAhC7K,EAA+B,EAA/BA,SAC9B,OAAO4K,EAAI,WAAJ,GAAK5K,GAAL,OAAkB6K,KWHT0H,CAClB,kBAAC,IAAD,CAAYC,gBARU,SAAC,GAA6B,EAA3BC,OASzB,kBAAC,gBAAD,CAAexR,MAAOA,OACtB,uBAAgB0J,OAAQ+H,MACxB,kBAAC,IAAD,MACA,kBAAC,IAAD,CACE/O,MAAO,CAAEgP,UAAU,EAAMC,QAASC,IAASC,mBAAmB,KAEhE,kBAACC,EAAA,EAAD,CAAaC,QAASC,MACtB,kBAAC,IAAD,CAAQrE,QAASA,OAQnBsE,IAAS9N,OACP,kBAACkN,GAAD,KACE,kBAAC,GAAD,OAEFa,SAASC,eAAe,SDwFpB,kBAAmBC,WACrBA,UAAUC,cAAcC,MACrBrR,MAAK,SAAAsR,GACJA,EAAaC,gBAEdC,OAAM,SAAAvI,GACLwI,QAAQxI,MAAMA,EAAMI,a,oZE/HpB9G,EAAYC,EAAQ,IAApBD,QAGKmP,EAA0B,CACrCC,uBAAwB,yBACxBC,MAAO,QACPC,WAAY,aACZC,MAAO,QACPC,WAAY,cAGRC,EAA2CxK,YAC/CyK,IAAMC,IAAI,4BAGNC,EAA0B5P,EAC9BgF,IACAV,aAAI,SAACvI,GAAD,sBAAqBA,EAAM,OAC/B2B,IAH8BsC,CAI9BmP,GAEIU,EAA0BC,YAAK,CACnC/T,IAAK,0BACLgU,QAASN,IAeLO,GAZ+BC,YAGnC,CACAlU,IAAK,sBACL4T,IAAK,SAAA7P,GAAE,OAAI,YAAc,IAAX6P,EAAU,EAAVA,IACZ,OAAO3P,EAAQkQ,aAAK,SAAC3O,GAAD,MAAuB,UAAGA,EAAEzB,MAAL,UAAiBA,MAArDE,CACLiF,YAAkB0K,EAAIE,SAKDC,YAAK,CAC9B/T,IAAK,qBACLgU,SAAS,KAGLI,EAAgBL,YAAa,CACjC/T,IAAK,gBACLgU,QAAS/P,EAAQoQ,IAAM1S,IAAdsC,CAAsBmP,KAI1B,SAASkB,IACd,OAAOC,YAAeT,GAIjB,SAASU,EAAT,GAMH,IALFzQ,EAKC,EALDA,GACAuN,EAIC,EAJDA,KAIC,EAC4BiD,YAAeT,GAArCW,EADN,sBAG2CjS,IAAM2L,SAAyB,CACzErI,QAAS+N,IAJV,mBAGMa,EAHN,KAGsBC,EAHtB,KAWDnS,IAAMoS,WAAU,YACd,OAAItD,QAAJ,IAAIA,OAAJ,EAAIA,EAAMvN,KACR4Q,EAAkB1Q,EAAQoQ,IAAMnL,IAAmB2L,IAAjC5Q,CAAqCqN,MAExD,CAACA,IAEJ9O,IAAMoS,WAAU,WACV7Q,GACF4Q,EACE1Q,EAAQkQ,aAAK,SAAC3O,GAAD,MAAuB,UAAGA,EAAEzB,MAAL,UAAiBA,MAArDE,CACEiF,YAAkBuL,OAIvB,CAAC1Q,IAEJ,IAAI+Q,EAAezP,YAAOwO,EAAyB,CAAC,WAAjCxO,CACjBqP,GAGFlS,IAAMoS,WAAU,WACdG,EAAeD,KACd,CAACE,KAAKC,UAAUH,KAjClB,MAmCqCtS,IAAM2L,SAAmB2G,GAnC9D,mBAmCMI,EAnCN,KAmCmBH,EAnCnB,KAqCGI,EAA+C,GAEnD,MAAO,CACLT,iBACAQ,cACAH,iBACAK,kBAAmBnR,EACjBgF,IACAV,aAAI,SAACvI,GAAD,sBAAqBA,EAAMsK,YAAO4K,EAAYlV,QAClDqJ,IAHiBpF,CAIjBiR,GACFG,cAAepR,EAAQqG,IAAQjB,IAAhBpF,CAAsBiR,GACrCI,MAAOrR,EACLqG,IACA/E,aAAO,SAACC,GAAD,MAAgC,0BAAXA,EAAE0B,QAC9BqO,IACA5T,IAJKsC,CAKLiR,GACFC,YAAalR,EACXsE,aAAI,SAAC/C,GAAD,OAAsB2P,EAAY3P,EAAEzB,IAAMyB,KAC9C+P,IACA5T,IAHWsC,CAIXiR,IAKC,SAASjU,IAAoB,IAAD,EACCsT,YAAeN,GADhB,mBAC1B/S,EAD0B,KACfsU,EADe,KAGjC,MAAO,CAACtU,EAAW,kBAAMsU,GAAa,SAAAC,GAAI,OAAKA,OAI1C,SAASC,IAAgD,IAAzBvK,EAAwB,0DAC3BoJ,YAAeN,GADY,mBACtD/S,EADsD,KAC3CsU,EAD2C,KAW7D,OARAhT,IAAMoS,WAAU,WAGd,OAFAY,EAAarK,GAEN,WACLqK,GAAa,MAEd,CAACrK,IAEG,CAACjK,EAAW,kBAAMsU,GAAa,SAAAC,GAAI,OAAKA,OAI1C,SAASE,IACd,OAAOpB,YAAeH,K,0JC/JlBwB,EAAgB,IAASrP,MAEzBsP,EAAiBtV,kBAAO,KAAV,+EAAGA,CAAH,ocAEI,SAAAC,GAAC,OAAIA,EAAEC,MAAM6B,WACjB,SAAA9B,GAAC,OAAIA,EAAEC,MAAM6B,WAMb,SAAA9B,GAAC,OAAIA,EAAEC,MAAM6B,WAUT,SAAA9B,GAAC,OAAIA,EAAEC,MAAMqV,aAW/BC,EAA8CvT,IAAMC,YAGxD,WAAeC,GAAf,IAAMhD,EAAN,2BAAuB,kBAACmW,EAAD,eAAgBpT,WAAYC,GAAShD,OAE9DqW,EAAkB/S,YAAc,WAIjB+S,O,iCC/Cf,2D,sECKMC,EAAiBzV,kBAAO,KAAV,+EAAGA,CAAH,yuBAFC,OASD,SAAAC,GAAC,OAAIA,EAAEC,MAAM6B,UATZ,qCA2CN0T,O,iCC9Cf,qBAGM5H,EAAU6H,YAAkB,CAAEC,SAAUvJ,IAASwJ,cAExC/H,O,wHCATgI,EAAoB7V,kBAAO,KAAV,2EAAGA,CAAH,gnCAUD,SAAAC,GAAC,OAAIA,EAAEC,MAAMqV,aASpB,SAAAtV,GAAC,OAAIA,EAAEC,MAAM6B,WAkEtB+T,E,uKAMF,OAAO,kBAACD,EAAiB7K,KAAK7L,MAAQ6L,KAAK7L,MAAMF,c,GANdgD,IAAMwE,WAAvCqP,EACU7N,OAAS,IAAOA,OAD1B6N,EAGUrT,YAAc,SAOfqT,O,iCCpGf,oKAQaC,EAAkBvC,YAAuB,CACpD/T,IAAK,kBACLgU,QAAS,KAGJ,SAASnG,IAEd,OADc0G,YAAe+B,GAIxB,SAASC,IAA6C,IAA/BzI,EAA8B,uDAAJ,GAChD0I,EAASC,YAAkBH,GAMjC,OAJA9T,IAAMoS,WAAU,WACd4B,EAAO1I,KACN,IAEI0I,EAGF,IAAME,EAAqB3C,YAAsB,CACtD/T,IAAK,qBACLgU,QAAS,OAOJ,SAAS2C,EAAiBC,GAC/B,IAAMJ,EAASC,YAAkBC,GAEjClU,IAAMoS,WAAU,WAGd,OAFA4B,EAAOI,GAEA,WACLJ,EAAO,SAER,CAACI,IAGC,SAAS5I,IAEd,OADc6I,YAAeH,K,0JC7CzBtJ,EAAc7M,kBAAO,KAAV,yEAAGA,CAAH,6KAcIuW,E,uKAOjB,OAAO,kBAAC1J,EAAgB7B,KAAK7L,MAAQ6L,KAAK7L,MAAMF,c,GAPRgD,IAAMwE,WAA7B8P,EACZC,QAAU,IAAMA,QADJD,EAEZnM,MAAQ,IAAMA,MAFFmM,EAGZE,QAAU,IAAMA,QAHJF,EAIZ7L,KAAO,IAAMA,M,0QCZX,CAAEgM,UAAW,GAAIC,aAAc,KAP7BC,EAAoB,SAC/BpJ,EACArO,GAF+B,oBAI/BqO,QACE,qBACE5M,UAAU,6BAET4M,GAGL1G,KAAM,KACNzH,MAAO,IACPwX,OAAQ,eACRC,WAAY,eACZ9J,UAAU,EAIV+J,gBAAiB,KACjBC,cAAe,CACbpW,UAAW,mBACXjB,MAAO,CAAEC,SAAU,GAAIC,YAAa,KAEtCoX,kBAAmB,CACjBrW,UAAW,qCACXjB,MAAO,CAAEC,SAAU,MAElBT,IAyBQqX,EAAU,SAAC,GAKD,IAJrBxX,EAIoB,EAJpBA,KACAD,EAGoB,EAHpBA,SAGoB,IAFpByO,eAEoB,MAFV,uFAEU,EADjBrO,EACiB,6CACpB,IAAMqX,QAAN,uCACKI,EAAkBpJ,IAClBrO,GAFL,IAGEH,KAAM,WACAA,GACFA,KAGJD,SARF,WASQA,GACFA,U,gWCzEFmY,EAAoB,SAACC,GAKzB,IAJA,IAAIC,GAAkB,EAClBC,GAAkB,EAClBC,GAAsB,EAEjBC,EAAI,EAAGA,EAAIJ,EAAOpN,OAAQwN,IAAK,CACtC,IAAMC,EAAYL,EAAOI,GAGvBH,GACA,WAAWK,KAAKD,IAChBA,EAAUE,gBAAkBF,GAE5BL,EAASA,EAAOQ,MAAM,EAAGJ,GAAK,IAAMJ,EAAOQ,MAAMJ,GACjDH,GAAkB,EAClBE,EAAsBD,EACtBA,GAAkB,EAClBE,KAEAF,GACAC,GACA,WAAWG,KAAKD,IAChBA,EAAUI,gBAAkBJ,GAE5BL,EAASA,EAAOQ,MAAM,EAAGJ,EAAI,GAAK,IAAMJ,EAAOQ,MAAMJ,EAAI,GACzDD,EAAsBD,EACtBA,GAAkB,EAClBD,GAAkB,IAElBA,EACEI,EAAUI,gBAAkBJ,GAC5BA,EAAUE,gBAAkBF,EAC9BF,EAAsBD,EACtBA,EACEG,EAAUE,gBAAkBF,GAC5BA,EAAUI,gBAAkBJ,GAIlC,OAAOL,GAqDMU,EAlDG,SAChBtR,GAEI,IADJ1C,EACG,uDADiC,GAEpC,GAAuB,kBAAV0C,IAAsBuR,MAAMC,QAAQxR,GAC/C,MAAM,IAAIyR,UAAU,gDAGtBnU,EAAU2H,OAAOyM,OACf,CACEC,YAAY,GAEdrU,GAGF,IAAMsU,EAAc,SAAClT,GAAD,OAClBpB,EAAQqU,WAAajT,EAAEmT,OAAO,GAAGV,cAAgBzS,EAAE0S,MAAM,GAAK1S,GAWhE,GAAqB,KARnBsB,EADEuR,MAAMC,QAAQxR,GACRA,EACLyB,KAAI,SAAA/C,GAAC,OAAIA,EAAEoT,UACXrT,QAAO,SAAAC,GAAC,OAAIA,EAAE8E,UACduO,KAAK,KAEA/R,EAAM8R,QAGNtO,OACR,MAAO,GAGT,GAAqB,IAAjBxD,EAAMwD,OACR,OAAOlG,EAAQqU,WAAa3R,EAAMmR,cAAgBnR,EAAMqR,cAG1D,IAAMW,EAAehS,IAAUA,EAAMqR,cAYrC,OAVIW,IACFhS,EAAQ2Q,EAAkB3Q,IASrB4R,EANP5R,EAAQA,EACLsB,QAAQ,YAAa,IACrB+P,cACA/P,QAAQ,mBAAmB,SAAC2Q,EAAGC,GAAJ,OAAWA,EAAGf,iBACzC7P,QAAQ,cAAc,SAAA6Q,GAAC,OAAIA,EAAEhB,mB,ECjER/T,EAAQ,IAA1BD,E,EAAAA,QAASiV,E,EAAAA,KAOV,SAAStS,EAAOuS,GAAmD,IAAtCC,EAAqC,uDAAJ,GAC7DC,EAAQ,cACRC,EAAO,eAAQF,GAEfG,EAAOJ,EAAI/Q,QAAQiR,GAAO,SAAAxU,GAG9B,KAF4B,MAATA,EAAE,IAGnB,OAAOA,EAGT,IAAM2U,EAAW3U,EAAEqT,MAAM,GAAI,GACvBuB,EAAgBH,EAAQE,GAI9B,OAFAF,EAAQE,QAAYpU,EAEbqU,KAGT,MAAO,CAAEC,QAASH,EAAMH,OAAQE,GAG3B,SAASK,IAIb,IAHDC,EAGA,uDADI,GAEJ,OAAKA,EAIE3V,EACL4U,YAAK,KACLtQ,aAAI,SAACvI,GAAD,OACFqY,MAAMC,QAAQsB,EAAa5Z,IAA3B,UAEOA,EAFP,YAEc4Z,EAAa5Z,GACpBuI,KAAI,SAACsR,GAAD,gBAA6BC,mBAAmBD,OACpDhB,KAAK,MAJZ,UAMO7Y,EANP,YAMc8Z,mBAAmBF,EAAa5Z,QAEhDuF,aACE,SAACvF,GAAD,MACwB,KAAtB4Z,EAAa5Z,IACS,OAAtB4Z,EAAa5Z,IACgB,qBAAtB4Z,EAAa5Z,MAExBqJ,IAjBKpF,CAkBL2V,GArBO,GAyHX,IAAMG,EAAgB,SAAC5Q,GACrB,OAAOlF,EACL+V,YAAOC,IAAOC,KAAU,eAACC,EAAD,uDAAK,GAAL,OAAYA,EAAElS,SAASkB,MAC/C7D,YAAQ,EAAG,MAAXA,CAAkB,gBAClB8D,YAAK,CAAC,cAIJgR,EAAyB,SAAzBA,EACJC,GAEI,IADJC,EACG,uDADiB,GAEpB,OAAKD,GAA4B,kBAAXA,EAIlBhC,MAAMC,QAAQ+B,GACTA,EAAO9R,KAAI,SAACgS,EAAGzO,GAAJ,OAChBsO,EAAkBG,EAAD,sBAAQD,GAAR,CAAiBE,OAAO1O,SAItCC,OAAO1C,KAAKgR,GAAQI,QAAO,SAACC,EAAU1a,GAC3C,IAAImD,EAAQkX,EAAOra,GAEb2a,EAAa,sBAAOL,GAAP,CAAgBta,IAGnC,OADA0a,EAAIE,EAAU5a,IAAQoa,EAAkBjX,EAAOwX,GACxCD,IACN,IAhBML,GAmBJ,SAAShI,EACd8G,GAaa,IAAD,yDADK,GAVf0B,EAWU,EAXVA,KACAC,EAUU,EAVVA,QAUU,KATVC,IASU,EARVC,SAQU,EAPVC,kBAOU,SALVC,GAKU,EANVC,eAMU,EALVD,aACA1P,EAIU,EAJVA,QAEGpH,GAEO,EAHVgX,SAGU,oHACN1B,EAAUR,EAAK,CACnB,CAACjR,YAAS,QAASoT,YAAOlC,IAC1B,CAACmC,IAAGD,YAAO1O,IAAS4O,WAAapC,KAFnBD,CAGbC,GAEH,OAAOqC,MAAM9B,EAAD,YAAC,eACRtV,GADO,IAEVyW,KAAMA,aAAgBY,SAAWZ,EAAO7F,KAAKC,UAAU4F,GACvDC,QAASY,YAAM,eAEPT,EACA,CACEU,cAAc,UAAD,OAAYhI,IAAMC,IAAI,gBAIrC,IAENkH,EAAO,eACEA,GACL,CAAE,eAAgB,mBAAoBc,OAAQ,wBAGnDla,KAlBI,uCAkBC,WAAOma,GAAP,eAAAlQ,EAAA,0DAgBAoO,EAAc,mBAAdA,CAAkC8B,GAhBlC,gCAiBaA,EAASC,OAjBtB,UAiBFC,EAjBE,OAmBGF,EAASG,GAnBZ,yCAoBOC,QAAQC,OAAOH,IApBtB,OAuBFA,EAAS3B,EAAkB2B,GAvBzB,WA0BAhC,EAAc,QAAdA,CAAuB8B,GA1BvB,kCA2BaA,EAASM,OA3BtB,QA2BFJ,EA3BE,mBA8BA9B,YAAM8B,GA9BN,kCA+BaF,EAASvX,OA/BtB,QA+BFyX,EA/BE,sBAkCAb,GACFA,EAAYa,GAnCV,kBAsCGA,GAtCH,4CAlBD,uDA0DJ7I,OAAM,SAACkJ,GASN,OAJI5Q,GACFA,EAAQ4Q,GAGHA,KAIE/J,O,wHCxSTgK,EAAc9b,kBAAO,KAAV,yEAAGA,CAAH,oSAEJ,SAAAC,GAAC,OAAIA,EAAEC,MAAMC,YAYN,SAAAF,GAAC,OAAIA,EAAEC,MAAM6B,WAMX,SAAA9B,GAAC,OAAIA,EAAEC,MAAM6B,WAS7Bga,E,uKAMF,OAAO,kBAACD,EAAgB9Q,KAAK7L,W,GANJ8C,IAAMwE,WAA7BsV,EACU/V,MAAQ,IAAMA,MADxB+V,EAGUtZ,YAAc,QAOfsZ,O,sMCtCPrY,EAAYC,EAAQ,IAApBD,QAMFsY,EAAe,SAACC,EAAkBrb,GACtC,OAAOqb,EAAMrI,MACX,SAAAsI,GAAC,OAAKxC,YAAMwC,EAAEtb,YAAc8G,YAAS9G,EAAT8G,CAAoBwU,EAAEtb,eAI/C,SAASub,EACdC,GAEC,IADDxb,EACA,uDAZwC,wCAapCyb,EAAOD,EAELH,EAAmB,GAGzB,IAFAA,EAAM3N,KAAK+N,GAEX,UAAOA,SAAP,aAAO,EAAMC,YAAY,CAAC,IAAD,EACvBL,EAAMM,QAAQF,EAAKC,YACnBD,EAAOA,EAAKC,WAGd,OACEN,EAAaC,EAAO,uDACpBD,EAAaC,EAAO,2BAKpBD,EAAaC,EAAOrb,KACpBob,EAAaC,EA9Bc,iBAgDxB,SAASO,EAAoBC,GAClC,IAGMC,EAdR,SAASC,EACPP,GAEqB,IADrBxb,EACoB,uDAzCS,eA0C7B,OAAIwb,EAAQQ,UAAUC,SAASjc,GACtBwb,EAEFA,EAAQU,eAAiBH,EAAYP,EAAQU,cAAelc,GAO/C+b,CAHCvK,SAAS2K,iBAAiBN,EAAaxX,EAAGwX,EAAaO,IAKtEC,EAAeP,GAAeA,EAAYQ,QAAQ3R,MAKxD,MAAO,CACLmR,cACAS,iBANuBT,EAAcU,OAAOV,EAAYQ,QAAQ3R,QAAU,EAO1E8R,eALqB3D,YAAMuD,I,4GAwBZ,CAAEK,QAAS,KAfvB,SAASC,IAAoD,IAArCpe,EAAoC,uDAAJ,GAC7D,OAAO,SAACwV,GAAD,OACLjR,EACEiC,aAAW,SAACzG,EAAoBsF,GAArB,OACT,kBAAC,IAAD,iBACMrF,EADN,CAEEM,IAAKP,EAAKsE,GACVga,UAAS,UAAKte,EAAKsE,IACnBtE,KAAMA,EACNue,WAAW,EACXC,QAASxe,EAAKwe,UACbxe,EAAK2H,OACJ,qBACErD,GAAE,UAAKtE,EAAKsE,IACZ5C,UAAS,UAAK1B,EAAKsE,IAEnBma,wBAAyB,CAAEC,OAAQ1e,EAAKsH,QAG1C,kBAACtH,EAAKuH,UAAN,CACEjD,GAAItE,EAAKsE,GACT5C,UAAW1B,EAAKsE,GAChBtE,KAAMA,EACNqM,MAAO/G,QAKfM,YAAO,GAAI,IA1BbpB,CA2BEiR,M,iCCzGS,KACbkJ,KAAM,OACNC,MAAO,QACPC,QAAS,Y,qLCELC,EAAaC,cAAH,0NASY,SAAAhe,GAAC,OAAIA,EAAEC,MAAM6B,WAInCmc,EAAcle,kBAAO,IAAWke,aAArB,8EAAGle,CAAH,8HAMK,SAAAC,GAAC,OAAIA,EAAEC,MAAMqV,aAIL,SAAAtV,GAAC,OAAIA,EAAEC,MAAM6B,WAKrCoc,EAAwBne,kBAAO,KAAV,mFAAGA,CAAH,iHAML,SAAAC,GAAC,OAAIA,EAAEC,MAAMqV,aAIpB,SAAAtV,GAAC,OAAIA,EAAEC,MAAM6B,UAGtBic,GAIAI,EAAmBpe,kBAAO,KAAV,mFAAGA,CAAH,iHAMA,SAAAC,GAAC,OAAIA,EAAEC,MAAMqV,aAIpB,SAAAtV,GAAC,OAAIA,EAAEC,MAAM6B,UAGtBic,GAcSK,IAVf,SAA6Blf,GAC3B,OAAO,kBAACgf,EAAqBhf,K,yGClEnBmf,E,mEAAAA,K,YAAAA,E,WAAAA,M,KAcG,IAJf,kCAIe,ICDFC,EAActc,IAAMuc,cAA+B,CAC9D/N,iBAAiB,EACjBgO,KAAM,GACN/Q,OAAQ,iBAAO,IACfgR,QAAS,SAAClG,GAAD,MAA2C,IACpDmG,mBAAoB,SAACnG,GAAD,MAAuC,MAGvDoG,EAAQC,IAAQC,QAAQ,cAGvB,SAASC,EAAa5f,GAAa,IAAD,EACO8C,IAAM2L,UAElD,GAHqC,mBAChC6C,EADgC,KACfkO,EADe,OAMf1c,IAAM2L,SAAN,2BACnBgR,GADmB,IAEtBpb,GAAI,EACJwb,SAAUV,EAAUW,QATiB,mBAMhCR,EANgC,KAM1BC,EAN0B,KAYjChR,EAASzL,IAAM2O,aAAY,WAA2B,IAAD,yDAAP,GAAhB+J,EAAuB,EAAvBA,YAClCkE,IAAQK,OAAO,eACfL,IAAQK,OAAO,cAEfP,GAAmB,GAEfhE,GACFA,MAED,IAEG/X,EAAQX,IAAMkd,SAClB,iBAAO,CACL1O,kBACAkO,qBACAD,UACAhR,SACA+Q,UAEF,CAAChO,EAAiB/C,EAAQ+Q,EAAMC,EAASC,IAG3C,OAAO,kBAACJ,EAAYa,SAAb,eAAsBxc,MAAOA,GAAWzD,IAG1C,SAASwO,IACd,IAAM0R,EAAUpd,IAAMqd,WAAWf,GACjC,QAAgB1Z,IAAZwa,EACF,MAAM,IAAIrT,MAAJ,8CAER,OAAOqT,EAGM1R,O,+FC9DA,SAASO,IAA2C,IAAD,yDAAJ,GAAzBqR,EAA6B,EAA7BA,cAA6B,EAClCtd,IAAM2L,UAAS,GADmB,mBACzDxO,EADyD,KAChDogB,EADgD,KAG1DC,EAAqB,SAACC,GAC1BF,GAAW,SAAAtK,GAAI,OAAKA,KAEhBqK,GACFA,KAIEI,EAAc,WAClBH,GAAW,IAGb,MAAO,CAACpgB,EAASqgB,EAAeE,K,mUCpBrBC,EAAkBpM,YAAK,CAClC/T,IAAK,kBACLgU,QAAS9K,YAAkByK,IAAMC,IAAI,oBAAsB,MAItD,SAASwM,IACd,OAAO7L,YAAe4L,G,YCChBlc,EAAYC,EAAQ,IAApBD,QAEKoc,EAAa,WAAO,IAAD,EACN7d,IAAM2L,SAAqB,CACjDJ,QAAS,GACTuH,MAAO,EACPgL,WAAY,IAJgB,mBACvBhP,EADuB,KACjBiP,EADiB,OAOMH,IAPN,mBAOvBI,EAPuB,KAOXC,EAPW,KAiB9B,MAAO,CACLnP,OACAoP,QAVc,SAAC/e,GACf4e,EAAQ,CACNxS,QAASyS,EACTlL,MAAOhL,YAAOkW,GACdF,WAAYK,KAAKC,MAAMtW,YAAOkW,GAAc,IAAM,KAOpDK,SAAS,EACTL,aACAC,kBAIG,SAASK,EAAc/c,GAAa,IAAD,EACnBqc,IAAdI,EADiC,sBAGhBhe,IAAM2L,WAHU,mBAGjCmD,EAHiC,KAG3BiP,EAH2B,KA+BxC,OA1BA/d,IAAMoS,WAAU,WACd,IAAMmM,EAAQP,EAAWrM,MAAK,SAAC3O,GAAD,OAAYA,EAAEzB,KAAOA,KAC7Cid,EAAY3b,YAAO,GAAI,CAAC,QAAS0b,GAEvCR,EAAQ,2BACHQ,GADE,IAELjb,QAAS7B,EACPgF,IACAV,aAAI,SAACvI,GAAD,sBACDA,EAAMiE,EACLsE,aAAI,SAAC/C,GAAD,mBAAC,eACAA,GADD,IAEFM,QAAQ,2BACHN,EAAEM,SADA,IAEL3C,MAAOkC,iBAAOD,EAAW,CAACI,EAAEzB,IAAKid,UAGrC3b,YAAO,GAAI,CAAC,UAAWrF,IARlBiE,CASL8c,OAEJ1X,IACAhE,YAAO,GAAI,CAAC,YAfLpB,CAgBP8c,QAEH,CAAChd,IAEGuN,EAGF,IAAM2P,EAAkB,WAA4C,IAAD,yDAAP,GAAjC/F,EAAwC,EAAxCA,YAAwC,EACpCkF,IADoC,mBACjEI,EADiE,KACrDC,EADqD,KAElES,EAAU,SAACvf,GACf,IAAIoC,EAAKM,cACL8c,EAAO,sBACNX,GADM,4BAGJ7e,GAHI,IAIPoC,KACAqd,UAAWC,MACXC,aAAcD,MAASza,OAAO,oBAC9B2a,UAAWF,MACXG,aAAcH,MAASza,OAAO,wBAIlC6Z,EAAcU,GACdM,IAAMxP,IAAI,kBAAmBkP,GAEzBjG,GACFA,EAAY,2BAAKvZ,GAAN,IAAcoC,SAG7B,MAAO,EAAC,EAAOmd,IAGJQ,EAAkB,WAA4C,IAAD,yDAAP,GAAjCxG,EAAwC,EAAxCA,YAAwC,EACpCkF,IADoC,mBACjEI,EADiE,KACrDC,EADqD,KAGlES,EAAU,SAACvf,GACf,IAAImK,EAAQ0U,EAAWmB,WAAU,SAACnc,GAAD,MAAY,UAAGA,EAAEzB,MAAL,UAAiBpC,EAAOoC,OACjEod,EAAUS,YACZ9V,EADkB,YAAC,eAGdnK,GAHa,IAIhB4f,UAAWF,MACXG,aAAcH,MAASza,OAAO,sBAEhC4Z,GAEFC,EAAcU,GACdM,IAAMxP,IAAI,kBAAmBkP,GAEzBjG,GACFA,KAGJ,MAAO,EAAC,EAAOgG,K,yICtHX3C,EAAaC,cAAH,iMASY,SAAAhe,GAAC,OAAIA,EAAEC,MAAM6B,WAInCuf,EAActhB,kBAAO,KAAV,yEAAGA,CAAH,mHAOK,SAAAC,GAAC,OAAIA,EAAEC,MAAMqV,YAG7ByI,GA0BAuD,EAAWvhB,kBAAO,IAAMuhB,UAAhB,sEAAGvhB,CAAH,8FAOQ,SAAAC,GAAC,OAAIA,EAAEC,MAAMqV,YAG7ByI,GAMSsD,O,+KC9DTE,EAAmBxhB,kBAAO,KAAV,qEAAGA,CAAH,+6BAIA,SAAAC,GAAC,OAAIA,EAAEC,MAAMiD,cAEpB,SAAAlD,GAAC,OAAIA,EAAEC,MAAMiD,cAIN,SAAAlD,GAAC,OAAIA,EAAEC,MAAMiD,cAIpB,SAAAlD,GAAC,OAAIA,EAAEC,MAAMiD,cAMN,SAAAlD,GAAC,OAAIA,EAAEC,MAAMiD,cACf,SAAAlD,GAAC,OAAIA,EAAEC,MAAMiD,cAaX,SAAAlD,GAAC,OAAIA,EAAEC,MAAMiD,cACf,SAAAlD,GAAC,OAAIA,EAAEC,MAAMiD,cAKlB,SAAAlD,GAAC,OAAIA,EAAEC,MAAMiD,cAoBV,SAAAlD,GAAC,OAAIA,EAAEC,MAAM6B,WAe/B,SAAS0f,EAAT,GAQc,IAAD,IAPXhe,gBAOW,aANXW,eAMW,MAND,GAMC,EALXd,EAKW,EALXA,cAKW,IAJXoe,sBAIW,MAJM,kBAAM,GAIZ,EAHXne,EAGW,EAHXA,iBAGW,IAFXoe,iBAEW,MAFC,GAED,EADRxiB,EACQ,sGACLyiB,EAAW3f,IAAMkd,SAAQ,WAC7B,IAAI0C,GAAmB,EACvB,IAAKpe,EACH,OAAOW,EAES,KAAdud,IACFE,EAAUF,GASZ,MAAM,CACJ,CACEthB,MACE,uBAASyhB,UAAU,UAAUzhB,MAAM,gBACjC,kBAAC,IAAD,CACEO,UAAU,gBACVjB,MAAO,CAAEmQ,KAAM,GACfhQ,QAAS+hB,EAAUve,OAAgBuB,KAIzCxF,MAAO,GACPgF,OAAQ,SAACmU,EAAQ5T,EAASJ,GAAlB,OACN,yBAAK5D,UAAU,eAAf,IAA+B4D,EAAM,MAb3C,mBAgBKJ,GAhBL,CAiBE,CACE/E,MAAO,GACPgF,OAAQ,SAACmU,EAAQjU,EAAQC,GAAjB,OACN,uBAASsd,UAAU,UAAUzhB,MAAM,gBACjC,kBAAC,IAAD,CACEP,QAAS4hB,EAAend,IA5BT9E,EA4B8B8E,EAAEf,GA5Bb,WACtCD,GACFA,EAAiB9D,UA0B0CoF,KA5BvC,IAACpF,QAkCxB,CAAC2E,EAASX,IAEb,OACE,kBAAC+d,EAAD,eACEpd,QAASwd,EACThY,OAAQ,CACNmY,UACE,uBACEC,MAAO,IAAMC,uBACbC,YACE,8BACE,0BAAMthB,UAAU,WAAhB,qHAQNzB,GACHA,EAAMF,UAKbwiB,EAAehf,YAAc,QAC7Bgf,EAAeU,OAAS,IAAMA,OAEfV,O,iCCjKA,SAASW,EAAe3b,GACrC,OACEA,EAAUhE,aACVgE,EAAU/E,OACY,kBAAd+E,GAA0BA,EAAUsD,OAAS,EACjDtD,EACA,WANR,mC,mOCoBM4b,EAAiBriB,UAAOkK,IAAV,sFAAGlK,CAAH,sPAgBPsiB,GACJ,EADIA,EAEJ,EAGM,SAASC,EAAT,GAOJ,IANTC,EAMQ,EANRA,SACAjiB,EAKQ,EALRA,OACAD,EAIQ,EAJRA,SACAmiB,EAGQ,EAHRA,QAGQ,IAFRhf,gBAEQ,aADRrE,eACQ,SACFsjB,EAAc,SAACC,GAAD,OAAmB,WACrCF,EAAQE,KAGV,OACE,kBAACN,EAAD,CACEzhB,UAAWE,IAAG,eAAgB,CAC5B,WAAyB,IAAb0hB,EACZI,QAASxjB,KAEX,uBAASiB,MAAM,4BACb,kBAACwiB,EAAA,EAAD,CACEjiB,UAAU,sBACVd,QAAS4iB,EAAYJ,MAGzB,uBAASjiB,MAAM,4BACb,kBAACyiB,EAAA,EAAD,CACEliB,UAAU,sBACVd,QAAS4iB,EAAYJ,MAGxB7e,GACC,uBAASpD,MAAM,gBACb,kBAAC0iB,EAAA,EAAD,CAAcniB,UAAU,sBAAsBd,QAASS,KAG3D,uBAASF,MAAM,gBACb,kBAAC2iB,EAAA,EAAD,CAAgBpiB,UAAU,iBAAiBd,QAASQ,M,yECpExD2iB,EAAgB,CAClBC,cAAe,qDACfrc,QAAQ,EACRsc,SAAS,EACTC,iBAAkB,CAChBC,SAAS,GAAD,OAAKjX,IAASC,UAAd,0CACRiX,UAAU,GAAD,OAAKlX,IAASC,UAAd,4CAEXkX,iBAAkB,+CAClBC,mBAAmB,EACnBC,kBAAkB,EAClBC,kBAAmB,MACnBC,QAAS,wDACTC,QAAQ,GAAD,OAAKxX,IAASC,UAAd,oCACPwX,YAAY,EACZC,cACE,+KACFC,eAAgB,IAChBC,wBAAyB,GACzBC,0BAA0B,EAC1BC,eAAe,EACfC,cAAc,EACdC,eAAgB,OAChBC,eACE,qEACFC,SACE,kM,ICxBI5gB,EAAYC,EAAQ,IAApBD,QA4BF6gB,EAAiBC,qBACrBC,IAAU3G,MACV,CACE4G,UADF,SACYvlB,GACR,OAAO,2BACFA,GADL,IAEEwlB,UAAU,EACVC,cAAgBzlB,EAAcwd,YAAYxd,EAAMqE,IAAI+H,SAGxDsZ,QARF,SAQU1lB,GACN,SAAUA,EAAMse,WAActe,EAAMwlB,aAGxC,SAACG,EAASC,GAAV,MAAuB,CACrBC,kBAAmBF,EAAQG,aAC3BC,mBAAoBJ,EAAQK,cAC5BC,WAAYL,EAAQK,iBAIlBC,E,kDACJ,WAAYlmB,GAAe,IAAD,8BACxB,cAAMA,IAQRmmB,kBAAoB,WAAO,IACjBJ,EAAuB,EAAK/lB,MAA5B+lB,mBACJA,GACFA,EAAmBK,gBAZG,EAgB1B7C,YAAc,SAACC,GAAmB,IAAD,EACF,EAAKxjB,MAA1BqE,EADuB,EACvBA,GAAIgiB,EADmB,EACnBA,aAERA,GAAgBhiB,GAClBgiB,EAAahiB,EAAImf,IApBK,EAwB1B8C,aAAe,WACbjP,YAAQ,CACNhJ,QAAS,uFACTnN,MAAO,0DACPrB,KAAM,WACF,EAAKG,MAAcumB,cAAc,EAAKvmB,MAAMoM,QAEhDxM,SANM,gBAzBgB,EAmC1BqG,uBAAyB,WACvB,EAAK2F,UAAS,SAAAmK,GAAI,MAAK,CAAE/P,kBAAmB+P,EAAK/P,sBApCzB,EAuC1BwgB,aAAe,WACb,EAAK5a,SAAS,CAAEyX,SAAU,KAxCF,EA2C1BoD,YAAc,WACZ,EAAK7a,SAAS,CAAEyX,UAAW,KAzC3B,EAAK5X,MAAQ,CACX4X,UAAW,EACXrd,kBAAkB,GALI,E,qDA+ChB,IAAD,SAaH6F,KAXF7L,MAFK,IAGH6lB,yBAHG,MAGiB,SAAC3O,GAAD,OAAeA,GAHhC,MAIH6O,0BAJG,MAIkB,SAAC7O,GAAD,OAAeA,GAJjC,EAKHmH,EALG,EAKHA,UACAjS,EANG,EAMHA,MACAkS,EAPG,EAOHA,UAPG,IAQH9d,aARG,MAQK,GARL,MASHiB,iBATG,MASS,OATT,EAUH1B,EAVG,EAUHA,KAVG,EAaH8L,KADFJ,MAAS4X,EAZJ,EAYIA,SAAUrd,EAZd,EAYcA,iBAGf0gB,EAASC,YAuCnB,SAAuB3mB,GAAqD,IAClEimB,EAAiDjmB,EAAjDimB,WAAY5C,EAAqCrjB,EAArCqjB,SAAU/E,EAA2Bte,EAA3Bse,UAD2C,EAChBte,EAAhBue,eADgC,MACtB,EADsB,EAGnEqI,EAAuB,IAAbvD,EAEhB,OAAO,uCACDuD,EAAU,CAAEC,aAAc,GAAM,IAChCvI,EACA,CAAEwI,OAAO,cAAD,OAAgBxI,EAAY,UAAY,gBAChD,CACEyI,aAAcH,EAAU7lB,IAAM8P,UAAY,gBALlD,IAOEmW,OAAQ,UACRC,SAAU,WACV7W,QAAS6V,EAAa,OAAS,QAC/BiB,WAAsB,GAAV3I,IArDV4I,CAAc,2BAAKtb,KAAK7L,OAAU6L,KAAKJ,QACvCjL,GAGF,OAAOqlB,EACLE,EACE,yBACE1hB,GAAIga,EACJ7d,MAAOkmB,EACPjlB,UAAWE,IACT,cACA,CAAE,eAAgB2c,GAClB7c,GAEF4hB,SAAUA,EACV+D,YAAavb,KAAK2a,aAClBa,WAAYxb,KAAK4a,YACjBa,aAAYlb,GACZ,kBAACgX,EAAD,CACEnjB,QAASqe,EACT+E,SAAUA,EACV/e,UAAWvE,EAAK2H,OAChBtG,OAAQyK,KAAK5F,uBACb9E,SAAU0K,KAAKya,aACfhD,QAASzX,KAAK0X,cAEfzgB,IAAMykB,SAAS1e,IAAIgD,KAAK7L,MAAMF,UAAU,SAAA0nB,GAAK,OAC5C1kB,IAAM2kB,aAAaD,EAAc,CAC/BxhB,mBACAC,uBAAwB,EAAKA,mC,GA7FrBnD,IAAMwE,WAyHb/C,MAAQ6gB,GD/IR,SAAqBsC,GAAoB,IAChDC,EAD+C,4MAQnDlc,MAAQ,CACNkF,IAAK,EACL0S,UAAW,EACXuE,OAAQ,KACRC,kBAAkB,EAClBC,gBAAgB,GAbiC,EAqCnDC,WAAa,SAAAC,GACP,EAAKC,KAAKD,EAAQ3jB,KACpB,EAAK0b,OAAOiI,EAAQ3jB,IAGtB,IAAM6jB,EAAUC,YAAMH,EAAQI,QAAUtE,GAExCW,QAAQ4D,KAAR,2BACKH,GADL,IAEEI,SAAS,IAAD,OAAMN,EAAQ3jB,IACtBkkB,aAAa,GAAD,OAAKtb,IAASC,UAAd,8BACZmB,QAAS2Z,EAAQ3gB,KACjBmhB,MAAO,SAAAZ,GACLA,EAAOa,GAAG,QAAQ,SAAAC,GAAC,OAAI,EAAKC,aAAaD,MACzCd,EAAOa,GAAG,SAAS,SAAAC,GAAC,OAAI,EAAKE,cAAcF,MAEvCpc,YAAGuc,SAAUX,EAAQY,WACvBZ,EAAQY,SAASlB,GAGfI,EAAQ3gB,MACVugB,EAAOa,GAAG,QAAQ,kBAAMb,EAAOmB,WAAWf,EAAQ3gB,UAGtD2hB,uBAAwB,SAAApB,GAClBA,GACF,EAAKhc,SAAS,CAAEgc,WAElBA,EAAOqB,YAAYC,WAjE0B,EAsEnDP,aAAe,SAAAD,GAAM,IAAD,EACc,EAAK1oB,MAA7BmpB,EADU,EACVA,cAAeppB,EADL,EACKA,KACnBopB,GACFA,EAAc,2BAAKppB,GAAN,IAAYsH,KAAMqhB,EAAEU,OAAOC,iBAzEO,EA8EnDT,cAAgB,aA9EmC,EAoFnDjoB,QAAU,WAGR,IAF2B,EAAK8K,MAAxBqc,eAEa,CACnB,IACMnX,EADYsC,SAASC,eAAe,EAAKlT,MAAMqE,IAC/BilB,UAAY,GAElC,EAAK1d,SAAS,CAAEkc,gBAAgB,EAAMzE,SAAU,EAAG1S,UA3FJ,EA+FnD4Y,OAAS,WAAO,IAAD,EACgC,EAAK9d,MAA1Cqc,EADK,EACLA,eAAgBD,EADX,EACWA,iBACpBC,IAAmBD,GACrB,EAAKjc,SAAS,CAAEkc,gBAAgB,EAAOzE,UAAW,KAlGH,EAsGnD4E,KAAO,SAAA5jB,GACL,OAAOogB,QAAQvQ,IAAI7P,IAvG8B,EA0GnD0b,OAAS,SAAA1b,GACPogB,QAAQ1E,OAAO,EAAKkI,KAAK5jB,GAAM,EAAKrE,MAAMqE,MA3GO,kEAiB7CwH,KAAK7L,MAAM0H,QACbmE,KAAKkc,WAAWlc,KAAK7L,MAAMD,QAlBoB,yCAsBhCgM,EAAWyd,GAAY,IAAD,IAUmB,IATrD3d,KAAK7L,MAAMimB,YAAcla,EAAUka,YACtCpa,KAAKD,SAAS,CAAEkc,gBAAgB,IAE7Bjc,KAAK7L,MAAM0H,UAGX+hB,YAAO5d,KAAK7L,MAAMqE,GAAI0H,EAAU1H,KACnCwH,KAAKkc,WAAWlc,KAAK7L,MAAMD,MAExB0pB,YAAM,UAAC5d,KAAK7L,MAAMD,YAAZ,aAAC,EAAiBsH,KAAlB,UAAwB0E,EAAUhM,YAAlC,aAAwB,EAAgBsH,OACjDwE,KAAKJ,MAAMmc,OAAOmB,WAAlB,UAA6Bld,KAAK7L,MAAMD,YAAxC,aAA6B,EAAiBsH,SAjCC,+BA+GjD,OAAO,kBAACqgB,EAAD,iBAAuB7b,KAAKJ,MAAWI,KAAK7L,YA/GF,GAC3B8C,IAAMwE,WAkHhC,OAlHMqgB,EACGrkB,YAF4C,sBAEf2f,YAAeyE,GAFA,KAC/CC,EAGG+B,aAAe,CACpBhiB,QAAQ,GA8GLiiB,IAAMhC,EAAaD,KC4BbnjB,CAAqC2hB,I,oMClL9C0D,EAAK,kBAEI/oB,oBAAO,KAAtB,0DAAeA,CAAf,8hCAQsB+oB,EACFA,GAUJ,SAAA9oB,GAAC,OAAIA,EAAEC,MAAM6B,WAoBd,SAAA9B,GAAC,OAAIA,EAAEC,MAAMC,YAGX,SAAAF,GAAC,OAAIA,EAAEC,MAAMC,YAIb,SAAAF,GAAC,OAAIA,EAAEC,MAAM6B,WASf,SAAA9B,GAAC,OAAIA,EAAEC,MAAMqV,aCrDtByT,E,uKACM,IAAD,EAUHhe,KAAK7L,MARP6lB,EAFK,EAELA,kBACAiE,EAHK,EAGLA,kBACA7D,EAJK,EAILA,WACA8D,EALK,EAKLA,OAEAC,GAPK,EAMLC,YANK,EAOLD,cACA3lB,EARK,EAQLA,GACGrE,EATE,iHAYP,OAAO6lB,EACLiE,EACEhnB,IAAM2kB,aAAaznB,EAAMF,SAAU,CACjC2B,UAAWE,IAAG3B,EAAMF,SAASE,MAAMyB,UAAW,CAC5C,eAAgBwkB,EAChB,WAAY8D,GAAU1lB,KAAE,OAAK2lB,QAAL,IAAKA,OAAL,EAAKA,EAAc3lB,c,GAlBjCvB,IAAMwE,WA0BtB4iB,EAAiBC,qBACrB,WACA,CACEC,KADF,SACOpqB,EAAO4lB,GACV,IAAMyE,EAAUzE,EAAQ0E,UAAUle,MAC5Bme,EAAWvqB,EAAMoM,MAEnBie,IAAYE,IAIhBvqB,EAAMiqB,YAAYI,EAASE,GAC3B3E,EAAQ0E,UAAUle,MAAQme,MAG9B,SAAC5E,EAASC,GAAV,MAAuB,CACrBkE,kBAAmBnE,EAAQ6E,aAC3BT,OAAQnE,EAAQmE,SAChBC,aAAcpE,EAAQ0E,cAIpBlF,EAAiBC,qBACrB,WACA,CACEE,UADF,SACYvlB,GACR,MAAO,CACLqE,GAAIrE,EAAMqE,GACV+H,MAAOpM,EAAMoM,UAInB,SAACuZ,EAASC,GAAV,MAAuB,CACrBC,kBAAmBF,EAAQG,aAC3BG,WAAYL,EAAQK,iBAIlBwE,EAAclmB,YAAQ2lB,EAAgB9E,EAAxB7gB,CAAwCslB,GAEvCa,E,4MAKnBT,YAAc,SAACI,EAASE,GAAc,IAAD,EACM,EAAKvqB,MAAtCF,EAD2B,EAC3BA,SAAU6qB,EADiB,EACjBA,MAAOV,EADU,EACVA,YACnBW,EAAWD,EAAMnS,QAEvB1V,IAAMykB,SAASsD,QAAQ/qB,GAAU,SAAA2a,IACE,IAA7BmQ,EAASE,QAAQrQ,EAAEna,MACrBsqB,EAASzb,KAAKsL,EAAEna,QAIpB,IAAMyqB,EAAYH,EAASE,QAAQT,GAC7BW,EAAaJ,EAASE,QAAQP,GAEpCK,EAASK,OAAOF,EAAW,GAC3BH,EAASK,OAAOD,EAAY,EAAGX,GAE/BJ,EAAYW,I,EAGdM,aAAe,SAAClrB,EAAOmrB,GAAR,OACb,kBAACA,EAAkBnrB,GAChB,SAAAkX,GAAI,OACH,kBAACuT,EAAD,CACEnqB,IAAK4W,EAAK5W,IACV+D,GAAI6S,EAAK5W,IACT8L,MAAO8K,EAAK5W,IACZ2pB,YAAa,EAAKA,aACjB/S,O,uDAMC,IAAD,EACqCrL,KAAK7L,MAA5BF,GADd,EACCmqB,YADD,EACcnqB,UAAaE,EAD3B,0CAGP,OACE,kBAAC,EAAD,eAAMkrB,aAAcrf,KAAKqf,cAAkBlrB,GACxCF,O,GA3CkCgD,IAAMwE,WAA5BojB,EACZhB,aAAe,CACpBiB,MAAO,IA+CXD,EAAcU,QAAUC,EAAKD,S,kYC9GzB5mB,EAAQ,IATVqmB,E,EAAAA,QACAS,E,EAAAA,SACAziB,E,EAAAA,IACA0iB,E,EAAAA,QACAC,E,EAAAA,OACAjnB,E,EAAAA,QACAknB,E,EAAAA,IACOC,E,EAAPnR,MACA7Q,E,EAAAA,KAGK,SAASiiB,EAAYC,GACrBA,IACHA,EAAS5Z,OAAOrD,SAASid,QAG3B,IAAMlS,EAAS,IAAImS,gBAAgBD,GAE/BvP,EAAuB,GAI3B,OAFA3C,EAAOmR,SAAQ,SAACpnB,EAAenD,GAAhB,OAAiC+b,EAAO/b,GAAOmD,KAEvD4Y,EAGF,SAAS1X,IACd,IAAImnB,EAAIC,KAAKC,MAOb,MALyB,qBAAhBC,aACoB,oBAApBA,YAAYD,MAEnBF,GAAKG,YAAYD,OAEZ,uCAAuCtjB,QAAQ,SAAS,SAAA+R,GAC7D,IAAMrV,GAAK0mB,EAAoB,GAAhB7K,KAAKiL,UAAiB,GAAK,EAE1C,OADAJ,EAAI7K,KAAKC,MAAM4K,EAAI,KACL,MAANrR,EAAYrV,EAAS,EAAJA,EAAW,GAAK+mB,SAAS,OAUxBb,EAAST,GAAhC,IACMrkB,EAAkB8kB,EAASziB,GAE3B0R,EAAQiR,EAAOD,EAASG,GAExBU,EAAU,SAACC,GAAD,OACrB9nB,EAAQknB,EAAKlR,EAAO7Q,EAAK2iB,KAkCpB,SAAS7jB,EAAoB8jB,GAClC,OAAKA,EAGEA,EAAI5jB,QAAQ,UAAW,IAFrB4jB,EAKJ,IAAMna,EAAW,WACjBlF,IAASsf,UAAyC,MAA7Bva,OAAOrD,SAASC,WACxCoD,OAAOrD,SAASiC,KAAO3D,IAASuf,SAK7B,SAASC,EAAT,GAMH,IALFrQ,EAKC,EALDA,KACAsQ,EAIC,EAJDA,SAKMC,EACJ,gCACAvS,mBAAmB9E,KAAKC,UAAU6G,EAAM,KAAM,IAC1CwQ,EAAqB3Z,SAAS4Z,cAAc,KAOlD,OANAD,EAAmBE,aAAa,OAAQH,GACxCC,EAAmBE,aAAa,WAAYJ,EAAW,SACvDzZ,SAASkI,KAAK4R,YAAYH,GAC1BA,EAAmBI,QACnBJ,EAAmB7M,SAEZ3D,EAsBF,SAAe6Q,EAAtB,kC,4CAAO,WAAiCC,GAAjC,SAAAjhB,EAAA,+EACE,IAAIsQ,SAAQ,SAAC4Q,EAAS3Q,GAC3B,IAAM4Q,EAAa,IAAIC,WACvBD,EAAWE,iBAAiB,QAAQ,kBAAMH,EAAQC,EAAW/Q,WAC7D+Q,EAAWG,QAAU/Q,EACrB4Q,EAAWI,WAAWN,OALnB,4C,yDC9IP,qCAQMO,EAA6C,CACjDC,kBAAkB,GAoBL,IAAoB,qBAAbza,SAjBtB,SACE/R,GAEC,IADDwD,EACA,uDAD2B+oB,EAErBE,EAAe7qB,IAAM8qB,OAAO3a,SAAS/R,OAC3C+R,SAAS/R,MAAQwH,YAAQ,KAAMxH,EAAdwH,CAAqBuE,IAAS4gB,UAC/C/qB,IAAMoS,WAAU,WACd,OAAIxQ,GAAWA,EAAQgpB,iBACd,WACLza,SAAS/R,MAAQysB,EAAa9e,cAGhC,IAED,KAKD,SAACif,M,8PCPU,CACHC,WAAY,qBACZC,oBAAqB,GACrBC,qBAAsB,KAb3B,SAASC,EAAT,GAAoE,IAApDpuB,EAAmD,EAAnDA,SAAUU,EAAyC,EAAzCA,MAAyC,IAAlCiB,iBAAkC,MAAtB,QAAsB,EACxE,OACE,2BACE,sBAAQ0sB,QAAR,CACE3tB,MAAO,CACLutB,WAAW,kCAAD,OAAoChtB,IAAM6B,QAA1C,OAEZ,qBACEnB,UAAWE,IAAG,kBAAmBF,GACjCjB,MAAOA,GAMNV,IAGL,kBAAC,IAAD,S,iHCZS,SAASsuB,EAAT,GAUD,IATZnpB,EASW,EATXA,QACAxD,EAQW,EARXA,UAQW,IAPX4sB,eAOW,MAPD,EAOC,EANXnqB,EAMW,EANXA,WACAR,EAKW,EALXA,SAKW,IAJXyd,eAIW,SAHXmN,EAGW,EAHXA,aACAtqB,EAEW,EAFXA,WACGhE,EACQ,+GAOLuuB,EAAmBvS,YAAgBhY,EAAY,CACnD6K,QAASwf,EACTG,SAAU,GACV5Y,MAAO1R,EAAW0R,MAClB6Y,iBAAiB,IAGnB,OACE,kBAAC,IAAD,eACE1qB,OAAO,KACPG,WAAYA,EAAWmK,QACvBpJ,QAASA,EACTjB,WAAYuqB,EACZ7qB,SAnBsB,SAAC,GAAkD,IAAhDmL,EAA+C,EAA/CA,QAAS2f,EAAsC,EAAtCA,SAChC9qB,GACFA,EAAS,CAAEmL,UAAS2f,cAkBpBF,aAAcA,EACdnN,QAASA,EACT1f,UAAWA,GACPzB,M,sOC7CV,SAAS0uB,KAET,SAASC,EAAWhsB,EAAKyF,EAAK+R,GAC5B,OAAO8G,KAAKC,MAAMD,KAAKte,IAAIyF,EAAK6Y,KAAK7Y,IAAIzF,EAAKwX,KAkCzC,SAASyU,EAAuBC,GACrC,OAAO,WAAiDC,GAAQ,IAAtBjR,EAAqB,EAArBA,EAAGkR,EAAkB,EAAlBA,EAAGjpB,EAAe,EAAfA,EAAGkpB,EAAY,EAAZA,EAC3CC,EAAShO,KAAKte,IAAIosB,EAAI,EAAGF,GAI/B,GAHgBC,EAAMjR,GAAKA,GAAKiR,EAAMjR,GAAKA,EAAIkR,GACtBD,EAAMhpB,GAAKA,GAAKgpB,EAAMhpB,GAAKA,EAAIkpB,EAE7C,CACT,GAAIF,EAAMjR,EAAIA,EAAIoR,EAChB,OAAQH,EAAMjR,EAAIA,EAAIoR,GAAUA,EAC3B,GAAIH,EAAMjR,EAAIA,EAAIkR,EAAIE,EAC3B,QAASpR,EAAIkR,EAAID,EAAMjR,EAAIoR,GAAUA,EAIzC,OAAO,GAIJ,IApCkCJ,EAoC5BK,GApC4BL,EAFlB,IAGd,WAAmDC,GAAQ,IAAtBhpB,EAAqB,EAArBA,EAAGkpB,EAAkB,EAAlBA,EAAGnR,EAAe,EAAfA,EAAGkR,EAAY,EAAZA,EAC7CE,EAAShO,KAAKte,IAAIqsB,EAAI,EAAGH,GAI/B,GAHgBC,EAAMhpB,GAAKA,GAAKgpB,EAAMhpB,GAAKA,EAAIkpB,GACtBF,EAAMjR,GAAKA,GAAKiR,EAAMjR,GAAKA,EAAIkR,EAE7C,CACT,GAAID,EAAMhpB,EAAIA,EAAImpB,EAChB,OAAQH,EAAMhpB,EAAIA,EAAImpB,GAAUA,EAC3B,GAAIH,EAAMhpB,EAAIA,EAAIkpB,EAAIC,EAC3B,QAASnpB,EAAIkpB,EAAIF,EAAMhpB,EAAImpB,GAAUA,EAIzC,OAAO,IA0BEE,EAA0BP,EA1ChB,KChBvB,IAiDMQ,EDWS,SAAkCC,GAAmB,IAC5DC,EAD2D,kDAqB/D,WAAYtvB,EAAOuvB,GAAM,IAAD,8BACtB,cAAMvvB,EAAOuvB,IA2CfC,YAAc,SAAAjP,GACR,EAAKkP,WAAa,EAAKC,WACzB,EAAKC,SACL,EAAKC,gBAAgBrP,KA/CD,EA+ExBqP,gBAAkBC,KAChB,SAAAtP,GAAQ,IAAD,EAMD,EAAKuP,UAAUC,wBACbC,EAAM,CAAElqB,EAPT,EAEHmqB,KAKepS,EAPZ,EAGHlN,IAIkBqe,EAPf,EAIH9uB,MAGqB6uB,EAPlB,EAKHmB,QAGIC,EApKd,SAAmB5P,GACjB,MAAiB,cAAbA,EAAI/Y,KACC,CACL1B,EAAGya,EAAI6P,eAAe,GAAGC,QACzBxS,EAAG0C,EAAI6P,eAAe,GAAGE,SAItB,CAAExqB,EAAGya,EAAI8P,QAASxS,EAAG0C,EAAI+P,SA4JXC,CAAUhQ,GAGzB,EAAKiQ,OAAS,EAAKxwB,MAAMywB,mBAAmBT,EAAKG,GACjD,EAAKO,OAAS,EAAK1wB,MAAM2wB,iBAAiBX,EAAKG,GAG1C,EAAKS,QAAU,EAAKJ,SAAU,EAAKE,QACtC,EAAKG,mBAGT,IACA,CAAEC,UAAU,IAjGZ,EAAKN,OAAS,EACd,EAAKE,OAAS,EACd,EAAKE,MAAQ,KAEb,EAAKlB,UAAW,EAChB,EAAKD,UAAW,EARM,EArBuC,gEAiCzD5jB,KAAK7L,MAAM+wB,WACbllB,KAAKmlB,aAlCsD,iCAsCnD,IAAD,OAETnlB,KAAKikB,UAAYmB,sBAAYplB,KAAKqlB,iBAClCrlB,KAAKikB,UAAUxC,iBAAiB,WAAYzhB,KAAK2jB,aAGjDxd,OAAOiB,SAASkI,KAAKmS,iBAAiB,YAAazhB,KAAK2jB,aAExD3jB,KAAKslB,yBAA2BtlB,KAAKqU,QAAQkR,gBAC1CC,aACAC,wBAAuB,kBAAM,EAAKC,2BAhDwB,6CAoDzD1lB,KAAK7L,MAAM+wB,WACbllB,KAAK2lB,YArDsD,gCA2D7D3lB,KAAKikB,UAAU2B,oBAAoB,WAAY5lB,KAAK2jB,aACpDxd,OAAOiB,SAASkI,KAAKsW,oBAAoB,YAAa5lB,KAAK2jB,aAC3D3jB,KAAKslB,2BACLtlB,KAAK6lB,kBA9DwD,4CAyE7D,IAAMzL,EAAapa,KAAKqU,QAAQkR,gBAAgBC,aAAapL,cAExDpa,KAAK4jB,UAAYxJ,EACpBpa,KAAK4jB,UAAW,EACP5jB,KAAK4jB,WAAaxJ,IAC3Bpa,KAAK4jB,UAAW,EAChB5jB,KAAK6lB,mBA/EsD,+BAoF7D7lB,KAAK6jB,UAAW,EAChB1d,OAAOiB,SAASkI,KAAKmS,iBAAiB,WAAYzhB,KAAK+jB,iBACvD5d,OAAOiB,SAASkI,KAAKmS,iBAAiB,YAAazhB,KAAK+jB,mBAtFK,+BA0F7D/jB,KAAK6jB,UAAW,EAChB1d,OAAOiB,SAASkI,KAAKsW,oBAAoB,WAAY5lB,KAAK+jB,iBAC1D5d,OAAOiB,SAASkI,KAAKsW,oBACnB,YACA5lB,KAAK+jB,mBA9FsD,uCA4H7C,IAAD,OACXxX,EAAI,GACK,SAAPuZ,IAAc,IACVnB,EAA8B,EAA9BA,OAAQE,EAAsB,EAAtBA,OAAQZ,EAAc,EAAdA,UADP,EAE8B,EAAK9vB,MAA5C4xB,EAFS,EAETA,mBAAoBC,EAFX,EAEWA,eAG5B,GAA2B,IAAvBD,GAA4BpB,EAASE,IAAW,EAApD,CASA,GAAItY,IAAM,EAAG,CAAC,IAEV0Z,EAMEhC,EANFgC,WACAC,EAKEjC,EALFiC,UACAC,EAIElC,EAJFkC,YACAC,EAGEnC,EAHFmC,aACAC,EAEEpC,EAFFoC,YACAC,EACErC,EADFqC,aAmBFN,EAhBgBrB,EACXV,EAAUgC,WAAanD,EACtB,EACAqD,EAAcE,EACdJ,EAAatB,EAASoB,GAExBE,EAEWpB,EACVZ,EAAUiC,UAAYpD,EACrB,EACAsD,EAAeE,EACfJ,EAAYrB,EAASkB,GAEvBG,GAIN,EAAKnB,MAAQwB,IAAIT,QApCf,EAAKD,gBAuCTC,KA3K6D,sCA+K7D9lB,KAAKwmB,SACLxmB,KAAK2kB,OAAS,EACd3kB,KAAK6kB,OAAS,EAEV7kB,KAAK+kB,QACPwB,IAAIE,OAAOzmB,KAAK+kB,OAChB/kB,KAAK+kB,MAAQ,QArL8C,+BAyLrD,IAAD,SAQH/kB,KAAK7L,MADJA,GAPE,EAGL4xB,mBAHK,EAILjB,iBAJK,EAKLF,mBALK,EAMLoB,eANK,gGAUP,OACE,kBAACxC,EAAD,eACErsB,IAAK,SAAAA,GACH,EAAKkuB,gBAAkBluB,IAErBhD,QAxMqD,GAChC8C,IAAMwE,WA6MvC,OA7MMgoB,EACGhsB,YAFwD,oBAE7B2f,YAAeoM,GAFc,KAC3DC,EAUG5F,aAAe,CACpBqH,WAAW,EACXc,eAAgBnD,EAChBiC,iBAAkBxB,EAClBsB,mBAAoBvB,EACpB0C,mBAAoB,IAflBtC,EAkBGiD,YAAcC,IA2LhB7I,IAAM2F,EAAoBD,GCzNPoD,CAjDC5xB,UAAOkK,IAAV,yGAAGlK,CAAH,wlBAmDpB6xB,EAAY9D,EAAuB,KAEpB+D,E,uKAKT,IAAD,EAC0B9mB,KAAK7L,MAA9ByB,EADD,EACCA,UAAWsvB,EADZ,EACYA,UAEnB,OACE,kBAAC3B,EAAD,CACE2B,UAAWA,EACXJ,iBAAkB+B,EAClBd,mBAAoB,IACpBnwB,UAAWE,IAAG,0BAA2BF,IACxCoK,KAAK7L,MAAMF,c,GAd0BgD,IAAMwE,WAA/BqrB,EACZjJ,aAAe,CACpBqH,WAAW,I,iCCjEf,wDAGe,SAAS6B,EAAqBhkB,GAc3C,OAbsB,WACpByI,YAAQ,CACNnW,MAAO,6CACPmN,QAAS,2HACTqJ,OAAQ,eACR7X,KAAM,WACA+O,GACFF,IAAQS,KAAKP,S,4SCLR/N,YAAOkK,IAAIrI,MAAM,CAC9BjB,UAAW,sBADb,4EAAeZ,CAAf,yJAOyC,SAAAC,GAAC,OAAIA,EAAEgmB,QAAU,Y,SCkBlDviB,EAAYC,EAAQ,IAApBD,QAgBF2lB,EAAiBC,qBACrB7E,IAAU3G,MACV,CACEyL,KADF,SACO/Q,EAAGuM,EAASxU,GACf,GAAKA,GAAcA,EAAUpR,MAAMse,UAAnC,CAIA,IAAMuU,EAAUjN,EAAQiN,UAClB7U,EAAqB5M,EAAU3F,MAA/BuS,iBACAje,EAAO6lB,EAAQ0E,UAEjBuI,GAAW9yB,EAAKylB,UAClBpU,EAAU0hB,kBAAV,2BAAiC/yB,GAAjC,IAAuCie,sBAGrC6U,IAAY9yB,EAAKylB,UACnBpU,EAAU2hB,kBAAkBhzB,EAAKsE,GAAI2Z,KAGzC6U,QAlBF,WAkB2BjN,GAGvB,GAA2B,IAHK,EAAxBpQ,YAGQ5K,QAAgBgb,EAAQmE,SACtC,OAAO,EAGT,IAAMzM,EAAesI,EAAQoN,kBACvB/V,EAAUhK,SAAS2K,iBAAiBN,EAAaxX,EAAGwX,EAAaO,GAEvE,OAAOb,YAAeC,IAExBgW,MA9BF,SA8BQ5Z,EAAGuM,EAASxU,GAEhB,IAAMkM,EAAesI,EAAQoN,kBAFF,EAQvB3V,YAAoBC,GAHtBU,EALyB,EAKzBA,iBACAE,EANyB,EAMzBA,cACAX,EAPyB,EAOzBA,YAIF,GAAKW,EAAL,CAIA,IAAMgV,EAAqB3V,EAA4BwS,wBACjDoD,GACHD,EAAkBE,OAASF,EAAkBviB,KAAO,EAClC2M,EAAaO,EAAIqV,EAAkBviB,IAErCwiB,IACjBnV,GAAoB,GAIpB4H,EAAQiN,YACPpJ,YAAOrY,EAAU3F,MAAMuS,iBAAkBA,IAE1C5M,EAAUxF,SAAS,CAAEoS,yBAI3B,SAAC2H,EAASC,GAAV,MAAuB,CACrBkE,kBAAmBnE,EAAQ6E,aAC3BT,OAAQnE,EAAQmE,SAChB8I,QAASjN,EAAQiN,UACjBQ,QAASzN,EAAQyN,UACjBrJ,aAAcpE,EAAQ0E,c,6GA8JL,CAAEnM,QAAS,GAAIvO,WAAY,IA1J1C0jB,E,4MAMG7nB,MAAe,CACpBuS,iBAAkB,M,EAGpB+U,kBAAoB,SAAC1uB,EAAekvB,GAAqB,IAC/C/d,EAAgB,EAAKxV,MAArBwV,YAD8C,EAE3B,EAAKge,kBAAkBnvB,GAA1C2jB,EAF8C,EAE9CA,QAAS5b,EAFqC,EAErCA,MAEXqV,EAAU,GACZgS,GAAW,EAEfje,EAAYqV,SAAQ,SAACphB,EAAGpE,GAClBA,IAAQ+G,KAIPqnB,GAAYF,EAAUluB,IACzBoc,EAAQtS,KAAK6Y,GACbyL,GAAW,GAGbhS,EAAQtS,KAAK1F,GAERgqB,GAAYF,IAAYluB,IAC3Boc,EAAQtS,KAAK6Y,GACbyL,GAAW,OAKa,IAAxB7oB,YAAO4K,IAAuB+d,GAChC9R,EAAQtS,KAAK6Y,GAGf,EAAKhoB,MAAM0zB,gBAAgBjS,GAC3B,EAAK7V,SAAS,CAAEoS,iBAAkB,Q,EAIpC8U,kBAAoB,SAACa,GAAmE,IAC9E3V,EAA8B2V,EAA9B3V,iBAAqBje,EADwD,YAC/C4zB,EAD+C,sBAG/Ene,EAAW,YAAO,EAAKxV,MAAMwV,aAE7Boe,EAAY5V,EAAmB,EACjCyD,EAAiB,GAEfuG,EAA8B,2BAC/BjoB,GAD+B,IAElCylB,UAAU,EACVnhB,GAAG,GAAD,OAAKtE,EAAKsE,GAAV,aAAiBM,iBAGO,IAAxBiG,YAAO4K,KACTiM,EAAUoS,YAAO,EAAG7L,EAAV6L,CAAmBre,IAE3B5K,YAAO4K,GAAe,IACxBiM,EAAUoS,YAAOD,EAAW5L,EAAlB6L,CAA2Bre,IAGvC,EAAKxV,MAAM0zB,gBAAgBjS,GAC3B,EAAK7V,SAAS,CAAEoS,iBAAkB,Q,EAGpC8V,oBAAsB,SAAC1nB,GACrB,EAAKpM,MAAM0zB,gBAAgB3T,YAAO3T,EAAO,EAAd2T,CAAiB,EAAK/f,MAAMwV,e,EAGzDue,mBAAqB,SAAC1vB,EAAemf,GAAmB,IAC9CwE,EAAY,EAAKwL,kBAAkBnvB,GAAnC2jB,QAER,EAAKgM,oBAAL,2BACKhM,GADL,IAEEzJ,QAASha,EACPiV,YAAK,CACH,CAACya,YAAGxuB,IAAI,GAAIkW,YAAO,IACnB,CAACuY,YAAGzuB,IAAI,GAAIkW,YAAO,IACnB,CAACC,IAAGpB,OAEN0O,YAAI1F,GACJ7d,YAAO,EAAG,CAAC,YAPJpB,CAQPyjB,O,EAINgM,oBAAsB,SAACpiB,GAAe,IAAD,EACR,EAAK4hB,kBAAkB5hB,EAAKvN,IAA/C2jB,EAD2B,EAC3BA,QAAS5b,EADkB,EAClBA,MAEjB,EAAKpM,MAAM0zB,gBACTxR,YAAO9V,EAAD,YAAC,eAAY4b,GAAYpW,GAA/BsQ,CAAuC,EAAKliB,MAAMwV,e,EAItDge,kBAAoB,SAACnvB,GAAmB,IAC9BmR,EAAgB,EAAKxV,MAArBwV,YACFwS,EAAUxS,EAAY3P,QAAO,SAAAC,GAAC,OAAIA,EAAEzB,KAAOA,KAAI,GAErD,MAAO,CACL2jB,UACA5b,MAAOoJ,EAAYsV,QAAQ9C,K,uDAIrB,IAAD,SAQHnc,KAAK7L,MANP8pB,EAFK,EAELA,kBACAC,EAHK,EAGLA,OACA8I,EAJK,EAILA,QACArd,EALK,EAKLA,YACAwU,EANK,EAMLA,aACA1L,EAPK,EAOLA,UAGMN,EAAqBnS,KAAKJ,MAA1BuS,iBAEJmW,GAAc,EACZC,EAAW,GAqEjB,OAnEA5e,EAAYqV,SAAQ,SAAC9qB,EAAMsF,GACrB0kB,GAAU8I,IACZsB,GAAc,EACF,IAAR9uB,IAAmC,IAAtB2Y,EACfoW,EAASjlB,KAAK,kBAAC,EAAD,CAAkB7O,IAAG,4BAAuB+E,MAChD2Y,EAA2B3Y,IACrC8uB,GAAc,SAILzuB,IAAT3F,GACFq0B,EAASjlB,KACP,kBAAC,IAAD,CACE7O,IAAKP,EAAKsE,GACVA,GAAItE,EAAKsE,GACT+H,MAAO/G,EACPiZ,UAAWA,EACXve,KAAMA,EACN2H,OAAQ3H,EAAK2H,OAEb2W,UAAS,0BAAqBhZ,GAC9BkZ,QAASxe,EAAKwe,QACdf,YAAa,EAAKgW,kBAClBrK,cAAe,EAAK6K,oBACpB3N,aAAc,EAAK0N,mBACnBxN,cAAe,EAAKuN,qBACnB/zB,EAAK2H,OACJ,qBACErD,GAAE,UAAKtE,EAAKsE,IACZ5C,UAAS,UAAK1B,EAAKsE,MAIrB,kBAACtE,EAAKuH,UAAN,CACEjD,GAAItE,EAAKsE,GACT5C,UAAW1B,EAAKsE,GAChBtE,KAAMA,EACNqM,MAAO/G,EACPa,SAAU,EAAK8tB,wBAOrBjK,GAAU8I,GAAW7U,IAAqB3Y,GAC5C+uB,EAASjlB,KAAK,kBAAC,EAAD,CAAkB7O,IAAG,4BAAuB+E,SAK1D8uB,GACFC,EAASjlB,KAAK,kBAAC,EAAD,CAAkB7O,IAAK,8BAInCypB,GAAU8I,GAAkC,IAAvBrd,EAAY5K,QACnCwpB,EAASjlB,KAAK,kBAAC,EAAD,CAAkB7O,IAAK,4BAInCypB,GAAU8I,GAAkC,IAAvBrd,EAAY5K,SAC9Bof,EAAaxE,UAChB4O,EAASjlB,KAAK,kBAAC,EAAD,CAAkB7O,IAAK,6BAIlCwpB,EACL,yBACEroB,UAAWE,IAAG,uCAAwC,CACpD,sDAAuD2c,KAExD8V,Q,GApMuBtxB,IAAMwE,WAAhCgsB,EACG5J,aAAe,CACpBpL,WAAW,EACX9I,YAAa,IAuMFjR,MAAQ8vB,IAAYnK,EAApB3lB,CAAoC+uB,I,0LCtT7ClO,EAAiBC,qBACrBC,IAAU3G,MACV,CACE4G,UADF,SACYvlB,GACiCA,EAAjCF,SAAiCE,EAAvByB,UADK,IACSoJ,EADV,YACmB7K,EADnB,0BAEtB,OAAO,2BACF6K,GADL,IAEE2a,UAAU,KAGd8O,QARF,SAQUjb,EAAGuM,GACJA,EAAQyN,WAIfpN,WAbF,SAaajmB,EAAO4lB,GAChB,IAAMK,EAAajmB,EAAMqE,KAAOuhB,EAAQ0E,UAAUjmB,GAElD,OAAO4hB,KAGX,SAACN,EAASC,GAAV,MAAuB,CACrBC,kBAAmBF,EAAQG,aAC3BC,mBAAoBJ,EAAQK,cAC5BC,WAAYL,EAAQK,iBAIlBsO,E,uKACM,IAAD,EACoC1oB,KAAK7L,MAAxC6lB,EADD,EACCA,kBAAmBxhB,EADpB,EACoBA,GAAOwG,EAD3B,0CAGP,OACE,kBAAC2pB,EAAD,iBACM3pB,EADN,CAEE7H,IAAK,SAAAyxB,GAAI,OAAI5O,EAAkB4O,IAC/BpwB,GAAE,UAAKA,KACP,yBAAK5C,UAAU,sCACZoK,KAAK7L,MAAMF,e,GAVYgD,IAAMwE,WAiBlCktB,EAAyB3zB,UAAOkK,IAAV,oGAAGlK,CAAH,kBAIbukB,IAAemP,G,SCjDTG,E,uKAEjB,OACE,kBAAC,EAAD,eACEjzB,UAAWE,IAAG,sBAAuBkK,KAAK7L,MAAMyB,YAC5CoK,KAAK7L,OACT,yBAAKyB,UAAU,6BACZ8F,IAAoBsB,KAAI,SAAA9I,GAAI,OAC3B,kBAAC,EAAD,iBACMA,EADN,CAEEO,IAAKP,EAAKsE,GACV5C,UAAU,mCACV,yBAAKA,UAAU,qBACZ1B,EAAK4H,KACJ,kBAAC5H,EAAK4H,KAAN,CAAWlG,UAAU,SAErB,kBAACC,EAAA,EAAD,CAAoBD,UAAU,SAE/B1B,EAAKwC,gB,GAlBuBO,IAAMwE,WA4B7CktB,EAAyB3zB,UAAOkK,IAAV,gGAAGlK,CAAH,sH,+WClCpB0D,EAAYC,EAAQ,IAApBD,QAEFowB,EAA2C/qB,YAC/CqK,IAAMC,IAAI,4BAGN0gB,EAA0BvgB,YAAK,CACnC/T,IAAK,0BACLgU,QAASqgB,IAIJ,SAASE,IACd,OAAOhgB,YAAe+f,G,YCZXE,EAAgB,WAAO,IAAD,EACPD,IAAnBE,EAD0B,oBAKjC,MAAO,CACL/T,QAHc,iBAAO,IAIrBpP,KAAM,CACJvD,QAAS0mB,EACTnf,MAAOhL,YAAOmqB,GACdnU,WAAYK,KAAKC,MAAMtW,YAAOmqB,GAAmB,GAAK,IAExD5T,SAAS,IAIA6T,EAAkB,WAA4C,IAAD,yDAAP,GAAjCxZ,EAAwC,EAAxCA,YAAwC,EAC1BqZ,IAD0B,mBACjEE,EADiE,KAChDE,EADgD,KAGlEzT,EAAU,SAACvf,GACf,IAAIoC,EAAKM,cACL8c,EAAO,sBACNsT,GADM,4BAGJ9yB,GAHI,IAIPoC,KACAqd,UAAWC,MACXC,aAAcD,MAASza,OAAO,oBAC9B2a,UAAWF,MACXG,aAAcH,MAASza,OAAO,wBAIlC+tB,EAAmBxT,GAEnBM,IAAMxP,IAAI,0BAA2BkP,GAEjCjG,GACFA,EAAY,2BAAKvZ,GAAN,IAAcoC,SAI7B,MAAO,EAAC,EAAOmd,IAGJ0T,EAAkB,WAA4C,IAAD,yDAAP,GAAjC1Z,EAAwC,EAAxCA,YAAwC,EAC1BqZ,IAD0B,mBACjEE,EADiE,KAChDE,EADgD,KAGlEzT,EAAU,SAACvf,GACf,IAAImK,EAAQ2oB,EAAgB9S,WAAU,SAAAnc,GAAC,MAAI,UAAGA,EAAEzB,MAAL,UAAiBpC,EAAOoC,OAC/Dod,EAAUS,YACZ9V,EADkB,YAAC,eAGdnK,GAHa,IAIhB4f,UAAWF,MACXG,aAAcH,MAASza,OAAO,sBAEhC6tB,GAGFE,EAAmBxT,GACnBM,IAAMxP,IAAI,0BAA2BkP,GAEjCjG,GACFA,KAIJ,MAAO,EAAC,EAAOgG,IAGJ2T,EAAkB,WAA4C,IAAD,yDAAP,GAAjC3Z,EAAwC,EAAxCA,YAAwC,EAC1BqZ,IAD0B,mBACjEE,EADiE,KAChDE,EADgD,KAGlEzT,EAAU,SAACvf,GACf,IAAIwf,EAAUsT,EAAgBlvB,QAAO,SAAAC,GAAC,MAAI,UAAGA,EAAEzB,MAAL,UAAiBpC,EAAOoC,OAElE4wB,EAAmBxT,GACnBM,IAAMxP,IAAI,0BAA2BkP,GAEjCjG,GACFA,KAIJ,MAAO,EAAC,EAAOgG,IAGJ4T,EAAgB,SAAC1wB,GAA6C,IAAD,EDxEnE,YAMH,IALFL,EAKC,EALDA,GACAuN,EAIC,EAJDA,KAIC,EAC4BiD,YAAe+f,GAArCS,EADN,sBAG2CvyB,IAAM2L,SAAyB,CACzErI,QAAS,KAJV,mBAGMkvB,EAHN,KAGsBC,EAHtB,KAODzyB,IAAMoS,WAAU,YACd,OAAItD,QAAJ,IAAIA,OAAJ,EAAIA,EAAMvN,KACRkxB,EAAkBhxB,EAAQoQ,IAAM/K,IAAcuL,IAA5B5Q,CAAgCqN,MAEnD,CAACA,IAEJ9O,IAAMoS,WAAU,WACV7Q,GACFkxB,EACEhxB,EAAQkQ,aAAK,SAAC3O,GAAD,MAAuB,UAAGA,EAAEzB,MAAL,UAAiBA,MAArDE,CACEqF,YAAayrB,OAIlB,CAAChxB,IAEJ,IAAI+Q,EAAezP,YAAO,GAAI,CAAC,WAAZA,CAAwB2vB,GAE3CxyB,IAAMoS,WAAU,WACdG,EAAeD,KACd,CAACE,KAAKC,UAAUH,KA3BlB,MA6BqCtS,IAAM2L,SAC1C2G,GA9BD,mBA6BMI,EA7BN,KA6BmBH,EA7BnB,KAiCGI,EAA+C,GAEnD,MAAO,CACL6f,iBACA9f,cACAH,iBACAI,YAAa5M,aAAI,SAAC/C,GAAD,OAAsB2P,EAAY3P,EAAEzB,IAAMyB,IAAI0P,IC4BhBggB,CAAkB9wB,GAA3D2Q,EADgE,EAChEA,eAAgBG,EADgD,EAChDA,YAAgB3K,EADgC,gDAGxE,OAAO,2BACFA,GADL,IAEE2K,cACAH,iBACA2e,oBAAqB3e,M,0qBCpGVvS,MAAMgO,MAAK,kBAAM,mCCAjBhO,MAAMgO,MACnB,kBAAM,yDCDOhO,MAAMgO,MAAK,kBAAM,mC,mvBCMhC,SAAS2kB,GAAcve,GAKrB,OAJoBwe,SAASC,iBAAiBze,GAAMgZ,OAAQ,KAE1DwF,SAASC,iBAAiBze,GAAMnJ,WAAY,IAC5C2nB,SAASC,iBAAiBze,GAAM0e,cAAe,KAkEpCC,ICpEHC,GDoEGD,GArCf,WACE,OAAO,SACLxG,GADK,sNAIH5jB,MAAQ,CACNsqB,eAAgB,GALf,EAQHC,UAAmCtwB,EARhC,EAmBHuwB,WAAa,SAAC/e,GACZ,EAAK8e,KAAO9e,GApBX,mEAYD,IADmBrL,KAAK7L,MAAhBkwB,OACK,CACX,IAAMnB,EAvChB,SAAuBhS,GACrB,IAAKA,EACH,OAAO,EAOT,IAJA,IAAI7F,EAAO6F,EAEPmT,EAASuF,GAAcve,IAEnBgZ,IACNhZ,EAAOA,EAAKiG,aAEV+S,EAASuF,GAAcve,GAM3B,OAAOgZ,EAqBWgG,CAAcrqB,KAAKmqB,MAE7BnqB,KAAKD,SAAS,CAAEmqB,eAAgBhH,OAfjC,+BAuBO,IACAmB,EAAWrkB,KAAK7L,MAAhBkwB,OACA6F,EAAmBlqB,KAAKJ,MAAxBsqB,eACFhH,EAAImB,GAAU6F,EACpB,OACE,yBAAK/yB,IAAK6I,KAAKoqB,YACZlH,EAAI,GAAK,kBAACM,EAAD,iBAAsBxjB,KAAK7L,MAA3B,CAAkCkwB,OAAQnB,UA7BvD,GAGSjsB,IAAMwE,a,+BE1ClB6uB,GAAet1B,kBAAO,MAAV,2EAAGA,CAAH,gOAWL,SAAAC,GAAC,OAAIA,EAAEC,MAAM6B,WAIF,SAAA9B,GAAC,OAAIA,EAAEC,MAAM6B,WAQ/BwzB,GAAWv1B,UAAOkK,IAAV,uEAAGlK,CAAH,qlCAYa,SAAAC,GAAC,OAAIA,EAAEu1B,WAAa,QAO5B,SAAAv1B,GAAC,OAAIA,EAAEw1B,e,UCjCpBC,GAAe/xB,EAAQ,MACrBgyB,GAAahyB,EAAQ,MAArBgyB,SAyCFC,G,+MACJhrB,MAAkB,CAChBirB,WAAY,GACZC,aAAa,G,EAGfC,gBAAiClxB,E,EAEjCswB,UAAmCtwB,E,EAEnCmxB,WAA8BnxB,E,EA+B9BoxB,cAAgB,SAACD,GACf,EAAKA,MAAQA,EACbE,uBAAsB,WACpB,EAAKC,gBACL,EAAKC,a,EAKTD,cAAgB,WACd,GAAK,EAAKH,MAAV,CACA,IAAMK,EAAO,EAAKL,MAAMM,cAAc,GACtC,GAAKD,EAAL,CACA,IAEMR,GAFSQ,EAAahjB,IAAI,cAAgB,IAEvBrL,KAAI,SAAC9I,GAE5B,IAAMq3B,EAASr3B,EAAK,GAAGs3B,QAGvB,OAFAD,EAAO72B,MAAQR,EAAK,GAAGQ,MACvB62B,EAAOE,SAAU,EACVF,KAGT,EAAKxrB,SAAS,CACZ8qB,kB,EAIJT,WAAa,SAAClZ,GACZ,EAAKiZ,KAAOjZ,G,EAGdwa,kBAAoB,SAACx3B,EAAWqY,GAC9B,IAAMof,EAAUz3B,EAChBy3B,EAAQF,SAAWE,EAAQF,QAFiB,IAIpCZ,EAAe,EAAKjrB,MAApBirB,WACRA,EAAWte,GAAKof,EAEhB,IAAMC,EAAqBf,EAAW7wB,QAAO,SAAA6xB,GAAC,OAAIA,EAAEJ,WAASzuB,KAAI,SAAA6uB,GAAC,OAAIA,EAAE5xB,KAEpE,EAAK+wB,OACP,EAAKA,MAAMhxB,OAAO,KAAK,SAAAsU,GAAG,OAAIsd,EAAmB3M,QAAnB,UAA8B3Q,KAAU,KAGxE,EAAKvO,SAAS,CACZ8qB,gB,EAIJO,OAASU,MAAS,WAAO,IACfC,EAAc,EAAK53B,MAAnB43B,UACAjB,EAAgB,EAAKlrB,MAArBkrB,YACHiB,GAAc,EAAK5B,KAKtB,EAAKA,MACL,EAAKA,KAAK7Y,YACT,EAAK6Y,KAAK7Y,WAA2B+U,aAAe,IAEhDyE,GACH,EAAK/qB,SAAS,CACZ+qB,aAAa,IAGRA,GACT,EAAK/qB,SAAS,CACZ+qB,aAAa,IAff3kB,OAAOyf,oBAAoB,SAAU,EAAKwF,UAkB3C,K,mEArGkB,IAAD,OAClBjlB,OAAOsb,iBACL,UACA,WACE,EAAKsJ,WAAaG,uBAAsB,kBAAM,EAAKE,cAErD,CAAEY,SAAS,M,yCAIIC,GACAjsB,KAAK7L,MAAd4R,OACKkmB,EAASlmB,MAGpB/F,KAAKmrB,kB,6CAKHnrB,KAAK+qB,YACP5kB,OAAO+lB,qBAAqBlsB,KAAK+qB,YAE/B/qB,KAAKorB,SACPjlB,OAAOyf,oBAAoB,SAAU5lB,KAAKorB,QAC1CprB,KAAKorB,OAAO3E,Y,+BA8EN,IAwCJ0F,EAxCG,SAkBHnsB,KAAK7L,MAhBPi4B,EAFK,EAELA,YACAC,EAHK,EAGLA,SACAtiB,EAJK,EAILA,MAJK,IAKLgiB,iBALK,SAMLn2B,EANK,EAMLA,UACAjB,EAPK,EAOLA,MACA0vB,EARK,EAQLA,OARK,IASLiI,gBATK,SAUL90B,EAVK,EAULA,QACA9C,EAXK,EAWLA,MAXK,IAYL63B,aAZK,MAYG,IAZH,MAaLC,eAbK,SAcLC,EAdK,EAcLA,OAdK,IAeLC,iBAfK,MAeO,EAfP,MAgBLr4B,aAhBK,MAgBG,IAhBH,MAiBLo2B,mBAjBK,MAiBS,IAjBT,IAoB6BzqB,KAAKJ,MAAjCirB,EApBD,EAoBCA,WAAYC,EApBb,EAoBaA,YACd6B,EAAeC,IAAW,MAAOh3B,EAAW,CAChDm2B,YAAaA,EACbjB,YAAaA,IAvBR,EA8BH9qB,KAAK7L,MAHD04B,EA3BD,EA2BL9mB,KA3BK,IA4BL/M,SAAU8zB,OA5BL,aA6BL5wB,QAGE6J,EAAO8mB,GAAa,GACpB7zB,EAAW8zB,EACX5wB,OAlCG,SAoCD6wB,EAAgBN,EACtB1mB,EAAOA,GAAQ,GACf/M,EAAWA,IAAY,EACvBkD,EAAUA,IAAW,GAajB1E,GAAuB,IAAZA,KACbwB,GAAW,EACXkD,GAAU,EACViwB,EAAc,SAACv0B,GACb,MAAc,iBAAVA,EACKlD,GAASQ,KAAM6B,QAEjB,WAGTgP,EAAO,CACL,CACE9L,EAAG,eACH+X,EAAGgb,WAAW,GAAD,OAAIx1B,KAEnB,CACEyC,EAAG,eACH+X,EAAG,IAAMgb,WAAW,GAAD,OAAIx1B,OAK7B,IAUMy1B,EAAK,IAAItC,GAQf,OAPAsC,EAAGC,OAAOnnB,GAAMonB,UAAU,CACxBxxB,KAAM,UACNyxB,MAAO,IACPC,UAAW,IACXC,GAAI,YAIJ,kBAAC/C,GAAD,CACEpzB,IAAK6I,KAAKoqB,WACVx0B,UAAW+2B,EACXnC,WAAYn2B,EACZM,MAAOA,EACP81B,YAAaA,GACb,kBAACC,GAAD,CAAc6C,YAAa,IACzB,yBAAK33B,UAAU,SACb,kBAAC,KAAD,CACE43B,MA5DI,CACZvzB,EAAG,CACD0B,KAAM,MACN8xB,MAAO,CAAC,EAAG,IAEbzb,EAAG,CACDlb,IAAK,IAuDCutB,OAAQA,EACRiI,SAAUA,EACVvmB,KAAMknB,EACN3a,QAxBM,CAAC,EAAG,EAAG,EAAG,GAyBhBka,QAASA,EACTkB,gBAAiB1tB,KAAKirB,iBACnB/uB,GAAW,kBAAC,KAAD,CAASyxB,WAAW,IAClC,kBAAC,KAAD,CAAOhyB,KAAK,QAAQiyB,YAAarB,IACjC,kBAAC,KAAD,CACE53B,MAAO,CAAE+3B,YAAWmB,OAAQ,QAC5B3xB,QAASA,GAvCC,CACpB,YACA,SAACjC,EAAWhF,GAAZ,MAA2B,CACzByB,KAAMuD,EACNrC,MAAM,GAAD,QAAU,IAAJ3C,GAAS64B,QAAQ,GAAvB,QAoCGnyB,KAAK,gBACLyf,SAAS,UACT1mB,MAAO,CACL,IACA8C,GAAuB,IAAZA,EAAgB20B,EAAcY,GAE3C/zB,SAAUA,MAIZqzB,GAAYtiB,IACZ,yBAAKnU,UAAU,SACZy2B,GAAY,wBAAIz2B,UAAU,iBAAiBy2B,GAE3CtiB,GACC,yBAAKnU,UAAU,YACK,oBAAVmU,EAAuBA,IAAUA,MAQpDgiB,GACC,wBAAIn2B,UAAU,UACXi1B,EAAW7tB,KAAI,SAAC9I,EAAMqY,GAAP,OACd,wBAAI9X,IAAKP,EAAK+F,EAAGnF,QAAS,kBAAM,EAAK42B,kBAAkBx3B,EAAMqY,KAC3D,0BACE3W,UAAU,MACVjB,MAAO,CACLo5B,gBAAkB75B,EAAKu3B,QAAmBv3B,EAAKQ,MAAd,UAGrC,0BAAMkB,UAAU,eAAe1B,EAAK+F,GACpC,wBAAS0B,KAAK,aACd,0BAAM/F,UAAU,WAAhB,WACOwc,OAAO4b,MAAM95B,EAAKsD,SACnB,EACe,IAAftD,EAAKsD,SACPs2B,QAAQ,GAJZ,MAMA,0BAAMl4B,UAAU,SACbw2B,EAAcA,EAAYl4B,EAAK8d,GAAK9d,EAAK8d,a,GAhR1C/a,IAAMg3B,eA2RTjE,QAAaY,I,wFF1UpBlyB,GAAYC,EAAQ,IAApBD,QACFw1B,GAAWv1B,EAAQ,MAeV,SAAS8K,GAAT,GAA4D,IAA1C0qB,EAAyC,EAAzCA,SAAUC,EAA+B,EAA/BA,eAAgBp6B,EAAe,EAAfA,KACnDq6B,EAAgBtH,aAAqBuH,IAD6B,EAGpCr3B,IAAM2L,UAAS,GAHqB,mBAGjE2rB,EAHiE,KAGtDC,EAHsD,KAqBlEC,EAAY,yCAAG,+BAAAruB,EAAA,sDACnBouB,GAAe,GAETpd,EAAUhK,SAASsnB,cAAc,kBACjCC,EAAM,CACVC,OAAQ,EACR/N,SAAS,4BAAD,OAAU/K,OAASza,OAAO,kBAA1B,QACR2b,MAAO,CAAErb,KAAM,OAAQkzB,QAAS,KAChCC,YAAa,CAAEtB,MAAO,GACtBuB,MAAO,CAAEC,KAAM,KAAM3zB,OAAQ,SAAU4zB,YAAa,aAItDf,KAAWxnB,IAAIioB,GAAKO,KAAK9d,GAAS+d,OAbf,2CAAH,qDAgBlB,OACE,yBAAKv5B,UAAU,gBACXu4B,GACA,oCACE,kBAAC,KAAD,CACEz5B,MAAM,UACNkB,UAAU,8CACVd,QAnCoB,WAC5B,IAAIiO,EAAWlG,YACb,qBACA,mEAFaA,CAGbuyB,IAGExhB,EAAMlV,GAAQ4U,YAAK,KAAM+hB,aAAS,GAAIC,YAAM,KAAtC52B,CAA4C0I,KAASuf,QAE/Dxa,OAAOopB,KAAP,UAAe3hB,GAAf,OAAqB7K,GAAY,YA2BzBpO,MAAO,CAAEC,SAAU,KAJrB,gBAOA,kBAAC,KAAD,CACEF,MAAM,UACNkB,UAAU,8CACVd,QA9CS,WACjBd,KA8CQW,MAAO,CAAEC,SAAU,KAJrB,gBAOA,kBAAC,KAAD,CACEF,MAAM,UACNkB,UAAU,8CACVd,QAASu5B,EACT15B,MAAO,CAAEC,SAAU,KAJrB,gBAOA,kBAAC,KAAD,CACEF,MAAM,UACNkB,UAAU,8CACVd,QAASs5B,GAHX,6BAQHD,GACC,oCACE,kBAAC,KAAD,CACEz5B,MAAM,UACNkB,UAAU,yCACVd,QAASs5B,GAHX,gBAMA,kBAAC,KAAD,CACE15B,MAAM,UACNkB,UAAU,+CAFZ,qBAKA,kBAAC,KAAD,CACElB,MAAM,UACNkB,UAAU,8CACV0f,QAASiZ,EACTz5B,QAAS25B,GAJX,+B,SAhGExE,K,kBAAAA,E,kBAAAA,Q,SGVAuF,G,yCAAAA,K,sBAAAA,E,sBAAAA,E,sBAAAA,E,qBAAAA,Q,KAOL,IAAMC,GAAoB,CAC/B,iCACA,qBACA,6CACA,uCACA,iCACA,qBACA,4BCGa,SAASC,GAAT,GAIJ,IAHT3pB,EAGQ,EAHRA,KACA4pB,EAEQ,EAFRA,aACAC,EACQ,EADRA,SAEA,OACE,kBAAC,KAAD,CACEC,UAAW,CAAC,EAAG,EAAG,EAAG,GACrBC,WAAY,kBAAM,MAClBl6B,UAAU,cACV,kBAAC,KAASm6B,MAAV,CACEC,OACE,yBAAKp6B,UAAU,wBACb,uBAASP,MAAM,wCACb,kBAAC46B,GAAA,EAAD,CACEr6B,UAAU,WACVjB,MAAO,CAAEmQ,IAAK,EAAGsf,KAAM,IACvBtvB,QAAS86B,KALf,4BAWFn7B,IAAK,GACL,yBAAKmB,UAAU,gCAAf,wCACQmQ,QADR,IACQA,OADR,EACQA,EAAMmqB,SAEd,yBAAKt6B,UAAU,gCAAf,kCACOmQ,QADP,IACOA,OADP,EACOA,EAAMoqB,UAEb,yBAAKv6B,UAAU,gCAAf,wCACQmQ,QADR,IACQA,OADR,EACQA,EAAMqqB,QAEd,yBAAKx6B,UAAU,gCAAf,4BAAkDmQ,QAAlD,IAAkDA,OAAlD,EAAkDA,EAAMsqB,MACxD,yBAAKz6B,UAAU,gCAAf,wCACQmQ,QADR,IACQA,OADR,EACQA,EAAMuqB,OAEd,yBAAK16B,UAAU,gCAAf,kCACOmQ,QADP,IACOA,OADP,EACOA,EAAMwqB,SAEb,yBAAK36B,UAAU,gCAAf,4BACMmQ,QADN,IACMA,OADN,EACMA,EAAMyqB,SAEZ,yBAAK56B,UAAU,gCAAf,wCACQmQ,QADR,IACQA,OADR,EACQA,EAAM0qB,MAEd,yBAAK76B,UAAU,gCAAf,wCACQmQ,QADR,IACQA,OADR,EACQA,EAAM2qB,UAEd,yBAAK96B,UAAU,gCAAf,wCACQmQ,QADR,IACQA,OADR,EACQA,EAAM4qB,UAEd,yBAAK/6B,UAAU,gCAAf,iCACQ,aAER,yBAAKA,UAAU,gCAAf,2BACO+5B,IAGT,kBAAC,KAASI,MAAV,CACEC,OAAQ,yBAAKp6B,UAAU,eAAf,4BACRnB,IAAK,GACL,sBAAM+B,KAAN,CAAWiD,SAAO,EAAC/C,KAAK,SACtB,kBAAC,KAAMsE,MAAP,CAAapF,UAAU,QACrB,kBAAC,KAAD,CAAOA,UAAU,QAAQgC,MAAM,KAA/B,gBAGA,kBAAC,KAAD,CAAOhC,UAAU,aAAagC,MAAM,KAApC,gBAGA,kBAAC,KAAD,CAAOhC,UAAU,aAAagC,MAAM,KAApC,mBAMN,kBAAC,KAASm4B,MAAV,CACEC,OAAQ,yBAAKp6B,UAAU,eAAf,4BACRnB,IAAK,GACL,sBAAM+B,KAAN,CAAWiD,SAAO,EAAC/C,KAAK,eACtB,kBAAC,KAAD,KACG+4B,GAAkBzyB,KAAI,SAAC/C,EAAGT,GAAJ,OACrB,kBAAC,KAAD,CACE/E,IAAG,sBAAiB+E,GACpB5D,UAAWE,IAAG,kBAAmB,CAC/B,OAAQ0D,EAAM,IAEhBoB,gBAAgB,EAChBhD,MAAK,UAAK4B,IACTS,SAMX,kBAAC,KAAS81B,MAAV,CACEC,OAAQ,yBAAKp6B,UAAU,eAAf,4BACRnB,IAAK,GACL,yBAAKmB,UAAU,QACb,0BAAMA,UAAU,sBAAhB,eADF,IACsD,IACpD,0BAAMA,UAAU,sBAAhB,UAFF,iBAIA,yBAAKA,UAAU,aACb,0BAAMA,UAAU,sBAAhB,MADF,+B,ICjHA8C,GAAYC,EAAQ,IAApBD,QAEAk4B,GAASC,GAATD,KAeO,SAASE,GAAT,GAKJ,IAAD,IAJRC,eAIQ,SAHRl5B,EAGQ,EAHRA,SACA/C,EAEQ,EAFRA,QACA6U,EACQ,EADRA,YAEA,OACE,uBAAO8T,UAAW,EAAG5lB,SAAUA,GAC7B,kBAAC,GAAD,CACEm5B,gBAAc,EACdC,OAAO,EACPr7B,UAAU,YACVjB,MAAOu8B,GAAgBH,GACvBj8B,QAASA,GACR4D,GACCiC,aAAW,SAAClG,EAAa+E,GAAd,OACT,kBAACo3B,GAAD,CAAMn8B,IAAG,UAAKA,EAAL,YAAY+E,GAAOuL,KAAMtQ,EAAKY,MAAOZ,GAC3CiE,GACCiC,aAAW,SAACV,GAAD,OACT,kBAAC22B,GAAD,CACEn8B,IAAKwF,EAAEzB,GACPuM,KAAI,UAAKtQ,EAAL,YAAYwF,EAAEzB,IAClBnD,MAAOyE,YAAOG,EAAEzB,GAAI,CAAC,UAAW,QAASyB,QAG7CH,YAAO,GAAI,CAACrF,IARbiE,CASCiR,OAGN7L,IAfDpF,CAgBCiR,KAMV,SAASunB,GAAgBH,GACvB,GAAKA,EAIL,MAAO,CACL1V,YAAa,GACbxmB,aAAc,GACdqtB,WAAY,OACZ5P,QAAS,GACT6e,uBAAwB,EACxBC,wBAAyB,G,aC1DrB14B,GAAYC,EAAQ,IAApBD,QAYF24B,GAAiBh7B,aAAqB,GACtCi7B,GAAsBj7B,aAAqB,GAE3Ck7B,GAAwBv8B,UAAOkK,IAAV,mGAAGlK,CAAH,8J,qIAyHA,CACHN,MADG,OAEHwtB,WAAY,OACZ7tB,MAAO,UA3GhB,SAASm9B,GAAT,GAAiE,IAAlC57B,EAAiC,EAAjCA,UAAWjB,EAAsB,EAAtBA,MAAOoR,EAAe,EAAfA,KACtD4D,EAAyB5D,EAAzB4D,YAAa8nB,EAAY1rB,EAAZ0rB,QAIrB,OAFAzmB,YAAc,CAAC,CAAEtU,KAAM,4BAAU,CAAEA,KAAM,8BAGvC,yBAAK/B,MAAOA,EAAOiB,UAAWE,IAAG,gBAAiBF,IAChD,uBAAKA,UAAU,QACb,uBAAK87B,KAAM,IACT,yBAAK97B,UAAU,4BAAf,4BACO,0BAAMA,UAAU,QAAhB,kCADP,qCAKJ,6BACA,uBAAK+7B,OAAQ,IACX,uBAAKD,KAAM,GACT,sBAAMl7B,KAAN,iBAAe66B,GAAf,CAA+B56B,MAAM,6BACnC,kBAAC,KAAD,CAAOm7B,UAAQ,EAAC/2B,UAAU,EAAOjD,MAAO65B,EAAQhB,SAGpD,uBAAKiB,KAAM,GACT,sBAAMl7B,KAAN,iBAAe66B,GAAf,CAA+B56B,MAAM,6BACnC,kBAAC,KAAD,CAAOm7B,UAAQ,EAAC/2B,UAAU,EAAOjD,MAAO65B,EAAQrB,WAGpD,uBAAKsB,KAAM,GACT,sBAAMl7B,KAAN,iBAAe66B,GAAf,CAA+B56B,MAAM,uBACnC,kBAAC,KAAD,CAAOm7B,UAAQ,EAAC/2B,UAAU,EAAOjD,MAAO65B,EAAQlB,aAItD,uBAAKoB,OAAQ,IACX,uBAAKD,KAAM,GACT,sBAAMl7B,KAAN,iBAAe66B,GAAf,CAA+B56B,MAAM,6BACnC,kBAAC,KAAD,CAAOm7B,UAAQ,EAAC/2B,UAAU,EAAOjD,MAAO65B,EAAQpB,SAGpD,uBAAKqB,KAAM,GACT,sBAAMl7B,KAAN,iBAAe66B,GAAf,CAA+B56B,MAAM,6BACnC,kBAAC,KAAD,CAAOm7B,UAAQ,EAAC/2B,UAAU,EAAOjD,MAAO,YAG5C,uBAAK85B,KAAM,GACT,sBAAMl7B,KAAN,iBAAe66B,GAAf,CAA+B56B,MAAM,6BACnC,kBAAC,KAAD,CAAOm7B,UAAQ,EAAC/2B,UAAU,EAAOjD,MAAO65B,EAAQf,cAItD,uBAAKiB,OAAQ,IACX,uBAAKD,KAAM,GACT,sBAAMl7B,KAAN,iBAAe66B,GAAf,CAA+B56B,MAAM,6BACnC,kBAAC,KAAD,CAAOm7B,UAAQ,EAAC/2B,UAAU,EAAOjD,MAAO65B,EAAQvB,YAGpD,uBAAK2B,OAAQ,EAAGH,KAAM,GACpB,sBAAMl7B,KAAN,iBAAe66B,GAAf,CAA+B56B,MAAM,uBACnC,kBAAC,KAAD,CAAOm7B,UAAQ,EAAC/2B,UAAU,EAAOjD,MAAO65B,EAAQtB,cAItD,2BACE,uBAAKuB,KAAM,IACT,sBAAMl7B,KAAN,iBAAe86B,GAAf,CAAoC76B,MAAM,6BACxC,yBACEkc,wBAAyB,CAAEC,OAAQ6e,EAAQK,QAC3Cn9B,MAAO,CACLo9B,SAAU,OACVC,WAAY,UACZluB,aAAc,oBACdimB,cAAe,EACfrvB,YAAa,QAMvB,2BACE,uBAAKg3B,KAAM,IACT,sBAAMl7B,KAAN,iBAAe86B,GAAf,CAAoC76B,MAAM,6BACxC,kBAAC,KAAD,CAAOm7B,UAAQ,EAAC/2B,UAAU,EAAOjD,MAAO,YAI9C,2BACE,uBAAK85B,KAAM,IACT,sBAAMl7B,KAAN,iBAAe86B,GAAf,CAAoC76B,MAAM,6BACxC,kBAAC,KAAD,CAAOm7B,UAAQ,EAAC/2B,UAAU,EAAOjD,MAAO65B,EAAQnB,WAItD,6BACA,2BACE,uBAAKoB,KAAM,IACT,kBAACH,GAAD,KACG74B,GACCsE,aAAI,SAACvI,GAAD,OACF,yBAAKA,IAAKA,GACPiE,GACC0vB,YAAGxuB,IAAI,GACPmF,IACAjF,YAAO,GAAI,CAACrF,IAHbiE,CAICiR,IACA,sBAME/T,UAAU,qCANZ,KAEWV,KAAMC,UAKdV,GAGJiE,GAAQ6Z,eAAkBzY,YAAO,GAAI,CAACrF,IAAtCiE,CAA6CiR,OAGlD7L,IArBDpF,CAsBCiR,MAIR,6BACA,uBAAKgoB,OAAQ,IACX,uBAAKD,KAAM,GACT,sBAAMl7B,KAAN,iBAAe66B,GAAf,CAA+B56B,MAAM,6BACnC,kBAAC,KAAD,CAAOoE,UAAU,MAGrB,uBAAK62B,KAAM,GACT,sBAAMl7B,KAAN,iBAAe66B,GAAf,CAA+B56B,MAAM,6BACnC,kBAAC,KAAD,CAAOoE,UAAU,MAGrB,uBAAK62B,KAAM,GACT,sBAAMl7B,KAAN,iBAAe66B,GAAf,CAA+B56B,MAAM,6BACnC,kBAAC,KAAD,CAAOoE,UAAU,OAIvB,uBAAK82B,OAAQ,IACX,uBAAKD,KAAM,IACT,sBAAMl7B,KAAN,iBAAe66B,GAAf,CAA+B56B,MAAM,yCACnC,kBAAC,KAAD,CAAOoE,UAAU,MAGrB,uBAAK62B,KAAM,IACT,sBAAMl7B,KAAN,iBAAe66B,GAAf,CAA+B56B,MAAM,yCACnC,kBAAC,KAAD,CAAOoE,UAAU,OAIvB,6BACA,uBAAKjF,UAAU,QACb,uBAAK87B,KAAM,IACT,yBAAK97B,UAAU,eAAf,uD,ICnJNq8B,G,2IA7CSzmB,GAAU1J,KAAM0J,QA8Id0mB,OA5FR,SAAkC/9B,GAAkB,IAAD,EAYpDA,EAVFg+B,mBAFsD,SAGtD3vB,EASErO,EATFqO,QAHsD,EAYpDrO,EARFkE,kBAJsD,MAIzC,GAJyC,EAKtD+5B,EAOEj+B,EAPFi+B,gBACAC,EAMEl+B,EANFk+B,eACAC,EAKEn+B,EALFm+B,eACAv+B,EAIEI,EAJFJ,SACAw+B,EAGEp+B,EAHFo+B,WATsD,EAYpDp+B,EAFFq+B,kBAVsD,MAUzC,GAVyC,EAWtDC,EACEt+B,EADFs+B,cAGEC,EAAuBz7B,IAAM8qB,QAAO,iBAAO,MAqBzCsM,EAAgB,SAAC3Z,GACrB,GAAKyd,EAAL,CAIA,IAAMj+B,EAAO0U,cACX,SAAA3O,GAAC,MACC,UAAG4D,aAAK,CAAC,MAAO5D,MACfya,EAAIie,cAA8BzgB,QAAnC,KAHStJ,CAIXvQ,GAEF45B,GAAQzmB,GAAQ,2BACXI,aAAkBpJ,EAASgwB,IADjB,IAEbx+B,KAFa,WAaX,OAVIi+B,IACFA,GAAM5b,OAAO,CACXrK,cAAe,CACbpW,UAAW,sBACXjB,MAAO,CAAEC,SAAU,GAAIC,YAAa,IACpCygB,SAAS,KAKR,IAAI5E,SAAQ,SAAA4Q,GACb8Q,GACFA,EAAgBl+B,GAAQq+B,GAGtBE,GACFA,IAGFC,EAAqB1vB,QAAW,WAC9Bse,IACIgR,GACFA,SAKRv+B,SA9Ba,WA+BPA,GACFA,UAMR,MAAO,CACL6+B,sBArE4B,SAACle,GACzB2d,GACFA,IAEFhE,EAAc3Z,IAkEd2Z,gBACAwE,oBAhE0B,WACtBZ,IACFA,GAAM5b,OAAO,CACXrK,cAAe,CACbpW,UAAW,sBACXjB,MAAO,CAAEC,SAAU,GAAIC,YAAa,KACpCygB,SAAS,MA2Dfmd,cAAeC,I,ICtIXh6B,GAAYC,EAAQ,IAApBD,QAMO,SAASo6B,GAAT,GAA+D,IAApC9+B,EAAmC,EAAnCA,KAAMD,EAA6B,EAA7BA,SAAaI,EAAgB,oCACnE4R,EAASkjB,eAATljB,KADmE,ECS9D,WAAyD,IAAvB5R,EAAsB,uDAAJ,GAE/D4+B,EAIE5+B,EAJF4+B,MAFmE,EAMjE5+B,EAHF6+B,sBAHmE,MAGlD,GAHkD,IAMjE7+B,EAFF8+B,mBAJmE,MAIrD,GAJqD,IAMjE9+B,EADF++B,gBALmE,WAQvBj8B,IAAM2L,SAElDowB,GAVmE,mBAQ9DG,EAR8D,KAQ7CC,EAR6C,OAY7Bn8B,IAAM2L,SAAcqwB,GAZS,mBAY9DI,EAZ8D,KAYhDC,EAZgD,KAc/DC,EAAiB,SAACC,EAAsBC,IACvC/kB,aAAMqkB,IAAUh0B,YAAOy0B,GAAWT,IAIvCK,EAAmB3kB,aAAO,kBAAMykB,IAAUvkB,KAAU+kB,aAAS,GAA1CjlB,CAA8C+kB,IAEjEF,GAAgB,SAAAppB,GAAI,OAClBuE,aACE,kBAAMykB,IACNx6B,aACEsB,aAAO,SAACC,GAAD,OAAYu5B,EAAQ92B,SAASzC,EAAEzB,OACtCmB,aAAOuQ,IAETwpB,aAAS,GANXjlB,CAOEglB,QAIAtB,EAAcl7B,IAAMkd,SAAQ,kBAAMgf,EAAgBp0B,OAAS,IAAG,CAClEo0B,IAGI1Q,EAAe,CACnB0Q,kBACAt7B,SAAU07B,GAvCyD,EA0C5BrB,GAAU,2BAC9C/9B,GAD6C,IAEhDg+B,cACA3vB,QAAQ,kCAAD,OAAWzD,YAAOo0B,GAAlB,mCACPZ,WAAYc,EAAar2B,KAAI,SAAA/C,GAAC,MAAK,CAAEzB,GAAIsB,YAAO,OAAQ,CAAC,MAAOG,OAChEw4B,cAAe,WACbW,EAAmB,IACnBE,EAAgB,QAPZjF,EA1C6D,EA0C7DA,cAAeoE,EA1C8C,EA0C9CA,cAWvB,MAAO,CACLhQ,eACA0P,cACA9D,gBACA8E,kBACAE,eACAM,iBAAkBR,EAAgBp0B,OAClC0zB,gBACAmB,eAAgB,WACdR,EAAmB,IACnBE,EAAgB,MDrEmBO,GAA/BpR,EAHmE,EAGnEA,aAAc4Q,EAHqD,EAGrDA,aAkCtB,OACE,kBAAC,KAAD,iBACMl/B,EADN,CAEEC,SAAO,EACPiB,MAAM,uCACNoF,UAAW,CACTyH,WAAY,GACZxH,YAAa,GACbo5B,aAAc,IAEhBz/B,MAAO,IACPG,OAAQ,CACN,kBAAC,KAAD,CAAQC,IAAI,aAAaC,MAAM,UAAUI,QAASf,GAAlD,gBAGA,kBAAC,KAAD,CACEU,IAAI,SACJC,MAAM,UACNI,QAlDS,WACfd,EAAK0E,GAAQsR,KAAS+pB,aAAM,WAAvBr7B,CAAmC26B,IACtCt/B,KAiDI6B,UAAU,QAJZ,iBAQF7B,SAAUA,EACVQ,UAAU,EACVD,cAAc,IACd,kBAAC,KAAD,CACE8D,KAAK,QACLgB,QAvDyC,CAC7C,CACE/D,MAAO,2BACP2+B,UAAW,QAEb,CACE3+B,MAAO,qBACP2+B,UAAW,UAEb,CACE3+B,MAAO,eACP2+B,UAAW,cAEb,CACE3+B,MAAO,2BACP2+B,UAAW,gBAEb,CACE3+B,MAAO,uCACP2+B,UAAW,gBAEb,CACE3+B,MAAO,2BACP2+B,UAAW,gBAiCT37B,WAAY0N,EACZ0c,aAAcA,K,IElBjBwH,GAFGvxB,GAAYC,EAAQ,IAApBD,S,SAEHuxB,K,kBAAAA,E,kBAAAA,Q,KAWL,IAAMgK,GAAMxlB,YAAOmP,aAAO,GAAQ9N,YAAO,GAAIA,YAAO,I,4HAyP/B,CAAEsU,KAAF,OAAatf,IAAK,M,0GA6BoB,CAAEzQ,MAAO,K,0GAQT,CAAEA,MAAO,K,0GAQT,CAAEA,MAAO,K,0GA6DvC,CAAE6tB,WAAY,S,2GAkCN,CAAE8P,WAAY,W,6HA0E9B,CAAEkC,MAAF,QAAcpvB,IAAK,MCzhBzBqvB,OD4EA,SAAsBhgC,GACnCigC,YAAS,4BAETppB,YAAc,CAAC,CAAEtU,KAAM,4BAAU,CAAEA,KAAM,0CAEzCyT,aAAuB,GAL0B,MAOlC,IAAKnU,UAAbC,EAP0C,sBASvBo+B,eAAnBC,EAT0C,sBAWnBr9B,IAAM2L,WAXa,mBAW1C2xB,EAX0C,KAWjCC,EAXiC,OAaVtxB,cAbU,mBAa1CuxB,EAb0C,KAa9BC,EAb8B,OAecxxB,cAfd,mBAe1CyxB,EAf0C,KAelBC,EAfkB,KAiBzC7uB,GAA4B8uB,eAA5B9uB,KAjByC,GAmBL9O,IAAM2L,SAAmB,CACnEqnB,GAAU6K,aACV7K,GAAU8K,gBArBqC,qBAmB1CC,GAnB0C,MAmB1BC,GAnB0B,MA0BzCpnB,GAAW1Z,EAAMkS,MAAjBwH,OAGFqnB,GAAKpV,YAAY3rB,EAAM2O,SAASid,QA7BW,GAgCN9oB,IAAM2L,SAASsyB,GAAGC,YAhCZ,qBAgC1CA,GAhC0C,MAgC9BC,GAhC8B,MAkCjDn+B,IAAMoS,WAAU,WACd+rB,GAAqBF,GAAGC,cACvB,CAACD,GAAGC,aAEP,IAAMjhC,GAAOqhB,aAAc1H,GAAOrV,IAtCe,GAkD7CyQ,aAAkB,CACpBzQ,GAAI28B,GACJpvB,KAAM7R,KAXN6V,GAzC+C,GAyC/CA,MACAsrB,GA1C+C,GA0C/CA,SACAlsB,GA3C+C,GA2C/CA,eACAQ,GA5C+C,GA4C/CA,YACA2rB,GA7C+C,GA6C/CA,cACAC,GA9C+C,GA8C/CA,gBACAC,GA/C+C,GA+C/CA,cACAC,GAhD+C,GAgD/CA,oBACAtN,GAjD+C,GAiD/CA,oBAMFlxB,IAAMoS,WAAU,WACd,IAAMqsB,EAAiB,SAAChhB,GAElBA,EAAIihB,SAA2B,KAAhBjhB,EAAIkhB,SACrBp7B,KAGGka,EAAIihB,SAA2B,MAAhBjhB,EAAIkhB,SACtBhB,KAMJ,OAFAzuB,OAAOsb,iBAAiB,UAAWiU,GAE5B,WACLvvB,OAAOyf,oBAAoB,UAAW8P,MAEvC,IAEHz+B,IAAMoS,WAAU,WACdpT,EAAK4/B,eAAe1sB,MACnB,CAACM,KAAKC,UAAUP,MAEnBlS,IAAMoS,WAAU,WACV6rB,GAAGvF,cACL15B,EAAK4/B,eAAe,CAAElG,aAAcuF,GAAGvF,eAErCuF,GAAGY,UACL7/B,EAAK4/B,eAAe,CAAEC,SAAUZ,GAAGY,aAEpC,CAACrsB,KAAKC,UAAUwrB,MAEnB,IAAMa,GAAqB,SAACn+B,GAAD,OAAmB,WAC5Cq9B,IAAkB,SAAC/qB,GAAD,OAChBA,EAAKxN,SAAS9E,GAASsS,EAAKlQ,QAAO,SAAAC,GAAC,OAAIA,IAAMrC,KAA9C,sBAA2DsS,GAA3D,CAAiEtS,SAI/Do+B,GAAqBhB,GAAet4B,SAASutB,GAAU6K,cACvDmB,GAAsBjB,GAAet4B,SAASutB,GAAU8K,eA9Fb,GAgG3Brf,aAAgB,CACpC/F,YAAa,YAAkB,IAAfnX,EAAc,EAAdA,GACdqK,KAAQS,KAAKzG,YAAQ,MAAOrE,EAAfqE,CAAmBq5B,KAChC,IAAQzqB,QAAQ,iDAHX0qB,GAhGwC,wBAuGxBhgB,aAAgB,CACvCxG,YAAa,kBAAM,IAAQlE,QAAQ,iDAD5B2qB,GAvGwC,qBA2G3C57B,GAAW,WACfvE,EAAKC,iBAAiBC,MAAK,SAAAC,GACzB,IAAIigC,EAAO,mDACNjgC,GACCyX,GAAOrV,GAAK,CAAEA,GAAIqV,GAAOrV,IAAO,IACjCuN,IAHM,IAITxL,QAASoP,MAGKkE,GAAOrV,GAAK49B,GAAeD,IAEnCE,OAIZjrB,YACE,kBAAC3H,GAAD,CAIE0qB,SAAUsG,EACVrG,eAAgBsG,EAChB1gC,KAAMwG,MAIV,IArIiD,GA6IjBvD,IAAM2L,UAA8B,GA7InB,qBA6I1CmuB,GA7I0C,MA6IjCuF,GA7IiC,SA+Ibr/B,IAAM2L,SAAS,GA/IF,qBA+I1C2zB,GA/I0C,MA+I9BC,GA/I8B,MAgM3CC,GAAqBx/B,IAAM2O,aAC/B,SAAC4H,EAAD,GAAyD,IAA9CzH,EAA6C,EAA7CA,KACTywB,GACEphB,KAAKshB,MACFh+B,GAAQqG,IAAQ/E,YAAOtB,GAAQknB,IAAKlR,MAAStY,IAA7CsC,CAAqDqN,GAAQgE,GAC5D,QAIR,CAACA,KAGH9S,IAAMoS,WAAU,WACdotB,GAAmB,KAAMxgC,EAAK0gC,oBAC7B,CAAC5sB,KAEJ,IAQM6sB,GAAU,GAAK3C,GAAI+B,IAAsB/B,GAAIgC,IAE7CY,GAA0C5/B,IAAMkd,SACpD,kBACE1F,YAAOC,IAAOoB,YAAOwkB,IAAkB,SAAAhmB,GAAG,OACxCtU,aAAO,SAACC,GAAD,OAAuBA,EAAEvD,KAAKgG,SAAS4R,KAA9CtU,CAAoDs6B,KADtD7lB,CAEE8lB,KACJ,CAACA,IAGK5E,GAAiBx7B,EAAjBw7B,aAER,OACE,kBAAC,KAAD,CAAkB/5B,UAAU,eACzB++B,GACC,kBAAC7B,GAAD,CACE9+B,KArDgB,SAACoC,GACvB,IAAIwf,EAAO,sBACNjM,GAAY0rB,KADN,YAENj/B,EAAO4G,KAAI,SAAA/C,GAAC,kCACVA,GADU,IAEb0f,UAAU,EACVnhB,GAAG,GAAD,OAAKyB,EAAEzB,GAAP,aAAcM,sBAIpBqvB,GAAoBvS,IA4Cd7hB,SAAU6gC,IAGd,4BACA,kBAAC,IAAD,KACE,uBACE3+B,KAAMA,EACNK,WAAYm+B,EAAa,OAAS,QAClC7+B,UAAU,WACVkhC,eAAgBL,KACdT,IACA,uBAAS3gC,MAAM,wCACb,sBACEO,UAAU,8HAEVd,QAASihC,GAAmB9L,GAAU6K,cAHxC,MAEgB,IAEd,kBAAChd,EAAA,EAAD,CAAeliB,UAAU,cAI/B,uBAAK+7B,OAAQ,IACVqE,IACC,uBAAKtE,KAAM,GACT,kBAAC,KAAD,CACEqF,iBAAkB,CAAC,EAAG,GACtBjH,WAAY,kBAAM,MAClBl6B,UAAU,cACV,kBAAC,KAASm6B,MAAV,CACEC,OACE,yBAAKp6B,UAAU,wBAAf,2BAEE,uBAASP,MAAM,wCACb,kBAAC2hC,EAAA,EAAD,CACEphC,UAAU,0BACVjB,MAAO,CAAEmQ,IAAK,EAAGovB,MAAO,GACxBp/B,QAASihC,GAAmB9L,GAAU6K,kBAK9CrgC,IAAK,GACL,uBAAKmB,UAAU,8BACb,uBAAK87B,KAAM,GAAI97B,UAAU,QACvB,sBAAKA,UAAU,gBAAf,4BAGA,sBAAMY,KAAN,CAAWiD,SAAO,EAAC/C,KAAK,gBACtB,kBAAC,KAAD,CAAOd,UAAU,QAAQiF,UAAU,MAGvC,uBAAK62B,KAAM,GAAI97B,UAAU,QACvB,sBAAKA,UAAU,gBAAf,4BAGA,sBAAMY,KAAN,CAAWiD,SAAO,EAAC/C,KAAK,YACtB,kBAAC,KAAD,CAAOd,UAAU,QAAQiF,UAAU,MAGvC,uBAAK62B,KAAM,GAAI97B,UAAU,QACvB,sBAAKA,UAAU,gBAAf,4BAGA,kBAAC,KAAD,CACEqhC,YAAU,EACVrhC,UAAU,QACViF,UAAU,EACVq8B,cAAc,EACdt/B,MAAOu9B,GACPgC,SAxKG,SAACv/B,GAC1B48B,EAAW58B,IAwKWC,SArKG,SAACD,GAC1Bw9B,GAAqBx9B,KAqKEi/B,GAAsB75B,KAAI,SAAA/C,GAAC,OAC1B,kBAAC,KAAOgD,OAAR,CAAexI,IAAKwF,EAAEzB,GAAIZ,MAAOqC,EAAEzB,IAChCyB,EAAEvD,WAKG,aAAb2+B,IACC,uBAAK3D,KAAM,GAAI97B,UAAU,QACvB,kBAAC,GAAD,CACEm7B,QAASA,GACTj8B,QArKA,SACxB+nB,EACAua,GAII,IAAD,EACHva,EAAEwa,iBADC,MAGiB3+B,IAClB,iCAAE4+B,EAAF,KAAUt4B,EAAV,iBAA8B,CAACs4B,EAAKhqB,YAAK,IAALA,CAAUtO,MAC9CswB,YAAM,KACNx1B,YAAO,GAAI,CAAC,SAHMpB,CAIlB0+B,GAPC,mBAGIE,EAHJ,KAGSvyB,EAHT,KASc,aAAbswB,IACFE,GAAgB+B,GAGbvyB,GAILoB,OAAOoxB,OAAO,CACZC,SAAU,SACVpT,KAAM,EACNtf,IAAG,UAAEsC,SAASC,eAAetC,UAA1B,aAAE,EAA+B0Y,aA4Id5lB,SA1KA,SAACk5B,GACzBuF,GAAavF,IA0KWpnB,YAAaA,QAMvB,kBAAC,KAASomB,MAAV,CACEC,OAAQ,yBAAKp6B,UAAU,eAAf,4BACRnB,IAAK,GACL,2BACE,uBAAKi9B,KAAM,IACT,kBAAC,KAAD,MACA,yBACE97B,UAAU,wCACVd,QAAS8/B,GACT,kBAAC6C,EAAA,EAAD,CAAc7hC,UAAU,SAH1B,eAaZ,uBAAK87B,KAAMkF,KACPnC,GACA,oCACE,yBAAK7+B,UAAU,uCACb,uBAAO6nB,UAAW,GAChB,sBACE7nB,UAAWE,IACT,kBACA,oCACA,uBACA,sCAGF,yDAEE,yBAAKF,UAAU,6BAEjB,kBAAC,GAAD,CACE4B,QAAS++B,GACTxsB,MAAK,UAAKwsB,GAAL,KACL5hC,MAAO,CAAEN,MAAO,GAAI6N,WAAY,GAChCmiB,OAAQ,QAKhB,yBAAKzuB,UAAU,yBACb,kBAAC,KAAD,CACE+F,KAAK,gBACLk0B,UAAWwF,GACXx9B,SAAU09B,GACVhgC,OAAQ+/B,GACRoC,aAAc,EACdtZ,YAAaoX,GACb5/B,UAAU,UACT8C,GACCsE,aAAI,SAACq4B,GAAD,OACF,kBAAC,KAAK9V,QAAN,CACEtd,UAAQ,EACRxN,IAAK4gC,EACLiC,IACE,sBACEK,iBAAe,EACfC,gCAA8B,EAC9BC,YAAY,EACZjiC,UAAU,eAEViC,SAAU49B,GAAoBJ,IAC7BA,IAGL,uBACE3D,KAAM,GACN97B,UAAU,6CACTy/B,IACCxtB,IAAwBC,wBACxB,yBACElS,UAAU,YACV+c,wBAAyB,CACvBC,OAAM,OAAE7M,SAAF,IAAEA,QAAF,EAAEA,GAAM+rB,UAIpB,kBAAC,KAAD,CAEErf,WAAS,EACT9I,YAAaA,GAAY0rB,GACzBxN,gBAAiBM,UAKzBrqB,IArCDpF,CAsCCiR,IACF,kBAAC,KAAK4V,QAAN,CAAc9qB,IAAI,WAAW6iC,IAAI,YAC9B5+B,GACCsE,aAAI,SAACq4B,GAAD,OACF,yBAAK5gC,IAAK4gC,EAAUz/B,UAAU,iBAlNjC,SAACy/B,GACtB,OAAO38B,GAAQ0vB,YAAGxuB,IAAI,GAAImF,IAAQjF,YAAO,GAAI,CAACu7B,IAAvC38B,CAAmDiR,IACxD,wBAAInR,GAAI68B,EAAUz/B,UAAU,QACzBy/B,GAED,KA8MuByC,CAAezC,GACf38B,GACC6Z,aAAe,CAAE3c,UAAW,SAC5BkE,YAAO,GAAI,CAACu7B,IAFb38B,CAGCiR,QAGN7L,IAVDpF,CAWCiR,QAMX8qB,GACC,yBAAK7+B,UAAU,2CACb,yBAAK4C,GAAG,WACR,kBAAC,GAAD,CACEuN,KAAM,CACJgyB,SAAU5uB,GACVsoB,QAAS1rB,GACT4D,oBAOTssB,IACC,uBAAKvE,KAAM,GACT,kBAAChC,GAAD,CACE3pB,KAAMA,GACN4pB,aAAcA,GACdC,SAAUmG,GAAmB9L,GAAU8K,oBAK7CkB,IACA,uBAAS5gC,MAAM,wCACb,sBACEO,UAAU,8HAEVd,QAASihC,GAAmB9L,GAAU8K,eAHxC,OAEiB,IAEf,kBAACld,EAAA,EAAD,CAAcjiB,UAAU,kBE3hBzBqB,OAAMgO,MAAK,kBAAM,wDCAjBhO,OAAMgO,MAAK,kBAAM,mCCAjBhO,OAAMgO,MAAK,kBAAM,yDCAjBhO,OAAMgO,MAAK,kBAAM,yDCAjBhO,OAAMgO,MAAK,kBAAM,mCCEnB+yB,IAFE/gC,IAAMgO,MAAK,kBAAM,wDAENhO,IAAMgO,MAAK,kBAAM,yDAE9BgzB,GAAahhC,IAAMgO,MAAK,kBAAM,mCCJ5BhO,OAAMgO,MAAK,kBAAM,yDCAjBhO,OAAMgO,MAAK,kBAAM,mCC8BnBizB,GAAe,oCACf9I,GAAe,oCACf+I,GAAuB,oBACvBC,GAAe,gBACflC,GAAW,UAAMkC,GAAN,QACXC,GAAoB,UAAMF,GAAN,QACpBG,GAAsB,UAAMH,GAAN,WACtB7J,GAAiB,kBACjBiK,GAA4B,6BAC5BC,GAAc,eACdC,GAAc,eACdC,GAAgB,sBAChBC,GAAW,UAAMF,GAAN,QACXG,GAAoB,qBACpBC,GAAsB,uBACtBC,GAAgB,qBAChBC,GAAkB,mBAExB,SAASrzB,KACd,MAAO,CAOL,CACElN,GAAI,EACJnD,MAAO,2BACPwI,KAAMuxB,GACN7pB,UAAWyzB,IAEb,CACExgC,GAAI,IACJnD,MAAO,2BACPwI,KAAMk7B,GACNxzB,UAAW0zB,IAEb,CACEzgC,GAAI,IACJnD,MAAO,2BACPwI,KAAM26B,GACNjzB,UAAW2zB,IAEb,CACE1gC,GAAI,EACJnD,MAAO,2BACPwI,KAAMywB,GACN/oB,UAAW4zB,GAEb,CACE3gC,GAAI,GACJnD,MAAO,2BACPwI,KAAMq4B,GACN3wB,UAAW4uB,IAEb,CACE37B,GAAI,GACJnD,MAAO,2BACPwI,KAAMu6B,GACN7yB,UAAW4uB,IAEb,CACE37B,GAAI,MACJnD,MAAO,2BACPwI,KAAM06B,GACNhzB,UAAW6zB,IAEb,CACE5gC,GAAI,GACJnD,MAAO,iCACPwI,KAAMg7B,GACNtzB,UAAW8zB,IAEb,CACE7gC,GAAI,GACJnD,MAAO,mDACPwI,KAAM+6B,GACNrzB,UAAW+zB,IAEb,CACE9gC,GAAI,GACJnD,MAAO,2BACPwI,KAAMi7B,GACNvzB,UAAWg0B,IAEb,CACE/gC,GAAI,GACJnD,MAAO,2BACPwI,KAAM,SACN5J,SAAU,CACR,CACEuE,GAAI,GACJnD,MAAO,uCACPwI,KAAM46B,GACNlzB,UAAWyyB,IAEb,CACEx/B,GAAI,GACJnD,MAAO,uCACPwI,KAAM66B,GACNnzB,UAAW0yB,IAEb,CACEz/B,GAAI,GACJnD,MAAO,uCACPwI,KAAM86B,GACNpzB,UAAW0yB,MAIjB,CACEz/B,GAAI,EACJnD,MAAO,6CACPwI,KAAM,kBACN5J,SAAU,CACR,CACEuE,GAAI,EACJnD,MAAO,uCACPwI,KAAMs6B,GACN5yB,UAAWi0B,GAEb,CACEhhC,GAAI,EACJnD,MAAO,uCACPwI,KAAMy6B,GACN/yB,UAAWk0B,GAEb,CACEjhC,GAAI,EACJnD,MAAO,uCACPwI,KAAMw6B,GACN9yB,UAAWk0B,Q,gHCjKN,SAASC,IACtB,OACE,sBAAQC,OAAR,CACE/jC,UAAU,0DACVjB,MAAO,CAAEutB,WAAY,uBAFvB,uE,kBCHJ0X,EAAOC,QAAU,CACf9iC,QAHc,UAIdwT,UAAW,UACXuvB,OAAQ,UACR3kC,SAAU,UACV6P,UAAW,4BACX+0B,SAAU,UACVC,MAAO,UACPC,IAAK,CACHH,OAAQ,UACR/iC,QAAS,UACTwT,UAAW,WAEb2vB,MAAO,CACLnc,GAhBY,WAkBdoc,MAAO,CACLC,KAAM,qBAERjiC,WArBc,Y,iICkBVkiC,EAAerlC,kBAAO,KAAV,2EAAGA,CAAH,inBA8BZ,SAAAC,GAAC,MACW,YAAZA,EAAEP,OACFue,cADA,sHAGkB,SAAAhe,GAAC,OAAIA,EAAEC,MAAM+kC,IAAIljC,WACnB,SAAA9B,GAAC,OAAIA,EAAEC,MAAM+kC,IAAIljC,WAMf,SAAA9B,GAAC,OAAIA,EAAEC,MAAM+kC,IAAI1vB,aACf,SAAAtV,GAAC,OAAIA,EAAEC,MAAM+kC,IAAI1vB,gBAIrC,SAAAtV,GAAC,MACW,YAAZA,EAAEP,OACFue,cADA,8JAGW,SAAAhe,GAAC,OAAIA,EAAEC,MAAM+kC,IAAIljC,WACJ,SAAA9B,GAAC,OAAIA,EAAEC,MAAM+kC,IAAIljC,WAM5B,SAAA9B,GAAC,OAAIA,EAAEC,MAAM6B,WAEA,SAAA9B,GAAC,OAAIA,EAAEC,MAAM+kC,IAAIljC,cAI3C,SAAA9B,GAAC,MACW,WAAZA,EAAEP,OACFue,cADA,qIAEW,SAAAhe,GAAC,OAAIA,EAAEC,MAAM+kC,IAAIH,UACJ,SAAA7kC,GAAC,OAAIA,EAAEC,MAAM+kC,IAAIH,UAM5B,SAAA7kC,GAAC,OAAIA,EAAEC,MAAM+kC,IAAIH,UAEJ,SAAA7kC,GAAC,OAAIA,EAAEC,MAAM+kC,IAAIH,aAI3C,SAAA7kC,GAAC,MACU,SAAXA,EAAE0G,MACFsX,cADA,wMAOWhe,EAAEC,MAAM6B,YAYnB,SAAA9B,GAAC,MACU,UAAXA,EAAEmD,MACF6a,cADA,yBA8BS,SAASqnB,EAAT,GAMJ,IAJTrmC,EAIQ,EAJRA,SACAqhB,EAGQ,EAHRA,QAEGnhB,GACK,EAFRomC,WAEQ,oDAOR,OACE,kBAACF,EAAD,iBAAkBlmC,EAAlB,CAAyBmhB,QAASA,IAyBvBrhB,K,qMCnKA,SAASumC,EACtB/lC,GAGwB,IAAD,yDAF+C,GAApEgmC,EAEqB,EAFrBA,UAAW9qB,EAEU,EAFVA,YAAa1P,EAEH,EAFGA,QAAYsc,EAEf,qDADvBme,EACuB,yCACGzjC,IAAM2L,SAAS63B,GADlB,mBAChBE,EADgB,KACTC,EADS,KAGjBtsB,EAAMrX,IAAM8qB,SAEZ8Y,EAAMH,GAER,SAAC9sB,GAAD,OAAc9G,YAAQ8G,EAAK,CAAEiC,SAAU,oBAEvCirB,EAAOrmC,EACX,GAAIgM,YAAGwO,OAAQxa,GAAM,CAAC,IAAD,EACS4G,YAAO5G,EAAekmC,GAA1CxsB,EADW,EACXA,QAASN,EADE,EACFA,OACjBitB,EAAI,UAAM3sB,EAAN,YAAiBC,YAAcP,IAZd,MAeGktB,YAAQD,EAAMD,EAAP,YAAC,eAC7Bte,GAD4B,IAE/Bye,iBAAkB,EAClBj0B,mBAAmB,EACnBH,UAAU,EACVq0B,UAAW,SAAAl1B,GACL4J,GACFA,EAAY5J,IAGhB9F,QAAS,SAAAb,GACHa,GACFA,EAAQb,OAZN2G,EAfe,EAefA,KAAS/G,EAfM,wBAgCjBmW,EAAU,SAACslB,GAGf,OAFAG,GAAS,SAAA1wB,GAAI,kCAAUA,GAAV,OAAmBuwB,QAAnB,IAAmBA,OAAnB,EAAmBA,EAAW5sB,WAEpC6C,QAAQ4Q,QAAa,KAO9B,YAJaznB,IAATkM,IACFuI,EAAItL,QAAU+C,GAGT,2BACF/G,GADL,IAEEsW,QAAStW,EAAKk8B,aACdn1B,KAAMuI,EAAItL,QACVmS,Y,aClEIzc,EAAYC,EAAQ,IAApBD,QA+BD,SAASm8B,IAAgB,IAAD,EACDsG,YAAO,8BAA8B,SAAAvtB,GAAG,OAClE9G,YAAQ8G,EAAK,CACXwtB,OAAQ,OACR9rB,KAAM,CACJ+rB,eAAgB,gBAChBC,OAAQ,UACRC,GAAI,iBANFx1B,EADqB,EACrBA,KAASy1B,EADY,wBAY7B,OAAO,2BACFA,GADL,IAEEz1B,KAAMrN,EAAQoQ,IAAMhP,YAAO,GAAI,IAAzBpB,CAA8BqN,KAwBjC,SAAS01B,EAAatnC,GAA0B,IAC7C4R,EArBH,WAGkB,IAAD,yDAAJ,GAAI,IAFtBiO,gBAEsB,MAFX,OAEW,EADnBymB,EACmB,8BACSD,EAC7B,wCACA,CACEC,UAAU,aAAGzmB,YAAaymB,KAJR,IACd10B,YADc,MACP,GADO,EACA/G,EADA,wBAQtB,OAAO,2BACFA,GADL,IAEE+G,KAAMrN,EACJsE,aAAI,SAAC/C,GAAD,mBAAC,eAAoBA,GAArB,IAAwBzB,GAAIyB,EAAEyhC,cAClC5hC,YAAO,GAAI,IAFPpB,CAGJqN,KAKa41B,GAAT51B,KACR,OACE,kBAAC,IAAW5R,EACT4R,EAAK/I,KAAI,SAAA/C,GAAC,OACT,kBAAC,IAAOgD,OAAR,CAAexI,IAAKwF,EAAEzB,GAAIZ,MAAOqC,EAAEzB,IAChCyB,EAAE2hC,c,6HCpCAx6B,EAAW,I,iDA9CtBuhB,SAAW,G,KACX3S,WACE6rB,mKAAYC,oBACZ,0E,qDAGA,OAAOD,I,kCAGP,OAAOA,mKAAYE,qBAAuB,K,+BAG1C,MAAM,QAAN,OACEF,mKAAYG,iBAAmB,qF,6BAIjC,MAAM,GAAN,OAAU71B,OAAOrD,SAASm5B,SAA1B,aAAuC91B,OAAOrD,SAASo5B,MAAvD,OAA8Dl8B,KAAK4K,YAAnE,S,iCAGA,MAAM,MAAN,OAAa5K,KAAK4K,e,qCAGlB,OACEixB,mKAAYM,0BACXn8B,KAAK0gB,SAAW,2B,gCAInB,MAAOmb,qD,gCAGP,QACoB,qBAAX11B,SACPA,OAAOiB,WACPjB,OAAOiB,SAAS4Z,iB,gCAGJ2B,GACd3iB,KAAK2iB,SAAWA,GAAY,K,kCAEZ/U,GAChB5N,KAAKgQ,WAAapC,M,MAuBPxM,O,gCChEf,0KAAO,IAAM/K,EAAuB,eAACI,EAAD,uDAAiB,EAAG2lC,EAApB,6CAA0C,CAC5EC,SAAU,CACRC,GAAI,CAAE5K,KAAMj7B,GACZ8lC,GAAI,CAAE7K,KAAMj7B,IAEd+lC,WAAY,CACVF,GAAI,CAAE5K,KAAM0K,GAAW,GAAK3lC,GAC5B8lC,GAAI,CAAE7K,KAAM0K,GAAW,GAAK3lC,MAInBW,EAAmB,CAC9BoF,UAAW,SAAC5E,GACV,OAAKA,EAGE,UAAGA,GAAQiF,QAAQ,wBAAyB,KAF1CjF,GAIXgF,OAAQ,SAAChF,GAAD,OACLA,EAAQA,EAAMiF,QAAQ,cAAe,IAAMjF,IAGnCN,EAAW,CACtBkF,UAAW,SAAC5E,GACV,OAAKA,EAGE,YAAKA,GAAQiF,QAAQ,wBAAyB,KAF5CjF,GAIXgF,OAAQ,SAAChF,GAAD,OACLA,EAAQA,EAAMiF,QAAQ,cAAe,IAAMjF,IAGnCJ,EAAU,CAErB+E,IAAK,IACLC,UAAW,SAAC5E,GACV,OAAKA,EAGC,GAAN,OAAUA,EAAV,KAFSA,GAIXgF,OAAQ,SAAChF,GAAD,OACLA,EAAQA,EAAMiF,QAAQ,IAAK,IAAMjF,IAGzB6kC,EAAQ,CACnBC,SAAU,CAAEA,UAAU,EAAMl9B,QAAS,kCACrCm9B,OAAQ,CACND,UAAU,EACV/gC,KAAM,SACN6D,QAAS,iCACT2tB,UAJM,SAIIv1B,GACR,OAAKA,EAGEwa,OAAOxa,GAFLA,IAKbglC,QAAS,CACPF,UAAU,EACVl9B,QAAS,8EACTq9B,QAAS,IAAI//B,OAAO,eAEtBggC,SAAU,CACRJ,UAAU,EACVl9B,QAAS,kDACTq9B,QAAS,IAAI//B,OAAO,iB,seCvChBpE,EAAYC,EAAQ,IAApBD,QAED,SAAS4B,EAA4CzB,GAIxD,IACM3E,EAAsC2E,EAAtC3E,KAAMmG,EAAgCxB,EAAhCwB,SADb,EAC6CxB,EAAtBD,oBADvB,MACsC,GADtC,IAG6B3B,IAAM2L,SAClC9I,YAAOlB,EAAc,CAAC,WAAY1E,IAJnC,mBAGMqG,EAHN,KAGewiC,EAHf,KAYD,MAAO,CAAExiC,UAASC,SALD,SAACpE,GAChB2mC,EAAW3mC,GACXiE,EAAS,2BAAKnG,GAAN,IAAYqG,QAASnE,OAM1B,IAAM4mC,EAAqB,WAAO,IAAD,EACZj0B,cAAnBurB,EAD+B,oBAGtC,MAAO,CACLnf,QAAS,iBAAO,IAChBpP,KAAM,CACJvD,QAAS8xB,EACTvqB,MAAOhL,YAAOu1B,GACdvf,WAAYK,KAAKC,MAAMtW,YAAOu1B,GAAmB,IAAM,GAEzDhf,SAAS,IAIA+e,EAAwB,WACnC,OAAOtrB,eAGIE,EAAoB,SAACpQ,GAA6C,IAAD,EAC3BokC,YAC/CpkC,GADM2Q,EADoE,EACpEA,eAAgBG,EADoD,EACpDA,YAAgB3K,EADoC,kDAK5CoL,cAL4C,mBAKrEirB,EALqE,KAK3D6H,EAL2D,KA8CtEC,EAAe,WACnB,IAAMC,EAAO1kC,EACX2kC,IACAvjC,YAAO,EAAG,IACV6C,IACA2gC,IACAC,aAAK,SAACn9B,EAAQC,GAAT,OAAoBD,EAAIC,KAC7BvC,IANWpF,CAOXiR,GAEFH,GAAe,SAAAU,GAAI,kCAAUA,GAAV,oDAAwBkzB,GAAS,QACpDF,EAAY,2BAAD,OAAQE,KAGfI,EAAkB,SAACC,GACvBjyB,YAAQ,CACNnW,MAAO,+DACPmN,QAAS,qHACTxO,KAAM,WACJwV,GAAe,SAAAU,GAAI,OAAIwzB,YAAK,CAACD,GAAYvzB,MAErCmrB,IAAaoI,GACfP,EACExkC,EACE4kC,IACAtjC,aAAO,SAACvF,GAAD,OAAiBA,IAAQgpC,KAChC3/B,IAHFpF,CAIEiR,QAoCZ,OAAO,2BACF3K,GADL,IAEEq2B,WACA1rB,cACAuzB,cACA1zB,iBACA8rB,cAlBoB,SACpBzY,EAIA8gB,IAE2B,QAAXA,EAAmBR,EAAeK,GAE1C3gB,IAUR0Y,gBAzGsB,SAAC1F,GACvBqN,EAAYrN,IAyGZ2F,cAtGoB,SAAC1W,GACrB,IAAM8e,EAAc9/B,YAAK6L,GAEzBH,EACE9Q,EACEgF,IACAV,aAAI,SAACvI,GAAD,sBAAqBA,EAAMkV,EAAYlV,OAC3C8oC,aAAK,SAACn9B,EAAWC,GACf,IAAMw9B,EAAS/e,EAAMG,QAAQ7e,GACvB09B,EAAShf,EAAMG,QAAQ5e,GAE7B,OAAgB,IAAZw9B,IAA6B,IAAZC,EACZD,EAASC,GAEF,IAAZD,GACM,GAEM,IAAZC,EACK,EAGEF,EAAY3e,QAAQ7e,GACpBw9B,EAAY3e,QAAQ5e,MAIjCvC,IAtBFpF,CAuBEiR,KA4EJwzB,eACAK,kBACA/H,oBAxC0B,SAACgI,GAAD,OAAuB,SACjD/oB,GAEA,IAAMqpB,EAAarpB,EAAI6I,OAAOygB,UAE9Bx0B,GAAe,SAAAU,GAAI,OACjBxR,EACEgF,IACAV,aAAI,SAACvI,GAAD,sBACDA,IAAQgpC,EAAYM,EAAatpC,EAAMyV,EAAKzV,OAE/CqJ,IALFpF,CAMEwR,MAEJgzB,EAAYa,KA2BZ5V,oBAlH0B,SAACpiB,GAC3ByD,GAAe,SAAAU,GAAI,kCAAUA,GAAV,kBAAiBmrB,EAAWtvB,WAqHtCk4B,EAAoB,WAA4C,IAAD,yDAAP,GAAjCtuB,EAAwC,EAAxCA,YAAwC,EAC5B5G,cAD4B,mBACnEurB,EADmE,KAClD4J,EADkD,KAGpEvoB,EAAU,SAACvf,GACf,IAAIoC,EAAKM,cACL8c,EAAO,sBACN0e,GADM,4BAGJl+B,GAHI,IAIPoC,KACAqd,UAAWC,MACXC,aAAcD,MAASza,OAAO,oBAC9B2a,UAAWF,MACXG,aAAcH,MAASza,OAAO,wBAIlC6iC,EAAmBtoB,GAEnBM,IAAMxP,IAAI,0BAA2BkP,GAEjCjG,GACFA,EAAY,2BAAKvZ,GAAN,IAAcoC,SAI7B,MAAO,EAAC,EAAOmd,IAGJwoB,EAAoB,WAA4C,IAAD,yDAAP,GAAjCxuB,EAAwC,EAAxCA,YAAwC,EAC5B5G,cAD4B,mBACnEurB,EADmE,KAClD4J,EADkD,KAGpEvoB,EAAU,SAACvf,GACf,IAAImK,EAAQ+zB,EAAgBle,WAAU,SAAAnc,GAAC,MAAI,UAAGA,EAAEzB,MAAL,UAAiBpC,EAAOoC,OAC/Dod,EAAUS,YACZ9V,EADkB,YAAC,eAGdnK,GAHa,IAIhB4f,UAAWF,MACXG,aAAcH,MAASza,OAAO,sBAEhCi5B,GAGF4J,EAAmBtoB,GACnBM,IAAMxP,IAAI,0BAA2BkP,GAEjCjG,GACFA,KAIJ,MAAO,EAAC,EAAOgG,IAGJyoB,EAAoB,SAAC,GAM3B,IALLr4B,EAKI,EALJA,KACA8a,EAII,EAJJA,SAcA,OATqB,WACnBD,YAAe,CACbC,SAAS,GAAD,OAAKA,EAAL,aAAqB,OAAJ9a,QAAI,IAAJA,OAAA,EAAAA,EAAMrP,OAAQ,GAA/B,YAAqCof,MAASza,OACpD,mBAEFkV,KAAMxK,Q","file":"static/js/main.d554133b.chunk.js","sourcesContent":["import React from 'react'\nimport { ModalProps as AntModalProps } from 'antd/lib/modal'\nimport Modal from '@/components/modal'\nimport Button from '@/components/button'\n\nexport interface ModalProps<T = any>\n  extends Omit<AntModalProps, 'onOk' | 'onCancel'> {\n  item?: T\n  onOk?: (data?: any) => void\n  onCancel: () => void\n  children?: React.ReactNode\n}\n\nfunction TemplateModal<T = any>({\n  onCancel,\n  onOk,\n  item,\n  children,\n  ...props\n}: ModalProps<T>) {\n  const handleOk = () => {\n    if (onOk) {\n      onOk()\n    }\n  }\n  return (\n    <Modal\n      visible\n      onCancel={onCancel}\n      width={650}\n      maskClosable={false}\n      keyboard={false}\n      footer={[\n        <Button\n          key=\"btn-cancel\"\n          color=\"outline\"\n          style={{ minWidth: 80, marginRight: 16 }}\n          onClick={onCancel}>\n          取消\n        </Button>,\n        <Button\n          key=\"btn-save\"\n          color=\"primary\"\n          style={{ minWidth: 80 }}\n          onClick={handleOk}>\n          儲存\n        </Button>,\n      ]}\n      {...props}>\n      {children}\n    </Modal>\n  )\n}\n\nexport { TemplateModal as Modal }\n\nexport default TemplateModal\n","import React from 'react'\nimport cx from 'classnames'\nimport { Card } from 'antd'\nimport { CardProps } from 'antd/lib/card'\nimport { FontColorsOutlined } from '@ant-design/icons'\nimport styled from 'styled-components'\nimport { useReportPreview } from '@/data/useReportTemplate'\n// import { isNil } from '@/utils/webHelper'\n\nconst StyledCard = styled(Card)`\n  &.ant-card {\n    border-radius: 10px;\n    border: none;\n    cursor: move;\n  }\n\n  .ant-card-head {\n    padding-left: 18px;\n    border-bottom: none;\n    color: ${p => p.theme.darkGrey};\n    font-size: 15px;\n    font-weight: 500;\n  }\n\n  &.ant-card-head--hide .ant-card-head {\n    display: none;\n  }\n\n  &.ant-card-body--hide {\n    .ant-card-head {\n      padding-bottom: 16px;\n      border-bottom: 1px dashed #f0f0f0;\n    }\n\n    .ant-card-body {\n      display: none;\n    }\n  }\n\n  &.is--preview .ant-card-head {\n    min-height: auto;\n  }\n\n  &.is--preview .ant-card-head-title {\n    padding-top: 0;\n  }\n\n  &.is--preview .ant-card-body {\n    padding-top: 12px;\n    padding-bottom: 8px;\n  }\n\n  .ant-card-head-title {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    padding-bottom: 0;\n  }\n\n  .ant-card-body {\n    padding-top: 6px;\n    padding-left: 26px;\n    padding-bottom: 20px;\n  }\n`\n\ninterface Props extends CardProps {\n  titleVisible?: boolean\n  bodyVisible?: boolean\n  onEdit?: () => void\n  onDelete?: () => void\n}\n\nfunction SnippetTemplateWrapper({\n  title,\n  children,\n  onDelete,\n  onEdit,\n  titleVisible = false,\n  bodyVisible = true,\n  ...props\n}: Props) {\n  const [isPreview] = useReportPreview()\n\n  return (\n    <StyledCard\n      title={\n        <div className=\"flex items-center\">\n          {!isPreview && <FontColorsOutlined className=\"mr-3\" />}\n          {title || `模版標題 ${isPreview ? '' : '(點鉛筆圖示可進行編輯)'}`}\n        </div>\n      }\n      className={cx({\n        // 'ant-card-head--hide': isNil(title) && !titleVisible,\n        'ant-card-body--hide': !bodyVisible,\n        // 'is--preview': isPreview,\n      })}\n      {...props}>\n      {children}\n    </StyledCard>\n  )\n}\n\nexport default SnippetTemplateWrapper\n","import React from 'react'\nimport { Form } from 'antd'\nimport { Input, TextArea } from '@/components/input'\nimport Checkbox from '@/components/checkbox'\nimport { Modal, ModalProps } from '@/components/snippet-template-modal'\nimport TemplateWrapper from '@/components/snippet-template-wrapper'\nimport { createFormItemLayout } from '@/utils/form'\nimport { ReportTemplateSetting, ReportTemplateProps } from '@/constants/types'\nimport { useUpdateSnippet } from '@/services/reportTemplate'\n\ninterface Setting extends ReportTemplateSetting {\n  defaultValue?: string\n  multipleLine?: boolean\n}\n\nexport default function SnippetTemplateInputText(props: ReportTemplateProps) {\n  const { editModalVisible, handleEditModalVisible, onUpdate, item } = props\n\n  const { setting, handleOk } = useUpdateSnippet<Setting>({ item, onUpdate })\n\n  const inputProps = {\n    bordered: false,\n    className: 'w-2/3',\n    placeholder: setting.tooltip,\n    defaultValue: setting.defaultValue,\n  }\n\n  return (\n    <>\n      {editModalVisible && (\n        <InputTextModal\n          item={setting}\n          onCancel={handleEditModalVisible}\n          onOk={handleOk}\n        />\n      )}\n      <TemplateWrapper title={setting.text || ''}>\n        <Form.Item noStyle name={['data', item.id]}>\n          {setting.multipleLine ? (\n            <TextArea {...inputProps} autoSize={{ minRows: 3 }} />\n          ) : (\n            <Input {...inputProps} />\n          )}\n        </Form.Item>\n      </TemplateWrapper>\n    </>\n  )\n}\n\nfunction InputTextModal({\n  onOk,\n  onCancel,\n  item,\n  ...props\n}: ModalProps<Setting>) {\n  const [form] = Form.useForm()\n\n  const handleOk = () => {\n    form.validateFields().then(values => {\n      if (onOk) {\n        onOk(values)\n      }\n      onCancel()\n    })\n  }\n\n  return (\n    <Modal<Setting>\n      {...props}\n      title={\n        <>\n          <div>\n            Text\n            <div className=\"inline ml-2 text-sm text-gray-600\">\n              typically used for description something.\n            </div>\n          </div>\n        </>\n      }\n      onCancel={onCancel}\n      onOk={handleOk}>\n      <Form\n        {...createFormItemLayout(5, 16)}\n        labelAlign=\"left\"\n        form={form}\n        initialValues={item}>\n        <Form.Item label=\"Text\" name=\"text\">\n          <Input />\n        </Form.Item>\n        <Form.Item label=\"Default Value\" name=\"defaultValue\">\n          <Input />\n        </Form.Item>\n        <Form.Item label=\"Tooltip\" name=\"tooltip\">\n          <Input />\n        </Form.Item>\n        <Form.Item\n          label=\"Multiple Lines\"\n          name=\"multipleLine\"\n          valuePropName=\"checked\">\n          <Checkbox />\n        </Form.Item>\n      </Form>\n    </Modal>\n  )\n}\n","import React from 'react'\nimport { InputNumber } from 'antd'\nimport { InputNumberProps } from 'antd/lib/input-number'\nimport styled from 'styled-components'\nimport { RefProps } from '@/constants/types'\nimport { percent, currency, thosandSeprartor } from '@/utils/form'\n\ntype Props = RefProps & InputNumberProps & { bordered?: boolean }\n\nconst StyledInputNumber = styled(InputNumber).attrs({\n  min: 0 as any, // dont know why error\n})<Props>`\n  &.ant-input-number {\n    border-color: #d9d9d9;\n  }\n\n  &.ant-input-number-focused,\n  &.ant-input-number:focus,\n  &.ant-input-number:hover {\n    border-color: ${p => p.theme.primary};\n  }\n\n  &.ant-input-number-focused:not(.ant-input-number-borderless),\n  &.ant-input-number:focus:not(.ant-input-number-borderless) {\n    box-shadow: 0 0 0 1px ${p => p.theme.primary};\n  }\n\n  &.ant-input-number-borderless,\n  &.ant-input-number-borderless:hover,\n  &.ant-input-number-borderless:focus,\n  &.ant-input-number-borderless-focused,\n  &.ant-input-number-borderless-disabled,\n  &.ant-input-number-borderless[disabled] {\n    border: none;\n    border-bottom: 1px solid #d9d9d9;\n  }\n`\n\nexport const ThousandSeprartorInput = React.forwardRef<\n  typeof InputNumber,\n  Props\n>(({ ...props }, ref) => (\n  <StyledInputNumber forwardRef={ref} {...props} {...thosandSeprartor} />\n))\n\nexport const CurrencyInput = React.forwardRef<typeof InputNumber, Props>(\n  ({ ...props }, ref) => (\n    <StyledInputNumber forwardRef={ref} {...props} {...currency} />\n  )\n)\n\nexport const PercentInput = React.forwardRef<typeof InputNumber, Props>(\n  ({ ...props }, ref) => (\n    <StyledInputNumber forwardRef={ref} {...props} {...percent} />\n  )\n)\n\nThousandSeprartorInput.displayName = 'ThousandSeprartorInput'\n\nCurrencyInput.displayName = 'CurrencyInput'\n\nPercentInput.displayName = 'PercentInput'\n\nexport { StyledInputNumber as InputNumber }\n\nexport default StyledInputNumber\n","import React from 'react'\nimport { Form } from 'antd'\nimport Input from '@/components/input'\nimport InputNumber from '@/components/input-number'\nimport { Modal, ModalProps } from '@/components/snippet-template-modal'\nimport TemplateWrapper from '@/components/snippet-template-wrapper'\nimport { createFormItemLayout } from '@/utils/form'\nimport { ReportTemplateSetting, ReportTemplateProps } from '@/constants/types'\nimport { useUpdateSnippet } from '@/services/reportTemplate'\nimport { getNumberFromString } from '@/utils/webHelper'\n\ninterface Setting extends ReportTemplateSetting {\n  defaultValue?: number\n  max?: number\n  min?: number\n  units?: string\n}\n\nexport default function SnippetTemplateInputNumber(props: ReportTemplateProps) {\n  const { editModalVisible, handleEditModalVisible, item, onUpdate } = props\n\n  const { setting, handleOk } = useUpdateSnippet<Setting>({ item, onUpdate })\n\n  return (\n    <>\n      {editModalVisible && (\n        <InputNumberModal\n          item={setting}\n          onCancel={handleEditModalVisible}\n          onOk={handleOk}\n        />\n      )}\n      <TemplateWrapper title={setting.text || ''}>\n        <Form.Item noStyle name={['data', item.id]}>\n          <InputNumber\n            style={{ width: '33.333333%' }}\n            className=\"ant-input-number-borderless\"\n            defaultValue={setting.defaultValue}\n            min={setting.min}\n            max={setting.max}\n            formatter={(value: any) => {\n              if (!setting.units) {\n                return value\n              }\n              if (value && value.includes(setting.units)) {\n                return `${getNumberFromString(value)} ${setting.units}`\n              }\n              return `${value} ${setting.units}`\n            }}\n            parser={(value: any) =>\n              setting.units\n                ? value.replace(new RegExp(`/s${setting.units}/g`), '')\n                : value\n            }\n            placeholder={setting.tooltip}\n          />\n        </Form.Item>\n      </TemplateWrapper>\n    </>\n  )\n}\n\nfunction InputNumberModal({ onOk, onCancel, item, ...props }: ModalProps) {\n  const [form] = Form.useForm()\n\n  const handleOk = () => {\n    form.validateFields().then(values => {\n      if (onOk) {\n        onOk(values)\n      }\n      onCancel()\n    })\n  }\n\n  return (\n    <Modal\n      {...props}\n      title={\n        <>\n          <div>\n            Number\n            <div className=\"inline ml-2 text-sm text-gray-600\">\n              typically used for input number.\n            </div>\n          </div>\n        </>\n      }\n      onOk={handleOk}\n      onCancel={onCancel}>\n      <Form\n        {...createFormItemLayout(5, 16)}\n        labelAlign=\"left\"\n        form={form}\n        initialValues={item}>\n        <Form.Item label=\"Text\" name=\"text\">\n          <Input />\n        </Form.Item>\n        <Form.Item label=\"Default Value\" name=\"defaultValue\">\n          <Input />\n        </Form.Item>\n        <Form.Item label=\"Tooltip\" name=\"tooltip\">\n          <Input />\n        </Form.Item>\n        <Form.Item label=\"Minimum Value\" name=\"min\">\n          <InputNumber />\n        </Form.Item>\n        <Form.Item label=\"Maximum Value\" name=\"max\">\n          <InputNumber />\n        </Form.Item>\n        <Form.Item label=\"Units\" name=\"units\">\n          <Input />\n        </Form.Item>\n      </Form>\n    </Modal>\n  )\n}\n","// tslint:disable: quotemark no-implicit-dependencies no-shadowed-variable no-var-requires\nimport React from 'react'\nimport { TableProps } from 'antd/lib/table'\nimport { FormInstance } from 'antd/lib/form'\nimport Table from '@/components/table'\n\ntype EditableTableProps<T> = Omit<TableProps<T>, 'onChange'> & {\n  value?: T[]\n  form: FormInstance\n  onChange?(changedValue: T[] | null): void\n  onRowAdd: (form: FormInstance) => any\n  onRowDelete: (value: { id: React.Key; form: FormInstance }) => any\n}\n\nexport default function EditableTable<T = any>({\n  form,\n  value,\n  onChange,\n  onRowAdd,\n  onRowDelete,\n  ...props\n}: EditableTableProps<T>) {\n  const triggerChange = (changedValue: T[]) => {\n    if (onChange) {\n      onChange(changedValue)\n    }\n  }\n\n  const handleAdd = () => {\n    triggerChange(onRowAdd(form))\n  }\n\n  const handleDelete = (id: string) => {\n    triggerChange(onRowDelete({ id, form }))\n  }\n\n  return (\n    <Table\n      {...props}\n      rowKey=\"id\"\n      pagination={false}\n      size=\"small\"\n      dataSource={value as any}\n      onAddRowClick={handleAdd}\n      onDeleteRowClick={handleDelete}\n      editable={true}\n    />\n  )\n}\n","import React from 'react'\nimport { Form } from 'antd'\nimport { ColumnProps } from 'antd/lib/table'\nimport { FormInstance } from 'antd/lib/form'\nimport { concat, __, pathOr, invoker, filter } from 'ramda'\nimport Input from '@/components/input'\nimport Checkbox from '@/components/checkbox'\nimport EditableTable from '@/components/editable-table'\nimport { uuid } from '@/utils/webHelper'\nimport { createFormItemLayout } from '@/utils/form'\nimport { ReportTemplateSetting } from '@/constants/types'\nimport { Modal, ModalProps } from './snippet-template-modal'\nconst { compose } = require('ramda')\n\nexport interface Setting extends ReportTemplateSetting {\n  options?: Option[]\n}\n\nexport type Option = {\n  id: React.Key\n  text?: string\n  selected?: boolean\n  freetext?: boolean\n}\n\nexport const defaultValue: Setting = {\n  options: [\n    {\n      id: uuid(),\n      text: '預設選項 1',\n      selected: true,\n      freetext: false,\n    },\n    {\n      id: uuid(),\n      text: '預設選項 2',\n      selected: true,\n      freetext: false,\n    },\n    {\n      id: uuid(),\n      text: '預設選項 3',\n      selected: true,\n      freetext: false,\n    },\n  ],\n}\n\ninterface Props extends ModalProps {\n  freetextVisible?: boolean\n}\n\nexport function SnippetTemplateSelectionModal({\n  onCancel,\n  onOk,\n  item,\n  freetextVisible = true,\n  ...props\n}: Props) {\n  const [form] = Form.useForm()\n\n  const handleOk = () => {\n    form.validateFields().then(values => {\n      if (onOk) {\n        onOk(values)\n      }\n      onCancel()\n    })\n  }\n\n  const handleRowAdd = (form: FormInstance) => {\n    return compose(\n      concat(__, [\n        {\n          id: uuid(),\n          text: undefined,\n          selected: true,\n          freetext: false,\n        },\n      ]),\n      pathOr([], ['options']),\n      invoker(0, 'getFieldsValue')()\n    )(form)\n  }\n\n  const handleRowDelete = ({\n    id,\n    form,\n  }: {\n    id: React.Key\n    form: FormInstance\n  }) => {\n    return compose(\n      filter((x: any) => x.id !== id),\n      pathOr([], ['options']),\n      invoker(0, 'getFieldsValue')()\n    )(form)\n  }\n\n  const columns: ColumnProps<Option>[] = [\n    {\n      title: '選項名稱',\n      render: (v, r, idx) => (\n        <Form.Item noStyle name={['options', idx, 'text']}>\n          <Input />\n        </Form.Item>\n      ),\n    },\n    {\n      title: '是否可選',\n      align: 'center',\n      render: (v, r, idx) => (\n        <Form.Item\n          noStyle\n          name={['options', idx, 'selected']}\n          valuePropName=\"checked\">\n          <Checkbox />\n        </Form.Item>\n      ),\n    },\n    ...((freetextVisible\n      ? [\n          {\n            title: '是否可輸入',\n            align: 'center',\n            render: (v, r, idx) => (\n              <Form.Item\n                noStyle\n                name={['options', idx, 'freetext']}\n                valuePropName=\"checked\">\n                <Checkbox />\n              </Form.Item>\n            ),\n          },\n        ]\n      : []) as ColumnProps<Option>[]),\n  ]\n\n  return (\n    <Modal\n      {...props}\n      title={\n        <>\n          <div>Single Selection List</div>\n          <div className=\"mt-1 text-sm text-gray-600\">\n            Typically used for shorter lists so that all responses are visible\n            as radio buttons. Only allow a single selection.\n          </div>\n        </>\n      }\n      onCancel={onCancel}\n      onOk={handleOk}>\n      <Form\n        {...createFormItemLayout(3, 16)}\n        labelAlign=\"left\"\n        form={form}\n        initialValues={item}>\n        <Form.Item label=\"Text\" name=\"text\">\n          <Input />\n        </Form.Item>\n        <Form.Item label=\"Tooltip\" name=\"tooltip\">\n          <Input />\n        </Form.Item>\n        <Form.Item label=\"Options\" />\n        <Form.Item noStyle name=\"options\">\n          <EditableTable\n            columns={columns}\n            form={form}\n            onRowAdd={handleRowAdd}\n            onRowDelete={handleRowDelete}\n          />\n        </Form.Item>\n      </Form>\n    </Modal>\n  )\n}\n","import React from 'react'\nimport { Form } from 'antd'\nimport cx from 'classnames'\nimport { pathOr } from 'ramda'\nimport { Checkbox, CheckboxGroup } from '@/components/checkbox'\nimport Input from '@/components/input'\nimport TemplateWrapper from '@/components/snippet-template-wrapper'\nimport {\n  SnippetTemplateSelectionModal,\n  Setting,\n  Option,\n  defaultValue,\n} from '@/components/snippet-template-selection-modal'\nimport { mapIndexed } from '@/utils/webHelper'\nimport { ReportTemplateProps } from '@/constants/types'\nimport { useUpdateSnippet } from '@/services/reportTemplate'\nconst { compose } = require('ramda')\n\nfunction SnippetTemplateMultipleSelection(props: ReportTemplateProps) {\n  const { item, editModalVisible, handleEditModalVisible, onUpdate } = props\n\n  const { setting, handleOk } = useUpdateSnippet<Setting>({\n    item,\n    onUpdate,\n    defaultValue,\n  })\n\n  return (\n    <>\n      {editModalVisible && (\n        <SnippetTemplateSelectionModal\n          item={setting}\n          onCancel={handleEditModalVisible}\n          onOk={handleOk}\n          title={\n            <>\n              <div>Multiple Selection List</div>\n              <div className=\"mt-1 text-sm text-gray-600\">\n                typically used for shorter lists so that all responses are\n                visible as checkboxes. Allows Multiple selections.\n              </div>\n            </>\n          }\n        />\n      )}\n      <TemplateWrapper\n        title={setting.text || ''}\n        bodyStyle={{ paddingLeft: 36 }}>\n        <Form.Item noStyle name={['data', item.id]}>\n          <CheckboxGroup>\n            {compose(\n              mapIndexed((x: Option, idx: number) => (\n                <Checkbox\n                  key={x.id}\n                  className={cx('block ml-0', { 'mt-1': idx > 0 })}\n                  defaultChecked={false}\n                  value={`${idx}`}>\n                  {x.text}\n                  {x.freetext && (\n                    <Input\n                      bordered={false}\n                      size=\"small\"\n                      placeholder=\"輸入備註\"\n                      className=\"ml-4 w-full\"\n                    />\n                  )}\n                </Checkbox>\n              )),\n              pathOr([], ['options'])\n            )(setting)}\n          </CheckboxGroup>\n        </Form.Item>\n      </TemplateWrapper>\n    </>\n  )\n}\n\nexport default SnippetTemplateMultipleSelection\n","import React from 'react'\nimport cx from 'classnames'\nimport { Form } from 'antd'\nimport { pathOr } from 'ramda'\nimport Radio from '@/components/radio'\nimport Input from '@/components/input'\nimport TemplateWrapper from '@/components/snippet-template-wrapper'\nimport {\n  SnippetTemplateSelectionModal,\n  Setting,\n  Option,\n  defaultValue,\n} from '@/components/snippet-template-selection-modal'\nimport { mapIndexed } from '@/utils/webHelper'\nimport { ReportTemplateProps } from '@/constants/types'\nimport { useUpdateSnippet } from '@/services/reportTemplate'\nconst { compose } = require('ramda')\n\nfunction SnippetTemplateSingleSelection(props: ReportTemplateProps) {\n  const { item, editModalVisible, handleEditModalVisible, onUpdate } = props\n\n  const { setting, handleOk } = useUpdateSnippet<Setting>({\n    item,\n    onUpdate,\n    defaultValue,\n  })\n\n  return (\n    <>\n      {editModalVisible && (\n        <SnippetTemplateSelectionModal\n          item={setting}\n          onCancel={handleEditModalVisible}\n          onOk={handleOk}\n        />\n      )}\n      <TemplateWrapper\n        title={setting.text || ''}\n        bodyStyle={{ paddingLeft: 36 }}>\n        <Form.Item noStyle name={['data', item.id]}>\n          <Radio.Group>\n            {compose(\n              mapIndexed((x: Option, idx: number) => (\n                <Radio\n                  key={x.id}\n                  className={cx('block', { 'mt-1': idx > 0 })}\n                  defaultChecked={false}\n                  value={`${idx}`}>\n                  {x.text}\n                  {x.freetext && (\n                    <Input\n                      size=\"small\"\n                      bordered={false}\n                      placeholder=\"輸入備註\"\n                      className=\"ml-3 w-full\"\n                    />\n                  )}\n                </Radio>\n              )),\n              pathOr([], ['options'])\n            )(setting)}\n          </Radio.Group>\n        </Form.Item>\n      </TemplateWrapper>\n    </>\n  )\n}\n\nexport default SnippetTemplateSingleSelection\n","import React from 'react'\nimport { Form } from 'antd'\nimport Input from '@/components/input'\nimport DatePicker from '@/components/datepicker'\nimport { Modal, ModalProps } from '@/components/snippet-template-modal'\nimport TemplateWrapper from '@/components/snippet-template-wrapper'\nimport { createFormItemLayout } from '@/utils/form'\nimport { ReportTemplateProps } from '@/constants/types'\nimport { useUpdateSnippet } from '@/services/reportTemplate'\n\ntype Setting = {\n  text?: string\n  defaultValue?: moment.Moment\n  tooltip?: string\n}\n\nexport default function SnippetTemplateDate(props: ReportTemplateProps) {\n  const { editModalVisible, handleEditModalVisible, item, onUpdate } = props\n\n  const { setting, handleOk } = useUpdateSnippet<Setting>({ item, onUpdate })\n\n  return (\n    <>\n      {editModalVisible && (\n        <InputDateModal\n          item={setting}\n          onCancel={handleEditModalVisible}\n          onOk={handleOk}\n        />\n      )}\n      <TemplateWrapper title={setting.text || ''}>\n        <Form.Item noStyle name={['data', item.id]}>\n          <DatePicker\n            bordered={false}\n            className=\"w-1/3\"\n            placeholder={setting.tooltip}\n            defaultValue={setting.defaultValue}\n          />\n        </Form.Item>\n      </TemplateWrapper>\n    </>\n  )\n}\n\nfunction InputDateModal({\n  onOk,\n  onCancel,\n  item,\n  ...props\n}: ModalProps<Setting>) {\n  const [form] = Form.useForm()\n\n  const handleOk = () => {\n    form.validateFields().then(values => {\n      if (onOk) {\n        onOk(values)\n      }\n      onCancel()\n    })\n  }\n\n  return (\n    <Modal<Setting>\n      {...props}\n      title={\n        <>\n          <div>\n            Date\n            <div className=\"inline ml-2 text-sm text-gray-600\">\n              typically used for target date.\n            </div>\n          </div>\n        </>\n      }\n      onCancel={onCancel}\n      onOk={handleOk}>\n      <Form\n        {...createFormItemLayout(5, 16)}\n        labelAlign=\"left\"\n        form={form}\n        initialValues={item}>\n        <Form.Item label=\"Text\" name=\"text\">\n          <Input />\n        </Form.Item>\n        <Form.Item label=\"Default Value\" name=\"defaultValue\">\n          <DatePicker allowClear picker=\"date\" className=\"w-full\" />\n        </Form.Item>\n        <Form.Item label=\"Tooltip\" name=\"tooltip\">\n          <Input />\n        </Form.Item>\n      </Form>\n    </Modal>\n  )\n}\n","import React from 'react'\nimport { Form } from 'antd'\nimport Input from '@/components/input'\nimport { TimePicker } from '@/components/datepicker'\nimport { Modal, ModalProps } from '@/components/snippet-template-modal'\nimport TemplateWrapper from '@/components/snippet-template-wrapper'\nimport { createFormItemLayout } from '@/utils/form'\nimport { ReportTemplateSetting, ReportTemplateProps } from '@/constants/types'\nimport { useUpdateSnippet } from '@/services/reportTemplate'\n\ninterface Setting extends ReportTemplateSetting {\n  defaultValue?: moment.Moment\n}\n\nexport default function ReportTemplateTime(props: ReportTemplateProps) {\n  const { editModalVisible, handleEditModalVisible, item, onUpdate } = props\n\n  const { setting, handleOk } = useUpdateSnippet<Setting>({ item, onUpdate })\n\n  return (\n    <>\n      {editModalVisible && (\n        <InputTimeModal\n          item={setting}\n          onCancel={handleEditModalVisible}\n          onOk={handleOk}\n        />\n      )}\n      <TemplateWrapper title={setting.text || ''}>\n        <Form.Item noStyle name={['data', item.id]}>\n          <TimePicker\n            bordered={false}\n            className=\"w-1/3\"\n            placeholder={setting.tooltip}\n            defaultValue={setting.defaultValue}\n          />\n        </Form.Item>\n      </TemplateWrapper>\n    </>\n  )\n}\n\nfunction InputTimeModal({\n  onOk,\n  onCancel,\n  item,\n  ...props\n}: ModalProps<Setting>) {\n  const [form] = Form.useForm()\n\n  const handleOk = () => {\n    form.validateFields().then(values => {\n      if (onOk) {\n        onOk(values)\n      }\n      onCancel()\n    })\n  }\n\n  return (\n    <Modal<Setting>\n      {...props}\n      title={\n        <>\n          <div>\n            Time\n            <div className=\"inline ml-2 text-sm text-gray-600\">\n              typically used for target time.\n            </div>\n          </div>\n        </>\n      }\n      onCancel={onCancel}\n      onOk={handleOk}>\n      <Form\n        {...createFormItemLayout(5, 16)}\n        labelAlign=\"left\"\n        form={form}\n        initialValues={item}>\n        <Form.Item label=\"Text\" name=\"text\">\n          <Input />\n        </Form.Item>\n        <Form.Item label=\"Default Value\" name=\"defaultValue\">\n          <TimePicker allowClear format=\"HH:mm\" className=\"w-full\" />\n        </Form.Item>\n        <Form.Item label=\"Tooltip\" name=\"tooltip\">\n          <Input />\n        </Form.Item>\n      </Form>\n    </Modal>\n  )\n}\n","import React from 'react'\nimport { pathOr, map } from 'ramda'\nimport { Form } from 'antd'\nimport Select from '@/components/select'\nimport TemplateWrapper from '@/components/snippet-template-wrapper'\nimport {\n  SnippetTemplateSelectionModal,\n  Option,\n  defaultValue,\n} from '@/components/snippet-template-selection-modal'\nimport { ReportTemplateSetting, ReportTemplateProps } from '@/constants/types'\nimport { useUpdateSnippet } from '@/services/reportTemplate'\nconst { compose } = require('ramda')\n\ninterface Setting extends ReportTemplateSetting {\n  options?: Option[]\n  selectionType?: 'single' | 'multiple'\n}\n\nexport default function SnippetTemplateSelect(props: ReportTemplateProps) {\n  const { item, editModalVisible, handleEditModalVisible, onUpdate } = props\n\n  const { setting, handleOk } = useUpdateSnippet<Setting>({\n    item,\n    onUpdate,\n    defaultValue,\n  })\n\n  return (\n    <>\n      {editModalVisible && (\n        <SnippetTemplateSelectionModal\n          item={setting}\n          onCancel={handleEditModalVisible}\n          onOk={handleOk}\n          freetextVisible={false}\n          title={\n            <>\n              <div>Drop-down List</div>\n              <div className=\"mt-1 text-sm text-gray-600\">\n                typically used for lists of greater than 6 or 7 options.\n              </div>\n            </>\n          }\n        />\n      )}\n      <TemplateWrapper title={setting.text || ''}>\n        <Form.Item noStyle name={['data', item.id]}>\n          <Select\n            allowClear\n            bordered={false}\n            className=\"w-2/3\"\n            placeholder={setting.tooltip}>\n            {compose(\n              map((x: Option) => (\n                <Select.Option key={x.id} value={x.text || ''}>\n                  {x.text || ''}\n                </Select.Option>\n              )),\n              pathOr([], ['options'])\n            )(setting)}\n          </Select>\n        </Form.Item>\n      </TemplateWrapper>\n    </>\n  )\n}\n","import React from 'react'\nimport { Form } from 'antd'\nimport Input from '@/components/input'\nimport { Modal, ModalProps } from '@/components/snippet-template-modal'\nimport TemplateWrapper from '@/components/snippet-template-wrapper'\nimport { createFormItemLayout } from '@/utils/form'\nimport { useUpdateSnippet } from '@/services/reportTemplate'\nimport { ReportTemplateSetting, ReportTemplateProps } from '@/constants/types'\n\ninterface Setting extends ReportTemplateSetting {}\n\nexport default function TemplateSectionHeader(props: ReportTemplateProps) {\n  const { item, editModalVisible, handleEditModalVisible, onUpdate } = props\n\n  const { setting, handleOk } = useUpdateSnippet<Setting>({\n    item,\n    onUpdate,\n  })\n\n  return (\n    <>\n      {editModalVisible && (\n        <InputTextModal\n          item={setting}\n          onCancel={handleEditModalVisible}\n          onOk={handleOk}\n        />\n      )}\n      <TemplateWrapper\n        titleVisible\n        bodyVisible={false}\n        title={setting.text}\n        onEdit={handleEditModalVisible}></TemplateWrapper>\n    </>\n  )\n}\n\nfunction InputTextModal({\n  onOk,\n  onCancel,\n  item,\n  ...props\n}: ModalProps<Setting>) {\n  const [form] = Form.useForm()\n\n  const handleOk = () => {\n    form.validateFields().then(values => {\n      if (onOk) {\n        onOk(values)\n      }\n      onCancel()\n    })\n  }\n\n  return (\n    <Modal<Setting>\n      {...props}\n      title={\n        <>\n          <div>\n            Section Header\n            <div className=\"inline ml-2 text-sm text-gray-600\">\n              typically used for section.\n            </div>\n          </div>\n        </>\n      }\n      onCancel={onCancel}\n      onOk={handleOk}>\n      <Form\n        {...createFormItemLayout(5, 16)}\n        labelAlign=\"left\"\n        form={form}\n        initialValues={item}>\n        <Form.Item label=\"Text\" name=\"text\">\n          <Input />\n        </Form.Item>\n        <Form.Item label=\"Tooltip\" name=\"tooltip\">\n          <Input />\n        </Form.Item>\n      </Form>\n    </Modal>\n  )\n}\n","import React from 'react'\n\nfunction SnippetTemplateCloze() {\n  return <div></div>\n}\n\nlet input = `\n  <input\n    class=\"ant-input ant-input-sm ant-input-borderless\"\n    placeholder=\"\"\n    style=\"border: none; border-bottom: 1px solid #38a8a9; width: 70px;\"\n    type=\"text\"\n    value=\"\"\n    data-mce-style=\"border: none; border-bottom: 1px solid #38a8a9; width: 70px;\"\n  >\n`\n\nexport const html = `\n  <div>\n    The specimen is submitted in ${input} parts. \n    Part (A) consists of ${input} piece of liver tissue, \n    labelled ${input} , measuring ${input} cm and weighing ___ gm. \n    There is a solitary / are tumor mass(es), measuring up to ${input} cm, \n    located in ${input} lobe. \n    The cut sections show it is / they are golden yellow and firm. \n    (Foci of hemorrhage and necrosis are noted). \n    The hepatic surgical margin is free of tumor / very close to tumor / involved by tumor, \n    grossly. The remaining liver tissue shows unremarkable / micronodular cirrhosis (all less than 3mm) / macronodular cirrhosis (greater than 3mm). \n    Part (B) consists of ${input} pieces of grayish white soft tissue, labelled ${input} , \n    measuring up to ${input} cm. Representative parts are embedded in ${input} blocks. \n    (Block A~B: cut margin, C~E: tumor, F: non-neoplastic liver)\n  </div>\n`\n\nexport const Component = SnippetTemplateCloze\n\nexport default SnippetTemplateCloze\n","import { map, mergeAll, pathOr, path, keys } from 'ramda'\nimport {\n  CalendarOutlined,\n  ClockCircleOutlined,\n  OrderedListOutlined,\n  UnorderedListOutlined,\n  FontSizeOutlined,\n  DatabaseOutlined,\n  NumberOutlined,\n  BoldOutlined,\n  FontColorsOutlined,\n} from '@ant-design/icons'\nimport { uuid } from '@/utils/webHelper'\nimport TemplateInputText from '@/components/snippet-template-input-text'\nimport TemplateInputNumber from '@/components/snippet-template-input-number'\nimport TemplateMultipleSelection from '@/components/snippet-template-multiple-selection'\nimport TemplateSingleSelection from '@/components/snippet-template-single-selection'\nimport TemplateDate from '@/components/snippet-template-date'\nimport TemplateTime from '@/components/snippet-template-time'\nimport TemplateSelect from '@/components/snippet-template-select'\nimport TempldateSectionHeader from '@/components/snippet-template-section-header'\nimport * as Cloze from '@/components/snippet-template-cloze'\nimport { SnippetProps, ReportTemplate, PhraseTemplate } from '@/constants/types'\nconst { compose } = require('ramda')\n\ninterface SnippetTemplateListItem {\n  id: React.Key\n  type: string\n  name: string\n  Component: React.Component\n  inline: boolean\n}\n\nconst snippetTemplateList = [\n  {\n    id: uuid(),\n    type: 'TemplateSectionHeader',\n    componentType: 'header',\n    name: 'Section Header',\n    inline: false,\n    icon: BoldOutlined,\n    Component: TempldateSectionHeader,\n  },\n  {\n    id: uuid(),\n    type: 'TemplateInputText',\n    name: 'Text',\n    inline: false,\n    icon: FontSizeOutlined,\n    Component: TemplateInputText,\n  },\n  {\n    id: uuid(),\n    type: 'TemplateInputNumber',\n    name: 'Number',\n    inline: false,\n    icon: NumberOutlined,\n    Component: TemplateInputNumber,\n  },\n  {\n    id: uuid(),\n    type: 'TemplateSelect',\n    name: 'Drop-down List',\n    inline: false,\n    icon: DatabaseOutlined,\n    Component: TemplateSelect,\n  },\n  {\n    id: uuid(),\n    type: 'TemplateMultipleSelection',\n    name: 'Multiple Selection List',\n    inline: false,\n    icon: UnorderedListOutlined,\n    Component: TemplateMultipleSelection,\n  },\n  {\n    id: uuid(),\n    type: 'TemplateSingleSelection',\n    name: 'Single Selection List',\n    inline: false,\n    icon: OrderedListOutlined,\n    Component: TemplateSingleSelection,\n  },\n  {\n    id: uuid(),\n    type: 'TemplateDate',\n    name: 'Date',\n    inline: false,\n    icon: CalendarOutlined,\n    Component: TemplateDate,\n  },\n  {\n    id: uuid(),\n    type: 'TemplateTime',\n    name: 'Time',\n    inline: false,\n    icon: ClockCircleOutlined,\n    Component: TemplateTime,\n  },\n  {\n    id: uuid(),\n    type: 'TemplateCloze',\n    name: 'Cloze',\n    inline: true,\n    icon: FontColorsOutlined,\n    html: Cloze.html,\n    Component: Cloze.Component,\n  },\n]\n\nexport const snippetTemplateById = compose(\n  mergeAll,\n  map((x: SnippetTemplateListItem) => ({ [x.type]: x }))\n)(snippetTemplateList)\n\nexport const setComponentByTab = compose(\n  map((x: ReportTemplate) => ({\n    ...x,\n    setting: compose(\n      mergeAll,\n      map((key: string) => ({\n        [key]: compose(\n          map((s: SnippetProps) => ({\n            ...s,\n            Component: path([s.type, 'Component'])(snippetTemplateById),\n          })),\n          pathOr([], ['setting', key])\n        )(x),\n      })),\n      keys,\n      pathOr({}, ['setting'])\n    )(x),\n  })),\n  pathOr([], [])\n)\n\nexport const setComponent = compose(\n  map((x: PhraseTemplate) => ({\n    ...x,\n    setting: compose(\n      map((s: SnippetProps) => ({\n        ...s,\n        Component: path([s.type, 'Component'])(snippetTemplateById),\n      })),\n      pathOr([], ['setting'])\n    )(x),\n  })),\n  pathOr([], [])\n)\n\nexport default snippetTemplateList\n","import dayjs from 'dayjs'\nimport customParseFormat from 'dayjs/plugin/customParseFormat'\nimport weekOfYear from 'dayjs/plugin/weekOfYear'\nimport weekday from 'dayjs/plugin/weekday'\nimport isMoment from 'dayjs/plugin/isMoment'\nimport badMutable from 'dayjs/plugin/badMutable'\nimport localeData from 'dayjs/plugin/localeData'\nimport advancedFormat from 'dayjs/plugin/advancedFormat'\nimport weekYear from 'dayjs/plugin/weekYear'\nimport isSameOrBefore from 'dayjs/plugin/isSameOrBefore'\nimport isSameOrAfter from 'dayjs/plugin/isSameOrAfter'\nimport 'dayjs/locale/zh-tw'\n\ndayjs.extend(isSameOrBefore)\ndayjs.extend(isSameOrAfter)\ndayjs.extend(advancedFormat)\ndayjs.extend(customParseFormat)\ndayjs.extend(weekYear)\ndayjs.extend(weekOfYear)\ndayjs.extend(isMoment)\ndayjs.extend(localeData)\ndayjs.extend(badMutable)\ndayjs.extend(weekday)\n\ndayjs.locale('zh-tw')\n","import * as React from 'react'\n\nexport interface WithChildrenProps {\n  children: React.ReactNode\n}\n\nexport type PackComponentType<\n  T extends WithChildrenProps = WithChildrenProps\n> = React.ElementType<T>\n\nexport function pack(\n  children: React.ReactNode = null,\n  ...components: PackComponentType[]\n) {\n  if (!components.length) {\n    return children as JSX.Element\n  }\n\n  const [Component, ...rest] = components\n\n  if (React.isValidElement(Component)) {\n    return (\n      <Component.type {...Component.props}>\n        {pack(children, ...rest)}\n      </Component.type>\n    )\n  }\n\n  return <Component>{pack(children, ...rest)}</Component>\n}\n\nexport function createPack(...components: any[]) {\n  return function PackComponent({ children }: WithChildrenProps) {\n    return pack(children, ...components)\n  }\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport Button from '@/components/button'\n\ntype ErrorInfo = {\n  componentStack: string\n}\n\ntype FallbackProps = {\n  error?: Error\n  componentStack?: string\n  resetErrorBoundary: () => void\n}\n\ntype ErrorBoundaryProps = {\n  onResetKeysChange?: (\n    prevResetKeys: Array<any> | undefined,\n    resetKeys: Array<any> | undefined\n  ) => void\n  onReset?: (...args: any) => void\n  onError?: (error: Error, componentStack: string) => void\n  resetKeys?: Array<any>\n  FallbackComponent?: React.ComponentType<FallbackProps>\n  fallbackRender?: (props: FallbackProps) => React.ReactElement<any, any> | null\n  fallback?: React.ReactElement<any, any> | null\n}\n\ntype ErrorBoundaryState = {\n  hasError?: boolean\n  error?: Error | null\n  info?: ErrorInfo | null\n}\n\nconst ErrorFallbackWrapper = styled.div`\n  width: 100%;\n  height: 100vh;\n  margin: 0 auto;\n  padding: 50px;\n`\n\nfunction ErrorFallback({\n  error,\n  componentStack,\n  resetErrorBoundary,\n}: FallbackProps) {\n  return (\n    <ErrorFallbackWrapper role=\"alert\">\n      <p className=\"text-xl\">Something went wrong:</p>\n      <pre className=\"text-sm\">{error?.message}</pre>\n      <pre className=\"text-sm\">{componentStack}</pre>\n      <Button onClick={resetErrorBoundary}>Try again</Button>\n    </ErrorFallbackWrapper>\n  )\n}\n\nconst changedArray = (a: any[] | undefined = [], b: any[] | undefined = []) =>\n  a.length !== b.length || a.some((item, index) => !Object.is(item, b[index]))\n\nconst initialState = { error: null, info: null }\nexport default class ErrorBoundary extends React.Component<\n  ErrorBoundaryProps,\n  ErrorBoundaryState\n> {\n  state: ErrorBoundaryState = initialState\n\n  resetErrorBoundary = (...args: any) => {\n    this.props.onReset?.(...args)\n    this.setState(initialState)\n  }\n\n  componentDidCatch(error: Error, info: ErrorInfo) {\n    this.props.onError?.(error, info?.componentStack)\n    this.setState({ error, info })\n  }\n\n  componentDidUpdate(prevProps: ErrorBoundaryProps) {\n    const { error } = this.state\n    const { resetKeys } = this.props\n    if (error !== null && changedArray(prevProps.resetKeys, resetKeys)) {\n      this.props.onResetKeysChange?.(prevProps.resetKeys, resetKeys)\n      this.setState(initialState)\n    }\n  }\n\n  render() {\n    const { error, info } = this.state\n    const {\n      fallbackRender,\n      FallbackComponent = ErrorFallback,\n      fallback,\n    } = this.props\n\n    if (error !== null) {\n      const props = {\n        componentStack: info?.componentStack,\n        error,\n        resetErrorBoundary: this.resetErrorBoundary,\n      }\n      if (React.isValidElement(fallback)) {\n        return fallback\n      } else if (typeof fallbackRender === 'function') {\n        return fallbackRender(props)\n      } else if (FallbackComponent) {\n        return <FallbackComponent {...props} />\n      } else {\n        throw new Error(\n          'react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop'\n        )\n      }\n    }\n\n    return this.props.children\n  }\n}\n\nfunction withErrorBoundary<P>(\n  Component: React.ComponentType<P>,\n  errorBoundaryProps: ErrorBoundaryProps\n) {\n  function Wrapped(props: any) {\n    return (\n      <ErrorBoundary {...errorBoundaryProps}>\n        <Component {...props} />\n      </ErrorBoundary>\n    )\n  }\n\n  // Format for display in DevTools\n  const name = Component.displayName || Component.name || 'Unknown'\n  Wrapped.displayName = `withErrorBoundary(${name})`\n\n  return Wrapped\n}\n\nfunction useErrorHandler<P = Error>(givenError?: P) {\n  const [error, setError] = React.useState(null)\n  if (givenError) throw givenError\n  if (error) throw error\n  return setError\n}\n\nexport { ErrorBoundary, withErrorBoundary, useErrorHandler }\n","import React from 'react'\nimport { Link } from 'react-router-dom'\nimport styled from 'styled-components'\nimport Button from '@/components/button'\nimport { envStore } from '@/constants/env'\n\ntype Props = {\n  type?: number | string | 404\n}\n\nexport default function Exception({ type = 404 }: Props) {\n  return (\n    <ExceptionWrapper>\n      <div className=\"exception\">\n        <div className=\"exception__imgBlock\">\n          <div\n            className=\"exception__imgEle\"\n            style={{\n              backgroundImage: `url(\"${envStore.publicUrl}/images/${type}.svg\")`,\n            }}\n          />\n        </div>\n        <div className=\"exception__content\">\n          <h1>404</h1>\n          <div className=\"exception__desc\">抱歉，你訪問的頁面不存在</div>\n          <div className=\"exception__actions\">\n            <Link to=\"/\">\n              <Button color=\"primary\">回首頁</Button>\n            </Link>\n          </div>\n        </div>\n      </div>\n    </ExceptionWrapper>\n  )\n}\n\nconst ExceptionWrapper = styled.div`\n  height: 100%;\n  margin-right: -24px;\n  background: #f9f9fb;\n  border-radius: 4px;\n\n  .exception {\n    display: flex;\n    align-items: center;\n    height: 100%;\n  }\n\n  .exception .exception__imgBlock {\n    flex: 0 0 62.5%;\n    width: 62.5%;\n    padding-right: 152px;\n    zoom: 1;\n  }\n\n  .exception .exception__imgEle {\n    float: right;\n    width: 100%;\n    max-width: 430px;\n    height: 360px;\n    background-repeat: no-repeat;\n    background-position: 50% 50%;\n    background-size: contain;\n  }\n\n  .exception .exception__content {\n    flex: auto;\n  }\n\n  .exception .exception__content h1 {\n    margin-bottom: 24px;\n    color: #434e59;\n    font-weight: 600;\n    font-size: 72px;\n    line-height: 72px;\n  }\n\n  .exception .exception__content .exception__desc {\n    margin-bottom: 24px;\n    color: rgba(0, 0, 0, 0.45);\n    font-size: 20px;\n    line-height: 28px;\n  }\n`\n","import React from 'react'\nimport styled from 'styled-components'\nimport { Row, Col } from 'antd'\nimport { Loading3QuartersOutlined } from '@ant-design/icons'\n\ntype PropTypes = {\n  className?: string\n  style?: React.CSSProperties\n}\n\nconst Wrapper = styled.div`\n  .ant-spin {\n    &--inner {\n      margin: 0 auto;\n    }\n  }\n`\n\nexport function Loading(props: PropTypes) {\n  return <Loading3QuartersOutlined {...props} />\n}\n\nexport default React.memo(function Loading({\n  className,\n  style,\n  ...props\n}: PropTypes) {\n  return (\n    <Wrapper className=\"bg-greyF9\">\n      <Row justify=\"center\" className={className}>\n        <Col className=\"ant-spin--inner\">\n          <Loading3QuartersOutlined spin style={style} />\n        </Col>\n      </Row>\n    </Wrapper>\n  )\n})\n","import { Breadcrumb } from 'antd'\nimport styled from 'styled-components'\n\nconst StyledBreadcrumb = styled(Breadcrumb)`\n  &.ant-breadcrumb {\n    font-size: 16px;\n\n    .ant-breadcrumb-link {\n      cursor: pointer;\n    }\n\n    .ant-breadcrumb-link,\n    a {\n      color: #fff;\n    }\n\n    .anticon {\n      font-size: 16px;\n    }\n\n    .ant-breadcrumb-link:hover,\n    a:hover {\n      text-decoration: underline;\n    }\n\n    .ant-breadcrumb-separator {\n      margin: 0 16px;\n      color: #fff;\n    }\n\n    > span:last-child {\n      color: #fff;\n      text-decoration: underline;\n    }\n  }\n`\n\nexport default StyledBreadcrumb\n","import React from 'react'\nimport { ModalProps } from 'antd/lib/modal'\nimport styled from 'styled-components'\nimport { ExclamationCircleFilled } from '@ant-design/icons'\nimport Modal from '@/components/modal'\nimport Button from '@/components/button'\n\ninterface Props extends ModalProps {}\n\nconst StyledModal = styled(Modal)`\n  .ant-modal-footer {\n    border-top: none;\n  }\n`\n\nexport default function LogoutConfirmModal({\n  onOk,\n  onCancel,\n  ...props\n}: Props) {\n  return (\n    <StyledModal\n      {...props}\n      visible\n      centered\n      closable={false}\n      bodyStyle={{ paddingTop: 48 }}\n      width={350}\n      footer={[\n        <div\n          key=\"logout-modal-footer\"\n          className=\"flex items-center justify-center mb-4\">\n          <Button\n            key=\"btn-ok\"\n            color=\"primary\"\n            style={{ minWidth: 120, marginRight: 16 }}\n            onClick={onOk}>\n            確定\n          </Button>\n          <Button\n            key=\"btn-cancel\"\n            color=\"outline\"\n            style={{ minWidth: 120 }}\n            onClick={onCancel}>\n            取消\n          </Button>\n        </div>,\n      ]}>\n      <div className=\"text-center\">\n        <ExclamationCircleFilled\n          className=\"mb-6\"\n          style={{ fontSize: 48, color: '#e53e3e' }}\n        />\n        <div className=\"text-lg font-medium text-darkGrey mb-4\">\n          請問是否確定要登出？\n        </div>\n      </div>\n    </StyledModal>\n  )\n}\n","import React from 'react'\nimport cx from 'classnames'\nimport { Layout, Avatar, Menu } from 'antd'\nimport {\n  SettingOutlined,\n  ExportOutlined,\n  HomeOutlined,\n  CaretDownOutlined,\n} from '@ant-design/icons'\nimport styled from 'styled-components'\nimport Button from '@/components/button'\nimport Breadcrumb from '@/components/breadcrumb'\nimport LogoutConfirmModal from '@/components/logout-confirm-modal'\nimport { useBreadcrumbState, useHeaderContentValue } from '@/hooks/useApp'\nimport useAuth from '@/hooks/useAuth'\nimport useVisible from '@/hooks/useVisible'\nimport history from '@/utils/history'\nimport { envStore } from '@/constants/env'\nimport * as routes from '@/constants/routes'\n\nexport default function AppHeader() {\n  const [items] = useBreadcrumbState()\n  const content = useHeaderContentValue()\n\n  const { logout } = useAuth()\n\n  const [current, setCurrentPath] = React.useState(history.location.pathname)\n\n  const [logoutModalVisible, handleLogoutModalVisible] = useVisible()\n\n  const handleTo = (pathname?: string) => () => {\n    if (pathname) {\n      setCurrentPath(pathname)\n      history.push(pathname)\n    }\n  }\n\n  const getMenuClassName = (targetUrl: string) => {\n    return cx({ 'is--current': current !== '/' && targetUrl.includes(current) })\n  }\n\n  return (\n    <>\n      {logoutModalVisible && (\n        <LogoutConfirmModal\n          onOk={logout as any}\n          onCancel={handleLogoutModalVisible}\n        />\n      )}\n      <Header>\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center\">\n            <Logo onClick={handleTo('/')}>\n              <img\n                src={`${envStore.publicUrl}/images/logo-sm@2x.png`}\n                alt=\"app-logo\"\n                className=\"cursor-pointer\"\n              />\n            </Logo>\n            <Menu\n              mode=\"horizontal\"\n              className=\"bg-transparent ml-3\"\n              style={{ borderBottom: 'none', lineHeight: '46px' }}>\n              <MenuItem\n                key={routes.IMAGE_SCHEDULER}\n                onClick={handleTo(routes.IMAGE_SCHEDULER)}\n                className={getMenuClassName(routes.IMAGE_SCHEDULER)}>\n                <div className=\"flex items-center text-base\">\n                  <SettingOutlined />\n                  影像排班\n                </div>\n              </MenuItem>\n              <SubMenu\n                key={routes.REPORT_LIST}\n                className={getMenuClassName(routes.REPORT_LIST)}\n                popupOffset={[-14, 0]}\n                popupClassName=\"rounded\"\n                title={\n                  <div className=\"flex items-center text-base\">\n                    <SettingOutlined />\n                    清單查詢\n                    <CaretDownOutlined className=\"ml-2 mr-0\" />\n                  </div>\n                }>\n                <Menu.Item\n                  key={routes.REPORT_LIST}\n                  onClick={handleTo(routes.REPORT_LIST)}\n                  className={getMenuClassName(routes.REPORT_LIST)}>\n                  <div className=\"flex items-center text-sm\">\n                    <SettingOutlined />\n                    清單查詢\n                  </div>\n                </Menu.Item>\n                <Menu.Item\n                  key={routes.REPORT_VERSION_COMPARISON}\n                  onClick={handleTo(routes.REPORT_VERSION_COMPARISON)}\n                  className={getMenuClassName(\n                    routes.REPORT_VERSION_COMPARISON\n                  )}>\n                  <div className=\"flex items-center text-sm\">\n                    <SettingOutlined />\n                    版本比較\n                  </div>\n                </Menu.Item>\n                <Menu.Item\n                  key={routes.YELLOW_CARD_INQUIRY}\n                  onClick={handleTo(routes.YELLOW_CARD_INQUIRY)}\n                  className={getMenuClassName(routes.YELLOW_CARD_INQUIRY)}>\n                  <div className=\"flex items-center text-sm\">\n                    <SettingOutlined />\n                    黃卡新檢索\n                  </div>\n                </Menu.Item>\n                <Menu.Item\n                  key={routes.BLOOD_BANK_REVIEW}\n                  onClick={handleTo(routes.BLOOD_BANK_REVIEW)}\n                  className={getMenuClassName(routes.BLOOD_BANK_REVIEW)}\n                  style={{ display: 'none' }}>\n                  <div className=\"flex items-center text-sm\">\n                    <SettingOutlined />\n                    血庫備血審查作業\n                  </div>\n                </Menu.Item>\n              </SubMenu>\n              <MenuItem\n                key={routes.REPORT_INQUIRY}\n                onClick={handleTo(routes.REPORT_INQUIRY)}\n                className={getMenuClassName(routes.REPORT_INQUIRY)}>\n                <div className=\"flex items-center text-base\">\n                  <SettingOutlined />\n                  輸入報告\n                </div>\n              </MenuItem>\n              <SubMenu\n                key={routes.REPORT_TEMPLATE_LIST}\n                className={getMenuClassName(routes.REPORT_TEMPLATE_LIST)}\n                popupOffset={[-14, 0]}\n                popupClassName=\"rounded\"\n                title={\n                  <div className=\"flex items-center text-base\">\n                    <SettingOutlined />\n                    報告模版\n                    <CaretDownOutlined className=\"ml-2 mr-0\" />\n                  </div>\n                }>\n                <Menu.Item\n                  key={routes.REPORT_TEMPLATE_LIST}\n                  onClick={handleTo(routes.REPORT_TEMPLATE_LIST)}\n                  className={getMenuClassName(routes.REPORT_TEMPLATE_LIST)}>\n                  <div className=\"flex items-center text-sm\">\n                    <SettingOutlined />\n                    結構式報告模版\n                  </div>\n                </Menu.Item>\n                <Menu.Item\n                  key={routes.PHRASE_LIST}\n                  onClick={handleTo(routes.PHRASE_LIST)}\n                  className={getMenuClassName(routes.PHRASE_LIST)}>\n                  <div className=\"flex items-center text-sm\">\n                    <SettingOutlined />\n                    片語模版\n                  </div>\n                </Menu.Item>\n              </SubMenu>\n              <MenuItem\n                key=\"outside\"\n                onClick={handleTo('/')}\n                className={getMenuClassName('outside')}>\n                <div className=\"flex items-center text-base\">\n                  <SettingOutlined />\n                  醫學影像教學平台\n                </div>\n              </MenuItem>\n            </Menu>\n          </div>\n          <div className=\"flex items-center\">\n            <div className=\"text-white text-lg mr-4\">Hi, 使用者</div>\n            <Avatar className=\"flex items-center h-12 w-12\">\n              <div className=\"text-2xl\">C</div>\n            </Avatar>\n            <Button\n              icon={\n                <ExportOutlined\n                  className=\"text-white text-2xl\"\n                  style={{ marginRight: 0 }}\n                />\n              }\n              onClick={handleLogoutModalVisible}\n              className=\"ml-4 bg-transparent border border-white rounded pr-1 hover--none\"\n              style={{ minWidth: 35, borderColor: '#fff' }}\n            />\n          </div>\n        </div>\n        <div className=\"mt-3 ml-4 pb-0 flex justify-between\">\n          <Breadcrumb\n            separator=\">\"\n            style={{ minHeight: 32, display: 'flex', alignItems: 'center' }}>\n            <Breadcrumb.Item onClick={handleTo('/')}>\n              <HomeOutlined className=\"relative\" style={{ top: -4 }} />\n            </Breadcrumb.Item>\n            {items.map((x, idx) => (\n              <Breadcrumb.Item\n                key={`breadcrumb-${idx}`}\n                onClick={handleTo(x.href)}>\n                {x.name}\n              </Breadcrumb.Item>\n            ))}\n          </Breadcrumb>\n          {content}\n        </div>\n      </Header>\n    </>\n  )\n}\n\nconst Header = styled(Layout.Header)`\n  &.ant-layout-header {\n    height: auto;\n    padding: 16px 1.7rem 10px 2.1rem;\n    background: ${p => `linear-gradient(-90deg, #42c2b8, ${p.theme.primary})`};\n    color: ${p => p.theme.primary};\n    box-shadow: 0 0 20px ${p => p.theme.purple150};\n  }\n\n  .anticon {\n    cursor: pointer;\n  }\n`\n\nconst MenuItem = styled(Menu.Item)`\n  &.ant-menu-item {\n    margin: 0 2px !important;\n    padding: 0 10px !important;\n    border-radius: 6px;\n    border-bottom: none !important;\n    color: #fff;\n\n    &.is--current,\n    &:hover {\n      color: #fff !important;\n      background: rgba(24, 144, 138, 1) !important;\n    }\n  }\n\n  &.ant-menu-item-selected {\n    color: #fff !important;\n  }\n`\n\nconst SubMenu = styled(Menu.SubMenu)`\n  &.ant-menu-submenu {\n    margin: 0 5px !important;\n    padding: 0 15px !important;\n    border-radius: 6px;\n    border-bottom: none !important;\n\n    .ant-menu-submenu-title {\n      color: #fff;\n    }\n\n    &.is--current,\n    &:hover {\n      background: rgba(24, 144, 138, 1) !important;\n    }\n  }\n`\n\nconst Logo = styled.div``\n","import React from 'react'\n\nexport default React.lazy(() => import('./home'))\n","import React from 'react'\nimport { Route, Switch } from 'react-router-dom'\nimport Loading from '@/components/loading'\n\nconst Login = React.lazy(() => import('./login'))\n\nconst ForgetPassword = React.lazy(() => import('./forget-password'))\n\nexport default function LoginRoute() {\n  return (\n    <React.Suspense fallback={<Loading />}>\n      <Switch>\n        <Route exact path=\"/\" component={Login} />\n        <Route path=\"/login\" component={Login} />\n        <Route path=\"/forget-password\" component={ForgetPassword} />\n        <Route component={Login} />\n      </Switch>\n    </React.Suspense>\n  )\n}\n","import React from 'react'\nimport { Switch, Route } from 'react-router-dom'\nimport { Layout } from 'antd'\nimport ErrorBoundary from '@/components/error-boundary'\nimport Exception from '@/components/exception'\nimport Loading from '@/components/loading'\nimport AppHeader from '@/components/app-header'\nimport { useRoutes, RouteItem } from '@/constants/routes'\nimport Home from '@/containers/home'\nimport Login from '@/containers/login'\nimport useAuth from '@/hooks/useAuth'\n\nfunction App() {\n  const { isAuthenticated } = useAuth()\n\n  const routes = useRoutes()\n\n  const renderRouteItem = React.useCallback((item: RouteItem) => {\n    const path = `${item.path}${item.param ? `/${item.param}` : ''}`\n\n    return (\n      <Route\n        exact\n        key={item.id}\n        path={path}\n        component={\n          item.component ? item.component : () => <h1> {item.title} </h1>\n        }\n      />\n    )\n  }, [])\n\n  const renderRoute: any = React.useCallback(\n    (data: RouteItem[]) => {\n      return data.map((item: RouteItem) => {\n        return [\n          renderRouteItem(item),\n          item.children && renderRoute(item.children),\n          item.hide && renderRoute(item.hide),\n        ]\n      })\n    },\n    [renderRouteItem]\n  )\n\n  return (\n    <ErrorBoundary>\n      {!isAuthenticated && <Login />}\n      {isAuthenticated && (\n        <Layout>\n          <AppHeader />\n          <React.Suspense fallback={<Loading />}>\n            <Switch>\n              <Route exact path=\"/\" component={Home} />\n              {renderRoute(routes)}\n              <Route component={Exception} />\n            </Switch>\n          </React.Suspense>\n        </Layout>\n      )}\n    </ErrorBoundary>\n  )\n}\n\nexport default App\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import './bootstrap'\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport { Router } from 'react-router-dom'\nimport { DndProvider } from 'react-dnd'\nimport { HTML5Backend } from 'react-dnd-html5-backend'\nimport { RecoilRoot, MutableSnapshot } from 'recoil'\nimport { ConfigProvider } from 'antd'\nimport zhTW from 'antd/lib/locale/zh_TW'\nimport { ThemeProvider } from 'styled-components'\nimport { SWRConfig } from 'swr'\nimport request from '@/utils/request'\nimport history from '@/utils/history'\nimport { createPack } from '@/utils/createPack'\nimport { redirect } from '@/utils/webHelper'\nimport { AuthProvider } from '@/hooks/useAuth'\nimport App from './app'\nimport theme from './theme'\nimport * as serviceWorker from './serviceWorker'\nimport './index.css'\n\nredirect()\n\nconst initializeState = ({ set }: MutableSnapshot) => {\n  // set('reportTemplateListState', Store.get('reportTemplateListState'))\n  // for(const [key, value] of Storage.entries()) {\n  //   set(myLookupOfAtomWithKey(key), JSON.parse(value).value);\n  // }\n}\n\nconst EnhancedApp = createPack(\n  <RecoilRoot initializeState={initializeState} />,\n  <ThemeProvider theme={theme} />,\n  <ConfigProvider locale={zhTW} />,\n  <AuthProvider />,\n  <SWRConfig\n    value={{ suspense: true, fetcher: request, revalidateOnFocus: false }}\n  />,\n  <DndProvider backend={HTML5Backend} />,\n  <Router history={history} />\n)\n\n// ReactDOM.unstable_createRoot(document.getElementById('root') as any).render(\n//   <EnhancedApp>\n//     <App />\n//   </EnhancedApp>\n// )\nReactDOM.render(\n  <EnhancedApp>\n    <App />\n  </EnhancedApp>,\n  document.getElementById('root')\n)\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister()\n","import React from 'react'\nimport { atom, useRecoilState, selectorFamily } from 'recoil'\nimport {\n  find,\n  mergeAll,\n  map,\n  values,\n  head,\n  pathOr,\n  flatten,\n  length,\n  of,\n  filter,\n  keys,\n} from 'ramda'\nimport Store from 'store'\nimport { setComponentByTab } from '@/components/snippet-template-list'\nimport { Snippets, SnippetProps, ReportTemplate } from '@/constants/types'\nconst { compose } = require('ramda')\n\n// 模版分類\nexport const snippetCategoryOfReport = {\n  PATHOLOGICAL_DIAGNOSIS: 'Pathological diagnosis',\n  GROSS: 'Gross',\n  MICROSCOPY: 'Microscopy',\n  NOTES: 'Notes',\n  REFERENCES: 'References',\n}\n\nconst fakeReportTemplateList: ReportTemplate[] = setComponentByTab(\n  Store.get('reportTemplateListState')\n)\n\nconst defaultSnippetsOfReport = compose(\n  mergeAll,\n  map((key: string) => ({ [key]: [] })),\n  values\n)(snippetCategoryOfReport)\n\nconst reportTemplateListState = atom({\n  key: 'reportTemplateListState',\n  default: fakeReportTemplateList,\n})\n\nexport const snippetsOfReportState = selectorFamily<\n  ReportTemplate,\n  React.Key | undefined\n>({\n  key: 'reportSnippetsState',\n  get: id => ({ get }) => {\n    return compose(find((x: ReportTemplate) => `${x.id}` === `${id}`))(\n      setComponentByTab(get(reportTemplateListState))\n    )\n  },\n})\n\nconst reportPreviewState = atom({\n  key: 'reportPreviewState',\n  default: false,\n})\n\nconst categoryState = atom<string>({\n  key: 'categoryState',\n  default: compose(head, values)(snippetCategoryOfReport),\n})\n\n// 報告模版清單\nexport function useReportTemplateState() {\n  return useRecoilState(reportTemplateListState)\n}\n\n// 模版報告資料\nexport function useReportTemplate({\n  id,\n  data,\n}: {\n  id?: React.Key\n  data?: any\n}) {\n  const [reportTemplateList] = useRecoilState(reportTemplateListState)\n\n  const [reportTemplate, setReportTemplate] = React.useState<ReportTemplate>({\n    setting: defaultSnippetsOfReport,\n  } as any)\n\n  // const [reportTemplate] = useRecoilState<ReportTemplate>(\n  //   snippetsOfReportState(id) as any\n  // )\n\n  React.useEffect(() => {\n    if (data?.id) {\n      setReportTemplate(compose(head, setComponentByTab, of)(data))\n    }\n  }, [data])\n\n  React.useEffect(() => {\n    if (id) {\n      setReportTemplate(\n        compose(find((x: ReportTemplate) => `${x.id}` === `${id}`))(\n          setComponentByTab(reportTemplateList)\n        )\n      )\n    }\n  }, [id]) // eslint-disable-line\n\n  let _snippetList = pathOr(defaultSnippetsOfReport, ['setting'])(\n    reportTemplate\n  )\n\n  React.useEffect(() => {\n    setSnippetList(_snippetList)\n  }, [JSON.stringify(_snippetList)]) // eslint-disable-line\n\n  const [snippetList, setSnippetList] = React.useState<Snippets>(_snippetList)\n\n  let snippetById: { [key: string]: SnippetProps } = {}\n\n  return {\n    reportTemplate,\n    snippetList,\n    setSnippetList,\n    categoryCountById: compose(\n      mergeAll,\n      map((key: string) => ({ [key]: length(snippetList[key]) })),\n      keys\n    )(snippetList),\n    categoryCount: compose(length, keys)(snippetList),\n    total: compose(\n      length,\n      filter((x: SnippetProps) => x.type !== 'TemplateSectionHeader'),\n      flatten,\n      values\n    )(snippetList),\n    snippetById: compose(\n      map((x: SnippetProps) => (snippetById[x.id] = x)),\n      flatten,\n      values\n    )(snippetList),\n  }\n}\n\n// 切換編輯/檢視模式\nexport function useReportPreview() {\n  const [isPreview, setIsPreview] = useRecoilState(reportPreviewState)\n\n  return [isPreview, () => setIsPreview(prev => !prev)] as [boolean, () => void]\n}\n\n// 更方便切換編輯/檢視模式\nexport function useToggleReportPreview(state: boolean = false) {\n  const [isPreview, setIsPreview] = useRecoilState(reportPreviewState)\n\n  React.useEffect(() => {\n    setIsPreview(state)\n\n    return () => {\n      setIsPreview(false)\n    }\n  }, [state]) // eslint-disable-line\n\n  return [isPreview, () => setIsPreview(prev => !prev)] as [boolean, () => void]\n}\n\n// 編輯報告/模版時，當前的分類\nexport function useCurrentCategoryOfSnippet() {\n  return useRecoilState(categoryState)\n}\n","import React from 'react'\nimport { Checkbox } from 'antd'\nimport { CheckboxProps } from 'antd/lib/checkbox'\nimport styled from 'styled-components'\nimport { RefProps } from '@/constants/types'\n\nconst CheckboxGroup = Checkbox.Group\n\nconst StyledCheckbox = styled(Checkbox)`\n  .ant-checkbox-checked .ant-checkbox-inner {\n    background-color: ${p => p.theme.primary};\n    border-color: ${p => p.theme.primary};\n  }\n\n  &.ant-checkbox-wrapper:hover .ant-checkbox-inner,\n  .ant-checkbox:hover .ant-checkbox-inner,\n  .ant-checkbox-input:focus + .ant-checkbox-inner {\n    border-color: ${p => p.theme.primary};\n  }\n\n  .ant-checkbox-checked .ant-checkbox-inner:after {\n    border: 2px solid #fff;\n    border-top: 0;\n    border-left: 0;\n  }\n\n  .ant-checkbox-inner {\n    border: 1px solid ${p => p.theme.secondary};\n  }\n\n  &.is--normal {\n    font-size: 14px !important;\n    font-weight: normal !important;\n  }\n`\n\ntype Props = RefProps & CheckboxProps\n\nconst CheckboxComponent: React.ElementType<Props> = React.forwardRef<\n  typeof StyledCheckbox,\n  Props\n>(({ ...props }, ref) => <StyledCheckbox forwardRef={ref} {...props} />)\n\nCheckboxComponent.displayName = 'Checkbox'\n\nexport { CheckboxComponent as Checkbox, CheckboxGroup }\n\nexport default CheckboxComponent\n","export { default } from '../theme'\n","import { Collapse } from 'antd'\nimport styled from 'styled-components'\n\nconst borderRadius = '8px'\n\nconst StyledCollapse = styled(Collapse)`\n  &.ant-collapse {\n    border-radius: ${borderRadius};\n    border-bottom: none;\n\n    > .ant-collapse-item > .ant-collapse-header {\n      padding-left: 0;\n      background: ${p => p.theme.primary};\n      color: #fff;\n    }\n\n    &.header-pl-clear > .ant-collapse-item > .ant-collapse-header {\n      padding-left: 16px;\n    }\n\n    > .ant-collapse-item:first-child > .ant-collapse-header {\n      border-top-left-radius: ${borderRadius};\n      border-top-right-radius: ${borderRadius};\n    }\n\n    > .ant-collapse-item:last-child {\n      border-bottom: none;\n    }\n\n    > .ant-collapse-item:last-child > .ant-collapse-content {\n      border-bottom-left-radius: ${borderRadius};\n      border-bottom-right-radius: ${borderRadius};\n    }\n\n    > .ant-collapse-item.ant-collapse-item-active:last-child {\n      border-bottom: 1px solid #d9d9d9;\n    }\n\n    > .ant-collapse-item:not(.ant-collapse-item-active):last-child\n      > .ant-collapse-header {\n      border-bottom-left-radius: ${borderRadius};\n      border-bottom-right-radius: ${borderRadius};\n    }\n  }\n`\n\nexport default StyledCollapse\n","import { History, createHashHistory } from 'history'\nimport { envStore } from '@/constants/env'\n\nconst history = createHashHistory({ basename: envStore.appBaseName })\n\nexport default history as NonNullable<History>\n","import React from 'react'\nimport { Select } from 'antd'\nimport { SelectProps } from 'antd/lib/select'\nimport styled from 'styled-components'\n\nconst StyledSelect: any = styled(Select)`\n  &.ant-select {\n    &.ant-select-single:not(.ant-select-customize-input) .ant-select-selector,\n    .ant-select-selection:hover,\n    .ant-select-selection:active,\n    .ant-select-selection:focus {\n      border-color: #d9d9d9;\n    }\n\n    .ant-select-selection {\n      border-color: ${p => p.theme.secondary};\n    }\n\n    .ant-select-selection:active,\n    .ant-select-selection:focus {\n      box-shadow: none;\n    }\n\n    .ant-select-arrow {\n      color: ${p => p.theme.primary};\n    }\n\n    .ant-select-arrow-icon {\n      position: relative;\n      top: -1px;\n      font-size: 14px;\n    }\n\n    &.ant-select-borderless .ant-select-selector {\n      position: relative;\n      bottom: 1px;\n      border: 0;\n      border-bottom: 1px #d9d9d9 solid !important;\n      border-bottom-left-radius: 0;\n      border-bottom-right-radius: 0;\n    }\n  }\n\n  &.ant-select.is--outline {\n    > .ant-select-selector {\n      background: transparent;\n      border: 1px solid #fff;\n      color: #fff;\n\n      &:active,\n      &:focus,\n      &:hover {\n        border: 1px solid #fff;\n      }\n    }\n\n    .ant-select-selection-placeholder,\n    .ant-select-arrow {\n      color: #fff;\n    }\n\n    .ant-select-selection-placeholder {\n      opacity: 1;\n      left: 30%;\n    }\n  }\n\n  &.ant-select.is--transparent {\n    &.ant-select-focused > .ant-select-selector {\n      border: 1px solid #666a8f;\n    }\n\n    > .ant-select-selector {\n      background: transparent;\n      border: 1px solid #666a8f;\n      color: #a9b6d8;\n\n      &:active,\n      &:focus,\n      &:hover {\n        border: 1px solid #666a8f;\n      }\n    }\n\n    .ant-select-arrow {\n      color: #a9b6d8;\n    }\n  }\n`\n\nclass SelectComponent<T = any> extends React.Component<SelectProps<T>, any> {\n  public static Option = Select.Option\n\n  public static displayName = 'Select'\n\n  render() {\n    return <StyledSelect {...this.props}>{this.props.children}</StyledSelect>\n  }\n}\n\nexport default SelectComponent\n","import React from 'react'\nimport { atom, useRecoilState, useRecoilValue, useSetRecoilState } from 'recoil'\n\ntype BreadcrumbItem = {\n  href?: string\n  name: string\n}\n\nexport const breadcrumbState = atom<BreadcrumbItem[]>({\n  key: 'breadcrumbState',\n  default: [],\n})\n\nexport function useBreadcrumbState() {\n  const state = useRecoilState(breadcrumbState)\n  return state\n}\n\nexport function useBreadcrumb(items: BreadcrumbItem[] = []) {\n  const setter = useSetRecoilState(breadcrumbState)\n\n  React.useEffect(() => {\n    setter(items)\n  }, []) // eslint-disable-line\n\n  return setter\n}\n\nexport const headerContentState = atom<React.ReactNode>({\n  key: 'headerContentState',\n  default: null,\n})\n\nexport function useHeaderContentState() {\n  return useRecoilState(headerContentState)\n}\n\nexport function useHeaderContent(node?: React.ReactNode) {\n  const setter = useSetRecoilState(headerContentState)\n\n  React.useEffect(() => {\n    setter(node)\n\n    return () => {\n      setter(null)\n    }\n  }, [node]) // eslint-disable-line\n}\n\nexport function useHeaderContentValue() {\n  const value = useRecoilValue(headerContentState)\n  return value\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport { Modal } from 'antd'\nimport { ModalProps } from 'antd/lib/modal'\n\nconst StyledModal = styled(Modal)`\n  animation-duration: 0s !important;\n  transition: none !important;\n\n  .ant-modal-header--border-none {\n    border-bottom: none;\n  }\n\n  .ant-modal-footer {\n    padding-top: 14px;\n    padding-bottom: 14px;\n  }\n`\n\nexport default class ModalComponent extends React.Component<ModalProps, any> {\n  static confirm = Modal.confirm\n  static error = Modal.error\n  static success = Modal.success\n  static info = Modal.info\n\n  render() {\n    return <StyledModal {...this.props}>{this.props.children}</StyledModal>\n  }\n}\n","import React from 'react'\nimport { Modal } from 'antd'\nimport { ModalProps, ModalFuncProps } from 'antd/lib/modal'\n\nexport const modalDefaultProps = (\n  content?: React.ReactNode,\n  props?: ModalProps\n): ModalFuncProps => ({\n  content: (\n    <div\n      className=\"text-darkGrey font-medium\"\n      css={{ marginTop: 16, marginBottom: 30 }}>\n      {content}\n    </div>\n  ),\n  icon: null,\n  width: 440,\n  okText: '刪除',\n  cancelText: '取消',\n  centered: true,\n  // maskStyle: {\n  //   background: theme.modal.maskDarken,\n  // },\n  autoFocusButton: null,\n  okButtonProps: {\n    className: 'c-btn is--danger',\n    style: { minWidth: 80, marginRight: 24 },\n  },\n  cancelButtonProps: {\n    className: 'c-btn is--outline mr-0 float-right',\n    style: { minWidth: 80 },\n  },\n  ...props,\n})\n\nexport const success = ({\n  onOk,\n  onCancel,\n  content = '資料已儲存',\n  ...props\n}: ModalFuncProps) => {\n  Modal.info({\n    ...modalDefaultProps(),\n    ...props,\n    onOk: () => {\n      if (onOk) {\n        onOk()\n      }\n    },\n    onCancel() {\n      if (onCancel) {\n        onCancel()\n      }\n    },\n  })\n}\n\nexport const confirm = ({\n  onOk,\n  onCancel,\n  content = '刪除後將無法還原，確認繼續？',\n  ...props\n}: ModalFuncProps) => {\n  Modal.confirm({\n    ...modalDefaultProps(content),\n    ...props,\n    onOk: () => {\n      if (onOk) {\n        onOk()\n      }\n    },\n    onCancel() {\n      if (onCancel) {\n        onCancel()\n      }\n    },\n  })\n}\n","const preserveCamelCase = (string: string) => {\n  let isLastCharLower = false\n  let isLastCharUpper = false\n  let isLastLastCharUpper = false\n\n  for (let i = 0; i < string.length; i++) {\n    const character = string[i]\n\n    if (\n      isLastCharLower &&\n      /[a-zA-Z]/.test(character) &&\n      character.toUpperCase() === character\n    ) {\n      string = string.slice(0, i) + '-' + string.slice(i)\n      isLastCharLower = false\n      isLastLastCharUpper = isLastCharUpper\n      isLastCharUpper = true\n      i++\n    } else if (\n      isLastCharUpper &&\n      isLastLastCharUpper &&\n      /[a-zA-Z]/.test(character) &&\n      character.toLowerCase() === character\n    ) {\n      string = string.slice(0, i - 1) + '-' + string.slice(i - 1)\n      isLastLastCharUpper = isLastCharUpper\n      isLastCharUpper = false\n      isLastCharLower = true\n    } else {\n      isLastCharLower =\n        character.toLowerCase() === character &&\n        character.toUpperCase() !== character\n      isLastLastCharUpper = isLastCharUpper\n      isLastCharUpper =\n        character.toUpperCase() === character &&\n        character.toLowerCase() !== character\n    }\n  }\n\n  return string\n}\n\nconst camelCase = (\n  input: string | string[],\n  options: { pascalCase?: boolean } = {}\n) => {\n  if (!(typeof input === 'string' || Array.isArray(input))) {\n    throw new TypeError('Expected the input to be `string | string[]`')\n  }\n\n  options = Object.assign(\n    {\n      pascalCase: false,\n    },\n    options\n  )\n\n  const postProcess = (x: string) =>\n    options.pascalCase ? x.charAt(0).toUpperCase() + x.slice(1) : x\n\n  if (Array.isArray(input)) {\n    input = input\n      .map(x => x.trim())\n      .filter(x => x.length)\n      .join('-')\n  } else {\n    input = input.trim()\n  }\n\n  if (input.length === 0) {\n    return ''\n  }\n\n  if (input.length === 1) {\n    return options.pascalCase ? input.toUpperCase() : input.toLowerCase()\n  }\n\n  const hasUpperCase = input !== input.toLowerCase()\n\n  if (hasUpperCase) {\n    input = preserveCamelCase(input)\n  }\n\n  input = input\n    .replace(/^[_.\\- ]+/, '')\n    .toLowerCase()\n    .replace(/[_.\\- ]+(\\w|$)/g, (_, p1) => p1.toUpperCase())\n    .replace(/\\d+(\\w|$)/g, m => m.toUpperCase())\n\n  return postProcess(input)\n}\n\nexport default camelCase\n","import React from 'react'\nimport Store from 'store'\nimport {\n  keys,\n  filter,\n  join,\n  map,\n  merge,\n  includes,\n  isNil,\n  always,\n  T,\n  path,\n  ifElse,\n  invoker,\n  identity,\n  mergeDeepRight,\n} from 'ramda'\n// import message, { error } from '@/utils/message'\nimport { MutationOptions } from '@/constants/types'\nimport envStore from '@/constants/env'\nimport camelcase from '@/utils/camelcase'\nconst { compose, cond } = require('ramda')\n\n/**\n * 替換Url中的變數，例如/v1/api/user/{id} 轉換成 /v1/api/user/5\n * @param url API Url\n * @param body Query Parameters\n */\nexport function format(url: string, params: { [key: string]: any } = {}) {\n  const regex = /(\\{.+?\\})/gi\n  const _params = { ...params }\n\n  const _url = url.replace(regex, v => {\n    const replacable = v[0] === '{'\n\n    if (!replacable) {\n      return v\n    }\n\n    const propName = v.slice(1, -1)\n    const replacedValue = _params[propName]\n\n    _params[propName] = undefined\n\n    return replacedValue\n  })\n\n  return { fullUrl: _url, params: _params }\n}\n\nexport function toQueryString(\n  paramsObject: {\n    [key: string]: any\n  } = {}\n) {\n  if (!paramsObject) {\n    return ''\n  }\n\n  return compose(\n    join('&'),\n    map((key: string) =>\n      Array.isArray(paramsObject[key])\n        ? // convert to key=val1,val2,val3 string\n          `${key}=${paramsObject[key]\n            .map((val: string | number) => `${encodeURIComponent(val)}`)\n            .join(',')}`\n        : // convert to key=val string\n          `${key}=${encodeURIComponent(paramsObject[key])}`\n    ),\n    filter(\n      (key: string) =>\n        paramsObject[key] !== '' &&\n        paramsObject[key] !== null &&\n        typeof paramsObject[key] !== 'undefined'\n    ),\n    keys\n  )(paramsObject)\n}\n\ninterface RequestInit\n  extends Omit<MutationOptions, 'onError' | 'refetchQueries'> {\n  body?: any\n  credentials?: RequestCredentials_\n  headers?: HeadersInit_\n  integrity?: string\n  keepalive?: boolean\n  method?: 'DELETE' | 'PUT' | 'PATCH' | 'GET' | 'POST'\n  mode?: RequestMode_\n  referrer?: string\n  window?: any\n  errorMsg?: boolean\n  withToken?: boolean\n  endpoint?: 'apiBaseUrl' | 'fakeApiBaseUrl'\n  onError?: (err: Error) => any\n}\n\nexport function useMeta() {\n  const [loading, setIsLoading] = React.useState(false)\n\n  const withMeta = React.useCallback((handler: any) => {\n    setIsLoading(true)\n\n    return handler().then((response: any) => {\n      setIsLoading(false)\n\n      return response\n    })\n  }, [])\n\n  return [loading, withMeta] as [boolean, (handler: any) => any]\n}\n\ninterface UseRequestOptions extends RequestInit {\n  lazy?: boolean\n  variables?: { [key: string]: any }\n}\n\nexport function useRequest<T = any>(\n  url: string,\n  { lazy = true, variables = {}, ..._options }: UseRequestOptions = {}\n) {\n  const called = React.useRef(false)\n\n  const [loading, withMeta] = useMeta()\n\n  const [data, setData] = React.useState<T>()\n\n  const [error, setError] = React.useState<Error>()\n\n  const _refetch = (data: { [key: string]: any } = {}) => {\n    let { fullUrl, params } = format(url, mergeDeepRight(variables, data))\n\n    if (_options.method === 'GET') {\n      fullUrl = `${fullUrl}?${toQueryString(params)}`\n    }\n\n    return withMeta(async () => {\n      const response = await request<T>(fullUrl, {\n        ..._options,\n        onCompleted: response => {\n          if (_options.onCompleted) {\n            _options.onCompleted(response)\n          }\n\n          setData(response)\n        },\n        onError: error => {\n          if (_options.onError) {\n            _options.onError(error)\n          }\n\n          setError(error)\n        },\n      })\n\n      return response\n    })\n  }\n\n  React.useEffect(() => {\n    if (!lazy && !called.current) {\n      _refetch()\n\n      called.current = true\n    }\n  }, [lazy, called]) // eslint-disable-line\n\n  return {\n    loading,\n    refetch: _refetch as (v: { [key: string]: any }) => Promise<T>,\n    data,\n    error,\n    called,\n  }\n}\n\nconst contentTypeIs = (s: string) => {\n  return compose(\n    ifElse(isNil, identity, (c = '') => c.includes(s)),\n    invoker(1, 'get')('content-type'),\n    path(['headers'])\n  )\n}\n\nconst convertObjectKeys: any = (\n  object: any[] | { [key: string]: any },\n  keypath: string[] = []\n) => {\n  if (!object || typeof object !== 'object') {\n    return object\n  }\n\n  if (Array.isArray(object)) {\n    return object.map((o, index) =>\n      convertObjectKeys(o, [...keypath, String(index)])\n    )\n  }\n\n  return Object.keys(object).reduce((acc: any, key: string) => {\n    let value = object[key]\n\n    const nestedKeyPath = [...keypath, key]\n\n    acc[camelcase(key)] = convertObjectKeys(value, nestedKeyPath)\n    return acc\n  }, {})\n}\n\nexport function request<T = any>(\n  url: string,\n  {\n    body,\n    headers,\n    msg = true,\n    errorMsg = true,\n    withToken = true,\n    successMessage,\n    onCompleted,\n    onError,\n    endpoint,\n    ...options\n  }: RequestInit = {}\n): Promise<T> {\n  const fullUrl = cond([\n    [includes('http'), always(url)],\n    [T, always(envStore.apiBaseUrl + url)],\n  ])(url)\n\n  return fetch(fullUrl, {\n    ...options,\n    body: body instanceof FormData ? body : JSON.stringify(body),\n    headers: merge(\n      {\n        ...(withToken\n          ? {\n              Authorization: `Bearer ${Store.get('sctc_token')}` as NonNullable<\n                string\n              >,\n            }\n          : {}),\n      },\n      headers\n        ? { ...headers }\n        : { 'Content-Type': 'application/json', Accept: 'application/json' }\n    ) as Record<string, string>,\n  })\n    .then(async (response: Response) => {\n      // if (\n      //   compose(\n      //     and(msg),\n      //     allPass([compose(not, isNil), compose(not, equals(__, 'GET'))]),\n      //     path(['method'])\n      //   )(options)\n      // ) {\n      //   message({\n      //     content: successMessage || '資料已更新成功',\n      //     type: 'success',\n      //   })\n      // }\n\n      let result: any\n\n      if (contentTypeIs('application/json')(response)) {\n        result = await response.json()\n\n        if (!response.ok) {\n          return Promise.reject(result)\n        }\n\n        result = convertObjectKeys(result)\n      }\n\n      if (contentTypeIs('sheet')(response)) {\n        result = await response.blob()\n      }\n\n      if (isNil(result)) {\n        result = await response.text()\n      }\n\n      if (onCompleted) {\n        onCompleted(result)\n      }\n\n      return result\n    })\n    .catch((err: Error) => {\n      // if (errorMsg) {\n      //   error(err)\n      // }\n\n      if (onError) {\n        onError(err)\n      }\n\n      return err\n    })\n}\n\nexport default request\n","import React from 'react'\nimport { Radio } from 'antd'\nimport { RadioProps } from 'antd/lib/radio'\nimport styled from 'styled-components'\n\nconst StyledRadio = styled(Radio)`\n  &.ant-radio-wrapper {\n    color: ${p => p.theme.darkGrey};\n\n    span.ant-radio + * {\n      padding-left: 16px;\n    }\n\n    .ant-radio-inner,\n    .ant-radio-checked .ant-radio-inner {\n      border-color: initial;\n    }\n\n    .ant-radio-inner::after {\n      background: ${p => p.theme.primary};\n    }\n\n    &:hover,\n    .ant-radio:hover .ant-radio-inner,\n    .ant-radio-input:focus + .ant-radio-inner {\n      border-color: ${p => p.theme.primary};\n    }\n  }\n`\n\ninterface Props extends RadioProps {\n  css?: React.CSSProperties\n}\n\nclass RadioComponent extends React.Component<Props, any> {\n  public static Group = Radio.Group\n\n  public static displayName = 'Radio'\n\n  public render() {\n    return <StyledRadio {...this.props} />\n  }\n}\n\nexport default RadioComponent\n","import React from 'react'\nimport { includes, pathOr } from 'ramda'\nimport { XYCoord } from 'react-dnd'\nimport { isNil, mapIndexed } from '@/utils/webHelper'\nimport Snippet from '@/components/snippet'\nimport { SnippetProps } from '@/constants/types'\nconst { compose } = require('ramda')\n\n/* prettier-ignore */\nconst REPORT_TEMPLATE_BUILDER_CLASSNAME = 'report-template-builder__main-content'\nconst UI_DRAGGABLE_CLASSNAME = 'ui-draggable'\n\nconst hasClassName = (nodes: Element[], className: string) => {\n  return nodes.find(\n    n => !isNil(n.className) && includes(className)(n.className)\n  )\n}\n\nexport function canMoveSnippet(\n  element: Element | null,\n  className = REPORT_TEMPLATE_BUILDER_CLASSNAME\n) {\n  let elem = element\n\n  const nodes: Element[] = []\n  nodes.push(elem as Element)\n\n  while (elem?.parentNode) {\n    nodes.unshift(elem.parentNode as Element)\n    elem = elem.parentNode as Element\n  }\n\n  if (\n    hasClassName(nodes, 'report-template-builder-contentarea--fixed-layout') ||\n    hasClassName(nodes, 'snippet-drawer-menu')\n  ) {\n    return false\n  }\n  if (\n    hasClassName(nodes, className) ||\n    hasClassName(nodes, UI_DRAGGABLE_CLASSNAME)\n  ) {\n    return true\n  }\n\n  return false\n}\n\nfunction findSnippet(\n  element: HTMLElement,\n  className = UI_DRAGGABLE_CLASSNAME\n): HTMLElement | null {\n  if (element.classList.contains(className)) {\n    return element\n  }\n  return element.parentElement && findSnippet(element.parentElement, className)\n}\n\nexport function getPlaceHolderIndex(clientOffset: XYCoord) {\n  const hoverElement = document.elementFromPoint(clientOffset.x, clientOffset.y)\n\n  // find ui-draggable classname\n  const overSnippet = findSnippet(hoverElement as NonNullable<HTMLElement>)\n\n  const snippetIndex = overSnippet && overSnippet.dataset.index\n  const placeholderIndex = overSnippet ? Number(overSnippet.dataset.index) : -1\n\n  const isOverSnippet = !isNil(snippetIndex)\n\n  return {\n    overSnippet,\n    placeholderIndex,\n    isOverSnippet: isOverSnippet,\n  }\n}\n\nexport function renderSnippets(props: { [key: string]: any } = {}) {\n  return (snippetList?: SnippetProps[]) =>\n    compose(\n      mapIndexed((item: SnippetProps, idx: number) => (\n        <Snippet\n          {...props}\n          key={item.id}\n          wrapperId={`${item.id}`}\n          item={item}\n          draggable={false}\n          tabSize={item.tabSize}>\n          {item.inline ? (\n            <div\n              id={`${item.id}`}\n              className={`${item.id}`}\n              css={{ padding: 16 }}\n              dangerouslySetInnerHTML={{ __html: item.html }}\n            />\n          ) : (\n            <item.Component\n              id={item.id}\n              className={item.id}\n              item={item}\n              index={idx}\n            />\n          )}\n        </Snippet>\n      )),\n      pathOr([], [])\n    )(snippetList)\n}\n","export default {\n  CARD: 'card',\n  BOARD: 'board',\n  SNIPPET: 'snippet',\n}\n","import React from 'react'\nimport styled, { css } from 'styled-components'\nimport { DatePicker, TimePicker } from 'antd'\nimport { DatePickerProps } from 'antd/lib/date-picker'\n\nconst borderLess = css`\n  &.ant-picker-borderless {\n    border: none;\n    border-bottom: 1px solid #d9d9d9 !important;\n    border-bottom-left-radius: 0;\n    border-bottom-right-radius: 0;\n  }\n\n  &.ant-picker-focused:not(.ant-picker-borderless) {\n    box-shadow: 0 0 0 1px ${p => p.theme.primary};\n  }\n`\n\nconst RangePicker = styled(DatePicker.RangePicker)`\n  &.ant-picker {\n    border: 1px solid #d9d9d9;\n\n    &:hover,\n    &:focus {\n      border-color: ${p => p.theme.secondary};\n    }\n\n    &.ant-picker-focused {\n      box-shadow: 0 0 0 1px ${p => p.theme.primary};\n    }\n  }\n`\n\nconst StyledDatePicker: any = styled(DatePicker)`\n  &.ant-picker {\n    border: 1px solid #d9d9d9;\n\n    &:hover,\n    &:focus {\n      border-color: ${p => p.theme.secondary};\n    }\n\n    .ant-picker-suffix {\n      color: ${p => p.theme.primary};\n    }\n\n    ${borderLess};\n  }\n`\n\nconst StyledTimePicker = styled(TimePicker)`\n  &.ant-picker {\n    border: 1px solid #d9d9d9;\n\n    &:hover,\n    &:focus {\n      border-color: ${p => p.theme.secondary};\n    }\n\n    .ant-picker-suffix {\n      color: ${p => p.theme.primary};\n    }\n\n    ${borderLess};\n  }\n`\n\nfunction DatePickerComponent(props: DatePickerProps) {\n  return <StyledDatePicker {...props} />\n}\n\nexport {\n  DatePickerComponent as DatePicker,\n  RangePicker,\n  StyledTimePicker as TimePicker,\n}\n\nexport default DatePickerComponent\n","import React from 'react'\n\nexport enum divisions {\n  'PATH' = 'PATH',\n  'RAD' = 'RAD',\n}\n\nexport type User = {\n  id: React.Key\n  division: divisions\n}\n\nexport class AuthService {}\n\nexport function useLogin() {}\n\nexport default new AuthService()\n","import React from 'react'\n// import { isNil } from 'ramda'\nimport Cookies from 'js-cookie'\nimport { User, divisions } from '@/services/authService'\n\nexport type LogoutFn = (params?: { onCompleted?: () => any }) => any\n\nexport type AuthContextType = {\n  logout: LogoutFn\n  isAuthenticated: boolean\n  user: User\n  setUser: React.Dispatch<React.SetStateAction<User | null>>\n  setIsAuthenticated: React.Dispatch<React.SetStateAction<boolean>>\n}\n\nexport const AuthContext = React.createContext<AuthContextType>({\n  isAuthenticated: false,\n  user: {} as User,\n  logout: () => ({}),\n  setUser: (_: React.SetStateAction<User | null>) => ({}),\n  setIsAuthenticated: (_: React.SetStateAction<boolean>) => ({}),\n})\n\nconst _user = Cookies.getJSON('vghks_user')\n// const _token = Cookies.get('vghks_token')\n\nexport function AuthProvider(props: any) {\n  const [isAuthenticated, setIsAuthenticated] = React.useState(\n    // !isNil(_user) && !isNil(_token)\n    true\n  )\n\n  const [user, setUser] = React.useState<User>({\n    ..._user,\n    id: 0,\n    division: divisions.PATH,\n  })\n\n  const logout = React.useCallback(({ onCompleted } = {}) => {\n    Cookies.remove('vghks_token')\n    Cookies.remove('vghks_user')\n\n    setIsAuthenticated(false)\n\n    if (onCompleted) {\n      onCompleted()\n    }\n  }, [])\n\n  const value = React.useMemo(\n    () => ({\n      isAuthenticated,\n      setIsAuthenticated,\n      setUser,\n      logout,\n      user,\n    }),\n    [isAuthenticated, logout, user, setUser, setIsAuthenticated]\n  )\n\n  return <AuthContext.Provider value={value} {...props} />\n}\n\nexport function useAuth() {\n  const context = React.useContext(AuthContext)\n  if (context === undefined) {\n    throw new Error(`useAuth must be used within a AuthProvider`)\n  }\n  return context\n}\n\nexport default useAuth\n","import React from 'react'\n\ntype Props = {\n  /**\n   * 開關 Modal 時希望處理的事情\n   */\n  onRequestOpen?: () => any\n}\n\nexport default function useVisible({ onRequestOpen }: Props = {}) {\n  const [visible, setVisible] = React.useState(false)\n\n  const handleVisible: any = (evt: React.MouseEvent<HTMLElement>) => {\n    setVisible(prev => !prev)\n\n    if (onRequestOpen) {\n      onRequestOpen()\n    }\n  }\n\n  const handleClose = () => {\n    setVisible(false)\n  }\n\n  return [visible, handleVisible, handleClose]\n}\n","import { atom, useRecoilState } from 'recoil'\nimport Store from 'store'\nimport { setComponentByTab } from '@/components/snippet-template-list'\n\nexport const reportListState = atom({\n  key: 'reportListState',\n  default: setComponentByTab(Store.get('reportListState') || []),\n})\n\n// 輸入報告清單\nexport function useReportList() {\n  return useRecoilState(reportListState)\n}\n","import React from 'react'\nimport store from 'store'\nimport moment from 'moment'\nimport { update, length, keys, pathOr, map, mergeAll } from 'ramda'\nimport {\n  Mutation,\n  MutationOptions,\n  DataSource,\n  SnippetProps,\n} from '@/constants/types'\nimport { useReportList } from '@/data/useReport'\nimport { uuid } from '@/utils/webHelper'\nconst { compose } = require('ramda')\n\nexport const useReports = () => {\n  const [data, setData] = React.useState<DataSource>({\n    content: [],\n    total: 0,\n    totalPages: 0,\n  })\n\n  const [reportList, setReportList] = useReportList()\n\n  const refetch = (values?: any) => {\n    setData({\n      content: reportList,\n      total: length(reportList),\n      totalPages: Math.floor(length(reportList) / 10) + 1,\n    })\n  }\n\n  return {\n    data,\n    refetch,\n    loading: false,\n    reportList,\n    setReportList,\n  }\n}\n\nexport function useReportItem(id: string) {\n  const [reportList] = useReportList()\n\n  const [data, setData] = React.useState<any>()\n\n  React.useEffect(() => {\n    const _data = reportList.find((x: any) => x.id === id)\n    const valueById = pathOr({}, ['data'], _data)\n\n    setData({\n      ..._data,\n      setting: compose(\n        mergeAll,\n        map((key: string) => ({\n          [key]: compose(\n            map((x: SnippetProps) => ({\n              ...x,\n              setting: {\n                ...x.setting,\n                value: pathOr(undefined, [x.id], valueById),\n              },\n            })),\n            pathOr([], ['setting', key])\n          )(_data),\n        })),\n        keys,\n        pathOr({}, ['setting'])\n      )(_data),\n    })\n  }, [id]) // eslint-disable-line\n\n  return data\n}\n\nexport const useAddNewReport = ({ onCompleted }: MutationOptions = {}) => {\n  const [reportList, setReportList] = useReportList()\n  const handler = (values: any) => {\n    let id = uuid()\n    let newList = [\n      ...reportList,\n      {\n        ...values,\n        id,\n        createdAt: moment(),\n        createdAtStr: moment().format('YYYY/MM/DD HH:mm'),\n        updatedAt: moment(),\n        updatedAtStr: moment().format('YYYY/MM/DD HH:mm'),\n      },\n    ]\n\n    setReportList(newList)\n    store.set('reportListState', newList)\n\n    if (onCompleted) {\n      onCompleted({ ...values, id })\n    }\n  }\n  return [false, handler] as Mutation\n}\n\nexport const useUpdateReport = ({ onCompleted }: MutationOptions = {}) => {\n  const [reportList, setReportList] = useReportList()\n\n  const handler = (values: any) => {\n    let index = reportList.findIndex((x: any) => `${x.id}` === `${values.id}`)\n    let newList = update(\n      index,\n      {\n        ...values,\n        updatedAt: moment(),\n        updatedAtStr: moment().format('YYYY/MM/DD HH:mm'),\n      },\n      reportList\n    )\n    setReportList(newList)\n    store.set('reportListState', newList)\n\n    if (onCompleted) {\n      onCompleted()\n    }\n  }\n  return [false, handler] as Mutation\n}\n","import { Input } from 'antd'\nimport styled, { css } from 'styled-components'\n\nconst borderLess = css`\n  &.ant-input-borderless {\n    border: none;\n    border-bottom: 1px solid #d9d9d9;\n    border-bottom-left-radius: 0;\n    border-bottom-right-radius: 0;\n  }\n\n  &:active:not(.ant-input-borderless) {\n    box-shadow: 0 0 0 1px ${p => p.theme.primary};\n  }\n`\n\nconst StyledInput = styled(Input)`\n  &.ant-input-affix-wrapper .ant-input,\n  &.ant-input {\n    border-color: #d9d9d9;\n\n    &:hover,\n    &:focus {\n      border-color: ${p => p.theme.secondary};\n    }\n\n    ${borderLess};\n  }\n`\n\nconst Search = styled(Input.Search)`\n  &.ant-input-search {\n    .ant-input {\n      border-color: #d9d9d9;\n\n      &:hover,\n      &:focus {\n        border-color: ${p => p.theme.secondary};\n      }\n\n      &:focus {\n        box-shadow: 0 0 0 1px ${p => p.theme.primary};\n      }\n    }\n\n    .anticon-search {\n      font-size: 20px;\n      color: ${p => p.theme.primary};\n    }\n  }\n`\n\nconst TextArea = styled(Input.TextArea)`\n  &.ant-input {\n    resize: none;\n    border: 1px solid #d9d9d9;\n\n    &:hover,\n    &:focus {\n      border-color: ${p => p.theme.secondary};\n    }\n\n    ${borderLess};\n  }\n`\n\nexport { StyledInput as Input, TextArea, Search }\n\nexport default StyledInput\n","import React from 'react'\nimport { Table, Empty, Tooltip } from 'antd'\nimport { TableProps } from 'antd/lib/table'\nimport { CloseOutlined, PlusOutlined } from '@ant-design/icons'\nimport styled from 'styled-components'\n\nconst StyledTable: any = styled(Table)`\n  &.ant-table-wrapper {\n    .ant-pagination-prev .ant-pagination-item-link,\n    .ant-pagination-next .ant-pagination-item-link {\n      border-color: ${p => p.theme.pagination};\n      border-radius: 6px;\n      color: ${p => p.theme.pagination};\n    }\n\n    .ant-pagination-item {\n      border-color: ${p => p.theme.pagination};\n    }\n\n    .ant-pagination-item a {\n      color: ${p => p.theme.pagination};\n    }\n\n    .ant-pagination-item-active,\n    .ant-pagination-item-active:focus,\n    .ant-pagination-item:hover {\n      border-color: ${p => p.theme.pagination};\n      background: ${p => p.theme.pagination};\n\n      a {\n        color: #fff;\n      }\n    }\n\n    .ant-table-pagination.ant-pagination {\n      margin-top: 32px;\n    }\n\n    .ant-pagination-prev:hover .ant-pagination-item-link,\n    .ant-pagination-next:hover .ant-pagination-item-link {\n      border-color: ${p => p.theme.pagination};\n      background: ${p => p.theme.pagination};\n      color: #fff;\n    }\n\n    .ant-pagination-simple-pager {\n      color: ${p => p.theme.pagination};\n    }\n  }\n\n  .ant-table {\n    background: transparent;\n  }\n\n  .ant-table-tbody > tr > td {\n    height: 40px;\n    padding-top: 10px;\n    padding-bottom: 10px;\n    line-height: 1em;\n    color: #4a4a4a;\n    background: transparent !important;\n    border-bottom: 1px solid #e9e9e9;\n  }\n\n  .ant-table-thead > tr > th {\n    padding: 12px;\n    background: ${p => p.theme.primary};\n    border-bottom: 1px solid #e9e9e9;\n    color: #fff;\n    font-weight: 500;\n  }\n`\n\ntype Props<T> = TableProps<T> & {\n  editable?: boolean\n  isRowDeletable?: (row: T) => boolean\n  onAddRowClick?: (param?: any) => any\n  onDeleteRowClick?: (param?: any) => any\n  isCanEdit?: any\n}\n\nfunction TableComponent<T = any>({\n  editable = false,\n  columns = [],\n  onAddRowClick,\n  isRowDeletable = () => true,\n  onDeleteRowClick,\n  isCanEdit = '',\n  ...props\n}: Props<T>) {\n  const _columns = React.useMemo(() => {\n    let canEdit: boolean = true\n    if (!editable) {\n      return columns\n    }\n    if (isCanEdit !== '') {\n      canEdit = isCanEdit\n    }\n\n    const handleRowDelete = (key: React.Key) => () => {\n      if (onDeleteRowClick) {\n        onDeleteRowClick(key)\n      }\n    }\n\n    return [\n      {\n        title: (\n          <Tooltip placement=\"topLeft\" title=\"新增\">\n            <PlusOutlined\n              className=\"ml-1 relative\"\n              style={{ top: -3 }}\n              onClick={canEdit ? onAddRowClick : undefined}\n            />\n          </Tooltip>\n        ),\n        width: 50,\n        render: (_: any, __: any, idx: number) => (\n          <div className=\"text-center\">#{idx + 1}</div>\n        ),\n      },\n      ...columns,\n      {\n        width: 50,\n        render: (_: any, r: any, idx: number) => (\n          <Tooltip placement=\"topLeft\" title=\"刪除\">\n            <CloseOutlined\n              onClick={isRowDeletable(r) ? handleRowDelete(r.id) : undefined}\n            />\n          </Tooltip>\n        ),\n      },\n    ]\n  }, [columns, editable]) // eslint-disable-line\n\n  return (\n    <StyledTable\n      columns={_columns}\n      locale={{\n        emptyText: (\n          <Empty\n            image={Empty.PRESENTED_IMAGE_SIMPLE}\n            description={\n              <span>\n                <span className=\"d-block\">\n                  尚無資料，請點選「＋新增」新增資料。\n                </span>\n              </span>\n            }\n          />\n        ),\n      }}\n      {...props}>\n      {props.children}\n    </StyledTable>\n  )\n}\n\nTableComponent.displayName = 'Table'\nTableComponent.Column = Table.Column\n\nexport default TableComponent\n","export default function getDisplayName(Component: any) {\n  return (\n    Component.displayName ||\n    Component.name ||\n    (typeof Component === 'string' && Component.length > 0\n      ? Component\n      : 'Unknown')\n  )\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport {\n  EditOutlined,\n  DeleteOutlined,\n  RightOutlined,\n  LeftOutlined,\n} from '@ant-design/icons'\nimport cx from 'classnames'\nimport { Tooltip } from 'antd'\n\ntype Props = {\n  visible?: boolean\n  editable?: boolean\n  tabIndex: number\n  onEdit: () => void\n  onDelete: () => void\n  onShift: (shift: number) => void\n}\n\nconst ToolbarWrapper = styled.div`\n  position: absolute;\n  top: 8px;\n  right: 15px;\n  visibility: hidden;\n  transition: visibility 0s, opacity 0.3s, max-height 0.6s linear;\n  opacity: 0;\n  z-index: 1;\n\n  &.is--over {\n    visibility: visible;\n    transition: visibility 0s, opacity 0.3s, max-height 0.6s linear;\n    opacity: 0.8;\n  }\n`\n\nexport const SHIFT_TYPES = {\n  LEFT: -1,\n  RIGHT: 1,\n}\n\nexport default function SnippetToolbar({\n  tabIndex,\n  onEdit,\n  onDelete,\n  onShift,\n  editable = true,\n  visible = false,\n}: Props) {\n  const handleShift = (shift: number) => () => {\n    onShift(shift)\n  }\n\n  return (\n    <ToolbarWrapper\n      className={cx('text-primary', {\n        'is--over': tabIndex === 1,\n        hidden: !visible,\n      })}>\n      <Tooltip title=\"向左縮排\">\n        <LeftOutlined\n          className=\"mr-2 cursor-pointer\"\n          onClick={handleShift(SHIFT_TYPES.LEFT)}\n        />\n      </Tooltip>\n      <Tooltip title=\"向右縮排\">\n        <RightOutlined\n          className=\"mr-2 cursor-pointer\"\n          onClick={handleShift(SHIFT_TYPES.RIGHT)}\n        />\n      </Tooltip>\n      {editable && (\n        <Tooltip title=\"編輯\">\n          <EditOutlined className=\"mr-2 cursor-pointer\" onClick={onEdit} />\n        </Tooltip>\n      )}\n      <Tooltip title=\"刪除\">\n        <DeleteOutlined className=\"cursor-pointer\" onClick={onDelete} />\n      </Tooltip>\n    </ToolbarWrapper>\n  )\n}\n\nexport { SnippetToolbar }\n","/* eslint-disable no-undef */\nimport React from 'react'\nimport { clone, is, equals } from 'ramda'\nimport envStore from '@/constants/env'\nimport hoist from 'hoist-non-react-statics'\nimport getDisplayName from '@/utils/get-display-name'\n\n// https://stackoverflow.com/questions/57047722/how-to-disable-and-enable-tinymce-with-a-button-and-jquery\n\nlet defaultConfig = {\n  block_formats: 'Heading 1=h1;Heading 2=h2;Heading 3=h3;Paragraph=p',\n  inline: true,\n  menubar: false,\n  external_plugins: {\n    dropdown: `${envStore.publicUrl}/js/tinymce/plugins/dropdown/plugin.js`,\n    inputtext: `${envStore.publicUrl}/js/tinymce/plugins/inputtext/plugin.js`,\n  },\n  fontsize_formats: '10px 12px 14px 16px 18px 20px 24px 32px 36px',\n  force_br_newlines: true,\n  force_p_newlines: false,\n  forced_root_block: 'div',\n  plugins: 'image textcolor lists emoticons link table media code',\n  tinymce: `${envStore.publicUrl}/js/tinymce/4.9.2/tinymce.min.js`,\n  link_title: false,\n  table_toolbar:\n    'tablemergecells tablesplitcells | tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol',\n  textcolor_cols: '5',\n  content_security_policy: '',\n  allow_unsafe_link_target: true,\n  relative_urls: false,\n  convert_urls: false,\n  valid_elements: '*[*]',\n  valid_children:\n    'h1[div|strong|b],h2[div|strong|b],h3[div|strong|b],p[div|strong|b]',\n  toolbar1:\n    'undo redo | custom-formatselect fontsizeselect | bold italic underline strikethrough forecolor removeformat | align numlist bullist outdent indent | link | fontawesome | inputtext | dropdown',\n}\n\nexport default function withTinyMCE(ComposedComponent) {\n  class withTinyMCE extends React.Component {\n    static displayName = `withTinyMCE(${getDisplayName(ComposedComponent)})`\n\n    static defaultProps = {\n      inline: false,\n    }\n\n    state = {\n      top: 0,\n      tabIndex: -1,\n      editor: null,\n      toolbarMouseOver: false,\n      toolbarVisible: false,\n    }\n\n    componentDidMount() {\n      if (this.props.inline) {\n        this.initialize(this.props.item)\n      }\n    }\n\n    componentDidUpdate(prevProps, prevState) {\n      if (!this.props.isDragging && prevProps.isDragging) {\n        this.setState({ toolbarVisible: false })\n      }\n      if (!this.props.inline) {\n        return\n      }\n      if (!equals(this.props.id, prevProps.id)) {\n        this.initialize(this.props.item)\n      }\n      if (!equals(this.props.item?.html, prevProps.item?.html)) {\n        this.state.editor.setContent(this.props.item?.html)\n      }\n    }\n\n    initialize = snippet => {\n      if (this._get(snippet.id)) {\n        this.remove(snippet.id)\n      }\n\n      const _config = clone(snippet.config || defaultConfig)\n\n      tinymce.init({\n        ..._config,\n        selector: `#${snippet.id}`,\n        language_url: `${envStore.publicUrl}/js/tinymce/langs/zh_TW.js`,\n        content: snippet.html,\n        setup: editor => {\n          editor.on('blur', e => this.onEditorBlur(e))\n          editor.on('focus', e => this.onEditorFocus(e))\n\n          if (is(Function, _config.execInit)) {\n            _config.execInit(editor)\n          }\n\n          if (snippet.html) {\n            editor.on('init', () => editor.setContent(snippet.html))\n          }\n        },\n        init_instance_callback: editor => {\n          if (editor) {\n            this.setState({ editor })\n          }\n          editor.undoManager.add()\n        },\n      })\n    }\n\n    onEditorBlur = e => {\n      const { updateSnippet, item } = this.props\n      if (updateSnippet) {\n        updateSnippet({ ...item, html: e.target.getContent() })\n      }\n    }\n\n    // 這裡應該不用做事\n    onEditorFocus = () => {\n      // const { index } = this.props\n      // $(`.sort-item`).removeClass(s.focus)\n      // $(`.sort-item:nth-child(${index + 1})`).addClass(s.focus)\n    }\n\n    onClick = () => {\n      const { toolbarVisible } = this.state\n\n      if (!toolbarVisible) {\n        const snippetEl = document.getElementById(this.props.id)\n        const top = snippetEl.offsetTop + 30\n\n        this.setState({ toolbarVisible: true, tabIndex: 1, top })\n      }\n    }\n\n    onBlur = () => {\n      const { toolbarVisible, toolbarMouseOver } = this.state\n      if (toolbarVisible && !toolbarMouseOver) {\n        this.setState({ toolbarVisible: false, tabIndex: -1 })\n      }\n    }\n\n    _get = id => {\n      return tinymce.get(id)\n    }\n\n    remove = id => {\n      tinymce.remove(this._get(id || this.props.id))\n    }\n\n    render() {\n      return <ComposedComponent {...this.state} {...this.props} />\n    }\n  }\n\n  return hoist(withTinyMCE, ComposedComponent)\n}\n","import React from 'react'\nimport { DragSource, ConnectDragPreview, ConnectDragSource } from 'react-dnd'\nimport { getEmptyImage } from 'react-dnd-html5-backend'\nimport { mergeRight } from 'ramda'\nimport cx from 'classnames'\nimport { confirm } from '@/utils/message'\nimport { SnippetProps } from '@/constants/types'\nimport ItemTypes from '@/constants/item-types'\nimport SnippetToolbar from './snippet-toolbar'\nimport theme from '../theme'\nimport withTinyMCE from './withTinyMCE'\nconst { compose } = require('ramda')\n\ntype Props = {\n  id?: React.Key\n  wrapperId?: string\n  className?: string\n  style?: React.CSSProperties\n  index?: number\n  tabSize?: number\n  isDragging?: boolean\n  draggable?: boolean\n  inline?: boolean\n  fromMenu?: boolean\n  item: SnippetProps\n  connectDragPreview?: ConnectDragPreview\n  connectDragSource?: ConnectDragSource\n  children?: React.ReactNode\n  updateSnippet?(data: any): void\n  findSnippet?(id: React.Key): { index: number; snippet: SnippetProps }\n  shiftSnippet?(id: React.Key, shift: number): any\n  removeSnippet?(index: number): void\n}\n\ntype State = {\n  tabIndex: number\n  editModalVisible: boolean\n}\n\nconst withDragSource = DragSource(\n  ItemTypes.BOARD,\n  {\n    beginDrag(props: Props) {\n      return {\n        ...props,\n        fromMenu: false,\n        originalIndex: (props as any).findSnippet(props.id).index,\n      }\n    },\n    canDrag(props: Props) {\n      return !!(props.draggable && !props.fromMenu)\n    },\n  },\n  (connect, monitor) => ({\n    connectDragSource: connect.dragSource(),\n    connectDragPreview: connect.dragPreview(),\n    isDragging: monitor.isDragging(),\n  })\n)\n\nclass Snippet extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props)\n\n    this.state = {\n      tabIndex: -1,\n      editModalVisible: false,\n    }\n  }\n\n  componentDidMount = () => {\n    const { connectDragPreview } = this.props\n    if (connectDragPreview) {\n      connectDragPreview(getEmptyImage() /* { anchorX: 0.2, anchorY: 0.1 } */)\n    }\n  }\n\n  handleShift = (shift: number) => {\n    const { id, shiftSnippet } = this.props\n\n    if (shiftSnippet && id) {\n      shiftSnippet(id, shift)\n    }\n  }\n\n  handleRemove = () => {\n    confirm({\n      content: '刪除後將無法還原，確認繼續？',\n      title: '確認要刪除這個模版?',\n      onOk: () => {\n        ;(this.props as any).removeSnippet(this.props.index)\n      },\n      onCancel() {},\n    })\n  }\n\n  handleEditModalVisible = () => {\n    this.setState(prev => ({ editModalVisible: !prev.editModalVisible }))\n  }\n\n  _onMouseOver = () => {\n    this.setState({ tabIndex: 1 })\n  }\n\n  _onMouseOut = () => {\n    this.setState({ tabIndex: -1 })\n  }\n\n  render() {\n    const {\n      props: {\n        connectDragSource = (node: any) => node,\n        connectDragPreview = (node: any) => node,\n        wrapperId,\n        index,\n        draggable,\n        style = {},\n        className = 'mb-3',\n        item,\n      },\n      state: { tabIndex, editModalVisible },\n    } = this\n\n    const styles = mergeRight(\n      getItemStyles({ ...this.props, ...this.state }),\n      style\n    )\n\n    return connectDragSource(\n      connectDragPreview(\n        <div\n          id={wrapperId}\n          style={styles}\n          className={cx(\n            'ui-sortable',\n            { 'ui-draggable': draggable },\n            className\n          )}\n          tabIndex={tabIndex}\n          onMouseOver={this._onMouseOver}\n          onMouseOut={this._onMouseOut}\n          data-index={index}>\n          <SnippetToolbar\n            visible={draggable}\n            tabIndex={tabIndex}\n            editable={!item.inline}\n            onEdit={this.handleEditModalVisible}\n            onDelete={this.handleRemove}\n            onShift={this.handleShift}\n          />\n          {React.Children.map(this.props.children, child =>\n            React.cloneElement(child as any, {\n              editModalVisible,\n              handleEditModalVisible: this.handleEditModalVisible,\n            })\n          )}\n        </div>\n      )\n    )\n  }\n}\n\nfunction getItemStyles(props: Partial<Props & State>): React.CSSProperties {\n  const { isDragging, tabIndex, draggable, tabSize = 0 } = props\n\n  const isFocus = tabIndex === 1\n\n  return {\n    ...(isFocus ? { borderRadius: 3 } : {}),\n    ...(draggable\n      ? { border: `1px dashed ${draggable ? '#e7e7e7' : 'transparent'}` }\n      : {\n          outlineColor: isFocus ? theme.purple150 : 'transparent',\n        }),\n    cursor: 'default',\n    position: 'relative',\n    display: isDragging ? 'none' : 'block',\n    marginLeft: tabSize * 50,\n  }\n}\n\nexport default compose(withDragSource, withTinyMCE)(Snippet) as typeof Snippet\n","import { Tabs } from 'antd'\nimport styled from 'styled-components'\n\nconst bg = 'rgb(43,193,183)'\n\nexport default styled(Tabs)`\n  &.ant-tabs {\n    .ant-tabs-tab {\n      display: flex;\n      align-items: center;\n      padding: 10px 24px !important;\n      margin-right: 4px !important;\n      color: #fff !important;\n      border-color: ${bg} !important;\n      background: ${bg} !important;\n      border-top-left-radius: 12px !important;\n      border-top-right-radius: 12px !important;\n    }\n\n    .ant-tabs-tab-active {\n      border-color: #fff !important;\n      background: #fff !important;\n\n      svg path {\n        fill: ${p => p.theme.primary} !important;\n      }\n    }\n\n    .ant-tabs-tab .anticon {\n      color: #fff !important;\n    }\n\n    .ant-tabs-tab.is--over {\n      border: 1px dashed lightgrey !important;\n    }\n\n    .ant-tabs-tab.is--dragging {\n      opacity: 0.3;\n    }\n\n    > .ant-tabs-nav .ant-tabs-nav-add,\n    .ant-tabs > div > .ant-tabs-nav .ant-tabs-nav-add {\n      background: transparent;\n      border-color: transparent;\n      color: ${p => p.theme.darkGrey};\n\n      .anticon-plus {\n        color: ${p => p.theme.darkGrey};\n      }\n\n      .anticon-plus:hover {\n        color: ${p => p.theme.primary};\n      }\n    }\n\n    .ant-tabs-tab-btn:focus,\n    .ant-tabs-tab-remove:focus,\n    .ant-tabs-tab-btn:active,\n    .ant-tabs-tab-remove:active,\n    .ant-tabs-tab.ant-tabs-tab-active .ant-tabs-tab-btn {\n      color: ${p => p.theme.secondary} !important;\n    }\n  }\n\n  &.ant-tabs-top > .ant-tabs-nav,\n  &.ant-tabs-top > div > .ant-tabs-nav {\n    margin-bottom: 0;\n  }\n\n  &.ant-tabs-top > .ant-tabs-nav::before {\n    border-bottom: none;\n  }\n`\n","import React from 'react'\nimport { DragSource, DropTarget } from 'react-dnd'\nimport cx from 'classnames'\nimport { compose } from 'ramda'\nimport Tabs from '@/components/tabs'\n\n// Drag & Drop node\nclass TabNode extends React.Component {\n  render() {\n    const {\n      connectDragSource,\n      connectDropTarget,\n      isDragging,\n      isOver,\n      moveTabNode,\n      draggingItem,\n      id,\n      ...props\n    } = this.props\n\n    return connectDragSource(\n      connectDropTarget(\n        React.cloneElement(props.children, {\n          className: cx(props.children.props.className, {\n            'is--dragging': isDragging,\n            'is--over': isOver && id !== draggingItem?.id,\n          }),\n        })\n      )\n    )\n  }\n}\n\nconst withDropTarget = DropTarget(\n  'DND_NODE',\n  {\n    drop(props, monitor) {\n      const dragKey = monitor.getItem().index\n      const hoverKey = props.index\n\n      if (dragKey === hoverKey) {\n        return\n      }\n\n      props.moveTabNode(dragKey, hoverKey)\n      monitor.getItem().index = hoverKey\n    },\n  },\n  (connect, monitor) => ({\n    connectDropTarget: connect.dropTarget(),\n    isOver: monitor.isOver(),\n    draggingItem: monitor.getItem(),\n  })\n)\n\nconst withDragSource = DragSource(\n  'DND_NODE',\n  {\n    beginDrag(props) {\n      return {\n        id: props.id,\n        index: props.index,\n      }\n    },\n  },\n  (connect, monitor) => ({\n    connectDragSource: connect.dragSource(),\n    isDragging: monitor.isDragging(),\n  })\n)\n\nconst WrapTabNode = compose(withDropTarget, withDragSource)(TabNode)\n\nexport default class DraggableTabs extends React.Component {\n  static defaultProps = {\n    order: [],\n  }\n\n  moveTabNode = (dragKey, hoverKey) => {\n    const { children, order, moveTabNode } = this.props\n    const newOrder = order.slice()\n\n    React.Children.forEach(children, c => {\n      if (newOrder.indexOf(c.key) === -1) {\n        newOrder.push(c.key)\n      }\n    })\n\n    const dragIndex = newOrder.indexOf(dragKey)\n    const hoverIndex = newOrder.indexOf(hoverKey)\n\n    newOrder.splice(dragIndex, 1)\n    newOrder.splice(hoverIndex, 0, dragKey)\n\n    moveTabNode(newOrder)\n  }\n\n  renderTabBar = (props, DefaultTabBar) => (\n    <DefaultTabBar {...props}>\n      {node => (\n        <WrapTabNode\n          key={node.key}\n          id={node.key}\n          index={node.key}\n          moveTabNode={this.moveTabNode}>\n          {node}\n        </WrapTabNode>\n      )}\n    </DefaultTabBar>\n  )\n\n  render() {\n    const { moveTabNode, children, ...props } = this.props\n\n    return (\n      <Tabs renderTabBar={this.renderTabBar} {...props}>\n        {children}\n      </Tabs>\n    )\n  }\n}\n\nDraggableTabs.TabPane = Tabs.TabPane\n","import moment from 'moment'\nimport { envStore } from '@/constants/env'\nconst {\n  forEach,\n  addIndex,\n  map,\n  isEmpty,\n  either,\n  compose,\n  not,\n  isNil: RisNil,\n  path,\n} = require('ramda')\n\nexport function queryString(search: string): { [key: string]: any } {\n  if (!search) {\n    search = window.location.search\n  }\n\n  const params = new URLSearchParams(search)\n\n  let result: object | any = {}\n\n  params.forEach((value: string, key: string) => (result[key] = value))\n\n  return result\n}\n\nexport function uuid() {\n  let d = Date.now()\n  if (\n    typeof performance !== 'undefined' &&\n    typeof performance.now === 'function'\n  ) {\n    d += performance.now()\n  }\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {\n    const r = (d + Math.random() * 16) % 16 | 0\n    d = Math.floor(d / 16)\n    return (c === 'x' ? r : (r & 0x3) | 0x8).toString(16)\n  })\n}\n\nexport function isUUID(uuid: string) {\n  return /^[0-9a-f]{8}-[0-9a-f]{4}-[0-5][0-9a-f]{3}-[089ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(\n    uuid\n  )\n}\n\nexport const forEachIndexed = addIndex(forEach)\nexport const mapIndexed: any = addIndex(map)\n\nexport const isNil = either(isEmpty, RisNil)\n\nexport const hasPath = (namedPath: Array<string | number>) =>\n  compose(not, isNil, path(namedPath))\n\nexport const getRangeDate = (\n  date: [moment.Moment, moment.Moment],\n  dateFormat?: string\n) => {\n  const [startDate, stopDate] = date\n\n  return [\n    startDate\n      ? dateFormat\n        ? startDate.format(dateFormat)\n        : startDate.toISOString()\n      : undefined,\n    stopDate\n      ? dateFormat\n        ? stopDate.format(dateFormat)\n        : stopDate.toISOString()\n      : undefined,\n  ]\n}\n\nexport const toThousandSeparator = (number: number | string) => {\n  if (number && (typeof number === 'number' || isNaN(number as any))) {\n    return number.toLocaleString()\n  }\n  return number\n}\n\nexport const capitalize = (s: string) => {\n  if (typeof s !== 'string') return ''\n  return s.charAt(0).toUpperCase() + s.slice(1)\n}\n\nexport function getNumberFromString(str?: string) {\n  if (!str) {\n    return str\n  }\n  return str.replace(/[^\\d.]/g, '')\n}\n\nexport const redirect = () => {\n  if (!envStore.isEnvDev && window.location.pathname === '/') {\n    window.location.href = envStore.appUrl\n    return\n  }\n}\n\nexport function downloadAsJson({\n  json,\n  filename,\n}: {\n  json: object\n  filename: string\n}) {\n  const dataStr =\n    'data:text/json;charset=utf-8,' +\n    encodeURIComponent(JSON.stringify(json, null, 2))\n  const downloadAnchorNode = document.createElement('a')\n  downloadAnchorNode.setAttribute('href', dataStr)\n  downloadAnchorNode.setAttribute('download', filename + '.json')\n  document.body.appendChild(downloadAnchorNode) // required for firefox\n  downloadAnchorNode.click()\n  downloadAnchorNode.remove()\n\n  return json\n}\n\nexport function selectFile({\n  accept = '*',\n  callback,\n}: {\n  accept?: string\n  callback?: (files: FileList | null) => any\n}) {\n  const input = document.createElement('input')\n  input.setAttribute('type', 'file')\n  input.setAttribute('class', 'hidden')\n  input.setAttribute('accept', accept)\n\n  if (callback) {\n    input.addEventListener('change', () => callback(input.files))\n  }\n\n  input.click()\n}\n\nexport async function readFile<T = any>(file: File): Promise<T> {\n  return new Promise((resolve, reject) => {\n    const fileReader = new FileReader()\n    fileReader.addEventListener('load', () => resolve(fileReader.result as any))\n    fileReader.onerror = reject\n    fileReader.readAsText(file)\n  })\n}\n","import React from 'react'\nimport { replace } from 'ramda'\nimport { envStore } from '@/constants/env'\n\nexport interface UseTitleOptions {\n  restoreOnUnmount?: boolean\n}\n\nconst DEFAULT_USE_TITLE_OPTIONS: UseTitleOptions = {\n  restoreOnUnmount: false,\n}\n\nfunction useTitle(\n  title: string,\n  options: UseTitleOptions = DEFAULT_USE_TITLE_OPTIONS\n) {\n  const prevTitleRef = React.useRef(document.title)\n  document.title = replace(/%s/, title)(envStore.appTitle)\n  React.useEffect(() => {\n    if (options && options.restoreOnUnmount) {\n      return () => {\n        document.title = prevTitleRef.current // eslint-disable-line\n      }\n    } else {\n      return\n    }\n  }, []) // eslint-disable-line\n}\n\nexport default typeof document !== 'undefined'\n  ? useTitle\n  : (_title: string) => {}\n","import React from 'react'\nimport { Layout } from 'antd'\nimport cx from 'classnames'\nimport AppFooter from '@/components/app-footer'\nimport theme from '../theme'\n\ninterface PageProps {\n  children: React.ReactNode\n  style?: React.CSSProperties\n  className?: string\n  wrapperClassName?: string\n  wrapperStyle?: React.CSSProperties\n}\n\nexport function Page({ children, style, className = 'pr-10' }: PageProps) {\n  return (\n    <Layout>\n      <Layout.Content\n        style={{\n          background: `linear-gradient(-90deg,#42c2b8,${theme.primary})`,\n        }}>\n        <div\n          className={cx('pl-8 pt-6 pb-12', className)}\n          style={style}\n          css={{\n            background: 'rgb(221, 228, 237)',\n            borderTopLeftRadius: 32,\n            borderTopRightRadius: 32,\n          }}>\n          {children}\n        </div>\n      </Layout.Content>\n      <AppFooter />\n    </Layout>\n  )\n}\n","import React from 'react'\nimport { ColumnProps, TableProps, TablePaginationConfig } from 'antd/lib/table'\nimport { SpinProps } from 'antd/lib/spin'\nimport { merge } from 'ramda'\nimport { DataSource } from '@/constants/types'\nimport Table from '@/components/table'\n\ntype Props<T> = Omit<TableProps<T>, 'dataSource'> & {\n  columns: ColumnProps<T>[]\n  className?: string\n  pageNum?: number\n  dataSource: DataSource<T>\n  onChange?: (pagination: TablePaginationConfig) => any\n  loading?: boolean | SpinProps\n  rowSelection?: {\n    selectedRowKeys: any[]\n    onChange: (selectedRowKeys: any, selectedRows: any) => void\n  }\n}\n\nexport default function QueryTable<T>({\n  columns,\n  className,\n  pageNum = 1,\n  dataSource,\n  onChange,\n  loading = false,\n  rowSelection,\n  pagination,\n  ...props\n}: Props<T>) {\n  const handleTableChange = ({ current, pageSize }: TablePaginationConfig) => {\n    if (onChange) {\n      onChange({ current, pageSize })\n    }\n  }\n\n  const paginationConfig = merge<any, any>(pagination, {\n    current: pageNum,\n    pageSize: 10,\n    total: dataSource.total,\n    showSizeChanger: false,\n  }) as TablePaginationConfig\n\n  return (\n    <Table\n      rowKey=\"id\"\n      dataSource={dataSource.content}\n      columns={columns as any}\n      pagination={paginationConfig}\n      onChange={handleTableChange}\n      rowSelection={rowSelection}\n      loading={loading}\n      className={className}\n      {...props}\n    />\n  )\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { findDOMNode } from 'react-dom'\nimport { DndContext } from 'react-dnd'\nimport throttle from 'lodash.throttle'\nimport raf from 'raf'\nimport hoist from 'hoist-non-react-statics'\nimport getDisplayName from '@/utils/get-display-name'\n\nfunction noop() {}\n\nfunction intBetween(min, max, val) {\n  return Math.floor(Math.min(max, Math.max(min, val)))\n}\n\nfunction getCoords(evt) {\n  if (evt.type === 'touchmove') {\n    return {\n      x: evt.changedTouches[0].clientX,\n      y: evt.changedTouches[0].clientY,\n    }\n  }\n\n  return { x: evt.clientX, y: evt.clientY }\n}\n\nconst DEFAULT_BUFFER = 150\n\nexport function createHorizontalStrength(_buffer) {\n  return function defaultHorizontalStrength({ x, w, y, h }, point) {\n    const buffer = Math.min(w / 2, _buffer)\n    const inRange = point.x >= x && point.x <= x + w\n    const inBox = inRange && point.y >= y && point.y <= y + h\n\n    if (inBox) {\n      if (point.x < x + buffer) {\n        return (point.x - x - buffer) / buffer\n      } else if (point.x > x + w - buffer) {\n        return -(x + w - point.x - buffer) / buffer\n      }\n    }\n\n    return 0\n  }\n}\n\nexport function createVerticalStrength(_buffer) {\n  return function defaultVerticalStrength({ y, h, x, w }, point) {\n    const buffer = Math.min(h / 2, _buffer)\n    const inRange = point.y >= y && point.y <= y + h\n    const inBox = inRange && point.x >= x && point.x <= x + w\n\n    if (inBox) {\n      if (point.y < y + buffer) {\n        return (point.y - y - buffer) / buffer\n      } else if (point.y > y + h - buffer) {\n        return -(y + h - point.y - buffer) / buffer\n      }\n    }\n\n    return 0\n  }\n}\n\nexport const defaultHorizontalStrength = createHorizontalStrength(\n  DEFAULT_BUFFER\n)\n\nexport const defaultVerticalStrength = createVerticalStrength(DEFAULT_BUFFER)\n\nexport default function createScrollingComponent(WrappedComponent) {\n  class ScrollingComponent extends React.Component {\n    static displayName = `Scrolling(${getDisplayName(WrappedComponent)})`\n\n    static propTypes = {\n      onScrollChange: PropTypes.func,\n      verticalStrength: PropTypes.func,\n      horizontalStrength: PropTypes.func,\n      strengthMultiplier: PropTypes.number,\n    }\n\n    static defaultProps = {\n      useScroll: true,\n      onScrollChange: noop,\n      verticalStrength: defaultVerticalStrength,\n      horizontalStrength: defaultHorizontalStrength,\n      strengthMultiplier: 30,\n    }\n\n    static contextType = DndContext\n\n    constructor(props, ctx) {\n      super(props, ctx)\n\n      this.scaleX = 0\n      this.scaleY = 0\n      this.frame = null\n\n      this.attached = false\n      this.dragging = false\n    }\n\n    componentDidMount() {\n      if (this.props.useScroll) {\n        this._initial()\n      }\n    }\n\n    _initial() {\n      // window.document.body.addEventListener('dragover', this.handleEvent);\n      this.container = findDOMNode(this.wrappedInstance)\n      this.container.addEventListener('dragover', this.handleEvent)\n      // touchmove events don't seem to work across siblings, so we unfortunately\n      // have to attach the listeners to the body\n      window.document.body.addEventListener('touchmove', this.handleEvent)\n\n      this.clearMonitorSubscription = this.context.dragDropManager\n        .getMonitor()\n        .subscribeToStateChange(() => this.handleMonitorChange())\n    }\n\n    componentWillUnmount() {\n      if (this.props.useScroll) {\n        this._remove()\n      }\n    }\n\n    _remove() {\n      // window.document.body.removeEventListener('dragover', this.handleEvent);\n      this.container.removeEventListener('dragover', this.handleEvent)\n      window.document.body.removeEventListener('touchmove', this.handleEvent)\n      this.clearMonitorSubscription()\n      this.stopScrolling()\n    }\n\n    handleEvent = evt => {\n      if (this.dragging && !this.attached) {\n        this.attach()\n        this.updateScrolling(evt)\n      }\n    }\n\n    handleMonitorChange() {\n      const isDragging = this.context.dragDropManager.getMonitor().isDragging()\n\n      if (!this.dragging && isDragging) {\n        this.dragging = true\n      } else if (this.dragging && !isDragging) {\n        this.dragging = false\n        this.stopScrolling()\n      }\n    }\n\n    attach() {\n      this.attached = true\n      window.document.body.addEventListener('dragover', this.updateScrolling)\n      window.document.body.addEventListener('touchmove', this.updateScrolling)\n    }\n\n    detach() {\n      this.attached = false\n      window.document.body.removeEventListener('dragover', this.updateScrolling)\n      window.document.body.removeEventListener(\n        'touchmove',\n        this.updateScrolling\n      )\n    }\n\n    // Update scaleX and scaleY every 100ms or so\n    // and start scrolling if necessary\n    updateScrolling = throttle(\n      evt => {\n        const {\n          left: x,\n          top: y,\n          width: w,\n          height: h,\n        } = this.container.getBoundingClientRect()\n        const box = { x, y, w, h }\n        const coords = getCoords(evt)\n\n        // calculate strength\n        this.scaleX = this.props.horizontalStrength(box, coords)\n        this.scaleY = this.props.verticalStrength(box, coords)\n\n        // start scrolling if we need to\n        if (!this.frame && (this.scaleX || this.scaleY)) {\n          this.startScrolling()\n        }\n      },\n      100,\n      { trailing: false }\n    )\n\n    startScrolling() {\n      let i = 0\n      const tick = () => {\n        const { scaleX, scaleY, container } = this\n        const { strengthMultiplier, onScrollChange } = this.props\n\n        // stop scrolling if there's nothing to do\n        if (strengthMultiplier === 0 || scaleX + scaleY === 0) {\n          this.stopScrolling()\n          return\n        }\n\n        // there's a bug in safari where it seems like we can't get\n        // mousemove events from a container that also emits a scroll\n        // event that same frame. So we double the strengthMultiplier and only adjust\n        // the scroll position at 30fps\n        if (i++ % 2) {\n          const {\n            scrollLeft,\n            scrollTop,\n            scrollWidth,\n            scrollHeight,\n            clientWidth,\n            clientHeight,\n          } = container\n\n          const newLeft = scaleX\n            ? (container.scrollLeft = intBetween(\n                0,\n                scrollWidth - clientWidth,\n                scrollLeft + scaleX * strengthMultiplier\n              ))\n            : scrollLeft\n\n          const newTop = scaleY\n            ? (container.scrollTop = intBetween(\n                0,\n                scrollHeight - clientHeight,\n                scrollTop + scaleY * strengthMultiplier\n              ))\n            : scrollTop\n\n          onScrollChange(newLeft, newTop)\n        }\n        this.frame = raf(tick)\n      }\n\n      tick()\n    }\n\n    stopScrolling() {\n      this.detach()\n      this.scaleX = 0\n      this.scaleY = 0\n\n      if (this.frame) {\n        raf.cancel(this.frame)\n        this.frame = null\n      }\n    }\n\n    render() {\n      const {\n        // not passing down these props\n        strengthMultiplier,\n        verticalStrength,\n        horizontalStrength,\n        onScrollChange,\n        ...props\n      } = this.props\n\n      return (\n        <WrappedComponent\n          ref={ref => {\n            this.wrappedInstance = ref\n          }}\n          {...props}\n        />\n      )\n    }\n  }\n\n  return hoist(ScrollingComponent, WrappedComponent)\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport cx from 'classnames'\nimport withScroll, { createVerticalStrength } from './withScroll'\n\ninterface Props {\n  className?: string\n  useScroll?: boolean\n}\n\nconst DndScrollableElement = styled.div`\n  height: 85vh;\n  padding-top: 0;\n  overflow-y: scroll;\n\n  .report-template-builder {\n    &__main-content {\n      min-height: 371.25mm;\n      margin: 0 auto;\n      padding: 16px;\n      box-sizing: border-box;\n      max-width: 100%;\n      background: #fff;\n      border-top-right-radius: 16px;\n      border-bottom-left-radius: 16px;\n      border-bottom-right-radius: 16px;\n    }\n\n    &__contentarea {\n      min-height: 348.75mm;\n    }\n\n    &__contentarea--fixed-layout {\n      min-height: auto;\n    }\n\n    &__snippet-toolbar {\n      visibility: hidden;\n    }\n  }\n\n  .ui-draggable {\n    &:focus,\n    &:active {\n      outline: 0;\n\n      .course-builder__snippet-toolbar {\n        visibility: visible;\n        opacity: 1;\n        transition: visibility 0s, opacity 0.3s, max-height 0.6s linear;\n      }\n    }\n  }\n\n  &.is--preview {\n    height: auto;\n  }\n`\n\nconst ScrollableComponent = withScroll(DndScrollableElement)\n\nconst vStrength = createVerticalStrength(150)\n\nexport default class ReactDndProvider extends React.Component<Props> {\n  static defaultProps = {\n    useScroll: true,\n  }\n\n  render() {\n    const { className, useScroll } = this.props\n\n    return (\n      <ScrollableComponent\n        useScroll={useScroll}\n        verticalStrength={vStrength}\n        strengthMultiplier={100}\n        className={cx('report-template-builder', className)}>\n        {this.props.children}\n      </ScrollableComponent>\n    )\n  }\n}\n","import { confirm } from '@/utils/message'\nimport history from '@/utils/history'\n\nexport default function useRouteLeaveConfirm(pathname: string) {\n  const handleConfirm = () => {\n    confirm({\n      title: '確認要取消嗎？',\n      content: '取消後未儲存的資料將會消失，確認取消嗎？',\n      okText: '確認',\n      onOk: () => {\n        if (pathname) {\n          history.push(pathname)\n        }\n      },\n    })\n  }\n\n  return handleConfirm\n}\n","import styled from 'styled-components'\n\ntype Props = {\n  border?: string\n}\n\nexport default styled.div.attrs({\n  className: 'block-placeholder',\n})<Props>`\n  display: flex;\n  align-items: center;\n  padding-left: 25px;\n  height: 50px;\n  border: rgba(225, 225, 225, 0.9) 2px ${p => p.border || 'dashed'};\n  background-color: transparent;\n  margin-bottom: 35px;\n`\n","/**\n * NOTE:\n * nerver using index as list component key forever,\n * it will completely fucked up your page\n */\nimport React from 'react'\nimport { withRouter } from 'react-router-dom'\nimport { DropTarget, ConnectDropTarget, XYCoord } from 'react-dnd'\nimport {\n  equals,\n  length,\n  remove,\n  update,\n  insert,\n  cond,\n  gt,\n  lt,\n  T,\n  __,\n  add,\n  pathOr,\n  identity,\n  always,\n} from 'ramda'\nimport cx from 'classnames'\nimport { uuid } from '@/utils/webHelper'\nimport ItemTypes from '@/constants/item-types'\nimport { SnippetProps } from '@/constants/types'\nimport Snippet from '@/components/snippet'\nimport BlockPlaceholder from '@/components/snippet-block-placeholder'\nimport { canMoveSnippet, getPlaceHolderIndex } from './snippet-utils'\nconst { compose } = require('ramda')\n\ninterface Props {\n  draggingItem: any\n  isOver?: boolean\n  draggable?: boolean\n  canDrop?: boolean\n  snippetList: SnippetProps[]\n  connectDropTarget: ConnectDropTarget\n  onSnippetUpdate(data: any): void\n}\n\ninterface State {\n  placeholderIndex: number | null\n}\n\nconst withDropTarget = DropTarget<Props>(\n  ItemTypes.BOARD,\n  {\n    drop(_, monitor, component) {\n      if (!component || !component.props.draggable) {\n        return\n      }\n\n      const canDrop = monitor.canDrop()\n      let { placeholderIndex } = component.state\n      const item = monitor.getItem()\n\n      if (canDrop && item.fromMenu) {\n        component.handleSnippetDrop({ ...item, placeholderIndex })\n      }\n\n      if (canDrop && !item.fromMenu) {\n        component.handleSnippetMove(item.id, placeholderIndex)\n      }\n    },\n    canDrop({ snippetList }, monitor) {\n      // if there is no items in cards, and is over on the board currently,\n      // we can display a placeholder and drop the snippet item on the board.\n      if (snippetList.length === 0 && monitor.isOver()) {\n        return true\n      }\n\n      const clientOffset = monitor.getClientOffset() as XYCoord\n      const element = document.elementFromPoint(clientOffset.x, clientOffset.y)\n\n      return canMoveSnippet(element)\n    },\n    hover(_, monitor, component) {\n      // Determine mouse position\n      const clientOffset = monitor.getClientOffset() as XYCoord\n\n      let {\n        placeholderIndex,\n        isOverSnippet,\n        overSnippet,\n      } = getPlaceHolderIndex(clientOffset)\n\n      // 還要判斷是否是在最後一個 snippet 下面及 snippets-container 裡面\n      if (!isOverSnippet) {\n        return\n      }\n\n      const hoverBoundingRect = (overSnippet as HTMLElement).getBoundingClientRect()\n      const hoverMiddleY =\n        (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2\n      const hoverClientY = clientOffset.y - hoverBoundingRect.top\n\n      if (hoverClientY < hoverMiddleY) {\n        placeholderIndex -= 1\n      }\n\n      if (\n        monitor.canDrop() &&\n        !equals(component.state.placeholderIndex, placeholderIndex)\n      ) {\n        component.setState({ placeholderIndex })\n      }\n    },\n  },\n  (connect, monitor) => ({\n    connectDropTarget: connect.dropTarget(),\n    isOver: monitor.isOver(),\n    canDrop: monitor.canDrop(),\n    didDrop: monitor.didDrop(),\n    draggingItem: monitor.getItem(),\n  })\n)\n\nclass SnippetsContainer extends React.Component<Props, State> {\n  static defaultProps = {\n    draggable: true,\n    snippetList: [],\n  }\n\n  public state: State = {\n    placeholderIndex: null,\n  }\n\n  handleSnippetMove = (id: React.Key, atIndex: number) => {\n    const { snippetList } = this.props\n    const { snippet, index } = this.handleFindSnippet(id)\n\n    const newList = []\n    let isPlaced = false\n\n    snippetList.forEach((s, idx) => {\n      if (idx === index) {\n        return\n      }\n\n      if (!isPlaced && atIndex < idx) {\n        newList.push(snippet)\n        isPlaced = true\n      }\n\n      newList.push(s)\n\n      if (!isPlaced && atIndex === idx) {\n        newList.push(snippet)\n        isPlaced = true\n      }\n    })\n\n    // we dropped the only one snippet in the list so let it back to list.\n    if (length(snippetList) === 1 && !atIndex) {\n      newList.push(snippet)\n    }\n\n    this.props.onSnippetUpdate(newList)\n    this.setState({ placeholderIndex: null })\n  }\n\n  // prettier-ignore\n  handleSnippetDrop = (droppedItem: { [key: string]: any; placeholderIndex: number }) => {\n    const { placeholderIndex, ...item } = droppedItem\n\n    const snippetList = [...this.props.snippetList]\n\n    const nextIndex = placeholderIndex + 1\n    let newList: any[] = []\n\n    const snippet: Partial<SnippetProps> = {\n      ...item,\n      fromMenu: false,\n      id: `${item.id}__${uuid()}`,\n    }\n\n    if (length(snippetList) === 0) {\n      newList = insert(0, snippet)(snippetList)\n    }\n    if (length(snippetList) > 0) {\n      newList = insert(nextIndex, snippet)(snippetList)\n    }\n\n    this.props.onSnippetUpdate(newList)\n    this.setState({ placeholderIndex: null })\n  }\n\n  handleSnippetRemove = (index: number) => {\n    this.props.onSnippetUpdate(remove(index, 1)(this.props.snippetList))\n  }\n\n  handleSnippetShift = (id: React.Key, shift: number) => {\n    const { snippet } = this.handleFindSnippet(id)\n\n    this.handleSnippetUpdate({\n      ...snippet,\n      tabSize: compose(\n        cond([\n          [gt(__, 2), always(2)],\n          [lt(__, 0), always(0)],\n          [T, identity],\n        ]),\n        add(shift),\n        pathOr(0, ['tabSize'])\n      )(snippet),\n    })\n  }\n\n  handleSnippetUpdate = (data: any) => {\n    const { snippet, index } = this.handleFindSnippet(data.id)\n\n    this.props.onSnippetUpdate(\n      update(index, { ...snippet, ...data })(this.props.snippetList)\n    )\n  }\n\n  handleFindSnippet = (id: React.Key) => {\n    const { snippetList } = this.props\n    const snippet = snippetList.filter(x => x.id === id)[0]\n\n    return {\n      snippet,\n      index: snippetList.indexOf(snippet),\n    }\n  }\n\n  render() {\n    const {\n      connectDropTarget,\n      isOver,\n      canDrop,\n      snippetList,\n      draggingItem,\n      draggable, // 模版是否可拖曳，編輯模式下才會是 true\n    } = this.props\n\n    const { placeholderIndex } = this.state\n\n    let isPlaceHold = false\n    const cardList = []\n\n    snippetList.forEach((item, idx) => {\n      if (isOver && canDrop) {\n        isPlaceHold = false\n        if (idx === 0 && placeholderIndex === -1) {\n          cardList.push(<BlockPlaceholder key={`block-placeholder-${idx}`} />)\n        } else if ((placeholderIndex as any) > idx) {\n          isPlaceHold = true\n        }\n      }\n\n      if (item !== undefined) {\n        cardList.push(\n          <Snippet\n            key={item.id}\n            id={item.id}\n            index={idx}\n            draggable={draggable}\n            item={item}\n            inline={item.inline}\n            // wrapperId={(item.id || `snippet-wrapper-${idx}`) as string}\n            wrapperId={`snippet-wrapper-${idx}`}\n            tabSize={item.tabSize}\n            findSnippet={this.handleFindSnippet}\n            updateSnippet={this.handleSnippetUpdate}\n            shiftSnippet={this.handleSnippetShift}\n            removeSnippet={this.handleSnippetRemove}>\n            {item.inline ? (\n              <div\n                id={`${item.id}`}\n                className={`${item.id}`}\n                css={{ padding: 16, lineHeight: 2 }}\n              />\n            ) : (\n              <item.Component\n                id={item.id}\n                className={item.id}\n                item={item}\n                index={idx}\n                onUpdate={this.handleSnippetUpdate}\n              />\n            )}\n          </Snippet>\n        )\n      }\n\n      if (isOver && canDrop && placeholderIndex === idx) {\n        cardList.push(<BlockPlaceholder key={`block-placeholder-${idx}`} />)\n      }\n    })\n\n    // if placeholder index is greater than array.length, display placeholder as last\n    if (isPlaceHold) {\n      cardList.push(<BlockPlaceholder key={'block-placeholder-bottom'} />)\n    }\n\n    // if there is no items in cards currently, display a placeholder anyway\n    if (isOver && canDrop && snippetList.length === 0) {\n      cardList.push(<BlockPlaceholder key={'block-placeholder-zero'} />)\n    }\n\n    // if just has only one item in list and currently dragged, display a placeholder\n    if (isOver && canDrop && snippetList.length === 1) {\n      if (!draggingItem.fromMenu) {\n        cardList.push(<BlockPlaceholder key={'block-placeholder-zero'} />)\n      }\n    }\n\n    return connectDropTarget(\n      <div\n        className={cx('report-template-builder__contentarea', {\n          'report-template-builder__contentarea--fixed-layout': !draggable,\n        })}>\n        {cardList}\n      </div>\n    )\n  }\n}\n\nexport default compose(withRouter, withDropTarget)(SnippetsContainer)\n","import React from 'react'\nimport { DragSource, ConnectDragSource } from 'react-dnd'\nimport styled from 'styled-components'\nimport ItemTypes from '@/constants/item-types'\n\ninterface Props {\n  connectDragSource: ConnectDragSource\n  children?: React.ReactNode\n  className?: string\n  id?: React.Key\n}\n\nconst withDragSource = DragSource(\n  ItemTypes.BOARD,\n  {\n    beginDrag(props: Props) {\n      const { children, className, ...rest } = props // eslint-disable-line\n      return {\n        ...rest,\n        fromMenu: true,\n      }\n    },\n    endDrag(_, monitor) {\n      if (!monitor.didDrop()) {\n        return\n      }\n    },\n    isDragging(props, monitor) {\n      const isDragging = props.id === monitor.getItem().id\n\n      return isDragging\n    },\n  },\n  (connect, monitor) => ({\n    connectDragSource: connect.dragSource(),\n    connectDragPreview: connect.dragPreview(),\n    isDragging: monitor.isDragging(),\n  })\n)\n\nclass SnippetListMenuItem extends React.Component<Props> {\n  render() {\n    const { connectDragSource, id, ...rest } = this.props\n\n    return (\n      <SnippetListMenuWrapper\n        {...rest}\n        ref={comp => connectDragSource(comp)}\n        id={`${id}`}>\n        <div className=\"snippet-drawer-menu__item--content\">\n          {this.props.children}\n        </div>\n      </SnippetListMenuWrapper>\n    )\n  }\n}\n\nconst SnippetListMenuWrapper = styled.div`\n  cursor: move;\n`\n\nexport default withDragSource(SnippetListMenuItem)\n","import React from 'react'\nimport cx from 'classnames'\nimport { FontColorsOutlined } from '@ant-design/icons'\nimport styled from 'styled-components'\nimport SnippetListMenuItem from '@/components/snippet-list-menu-item'\nimport snippetTemplateList from '@/components/snippet-template-list'\n\ninterface Props {\n  className?: string\n  style?: React.CSSProperties\n}\n\nexport default class SnippetListMenu extends React.Component<Props> {\n  render() {\n    return (\n      <SnippetListMenuWrapper\n        className={cx('snippet-drawer-menu', this.props.className)}\n        {...this.props}>\n        <div className=\"snippet-drawer-menu__list\">\n          {snippetTemplateList.map(item => (\n            <SnippetListMenuItem\n              {...item}\n              key={item.id}\n              className=\"snippet-drawer-menu__item py-3\">\n              <div className=\"flex items-center\">\n                {item.icon ? (\n                  <item.icon className=\"mr-2\" />\n                ) : (\n                  <FontColorsOutlined className=\"mr-2\" />\n                )}\n                {item.name}\n              </div>\n            </SnippetListMenuItem>\n          ))}\n        </div>\n      </SnippetListMenuWrapper>\n    )\n  }\n}\n\nconst SnippetListMenuWrapper = styled.div`\n  .snippet-drawer-menu {\n    &__list {\n      height: 100%;\n      overflow-y: auto;\n      overflow-x: hidden;\n\n      ::-webkit-scrollbar {\n        display: none;\n      }\n    }\n  }\n`\n","import React from 'react'\nimport { atom, useRecoilState } from 'recoil'\nimport { find, map, head, pathOr, of } from 'ramda'\nimport Store from 'store'\nimport { setComponent } from '@/components/snippet-template-list'\nimport { SnippetProps, PhraseTemplate } from '@/constants/types'\nconst { compose } = require('ramda')\n\nconst fakePhraseTemplateList: PhraseTemplate[] = setComponent(\n  Store.get('phraseTemplateListState')\n)\n\nconst phraseTemplateListState = atom({\n  key: 'phraseTemplateListState',\n  default: fakePhraseTemplateList,\n})\n\n// 片語模版清單\nexport function usePhraseTemplates() {\n  return useRecoilState(phraseTemplateListState)\n}\n\n// 片語模版資料\nexport function usePhraseTemplate({\n  id,\n  data,\n}: {\n  id?: React.Key\n  data?: any\n}) {\n  const [phraseTemplateList] = useRecoilState(phraseTemplateListState)\n\n  const [phraseTemplate, setPhraseTemplate] = React.useState<PhraseTemplate>({\n    setting: [],\n  } as any)\n\n  React.useEffect(() => {\n    if (data?.id) {\n      setPhraseTemplate(compose(head, setComponent, of)(data))\n    }\n  }, [data])\n\n  React.useEffect(() => {\n    if (id) {\n      setPhraseTemplate(\n        compose(find((x: PhraseTemplate) => `${x.id}` === `${id}`))(\n          setComponent(phraseTemplateList)\n        )\n      )\n    }\n  }, [id]) // eslint-disable-line\n\n  let _snippetList = pathOr([], ['setting'])(phraseTemplate)\n\n  React.useEffect(() => {\n    setSnippetList(_snippetList)\n  }, [JSON.stringify(_snippetList)]) // eslint-disable-line\n\n  const [snippetList, setSnippetList] = React.useState<SnippetProps[]>(\n    _snippetList\n  )\n\n  let snippetById: { [key: string]: SnippetProps } = {}\n\n  return {\n    phraseTemplate,\n    snippetList,\n    setSnippetList,\n    snippetById: map((x: SnippetProps) => (snippetById[x.id] = x), snippetList),\n  }\n}\n","import store from 'store'\nimport moment from 'moment'\nimport { update, length } from 'ramda'\nimport { Mutation, MutationOptions, PhraseTemplate } from '@/constants/types'\nimport { usePhraseTemplates, usePhraseTemplate } from '@/data/usePhrase'\nimport { uuid } from '@/utils/webHelper'\n\nexport const usePhraseList = () => {\n  const [phraseTemplates] = usePhraseTemplates()\n\n  const refetch = () => ({})\n\n  return {\n    refetch,\n    data: {\n      content: phraseTemplates,\n      total: length(phraseTemplates),\n      totalPages: Math.floor(length(phraseTemplates) / 10 + 1),\n    },\n    loading: false,\n  }\n}\n\nexport const useAddNewPhrase = ({ onCompleted }: MutationOptions = {}) => {\n  const [phraseTemplates, setPhraseTemplates] = usePhraseTemplates()\n\n  const handler = (values: PhraseTemplate) => {\n    let id = uuid()\n    let newList = [\n      ...phraseTemplates,\n      {\n        ...values,\n        id,\n        createdAt: moment(),\n        createdAtStr: moment().format('YYYY/MM/DD HH:mm'),\n        updatedAt: moment(),\n        updatedAtStr: moment().format('YYYY/MM/DD HH:mm'),\n      },\n    ]\n\n    setPhraseTemplates(newList)\n\n    store.set('phraseTemplateListState', newList)\n\n    if (onCompleted) {\n      onCompleted({ ...values, id })\n    }\n  }\n\n  return [false, handler] as Mutation\n}\n\nexport const useUpdatePhrase = ({ onCompleted }: MutationOptions = {}) => {\n  const [phraseTemplates, setPhraseTemplates] = usePhraseTemplates()\n\n  const handler = (values: PhraseTemplate) => {\n    let index = phraseTemplates.findIndex(x => `${x.id}` === `${values.id}`)\n    let newList = update(\n      index,\n      {\n        ...values,\n        updatedAt: moment(),\n        updatedAtStr: moment().format('YYYY/MM/DD HH:mm'),\n      },\n      phraseTemplates\n    )\n\n    setPhraseTemplates(newList)\n    store.set('phraseTemplateListState', newList)\n\n    if (onCompleted) {\n      onCompleted()\n    }\n  }\n\n  return [false, handler] as Mutation\n}\n\nexport const useRemovePhrase = ({ onCompleted }: MutationOptions = {}) => {\n  const [phraseTemplates, setPhraseTemplates] = usePhraseTemplates()\n\n  const handler = (values: PhraseTemplate) => {\n    let newList = phraseTemplates.filter(x => `${x.id}` !== `${values.id}`)\n\n    setPhraseTemplates(newList)\n    store.set('phraseTemplateListState', newList)\n\n    if (onCompleted) {\n      onCompleted()\n    }\n  }\n\n  return [false, handler] as Mutation\n}\n\nexport const usePhraseItem = (options: { id?: React.Key; data?: any }) => {\n  const { setSnippetList, snippetList, ...rest } = usePhraseTemplate(options)\n\n  return {\n    ...rest,\n    snippetList,\n    setSnippetList,\n    handleSnippetUpdate: setSnippetList,\n  }\n}\n","import React from 'react'\n\nexport default React.lazy(() => import('./report-template-builder'))\n","import React from 'react'\n\nexport default React.lazy(\n  () => import('../report-template-list/report-template-list')\n)\n","import React from 'react'\n\nexport default React.lazy(() => import('./report-inquiry'))\n","/* eslint eqeqeq: 0 */\nimport React from 'react'\n\nexport type IReactComponent<P = any> =\n  | React.StatelessComponent<P>\n  | React.ComponentClass<P>\n  | React.ClassicComponentClass<P>\n\nfunction computeHeight(node: HTMLDivElement) {\n  const totalHeight = parseInt(getComputedStyle(node).height, 10)\n  const padding =\n    parseInt(getComputedStyle(node).paddingTop, 10) +\n    parseInt(getComputedStyle(node).paddingBottom, 10)\n  return totalHeight - padding\n}\n\nfunction getAutoHeight(n: HTMLDivElement | undefined) {\n  if (!n) {\n    return 0\n  }\n\n  let node = n\n\n  let height = computeHeight(node)\n\n  while (!height) {\n    node = node.parentNode as HTMLDivElement\n    if (node) {\n      height = computeHeight(node)\n    } else {\n      break\n    }\n  }\n\n  return height\n}\n\ninterface AutoHeightProps {\n  height?: number\n}\n\nfunction autoHeight() {\n  return <P extends AutoHeightProps>(\n    WrappedComponent: React.ComponentClass<P> | React.FC<P>\n  ) =>\n    class extends React.Component<P & AutoHeightProps> {\n      state = {\n        computedHeight: 0,\n      }\n\n      root: HTMLDivElement | undefined = undefined\n\n      componentDidMount() {\n        const { height } = this.props\n        if (!height) {\n          const h = getAutoHeight(this.root)\n          // eslint-disable-next-line\n          this.setState({ computedHeight: h })\n        }\n      }\n\n      handleRoot = (node: HTMLDivElement) => {\n        this.root = node\n      }\n\n      render() {\n        const { height } = this.props\n        const { computedHeight } = this.state\n        const h = height || computedHeight\n        return (\n          <div ref={this.handleRoot}>\n            {h > 0 && <WrappedComponent {...this.props} height={h} />}\n          </div>\n        )\n      }\n    }\n}\n\nexport default autoHeight\n","import React from 'react'\nimport moment from 'moment'\nimport { replace, join, dropLast, split } from 'ramda'\nimport useRouteLeaveConfirm from '@/hooks/useRouteLeaveConfirm'\nimport { envStore } from '@/constants/env'\nimport Button from '@/components/button'\nimport { REPORT_INQUIRY, RADIOL_IMAGE } from '@/constants/routes'\nconst { compose } = require('ramda')\nconst html2pdf = require('html2pdf.js')\n\nexport enum menuState {\n  VISIBLE_RIGHT = '1',\n  VISIBLE_LEFT = '2',\n}\n\ntype Props = {\n  isExport?: boolean\n  onToggleExport: () => void\n  onOk: () => void\n  onExportJson?: () => void\n  onExport?: () => void\n}\n\nexport default function Header({ isExport, onToggleExport, onOk }: Props) {\n  const handleConfirm = useRouteLeaveConfirm(REPORT_INQUIRY)\n\n  const [exporting, setIsExporting] = React.useState(false)\n\n  const handleSave = () => {\n    onOk()\n  }\n\n  const handleOpenImageViewer = () => {\n    let pathname = replace(\n      ':studyInstanceUIDs',\n      '1.3.6.1.4.1.14519.5.2.1.3098.4963.119176436435873112231353675460'\n    )(RADIOL_IMAGE)\n\n    // remove last `/`\n    let url = compose(join('/'), dropLast(1), split('/'))(envStore.appUrl)\n\n    window.open(`${url}${pathname}`, '__blank')\n  }\n\n  const handleExport = async () => {\n    setIsExporting(true)\n\n    const element = document.querySelector('.js-export-pdf')\n    const opt = {\n      margin: 1,\n      filename: `報告匯出_${moment().format('YYYYMMDDHHmmss')}.pdf`,\n      image: { type: 'jpeg', quality: 0.98 },\n      html2canvas: { scale: 2 },\n      jsPDF: { unit: 'in', format: 'letter', orientation: 'portrait' },\n    }\n\n    // New Promise-based usage:\n    html2pdf().set(opt).from(element).save()\n  }\n\n  return (\n    <div className=\"inline-flex\">\n      {!isExport && (\n        <>\n          <Button\n            color=\"outline\"\n            className=\"ml-2 text-white border-white bg-transparent\"\n            onClick={handleOpenImageViewer}\n            style={{ minWidth: 80 }}>\n            影像\n          </Button>\n          <Button\n            color=\"outline\"\n            className=\"ml-2 text-white border-white bg-transparent\"\n            onClick={handleSave}\n            style={{ minWidth: 80 }}>\n            儲存\n          </Button>\n          <Button\n            color=\"outline\"\n            className=\"ml-2 text-white border-white bg-transparent\"\n            onClick={handleConfirm}\n            style={{ minWidth: 80 }}>\n            取消\n          </Button>\n          <Button\n            color=\"outline\"\n            className=\"ml-6 text-white border-white bg-transparent\"\n            onClick={onToggleExport}>\n            輸出報告\n          </Button>\n        </>\n      )}\n      {isExport && (\n        <>\n          <Button\n            color=\"outline\"\n            className=\"text-white border-white bg-transparent\"\n            onClick={onToggleExport}>\n            取消\n          </Button>\n          <Button\n            color=\"outline\"\n            className=\"ml-6 text-white border-white bg-transparent\">\n            下載 JSON\n          </Button>\n          <Button\n            color=\"outline\"\n            className=\"ml-2 text-white border-white bg-transparent\"\n            loading={exporting}\n            onClick={handleExport}>\n            下載報告\n          </Button>\n        </>\n      )}\n    </div>\n  )\n}\n","import { Anchor } from 'antd'\nimport styled from 'styled-components'\n\nconst StyledAnchor = styled(Anchor)`\n  &.ant-anchor-wrapper {\n    background: transparent;\n  }\n\n  .fixed {\n    position: relative !important;\n  }\n\n  a:hover,\n  .ant-anchor-link-active > .ant-anchor-link-title {\n    color: ${p => p.theme.primary};\n  }\n\n  .ant-anchor-ink-ball {\n    border: 2px solid ${p => p.theme.primary};\n  }\n\n  .ant-anchor-ink::before {\n    /* background-color: ${p => p.theme.secondary}; */\n  }\n`\n\nconst PieChart = styled.div<{\n  legendWidth?: number\n  chartWidth?: number\n}>`\n  &.pie {\n    position: relative;\n\n    .chart {\n      position: relative;\n    }\n\n    &.hasLegend .chart {\n      width: calc(100% - ${p => p.chartWidth + 'px'});\n    }\n\n    .legend {\n      position: absolute;\n      top: 50%;\n      right: 0;\n      min-width: ${p => p.legendWidth}px;\n      margin: 0 20px;\n      padding: 0;\n      list-style: none;\n      transform: translateY(-50%);\n      li {\n        height: 22px;\n        margin-bottom: 16px;\n        line-height: 22px;\n        cursor: pointer;\n        &:last-child {\n          margin-bottom: 0;\n        }\n      }\n    }\n\n    .dot {\n      position: relative;\n      top: -1px;\n      display: inline-block;\n      width: 8px;\n      height: 8px;\n      margin-right: 8px;\n      border-radius: 8px;\n    }\n\n    .line {\n      display: inline-block;\n      width: 1px;\n      height: 16px;\n      margin-right: 8px;\n      background-color: hsv(0, 0, 91%);\n    }\n\n    .legendTitle {\n      color: rgba(0, 0, 0, 0.65);\n    }\n\n    .percent {\n      color: rgba(0, 0, 0, 0.45);\n    }\n\n    .value {\n      position: absolute;\n      right: 0;\n    }\n\n    .title {\n      margin-bottom: 8px;\n    }\n\n    .total {\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      max-height: 62px;\n      text-align: center;\n      transform: translate(-50%, -50%);\n      font-size: 14px;\n\n      & > h4 {\n        height: 22px;\n        margin-bottom: 8px;\n        color: rgba(0, 0, 0, 0.45);\n        font-weight: normal;\n        font-size: 14px;\n        line-height: 22px;\n      }\n      & > p {\n        display: block;\n        height: 32px;\n        color: rgba(0, 0, 0, 0.85);\n        font-size: 1.2em;\n        line-height: 32px;\n        white-space: nowrap;\n      }\n    }\n  }\n\n  &.legendBlock {\n    &.hasLegend .chart {\n      width: 100%;\n      margin: 0 0 32px 0;\n    }\n    .legend {\n      position: relative;\n      transform: none;\n    }\n  }\n`\n\nexport { StyledAnchor as Anchor, PieChart }\n","import { G2 } from 'bizcharts/typings/index'\nimport React from 'react'\nimport Chart from 'bizcharts/lib/components/Chart'\nimport Tooltip from 'bizcharts/lib/components/Tooltip'\nimport Coord from 'bizcharts/lib/components/Coord'\nimport Geom from 'bizcharts/lib/components/Geom'\nimport { Divider } from 'antd'\nimport classNames from 'classnames'\nimport Debounce from 'lodash.debounce'\nimport autoHeight from './autoHeight'\nimport { PieChart } from './components'\nimport theme from '../../theme'\nconst ReactFitText = require('react-fittext')\nconst { DataView } = require('@antv/data-set')\n\ninterface PieProps {\n  animate?: boolean\n  color?: string\n  colors?: string[]\n  selected?: boolean\n  height?: number\n  margin?: [number, number, number, number]\n  hasLegend?: boolean\n  padding?: [number, number, number, number]\n  percent?: number\n  data?: {\n    x: string | string\n    y: number\n  }[]\n  inner?: number\n  lineWidth?: number\n  forceFit?: boolean\n  style?: React.CSSProperties\n  className?: string\n  total?: React.ReactNode | number | (() => React.ReactNode | number)\n  title?: React.ReactNode\n  tooltip?: boolean\n  valueFormat?: (value: string) => string | React.ReactNode\n  subTitle?: React.ReactNode\n  width?: number\n  legendWidth?: number\n}\n\ninterface PieState {\n  legendData: {\n    checked: boolean\n    x: string\n    color: string\n    percent: number\n    y: string\n  }[]\n  legendBlock: boolean\n}\n\nclass Pie extends React.PureComponent<PieProps, PieState> {\n  state: PieState = {\n    legendData: [],\n    legendBlock: false,\n  }\n\n  requestRef: number | undefined = undefined\n\n  root: HTMLDivElement | undefined = undefined\n\n  chart: G2.Chart | undefined = undefined\n\n  componentDidMount() {\n    window.addEventListener(\n      'resize',\n      () => {\n        this.requestRef = requestAnimationFrame(() => this.resize())\n      },\n      { passive: true }\n    )\n  }\n\n  componentDidUpdate(preProps: PieProps) {\n    const { data } = this.props\n    if (data !== preProps.data) {\n      // because of charts data create when rendered\n      // so there is a trick for get rendered time\n      this.getLegendData()\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.requestRef) {\n      window.cancelAnimationFrame(this.requestRef)\n    }\n    if (this.resize) {\n      window.removeEventListener('resize', this.resize)\n      this.resize.cancel()\n    }\n  }\n\n  getG2Instance = (chart: G2.Chart) => {\n    this.chart = chart\n    requestAnimationFrame(() => {\n      this.getLegendData()\n      this.resize()\n    })\n  }\n\n  // for custom lengend view\n  getLegendData = () => {\n    if (!this.chart) return\n    const geom = this.chart.getAllGeoms()[0] // 获取所有的图形\n    if (!geom) return\n    const items = (geom as any).get('dataArray') || [] // 获取图形对应的\n\n    const legendData = items.map((item: { color: any; _origin: any }[]) => {\n      /* eslint no-underscore-dangle:0 */\n      const origin = item[0]._origin\n      origin.color = item[0].color\n      origin.checked = true\n      return origin\n    })\n\n    this.setState({\n      legendData,\n    })\n  }\n\n  handleRoot = (n: HTMLDivElement) => {\n    this.root = n\n  }\n\n  handleLegendClick = (item: any, i: number) => {\n    const newItem = item\n    newItem.checked = !newItem.checked\n\n    const { legendData } = this.state\n    legendData[i] = newItem\n\n    const filteredLegendData = legendData.filter(l => l.checked).map(l => l.x)\n\n    if (this.chart) {\n      this.chart.filter('x', val => filteredLegendData.indexOf(`${val}`) > -1)\n    }\n\n    this.setState({\n      legendData,\n    })\n  }\n\n  resize = Debounce(() => {\n    const { hasLegend } = this.props\n    const { legendBlock } = this.state\n    if (!hasLegend || !this.root) {\n      window.removeEventListener('resize', this.resize)\n      return\n    }\n    if (\n      this.root &&\n      this.root.parentNode &&\n      (this.root.parentNode as HTMLElement).clientWidth <= 380\n    ) {\n      if (!legendBlock) {\n        this.setState({\n          legendBlock: true,\n        })\n      }\n    } else if (legendBlock) {\n      this.setState({\n        legendBlock: false,\n      })\n    }\n  }, 400)\n\n  render() {\n    const {\n      valueFormat,\n      subTitle,\n      total,\n      hasLegend = false,\n      className,\n      style,\n      height,\n      forceFit = true,\n      percent,\n      color,\n      inner = 0.75,\n      animate = true,\n      colors,\n      lineWidth = 0,\n      width = 240,\n      legendWidth = 250,\n    } = this.props\n\n    const { legendData, legendBlock } = this.state\n    const pieClassName = classNames('pie', className, {\n      hasLegend: !!hasLegend,\n      legendBlock: legendBlock,\n    })\n\n    const {\n      data: propsData,\n      selected: propsSelected = true,\n      tooltip: propsTooltip = true,\n    } = this.props\n\n    let data = propsData || []\n    let selected = propsSelected\n    let tooltip = propsTooltip\n\n    const defaultColors = colors\n    data = data || []\n    selected = selected || true\n    tooltip = tooltip || true\n    let formatColor\n\n    const scale = {\n      x: {\n        type: 'cat',\n        range: [0, 1],\n      },\n      y: {\n        min: 0,\n      },\n    }\n\n    if (percent || percent === 0) {\n      selected = false\n      tooltip = false\n      formatColor = (value: string) => {\n        if (value === '占比') {\n          return color || theme.primary\n        }\n        return '#f0f2f5'\n      }\n\n      data = [\n        {\n          x: '占比',\n          y: parseFloat(`${percent}`),\n        },\n        {\n          x: '反比',\n          y: 100 - parseFloat(`${percent}`),\n        },\n      ]\n    }\n\n    const tooltipFormat = [\n      'x*percent',\n      (x: string, p: number) => ({\n        name: x,\n        value: `${(p * 100).toFixed(2)}%`,\n      }),\n    ]\n\n    const padding = [6, 0, 6, 0]\n\n    const dv = new DataView()\n    dv.source(data).transform({\n      type: 'percent',\n      field: 'y',\n      dimension: 'x',\n      as: 'percent',\n    })\n\n    return (\n      <PieChart\n        ref={this.handleRoot}\n        className={pieClassName}\n        chartWidth={width}\n        style={style}\n        legendWidth={legendWidth}>\n        <ReactFitText maxFontSize={25}>\n          <div className=\"chart\">\n            <Chart\n              scale={scale}\n              height={height}\n              forceFit={forceFit}\n              data={dv}\n              padding={padding}\n              animate={animate}\n              onGetG2Instance={this.getG2Instance}>\n              {!!tooltip && <Tooltip showTitle={false} />}\n              <Coord type=\"theta\" innerRadius={inner} />\n              <Geom\n                style={{ lineWidth, stroke: '#fff' }}\n                tooltip={tooltip && tooltipFormat}\n                type=\"intervalStack\"\n                position=\"percent\"\n                color={[\n                  'x',\n                  percent || percent === 0 ? formatColor : defaultColors,\n                ]}\n                selected={selected}\n              />\n            </Chart>\n\n            {(subTitle || total) && (\n              <div className=\"total\">\n                {subTitle && <h4 className=\"pie-sub-title\">{subTitle}</h4>}\n                {/* eslint-disable-next-line */}\n                {total && (\n                  <div className=\"pie-stat\">\n                    {typeof total === 'function' ? total() : total}\n                  </div>\n                )}\n              </div>\n            )}\n          </div>\n        </ReactFitText>\n\n        {hasLegend && (\n          <ul className=\"legend\">\n            {legendData.map((item, i) => (\n              <li key={item.x} onClick={() => this.handleLegendClick(item, i)}>\n                <span\n                  className=\"dot\"\n                  style={{\n                    backgroundColor: !item.checked ? '#aaa' : item.color,\n                  }}\n                />\n                <span className=\"legendTitle\">{item.x}</span>\n                <Divider type=\"vertical\" />\n                <span className=\"percent\">\n                  {`${(Number.isNaN(item.percent)\n                    ? 0\n                    : item.percent * 100\n                  ).toFixed(2)}%`}\n                </span>\n                <span className=\"value\">\n                  {valueFormat ? valueFormat(item.y) : item.y}\n                </span>\n              </li>\n            ))}\n          </ul>\n        )}\n      </PieChart>\n    )\n  }\n}\n\nexport default autoHeight()(Pie)\n","export enum ActionTypes {\n  DELETABLE = 'deletable',\n  UPDATABLE = 'updatable',\n  CREATABLE = 'creatable',\n  READABLE = 'readable',\n}\n\nexport const reportAnnotations = [\n  '檢體不適當',\n  '不符合',\n  '通知惡性或疑似',\n  '通知癌前病灶',\n  '其他危險值',\n  '肺結核',\n  '是否保留',\n]\n","import React from 'react'\nimport cx from 'classnames'\nimport { Form, Tooltip } from 'antd'\nimport { DoubleRightOutlined } from '@ant-design/icons'\nimport Collapse from '@/components/collapse'\nimport { Checkbox, CheckboxGroup } from '@/components/checkbox'\nimport Radio from '@/components/radio'\nimport { reportAnnotations } from '@/constants/enums'\n\ntype Props = {\n  data?: any\n  reviewDoctor?: string\n  onSave?: () => void\n  onPhraseOpen?: () => void\n  onToggle?: () => void\n}\n\nexport default function ReportMedicalOrder({\n  data,\n  reviewDoctor,\n  onToggle,\n}: Props) {\n  return (\n    <Collapse\n      activeKey={[1, 2, 3, 4]}\n      expandIcon={() => null}\n      className=\"shadow-2xl\">\n      <Collapse.Panel\n        header={\n          <div className=\"text-center relative\">\n            <Tooltip title=\"收合醫囑內容\">\n              <DoubleRightOutlined\n                className=\"absolute\"\n                style={{ top: 5, left: 15 }}\n                onClick={onToggle}\n              />\n            </Tooltip>\n            醫囑內容\n          </div>\n        }\n        key={1}>\n        <div className=\"border-b border-gray-600 p-3\">\n          申請序號：{data?.ORREQNO}\n        </div>\n        <div className=\"border-b border-gray-600 p-3\">\n          病理號：{data?.ORWORKNO}\n        </div>\n        <div className=\"border-b border-gray-600 p-3\">\n          病患姓名：{data?.HNAMEC}\n        </div>\n        <div className=\"border-b border-gray-600 p-3\">性別：{data?.HSEX}</div>\n        <div className=\"border-b border-gray-600 p-3\">\n          申請科別：{data?.CSECT}\n        </div>\n        <div className=\"border-b border-gray-600 p-3\">\n          病歷號：{data?.HHISNUM}\n        </div>\n        <div className=\"border-b border-gray-600 p-3\">\n          病房：{data?.HNURSTA}\n        </div>\n        <div className=\"border-b border-gray-600 p-3\">\n          病房床號：{data?.HBED}\n        </div>\n        <div className=\"border-b border-gray-600 p-3\">\n          出生日期：{data?.HBIRTHDT}\n        </div>\n        <div className=\"border-b border-gray-600 p-3\">\n          醫屬名稱：{data?.ORPROCED}\n        </div>\n        <div className=\"border-b border-gray-600 p-3\">\n          現在輸入：{'LoginUser'}\n        </div>\n        <div className=\"border-b border-gray-600 p-3\">\n          審核者：{reviewDoctor}\n        </div>\n      </Collapse.Panel>\n      <Collapse.Panel\n        header={<div className=\"text-center\">儲存狀態</div>}\n        key={2}>\n        <Form.Item noStyle name=\"state\">\n          <Radio.Group className=\"pl-3\">\n            <Radio className=\"block\" value=\"1\">\n              已輸\n            </Radio>\n            <Radio className=\"block mt-1\" value=\"2\">\n              待發\n            </Radio>\n            <Radio className=\"block mt-1\" value=\"3\">\n              急發\n            </Radio>\n          </Radio.Group>\n        </Form.Item>\n      </Collapse.Panel>\n      <Collapse.Panel\n        header={<div className=\"text-center\">報告註記</div>}\n        key={3}>\n        <Form.Item noStyle name=\"annotations\">\n          <CheckboxGroup>\n            {reportAnnotations.map((x, idx) => (\n              <Checkbox\n                key={`annotations-${idx}`}\n                className={cx('block ml-0 pl-2', {\n                  'mt-1': idx > 0,\n                })}\n                defaultChecked={false}\n                value={`${idx}`}>\n                {x}\n              </Checkbox>\n            ))}\n          </CheckboxGroup>\n        </Form.Item>\n      </Collapse.Panel>\n      <Collapse.Panel\n        header={<div className=\"text-center\">操作熱鍵</div>}\n        key={4}>\n        <div className=\"pl-6\">\n          <code className=\"bg-yellow-400 px-1\">CTRL＋W</code>,{' '}\n          <code className=\"bg-yellow-400 px-1\">CTRL+S</code> 儲存\n        </div>\n        <div className=\"pl-6 pt-2\">\n          <code className=\"bg-yellow-400 px-1\">F9</code> 片語視窗\n        </div>\n      </Collapse.Panel>\n    </Collapse>\n  )\n}\n","import React from 'react'\nimport { Affix } from 'antd'\nimport { keys, pathOr } from 'ramda'\nimport { mapIndexed } from '@/utils/webHelper'\nimport { SnippetProps, Snippets } from '@/constants/types'\nimport { Anchor } from './components'\nconst { compose } = require('ramda')\n\nconst { Link } = Anchor\n\ntype Props = {\n  affixed?: boolean\n  onClick: (\n    e: React.MouseEvent<HTMLElement>,\n    link: {\n      title: React.ReactNode\n      href: string\n    }\n  ) => void\n  onChange: (affixed?: boolean) => void\n  snippetList: Snippets\n}\n\nexport default function ReportTypingAffix({\n  affixed = false,\n  onChange,\n  onClick,\n  snippetList,\n}: Props) {\n  return (\n    <Affix offsetTop={0} onChange={onChange}>\n      <Anchor\n        showInkInFixed\n        affix={false}\n        className=\"is--fixed\"\n        style={getAnchorStyles(affixed)}\n        onClick={onClick}>\n        {compose(\n          mapIndexed((key: string, idx: number) => (\n            <Link key={`${key}-${idx}`} href={key} title={key}>\n              {compose(\n                mapIndexed((x: SnippetProps) => (\n                  <Link\n                    key={x.id}\n                    href={`${key}-${x.id}`}\n                    title={pathOr(x.id, ['setting', 'text'], x)}\n                  />\n                )),\n                pathOr([], [key])\n              )(snippetList)}\n            </Link>\n          )),\n          keys\n        )(snippetList)}\n      </Anchor>\n    </Affix>\n  )\n}\n\nfunction getAnchorStyles(affixed?: boolean): React.CSSProperties | undefined {\n  if (!affixed) {\n    return undefined\n  }\n\n  return {\n    marginLeft: -16,\n    marginRight: -16,\n    background: '#fff',\n    padding: 24,\n    borderBottomLeftRadius: 8,\n    borderBottomRightRadius: 8,\n  }\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport { length, keys, pathOr, gt, __, map } from 'ramda'\nimport cx from 'classnames'\nimport { Row, Col, Divider, Form } from 'antd'\nimport { useBreadcrumb } from '@/hooks/useApp'\nimport { createFormItemLayout } from '@/utils/form'\nimport { Snippets } from '@/constants/types'\nimport { Input } from '@/components/input'\nimport { renderSnippets } from '@/components/snippet-utils'\nimport { MedicalOrder } from '@/services/pathology'\nimport theme from '../../theme'\nconst { compose } = require('ramda')\n\ntype Props = {\n  className?: string\n  style?: React.CSSProperties\n  data: {\n    template: any\n    snippetList: Snippets\n    medical: MedicalOrder\n  }\n}\n\nconst formItemLayout = createFormItemLayout(8)\nconst shortFormItemLayout = createFormItemLayout(3)\n\nconst SnippetPreviewWrapper = styled.div`\n  .ant-card-head {\n    min-height: auto;\n  }\n\n  .ant-card-head-title {\n    padding-top: 0;\n    font-size: 14px;\n  }\n\n  .ant-card-body {\n    padding-top: 6px;\n    padding-bottom: 8px;\n    padding-left: 18px;\n  }\n`\n\nexport default function ReportTypingPreview({ className, style, data }: Props) {\n  const { snippetList, medical } = data\n\n  useBreadcrumb([{ name: '輸入報告' }, { name: '文件報告' }])\n\n  return (\n    <div style={style} className={cx('js-export-pdf', className)}>\n      <Row className=\"mb-3\">\n        <Col span={24}>\n          <div className=\"text-xl text-center mt-2\">\n            高雄榮總 <span className=\"mx-6\">病理檢驗部</span> 檢查報告單\n          </div>\n        </Col>\n      </Row>\n      <Divider />\n      <Row gutter={16}>\n        <Col span={8}>\n          <Form.Item {...formItemLayout} label=\"病房床號\">\n            <Input readOnly bordered={false} value={medical.HBED} />\n          </Form.Item>\n        </Col>\n        <Col span={8}>\n          <Form.Item {...formItemLayout} label=\"病患姓名\">\n            <Input readOnly bordered={false} value={medical.HNAMEC} />\n          </Form.Item>\n        </Col>\n        <Col span={8}>\n          <Form.Item {...formItemLayout} label=\"病歷號\">\n            <Input readOnly bordered={false} value={medical.HHISNUM} />\n          </Form.Item>\n        </Col>\n      </Row>\n      <Row gutter={16}>\n        <Col span={8}>\n          <Form.Item {...formItemLayout} label=\"病患性別\">\n            <Input readOnly bordered={false} value={medical.HSEX} />\n          </Form.Item>\n        </Col>\n        <Col span={8}>\n          <Form.Item {...formItemLayout} label=\"病患身分\">\n            <Input readOnly bordered={false} value={'xxxxx'} />\n          </Form.Item>\n        </Col>\n        <Col span={8}>\n          <Form.Item {...formItemLayout} label=\"出生日期\">\n            <Input readOnly bordered={false} value={medical.HBIRTHDT} />\n          </Form.Item>\n        </Col>\n      </Row>\n      <Row gutter={16}>\n        <Col span={8}>\n          <Form.Item {...formItemLayout} label=\"申請序號\">\n            <Input readOnly bordered={false} value={medical.ORREQNO} />\n          </Form.Item>\n        </Col>\n        <Col offset={8} span={8}>\n          <Form.Item {...formItemLayout} label=\"病理號\">\n            <Input readOnly bordered={false} value={medical.ORWORKNO} />\n          </Form.Item>\n        </Col>\n      </Row>\n      <Row>\n        <Col span={24}>\n          <Form.Item {...shortFormItemLayout} label=\"醫囑項目\">\n            <div\n              dangerouslySetInnerHTML={{ __html: medical.ORWORD }}\n              style={{\n                maxWidth: '100%',\n                whiteSpace: 'initial',\n                borderBottom: '1px solid #d9d9d9',\n                paddingBottom: 5,\n                paddingLeft: 5,\n              }}\n            />\n          </Form.Item>\n        </Col>\n      </Row>\n      <Row>\n        <Col span={24}>\n          <Form.Item {...shortFormItemLayout} label=\"檢查日期\">\n            <Input readOnly bordered={false} value={'xxxx'} />\n          </Form.Item>\n        </Col>\n      </Row>\n      <Row>\n        <Col span={24}>\n          <Form.Item {...shortFormItemLayout} label=\"開立科別\">\n            <Input readOnly bordered={false} value={medical.CSECT} />\n          </Form.Item>\n        </Col>\n      </Row>\n      <Divider />\n      <Row>\n        <Col span={24}>\n          <SnippetPreviewWrapper>\n            {compose(\n              map((key: string) => (\n                <div key={key}>\n                  {compose(\n                    gt(__, 0),\n                    length,\n                    pathOr([], [key])\n                  )(snippetList) && (\n                    <h2\n                      css={{\n                        color: theme.darkGrey,\n                        background: '#eee',\n                        width: '65%',\n                      }}\n                      className=\"pl-3 my-2 mb-3 text-lg font-normal\">\n                      {key}\n                    </h2>\n                  )}\n                  {compose(renderSnippets(), pathOr([], [key]))(snippetList)}\n                </div>\n              )),\n              keys\n            )(snippetList)}\n          </SnippetPreviewWrapper>\n        </Col>\n      </Row>\n      <Divider />\n      <Row gutter={16}>\n        <Col span={8}>\n          <Form.Item {...formItemLayout} label=\"判讀醫師\">\n            <Input bordered={false} />\n          </Form.Item>\n        </Col>\n        <Col span={8}>\n          <Form.Item {...formItemLayout} label=\"複審醫師\">\n            <Input bordered={false} />\n          </Form.Item>\n        </Col>\n        <Col span={8}>\n          <Form.Item {...formItemLayout} label=\"申請醫師\">\n            <Input bordered={false} />\n          </Form.Item>\n        </Col>\n      </Row>\n      <Row gutter={16}>\n        <Col span={12}>\n          <Form.Item {...formItemLayout} label=\"報告輸入人員\">\n            <Input bordered={false} />\n          </Form.Item>\n        </Col>\n        <Col span={12}>\n          <Form.Item {...formItemLayout} label=\"報告複審人員\">\n            <Input bordered={false} />\n          </Form.Item>\n        </Col>\n      </Row>\n      <Divider />\n      <Row className=\"mb-4\">\n        <Col span={24}>\n          <div className=\"text-center\">病解專醫字第000001號</div>\n        </Col>\n      </Row>\n    </div>\n  )\n}\n","import React from 'react'\nimport { ModalProps, ModalFuncProps } from 'antd/lib/modal'\nimport { find, path } from 'ramda'\nimport Modal from '@/components/modal'\nimport { modalDefaultProps } from '@/utils/message'\n\nexport const confirm = Modal.confirm\n\ntype Props<T> = {\n  /**\n   * 是否可刪除: false的話不會跳確認刪除窗\n   */\n  isDeletable?: boolean\n  /**\n   * 刪除確認視窗的文字內容\n   */\n  content?: string | React.ReactNode\n  /**\n   * 確認刪除的行為，例如打 API\n   */\n  onRequestDelete?: (values?: any, resolve?: (values?: any) => any) => any\n  /**\n   * 跳出確認刪除時可以做的事情，例如關掉正在編輯的對話框\n   */\n  onBeforeDelete?: () => any\n  /**\n   * 刪除成功後，可重新取得(列表)資料\n   */\n  refetchQueries?: () => any\n  /**\n   * 取消刪除後做的事情，例如重新打開編輯對話窗\n   */\n  onCancel?: () => any\n  /**\n   * 列表資料，可在跳確認窗時從裡面查找要刪除的資料並回傳\n   */\n  dataSource?: T[]\n  /**\n   * 刪除的項目，可以是單一物件或陣列物件...\n   */\n  deleteItem?: any\n  /**\n   * 自訂確認視窗屬性\n   */\n  modalProps?: ModalProps\n  /**\n   * 刪除成功後可作的事情\n   */\n  onAfterDelete?: () => any\n}\n\nlet modal: {\n  destroy: () => void\n  update: (newConfig: ModalFuncProps) => void\n}\n\nexport function useDelete<T extends any>(props: Props<T>) {\n  const {\n    isDeletable = true,\n    content,\n    dataSource = [],\n    onRequestDelete,\n    onBeforeDelete,\n    refetchQueries,\n    onCancel,\n    deleteItem,\n    modalProps = {},\n    onAfterDelete,\n  } = props\n\n  let onAfterDeleteResolve = React.useRef(() => ({}))\n\n  const handleConfirmDeletion = (evt: React.MouseEvent<HTMLElement>) => {\n    if (onBeforeDelete) {\n      onBeforeDelete()\n    }\n    handleConfirm(evt)\n  }\n\n  const handleDeleteFailure = () => {\n    if (modal) {\n      modal.update({\n        okButtonProps: {\n          className: 'c-btn c-btn--danger',\n          style: { minWidth: 96, marginRight: 104 },\n          loading: false,\n        },\n      })\n    }\n  }\n\n  const handleConfirm = (evt: React.MouseEvent<HTMLElement>) => {\n    if (!isDeletable) {\n      return\n    }\n\n    const item = find<any>(\n      x =>\n        `${path(['id'], x)}` ===\n        (evt.currentTarget as HTMLElement).dataset['id']\n    )(dataSource)\n\n    modal = confirm({\n      ...modalDefaultProps(content, modalProps),\n      onOk() {\n        if (modal) {\n          modal.update({\n            okButtonProps: {\n              className: 'c-btn c-btn--danger',\n              style: { minWidth: 80, marginRight: 24 },\n              loading: true,\n            },\n          })\n        }\n\n        return new Promise(resolve => {\n          if (onRequestDelete) {\n            onRequestDelete(item || deleteItem)\n          }\n\n          if (onAfterDelete) {\n            onAfterDelete()\n          }\n\n          onAfterDeleteResolve.current = (() => {\n            resolve()\n            if (refetchQueries) {\n              refetchQueries()\n            }\n          }) as any\n        })\n      },\n      onCancel() {\n        if (onCancel) {\n          onCancel()\n        }\n      },\n    })\n  }\n\n  return {\n    handleConfirmDeletion,\n    handleConfirm,\n    handleDeleteFailure,\n    onAfterDelete: onAfterDeleteResolve,\n  }\n}\n\nexport default useDelete\n","import React from 'react'\nimport { ColumnProps } from 'antd/lib/table'\nimport { ModalProps } from 'antd/lib/modal'\nimport { flatten, pluck } from 'ramda'\nimport Modal from '@/components/modal'\nimport Table from '@/components/query-table'\nimport Button from '@/components/button'\nimport { usePhraseList } from '@/services/phrase'\nimport { PhraseTemplate, SnippetProps } from '@/constants/types'\nimport useTableRowSelection from '@/hooks/useTableRowSelection'\nconst { compose } = require('ramda')\n\ninterface Props extends Omit<ModalProps, 'onOk'> {\n  onOk: (values: SnippetProps[]) => void\n}\n\nexport default function PhraseListModal({ onOk, onCancel, ...props }: Props) {\n  const { data } = usePhraseList()\n\n  const { rowSelection, selectedRows } = useTableRowSelection()\n\n  const handleOk = () => {\n    onOk(compose(flatten, pluck('setting'))(selectedRows))\n    ;(onCancel as any)()\n  }\n\n  const columns: ColumnProps<PhraseTemplate>[] = [\n    {\n      title: '模版名稱',\n      dataIndex: 'name',\n    },\n    {\n      title: '創作者',\n      dataIndex: 'author',\n    },\n    {\n      title: '狀態',\n      dataIndex: 'statusName',\n    },\n    {\n      title: '創作時間',\n      dataIndex: 'createdAtStr',\n    },\n    {\n      title: '上次修改時間',\n      dataIndex: 'updatedAtStr',\n    },\n    {\n      title: '模版描述',\n      dataIndex: 'description',\n    },\n  ]\n\n  return (\n    <Modal\n      {...props}\n      visible\n      title=\"選擇片語模版\"\n      bodyStyle={{\n        paddingTop: 48,\n        paddingLeft: 64,\n        paddingRight: 64,\n      }}\n      width={800}\n      footer={[\n        <Button key=\"btn-cancel\" color=\"outline\" onClick={onCancel}>\n          取消\n        </Button>,\n        <Button\n          key=\"btn-ok\"\n          color=\"primary\"\n          onClick={handleOk}\n          className=\"ml-3\">\n          確認\n        </Button>,\n      ]}\n      onCancel={onCancel}\n      keyboard={false}\n      maskClosable={false}>\n      <Table\n        size=\"small\"\n        columns={columns}\n        dataSource={data}\n        rowSelection={rowSelection}\n      />\n    </Modal>\n  )\n}\n","import React from 'react'\nimport {\n  length,\n  pathOr,\n  ifElse,\n  isNil,\n  identity,\n  takeLast,\n  compose,\n  filter,\n  concat,\n} from 'ramda'\nimport { ModalFuncProps } from 'antd/lib/modal'\nimport useDelete from './useDelete'\n\ntype Props<T> = {\n  defaultRowKeys?: number[] | string[]\n  defaultRows?: T[]\n  multiple?: boolean\n  limit?: number\n  modalProps?: ModalFuncProps\n  onRequestDelete?: (values: any) => any\n  refetchQueries?: () => any\n}\n\nexport default function useRowSelection<T = any>(props: Props<T> = {}) {\n  const {\n    limit,\n    defaultRowKeys = [],\n    defaultRows = [],\n    multiple = true,\n  } = props\n\n  const [selectedRowKeys, setSelectedRowKeys] = React.useState<\n    string[] | number[]\n  >(defaultRowKeys)\n\n  const [selectedRows, setSelectedRows] = React.useState<T[]>(defaultRows)\n\n  const onSelectChange = (rowKeys: React.Key[], rows: T[]) => {\n    if (!isNil(limit) && length(rowKeys) > limit) {\n      return\n    }\n\n    setSelectedRowKeys(ifElse(() => multiple, identity, takeLast(1))(rowKeys))\n\n    setSelectedRows(prev =>\n      ifElse(\n        () => multiple,\n        compose(\n          filter((x: any) => rowKeys.includes(x.id)),\n          concat(prev)\n        ),\n        takeLast(1)\n      )(rows)\n    )\n  }\n\n  const isDeletable = React.useMemo(() => selectedRowKeys.length > 0, [\n    selectedRowKeys,\n  ])\n\n  const rowSelection = {\n    selectedRowKeys,\n    onChange: onSelectChange,\n  }\n\n  const { handleConfirm, onAfterDelete } = useDelete({\n    ...props,\n    isDeletable,\n    content: `確定要刪除 ${length(selectedRowKeys as any)} 筆資料嗎？`,\n    deleteItem: selectedRows.map(x => ({ id: pathOr('code', ['id'], x) })),\n    onAfterDelete: () => {\n      setSelectedRowKeys([])\n      setSelectedRows([])\n    },\n  })\n\n  return {\n    rowSelection,\n    isDeletable,\n    handleConfirm,\n    selectedRowKeys,\n    selectedRows,\n    selectedRowCount: selectedRowKeys.length,\n    onAfterDelete,\n    clearSelection: () => {\n      setSelectedRowKeys([])\n      setSelectedRows([])\n    },\n  }\n}\n","import React from 'react'\nimport { RouteComponentProps } from 'react-router-dom'\nimport { Row, Col, BackTop, Affix, Form, message, Tooltip } from 'antd'\nimport {\n  BulbOutlined,\n  LeftOutlined,\n  RightOutlined,\n  DoubleLeftOutlined,\n} from '@ant-design/icons'\nimport cx from 'classnames'\nimport {\n  map,\n  pathOr,\n  keys,\n  gt,\n  __,\n  length,\n  ifElse,\n  equals,\n  always,\n  filter,\n  values,\n  not,\n  replace,\n  split,\n  join,\n} from 'ramda'\nimport useTitle from '@/hooks/useTitle'\nimport useVisible from '@/hooks/useVisible'\nimport { useBreadcrumb, useHeaderContent } from '@/hooks/useApp'\nimport {\n  useToggleReportPreview,\n  snippetCategoryOfReport,\n} from '@/data/useReportTemplate'\nimport { isNil, queryString, uuid } from '@/utils/webHelper'\nimport { ReportTemplate, SnippetProps } from '@/constants/types'\nimport { Page } from '@/components/layout'\nimport ReactDndProvider from '@/components/snippet-scrollable-container'\nimport SnippetsContainer from '@/components/snippets-container'\nimport Input from '@/components/input'\nimport Select from '@/components/select'\nimport Collapse from '@/components/collapse'\nimport SnippetListMenu from '@/components/snippet-list-menu'\nimport { renderSnippets } from '@/components/snippet-utils'\nimport Tabs from '@/components/draggable-tabs'\nimport {\n  useAllReportTemplates,\n  useReportTemplate,\n} from '@/services/reportTemplate'\nimport {\n  useReportItem,\n  useAddNewReport,\n  useUpdateReport,\n} from '@/services/report'\nimport { usePathology } from '@/services/pathology'\nimport history from '@/utils/history'\nimport { REPORT_EDIT } from '@/constants/routes'\nimport Pie from './pie'\nimport Header from './report-typing-header'\nimport ReportMedicalOrder from './report-typing-medical-order'\nimport ReportAffix from './report-typing-affix'\nimport ReportPreview from './report-typing-preview'\nimport PhraseListModal from './phrase-list-modal'\nconst { compose } = require('ramda')\n\nenum menuState {\n  VISIBLE_RIGHT = '1',\n  VISIBLE_LEFT = '2',\n}\n\ninterface Props extends RouteComponentProps<{ id: string }> {\n  id: any\n  reviewDoctor: string\n  serialNo: string\n}\n\nconst col = ifElse(equals(false), always(5), always(0))\n\nexport default function ReportTyping(props: Props) {\n  useTitle('輸入報告')\n\n  useBreadcrumb([{ name: '輸入報告' }, { name: '病理報告輸入' }])\n\n  useToggleReportPreview(true)\n\n  const [form] = Form.useForm()\n\n  const [reportTemplates] = useAllReportTemplates()\n\n  const [keyword, setKeyword] = React.useState<string>()\n\n  const [exportable, handleExportable] = useVisible()\n\n  const [phraseListModalVisible, handlePhraseListModalVisible] = useVisible()\n\n  const { data /* isValidating */ } = usePathology()\n\n  const [visibleLayouts, setVisibleLayouts] = React.useState<string[]>([\n    menuState.VISIBLE_LEFT,\n    menuState.VISIBLE_RIGHT,\n  ])\n\n  // 沒有 QS 代表是編輯，會有 params.id 要用 useReportItem 取得報告資料後，\n  // 再餵進去 useReportTemplate 作編輯\n  const { params } = props.match\n\n  // 有 QS 代表新增，會沒有 params.id，此時的資料要用 reportTemplate\n  const qs = queryString(props.location.search)\n\n  // 只有新增時有 QS 才會有\n  const [templateId, setCurrentTemplateId] = React.useState(qs.templateId)\n\n  React.useEffect(() => {\n    setCurrentTemplateId(qs.templateId)\n  }, [qs.templateId])\n\n  const item = useReportItem(params.id)\n\n  const {\n    total,\n    category,\n    reportTemplate,\n    snippetList,\n    handleTabEdit,\n    handleTabChange,\n    handleTabMove,\n    handleTabNameChange,\n    handleSnippetUpdate,\n  } = useReportTemplate({\n    id: templateId,\n    data: item,\n  })\n\n  React.useEffect(() => {\n    const handleKeyPress = (evt: KeyboardEvent) => {\n      // ctrl + s\n      if (evt.ctrlKey && evt.keyCode === 83) {\n        handleOk()\n      }\n      // f9\n      if (!evt.ctrlKey && evt.keyCode === 120) {\n        handlePhraseListModalVisible()\n      }\n    }\n\n    window.addEventListener('keydown', handleKeyPress)\n\n    return () => {\n      window.removeEventListener('keydown', handleKeyPress)\n    }\n  }, []) // eslint-disable-line\n\n  React.useEffect(() => {\n    form.setFieldsValue(reportTemplate)\n  }, [JSON.stringify(reportTemplate)]) // eslint-disable-line\n\n  React.useEffect(() => {\n    if (qs.reviewDoctor) {\n      form.setFieldsValue({ reviewDoctor: qs.reviewDoctor })\n    }\n    if (qs.serialNo) {\n      form.setFieldsValue({ serialNo: qs.serialNo })\n    }\n  }, [JSON.stringify(qs)]) // eslint-disable-line\n\n  const handleLayoutChange = (value: string) => () => {\n    setVisibleLayouts((prev: string[]) =>\n      prev.includes(value) ? prev.filter(x => x !== value) : [...prev, value]\n    )\n  }\n\n  const leftContentVisible = visibleLayouts.includes(menuState.VISIBLE_LEFT)\n  const rightContentVisible = visibleLayouts.includes(menuState.VISIBLE_RIGHT)\n\n  const [, handleAdd] = useAddNewReport({\n    onCompleted: ({ id }: any) => {\n      history.push(replace(':id', id)(REPORT_EDIT))\n      message.success('報告資料已新增')\n    },\n  })\n\n  const [, handleUpdate] = useUpdateReport({\n    onCompleted: () => message.success('報告資料已儲存'),\n  })\n\n  const handleOk = () => {\n    form.validateFields().then(values => {\n      let payload = {\n        ...values,\n        ...(params.id ? { id: params.id } : {}),\n        ...data,\n        setting: snippetList,\n      }\n\n      const handler = params.id ? handleUpdate : handleAdd\n\n      handler(payload)\n    })\n  }\n\n  useHeaderContent(\n    <Header\n      // leftContentVisible={leftContentVisible}\n      // rightContentVisible={rightContentVisible}\n      // onLayoutChange={handleLayoutChange}\n      isExport={exportable}\n      onToggleExport={handleExportable}\n      onOk={handleOk}\n    />\n  )\n\n  const handleReportSearch = (value: string) => {\n    setKeyword(value)\n  }\n\n  const handleReportChange = (value: string) => {\n    setCurrentTemplateId(value)\n  }\n\n  const [affixed, setIsAffixed] = React.useState<boolean | undefined>(false)\n\n  const [percentage, setPercentage] = React.useState(0)\n\n  const handleAffixChange = (affixed?: boolean) => {\n    setIsAffixed(affixed)\n  }\n\n  const handleAnchorClick = (\n    e: React.MouseEvent<HTMLElement>,\n    link: {\n      title: React.ReactNode\n      href: string\n    }\n  ) => {\n    e.preventDefault()\n\n    const [tab, href] = compose(\n      ([tab, ...rest]: string[]) => [tab, join('-')(rest)],\n      split('-'),\n      pathOr('', ['href'])\n    )(link)\n\n    if (category !== 'overview') {\n      handleTabChange(tab)\n    }\n\n    if (!href) {\n      return\n    }\n\n    window.scroll({\n      behavior: 'smooth',\n      left: 0,\n      top: document.getElementById(href)?.offsetTop,\n    })\n  }\n\n  const handlePhraseAdd = (values: SnippetProps[]) => {\n    let newList = [\n      ...snippetList[category],\n      ...values.map(x => ({\n        ...x,\n        fromMenu: false,\n        id: `${x.id}__${uuid()}`,\n      })),\n    ]\n\n    handleSnippetUpdate(newList)\n  }\n\n  const handleValuesChange = React.useCallback(\n    (_: any, { data }: { data: { [key: string]: any } }) => {\n      setPercentage(\n        Math.round(\n          (compose(length, filter(compose(not, isNil)), values)(data) / total) *\n            100\n        )\n      )\n    },\n    [total]\n  )\n\n  React.useEffect(() => {\n    handleValuesChange(null, form.getFieldsValue())\n  }, [total]) // eslint-disable-line\n\n  const renderCategory = (category: string) => {\n    return compose(gt(__, 0), length, pathOr([], [category]))(snippetList) ? (\n      <h2 id={category} className=\"my-2\">\n        {category}\n      </h2>\n    ) : null\n  }\n\n  const colSpan = 14 + col(leftContentVisible) + col(rightContentVisible)\n\n  const filterReportTemplates: ReportTemplate[] = React.useMemo(\n    () =>\n      ifElse(isNil, always(reportTemplates), val =>\n        filter((x: ReportTemplate) => x.name.includes(val))(reportTemplates)\n      )(keyword),\n    [keyword] // eslint-disable-line\n  )\n\n  const { reviewDoctor } = props\n\n  return (\n    <ReactDndProvider className=\"is--preview\">\n      {phraseListModalVisible && (\n        <PhraseListModal\n          onOk={handlePhraseAdd}\n          onCancel={handlePhraseListModalVisible}\n        />\n      )}\n      <BackTop />\n      <Page>\n        <Form\n          form={form}\n          labelAlign={exportable ? 'left' : 'right'}\n          className=\"relative\"\n          onValuesChange={handleValuesChange}>\n          {!leftContentVisible && (\n            <Tooltip title=\"展開報告內容\">\n              <div\n                className=\"absolute z-10 bg-secondary text-white rounded-tr-md rounded-br-md flex items-center justify-center cursor-pointer py-2 pl-1\"\n                css={{ left: -40, top: 7 }}\n                onClick={handleLayoutChange(menuState.VISIBLE_LEFT)}>\n                <RightOutlined className=\"text-xl\" />\n              </div>\n            </Tooltip>\n          )}\n          <Row gutter={16}>\n            {leftContentVisible && (\n              <Col span={5}>\n                <Collapse\n                  defaultActiveKey={[1, 2]}\n                  expandIcon={() => null}\n                  className=\"shadow-2xl\">\n                  <Collapse.Panel\n                    header={\n                      <div className=\"text-center relative\">\n                        報告內容\n                        <Tooltip title=\"收合報告內容\">\n                          <DoubleLeftOutlined\n                            className=\"absolute cursor-pointer\"\n                            style={{ top: 5, right: 0 }}\n                            onClick={handleLayoutChange(menuState.VISIBLE_LEFT)}\n                          />\n                        </Tooltip>\n                      </div>\n                    }\n                    key={1}>\n                    <Row className=\"mb-2 text-sm text-darkGrey\">\n                      <Col span={24} className=\"mb-3\">\n                        <div className=\"inline-block\" css={{ width: 65 }}>\n                          判讀醫師\n                        </div>\n                        <Form.Item noStyle name=\"reviewDoctor\">\n                          <Input className=\"w-2/3\" bordered={false} />\n                        </Form.Item>\n                      </Col>\n                      <Col span={24} className=\"my-3\">\n                        <div className=\"inline-block\" css={{ width: 65 }}>\n                          申請序號\n                        </div>\n                        <Form.Item noStyle name=\"serialNo\">\n                          <Input className=\"w-2/3\" bordered={false} />\n                        </Form.Item>\n                      </Col>\n                      <Col span={24} className=\"my-3\">\n                        <div className=\"inline-block\" css={{ width: 65 }}>\n                          報告格式\n                        </div>\n                        <Select\n                          showSearch\n                          className=\"w-2/3\"\n                          bordered={false}\n                          filterOption={false}\n                          value={templateId}\n                          onSearch={handleReportSearch}\n                          onChange={handleReportChange}>\n                          {filterReportTemplates.map(x => (\n                            <Select.Option key={x.id} value={x.id}>\n                              {x.name}\n                            </Select.Option>\n                          ))}\n                        </Select>\n                      </Col>\n                      {category === 'overview' && (\n                        <Col span={24} className=\"mt-3\">\n                          <ReportAffix\n                            affixed={affixed}\n                            onClick={handleAnchorClick}\n                            onChange={handleAffixChange}\n                            snippetList={snippetList}\n                          />\n                        </Col>\n                      )}\n                    </Row>\n                  </Collapse.Panel>\n                  <Collapse.Panel\n                    header={<div className=\"text-center\">模版工具</div>}\n                    key={2}>\n                    <Row>\n                      <Col span={24}>\n                        <SnippetListMenu />\n                        <div\n                          className=\"flex items-center mt-2 cursor-pointer\"\n                          onClick={handlePhraseListModalVisible}>\n                          <BulbOutlined className=\"mr-2\" />\n                          Phrase\n                        </div>\n                      </Col>\n                    </Row>\n                  </Collapse.Panel>\n                </Collapse>\n              </Col>\n            )}\n\n            <Col span={colSpan}>\n              {!exportable && (\n                <>\n                  <div className=\"pt-2 bg-white rounded-lg shadow-2xl\">\n                    <Affix offsetTop={0}>\n                      <div\n                        className={cx(\n                          'px-4 mb-4 -mt-2',\n                          'flex items-center justify-between',\n                          'rounded-lg shadow-sm',\n                          'text-xl text-darkGrey font-medium'\n                        )}\n                        css={{ background: '#fff' }}>\n                        <div>\n                          Pathological Image Report\n                          <div className=\"text-base text-gray-600\"></div>\n                        </div>\n                        <Pie\n                          percent={percentage}\n                          total={`${percentage}%`}\n                          style={{ width: 70, paddingTop: 6 }}\n                          height={80}\n                        />\n                      </div>\n                    </Affix>\n                  </div>\n                  <div className=\"rounded-lg shadow-2xl\">\n                    <Tabs\n                      type=\"editable-card\"\n                      activeKey={category}\n                      onChange={handleTabChange}\n                      onEdit={handleTabEdit}\n                      tabBarGutter={8}\n                      moveTabNode={handleTabMove}\n                      className=\"flex-1\">\n                      {compose(\n                        map((category: string) => (\n                          <Tabs.TabPane\n                            closable\n                            key={category}\n                            tab={\n                              <span\n                                contentEditable\n                                suppressContentEditableWarning\n                                spellCheck={false}\n                                className=\"outline-none\"\n                                css={{ whiteSpace: 'nowrap' }}\n                                onChange={handleTabNameChange(category)}>\n                                {category}\n                              </span>\n                            }>\n                            <Col\n                              span={24}\n                              className=\"p-4 report-template-builder__main-content\">\n                              {category ===\n                                snippetCategoryOfReport.PATHOLOGICAL_DIAGNOSIS && (\n                                <div\n                                  className=\"mb-4 px-1\"\n                                  dangerouslySetInnerHTML={{\n                                    __html: data?.ORWORD,\n                                  }}\n                                />\n                              )}\n                              <SnippetsContainer\n                                // draggable={!isPreview}\n                                draggable\n                                snippetList={snippetList[category]}\n                                onSnippetUpdate={handleSnippetUpdate}\n                              />\n                            </Col>\n                          </Tabs.TabPane>\n                        )),\n                        keys\n                      )(snippetList)}\n                      <Tabs.TabPane key=\"overview\" tab=\"Overview\">\n                        {compose(\n                          map((category: string) => (\n                            <div key={category} className=\"px-3 bg-white\">\n                              {renderCategory(category)}\n                              {compose(\n                                renderSnippets({ className: 'mb-0' }),\n                                pathOr([], [category])\n                              )(snippetList)}\n                            </div>\n                          )),\n                          keys\n                        )(snippetList)}\n                      </Tabs.TabPane>\n                    </Tabs>\n                  </div>\n                </>\n              )}\n              {exportable && (\n                <div className=\"rounded-log shadow-2x bg-white p-3 px-5\">\n                  <div id=\"editor\" />\n                  <ReportPreview\n                    data={{\n                      template: reportTemplate,\n                      medical: data,\n                      snippetList,\n                    }}\n                  />\n                </div>\n              )}\n            </Col>\n\n            {rightContentVisible && (\n              <Col span={5}>\n                <ReportMedicalOrder\n                  data={data}\n                  reviewDoctor={reviewDoctor}\n                  onToggle={handleLayoutChange(menuState.VISIBLE_RIGHT)}\n                />\n              </Col>\n            )}\n          </Row>\n          {!rightContentVisible && (\n            <Tooltip title=\"展開醫囑內容\">\n              <div\n                className=\"absolute z-10 bg-secondary text-white rounded-tl-md rounded-bl-md flex items-center justify-center cursor-pointer py-2 pr-1\"\n                css={{ right: -49, top: 7 }}\n                onClick={handleLayoutChange(menuState.VISIBLE_RIGHT)}>\n                <LeftOutlined className=\"text-xl\" />\n              </div>\n            </Tooltip>\n          )}\n        </Form>\n      </Page>\n    </ReactDndProvider>\n  )\n}\n","import ReportTyping from './report-typing'\n\nexport default ReportTyping\n// import React from 'react'\n\n// export default React.lazy(() => import('../report-typing/report-typing'))\n","import React from 'react'\n\nexport default React.lazy(() => import('./radiol-image-viewer'))\n","import React from 'react'\n\nexport default React.lazy(() => import('./report-list'))\n","import React from 'react'\n\nexport default React.lazy(() => import('./yellow-card-inquiry'))\n","import React from 'react'\n\nexport default React.lazy(() => import('./blood-bank-review'))\n","import React from 'react'\n\nexport default React.lazy(() => import('./medical-order'))\n","import React from 'react'\n\nexport default React.lazy(() => import('./phrase-list'))\n\nexport const PhraseList = React.lazy(() => import('./phrase-list'))\n\nexport const PhraseEdit = React.lazy(() => import('./phrase-edit'))\n","import React from 'react'\n\nexport default React.lazy(() => import('./report-version-comparison'))\n","import React from 'react'\n\nexport default React.lazy(() => import('./image-scheduler'))\n","import ReportTemplateBuilder from '@/containers/report-template-editor'\nimport ReportTemplateList from '@/containers/report-template-list'\nimport ReportInquiry from '@/containers/report-inquiry'\nimport ReportTyping from '@/containers/report-typing'\n// import PatholImagesViewer from '@/containers/pathol-images-viewer'\nimport RadiolImagesViewer from '@/containers/radiol-images-viewer'\nimport ReportList from '@/containers/report-list'\nimport YellowCardInquiry from '@/containers/yellow-card-inquiry'\nimport BloodBankReview from '@/containers/blood-bank-review'\nimport MedicalOrder from '@/containers/medical-order'\nimport { PhraseList, PhraseEdit } from '@/containers/phrase-list'\nimport ReportVersionComparison from '@/containers/report-version-comparison'\nimport ImageScheduler from '@/containers/image-scheduler'\n\nexport type RouteItem = {\n  id: number\n  title: string\n  path: string\n  component: typeof React.Component\n  icon?: React.FunctionComponent\n  disabled?: boolean\n  param?: string\n  children?: RouteItem[]\n  hide?: RouteItem[]\n}\n\nexport type Route = RouteItem & {\n  children: Array<RouteItem>\n  hide: Array<RouteItem>\n  disabled: boolean\n}\n\nexport const PATHOL_IMAGE = '/pathol-images/:studyInstanceUIDs'\nexport const RADIOL_IMAGE = '/radiol-images/:studyInstanceUIDs'\nexport const REPORT_TEMPLATE_LIST = '/report-templates'\nexport const REPORT_INPUT = '/report-input'\nexport const REPORT_EDIT = `${REPORT_INPUT}/:id`\nexport const REPORT_TEMPLATE_EDIT = `${REPORT_TEMPLATE_LIST}/:id`\nexport const REPORT_TEMPLATE_CREATE = `${REPORT_TEMPLATE_LIST}/create`\nexport const REPORT_INQUIRY = '/report-inquiry'\nexport const REPORT_VERSION_COMPARISON = '/report-version-comparison'\nexport const REPORT_LIST = '/report-list'\nexport const PHRASE_LIST = '/phrase-list'\nexport const PHRASE_CREATE = '/phrase-list/create'\nexport const PHRASE_EDIT = `${PHRASE_LIST}/:id`\nexport const BLOOD_BANK_REVIEW = '/blood-bank-review'\nexport const YELLOW_CARD_INQUIRY = '/yellow-card-inquiry'\nexport const MEDICAL_ORDER = '/medical-order/:id'\nexport const IMAGE_SCHEDULER = '/image-scheduler'\n\nexport function useRoutes() {\n  return [\n    // {\n    //   id: 1,\n    //   title: '病理影像',\n    //   path: PATHOL_IMAGE,\n    //   component: PatholImagesViewer,\n    // },\n    {\n      id: 2,\n      title: '放射影像',\n      path: RADIOL_IMAGE,\n      component: RadiolImagesViewer,\n    },\n    {\n      id: 666,\n      title: '影像排班',\n      path: IMAGE_SCHEDULER,\n      component: ImageScheduler,\n    },\n    {\n      id: 999,\n      title: '清單查詢',\n      path: REPORT_LIST,\n      component: ReportList,\n    },\n    {\n      id: 3,\n      title: '報告查詢',\n      path: REPORT_INQUIRY,\n      component: ReportInquiry,\n    },\n    {\n      id: 15,\n      title: '輸入報告',\n      path: REPORT_EDIT,\n      component: ReportTyping,\n    },\n    {\n      id: 10,\n      title: '輸入報告',\n      path: REPORT_INPUT,\n      component: ReportTyping,\n    },\n    {\n      id: 87878,\n      title: '版本比較',\n      path: REPORT_VERSION_COMPARISON,\n      component: ReportVersionComparison,\n    },\n    {\n      id: 87,\n      title: '黃卡新檢索',\n      path: YELLOW_CARD_INQUIRY,\n      component: YellowCardInquiry,\n    },\n    {\n      id: 88,\n      title: '血庫備血審查作業',\n      path: BLOOD_BANK_REVIEW,\n      component: BloodBankReview,\n    },\n    {\n      id: 89,\n      title: '醫囑內容',\n      path: MEDICAL_ORDER,\n      component: MedicalOrder,\n    },\n    {\n      id: 90,\n      title: '片語模版',\n      path: 'phrase',\n      children: [\n        {\n          id: 93,\n          title: '片語模版清單',\n          path: PHRASE_LIST,\n          component: PhraseList,\n        },\n        {\n          id: 94,\n          title: '片語模版編輯',\n          path: PHRASE_CREATE,\n          component: PhraseEdit,\n        },\n        {\n          id: 95,\n          title: '片語模版編輯',\n          path: PHRASE_EDIT,\n          component: PhraseEdit,\n        },\n      ],\n    },\n    {\n      id: 4,\n      title: '結構式報告模版',\n      path: 'report-template',\n      children: [\n        {\n          id: 5,\n          title: '報告模版清單',\n          path: REPORT_TEMPLATE_LIST,\n          component: ReportTemplateList,\n        },\n        {\n          id: 6,\n          title: '報告模版新增',\n          path: REPORT_TEMPLATE_CREATE,\n          component: ReportTemplateBuilder,\n        },\n        {\n          id: 7,\n          title: '報告模版編輯',\n          path: REPORT_TEMPLATE_EDIT,\n          component: ReportTemplateBuilder,\n        },\n      ],\n    },\n  ]\n}\n\nexport default useRoutes\n","import React from 'react'\nimport { Layout } from 'antd'\n\nexport default function AppFooter() {\n  return (\n    <Layout.Footer\n      className=\"pb-6 text-center text-gray-600 border-t border-gray-400\"\n      style={{ background: 'rgb(221, 228, 237)' }}>\n      2020 高雄榮總數位病理平台\n    </Layout.Footer>\n  )\n}\n","const primary = '#38a8a9'\n\nmodule.exports = {\n  primary,\n  secondary: '#42c2b8',\n  danger: '#d74c4c',\n  darkGrey: '#4a4a4a',\n  purple150: 'rgba(115, 105, 215, 0.15)',\n  cornblue: '#a9b6d8',\n  comet: '#555977',\n  btn: {\n    danger: '#d74c4c',\n    primary: '#2c908a',\n    secondary: '#42c2b8',\n  },\n  sider: {\n    bg: primary,\n  },\n  login: {\n    cyan: 'rgba(5,124,147,1)',\n  },\n  pagination: primary,\n}\n","import React from 'react'\nimport styled, { css } from 'styled-components'\nimport { Button } from 'antd'\nimport { ButtonProps } from 'antd/lib/button'\nimport { ActionTypes } from '@/constants/enums'\n// import useRouteCRUDAuthCheck from 'shared/hooks/useRouteCRUDAuthCheck'\n// import * as Icons from 'shared/components/Icons'\n\ninterface Props extends Omit<ButtonProps, 'icon'> {\n  children?: React.ReactNode\n  circle?: boolean\n  color?: string\n  css?: React.CSSProperties\n  icon?: string | React.ReactNode\n  onClick?: (evt: React.MouseEvent<HTMLElement>) => any\n  actionType?: ActionTypes\n}\n\nconst StyledButton = styled(Button)<Props>`\n  &.ant-btn {\n    min-width: 80px;\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    border-radius: 4px;\n\n    .anticon {\n      margin-right: 6px;\n    }\n\n    &.ant-btn-loading {\n      padding-left: 8px;\n    }\n\n    .ant-btn > .ant-btn-loading-icon .anticon {\n      padding-right: 0;\n    }\n\n    svg {\n      width: 20px;\n      height: 20px;\n    }\n\n    &.ant-btn-sm svg {\n      width: 16px;\n      height: 16px;\n    }\n\n    ${p =>\n      p.color === 'primary' &&\n      css`\n        color: #fff;\n        border-color: ${p => p.theme.btn.primary};\n        background: ${p => p.theme.btn.primary};\n\n        &:hover,\n        &:focus,\n        &:active {\n          color: #fff;\n          background: ${p => p.theme.btn.secondary};\n          border-color: ${p => p.theme.btn.secondary};\n        }\n      `};\n\n    ${p =>\n      p.color === 'outline' &&\n      css`\n        padding: 0 8px;\n        color: ${p => p.theme.btn.primary};\n        border: 1.3px solid ${p => p.theme.btn.primary};\n        background: transparent;\n\n        &:hover,\n        &:focus,\n        &:active {\n          color: ${p => p.theme.primary};\n          background: transparent;\n          border: 1.3px solid ${p => p.theme.btn.primary};\n        }\n      `};\n\n    ${p =>\n      p.color === 'danger' &&\n      css`\n        color: ${p => p.theme.btn.danger};\n        border: 1.3px solid ${p => p.theme.btn.danger};\n        background: #fff;\n\n        &:hover,\n        &:focus,\n        &:active {\n          color: ${p => p.theme.btn.danger};\n          background: #fff6e4;\n          border: 1.3px solid ${p => p.theme.btn.danger};\n        }\n      `};\n\n    ${p =>\n      p.type === 'link' &&\n      css`\n        min-width: auto;\n        padding-left: 0;\n        padding-right: 0;\n        background: transparent;\n        border-color: transparent;\n        color: ${p.theme.primary};\n\n        > span {\n          text-decoration: underline;\n        }\n\n        &:hover {\n          background: transparent;\n          border-color: transparent;\n        }\n      `};\n\n    ${p =>\n      p.size === 'small' &&\n      css`\n        line-height: 1.2;\n      `}\n\n    &.hover--none {\n      &:hover,\n      &:focus,\n      &:active {\n        color: initial;\n        background: initial;\n        border-color: initial;\n      }\n    }\n  }\n\n  &.ant-btn.ant-btn-loading:not(.ant-btn-circle):not(.ant-btn-circle-outline):not(.ant-btn-icon-only) {\n    padding-left: 20px;\n  }\n\n  &.ant-btn[disabled] {\n    svg > g path:nth-child(2) {\n      transition: fill 0.4s ease;\n      fill: darkgrey;\n    }\n  }\n`\n\nexport { StyledButton as Butotn }\n\nexport default function ButtonComponent({\n  // icon,\n  children,\n  loading,\n  actionType,\n  ...props\n}: Props) {\n  // const [, checkIsAuthenticated] = useRouteCRUDAuthCheck()\n\n  // if (actionType && !checkIsAuthenticated(actionType)) {\n  //   return null\n  // }\n\n  return (\n    <StyledButton {...props} loading={loading}>\n      {(() => {\n        // if (icon && !loading) {\n        //   let Icon\n\n        //   const isElement = React.isValidElement(icon)\n\n        //   if (!isElement) {\n        //     Icon = icon\n        //   }\n\n        //   if (typeof icon === 'string') {\n        //     const nameCapitalized = icon.charAt(0).toUpperCase() + icon.slice(1)\n        //     const iconName = 'Icon' + nameCapitalized\n        //     Icon = (Icons as any)[iconName]\n        //   }\n\n        //   return (\n        //     <div className=\"l-flex--center\">\n        //       {isElement ? icon : <Icon className=\"c-icon is--secondary\" />}\n        //       {children}\n        //     </div>\n        //   )\n        // }\n\n        return children\n      })()}\n    </StyledButton>\n  )\n}\n","import React from 'react'\nimport { is } from 'ramda'\nimport _useSWR from 'swr'\nimport {\n  keyInterface,\n  fetcherFn,\n  ConfigInterface,\n  responseInterface,\n} from 'swr/dist/types'\nimport { QueryVariables } from '@/constants/types'\nimport { request, format, toQueryString } from '@/utils/request'\n\ninterface Response<Data = any, Error = any>\n  extends responseInterface<Data, Error> {\n  loading: boolean\n  refetch(variables?: QueryVariables): Promise<any>\n}\n\ninterface Config<Data = any, Error = any> extends ConfigInterface<Data, Error> {\n  variables?: { [key: string]: any }\n  onCompleted?: (data: Data) => void\n  onError?: (error: Error) => void\n}\n\nexport default function useSWR<Data = any, Error = any>(\n  key: keyInterface,\n  { variables, onCompleted, onError, ...config }: Config<Data, Error> = {},\n  fn?: fetcherFn<Data>\n): Response<Data, Error> {\n  const [query, setQuery] = React.useState(variables)\n\n  const val = React.useRef<Data>()\n\n  const _fn = fn\n    ? fn\n    : (url: any) => request(url, { endpoint: 'fakeApiBaseUrl' })\n\n  let _key = key\n  if (is(String, key)) {\n    const { fullUrl, params } = format(key as string, query)\n    _key = `${fullUrl}?${toQueryString(params)}`\n  }\n\n  const { data, ...rest } = _useSWR(_key, _fn, {\n    ...config,\n    dedupingInterval: 0,\n    revalidateOnFocus: false,\n    suspense: false,\n    onSuccess: data => {\n      if (onCompleted) {\n        onCompleted(data)\n      }\n    },\n    onError: error => {\n      if (onError) {\n        onError(error)\n      }\n    },\n  })\n\n  const refetch = (variables?: QueryVariables) => {\n    setQuery(prev => ({ ...prev, ...variables?.params }))\n\n    return Promise.resolve<any>({})\n  }\n\n  if (data !== undefined) {\n    val.current = data\n  }\n\n  return {\n    ...rest,\n    loading: rest.isValidating,\n    data: val.current,\n    refetch,\n  }\n}\n","import React from 'react'\nimport { SelectProps } from 'antd/lib/select'\nimport useSwr from 'swr'\nimport { pathOr, head, map } from 'ramda'\nimport request from '@/utils/request'\nimport useSWR from '@/hooks/useSWR'\nimport Select from '@/components/select'\nimport { QueryVariables } from '@/constants/types'\nconst { compose } = require('ramda')\n\nexport type MedicalOrder = {\n  CFINANCL: string\n  CSECT: string\n  HBED: string\n  HBIRTHDT: string\n  HHISNUM: string\n  HNAMEC: string\n  HNURSTA: string\n  HSEX: string\n  ORDATE: string\n  ORDCLNM: string\n  ORDOCNM: string\n  ORHPCODE: string\n  ORPROCED: string\n  ORREQNO: string\n  ORSPENAM: string\n  ORSTATUS: string\n  ORWORD: string\n  ORWORKNO: string\n  ZRSREGORD: string\n}\n\nexport type Doctor = {\n  id: number\n  doctorId: number\n  doctor: string\n  division: 'PATH' | 'RAD'\n}\n\nexport function usePathology() {\n  const { data, ...others } = useSwr(`/api/b2/getPathologyResult`, url =>\n    request(url, {\n      method: 'POST',\n      body: {\n        classification: 'pathorderview',\n        noType: 'HHISNUM',\n        no: '16685033',\n      },\n    })\n  )\n\n  return {\n    ...others,\n    data: compose(head, pathOr([], []))(data) as MedicalOrder,\n  }\n}\n\nexport function useDoctors({\n  division = 'PATH',\n  ...variables\n}: QueryVariables = {}) {\n  const { data = [], ...rest } = useSWR<Doctor[]>(\n    '/api/v1/c2/getC2DoctorList/{division}',\n    {\n      variables: { division, ...variables },\n    }\n  )\n\n  return {\n    ...rest,\n    data: compose(\n      map((x: Doctor) => ({ ...x, id: x.doctorId })),\n      pathOr([], [])\n    )(data) as Doctor[],\n  }\n}\n\nexport function DoctorSelect(props: SelectProps<any>) {\n  const { data } = useDoctors()\n  return (\n    <Select {...props}>\n      {data.map(x => (\n        <Select.Option key={x.id} value={x.id}>\n          {x.doctor}\n        </Select.Option>\n      ))}\n    </Select>\n  )\n}\n","class EnvStore {\n  pageSize = 10\n  apiBaseUrl =\n    process.env.REACT_APP_API_ROOT ||\n    'https://cors-anywhere.herokuapp.com/http://18.181.199.235:8080/kmedical'\n\n  get isEnvDev(): boolean {\n    return process.env.NODE_ENV === 'development'\n  }\n  get appBaseName(): string {\n    return process.env.REACT_APP_BASE_NAME || ''\n  }\n  get appTitle(): string {\n    return `%s | ${\n      process.env.REACT_APP_TITLE || '高雄榮民總醫院 數位病理平台'\n    }`\n  }\n  get appUrl(): string {\n    return `${window.location.protocol}//${window.location.host}${this.appBaseName}/#/`\n  }\n  get appBaseUrl(): string {\n    return `/#/${this.appBaseName}`\n  }\n  get fakeApiBaseUrl(): string {\n    return (\n      process.env.REACT_APP_FAKE_API_ROOT ||\n      (this.isEnvDev ? 'http://localhost:3004' : 'http://localhost:3004')\n    )\n  }\n  get publicUrl(): string {\n    return process.env.PUBLIC_URL || ''\n  }\n  get canUseDOM(): boolean {\n    return !!(\n      typeof window !== 'undefined' &&\n      window.document &&\n      window.document.createElement\n    )\n  }\n  set setPageSize(pageSize: number | undefined) {\n    this.pageSize = pageSize || 50\n  }\n  set setApiBaseUrl(url: string) {\n    this.apiBaseUrl = url\n  }\n}\n\nexport const envStore = new EnvStore()\n\nexport function isMobile() {\n  let check = false\n  ;(function (a) {\n    if (\n      /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(\n        a\n      ) ||\n      // eslint-disable-next-line no-useless-escape\n      /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(\n        a.substr(0, 4)\n      )\n    )\n      check = true\n  })(navigator.userAgent || navigator.vendor || (window as any).opera)\n  return check\n}\n\nexport default envStore\n","import { ReactText } from 'react'\n\nexport const createFormItemLayout = (label: number = 3, wrapper?: number) => ({\n  labelCol: {\n    xs: { span: label },\n    sm: { span: label },\n  },\n  wrapperCol: {\n    xs: { span: wrapper || 24 - label },\n    sm: { span: wrapper || 24 - label },\n  },\n})\n\nexport const thosandSeprartor = {\n  formatter: (value: number | string | undefined) => {\n    if (!value) {\n      return value as string\n    }\n    return `${value}`.replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')\n  },\n  parser: (value: string | undefined) =>\n    (value ? value.replace(/\\$\\s?|(,*)/g, '') : value) as ReactText,\n}\n\nexport const currency = {\n  formatter: (value: number | string | undefined) => {\n    if (!value) {\n      return value as string\n    }\n    return `$ ${value}`.replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')\n  },\n  parser: (value: string | undefined) =>\n    (value ? value.replace(/\\$\\s?|(,*)/g, '') : value) as ReactText,\n}\n\nexport const percent = {\n  // min: 0,\n  max: 100,\n  formatter: (value: number | string | undefined) => {\n    if (!value) {\n      return value as string\n    }\n    return `${value}%`\n  },\n  parser: (value: string | undefined) =>\n    (value ? value.replace('%', '') : value) as ReactText,\n}\n\nexport const rules = {\n  required: { required: true, message: '此欄位必填' },\n  number: {\n    required: false,\n    type: 'number',\n    message: '請填寫數字',\n    transform(value: any) {\n      if (!value) {\n        return value\n      }\n      return Number(value)\n    },\n  },\n  account: {\n    required: true,\n    message: '欄位長度為8~128字元,特殊符號-,_',\n    pattern: new RegExp(/^.{8,128}$/),\n  },\n  password: {\n    required: true,\n    message: '密碼長度為6~128字元',\n    pattern: new RegExp(/^.{6,128}$/),\n  },\n}\n","import React from 'react'\nimport store from 'store'\nimport moment from 'moment'\nimport {\n  update,\n  mergeAll,\n  map,\n  last as Rlast,\n  filter,\n  omit,\n  keys,\n  sort,\n  inc,\n  pathOr,\n  length,\n} from 'ramda'\nimport {\n  Mutation,\n  MutationOptions,\n  SnippetProps,\n  ReportTemplate,\n  ReportTemplateSetting,\n} from '@/constants/types'\nimport {\n  useReportTemplate as useReportTemplateItem,\n  useReportTemplateState,\n  useCurrentCategoryOfSnippet,\n} from '@/data/useReportTemplate'\nimport { uuid, getNumberFromString, downloadAsJson } from '@/utils/webHelper'\nimport { confirm } from '@/utils/message'\nconst { compose } = require('ramda')\n\nexport function useUpdateSnippet<T = ReportTemplateSetting>(options: {\n  item: SnippetProps\n  onUpdate: (data: any) => void\n  defaultValue?: any\n}) {\n  const { item, onUpdate, defaultValue = {} } = options\n\n  const [setting, setSetting] = React.useState<T>(\n    pathOr(defaultValue, ['setting'], item) as T\n  )\n\n  const handleOk = (values: T) => {\n    setSetting(values)\n    onUpdate({ ...item, setting: values })\n  }\n\n  return { setting, handleOk }\n}\n\nexport const useReportTemplates = () => {\n  const [reportTemplates] = useReportTemplateState()\n\n  return {\n    refetch: () => ({}),\n    data: {\n      content: reportTemplates,\n      total: length(reportTemplates),\n      totalPages: Math.floor(length(reportTemplates) / 10) + 1,\n    },\n    loading: false,\n  }\n}\n\nexport const useAllReportTemplates = () => {\n  return useReportTemplateState()\n}\n\nexport const useReportTemplate = (options: { id?: React.Key; data?: any }) => {\n  const { setSnippetList, snippetList, ...rest } = useReportTemplateItem(\n    options\n  )\n\n  const [category, setCategory] = useCurrentCategoryOfSnippet()\n\n  const handleSnippetUpdate = (data: any[]) => {\n    setSnippetList(prev => ({ ...prev, [category]: data }))\n  }\n\n  const handleTabChange = (activeKey: string) => {\n    setCategory(activeKey)\n  }\n\n  const handleTabMove = (order: string[]) => {\n    const snippetKeys = keys(snippetList)\n\n    setSnippetList(\n      compose(\n        mergeAll,\n        map((key: string) => ({ [key]: snippetList[key] })),\n        sort((a: string, b: string) => {\n          const orderA = order.indexOf(a)\n          const orderB = order.indexOf(b)\n\n          if (orderA !== -1 && orderB !== -1) {\n            return orderA - orderB\n          }\n          if (orderA !== -1) {\n            return -1\n          }\n          if (orderB !== -1) {\n            return 1\n          }\n\n          const ia = snippetKeys.indexOf(a)\n          const ib = snippetKeys.indexOf(b)\n\n          return ia - ib\n        }),\n        keys\n      )(snippetList)\n    )\n  }\n\n  const handleTabAdd = () => {\n    const last = compose(\n      inc,\n      pathOr(0, []),\n      getNumberFromString,\n      Rlast,\n      sort((a: any, b: any) => a - b),\n      keys\n    )(snippetList)\n\n    setSnippetList(prev => ({ ...prev, [`新標籤頁${last}`]: [] }))\n    setCategory(`新標籤頁${last}`)\n  }\n\n  const handleTabRemove = (targetKey: string) => {\n    confirm({\n      title: '確認要刪除此頁籤嗎？',\n      content: '刪除會連同模版資料一起刪除，確認繼續？',\n      onOk: () => {\n        setSnippetList(prev => omit([targetKey], prev))\n\n        if (category === targetKey) {\n          setCategory(\n            compose(\n              Rlast,\n              filter((key: string) => key !== targetKey),\n              keys\n            )(snippetList)\n          )\n        }\n      },\n    })\n  }\n\n  const handleTabNameChange = (targetKey: string) => (\n    evt: React.FocusEvent<HTMLSpanElement>\n  ) => {\n    const newTabName = evt.target.innerHTML\n\n    setSnippetList(prev =>\n      compose(\n        mergeAll,\n        map((key: string) => ({\n          [key === targetKey ? newTabName : key]: prev[key],\n        })),\n        keys\n      )(prev)\n    )\n    setCategory(newTabName)\n  }\n\n  const handleTabEdit = (\n    e:\n      | string\n      | React.MouseEvent<Element, MouseEvent>\n      | React.KeyboardEvent<Element>,\n    action: 'add' | 'remove'\n  ) => {\n    const handler = action === 'add' ? handleTabAdd : handleTabRemove\n\n    handler(e as string)\n  }\n\n  return {\n    ...rest,\n    category,\n    snippetList,\n    setCategory,\n    setSnippetList,\n    handleTabEdit,\n    handleTabChange,\n    handleTabMove,\n    handleTabAdd,\n    handleTabRemove,\n    handleTabNameChange,\n    handleSnippetUpdate,\n  }\n}\n\nexport const useAddNewTemplate = ({ onCompleted }: MutationOptions = {}) => {\n  const [reportTemplates, setReportTemplates] = useReportTemplateState()\n\n  const handler = (values: ReportTemplate) => {\n    let id = uuid()\n    let newList = [\n      ...reportTemplates,\n      {\n        ...values,\n        id,\n        createdAt: moment(),\n        createdAtStr: moment().format('YYYY/MM/DD HH:mm'),\n        updatedAt: moment(),\n        updatedAtStr: moment().format('YYYY/MM/DD HH:mm'),\n      },\n    ]\n\n    setReportTemplates(newList)\n\n    store.set('reportTemplateListState', newList)\n\n    if (onCompleted) {\n      onCompleted({ ...values, id })\n    }\n  }\n\n  return [false, handler] as Mutation\n}\n\nexport const useUpdateTemplate = ({ onCompleted }: MutationOptions = {}) => {\n  const [reportTemplates, setReportTemplates] = useReportTemplateState()\n\n  const handler = (values: ReportTemplate) => {\n    let index = reportTemplates.findIndex(x => `${x.id}` === `${values.id}`)\n    let newList = update(\n      index,\n      {\n        ...values,\n        updatedAt: moment(),\n        updatedAtStr: moment().format('YYYY/MM/DD HH:mm'),\n      },\n      reportTemplates\n    )\n\n    setReportTemplates(newList)\n    store.set('reportTemplateListState', newList)\n\n    if (onCompleted) {\n      onCompleted()\n    }\n  }\n\n  return [false, handler] as Mutation\n}\n\nexport const useExportTemplate = ({\n  data,\n  filename,\n}: {\n  data: ReportTemplate\n  filename: string\n}) => {\n  const handleExport = () => {\n    downloadAsJson({\n      filename: `${filename}_${data?.name || ''}_${moment().format(\n        'YYYYMMDDHHmmss'\n      )}`,\n      json: data,\n    })\n  }\n\n  return handleExport\n}\n"],"sourceRoot":""}