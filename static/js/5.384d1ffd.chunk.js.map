{"version":3,"sources":["hooks/useVisible.ts","containers/login/components.ts","../node_modules/@ant-design/icons-svg/es/asn/ExclamationCircleFilled.js","../node_modules/@ant-design/icons/es/icons/ExclamationCircleFilled.js","../node_modules/@ant-design/icons-svg/es/asn/UserOutlined.js","../node_modules/@ant-design/icons/es/icons/UserOutlined.js","../node_modules/@ant-design/icons-svg/es/asn/LockOutlined.js","../node_modules/@ant-design/icons/es/icons/LockOutlined.js","containers/login/result.tsx","containers/login/login.tsx","hooks/useLogin.ts"],"names":["useVisible","onRequestOpen","React","useState","visible","setVisible","handleVisible","evt","prev","handleClose","LoginWrapper","styled","div","LoginForm","Input","InputComponent","p","theme","darkGrey","Checkbox","CheckboxComponent","login","cyan","ExclamationCircleFilled","props","ref","AntdIcon","Object","assign","icon","ExclamationCircleFilledSvg","displayName","UserOutlined","UserOutlinedSvg","LockOutlined","LockOutlinedSvg","fontSize","letterSpacing","Result","title","description","onClose","className","block","size","onClick","height","Login","useForm","form","onCompleted","onError","useAuth","setIsAuthenticated","loading","values","error","useLogin","handleResultVisible","resultVisible","src","envStore","publicUrl","alt","width","Item","noStyle","name","placeholder","prefix","span","history","push","validateFields","then"],"mappings":"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","file":"static/js/5.384d1ffd.chunk.js","sourcesContent":["import React from 'react'\n\ntype Props = {\n  /**\n   * 開關 Modal 時希望處理的事情\n   */\n  onRequestOpen?: () => any\n}\n\nexport default function useVisible({ onRequestOpen }: Props = {}) {\n  const [visible, setVisible] = React.useState(false)\n\n  const handleVisible: any = (evt: React.MouseEvent<HTMLElement>) => {\n    setVisible(prev => !prev)\n\n    if (onRequestOpen) {\n      onRequestOpen()\n    }\n  }\n\n  const handleClose = () => {\n    setVisible(false)\n  }\n\n  return [visible, handleVisible, handleClose]\n}\n","import styled from 'styled-components'\nimport InputComponent from '@/components/input'\nimport CheckboxComponent from '@/components/checkbox'\n\nexport const LoginWrapper = styled.div`\n  height: 100vh;\n  background: linear-gradient(to right bottom, #0f7892, #3caaa0);\n  display: flex;\n  justify-content: center;\n`\n\nexport const LoginForm = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  width: 30%;\n`\n\nexport const Input = styled(InputComponent)`\n  &.ant-input-affix-wrapper {\n    > input.ant-input {\n      position: relative;\n      top: 2px;\n      padding-left: 6px;\n      color: ${p => p.theme.darkGrey};\n    }\n  }\n\n  .ant-input-lg {\n    font-size: 1rem;\n  }\n`\n\nexport const Checkbox = styled(CheckboxComponent)`\n  .ant-checkbox-inner {\n    width: 20px;\n    height: 20px;\n  }\n\n  .ant-checkbox-inner::after {\n    left: 35%;\n  }\n\n  .ant-checkbox-checked .ant-checkbox-inner {\n    background: ${p => p.theme.login.cyan};\n    border-color: ${p => p.theme.login.cyan};\n  }\n`\n","// This icon file is generated automatically.\nvar ExclamationCircleFilled = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z\" } }] }, \"name\": \"exclamation-circle\", \"theme\": \"filled\" };\nexport default ExclamationCircleFilled;\n","// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport ExclamationCircleFilledSvg from \"@ant-design/icons-svg/es/asn/ExclamationCircleFilled\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar ExclamationCircleFilled = function ExclamationCircleFilled(props, ref) {\n  return React.createElement(AntdIcon, Object.assign({}, props, {\n    ref: ref,\n    icon: ExclamationCircleFilledSvg\n  }));\n};\n\nExclamationCircleFilled.displayName = 'ExclamationCircleFilled';\nexport default React.forwardRef(ExclamationCircleFilled);","// This icon file is generated automatically.\nvar UserOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M858.5 763.6a374 374 0 00-80.6-119.5 375.63 375.63 0 00-119.5-80.6c-.4-.2-.8-.3-1.2-.5C719.5 518 760 444.7 760 362c0-137-111-248-248-248S264 225 264 362c0 82.7 40.5 156 102.8 201.1-.4.2-.8.3-1.2.5-44.8 18.9-85 46-119.5 80.6a375.63 375.63 0 00-80.6 119.5A371.7 371.7 0 00136 901.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8 2-77.2 33-149.5 87.8-204.3 56.7-56.7 132-87.9 212.2-87.9s155.5 31.2 212.2 87.9C779 752.7 810 825 812 902.2c.1 4.4 3.6 7.8 8 7.8h60a8 8 0 008-8.2c-1-47.8-10.9-94.3-29.5-138.2zM512 534c-45.9 0-89.1-17.9-121.6-50.4S340 407.9 340 362c0-45.9 17.9-89.1 50.4-121.6S466.1 190 512 190s89.1 17.9 121.6 50.4S684 316.1 684 362c0 45.9-17.9 89.1-50.4 121.6S557.9 534 512 534z\" } }] }, \"name\": \"user\", \"theme\": \"outlined\" };\nexport default UserOutlined;\n","// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport UserOutlinedSvg from \"@ant-design/icons-svg/es/asn/UserOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar UserOutlined = function UserOutlined(props, ref) {\n  return React.createElement(AntdIcon, Object.assign({}, props, {\n    ref: ref,\n    icon: UserOutlinedSvg\n  }));\n};\n\nUserOutlined.displayName = 'UserOutlined';\nexport default React.forwardRef(UserOutlined);","// This icon file is generated automatically.\nvar LockOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z\" } }] }, \"name\": \"lock\", \"theme\": \"outlined\" };\nexport default LockOutlined;\n","// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport LockOutlinedSvg from \"@ant-design/icons-svg/es/asn/LockOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar LockOutlined = function LockOutlined(props, ref) {\n  return React.createElement(AntdIcon, Object.assign({}, props, {\n    ref: ref,\n    icon: LockOutlinedSvg\n  }));\n};\n\nLockOutlined.displayName = 'LockOutlined';\nexport default React.forwardRef(LockOutlined);","import React from 'react'\nimport { ExclamationCircleFilled } from '@ant-design/icons'\nimport Button from '@/components/button'\n\ntype Props = {\n  title?: React.ReactNode\n  description?: React.ReactNode\n  icon?: React.ReactNode\n  onClose: () => void\n}\n\nexport default function Result({\n  title = '錯誤',\n  description = '登入失敗',\n  icon = <ExclamationCircleFilled />,\n  onClose,\n}: Props) {\n  return (\n    <div className=\"flex flex-col items-center justify-center\">\n      <div className=\"text-white mb-12\" css={{ fontSize: 100 }}>\n        {icon}\n      </div>\n      <div className=\"text-white mb-2 text-3xl\" css={{ letterSpacing: 8 }}>\n        {title}\n      </div>\n      <div className=\"text-xl text-white opacity-75 mb-24\">{description}</div>\n      <Button\n        block\n        size=\"large\"\n        onClick={onClose}\n        className=\"text-white text-xl bg-login-cyan border-login-cyan hover--none\">\n        返回\n      </Button>\n    </div>\n  )\n}\n","import React from 'react'\nimport { Form, Row, Col } from 'antd'\nimport { UserOutlined, LockOutlined } from '@ant-design/icons'\nimport Button from '@/components/button'\nimport envStore from '@/constants/env'\n// import { rules } from '@/utils/form'\nimport useLogin from '@/hooks/useLogin'\nimport history from '@/utils/history'\nimport useVisible from '@/hooks/useVisible'\nimport { LoginWrapper, LoginForm, Input, Checkbox } from './components'\nimport Result from './result'\n\ntype FormValues = {\n  account: string\n  password: string\n}\n\nexport default function Login() {\n  const [form] = Form.useForm()\n\n  const { login, error } = useLogin({\n    onError: () => {\n      handleResultVisible()\n    },\n  })\n\n  const [resultVisible, handleResultVisible] = useVisible()\n\n  const handleLogin = () => {\n    form.validateFields().then((values: any) => login(values))\n  }\n\n  const handleForgetPass = () => {\n    history.push('/forget-password')\n  }\n\n  return (\n    <LoginWrapper>\n      {resultVisible && <Result {...error} onClose={handleResultVisible} />}\n      {!resultVisible && (\n        <LoginForm>\n          <img\n            src={`${envStore.publicUrl}/images/logo@3x.png`}\n            alt=\"高雄榮民總醫院\"\n            width={230}\n            className=\"mb-3 bg-white rounded-full\"\n          />\n          <h1 className=\"mb-16 text-white text-3xl text-center\">\n            <div>高雄榮民總醫院</div>數位病理平台\n          </h1>\n          <Form form={form}>\n            <Form.Item\n              noStyle\n              name=\"account\"\n              // rules={[rules.required]}\n            >\n              <Input\n                size=\"large\"\n                placeholder=\"帳號\"\n                className=\"mb-6\"\n                prefix={<UserOutlined />}\n                css={{ height: 48 }}\n              />\n            </Form.Item>\n            <Form.Item\n              noStyle\n              name=\"password\"\n              // rules={[rules.required]}\n            >\n              <Input\n                size=\"large\"\n                placeholder=\"密碼\"\n                className=\"mb-6\"\n                prefix={<LockOutlined />}\n                css={{ height: 48 }}\n              />\n            </Form.Item>\n            <Row className=\"mb-10\">\n              <Col span={24} className=\"flex justify-between items-center\">\n                <Form.Item noStyle>\n                  <div\n                    className=\"text-white cursor-pointer text-lg\"\n                    onClick={handleForgetPass}>\n                    忘記密碼\n                  </div>\n                </Form.Item>\n                <Form.Item noStyle name=\"rememberMe\">\n                  <Checkbox className=\"flex justify-end items-center text-white text-lg\">\n                    記住我\n                  </Checkbox>\n                </Form.Item>\n              </Col>\n            </Row>\n            <Button\n              block\n              size=\"large\"\n              onClick={handleLogin}\n              className=\"text-white text-xl bg-login-cyan border-login-cyan hover--none\"\n              css={{ height: 48, letterSpacing: 6 }}>\n              登入\n            </Button>\n          </Form>\n        </LoginForm>\n      )}\n    </LoginWrapper>\n  )\n}\n","// import { message } from 'antd'\n// import Cookies from 'js-cookie'\n// import { useLogin } from '../graphql/auth'\nimport { useAuth } from './useAuth'\n\ntype Props = {\n  onCompleted?: () => any\n  onError?: () => any\n}\n\nexport default ({ onCompleted, onError }: Props = {}) => {\n  // const { loading, login, data } = useLogin()\n\n  const { setIsAuthenticated /* setUser */ } = useAuth()\n\n  // React.useEffect(() => {\n  //   if (data && data.response) {\n  //     const { code, data: user, msg } = data.response\n\n  //     if (code === 500) {\n  //       message.error(msg)\n  //     }\n\n  //     if (code === 200) {\n  //       Cookies.set('vghks_token', user.token)\n  //       Cookies.set('vghks_user', user)\n\n  //       setIsAuthenticated(true)\n  //       setUser(user)\n\n  //       if (onCompleted) {\n  //         onCompleted()\n  //       }\n  //     }\n  //   }\n  // }, [data])\n\n  return {\n    loading: false,\n    login: (values: { account: string; password: string }) => {\n      // login(values)\n      setIsAuthenticated(true)\n\n      if (onError) {\n        // onError()\n      }\n    },\n    error: { title: '錯誤', description: '帳號、信箱資料錯誤或漏填訊息' },\n  }\n}\n"],"sourceRoot":""}