{"version":3,"sources":["components/input.tsx","components/layout.tsx","components/table.tsx","hooks/useTitle.ts","containers/report-templates/item-types.ts","containers/report-templates/utils.js","components/select.tsx","containers/report-templates/snippet-preview-modal.tsx","components/modal.tsx","utils/message.tsx","components/checkbox.tsx","utils/form.ts","containers/report-templates/template-modal.tsx","containers/report-templates/template-wrapper.tsx","containers/report-templates/template-input-text.tsx","components/input-number.tsx","containers/report-templates/template-input-number.tsx","components/radio.tsx","components/editable-table.tsx","containers/report-templates/template-selection-modal.tsx","containers/report-templates/template-multiple-selection.tsx","containers/report-templates/template-single-selection.tsx","components/datepicker.tsx","containers/report-templates/template-date.tsx","containers/report-templates/template-time.tsx","containers/report-templates/template-select.tsx","containers/report-templates/template-list.tsx","containers/report-templates/withScroll.js","containers/report-templates/react-dnd-provider.tsx","containers/report-templates/snippet-toolbar.tsx","containers/report-templates/snippet.tsx"],"names":["borderLess","css","p","theme","primary","StyledInput","styled","secondary","TextArea","Page","children","className","background","borderTopLeftRadius","borderTopRightRadius","StyledTable","pagination","TableComponent","editable","columns","onAddRowClick","isRowDeletable","onDeleteRowClick","isCanEdit","props","_columns","React","useMemo","canEdit","title","placement","style","top","onClick","undefined","width","render","_","__","idx","r","key","id","locale","emptyText","image","PRESENTED_IMAGE_SIMPLE","description","displayName","Column","DEFAULT_USE_TITLE_OPTIONS","restoreOnUnmount","document","options","prevTitleRef","useRef","replace","envStore","appTitle","useEffect","current","_title","CARD","BOARD","SNIPPET","hasClassName","nodes","find","n","isNil","includes","canMoveSnippet","element","elem","push","parentNode","unshift","getPlaceHolderIndex","clientOffset","overSnippet","findSnippet","classList","contains","parentElement","elementFromPoint","x","y","snippetIndex","dataset","index","placeholderIndex","isOverSnippet","getDisplayName","Component","name","length","StyledSelect","SelectComponent","this","Option","compose","require","SnippetPreviewModal","onCancel","snippetList","visible","maskClosable","keyboard","footer","map","gt","pathOr","mapIndexed","item","draggable","keys","StyledModal","ModalComponent","confirm","error","success","info","marginTop","marginBottom","onOk","content","icon","okText","cancelText","centered","autoFocusButton","okButtonProps","minWidth","marginRight","cancelButtonProps","modalDefaultProps","StyledCheckbox","CheckboxComponent","forwardRef","ref","Group","createFormItemLayout","label","wrapper","labelCol","xs","span","sm","wrapperCol","thosandSeprartor","formatter","value","parser","currency","percent","max","RegExp","TemplateModal","color","StyledCard","TemplateWrapper","onDelete","onEdit","FontColorsOutlined","cx","InputTextModal","useForm","form","validateFields","then","values","labelAlign","initialValues","Item","valuePropName","StyledInputNumber","attrs","min","ThousandSeprartorInput","CurrencyInput","PercentInput","InputNumberModal","StyledRadio","darkGrey","RadioComponent","EditableTable","onChange","onRowAdd","onRowDelete","triggerChange","changedValue","rowKey","size","dataSource","defaultValue","uuid","text","selected","freetext","TemplateSelectionModal","v","noStyle","align","concat","invoker","filter","StyledDatePicker","StyledTimePicker","DatePickerComponent","InputDateModal","allowClear","picker","InputTimeModal","format","templateList","type","editModalVisible","handleEditModalVisible","onUpdate","useState","setting","setSetting","inputProps","bordered","placeholder","tooltip","multipleLine","autoSize","minRows","units","bodyStyle","paddingLeft","defaultChecked","templateById","mergeAll","noop","intBetween","val","Math","floor","createVerticalStrength","_buffer","point","h","w","buffer","defaultHorizontalStrength","defaultVerticalStrength","ScrollableComponent","WrappedComponent","ScrollingComponent","ctx","handleEvent","evt","dragging","attached","attach","updateScrolling","throttle","container","getBoundingClientRect","box","left","height","coords","changedTouches","clientX","clientY","getCoords","scaleX","horizontalStrength","scaleY","verticalStrength","frame","startScrolling","trailing","useScroll","_initial","findDOMNode","wrappedInstance","addEventListener","window","body","clearMonitorSubscription","context","dragDropManager","getMonitor","subscribeToStateChange","handleMonitorChange","_remove","removeEventListener","stopScrolling","isDragging","i","tick","strengthMultiplier","onScrollChange","scrollLeft","scrollTop","scrollWidth","scrollHeight","clientWidth","clientHeight","raf","detach","cancel","defaultProps","contextType","DndContext","hoist","withScroll","div","vStrength","ReactDndProvider","ToolbarWrapper","Box","SnippetToolbar","tabIndex","EditOutlined","DeleteOutlined","withDragSource","DragSource","ItemTypes","beginDrag","fromMenu","originalIndex","canDrag","connect","monitor","connectDragSource","dragSource","connectDragPreview","dragPreview","Snippet","componentDidMount","getEmptyImage","handleRemove","removeSnippet","console","log","setState","prev","handleIndent","_onMouseOver","_onMouseOut","state","wrapperId","styles","isFocus","borderRadius","border","outlineColor","purple150","cursor","position","display","getItemStyles","onMouseOver","onMouseOut","data-index","Children","child","cloneElement"],"mappings":"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","file":"static/js/3.d1e973af.chunk.js","sourcesContent":["import { Input } from 'antd'\nimport styled, { css } from 'styled-components'\n\nconst borderLess = css`\n  &.ant-input-borderless {\n    border: none;\n    border-bottom: 1px solid ${p => p.theme.primary};\n    border-bottom-left-radius: 0;\n    border-bottom-right-radius: 0;\n  }\n\n  &:active:not(.ant-input-borderless) {\n    box-shadow: 0 0 0 1px ${p => p.theme.primary};\n  }\n`\n\nconst StyledInput = styled(Input)`\n  &.ant-input-affix-wrapper .ant-input,\n  &.ant-input {\n    border-color: ${p => p.theme.primary};\n\n    &:hover,\n    &:focus {\n      border-color: ${p => p.theme.secondary};\n    }\n\n    ${borderLess};\n  }\n`\n\nconst Search = styled(Input.Search)`\n  &.ant-input-search {\n    .ant-input {\n      border-color: ${p => p.theme.primary};\n\n      &:hover,\n      &:focus {\n        border-color: ${p => p.theme.secondary};\n      }\n\n      &:focus {\n        box-shadow: 0 0 0 1px ${p => p.theme.primary};\n      }\n    }\n\n    .anticon-search {\n      font-size: 20px;\n      color: ${p => p.theme.primary};\n    }\n  }\n`\n\nconst TextArea = styled(Input.TextArea)`\n  &.ant-input {\n    resize: none;\n    border: 1px solid ${p => p.theme.primary};\n\n    &:hover,\n    &:focus {\n      border-color: ${p => p.theme.secondary};\n    }\n\n    ${borderLess};\n  }\n`\n\nexport { StyledInput as Input, TextArea, Search }\n\nexport default StyledInput\n","import React from 'react'\nimport styled from 'styled-components'\nimport { BreadcrumbProps } from 'antd/lib/breadcrumb'\nimport { HomeOutlined } from '@ant-design/icons'\nimport Breadcrumb from '@/components/breadcrumb'\nimport Box from '@/components/box'\nimport history from '@/utils/history'\n\nconst PageTitleWrapper = styled(Box)`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 1.429rem;\n`\n\ninterface PageTitleProps extends BreadcrumbProps {\n  title?: string\n  items?: { href?: string; name: string }[]\n  right?: React.ReactNode\n}\n\nexport function PageTitle({ items = [], right, ...props }: PageTitleProps) {\n  const handleTo = (pathname?: string) => (\n    evt: React.MouseEvent<HTMLElement>\n  ) => {\n    evt.preventDefault()\n\n    if (pathname) {\n      history.push(pathname)\n    }\n  }\n\n  return (\n    <PageTitleWrapper>\n      <Breadcrumb separator=\">\" {...props}>\n        <Breadcrumb.Item onClick={handleTo('/')} href=\"/\">\n          <HomeOutlined className=\"relative\" style={{ top: -4 }} />\n        </Breadcrumb.Item>\n        {items.map((x, idx) => (\n          <Breadcrumb.Item\n            key={`breadcrumb-${idx}`}\n            onClick={handleTo(x.href)}\n            href={x.href}>\n            {x.name}\n          </Breadcrumb.Item>\n        ))}\n      </Breadcrumb>\n      {right}\n    </PageTitleWrapper>\n  )\n}\n\ninterface PageProps {\n  children: React.ReactNode\n}\n\nexport function Page({ children }: PageProps) {\n  return (\n    <Box\n      className=\"pl-8 pt-6 pr-16 pb-12\"\n      background=\"rgb(221, 228, 237)\"\n      borderTopLeftRadius={32}\n      borderTopRightRadius={32}>\n      {children}\n    </Box>\n  )\n}\n","import React from 'react'\nimport { Table, Empty, Tooltip } from 'antd'\nimport { TableProps } from 'antd/lib/table'\nimport { CloseOutlined, PlusOutlined } from '@ant-design/icons'\nimport styled from 'styled-components'\n\nconst StyledTable: any = styled(Table)`\n  &.ant-table-wrapper {\n    .ant-pagination-prev .ant-pagination-item-link,\n    .ant-pagination-next .ant-pagination-item-link {\n      border-color: ${p => p.theme.pagination};\n      border-radius: 6px;\n      color: ${p => p.theme.pagination};\n    }\n\n    .ant-pagination-item {\n      border-color: ${p => p.theme.pagination};\n    }\n\n    .ant-pagination-item a {\n      color: ${p => p.theme.pagination};\n    }\n\n    .ant-pagination-item-active,\n    .ant-pagination-item-active:focus,\n    .ant-pagination-item:hover {\n      border-color: ${p => p.theme.pagination};\n      background: ${p => p.theme.pagination};\n\n      a {\n        color: #fff;\n      }\n    }\n\n    .ant-table-pagination.ant-pagination {\n      margin-top: 32px;\n    }\n\n    .ant-pagination-prev:hover .ant-pagination-item-link,\n    .ant-pagination-next:hover .ant-pagination-item-link {\n      border-color: ${p => p.theme.pagination};\n      background: ${p => p.theme.pagination};\n      color: #fff;\n    }\n\n    .ant-pagination-simple-pager {\n      color: ${p => p.theme.pagination};\n    }\n  }\n\n  .ant-table-tbody > tr > td {\n    height: 40px;\n    padding-top: 10px;\n    padding-bottom: 10px;\n    line-height: 1em;\n    color: #4a4a4a;\n    background: #f0f2f5;\n    border-bottom: 1px solid #e9e9e9;\n  }\n\n  .ant-table-thead > tr > th {\n    background: rgb(196, 213, 241);\n    border-bottom: 1px solid #e9e9e9;\n    color: ${p => p.theme.primary};\n    font-weight: 600;\n    font-size: 16px;\n  }\n`\n\ntype Props<T> = TableProps<T> & {\n  editable?: boolean\n  isRowDeletable?: (row: T) => boolean\n  onAddRowClick?: (param?: any) => any\n  onDeleteRowClick?: (param?: any) => any\n  isCanEdit?: any\n}\n\nfunction TableComponent<T = any>({\n  editable = false,\n  columns = [],\n  onAddRowClick,\n  isRowDeletable = () => true,\n  onDeleteRowClick,\n  isCanEdit = '',\n  ...props\n}: Props<T>) {\n  const _columns = React.useMemo(() => {\n    let canEdit: boolean = true\n    if (!editable) {\n      return columns\n    }\n    if (isCanEdit !== '') {\n      canEdit = isCanEdit\n    }\n\n    const handleRowDelete = (key: React.Key) => () => {\n      if (onDeleteRowClick) {\n        onDeleteRowClick(key)\n      }\n    }\n\n    return [\n      {\n        title: (\n          <Tooltip placement=\"topLeft\" title=\"新增\">\n            <PlusOutlined\n              className=\"ml-1 relative\"\n              style={{ top: -3 }}\n              onClick={canEdit ? onAddRowClick : undefined}\n            />\n          </Tooltip>\n        ),\n        width: 50,\n        render: (_: any, __: any, idx: number) => (\n          <div className=\"text-center\">#{idx + 1}</div>\n        ),\n      },\n      ...columns,\n      {\n        width: 50,\n        render: (_: any, r: any, idx: number) => (\n          <Tooltip placement=\"topLeft\" title=\"刪除\">\n            <CloseOutlined\n              onClick={isRowDeletable(r) ? handleRowDelete(r.id) : undefined}\n            />\n          </Tooltip>\n        ),\n      },\n    ]\n  }, [columns, editable]) // eslint-disable-line\n\n  return (\n    <StyledTable\n      columns={_columns}\n      locale={{\n        emptyText: (\n          <Empty\n            image={Empty.PRESENTED_IMAGE_SIMPLE}\n            description={\n              <span>\n                <span className=\"d-block\">\n                  尚無資料，請點選「＋新增」新增資料。\n                </span>\n              </span>\n            }\n          />\n        ),\n      }}\n      {...props}>\n      {props.children}\n    </StyledTable>\n  )\n}\n\nTableComponent.displayName = 'Table'\nTableComponent.Column = Table.Column\n\nexport default TableComponent\n","import React from 'react'\nimport { replace } from 'ramda'\nimport { envStore } from '@/constants/env'\n\nexport interface UseTitleOptions {\n  restoreOnUnmount?: boolean\n}\n\nconst DEFAULT_USE_TITLE_OPTIONS: UseTitleOptions = {\n  restoreOnUnmount: false,\n}\n\nfunction useTitle(\n  title: string,\n  options: UseTitleOptions = DEFAULT_USE_TITLE_OPTIONS\n) {\n  const prevTitleRef = React.useRef(document.title)\n  document.title = replace(/%s/, title)(envStore.appTitle)\n  React.useEffect(() => {\n    if (options && options.restoreOnUnmount) {\n      return () => {\n        document.title = prevTitleRef.current // eslint-disable-line\n      }\n    } else {\n      return\n    }\n  }, []) // eslint-disable-line\n}\n\nexport default typeof document !== 'undefined'\n  ? useTitle\n  : (_title: string) => {}\n","export default {\n  CARD: 'card',\n  BOARD: 'board',\n  SNIPPET: 'snippet',\n}\n\nexport type TemplateProps = {\n  item: any\n  isPreview?: boolean\n  editModalVisible: boolean\n  handleEditModalVisible: () => void\n  onUpdate: (data: any) => void\n}\n","import { includes } from 'ramda'\nimport { isNil } from '@/utils/webHelper'\n\n/* prettier-ignore */\nconst REPORT_TEMPLATE_BUILDER_CLASSNAME = 'report-template-builder__main-content'\nconst UI_DRAGGABLE_CLASSNAME = 'ui-draggable'\n\nconst hasClassName = (nodes, className) => {\n  return nodes.find(\n    n => !isNil(n.className) && includes(className)(n.className)\n  )\n}\n\nexport function canMoveSnippet(\n  element,\n  className = REPORT_TEMPLATE_BUILDER_CLASSNAME\n) {\n  let elem = element\n\n  const nodes = []\n  nodes.push(elem)\n\n  while (elem.parentNode) {\n    nodes.unshift(elem.parentNode)\n    elem = elem.parentNode\n  }\n\n  if (\n    hasClassName(nodes, 'report-template-builder-contentarea--fixed-layout') ||\n    hasClassName(nodes, 'snippet-drawer-menu')\n  ) {\n    return false\n  }\n  if (\n    hasClassName(nodes, className) ||\n    hasClassName(nodes, UI_DRAGGABLE_CLASSNAME)\n  ) {\n    return true\n  }\n\n  return false\n}\n\nexport function findSnippet(element, className = UI_DRAGGABLE_CLASSNAME) {\n  if (element.classList.contains(className)) {\n    return element\n  }\n  return element.parentElement && findSnippet(element.parentElement, className)\n}\n\nexport function getPlaceHolderIndex(clientOffset) {\n  const hoverElement = document.elementFromPoint(clientOffset.x, clientOffset.y)\n\n  // find ui-draggable classname\n  const overSnippet = findSnippet(hoverElement)\n\n  const snippetIndex = overSnippet && overSnippet.dataset.index\n  const placeholderIndex = overSnippet ? +overSnippet.dataset.index : -1\n\n  const isOverSnippet = !isNil(snippetIndex)\n\n  return {\n    overSnippet,\n    placeholderIndex,\n    isOverSnippet: isOverSnippet,\n  }\n}\n\nexport default function getDisplayName(Component) {\n  return (\n    Component.displayName ||\n    Component.name ||\n    (typeof Component === 'string' && Component.length > 0\n      ? Component\n      : 'Unknown')\n  )\n}\n","import React from 'react'\nimport { Select } from 'antd'\nimport { SelectProps } from 'antd/lib/select'\nimport styled from 'styled-components'\n\nconst StyledSelect: any = styled(Select)`\n  &.ant-select {\n    &.ant-select-single:not(.ant-select-customize-input) .ant-select-selector,\n    .ant-select-selection:hover,\n    .ant-select-selection:active,\n    .ant-select-selection:focus {\n      border-color: ${p => p.theme.primary};\n    }\n\n    .ant-select-selection {\n      border-color: ${p => p.theme.secondary};\n    }\n\n    .ant-select-selection:active,\n    .ant-select-selection:focus {\n      box-shadow: none;\n    }\n\n    .ant-select-arrow {\n      color: ${p => p.theme.primary};\n    }\n\n    .ant-select-arrow-icon {\n      position: relative;\n      top: -1px;\n      font-size: 14px;\n    }\n\n    &.ant-select-borderless .ant-select-selector {\n      position: relative;\n      bottom: 1px;\n      border: 0;\n      border-bottom: 1px solid ${p => p.theme.primary} !important;\n      border-bottom-left-radius: 0;\n      border-bottom-right-radius: 0;\n    }\n  }\n\n  &.ant-select.is--transparent {\n    &.ant-select-focused > .ant-select-selector {\n      border: 1px solid #666a8f;\n    }\n\n    > .ant-select-selector {\n      background: transparent;\n      border: 1px solid #666a8f;\n      color: #a9b6d8;\n\n      &:active,\n      &:focus,\n      &:hover {\n        border: 1px solid #666a8f;\n      }\n    }\n\n    .ant-select-arrow {\n      color: #a9b6d8;\n    }\n  }\n`\n\nclass SelectComponent<T = any> extends React.Component<SelectProps<T>, any> {\n  public static Option = Select.Option\n\n  public static displayName = 'Select'\n\n  render() {\n    return <StyledSelect {...this.props}>{this.props.children}</StyledSelect>\n  }\n}\n\nexport default SelectComponent\n","import React from 'react'\nimport { ModalProps } from 'antd/lib/modal'\nimport { length, __, gt, keys, map, pathOr } from 'ramda'\nimport Modal from '@/components/modal'\nimport Box from '@/components/box'\nimport { mapIndexed } from '@/utils/webHelper'\nimport Snippet from './snippet'\nconst { compose } = require('ramda')\n\ninterface Props extends ModalProps {\n  snippetList?: { [key: string]: any[] }\n}\n\nexport default function SnippetPreviewModal({ onCancel, snippetList }: Props) {\n  return (\n    <Modal\n      visible\n      style={{ top: 30 }}\n      maskClosable={false}\n      className=\"ant-modal-header--border-none\"\n      keyboard={false}\n      width=\"85%\"\n      onCancel={onCancel}\n      footer={false}>\n      {compose(\n        map((key: string) => (\n          <Box key={key}>\n            {compose(gt(__, 0), length, pathOr([], [key]))(snippetList) && (\n              <h2>{key}</h2>\n            )}\n            {compose(\n              mapIndexed((item: any, idx: number) => (\n                <Snippet key={item.id} draggable={false}>\n                  <item.Component\n                    id={item.id}\n                    className={item.id}\n                    item={item}\n                    index={idx}\n                  />\n                </Snippet>\n              )),\n              pathOr([], [key])\n            )(snippetList)}\n          </Box>\n        )),\n        keys\n      )(snippetList)}\n    </Modal>\n  )\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport { Modal } from 'antd'\nimport { ModalProps } from 'antd/lib/modal'\n\nconst StyledModal = styled(Modal)`\n  animation-duration: 0s !important;\n  transition: none !important;\n\n  .ant-modal-header--border-none {\n    border-bottom: none;\n  }\n\n  .ant-modal-footer {\n    padding-top: 14px;\n    padding-bottom: 14px;\n  }\n`\n\nexport default class ModalComponent extends React.Component<ModalProps, any> {\n  static confirm = Modal.confirm\n  static error = Modal.error\n  static success = Modal.success\n  static info = Modal.info\n\n  render() {\n    return <StyledModal {...this.props}>{this.props.children}</StyledModal>\n  }\n}\n","import React from 'react'\nimport { Modal } from 'antd'\nimport { ModalProps, ModalFuncProps } from 'antd/lib/modal'\n\nexport const modalDefaultProps = (\n  content?: React.ReactNode,\n  props?: ModalProps\n): ModalFuncProps => ({\n  content: (\n    <div\n      className=\"text-primary font-medium\"\n      css={{ marginTop: 16, marginBottom: 30 }}>\n      {content}\n    </div>\n  ),\n  icon: null,\n  width: 440,\n  okText: '刪除',\n  cancelText: '取消',\n  centered: true,\n  // maskStyle: {\n  //   background: theme.modal.maskDarken,\n  // },\n  autoFocusButton: null,\n  okButtonProps: {\n    className: 'c-btn is--danger',\n    style: { minWidth: 80, marginRight: 24 },\n  },\n  cancelButtonProps: {\n    className: 'c-btn is--outline mr-0 float-right',\n    style: { minWidth: 80 },\n  },\n  ...props,\n})\n\nexport const confirm = ({\n  onOk,\n  onCancel,\n  content = '刪除後將無法還原，確認繼續？',\n  ...props\n}: ModalFuncProps) => {\n  Modal.confirm({\n    ...modalDefaultProps(content),\n    ...props,\n    onOk: () => {\n      if (onOk) {\n        onOk()\n      }\n    },\n    onCancel() {\n      if (onCancel) {\n        onCancel()\n      }\n    },\n  })\n}\n","import React from 'react'\nimport { Checkbox } from 'antd'\nimport { CheckboxProps } from 'antd/lib/checkbox'\nimport styled from 'styled-components'\nimport { RefProps } from '@/constants/types'\n\nconst StyledCheckbox = styled(Checkbox)`\n  .ant-checkbox-checked .ant-checkbox-inner {\n    background-color: ${p => p.theme.primary};\n    border-color: ${p => p.theme.primary};\n  }\n\n  &.ant-checkbox-wrapper:hover .ant-checkbox-inner,\n  .ant-checkbox:hover .ant-checkbox-inner,\n  .ant-checkbox-input:focus + .ant-checkbox-inner {\n    border-color: ${p => p.theme.primary};\n  }\n\n  .ant-checkbox-checked .ant-checkbox-inner:after {\n    border: 2px solid #fff;\n    border-top: 0;\n    border-left: 0;\n  }\n\n  .ant-checkbox-inner {\n    border: 1px solid ${p => p.theme.secondary};\n  }\n\n  &.is--normal {\n    font-size: 14px !important;\n    font-weight: normal !important;\n  }\n`\n\ntype Props = RefProps & CheckboxProps\n\nconst CheckboxComponent: React.ElementType<Props> = React.forwardRef<\n  typeof StyledCheckbox,\n  Props\n>(({ ...props }, ref) => <StyledCheckbox forwardRef={ref} {...props} />)\n\nCheckboxComponent.displayName = 'Checkbox'\n\nexport const CheckboxGroup = Checkbox.Group\n\nexport default CheckboxComponent\n","import { ReactText } from 'react'\n\nexport const createFormItemLayout = (label: number = 3, wrapper?: number) => ({\n  labelCol: {\n    xs: { span: label },\n    sm: { span: label },\n  },\n  wrapperCol: {\n    xs: { span: wrapper || 24 - label },\n    sm: { span: wrapper || 24 - label },\n  },\n})\n\nexport const thosandSeprartor = {\n  formatter: (value: number | string | undefined) => {\n    if (!value) {\n      return value as string\n    }\n    return `${value}`.replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')\n  },\n  parser: (value: string | undefined) =>\n    (value ? value.replace(/\\$\\s?|(,*)/g, '') : value) as ReactText,\n}\n\nexport const currency = {\n  formatter: (value: number | string | undefined) => {\n    if (!value) {\n      return value as string\n    }\n    return `$ ${value}`.replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')\n  },\n  parser: (value: string | undefined) =>\n    (value ? value.replace(/\\$\\s?|(,*)/g, '') : value) as ReactText,\n}\n\nexport const percent = {\n  // min: 0,\n  max: 100,\n  formatter: (value: number | string | undefined) => {\n    if (!value) {\n      return value as string\n    }\n    return `${value}%`\n  },\n  parser: (value: string | undefined) =>\n    (value ? value.replace('%', '') : value) as ReactText,\n}\n\nexport const rules = {\n  required: { required: true, message: '此欄位必填' },\n  number: {\n    required: false,\n    type: 'number',\n    message: '請填寫數字',\n    transform(value: any) {\n      if (!value) {\n        return value\n      }\n      return Number(value)\n    },\n  },\n  account: {\n    required: true,\n    message: '欄位長度為8~128字元,特殊符號-,_',\n    pattern: new RegExp(/^.{8,128}$/),\n  },\n  password: {\n    required: true,\n    message: '密碼長度為6~128字元',\n    pattern: new RegExp(/^.{6,128}$/),\n  },\n}\n","import React from 'react'\nimport { ModalProps as AntModalProps } from 'antd/lib/modal'\nimport Modal from '@/components/modal'\nimport Button from '@/components/button'\n\nexport interface ModalProps<T = any>\n  extends Omit<AntModalProps, 'onOk' | 'onCancel'> {\n  item?: T\n  onOk?: (data?: any) => void\n  onCancel: () => void\n  children?: React.ReactNode\n}\n\nfunction TemplateModal<T = any>({\n  onCancel,\n  onOk,\n  item,\n  children,\n  ...props\n}: ModalProps<T>) {\n  const handleOk = () => {\n    if (onOk) {\n      onOk()\n    }\n  }\n  return (\n    <Modal\n      visible\n      onCancel={onCancel}\n      width={650}\n      maskClosable={false}\n      keyboard={false}\n      footer={[\n        <Button\n          key=\"btn-cancel\"\n          color=\"outline\"\n          style={{ minWidth: 80, marginRight: 16 }}\n          onClick={onCancel}>\n          取消\n        </Button>,\n        <Button\n          key=\"btn-save\"\n          color=\"primary\"\n          style={{ minWidth: 80 }}\n          onClick={handleOk}>\n          儲存\n        </Button>,\n      ]}\n      {...props}>\n      {children}\n    </Modal>\n  )\n}\n\nexport { TemplateModal as Modal }\n\nexport default TemplateModal\n","import React from 'react'\nimport cx from 'classnames'\nimport { Card } from 'antd'\nimport { CardProps } from 'antd/lib/card'\nimport { FontColorsOutlined } from '@ant-design/icons'\nimport styled from 'styled-components'\nimport Box from '@/components/box'\nimport { isNil } from '@/utils/webHelper'\n\nconst StyledCard = styled(Card)`\n  &.ant-card {\n    border-radius: 10px;\n    border: none;\n    cursor: move;\n  }\n\n  .ant-card-head {\n    padding-left: 18px;\n    border-bottom: none;\n    color: ${p => p.theme.primary};\n    font-size: 14px;\n    font-weight: 600;\n  }\n\n  &.ant-card-head--hide .ant-card-head {\n    display: none;\n  }\n\n  .ant-card-head-title {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    padding-bottom: 0;\n  }\n\n  .ant-card-body {\n    padding-top: 16px;\n    padding-left: 26px;\n    padding-bottom: 20px;\n  }\n`\n\ninterface Props extends CardProps {\n  onEdit?: () => void\n  onDelete?: () => void\n}\n\nfunction TemplateWrapper({\n  title,\n  children,\n  onDelete,\n  onEdit,\n  ...props\n}: Props) {\n  return (\n    <StyledCard\n      title={\n        <Box className=\"flex items-center\">\n          <FontColorsOutlined className=\"mr-3\" />\n          {title || '預設標題 (可點鉛筆圖示可進行編輯)'}\n        </Box>\n      }\n      className={cx({ 'ant-card-head--hide': isNil(title) })}\n      {...props}>\n      {children}\n    </StyledCard>\n  )\n}\n\nexport default TemplateWrapper\n","import React from 'react'\nimport { Form } from 'antd'\nimport { pathOr } from 'ramda'\nimport Box from '@/components/box'\nimport { Input, TextArea } from '@/components/input'\nimport Checkbox from '@/components/checkbox'\nimport { createFormItemLayout } from '@/utils/form'\nimport { Modal, ModalProps } from './template-modal'\nimport TemplateWrapper from './template-wrapper'\nimport { TemplateProps } from './item-types'\n\ntype Setting = {\n  text?: string\n  defaultValue?: string\n  tooltip?: string\n  multipleLine?: boolean\n}\n\nexport default function TemplateInputText(props: TemplateProps) {\n  const { editModalVisible, handleEditModalVisible, onUpdate, item } = props\n\n  const [setting, setSetting] = React.useState<Setting>(\n    pathOr({}, ['setting'], item)\n  )\n\n  const handleOk = (values: Setting) => {\n    setSetting(values)\n    onUpdate({ ...item, setting: values })\n  }\n\n  const inputProps = {\n    bordered: false,\n    className: 'w-2/3',\n    placeholder: setting.tooltip || '輸入內容',\n    defaultValue: setting.defaultValue,\n  }\n\n  return (\n    <>\n      {editModalVisible && (\n        <InputTextModal\n          item={setting}\n          onCancel={handleEditModalVisible}\n          onOk={handleOk}\n        />\n      )}\n      <TemplateWrapper title={setting.text || ''}>\n        {setting.multipleLine ? (\n          <TextArea {...inputProps} autoSize={{ minRows: 3 }} />\n        ) : (\n          <Input {...inputProps} />\n        )}\n      </TemplateWrapper>\n    </>\n  )\n}\n\nfunction InputTextModal({\n  onOk,\n  onCancel,\n  item,\n  ...props\n}: ModalProps<Setting>) {\n  const [form] = Form.useForm()\n\n  const handleOk = () => {\n    form.validateFields().then(values => {\n      if (onOk) {\n        onOk(values)\n      }\n      onCancel()\n    })\n  }\n\n  return (\n    <Modal<Setting>\n      {...props}\n      title={\n        <>\n          <Box>\n            Text\n            <Box className=\"inline ml-2 text-sm text-gray-600\">\n              typically used for description something.\n            </Box>\n          </Box>\n        </>\n      }\n      onCancel={onCancel}\n      onOk={handleOk}>\n      <Form\n        {...createFormItemLayout(5, 16)}\n        labelAlign=\"left\"\n        form={form}\n        initialValues={item}>\n        <Form.Item label=\"Text\" name=\"text\">\n          <Input />\n        </Form.Item>\n        <Form.Item label=\"Default Value\" name=\"defaultValue\">\n          <Input />\n        </Form.Item>\n        <Form.Item label=\"Tooltip\" name=\"tooltip\">\n          <Input />\n        </Form.Item>\n        <Form.Item\n          label=\"Multiple Lines\"\n          name=\"multipleLine\"\n          valuePropName=\"checked\">\n          <Checkbox />\n        </Form.Item>\n      </Form>\n    </Modal>\n  )\n}\n","import React from 'react'\nimport { InputNumber } from 'antd'\nimport { InputNumberProps } from 'antd/lib/input-number'\nimport styled from 'styled-components'\nimport { RefProps } from '@/constants/types'\nimport { percent, currency, thosandSeprartor } from '@/utils/form'\n\ntype Props = RefProps & InputNumberProps & { bordered?: boolean }\n\nconst StyledInputNumber = styled(InputNumber).attrs({\n  min: 0 as any, // dont know why error\n})<Props>`\n  &.ant-input-number {\n    border-color: ${p => p.theme.primary};\n\n    ::placeholder {\n      color: red;\n    }\n  }\n\n  &.ant-input-number-focused,\n  &.ant-input-number:focus,\n  &.ant-input-number:hover {\n    border-color: ${p => p.theme.primary};\n  }\n\n  &.ant-input-number-focused:not(.ant-input-number-borderless),\n  &.ant-input-number:focus:not(.ant-input-number-borderless) {\n    box-shadow: 0 0 0 1px ${p => p.theme.primary};\n  }\n\n  &.ant-input-number-borderless,\n  &.ant-input-number-borderless:hover,\n  &.ant-input-number-borderless:focus,\n  &.ant-input-number-borderless-focused,\n  &.ant-input-number-borderless-disabled,\n  &.ant-input-number-borderless[disabled] {\n    border: none;\n    border-bottom: 1px solid ${p => p.theme.primary};\n  }\n`\n\nexport const ThousandSeprartorInput = React.forwardRef<\n  typeof InputNumber,\n  Props\n>(({ ...props }, ref) => (\n  <StyledInputNumber forwardRef={ref} {...props} {...thosandSeprartor} />\n))\n\nexport const CurrencyInput = React.forwardRef<typeof InputNumber, Props>(\n  ({ ...props }, ref) => (\n    <StyledInputNumber forwardRef={ref} {...props} {...currency} />\n  )\n)\n\nexport const PercentInput = React.forwardRef<typeof InputNumber, Props>(\n  ({ ...props }, ref) => (\n    <StyledInputNumber forwardRef={ref} {...props} {...percent} />\n  )\n)\n\nThousandSeprartorInput.displayName = 'ThousandSeprartorInput'\n\nCurrencyInput.displayName = 'CurrencyInput'\n\nPercentInput.displayName = 'PercentInput'\n\nexport { StyledInputNumber as InputNumber }\n\nexport default StyledInputNumber\n","import React from 'react'\nimport { Form } from 'antd'\nimport { pathOr } from 'ramda'\nimport Box from '@/components/box'\nimport Input from '@/components/input'\nimport InputNumber from '@/components/input-number'\nimport { createFormItemLayout } from '@/utils/form'\nimport { Modal, ModalProps } from './template-modal'\nimport TemplateWrapper from './template-wrapper'\nimport { TemplateProps } from './item-types'\n\ntype Setting = {\n  text?: string\n  defaultValue?: number\n  tooltip?: string\n  max?: number\n  min?: number\n  units?: string\n}\n\nexport default function TemplateInputNumber(props: TemplateProps) {\n  const { editModalVisible, handleEditModalVisible, item, onUpdate } = props\n\n  const [setting, setSetting] = React.useState<Setting>(\n    pathOr({}, ['setting'], item)\n  )\n\n  const handleOk = (values: Setting) => {\n    setSetting(values)\n    onUpdate({ ...item, setting: values })\n  }\n\n  return (\n    <>\n      {editModalVisible && (\n        <InputNumberModal\n          item={setting}\n          onCancel={handleEditModalVisible}\n          onOk={handleOk}\n        />\n      )}\n      <TemplateWrapper title={setting.text || ''}>\n        <InputNumber\n          style={{ width: '33.333333%' }}\n          className=\"ant-input-number-borderless\"\n          defaultValue={setting.defaultValue}\n          min={setting.min}\n          max={setting.max}\n          formatter={value => `${setting.units || ''} ${value}`}\n          placeholder={setting.tooltip || '輸入數值'}\n        />\n      </TemplateWrapper>\n    </>\n  )\n}\n\nfunction InputNumberModal({ onOk, onCancel, item, ...props }: ModalProps) {\n  const [form] = Form.useForm()\n\n  const handleOk = () => {\n    form.validateFields().then(values => {\n      if (onOk) {\n        onOk(values)\n      }\n      onCancel()\n    })\n  }\n\n  return (\n    <Modal\n      {...props}\n      title={\n        <>\n          <Box>\n            Number\n            <Box className=\"inline ml-2 text-sm text-gray-600\">\n              typically used for input number.\n            </Box>\n          </Box>\n        </>\n      }\n      onOk={handleOk}\n      onCancel={onCancel}>\n      <Form\n        {...createFormItemLayout(5, 16)}\n        labelAlign=\"left\"\n        form={form}\n        initialValues={item}>\n        <Form.Item label=\"Text\" name=\"text\">\n          <Input />\n        </Form.Item>\n        <Form.Item label=\"Default Value\" name=\"defaultValue\">\n          <Input />\n        </Form.Item>\n        <Form.Item label=\"Tooltip\" name=\"tooltip\">\n          <Input />\n        </Form.Item>\n        <Form.Item label=\"Minimum Value\" name=\"min\">\n          <InputNumber />\n        </Form.Item>\n        <Form.Item label=\"Maximum Value\" name=\"max\">\n          <InputNumber />\n        </Form.Item>\n        <Form.Item label=\"Units\" name=\"units\">\n          <Input />\n        </Form.Item>\n      </Form>\n    </Modal>\n  )\n}\n","import React from 'react'\nimport { Radio } from 'antd'\nimport { RadioProps } from 'antd/lib/radio'\nimport styled from 'styled-components'\n\nconst StyledRadio = styled(Radio)`\n  &.ant-radio-wrapper {\n    color: ${p => p.theme.darkGrey};\n\n    span.ant-radio + * {\n      padding-left: 16px;\n    }\n\n    .ant-radio-inner,\n    .ant-radio-checked .ant-radio-inner {\n      border-color: ${p => p.theme.primary};\n    }\n\n    .ant-radio-inner::after {\n      background: ${p => p.theme.primary};\n    }\n\n    &:hover,\n    .ant-radio:hover .ant-radio-inner,\n    .ant-radio-input:focus + .ant-radio-inner {\n      border-color: ${p => p.theme.primary};\n    }\n  }\n`\n\ninterface Props extends RadioProps {\n  css?: React.CSSProperties\n}\n\nclass RadioComponent extends React.Component<Props, any> {\n  public static Group = Radio.Group\n\n  public static displayName = 'Radio'\n\n  public render() {\n    return <StyledRadio {...this.props} />\n  }\n}\n\nexport default RadioComponent\n","// tslint:disable: quotemark no-implicit-dependencies no-shadowed-variable no-var-requires\nimport React from 'react'\nimport { TableProps } from 'antd/lib/table'\nimport { FormInstance } from 'antd/lib/form'\nimport Table from '@/components/table'\n\ntype EditableTableProps<T> = Omit<TableProps<T>, 'onChange'> & {\n  value?: T[]\n  form: FormInstance\n  onChange?(changedValue: T[] | null): void\n  onRowAdd: (form: FormInstance) => any\n  onRowDelete: (value: { id: React.Key; form: FormInstance }) => any\n}\n\nexport default function EditableTable<T = any>({\n  form,\n  value,\n  onChange,\n  onRowAdd,\n  onRowDelete,\n  ...props\n}: EditableTableProps<T>) {\n  const triggerChange = (changedValue: T[]) => {\n    if (onChange) {\n      onChange(changedValue)\n    }\n  }\n\n  const handleAdd = () => {\n    triggerChange(onRowAdd(form))\n  }\n\n  const handleDelete = (id: string) => {\n    triggerChange(onRowDelete({ id, form }))\n  }\n\n  return (\n    <Table\n      {...props}\n      rowKey=\"id\"\n      pagination={false}\n      size=\"small\"\n      dataSource={value as any}\n      onAddRowClick={handleAdd}\n      onDeleteRowClick={handleDelete}\n      editable={true}\n    />\n  )\n}\n","import React from 'react'\nimport { Form } from 'antd'\nimport { ColumnProps } from 'antd/lib/table'\nimport { FormInstance } from 'antd/lib/form'\nimport { concat, __, pathOr, invoker, filter } from 'ramda'\nimport Input from '@/components/input'\nimport Checkbox from '@/components/checkbox'\nimport Box from '@/components/box'\nimport EditableTable from '@/components/editable-table'\nimport { uuid } from '@/utils/webHelper'\nimport { createFormItemLayout } from '@/utils/form'\nimport { Modal, ModalProps } from './template-modal'\nconst { compose } = require('ramda')\n\nexport type Setting = {\n  text?: string\n  tooltip?: string\n  options?: Option[]\n}\n\nexport type Option = {\n  id: React.Key\n  text?: string\n  selected?: boolean\n  freetext?: boolean\n}\n\nexport const defaultValue: Setting = {\n  options: [\n    {\n      id: uuid(),\n      text: '預設選項 1',\n      selected: true,\n      freetext: false,\n    },\n    {\n      id: uuid(),\n      text: '預設選項 2',\n      selected: true,\n      freetext: false,\n    },\n    {\n      id: uuid(),\n      text: '預設選項 3',\n      selected: true,\n      freetext: false,\n    },\n  ],\n}\n\nexport function TemplateSelectionModal({\n  onCancel,\n  onOk,\n  item,\n  ...props\n}: ModalProps) {\n  const [form] = Form.useForm()\n\n  const handleOk = () => {\n    form.validateFields().then(values => {\n      if (onOk) {\n        onOk(values)\n      }\n      onCancel()\n    })\n  }\n\n  const handleRowAdd = (form: FormInstance) => {\n    return compose(\n      concat(__, [\n        {\n          id: uuid(),\n          text: undefined,\n          selected: true,\n          freetext: false,\n        },\n      ]),\n      pathOr([], ['options']),\n      invoker(0, 'getFieldsValue')()\n    )(form)\n  }\n\n  const handleRowDelete = ({\n    id,\n    form,\n  }: {\n    id: React.Key\n    form: FormInstance\n  }) => {\n    return compose(\n      filter((x: any) => x.id !== id),\n      pathOr([], ['options']),\n      invoker(0, 'getFieldsValue')()\n    )(form)\n  }\n\n  const columns: ColumnProps<Option>[] = [\n    {\n      title: '選項名稱',\n      render: (v, r, idx) => (\n        <Form.Item noStyle name={['options', idx, 'text']}>\n          <Input />\n        </Form.Item>\n      ),\n    },\n    {\n      title: '是否可選',\n      align: 'center',\n      render: (v, r, idx) => (\n        <Form.Item\n          noStyle\n          name={['options', idx, 'selected']}\n          valuePropName=\"checked\">\n          <Checkbox />\n        </Form.Item>\n      ),\n    },\n    {\n      title: '是否可輸入',\n      align: 'center',\n      render: (v, r, idx) => (\n        <Form.Item\n          noStyle\n          name={['options', idx, 'freetext']}\n          valuePropName=\"checked\">\n          <Checkbox />\n        </Form.Item>\n      ),\n    },\n  ]\n\n  return (\n    <Modal\n      {...props}\n      title={\n        <>\n          <Box>Single Selection List</Box>\n          <Box className=\"mt-1 text-sm text-gray-600\">\n            Typically used for shorter lists so that all responses are visible\n            as radio buttons. Only allow a single selection.\n          </Box>\n        </>\n      }\n      onCancel={onCancel}\n      onOk={handleOk}>\n      <Form\n        {...createFormItemLayout(3, 16)}\n        labelAlign=\"left\"\n        form={form}\n        initialValues={item}>\n        <Form.Item label=\"Text\" name=\"text\">\n          <Input />\n        </Form.Item>\n        <Form.Item label=\"Tooltip\" name=\"tooltip\">\n          <Input />\n        </Form.Item>\n        <Form.Item label=\"Options\" />\n        <Form.Item noStyle name=\"options\">\n          <EditableTable\n            columns={columns}\n            form={form}\n            onRowAdd={handleRowAdd}\n            onRowDelete={handleRowDelete}\n          />\n        </Form.Item>\n      </Form>\n    </Modal>\n  )\n}\n","import React from 'react'\nimport cx from 'classnames'\nimport { pathOr } from 'ramda'\nimport Radio from '@/components/radio'\nimport Box from '@/components/box'\nimport Input from '@/components/input'\nimport { mapIndexed } from '@/utils/webHelper'\nimport TemplateWrapper from './template-wrapper'\nimport {\n  TemplateSelectionModal,\n  Setting,\n  Option,\n  defaultValue,\n} from './template-selection-modal'\nimport { TemplateProps } from './item-types'\nconst { compose } = require('ramda')\n\nexport default function TemplateMultipleSelection(props: TemplateProps) {\n  const { item, editModalVisible, handleEditModalVisible, onUpdate } = props\n\n  const [setting, setSetting] = React.useState<Setting>(\n    pathOr(defaultValue, ['setting'], item)\n  )\n\n  const handleOk = (values: Setting) => {\n    setSetting(values)\n    onUpdate({ ...item, setting: values })\n  }\n\n  return (\n    <>\n      {editModalVisible && (\n        <TemplateSelectionModal\n          item={setting}\n          onCancel={handleEditModalVisible}\n          onOk={handleOk}\n          title={\n            <>\n              <Box>Multiple Selection List</Box>\n              <Box className=\"mt-1 text-sm text-gray-600\">\n                typically used for shorter lists so that all responses are\n                visible as checkboxes. Allows Multiple selections.\n              </Box>\n            </>\n          }\n        />\n      )}\n      <TemplateWrapper\n        title={setting.text || ''}\n        bodyStyle={{ paddingLeft: 48 }}>\n        {compose(\n          mapIndexed((x: Option, idx: number) => (\n            <Radio\n              key={x.id}\n              className={cx('block', { 'mt-5': idx > 0 })}\n              defaultChecked={false}\n              value={x.text}>\n              {x.text}\n              {x.freetext && (\n                <Input placeholder=\"輸入備註\" className=\"ml-4 w-1/3\" />\n              )}\n            </Radio>\n          )),\n          pathOr([], ['options'])\n        )(setting)}\n      </TemplateWrapper>\n    </>\n  )\n}\n","import React from 'react'\nimport cx from 'classnames'\nimport { pathOr } from 'ramda'\nimport Radio from '@/components/radio'\nimport Input from '@/components/input'\nimport { mapIndexed } from '@/utils/webHelper'\nimport TemplateWrapper from './template-wrapper'\nimport {\n  TemplateSelectionModal,\n  Setting,\n  Option,\n  defaultValue,\n} from './template-selection-modal'\nimport { TemplateProps } from './item-types'\nconst { compose } = require('ramda')\n\nexport default function TemplateSingleSelection(props: TemplateProps) {\n  const { item, editModalVisible, handleEditModalVisible, onUpdate } = props\n\n  const [setting, setSetting] = React.useState<Setting>(\n    pathOr(defaultValue, ['setting'], item)\n  )\n\n  const handleOk = (values: Setting) => {\n    setSetting(values)\n    onUpdate({ ...item, setting: values })\n  }\n\n  return (\n    <>\n      {editModalVisible && (\n        <TemplateSelectionModal\n          item={setting}\n          onCancel={handleEditModalVisible}\n          onOk={handleOk}\n        />\n      )}\n      <TemplateWrapper\n        title={setting.text || ''}\n        bodyStyle={{ paddingLeft: 48 }}>\n        <Radio.Group>\n          {compose(\n            mapIndexed((x: Option, idx: number) => (\n              <Radio\n                key={x.id}\n                className={cx('block', { 'mt-3': idx > 0 })}\n                defaultChecked={false}\n                value={x.text}>\n                {x.text}\n                {x.freetext && (\n                  <Input placeholder=\"輸入備註\" className=\"ml-3 w-1/3\" />\n                )}\n              </Radio>\n            )),\n            pathOr([], ['options'])\n          )(setting)}\n        </Radio.Group>\n      </TemplateWrapper>\n    </>\n  )\n}\n","import React from 'react'\nimport styled, { css } from 'styled-components'\nimport { DatePicker, TimePicker } from 'antd'\nimport { DatePickerProps } from 'antd/lib/date-picker'\n\nconst borderLess = css`\n  &.ant-picker-borderless {\n    border: none;\n    border-bottom: 1px solid ${p => p.theme.primary} !important;\n    border-bottom-left-radius: 0;\n    border-bottom-right-radius: 0;\n  }\n\n  &.ant-picker-focused:not(.ant-picker-borderless) {\n    box-shadow: 0 0 0 1px ${p => p.theme.primary};\n  }\n`\n\nconst RangePicker = styled(DatePicker.RangePicker)`\n  &.ant-picker {\n    border: 1px solid ${p => p.theme.primary};\n\n    &:hover,\n    &:focus {\n      border-color: ${p => p.theme.secondary};\n    }\n\n    &.ant-picker-focused {\n      box-shadow: 0 0 0 1px ${p => p.theme.primary};\n    }\n  }\n`\n\nconst StyledDatePicker: any = styled(DatePicker)`\n  &.ant-picker {\n    border: 1px solid ${p => p.theme.primary};\n\n    &:hover,\n    &:focus {\n      border-color: ${p => p.theme.secondary};\n    }\n\n    .ant-picker-suffix {\n      color: ${p => p.theme.primary};\n    }\n\n    ${borderLess};\n  }\n`\n\nconst StyledTimePicker = styled(TimePicker)`\n  &.ant-picker {\n    border: 1px solid ${p => p.theme.primary};\n\n    &:hover,\n    &:focus {\n      border-color: ${p => p.theme.secondary};\n    }\n\n    .ant-picker-suffix {\n      color: ${p => p.theme.primary};\n    }\n\n    ${borderLess};\n  }\n`\n\nfunction DatePickerComponent(props: DatePickerProps) {\n  return <StyledDatePicker {...props} />\n}\n\nexport {\n  DatePickerComponent as DatePicker,\n  RangePicker,\n  StyledTimePicker as TimePicker,\n}\n\nexport default DatePickerComponent\n","import React from 'react'\nimport { Form } from 'antd'\nimport { pathOr } from 'ramda'\nimport Box from '@/components/box'\nimport Input from '@/components/input'\nimport DatePicker from '@/components/datepicker'\nimport { createFormItemLayout } from '@/utils/form'\nimport { Modal, ModalProps } from './template-modal'\nimport TemplateWrapper from './template-wrapper'\nimport { TemplateProps } from './item-types'\n\ntype Setting = {\n  text?: string\n  defaultValue?: moment.Moment\n  tooltip?: string\n}\n\nexport default function TemplateDate(props: TemplateProps) {\n  const { editModalVisible, handleEditModalVisible, item, onUpdate } = props\n\n  const [setting, setSetting] = React.useState<Setting>(\n    pathOr({}, ['setting'], item)\n  )\n\n  const handleOk = (values: Setting) => {\n    setSetting(values)\n    onUpdate({ ...item, setting: values })\n  }\n\n  return (\n    <>\n      {editModalVisible && (\n        <InputDateModal\n          item={setting}\n          onCancel={handleEditModalVisible}\n          onOk={handleOk}\n        />\n      )}\n      <TemplateWrapper title={setting.text || ''}>\n        <DatePicker\n          bordered={false}\n          className=\"w-1/3\"\n          placeholder={setting.tooltip || '選擇日期'}\n          defaultValue={setting.defaultValue}\n        />\n      </TemplateWrapper>\n    </>\n  )\n}\n\nfunction InputDateModal({\n  onOk,\n  onCancel,\n  item,\n  ...props\n}: ModalProps<Setting>) {\n  const [form] = Form.useForm()\n\n  const handleOk = () => {\n    form.validateFields().then(values => {\n      if (onOk) {\n        onOk(values)\n      }\n      onCancel()\n    })\n  }\n\n  return (\n    <Modal<Setting>\n      {...props}\n      title={\n        <>\n          <Box>\n            Date\n            <Box className=\"inline ml-2 text-sm text-gray-600\">\n              typically used for target date.\n            </Box>\n          </Box>\n        </>\n      }\n      onCancel={onCancel}\n      onOk={handleOk}>\n      <Form\n        {...createFormItemLayout(5, 16)}\n        labelAlign=\"left\"\n        form={form}\n        initialValues={item}>\n        <Form.Item label=\"Text\" name=\"text\">\n          <Input />\n        </Form.Item>\n        <Form.Item label=\"Default Value\" name=\"defaultValue\">\n          <DatePicker allowClear picker=\"date\" className=\"w-full\" />\n        </Form.Item>\n        <Form.Item label=\"Tooltip\" name=\"tooltip\">\n          <Input />\n        </Form.Item>\n      </Form>\n    </Modal>\n  )\n}\n","import React from 'react'\nimport { Form } from 'antd'\nimport { pathOr } from 'ramda'\nimport Box from '@/components/box'\nimport Input from '@/components/input'\nimport { TimePicker } from '@/components/datepicker'\nimport { createFormItemLayout } from '@/utils/form'\nimport { Modal, ModalProps } from './template-modal'\nimport TemplateWrapper from './template-wrapper'\nimport { TemplateProps } from './item-types'\n\ntype Setting = {\n  text?: string\n  defaultValue?: moment.Moment\n  tooltip?: string\n}\n\nexport default function TemplateTime(props: TemplateProps) {\n  const { editModalVisible, handleEditModalVisible, item, onUpdate } = props\n\n  const [setting, setSetting] = React.useState<Setting>(\n    pathOr({}, ['setting'], item)\n  )\n\n  const handleOk = (values: Setting) => {\n    setSetting(values)\n    onUpdate({ ...item, setting: values })\n  }\n\n  return (\n    <>\n      {editModalVisible && (\n        <InputTimeModal\n          item={setting}\n          onCancel={handleEditModalVisible}\n          onOk={handleOk}\n        />\n      )}\n      <TemplateWrapper title={setting.text || ''}>\n        <TimePicker\n          bordered={false}\n          className=\"w-1/3\"\n          placeholder={setting.tooltip || '選擇時間'}\n          defaultValue={setting.defaultValue}\n        />\n      </TemplateWrapper>\n    </>\n  )\n}\n\nfunction InputTimeModal({\n  onOk,\n  onCancel,\n  item,\n  ...props\n}: ModalProps<Setting>) {\n  const [form] = Form.useForm()\n\n  const handleOk = () => {\n    form.validateFields().then(values => {\n      if (onOk) {\n        onOk(values)\n      }\n      onCancel()\n    })\n  }\n\n  return (\n    <Modal<Setting>\n      {...props}\n      title={\n        <>\n          <Box>\n            Time\n            <Box className=\"inline ml-2 text-sm text-gray-600\">\n              typically used for target time.\n            </Box>\n          </Box>\n        </>\n      }\n      onCancel={onCancel}\n      onOk={handleOk}>\n      <Form\n        {...createFormItemLayout(5, 16)}\n        labelAlign=\"left\"\n        form={form}\n        initialValues={item}>\n        <Form.Item label=\"Text\" name=\"text\">\n          <Input />\n        </Form.Item>\n        <Form.Item label=\"Default Value\" name=\"defaultValue\">\n          <TimePicker allowClear format=\"HH:mm\" className=\"w-full\" />\n        </Form.Item>\n        <Form.Item label=\"Tooltip\" name=\"tooltip\">\n          <Input />\n        </Form.Item>\n      </Form>\n    </Modal>\n  )\n}\n","import React from 'react'\nimport { pathOr, map } from 'ramda'\nimport Box from '@/components/box'\nimport Select from '@/components/select'\nimport TemplateWrapper from './template-wrapper'\nimport {\n  TemplateSelectionModal,\n  Option,\n  defaultValue,\n} from './template-selection-modal'\nimport { TemplateProps } from './item-types'\nconst { compose } = require('ramda')\n\ntype Setting = {\n  text?: string\n  tooltip?: string\n  options?: Option[]\n  selectionType?: 'single' | 'multiple'\n}\n\nexport default function TemplateSelect(props: TemplateProps) {\n  const { item, editModalVisible, handleEditModalVisible, onUpdate } = props\n\n  const [setting, setSetting] = React.useState<Setting>(\n    pathOr(defaultValue, ['setting'], item)\n  )\n\n  const handleOk = (values: Setting) => {\n    setSetting(values)\n    onUpdate({ ...item, setting: values })\n  }\n\n  return (\n    <>\n      {editModalVisible && (\n        <TemplateSelectionModal\n          item={setting}\n          onCancel={handleEditModalVisible}\n          onOk={handleOk}\n          title={\n            <>\n              <Box>Drop-down List</Box>\n              <Box className=\"mt-1 text-sm text-gray-600\">\n                typically used for lists of greater than 6 or 7 options.\n              </Box>\n            </>\n          }\n        />\n      )}\n      <TemplateWrapper title={setting.text || ''}>\n        <Select\n          allowClear\n          bordered={false}\n          className=\"w-1/3\"\n          placeholder={setting.tooltip || '請選擇...'}>\n          {compose(\n            map((x: Option) => (\n              <Select.Option key={x.id} value={x.text as any}>\n                {x.text}\n              </Select.Option>\n            )),\n            pathOr([], ['options'])\n          )(setting)}\n        </Select>\n      </TemplateWrapper>\n    </>\n  )\n}\n","import { map, mergeAll } from 'ramda'\nimport { uuid } from '@/utils/webHelper'\nimport TemplateInputText from './template-input-text'\nimport TemplateInputNumber from './template-input-number'\nimport TemplateMultipleSelection from './template-multiple-selection'\nimport TemplateSingleSelection from './template-single-selection'\nimport TemplateDate from './template-date'\nimport TemplateTime from './template-time'\nimport TemplateSelect from './template-select'\n// import TempldateSectionHeader from './template-section-header'\nconst { compose } = require('ramda')\n\ninterface ReportTemplateListItem {\n  id: React.Key\n  type: string\n  name: string\n  Component: React.Component\n}\n\nconst templateList = [\n  // {\n  //   id: uuid(),\n  //   componentType: 'header',\n  //   name: renderSnippetName('Section Header'),\n  //   Component: TempldateSectionHeader,\n  // },\n  {\n    id: uuid(),\n    type: 'TemplateInputText',\n    name: 'Text',\n    Component: TemplateInputText,\n  },\n  {\n    id: uuid(),\n    type: 'TemplateInputNumber',\n    name: 'Number',\n    Component: TemplateInputNumber,\n  },\n  {\n    id: uuid(),\n    type: 'TemplateSelect',\n    name: 'Drop-down List',\n    Component: TemplateSelect,\n  },\n  {\n    id: uuid(),\n    type: 'TemplateMultipleSelection',\n    name: 'Multiple Selection List',\n    Component: TemplateMultipleSelection,\n  },\n  {\n    id: uuid(),\n    type: 'TemplateSingleSelection',\n    name: 'Single Selection List',\n    Component: TemplateSingleSelection,\n  },\n  {\n    id: uuid(),\n    type: 'TemplateDate',\n    name: 'Date',\n    Component: TemplateDate,\n  },\n  {\n    id: uuid(),\n    type: 'TemplateTime',\n    name: 'Time',\n    Component: TemplateTime,\n  },\n]\n\nexport const templateById = compose(\n  mergeAll,\n  map((x: ReportTemplateListItem) => ({ [x.type]: x }))\n)(templateList)\n\nexport default templateList\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { findDOMNode } from 'react-dom'\nimport { DndContext } from 'react-dnd'\nimport throttle from 'lodash.throttle'\nimport raf from 'raf'\nimport hoist from 'hoist-non-react-statics'\nimport getDisplayName from './utils'\n\nfunction noop() {}\n\nfunction intBetween(min, max, val) {\n  return Math.floor(Math.min(max, Math.max(min, val)))\n}\n\nfunction getCoords(evt) {\n  if (evt.type === 'touchmove') {\n    return {\n      x: evt.changedTouches[0].clientX,\n      y: evt.changedTouches[0].clientY,\n    }\n  }\n\n  return { x: evt.clientX, y: evt.clientY }\n}\n\nconst DEFAULT_BUFFER = 150\n\nexport function createHorizontalStrength(_buffer) {\n  return function defaultHorizontalStrength({ x, w, y, h }, point) {\n    const buffer = Math.min(w / 2, _buffer)\n    const inRange = point.x >= x && point.x <= x + w\n    const inBox = inRange && point.y >= y && point.y <= y + h\n\n    if (inBox) {\n      if (point.x < x + buffer) {\n        return (point.x - x - buffer) / buffer\n      } else if (point.x > x + w - buffer) {\n        return -(x + w - point.x - buffer) / buffer\n      }\n    }\n\n    return 0\n  }\n}\n\nexport function createVerticalStrength(_buffer) {\n  return function defaultVerticalStrength({ y, h, x, w }, point) {\n    const buffer = Math.min(h / 2, _buffer)\n    const inRange = point.y >= y && point.y <= y + h\n    const inBox = inRange && point.x >= x && point.x <= x + w\n\n    if (inBox) {\n      if (point.y < y + buffer) {\n        return (point.y - y - buffer) / buffer\n      } else if (point.y > y + h - buffer) {\n        return -(y + h - point.y - buffer) / buffer\n      }\n    }\n\n    return 0\n  }\n}\n\nexport const defaultHorizontalStrength = createHorizontalStrength(\n  DEFAULT_BUFFER\n)\n\nexport const defaultVerticalStrength = createVerticalStrength(DEFAULT_BUFFER)\n\nexport default function createScrollingComponent(WrappedComponent) {\n  class ScrollingComponent extends React.Component {\n    static displayName = `Scrolling(${getDisplayName(WrappedComponent)})`\n\n    static propTypes = {\n      onScrollChange: PropTypes.func,\n      verticalStrength: PropTypes.func,\n      horizontalStrength: PropTypes.func,\n      strengthMultiplier: PropTypes.number,\n    }\n\n    static defaultProps = {\n      useScroll: true,\n      onScrollChange: noop,\n      verticalStrength: defaultVerticalStrength,\n      horizontalStrength: defaultHorizontalStrength,\n      strengthMultiplier: 30,\n    }\n\n    static contextType = DndContext\n\n    constructor(props, ctx) {\n      super(props, ctx)\n\n      this.scaleX = 0\n      this.scaleY = 0\n      this.frame = null\n\n      this.attached = false\n      this.dragging = false\n    }\n\n    componentDidMount() {\n      if (this.props.useScroll) {\n        this._initial()\n      }\n    }\n\n    _initial() {\n      // window.document.body.addEventListener('dragover', this.handleEvent);\n      this.container = findDOMNode(this.wrappedInstance)\n      this.container.addEventListener('dragover', this.handleEvent)\n      // touchmove events don't seem to work across siblings, so we unfortunately\n      // have to attach the listeners to the body\n      window.document.body.addEventListener('touchmove', this.handleEvent)\n\n      this.clearMonitorSubscription = this.context.dragDropManager\n        .getMonitor()\n        .subscribeToStateChange(() => this.handleMonitorChange())\n    }\n\n    componentWillUnmount() {\n      if (this.props.useScroll) {\n        this._remove()\n      }\n    }\n\n    _remove() {\n      // window.document.body.removeEventListener('dragover', this.handleEvent);\n      this.container.removeEventListener('dragover', this.handleEvent)\n      window.document.body.removeEventListener('touchmove', this.handleEvent)\n      this.clearMonitorSubscription()\n      this.stopScrolling()\n    }\n\n    handleEvent = evt => {\n      if (this.dragging && !this.attached) {\n        this.attach()\n        this.updateScrolling(evt)\n      }\n    }\n\n    handleMonitorChange() {\n      const isDragging = this.context.dragDropManager.getMonitor().isDragging()\n\n      if (!this.dragging && isDragging) {\n        this.dragging = true\n      } else if (this.dragging && !isDragging) {\n        this.dragging = false\n        this.stopScrolling()\n      }\n    }\n\n    attach() {\n      this.attached = true\n      window.document.body.addEventListener('dragover', this.updateScrolling)\n      window.document.body.addEventListener('touchmove', this.updateScrolling)\n    }\n\n    detach() {\n      this.attached = false\n      window.document.body.removeEventListener('dragover', this.updateScrolling)\n      window.document.body.removeEventListener(\n        'touchmove',\n        this.updateScrolling\n      )\n    }\n\n    // Update scaleX and scaleY every 100ms or so\n    // and start scrolling if necessary\n    updateScrolling = throttle(\n      evt => {\n        const {\n          left: x,\n          top: y,\n          width: w,\n          height: h,\n        } = this.container.getBoundingClientRect()\n        const box = { x, y, w, h }\n        const coords = getCoords(evt)\n\n        // calculate strength\n        this.scaleX = this.props.horizontalStrength(box, coords)\n        this.scaleY = this.props.verticalStrength(box, coords)\n\n        // start scrolling if we need to\n        if (!this.frame && (this.scaleX || this.scaleY)) {\n          this.startScrolling()\n        }\n      },\n      100,\n      { trailing: false }\n    )\n\n    startScrolling() {\n      let i = 0\n      const tick = () => {\n        const { scaleX, scaleY, container } = this\n        const { strengthMultiplier, onScrollChange } = this.props\n\n        // stop scrolling if there's nothing to do\n        if (strengthMultiplier === 0 || scaleX + scaleY === 0) {\n          this.stopScrolling()\n          return\n        }\n\n        // there's a bug in safari where it seems like we can't get\n        // mousemove events from a container that also emits a scroll\n        // event that same frame. So we double the strengthMultiplier and only adjust\n        // the scroll position at 30fps\n        if (i++ % 2) {\n          const {\n            scrollLeft,\n            scrollTop,\n            scrollWidth,\n            scrollHeight,\n            clientWidth,\n            clientHeight,\n          } = container\n\n          const newLeft = scaleX\n            ? (container.scrollLeft = intBetween(\n                0,\n                scrollWidth - clientWidth,\n                scrollLeft + scaleX * strengthMultiplier\n              ))\n            : scrollLeft\n\n          const newTop = scaleY\n            ? (container.scrollTop = intBetween(\n                0,\n                scrollHeight - clientHeight,\n                scrollTop + scaleY * strengthMultiplier\n              ))\n            : scrollTop\n\n          onScrollChange(newLeft, newTop)\n        }\n        this.frame = raf(tick)\n      }\n\n      tick()\n    }\n\n    stopScrolling() {\n      this.detach()\n      this.scaleX = 0\n      this.scaleY = 0\n\n      if (this.frame) {\n        raf.cancel(this.frame)\n        this.frame = null\n      }\n    }\n\n    render() {\n      const {\n        // not passing down these props\n        strengthMultiplier,\n        verticalStrength,\n        horizontalStrength,\n        onScrollChange,\n        ...props\n      } = this.props\n\n      return (\n        <WrappedComponent\n          ref={ref => {\n            this.wrappedInstance = ref\n          }}\n          {...props}\n        />\n      )\n    }\n  }\n\n  return hoist(ScrollingComponent, WrappedComponent)\n}\n","import React from 'react'\nimport { DndProvider } from 'react-dnd'\nimport { HTML5Backend } from 'react-dnd-html5-backend'\nimport styled from 'styled-components'\nimport cx from 'classnames'\nimport withScroll, { createVerticalStrength } from './withScroll'\n\ninterface Props {\n  className?: string\n  useScroll?: boolean\n}\n\nconst DndScrollableElement = styled.div`\n  height: 100vh;\n  padding-top: 0;\n  overflow: scroll;\n\n  &.is--preview {\n    height: auto;\n  }\n`\n\nconst ScrollableComponent = withScroll(DndScrollableElement)\n\nconst vStrength = createVerticalStrength(150)\n\nexport default class ReactDndProvider extends React.Component<Props> {\n  static defaultProps = {\n    useScroll: true,\n  }\n\n  render() {\n    const { className, useScroll } = this.props\n\n    return (\n      // <DndProvider backend={HTML5Backend}>\n      <ScrollableComponent\n        useScroll={useScroll}\n        verticalStrength={vStrength}\n        strengthMultiplier={100}\n        className={cx('report-template-builder', className)}>\n        {this.props.children}\n      </ScrollableComponent>\n      // </DndProvider>\n    )\n  }\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport {\n  EditOutlined,\n  DeleteOutlined,\n  // RightOutlined,\n  // LeftOutlined,\n} from '@ant-design/icons'\nimport cx from 'classnames'\nimport { Tooltip } from 'antd'\nimport Box from '@/components/box'\n\ntype Props = {\n  tabIndex: number\n  onEdit: () => void\n  onDelete: () => void\n}\n\nconst ToolbarWrapper = styled(Box)`\n  position: absolute;\n  top: 16px;\n  right: 24px;\n  visibility: hidden;\n  transition: visibility 0s, opacity 0.3s, max-height 0.6s linear;\n  opacity: 0;\n  z-index: 1;\n\n  &.is--over {\n    visibility: visible;\n    transition: visibility 0s, opacity 0.3s, max-height 0.6s linear;\n    opacity: 0.8;\n  }\n`\n\nexport default function SnippetToolbar({ tabIndex, onEdit, onDelete }: Props) {\n  return (\n    <ToolbarWrapper\n      className={cx('text-primary', { 'is--over': tabIndex === 1 })}>\n      {/* <Tooltip title=\"向左縮排\">\n        <LeftOutlined className=\"mr-2 cursor-pointer\" />\n      </Tooltip>\n      <Tooltip title=\"向右縮排\">\n        <RightOutlined className=\"mr-2 cursor-pointer\" />\n      </Tooltip> */}\n      <Tooltip title=\"編輯\">\n        <EditOutlined className=\"mr-2 cursor-pointer\" onClick={onEdit} />\n      </Tooltip>\n      <Tooltip title=\"刪除\">\n        <DeleteOutlined className=\"cursor-pointer\" onClick={onDelete} />\n      </Tooltip>\n    </ToolbarWrapper>\n  )\n}\n","import React from 'react'\nimport { DragSource, ConnectDragPreview, ConnectDragSource } from 'react-dnd'\nimport { getEmptyImage } from 'react-dnd-html5-backend'\nimport cx from 'classnames'\nimport { confirm } from '@/utils/message'\nimport theme from '@/theme'\nimport SnippetToolbar from './snippet-toolbar'\nimport ItemTypes from './item-types'\n\ntype Props = {\n  id?: React.Key\n  wrapperId?: string\n  index?: number\n  isDragging?: boolean\n  draggable?: boolean\n  fromMenu?: boolean\n  connectDragPreview: ConnectDragPreview\n  connectDragSource: ConnectDragSource\n  children?: React.ReactNode\n  findSnippet?(id: React.Key): any\n  removeSnippet?(index: number): void\n}\n\ntype State = {\n  top: number\n  tabIndex: number\n  editModalVisible: boolean\n}\n\nconst withDragSource = DragSource(\n  ItemTypes.BOARD,\n  {\n    beginDrag(props: Props) {\n      return {\n        ...props,\n        fromMenu: false,\n        originalIndex: (props as any).findSnippet(props.id).index,\n      }\n    },\n    canDrag(props: Props) {\n      return !!(props.draggable && !props.fromMenu)\n    },\n  },\n  (connect, monitor) => ({\n    connectDragSource: connect.dragSource(),\n    connectDragPreview: connect.dragPreview(),\n    isDragging: monitor.isDragging(),\n  })\n)\n\nclass Snippet extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props)\n\n    this.state = {\n      top: 0,\n      tabIndex: -1,\n      editModalVisible: false,\n    }\n  }\n\n  componentDidMount = () => {\n    const { connectDragPreview } = this.props\n    if (connectDragPreview) {\n      connectDragPreview(getEmptyImage() /* { anchorX: 0.2, anchorY: 0.1 } */)\n    }\n  }\n\n  handleRemove = () => {\n    confirm({\n      content: '刪除後將無法還原，確認繼續？',\n      title: '確認要刪除這個模版?',\n      onOk: () => {\n        ;(this.props as any).removeSnippet(this.props.index)\n      },\n      onCancel() {\n        console.log('Cancel')\n      },\n    })\n  }\n\n  handleEditModalVisible = () => {\n    this.setState(prev => ({ editModalVisible: !prev.editModalVisible }))\n  }\n\n  handleIndent = (align: 'left' | 'right') => () => {}\n\n  _onMouseOver = () => {\n    this.setState({ tabIndex: 1 })\n  }\n\n  _onMouseOut = () => {\n    this.setState({ tabIndex: -1 })\n  }\n\n  render() {\n    const {\n      props: {\n        connectDragSource,\n        connectDragPreview,\n        isDragging,\n        wrapperId,\n        index,\n        draggable,\n      },\n      state: { tabIndex, editModalVisible },\n    } = this\n\n    const styles = getItemStyles({ isDragging, tabIndex, draggable })\n\n    return connectDragSource(\n      connectDragPreview(\n        <div\n          id={wrapperId}\n          style={styles}\n          className={cx({ 'ui-draggable': draggable }, 'ui-sortable', 'mb-3')}\n          tabIndex={tabIndex}\n          onMouseOver={this._onMouseOver}\n          onMouseOut={this._onMouseOut}\n          data-index={index}>\n          {draggable && (\n            <SnippetToolbar\n              tabIndex={tabIndex}\n              onEdit={this.handleEditModalVisible}\n              onDelete={this.handleRemove}\n            />\n          )}\n          {React.Children.map(this.props.children, child =>\n            React.cloneElement(child as any, {\n              editModalVisible,\n              handleEditModalVisible: this.handleEditModalVisible,\n            })\n          )}\n        </div>\n      )\n    )\n  }\n}\n\nfunction getItemStyles(props: Partial<Props & State>): React.CSSProperties {\n  const { isDragging, tabIndex, draggable } = props\n\n  const isFocus = tabIndex === 1\n\n  return {\n    ...(isFocus ? { borderRadius: 3 } : {}),\n    ...(draggable\n      ? { border: `1px dashed ${draggable ? '#e7e7e7' : 'transparent'}` }\n      : {\n          outlineColor: isFocus ? theme.purple150 : 'transparent',\n        }),\n    cursor: 'default',\n    position: 'relative',\n    display: isDragging ? 'none' : 'block',\n  }\n}\n\nexport default withDragSource(Snippet)\n"],"sourceRoot":""}