{"version":3,"sources":["../node_modules/@ant-design/icons-svg/es/asn/EyeOutlined.js","../node_modules/@ant-design/icons/es/icons/EyeOutlined.js","containers/report-template-list/report-template-list.tsx","hooks/useModal.tsx","constants/item-types.ts","components/snippet-utils.ts","utils/message.tsx","components/snippet-toolbar.tsx","components/snippet.tsx","components/withScroll.js","components/snippet-scrollable-container.tsx","components/snippet-preview-modal.tsx"],"names":["EyeOutlined","props","ref","React","AntdIcon","Object","assign","icon","EyeOutlinedSvg","displayName","ReportTemplateList","useTitle","useBreadcrumb","name","useReportTemplateList","dataSource","content","key","onToggle","ownState","useState","editModalVisible","setEditModalVisible","item","setItem","findItem","useCallback","evt","find","x","path","currentTarget","dataset","handleModalToggle","prev","useModal","previewModalVisible","handlePreviewModalVisible","useReportPreview","setIsPreview","handleTo","pathname","history","push","handlePreview","columns","title","dataIndex","render","v","r","type","onClick","record","replace","id","routes","align","_","data-id","className","DeleteOutlined","snippetList","setting","onCancel","span","color","rowKey","CARD","BOARD","SNIPPET","hasClassName","nodes","n","isNil","includes","canMoveSnippet","element","elem","parentNode","unshift","getPlaceHolderIndex","clientOffset","overSnippet","findSnippet","classList","contains","parentElement","document","elementFromPoint","y","snippetIndex","index","placeholderIndex","Number","isOverSnippet","getDisplayName","Component","length","marginTop","marginBottom","confirm","onOk","width","okText","cancelText","centered","autoFocusButton","okButtonProps","style","minWidth","marginRight","cancelButtonProps","modalDefaultProps","ToolbarWrapper","styled","div","SnippetToolbar","tabIndex","onEdit","onDelete","cx","EditOutlined","withDragSource","DragSource","ItemTypes","beginDrag","fromMenu","originalIndex","canDrag","draggable","connect","monitor","connectDragSource","dragSource","connectDragPreview","dragPreview","isDragging","Snippet","componentDidMount","getEmptyImage","handleRemove","removeSnippet","console","log","handleEditModalVisible","setState","handleIndent","_onMouseOver","_onMouseOut","state","top","this","wrapperId","styles","mergeRight","isFocus","borderRadius","border","outlineColor","theme","purple150","cursor","position","display","getItemStyles","onMouseOver","onMouseOut","data-index","Children","map","children","child","cloneElement","noop","intBetween","min","max","val","Math","floor","createVerticalStrength","_buffer","point","h","w","buffer","defaultHorizontalStrength","defaultVerticalStrength","ScrollableComponent","WrappedComponent","ScrollingComponent","ctx","handleEvent","dragging","attached","attach","updateScrolling","throttle","container","getBoundingClientRect","box","left","height","coords","changedTouches","clientX","clientY","getCoords","scaleX","horizontalStrength","scaleY","verticalStrength","frame","startScrolling","trailing","useScroll","_initial","findDOMNode","wrappedInstance","addEventListener","window","body","clearMonitorSubscription","context","dragDropManager","getMonitor","subscribeToStateChange","handleMonitorChange","_remove","removeEventListener","stopScrolling","i","tick","strengthMultiplier","onScrollChange","scrollLeft","scrollTop","scrollWidth","scrollHeight","clientWidth","clientHeight","raf","detach","cancel","defaultProps","contextType","DndContext","hoist","withScroll","vStrength","ReactDndProvider","compose","require","SnippetPreviewModal","visible","maskClosable","keyboard","footer","gt","__","pathOr","mapIndexed","idx","keys"],"mappings":"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","file":"static/js/10.0afe2b55.chunk.js","sourcesContent":["// This icon file is generated automatically.\nvar EyeOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z\" } }] }, \"name\": \"eye\", \"theme\": \"outlined\" };\nexport default EyeOutlined;\n","// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport EyeOutlinedSvg from \"@ant-design/icons-svg/es/asn/EyeOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar EyeOutlined = function EyeOutlined(props, ref) {\n  return React.createElement(AntdIcon, Object.assign({}, props, {\n    ref: ref,\n    icon: EyeOutlinedSvg\n  }));\n};\n\nEyeOutlined.displayName = 'EyeOutlined';\nexport default React.forwardRef(EyeOutlined);","import React from 'react'\nimport { replace } from 'ramda'\nimport { Row, Col, Tooltip } from 'antd'\nimport { ColumnProps } from 'antd/lib/table'\nimport { EyeOutlined, DeleteOutlined } from '@ant-design/icons'\nimport { Page } from '@/components/layout'\nimport Button from '@/components/button'\nimport Table from '@/components/query-table'\nimport history from '@/utils/history'\nimport useTitle from '@/hooks/useTitle'\nimport {\n  useReportTemplateList,\n  useReportPreview,\n} from '@/hooks/useReportTemplate'\nimport { useBreadcrumb } from '@/hooks/useApp'\nimport useModal from '@/hooks/useModal'\nimport * as routes from '@/constants/routes'\nimport { ReportTemplate } from '@/services/reportService'\nimport ReactDndProvider from '@/components/snippet-scrollable-container'\nimport SnippetPreviewModal from '@/components/snippet-preview-modal'\n\nexport default function ReportTemplateList() {\n  useTitle('結構式報告模版列表')\n  useBreadcrumb([{ name: '結構式報告' }, { name: '結構式報告模版列表' }])\n\n  const [dataSource] = useReportTemplateList()\n\n  const [previewModalVisible, handlePreviewModalVisible, { item }] = useModal({\n    content: dataSource.content,\n  })\n\n  const [, setIsPreview] = useReportPreview()\n\n  const handleTo = (pathname: string) => () => {\n    history.push(pathname)\n  }\n\n  const handleToEditPage = (record: ReportTemplate) => () => {\n    handleTo(replace(':id', `${record.id}`)(routes.REPORT_TEMPLATE_EDIT))()\n  }\n\n  const handlePreview = (evt: React.MouseEvent<HTMLElement>) => {\n    setIsPreview()\n    handlePreviewModalVisible(evt)\n  }\n\n  const columns: ColumnProps<ReportTemplate>[] = [\n    {\n      title: '報告名稱',\n      dataIndex: 'name',\n      render: (v, r) => (\n        <Button type=\"link\" onClick={handleToEditPage(r)}>\n          {v}\n        </Button>\n      ),\n    },\n    {\n      title: '創作者',\n      dataIndex: 'author',\n    },\n    {\n      title: '狀態',\n      dataIndex: 'statusName',\n    },\n    {\n      title: '創作時間',\n      dataIndex: 'createdAtStr',\n    },\n    {\n      title: '上次修改時間',\n      dataIndex: 'updatedAtStr',\n    },\n    {\n      title: '報告描述',\n      dataIndex: 'description',\n    },\n    {\n      title: 'actions',\n      dataIndex: 'delete',\n      align: 'center',\n      render: (_, r) => (\n        <>\n          <Tooltip title=\"檢視\">\n            <EyeOutlined\n              data-id={r.id}\n              className=\"c-icon text-lg cursor-pointer mr-3\"\n              onClick={handlePreview}\n            />\n          </Tooltip>\n          <Tooltip title=\"刪除\">\n            <DeleteOutlined\n              data-id={r.id}\n              className=\"c-icon text-lg cursor-pointer\"\n            />\n          </Tooltip>\n        </>\n      ),\n    },\n  ]\n\n  return (\n    <ReactDndProvider className=\"is--preview\">\n      {previewModalVisible && (\n        <SnippetPreviewModal\n          snippetList={item?.setting}\n          onCancel={handlePreview}\n        />\n      )}\n      <Page>\n        <Row className=\"mb-4\">\n          <Col span={24} className=\"flex justify-end\">\n            <Button color=\"outline\">匯入</Button>\n            <Button\n              color=\"outline\"\n              className=\"ml-4\"\n              onClick={handleTo(routes.REPORT_TEMPLATE_CREATE)}>\n              新增\n            </Button>\n          </Col>\n        </Row>\n        <Row>\n          <Col span={24}>\n            <Table rowKey=\"id\" columns={columns} dataSource={dataSource} />\n          </Col>\n        </Row>\n      </Page>\n    </ReactDndProvider>\n  )\n}\n","import React from 'react'\nimport { find, path } from 'ramda'\n\nexport default function useModal<T, TDetail = T>({\n  content,\n  key = 'id',\n  onToggle,\n  ownState,\n}: {\n  content: T[]\n  key?: string\n  ownState?: [T | null, React.Dispatch<React.SetStateAction<T | null>>]\n  onToggle?: (item: T) => any\n}) {\n  const [editModalVisible, setEditModalVisible] = React.useState(false)\n  const [item, setItem] = ownState || React.useState<T | null>(null) // eslint-disable-line\n\n  const findItem = React.useCallback(\n    (evt: React.MouseEvent<HTMLElement>) => {\n      return find(\n        x =>\n          `${path([key], x)}` ===\n          (evt.currentTarget as HTMLElement).dataset['id']\n      )(content)\n    },\n    [content, key]\n  )\n\n  const handleModalToggle = (evt?: React.MouseEvent<HTMLElement>) => {\n    if (!evt) {\n      return\n    }\n\n    const item = findItem(evt)\n\n    if (!item) {\n      setItem(null)\n    }\n\n    if (item) {\n      setItem(item as T)\n    }\n\n    if (onToggle) {\n      onToggle(item as T)\n    }\n  }\n\n  const handleEditModalVisible = (evt?: React.MouseEvent<HTMLElement>) => {\n    setEditModalVisible(prev => !prev)\n    handleModalToggle(evt)\n  }\n\n  return [\n    editModalVisible,\n    handleEditModalVisible,\n    {\n      item,\n      handleModalToggle,\n      setItem,\n    },\n  ] as [\n    boolean,\n    (evt?: React.MouseEvent<HTMLElement, MouseEvent> | undefined) => void,\n    {\n      item: T | null\n      setItem: (value: React.SetStateAction<T | null>) => void\n      handleModalToggle: (\n        evt?: React.MouseEvent<HTMLElement, MouseEvent> | undefined\n      ) => void\n      itemDetail: TDetail\n    }\n  ]\n}\n","export default {\n  CARD: 'card',\n  BOARD: 'board',\n  SNIPPET: 'snippet',\n}\n","import { includes } from 'ramda'\nimport { XYCoord } from 'react-dnd'\nimport { isNil } from '@/utils/webHelper'\n\n/* prettier-ignore */\nconst REPORT_TEMPLATE_BUILDER_CLASSNAME = 'report-template-builder__main-content'\nconst UI_DRAGGABLE_CLASSNAME = 'ui-draggable'\n\nconst hasClassName = (nodes: Element[], className: string) => {\n  return nodes.find(\n    n => !isNil(n.className) && includes(className)(n.className)\n  )\n}\n\nexport function canMoveSnippet(\n  element: Element | null,\n  className = REPORT_TEMPLATE_BUILDER_CLASSNAME\n) {\n  let elem = element\n\n  const nodes: Element[] = []\n  nodes.push(elem as Element)\n\n  while (elem?.parentNode) {\n    nodes.unshift(elem.parentNode as Element)\n    elem = elem.parentNode as Element\n  }\n\n  if (\n    hasClassName(nodes, 'report-template-builder-contentarea--fixed-layout') ||\n    hasClassName(nodes, 'snippet-drawer-menu')\n  ) {\n    return false\n  }\n  if (\n    hasClassName(nodes, className) ||\n    hasClassName(nodes, UI_DRAGGABLE_CLASSNAME)\n  ) {\n    return true\n  }\n\n  return false\n}\n\nfunction findSnippet(\n  element: HTMLElement,\n  className = UI_DRAGGABLE_CLASSNAME\n): HTMLElement | null {\n  if (element.classList.contains(className)) {\n    return element\n  }\n  return element.parentElement && findSnippet(element.parentElement, className)\n}\n\nexport function getPlaceHolderIndex(clientOffset: XYCoord) {\n  const hoverElement = document.elementFromPoint(clientOffset.x, clientOffset.y)\n\n  // find ui-draggable classname\n  const overSnippet = findSnippet(hoverElement as NonNullable<HTMLElement>)\n\n  const snippetIndex = overSnippet && overSnippet.dataset.index\n  const placeholderIndex = overSnippet ? Number(overSnippet.dataset.index) : -1\n\n  const isOverSnippet = !isNil(snippetIndex)\n\n  return {\n    overSnippet,\n    placeholderIndex,\n    isOverSnippet: isOverSnippet,\n  }\n}\n\nexport default function getDisplayName(Component: any) {\n  return (\n    Component.displayName ||\n    Component.name ||\n    (typeof Component === 'string' && Component.length > 0\n      ? Component\n      : 'Unknown')\n  )\n}\n","import React from 'react'\nimport { Modal } from 'antd'\nimport { ModalProps, ModalFuncProps } from 'antd/lib/modal'\n\nexport const modalDefaultProps = (\n  content?: React.ReactNode,\n  props?: ModalProps\n): ModalFuncProps => ({\n  content: (\n    <div\n      className=\"text-primary font-medium\"\n      css={{ marginTop: 16, marginBottom: 30 }}>\n      {content}\n    </div>\n  ),\n  icon: null,\n  width: 440,\n  okText: '刪除',\n  cancelText: '取消',\n  centered: true,\n  // maskStyle: {\n  //   background: theme.modal.maskDarken,\n  // },\n  autoFocusButton: null,\n  okButtonProps: {\n    className: 'c-btn is--danger',\n    style: { minWidth: 80, marginRight: 24 },\n  },\n  cancelButtonProps: {\n    className: 'c-btn is--outline mr-0 float-right',\n    style: { minWidth: 80 },\n  },\n  ...props,\n})\n\nexport const confirm = ({\n  onOk,\n  onCancel,\n  content = '刪除後將無法還原，確認繼續？',\n  ...props\n}: ModalFuncProps) => {\n  Modal.confirm({\n    ...modalDefaultProps(content),\n    ...props,\n    onOk: () => {\n      if (onOk) {\n        onOk()\n      }\n    },\n    onCancel() {\n      if (onCancel) {\n        onCancel()\n      }\n    },\n  })\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport {\n  EditOutlined,\n  DeleteOutlined,\n  // RightOutlined,\n  // LeftOutlined,\n} from '@ant-design/icons'\nimport cx from 'classnames'\nimport { Tooltip } from 'antd'\n\ntype Props = {\n  tabIndex: number\n  onEdit: () => void\n  onDelete: () => void\n}\n\nconst ToolbarWrapper = styled.div`\n  position: absolute;\n  top: 16px;\n  right: 24px;\n  visibility: hidden;\n  transition: visibility 0s, opacity 0.3s, max-height 0.6s linear;\n  opacity: 0;\n  z-index: 1;\n\n  &.is--over {\n    visibility: visible;\n    transition: visibility 0s, opacity 0.3s, max-height 0.6s linear;\n    opacity: 0.8;\n  }\n`\n\nexport default function SnippetToolbar({ tabIndex, onEdit, onDelete }: Props) {\n  return (\n    <ToolbarWrapper\n      className={cx('text-primary', { 'is--over': tabIndex === 1 })}>\n      {/* <Tooltip title=\"向左縮排\">\n        <LeftOutlined className=\"mr-2 cursor-pointer\" />\n      </Tooltip>\n      <Tooltip title=\"向右縮排\">\n        <RightOutlined className=\"mr-2 cursor-pointer\" />\n      </Tooltip> */}\n      <Tooltip title=\"編輯\">\n        <EditOutlined className=\"mr-2 cursor-pointer\" onClick={onEdit} />\n      </Tooltip>\n      <Tooltip title=\"刪除\">\n        <DeleteOutlined className=\"cursor-pointer\" onClick={onDelete} />\n      </Tooltip>\n    </ToolbarWrapper>\n  )\n}\n","import React from 'react'\nimport { DragSource, ConnectDragPreview, ConnectDragSource } from 'react-dnd'\nimport { getEmptyImage } from 'react-dnd-html5-backend'\nimport { mergeRight } from 'ramda'\nimport cx from 'classnames'\nimport { confirm } from '@/utils/message'\nimport theme from '@/theme'\nimport ItemTypes from '@/constants/item-types'\nimport SnippetToolbar from './snippet-toolbar'\n\ntype Props = {\n  id?: React.Key\n  wrapperId?: string\n  className?: string\n  style?: React.CSSProperties\n  index?: number\n  isDragging?: boolean\n  draggable?: boolean\n  fromMenu?: boolean\n  connectDragPreview: ConnectDragPreview\n  connectDragSource: ConnectDragSource\n  children?: React.ReactNode\n  findSnippet?(id: React.Key): any\n  removeSnippet?(index: number): void\n}\n\ntype State = {\n  top: number\n  tabIndex: number\n  editModalVisible: boolean\n}\n\nconst withDragSource = DragSource(\n  ItemTypes.BOARD,\n  {\n    beginDrag(props: Props) {\n      return {\n        ...props,\n        fromMenu: false,\n        originalIndex: (props as any).findSnippet(props.id).index,\n      }\n    },\n    canDrag(props: Props) {\n      return !!(props.draggable && !props.fromMenu)\n    },\n  },\n  (connect, monitor) => ({\n    connectDragSource: connect.dragSource(),\n    connectDragPreview: connect.dragPreview(),\n    isDragging: monitor.isDragging(),\n  })\n)\n\nclass Snippet extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props)\n\n    this.state = {\n      top: 0,\n      tabIndex: -1,\n      editModalVisible: false,\n    }\n  }\n\n  componentDidMount = () => {\n    const { connectDragPreview } = this.props\n    if (connectDragPreview) {\n      connectDragPreview(getEmptyImage() /* { anchorX: 0.2, anchorY: 0.1 } */)\n    }\n  }\n\n  handleRemove = () => {\n    confirm({\n      content: '刪除後將無法還原，確認繼續？',\n      title: '確認要刪除這個模版?',\n      onOk: () => {\n        ;(this.props as any).removeSnippet(this.props.index)\n      },\n      onCancel() {\n        console.log('Cancel')\n      },\n    })\n  }\n\n  handleEditModalVisible = () => {\n    this.setState(prev => ({ editModalVisible: !prev.editModalVisible }))\n  }\n\n  handleIndent = (align: 'left' | 'right') => () => {}\n\n  _onMouseOver = () => {\n    this.setState({ tabIndex: 1 })\n  }\n\n  _onMouseOut = () => {\n    this.setState({ tabIndex: -1 })\n  }\n\n  render() {\n    const {\n      props: {\n        connectDragSource,\n        connectDragPreview,\n        isDragging,\n        wrapperId,\n        index,\n        draggable,\n        style = {},\n        className = 'mb-3',\n      },\n      state: { tabIndex, editModalVisible },\n    } = this\n\n    const styles = mergeRight(\n      getItemStyles({ isDragging, tabIndex, draggable }),\n      style\n    )\n\n    return connectDragSource(\n      connectDragPreview(\n        <div\n          id={wrapperId}\n          style={styles}\n          className={cx(\n            'ui-sortable',\n            { 'ui-draggable': draggable },\n            className\n          )}\n          tabIndex={tabIndex}\n          onMouseOver={this._onMouseOver}\n          onMouseOut={this._onMouseOut}\n          data-index={index}>\n          {draggable && (\n            <SnippetToolbar\n              tabIndex={tabIndex}\n              onEdit={this.handleEditModalVisible}\n              onDelete={this.handleRemove}\n            />\n          )}\n          {React.Children.map(this.props.children, child =>\n            React.cloneElement(child as any, {\n              editModalVisible,\n              handleEditModalVisible: this.handleEditModalVisible,\n            })\n          )}\n        </div>\n      )\n    )\n  }\n}\n\nfunction getItemStyles(props: Partial<Props & State>): React.CSSProperties {\n  const { isDragging, tabIndex, draggable } = props\n\n  const isFocus = tabIndex === 1\n\n  return {\n    ...(isFocus ? { borderRadius: 3 } : {}),\n    ...(draggable\n      ? { border: `1px dashed ${draggable ? '#e7e7e7' : 'transparent'}` }\n      : {\n          outlineColor: isFocus ? theme.purple150 : 'transparent',\n        }),\n    cursor: 'default',\n    position: 'relative',\n    display: isDragging ? 'none' : 'block',\n  }\n}\n\nexport default withDragSource(Snippet)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { findDOMNode } from 'react-dom'\nimport { DndContext } from 'react-dnd'\nimport throttle from 'lodash.throttle'\nimport raf from 'raf'\nimport hoist from 'hoist-non-react-statics'\nimport getDisplayName from './snippet-utils'\n\nfunction noop() {}\n\nfunction intBetween(min, max, val) {\n  return Math.floor(Math.min(max, Math.max(min, val)))\n}\n\nfunction getCoords(evt) {\n  if (evt.type === 'touchmove') {\n    return {\n      x: evt.changedTouches[0].clientX,\n      y: evt.changedTouches[0].clientY,\n    }\n  }\n\n  return { x: evt.clientX, y: evt.clientY }\n}\n\nconst DEFAULT_BUFFER = 150\n\nexport function createHorizontalStrength(_buffer) {\n  return function defaultHorizontalStrength({ x, w, y, h }, point) {\n    const buffer = Math.min(w / 2, _buffer)\n    const inRange = point.x >= x && point.x <= x + w\n    const inBox = inRange && point.y >= y && point.y <= y + h\n\n    if (inBox) {\n      if (point.x < x + buffer) {\n        return (point.x - x - buffer) / buffer\n      } else if (point.x > x + w - buffer) {\n        return -(x + w - point.x - buffer) / buffer\n      }\n    }\n\n    return 0\n  }\n}\n\nexport function createVerticalStrength(_buffer) {\n  return function defaultVerticalStrength({ y, h, x, w }, point) {\n    const buffer = Math.min(h / 2, _buffer)\n    const inRange = point.y >= y && point.y <= y + h\n    const inBox = inRange && point.x >= x && point.x <= x + w\n\n    if (inBox) {\n      if (point.y < y + buffer) {\n        return (point.y - y - buffer) / buffer\n      } else if (point.y > y + h - buffer) {\n        return -(y + h - point.y - buffer) / buffer\n      }\n    }\n\n    return 0\n  }\n}\n\nexport const defaultHorizontalStrength = createHorizontalStrength(\n  DEFAULT_BUFFER\n)\n\nexport const defaultVerticalStrength = createVerticalStrength(DEFAULT_BUFFER)\n\nexport default function createScrollingComponent(WrappedComponent) {\n  class ScrollingComponent extends React.Component {\n    static displayName = `Scrolling(${getDisplayName(WrappedComponent)})`\n\n    static propTypes = {\n      onScrollChange: PropTypes.func,\n      verticalStrength: PropTypes.func,\n      horizontalStrength: PropTypes.func,\n      strengthMultiplier: PropTypes.number,\n    }\n\n    static defaultProps = {\n      useScroll: true,\n      onScrollChange: noop,\n      verticalStrength: defaultVerticalStrength,\n      horizontalStrength: defaultHorizontalStrength,\n      strengthMultiplier: 30,\n    }\n\n    static contextType = DndContext\n\n    constructor(props, ctx) {\n      super(props, ctx)\n\n      this.scaleX = 0\n      this.scaleY = 0\n      this.frame = null\n\n      this.attached = false\n      this.dragging = false\n    }\n\n    componentDidMount() {\n      if (this.props.useScroll) {\n        this._initial()\n      }\n    }\n\n    _initial() {\n      // window.document.body.addEventListener('dragover', this.handleEvent);\n      this.container = findDOMNode(this.wrappedInstance)\n      this.container.addEventListener('dragover', this.handleEvent)\n      // touchmove events don't seem to work across siblings, so we unfortunately\n      // have to attach the listeners to the body\n      window.document.body.addEventListener('touchmove', this.handleEvent)\n\n      this.clearMonitorSubscription = this.context.dragDropManager\n        .getMonitor()\n        .subscribeToStateChange(() => this.handleMonitorChange())\n    }\n\n    componentWillUnmount() {\n      if (this.props.useScroll) {\n        this._remove()\n      }\n    }\n\n    _remove() {\n      // window.document.body.removeEventListener('dragover', this.handleEvent);\n      this.container.removeEventListener('dragover', this.handleEvent)\n      window.document.body.removeEventListener('touchmove', this.handleEvent)\n      this.clearMonitorSubscription()\n      this.stopScrolling()\n    }\n\n    handleEvent = evt => {\n      if (this.dragging && !this.attached) {\n        this.attach()\n        this.updateScrolling(evt)\n      }\n    }\n\n    handleMonitorChange() {\n      const isDragging = this.context.dragDropManager.getMonitor().isDragging()\n\n      if (!this.dragging && isDragging) {\n        this.dragging = true\n      } else if (this.dragging && !isDragging) {\n        this.dragging = false\n        this.stopScrolling()\n      }\n    }\n\n    attach() {\n      this.attached = true\n      window.document.body.addEventListener('dragover', this.updateScrolling)\n      window.document.body.addEventListener('touchmove', this.updateScrolling)\n    }\n\n    detach() {\n      this.attached = false\n      window.document.body.removeEventListener('dragover', this.updateScrolling)\n      window.document.body.removeEventListener(\n        'touchmove',\n        this.updateScrolling\n      )\n    }\n\n    // Update scaleX and scaleY every 100ms or so\n    // and start scrolling if necessary\n    updateScrolling = throttle(\n      evt => {\n        const {\n          left: x,\n          top: y,\n          width: w,\n          height: h,\n        } = this.container.getBoundingClientRect()\n        const box = { x, y, w, h }\n        const coords = getCoords(evt)\n\n        // calculate strength\n        this.scaleX = this.props.horizontalStrength(box, coords)\n        this.scaleY = this.props.verticalStrength(box, coords)\n\n        // start scrolling if we need to\n        if (!this.frame && (this.scaleX || this.scaleY)) {\n          this.startScrolling()\n        }\n      },\n      100,\n      { trailing: false }\n    )\n\n    startScrolling() {\n      let i = 0\n      const tick = () => {\n        const { scaleX, scaleY, container } = this\n        const { strengthMultiplier, onScrollChange } = this.props\n\n        // stop scrolling if there's nothing to do\n        if (strengthMultiplier === 0 || scaleX + scaleY === 0) {\n          this.stopScrolling()\n          return\n        }\n\n        // there's a bug in safari where it seems like we can't get\n        // mousemove events from a container that also emits a scroll\n        // event that same frame. So we double the strengthMultiplier and only adjust\n        // the scroll position at 30fps\n        if (i++ % 2) {\n          const {\n            scrollLeft,\n            scrollTop,\n            scrollWidth,\n            scrollHeight,\n            clientWidth,\n            clientHeight,\n          } = container\n\n          const newLeft = scaleX\n            ? (container.scrollLeft = intBetween(\n                0,\n                scrollWidth - clientWidth,\n                scrollLeft + scaleX * strengthMultiplier\n              ))\n            : scrollLeft\n\n          const newTop = scaleY\n            ? (container.scrollTop = intBetween(\n                0,\n                scrollHeight - clientHeight,\n                scrollTop + scaleY * strengthMultiplier\n              ))\n            : scrollTop\n\n          onScrollChange(newLeft, newTop)\n        }\n        this.frame = raf(tick)\n      }\n\n      tick()\n    }\n\n    stopScrolling() {\n      this.detach()\n      this.scaleX = 0\n      this.scaleY = 0\n\n      if (this.frame) {\n        raf.cancel(this.frame)\n        this.frame = null\n      }\n    }\n\n    render() {\n      const {\n        // not passing down these props\n        strengthMultiplier,\n        verticalStrength,\n        horizontalStrength,\n        onScrollChange,\n        ...props\n      } = this.props\n\n      return (\n        <WrappedComponent\n          ref={ref => {\n            this.wrappedInstance = ref\n          }}\n          {...props}\n        />\n      )\n    }\n  }\n\n  return hoist(ScrollingComponent, WrappedComponent)\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport cx from 'classnames'\nimport withScroll, { createVerticalStrength } from './withScroll'\n\ninterface Props {\n  className?: string\n  useScroll?: boolean\n}\n\nconst DndScrollableElement = styled.div`\n  height: 100vh;\n  padding-top: 0;\n  overflow-y: scroll;\n\n  &.is--preview {\n    height: auto;\n  }\n`\n\nconst ScrollableComponent = withScroll(DndScrollableElement)\n\nconst vStrength = createVerticalStrength(150)\n\nexport default class ReactDndProvider extends React.Component<Props> {\n  static defaultProps = {\n    useScroll: true,\n  }\n\n  render() {\n    const { className, useScroll } = this.props\n\n    return (\n      <ScrollableComponent\n        useScroll={useScroll}\n        verticalStrength={vStrength}\n        strengthMultiplier={100}\n        className={cx('report-template-builder', className)}>\n        {this.props.children}\n      </ScrollableComponent>\n    )\n  }\n}\n","import React from 'react'\nimport { ModalProps } from 'antd/lib/modal'\nimport { length, __, gt, keys, map, pathOr } from 'ramda'\nimport Modal from '@/components/modal'\nimport Snippet from '@/components/snippet'\nimport { mapIndexed } from '@/utils/webHelper'\nconst { compose } = require('ramda')\n\ninterface Props extends ModalProps {\n  snippetList?: { [key: string]: any[] }\n}\n\nexport default function SnippetPreviewModal({ onCancel, snippetList }: Props) {\n  return (\n    <Modal\n      visible\n      style={{ top: 30 }}\n      maskClosable={false}\n      className=\"ant-modal-header--border-none\"\n      keyboard={false}\n      width=\"85%\"\n      onCancel={onCancel}\n      footer={false}>\n      {compose(\n        map((key: string) => (\n          <div key={key}>\n            {compose(gt(__, 0), length, pathOr([], [key]))(snippetList) && (\n              <h2 className=\"my-2\">{key}</h2>\n            )}\n            {compose(\n              mapIndexed((item: any, idx: number) => (\n                <Snippet key={item.id} draggable={false}>\n                  <item.Component\n                    id={item.id}\n                    className={item.id}\n                    item={item}\n                    index={idx}\n                  />\n                </Snippet>\n              )),\n              pathOr([], [key])\n            )(snippetList)}\n          </div>\n        )),\n        keys\n      )(snippetList)}\n    </Modal>\n  )\n}\n"],"sourceRoot":""}