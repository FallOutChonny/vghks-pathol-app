{"version":3,"sources":["../node_modules/@ant-design/icons-svg/es/asn/EyeOutlined.js","../node_modules/@ant-design/icons/es/icons/EyeOutlined.js","containers/report-template-list/report-template-list.tsx","hooks/useModal.tsx","constants/item-types.ts","components/snippet-utils.js","utils/message.tsx","components/box.ts","components/snippet-toolbar.tsx","components/snippet.tsx","components/withScroll.js","components/snippet-scrollable-container.tsx","components/snippet-preview-modal.tsx","components/query-table.tsx"],"names":["EyeOutlined","props","ref","React","AntdIcon","Object","assign","icon","EyeOutlinedSvg","displayName","ReportTemplateList","useTitle","useBreadcrumb","name","useReportTemplateList","dataSource","content","key","onToggle","ownState","useState","editModalVisible","setEditModalVisible","item","setItem","findItem","useCallback","evt","find","x","path","currentTarget","dataset","handleModalToggle","prev","useModal","previewModalVisible","handlePreviewModalVisible","handleTo","pathname","history","push","columns","title","dataIndex","render","v","r","type","onClick","record","replace","id","routes","align","_","data-id","className","DeleteOutlined","snippetList","setting","onCancel","span","color","rowKey","CARD","BOARD","SNIPPET","hasClassName","nodes","n","isNil","includes","canMoveSnippet","element","elem","parentNode","unshift","getPlaceHolderIndex","clientOffset","overSnippet","findSnippet","classList","contains","parentElement","document","elementFromPoint","y","snippetIndex","index","placeholderIndex","isOverSnippet","getDisplayName","Component","length","marginTop","marginBottom","confirm","onOk","width","okText","cancelText","centered","autoFocusButton","okButtonProps","style","minWidth","marginRight","cancelButtonProps","modalDefaultProps","styled","div","layout","space","flexbox","typography","border","position","background","ToolbarWrapper","Box","SnippetToolbar","tabIndex","onEdit","onDelete","cx","EditOutlined","withDragSource","DragSource","ItemTypes","beginDrag","fromMenu","originalIndex","canDrag","draggable","connect","monitor","connectDragSource","dragSource","connectDragPreview","dragPreview","isDragging","Snippet","componentDidMount","getEmptyImage","handleRemove","removeSnippet","console","log","handleEditModalVisible","setState","handleIndent","_onMouseOver","_onMouseOut","state","top","this","wrapperId","styles","mergeRight","isFocus","borderRadius","outlineColor","theme","purple150","cursor","display","getItemStyles","onMouseOver","onMouseOut","data-index","Children","map","children","child","cloneElement","noop","intBetween","min","max","val","Math","floor","createVerticalStrength","_buffer","point","h","w","buffer","defaultHorizontalStrength","defaultVerticalStrength","ScrollableComponent","WrappedComponent","ScrollingComponent","ctx","handleEvent","dragging","attached","attach","updateScrolling","throttle","container","getBoundingClientRect","box","left","height","coords","changedTouches","clientX","clientY","getCoords","scaleX","horizontalStrength","scaleY","verticalStrength","frame","startScrolling","trailing","useScroll","_initial","findDOMNode","wrappedInstance","addEventListener","window","body","clearMonitorSubscription","context","dragDropManager","getMonitor","subscribeToStateChange","handleMonitorChange","_remove","removeEventListener","stopScrolling","i","tick","strengthMultiplier","onScrollChange","scrollLeft","scrollTop","scrollWidth","scrollHeight","clientWidth","clientHeight","raf","detach","cancel","defaultProps","contextType","DndContext","hoist","withScroll","vStrength","ReactDndProvider","compose","require","SnippetPreviewModal","visible","maskClosable","keyboard","footer","gt","__","pathOr","mapIndexed","idx","keys","QueryTable","pageNum","onChange","loading","rowSelection","pagination","paginationConfig","useMemo","merge","current","pageSize","total","showSizeChanger"],"mappings":"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","file":"static/js/9.de157e46.chunk.js","sourcesContent":["// This icon file is generated automatically.\nvar EyeOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z\" } }] }, \"name\": \"eye\", \"theme\": \"outlined\" };\nexport default EyeOutlined;\n","// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport EyeOutlinedSvg from \"@ant-design/icons-svg/es/asn/EyeOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar EyeOutlined = function EyeOutlined(props, ref) {\n  return React.createElement(AntdIcon, Object.assign({}, props, {\n    ref: ref,\n    icon: EyeOutlinedSvg\n  }));\n};\n\nEyeOutlined.displayName = 'EyeOutlined';\nexport default React.forwardRef(EyeOutlined);","import React from 'react'\nimport { replace } from 'ramda'\nimport { Row, Col, Tooltip } from 'antd'\nimport { ColumnProps } from 'antd/lib/table'\nimport { EyeOutlined, DeleteOutlined } from '@ant-design/icons'\nimport { Page } from '@/components/layout'\nimport Button from '@/components/button'\nimport Table from '@/components/query-table'\nimport history from '@/utils/history'\nimport useTitle from '@/hooks/useTitle'\nimport { useReportTemplateList } from '@/hooks/useReportTemplate'\nimport { useBreadcrumb } from '@/hooks/useApp'\nimport useModal from '@/hooks/useModal'\nimport * as routes from '@/constants/routes'\nimport { ReportTemplate } from '@/services/reportService'\nimport ReactDndProvider from '@/components/snippet-scrollable-container'\nimport SnippetPreviewModal from '@/components/snippet-preview-modal'\n\nexport default function ReportTemplateList() {\n  useTitle('結構式報告模版列表')\n  useBreadcrumb([{ name: '結構式報告' }, { name: '結構式報告模版列表' }])\n\n  const [dataSource] = useReportTemplateList()\n\n  const [previewModalVisible, handlePreviewModalVisible, { item }] = useModal({\n    content: dataSource.content,\n  })\n\n  const handleTo = (pathname: string) => () => {\n    history.push(pathname)\n  }\n\n  const handleToEditPage = (record: ReportTemplate) => () => {\n    handleTo(replace(':id', `${record.id}`)(routes.REPORT_TEMPLATE_EDIT))()\n  }\n\n  const columns: ColumnProps<ReportTemplate>[] = [\n    {\n      title: '報告名稱',\n      dataIndex: 'name',\n      render: (v, r) => (\n        <Button type=\"link\" onClick={handleToEditPage(r)}>\n          {v}\n        </Button>\n      ),\n    },\n    {\n      title: '創作者',\n      dataIndex: 'author',\n    },\n    {\n      title: '狀態',\n      dataIndex: 'statusName',\n    },\n    {\n      title: '創作時間',\n      dataIndex: 'createdAtStr',\n    },\n    {\n      title: '上次修改時間',\n      dataIndex: 'updatedAtStr',\n    },\n    {\n      title: '報告描述',\n      dataIndex: 'description',\n    },\n    {\n      title: 'actions',\n      dataIndex: 'delete',\n      align: 'center',\n      render: (_, r) => (\n        <>\n          <Tooltip title=\"檢視\">\n            <EyeOutlined\n              data-id={r.id}\n              className=\"c-icon text-lg cursor-pointer mr-3\"\n              onClick={handlePreviewModalVisible}\n            />\n          </Tooltip>\n          <Tooltip title=\"刪除\">\n            <DeleteOutlined\n              data-id={r.id}\n              className=\"c-icon text-lg cursor-pointer\"\n            />\n          </Tooltip>\n        </>\n      ),\n    },\n  ]\n\n  return (\n    <ReactDndProvider className=\"is--preview\">\n      {previewModalVisible && (\n        <SnippetPreviewModal\n          snippetList={item?.setting}\n          onCancel={handlePreviewModalVisible}\n        />\n      )}\n      <Page>\n        <Row className=\"mb-4\">\n          <Col span={24} className=\"flex justify-end\">\n            <Button color=\"outline\">匯入</Button>\n            <Button\n              color=\"outline\"\n              className=\"ml-4\"\n              onClick={handleTo(routes.REPORT_TEMPLATE_CREATE)}>\n              新增\n            </Button>\n          </Col>\n        </Row>\n        <Row>\n          <Col span={24}>\n            <Table rowKey=\"id\" columns={columns} dataSource={dataSource} />\n          </Col>\n        </Row>\n      </Page>\n    </ReactDndProvider>\n  )\n}\n","import React from 'react'\nimport { find, path } from 'ramda'\n\nexport default function useModal<T, TDetail = T>({\n  content,\n  key = 'id',\n  onToggle,\n  ownState,\n}: {\n  content: T[]\n  key?: string\n  ownState?: [T | null, React.Dispatch<React.SetStateAction<T | null>>]\n  onToggle?: (item: T) => any\n}) {\n  const [editModalVisible, setEditModalVisible] = React.useState(false)\n  const [item, setItem] = ownState || React.useState<T | null>(null) // eslint-disable-line\n\n  const findItem = React.useCallback(\n    (evt: React.MouseEvent<HTMLElement>) => {\n      return find(\n        x =>\n          `${path([key], x)}` ===\n          (evt.currentTarget as HTMLElement).dataset['id']\n      )(content)\n    },\n    [content, key]\n  )\n\n  const handleModalToggle = (evt?: React.MouseEvent<HTMLElement>) => {\n    if (!evt) {\n      return\n    }\n\n    const item = findItem(evt)\n\n    if (!item) {\n      setItem(null)\n    }\n\n    if (item) {\n      setItem(item as T)\n    }\n\n    if (onToggle) {\n      onToggle(item as T)\n    }\n  }\n\n  const handleEditModalVisible = (evt?: React.MouseEvent<HTMLElement>) => {\n    setEditModalVisible(prev => !prev)\n    handleModalToggle(evt)\n  }\n\n  return [\n    editModalVisible,\n    handleEditModalVisible,\n    {\n      item,\n      handleModalToggle,\n      setItem,\n    },\n  ] as [\n    boolean,\n    (evt?: React.MouseEvent<HTMLElement, MouseEvent> | undefined) => void,\n    {\n      item: T | null\n      setItem: (value: React.SetStateAction<T | null>) => void\n      handleModalToggle: (\n        evt?: React.MouseEvent<HTMLElement, MouseEvent> | undefined\n      ) => void\n      itemDetail: TDetail\n    }\n  ]\n}\n","export default {\n  CARD: 'card',\n  BOARD: 'board',\n  SNIPPET: 'snippet',\n}\n","import { includes } from 'ramda'\nimport { isNil } from '@/utils/webHelper'\n\n/* prettier-ignore */\nconst REPORT_TEMPLATE_BUILDER_CLASSNAME = 'report-template-builder__main-content'\nconst UI_DRAGGABLE_CLASSNAME = 'ui-draggable'\n\nconst hasClassName = (nodes, className) => {\n  return nodes.find(\n    n => !isNil(n.className) && includes(className)(n.className)\n  )\n}\n\nexport function canMoveSnippet(\n  element,\n  className = REPORT_TEMPLATE_BUILDER_CLASSNAME\n) {\n  let elem = element\n\n  const nodes = []\n  nodes.push(elem)\n\n  while (elem.parentNode) {\n    nodes.unshift(elem.parentNode)\n    elem = elem.parentNode\n  }\n\n  if (\n    hasClassName(nodes, 'report-template-builder-contentarea--fixed-layout') ||\n    hasClassName(nodes, 'snippet-drawer-menu')\n  ) {\n    return false\n  }\n  if (\n    hasClassName(nodes, className) ||\n    hasClassName(nodes, UI_DRAGGABLE_CLASSNAME)\n  ) {\n    return true\n  }\n\n  return false\n}\n\nexport function findSnippet(element, className = UI_DRAGGABLE_CLASSNAME) {\n  if (element.classList.contains(className)) {\n    return element\n  }\n  return element.parentElement && findSnippet(element.parentElement, className)\n}\n\nexport function getPlaceHolderIndex(clientOffset) {\n  const hoverElement = document.elementFromPoint(clientOffset.x, clientOffset.y)\n\n  // find ui-draggable classname\n  const overSnippet = findSnippet(hoverElement)\n\n  const snippetIndex = overSnippet && overSnippet.dataset.index\n  const placeholderIndex = overSnippet ? +overSnippet.dataset.index : -1\n\n  const isOverSnippet = !isNil(snippetIndex)\n\n  return {\n    overSnippet,\n    placeholderIndex,\n    isOverSnippet: isOverSnippet,\n  }\n}\n\nexport default function getDisplayName(Component) {\n  return (\n    Component.displayName ||\n    Component.name ||\n    (typeof Component === 'string' && Component.length > 0\n      ? Component\n      : 'Unknown')\n  )\n}\n","import React from 'react'\nimport { Modal } from 'antd'\nimport { ModalProps, ModalFuncProps } from 'antd/lib/modal'\n\nexport const modalDefaultProps = (\n  content?: React.ReactNode,\n  props?: ModalProps\n): ModalFuncProps => ({\n  content: (\n    <div\n      className=\"text-primary font-medium\"\n      css={{ marginTop: 16, marginBottom: 30 }}>\n      {content}\n    </div>\n  ),\n  icon: null,\n  width: 440,\n  okText: '刪除',\n  cancelText: '取消',\n  centered: true,\n  // maskStyle: {\n  //   background: theme.modal.maskDarken,\n  // },\n  autoFocusButton: null,\n  okButtonProps: {\n    className: 'c-btn is--danger',\n    style: { minWidth: 80, marginRight: 24 },\n  },\n  cancelButtonProps: {\n    className: 'c-btn is--outline mr-0 float-right',\n    style: { minWidth: 80 },\n  },\n  ...props,\n})\n\nexport const confirm = ({\n  onOk,\n  onCancel,\n  content = '刪除後將無法還原，確認繼續？',\n  ...props\n}: ModalFuncProps) => {\n  Modal.confirm({\n    ...modalDefaultProps(content),\n    ...props,\n    onOk: () => {\n      if (onOk) {\n        onOk()\n      }\n    },\n    onCancel() {\n      if (onCancel) {\n        onCancel()\n      }\n    },\n  })\n}\n","import styled from 'styled-components'\nimport {\n  position,\n  color,\n  layout,\n  space,\n  flexbox,\n  background,\n  typography,\n  ColorProps,\n  border,\n  TypographyProps,\n  LayoutProps,\n  SpaceProps,\n  FlexboxProps,\n  BorderProps,\n  PositionProps,\n  BackgroundProps,\n} from 'styled-system'\n\nexport default styled.div<\n  ColorProps &\n    TypographyProps &\n    LayoutProps &\n    SpaceProps &\n    FlexboxProps &\n    BorderProps &\n    PositionProps &\n    BackgroundProps\n>`\n  ${color};\n  ${layout};\n  ${space};\n  ${flexbox};\n  ${typography};\n  ${border};\n  ${position};\n  ${background};\n`\n","import React from 'react'\nimport styled from 'styled-components'\nimport {\n  EditOutlined,\n  DeleteOutlined,\n  // RightOutlined,\n  // LeftOutlined,\n} from '@ant-design/icons'\nimport cx from 'classnames'\nimport { Tooltip } from 'antd'\nimport Box from '@/components/box'\n\ntype Props = {\n  tabIndex: number\n  onEdit: () => void\n  onDelete: () => void\n}\n\nconst ToolbarWrapper = styled(Box)`\n  position: absolute;\n  top: 16px;\n  right: 24px;\n  visibility: hidden;\n  transition: visibility 0s, opacity 0.3s, max-height 0.6s linear;\n  opacity: 0;\n  z-index: 1;\n\n  &.is--over {\n    visibility: visible;\n    transition: visibility 0s, opacity 0.3s, max-height 0.6s linear;\n    opacity: 0.8;\n  }\n`\n\nexport default function SnippetToolbar({ tabIndex, onEdit, onDelete }: Props) {\n  return (\n    <ToolbarWrapper\n      className={cx('text-primary', { 'is--over': tabIndex === 1 })}>\n      {/* <Tooltip title=\"向左縮排\">\n        <LeftOutlined className=\"mr-2 cursor-pointer\" />\n      </Tooltip>\n      <Tooltip title=\"向右縮排\">\n        <RightOutlined className=\"mr-2 cursor-pointer\" />\n      </Tooltip> */}\n      <Tooltip title=\"編輯\">\n        <EditOutlined className=\"mr-2 cursor-pointer\" onClick={onEdit} />\n      </Tooltip>\n      <Tooltip title=\"刪除\">\n        <DeleteOutlined className=\"cursor-pointer\" onClick={onDelete} />\n      </Tooltip>\n    </ToolbarWrapper>\n  )\n}\n","import React from 'react'\nimport { DragSource, ConnectDragPreview, ConnectDragSource } from 'react-dnd'\nimport { getEmptyImage } from 'react-dnd-html5-backend'\nimport { mergeRight } from 'ramda'\nimport cx from 'classnames'\nimport { confirm } from '@/utils/message'\nimport theme from '@/theme'\nimport ItemTypes from '@/constants/item-types'\nimport SnippetToolbar from './snippet-toolbar'\n\ntype Props = {\n  id?: React.Key\n  wrapperId?: string\n  className?: string\n  style?: React.CSSProperties\n  index?: number\n  isDragging?: boolean\n  draggable?: boolean\n  fromMenu?: boolean\n  connectDragPreview: ConnectDragPreview\n  connectDragSource: ConnectDragSource\n  children?: React.ReactNode\n  findSnippet?(id: React.Key): any\n  removeSnippet?(index: number): void\n}\n\ntype State = {\n  top: number\n  tabIndex: number\n  editModalVisible: boolean\n}\n\nconst withDragSource = DragSource(\n  ItemTypes.BOARD,\n  {\n    beginDrag(props: Props) {\n      return {\n        ...props,\n        fromMenu: false,\n        originalIndex: (props as any).findSnippet(props.id).index,\n      }\n    },\n    canDrag(props: Props) {\n      return !!(props.draggable && !props.fromMenu)\n    },\n  },\n  (connect, monitor) => ({\n    connectDragSource: connect.dragSource(),\n    connectDragPreview: connect.dragPreview(),\n    isDragging: monitor.isDragging(),\n  })\n)\n\nclass Snippet extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props)\n\n    this.state = {\n      top: 0,\n      tabIndex: -1,\n      editModalVisible: false,\n    }\n  }\n\n  componentDidMount = () => {\n    const { connectDragPreview } = this.props\n    if (connectDragPreview) {\n      connectDragPreview(getEmptyImage() /* { anchorX: 0.2, anchorY: 0.1 } */)\n    }\n  }\n\n  handleRemove = () => {\n    confirm({\n      content: '刪除後將無法還原，確認繼續？',\n      title: '確認要刪除這個模版?',\n      onOk: () => {\n        ;(this.props as any).removeSnippet(this.props.index)\n      },\n      onCancel() {\n        console.log('Cancel')\n      },\n    })\n  }\n\n  handleEditModalVisible = () => {\n    this.setState(prev => ({ editModalVisible: !prev.editModalVisible }))\n  }\n\n  handleIndent = (align: 'left' | 'right') => () => {}\n\n  _onMouseOver = () => {\n    this.setState({ tabIndex: 1 })\n  }\n\n  _onMouseOut = () => {\n    this.setState({ tabIndex: -1 })\n  }\n\n  render() {\n    const {\n      props: {\n        connectDragSource,\n        connectDragPreview,\n        isDragging,\n        wrapperId,\n        index,\n        draggable,\n        style = {},\n        className = 'mb-3',\n      },\n      state: { tabIndex, editModalVisible },\n    } = this\n\n    const styles = mergeRight(\n      getItemStyles({ isDragging, tabIndex, draggable }),\n      style\n    )\n\n    return connectDragSource(\n      connectDragPreview(\n        <div\n          id={wrapperId}\n          style={styles}\n          className={cx(\n            'ui-sortable',\n            { 'ui-draggable': draggable },\n            className\n          )}\n          tabIndex={tabIndex}\n          onMouseOver={this._onMouseOver}\n          onMouseOut={this._onMouseOut}\n          data-index={index}>\n          {draggable && (\n            <SnippetToolbar\n              tabIndex={tabIndex}\n              onEdit={this.handleEditModalVisible}\n              onDelete={this.handleRemove}\n            />\n          )}\n          {React.Children.map(this.props.children, child =>\n            React.cloneElement(child as any, {\n              editModalVisible,\n              handleEditModalVisible: this.handleEditModalVisible,\n            })\n          )}\n        </div>\n      )\n    )\n  }\n}\n\nfunction getItemStyles(props: Partial<Props & State>): React.CSSProperties {\n  const { isDragging, tabIndex, draggable } = props\n\n  const isFocus = tabIndex === 1\n\n  return {\n    ...(isFocus ? { borderRadius: 3 } : {}),\n    ...(draggable\n      ? { border: `1px dashed ${draggable ? '#e7e7e7' : 'transparent'}` }\n      : {\n          outlineColor: isFocus ? theme.purple150 : 'transparent',\n        }),\n    cursor: 'default',\n    position: 'relative',\n    display: isDragging ? 'none' : 'block',\n  }\n}\n\nexport default withDragSource(Snippet)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { findDOMNode } from 'react-dom'\nimport { DndContext } from 'react-dnd'\nimport throttle from 'lodash.throttle'\nimport raf from 'raf'\nimport hoist from 'hoist-non-react-statics'\nimport getDisplayName from './snippet-utils'\n\nfunction noop() {}\n\nfunction intBetween(min, max, val) {\n  return Math.floor(Math.min(max, Math.max(min, val)))\n}\n\nfunction getCoords(evt) {\n  if (evt.type === 'touchmove') {\n    return {\n      x: evt.changedTouches[0].clientX,\n      y: evt.changedTouches[0].clientY,\n    }\n  }\n\n  return { x: evt.clientX, y: evt.clientY }\n}\n\nconst DEFAULT_BUFFER = 150\n\nexport function createHorizontalStrength(_buffer) {\n  return function defaultHorizontalStrength({ x, w, y, h }, point) {\n    const buffer = Math.min(w / 2, _buffer)\n    const inRange = point.x >= x && point.x <= x + w\n    const inBox = inRange && point.y >= y && point.y <= y + h\n\n    if (inBox) {\n      if (point.x < x + buffer) {\n        return (point.x - x - buffer) / buffer\n      } else if (point.x > x + w - buffer) {\n        return -(x + w - point.x - buffer) / buffer\n      }\n    }\n\n    return 0\n  }\n}\n\nexport function createVerticalStrength(_buffer) {\n  return function defaultVerticalStrength({ y, h, x, w }, point) {\n    const buffer = Math.min(h / 2, _buffer)\n    const inRange = point.y >= y && point.y <= y + h\n    const inBox = inRange && point.x >= x && point.x <= x + w\n\n    if (inBox) {\n      if (point.y < y + buffer) {\n        return (point.y - y - buffer) / buffer\n      } else if (point.y > y + h - buffer) {\n        return -(y + h - point.y - buffer) / buffer\n      }\n    }\n\n    return 0\n  }\n}\n\nexport const defaultHorizontalStrength = createHorizontalStrength(\n  DEFAULT_BUFFER\n)\n\nexport const defaultVerticalStrength = createVerticalStrength(DEFAULT_BUFFER)\n\nexport default function createScrollingComponent(WrappedComponent) {\n  class ScrollingComponent extends React.Component {\n    static displayName = `Scrolling(${getDisplayName(WrappedComponent)})`\n\n    static propTypes = {\n      onScrollChange: PropTypes.func,\n      verticalStrength: PropTypes.func,\n      horizontalStrength: PropTypes.func,\n      strengthMultiplier: PropTypes.number,\n    }\n\n    static defaultProps = {\n      useScroll: true,\n      onScrollChange: noop,\n      verticalStrength: defaultVerticalStrength,\n      horizontalStrength: defaultHorizontalStrength,\n      strengthMultiplier: 30,\n    }\n\n    static contextType = DndContext\n\n    constructor(props, ctx) {\n      super(props, ctx)\n\n      this.scaleX = 0\n      this.scaleY = 0\n      this.frame = null\n\n      this.attached = false\n      this.dragging = false\n    }\n\n    componentDidMount() {\n      if (this.props.useScroll) {\n        this._initial()\n      }\n    }\n\n    _initial() {\n      // window.document.body.addEventListener('dragover', this.handleEvent);\n      this.container = findDOMNode(this.wrappedInstance)\n      this.container.addEventListener('dragover', this.handleEvent)\n      // touchmove events don't seem to work across siblings, so we unfortunately\n      // have to attach the listeners to the body\n      window.document.body.addEventListener('touchmove', this.handleEvent)\n\n      this.clearMonitorSubscription = this.context.dragDropManager\n        .getMonitor()\n        .subscribeToStateChange(() => this.handleMonitorChange())\n    }\n\n    componentWillUnmount() {\n      if (this.props.useScroll) {\n        this._remove()\n      }\n    }\n\n    _remove() {\n      // window.document.body.removeEventListener('dragover', this.handleEvent);\n      this.container.removeEventListener('dragover', this.handleEvent)\n      window.document.body.removeEventListener('touchmove', this.handleEvent)\n      this.clearMonitorSubscription()\n      this.stopScrolling()\n    }\n\n    handleEvent = evt => {\n      if (this.dragging && !this.attached) {\n        this.attach()\n        this.updateScrolling(evt)\n      }\n    }\n\n    handleMonitorChange() {\n      const isDragging = this.context.dragDropManager.getMonitor().isDragging()\n\n      if (!this.dragging && isDragging) {\n        this.dragging = true\n      } else if (this.dragging && !isDragging) {\n        this.dragging = false\n        this.stopScrolling()\n      }\n    }\n\n    attach() {\n      this.attached = true\n      window.document.body.addEventListener('dragover', this.updateScrolling)\n      window.document.body.addEventListener('touchmove', this.updateScrolling)\n    }\n\n    detach() {\n      this.attached = false\n      window.document.body.removeEventListener('dragover', this.updateScrolling)\n      window.document.body.removeEventListener(\n        'touchmove',\n        this.updateScrolling\n      )\n    }\n\n    // Update scaleX and scaleY every 100ms or so\n    // and start scrolling if necessary\n    updateScrolling = throttle(\n      evt => {\n        const {\n          left: x,\n          top: y,\n          width: w,\n          height: h,\n        } = this.container.getBoundingClientRect()\n        const box = { x, y, w, h }\n        const coords = getCoords(evt)\n\n        // calculate strength\n        this.scaleX = this.props.horizontalStrength(box, coords)\n        this.scaleY = this.props.verticalStrength(box, coords)\n\n        // start scrolling if we need to\n        if (!this.frame && (this.scaleX || this.scaleY)) {\n          this.startScrolling()\n        }\n      },\n      100,\n      { trailing: false }\n    )\n\n    startScrolling() {\n      let i = 0\n      const tick = () => {\n        const { scaleX, scaleY, container } = this\n        const { strengthMultiplier, onScrollChange } = this.props\n\n        // stop scrolling if there's nothing to do\n        if (strengthMultiplier === 0 || scaleX + scaleY === 0) {\n          this.stopScrolling()\n          return\n        }\n\n        // there's a bug in safari where it seems like we can't get\n        // mousemove events from a container that also emits a scroll\n        // event that same frame. So we double the strengthMultiplier and only adjust\n        // the scroll position at 30fps\n        if (i++ % 2) {\n          const {\n            scrollLeft,\n            scrollTop,\n            scrollWidth,\n            scrollHeight,\n            clientWidth,\n            clientHeight,\n          } = container\n\n          const newLeft = scaleX\n            ? (container.scrollLeft = intBetween(\n                0,\n                scrollWidth - clientWidth,\n                scrollLeft + scaleX * strengthMultiplier\n              ))\n            : scrollLeft\n\n          const newTop = scaleY\n            ? (container.scrollTop = intBetween(\n                0,\n                scrollHeight - clientHeight,\n                scrollTop + scaleY * strengthMultiplier\n              ))\n            : scrollTop\n\n          onScrollChange(newLeft, newTop)\n        }\n        this.frame = raf(tick)\n      }\n\n      tick()\n    }\n\n    stopScrolling() {\n      this.detach()\n      this.scaleX = 0\n      this.scaleY = 0\n\n      if (this.frame) {\n        raf.cancel(this.frame)\n        this.frame = null\n      }\n    }\n\n    render() {\n      const {\n        // not passing down these props\n        strengthMultiplier,\n        verticalStrength,\n        horizontalStrength,\n        onScrollChange,\n        ...props\n      } = this.props\n\n      return (\n        <WrappedComponent\n          ref={ref => {\n            this.wrappedInstance = ref\n          }}\n          {...props}\n        />\n      )\n    }\n  }\n\n  return hoist(ScrollingComponent, WrappedComponent)\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport cx from 'classnames'\nimport withScroll, { createVerticalStrength } from './withScroll'\n\ninterface Props {\n  className?: string\n  useScroll?: boolean\n}\n\nconst DndScrollableElement = styled.div`\n  height: 100vh;\n  padding-top: 0;\n  overflow-y: scroll;\n\n  &.is--preview {\n    height: auto;\n  }\n`\n\nconst ScrollableComponent = withScroll(DndScrollableElement)\n\nconst vStrength = createVerticalStrength(150)\n\nexport default class ReactDndProvider extends React.Component<Props> {\n  static defaultProps = {\n    useScroll: true,\n  }\n\n  render() {\n    const { className, useScroll } = this.props\n\n    return (\n      <ScrollableComponent\n        useScroll={useScroll}\n        verticalStrength={vStrength}\n        strengthMultiplier={100}\n        className={cx('report-template-builder', className)}>\n        {this.props.children}\n      </ScrollableComponent>\n    )\n  }\n}\n","import React from 'react'\nimport { ModalProps } from 'antd/lib/modal'\nimport { length, __, gt, keys, map, pathOr } from 'ramda'\nimport Modal from '@/components/modal'\nimport Snippet from '@/components/snippet'\nimport { mapIndexed } from '@/utils/webHelper'\nconst { compose } = require('ramda')\n\ninterface Props extends ModalProps {\n  snippetList?: { [key: string]: any[] }\n}\n\nexport default function SnippetPreviewModal({ onCancel, snippetList }: Props) {\n  return (\n    <Modal\n      visible\n      style={{ top: 30 }}\n      maskClosable={false}\n      className=\"ant-modal-header--border-none\"\n      keyboard={false}\n      width=\"85%\"\n      onCancel={onCancel}\n      footer={false}>\n      {compose(\n        map((key: string) => (\n          <div key={key}>\n            {compose(gt(__, 0), length, pathOr([], [key]))(snippetList) && (\n              <h2 className=\"mb-0\">{key}</h2>\n            )}\n            {compose(\n              mapIndexed((item: any, idx: number) => (\n                <Snippet key={item.id} draggable={false}>\n                  <item.Component\n                    id={item.id}\n                    className={item.id}\n                    item={item}\n                    index={idx}\n                  />\n                </Snippet>\n              )),\n              pathOr([], [key])\n            )(snippetList)}\n          </div>\n        )),\n        keys\n      )(snippetList)}\n    </Modal>\n  )\n}\n","import React from 'react'\nimport { ColumnProps, TableProps, TablePaginationConfig } from 'antd/lib/table'\nimport { SpinProps } from 'antd/lib/spin'\nimport { merge } from 'ramda'\nimport { DataSource } from '@/constants/types'\nimport Table from '@/components/table'\n\ntype Props<T> = Omit<TableProps<T>, 'dataSource'> & {\n  columns: ColumnProps<T>[]\n  className?: string\n  pageNum?: number\n  dataSource: DataSource<T>\n  onChange?: (pagination: TablePaginationConfig) => any\n  loading?: boolean | SpinProps\n  rowSelection?: {\n    selectedRowKeys: any[]\n    onChange: (selectedRowKeys: any, selectedRows: any) => void\n  }\n}\n\nexport default function QueryTable<T>({\n  columns,\n  className,\n  pageNum = 1,\n  dataSource,\n  onChange,\n  loading = false,\n  rowSelection,\n  pagination,\n  ...props\n}: Props<T>) {\n  const handleTableChange = ({ current, pageSize }: TablePaginationConfig) => {\n    if (onChange) {\n      onChange({ current, pageSize })\n    }\n  }\n\n  const paginationConfig = React.useMemo(\n    () =>\n      merge<any, any>(pagination, {\n        current: pageNum,\n        pageSize: 10,\n        total: dataSource.total,\n        showSizeChanger: false,\n      }) as TablePaginationConfig,\n    [dataSource.total, pagination, pageNum]\n  )\n\n  return (\n    <Table\n      rowKey=\"id\"\n      dataSource={dataSource.content}\n      columns={columns as any}\n      pagination={paginationConfig}\n      onChange={handleTableChange}\n      rowSelection={rowSelection}\n      loading={loading}\n      className={className}\n      {...props}\n    />\n  )\n}\n"],"sourceRoot":""}