{"version":3,"sources":["containers/phrase-list/phrase-list.tsx"],"names":["PhraseList","useTitle","useBreadcrumb","name","data","usePhraseList","handleTo","pathname","history","push","_handleRemove","evt","id","currentTarget","dataset","confirm","title","onOk","handleRemove","useRemovePhrase","onCompleted","success","columns","dataIndex","render","v","r","type","onClick","record","replace","routes","align","_","data-id","className","style","minHeight","justify","span","color","rowKey","dataSource"],"mappings":"6ZAiBe,SAASA,IACtBC,YAAS,8CAETC,YAAc,CAAC,CAAEC,KAAM,4BAAU,CAAEA,KAAM,8BAHN,IAK3BC,EAASC,cAATD,KAEFE,EAAW,SAACC,GAAD,OAAsB,WACrCC,IAAQC,KAAKF,KAOTG,EAAgB,SAACC,GACrB,IAAIC,EAAKD,EAAIE,cAAcC,QAAQF,GACnCG,YAAQ,CACNC,MAAO,6CACPC,KAAM,kBAAMC,EAAa,CAAEN,WAnBI,EAuBVO,YAAgB,CACvCC,YAAa,WACX,IAAQC,QAAQ,iDAFXH,EAvB0B,oBA6B7BI,EAAyC,CAC7C,CACEN,MAAO,2BACPO,UAAW,OACXC,OAAQ,SAACC,EAAGC,GAAJ,OACN,kBAAC,IAAD,CAAQC,KAAK,OAAOC,SAvBAC,EAuB0BH,EAvBC,WACnDpB,EAASwB,YAAQ,MAAD,UAAWD,EAAOjB,IAAzBkB,CAA+BC,KAAxCzB,MAuBOmB,GAxBgB,IAACI,IA4BxB,CACEb,MAAO,qBACPO,UAAW,UAEb,CACEP,MAAO,eACPO,UAAW,cAEb,CACEP,MAAO,2BACPO,UAAW,gBAEb,CACEP,MAAO,uCACPO,UAAW,gBAEb,CACEP,MAAO,2BACPO,UAAW,eAEb,CACEP,MAAO,UACPO,UAAW,SACXS,MAAO,SACPR,OAAQ,SAACS,EAAGP,GAAJ,OACN,oCACE,uBAASV,MAAM,gBACb,kBAAC,IAAD,CACEkB,UAASR,EAAEd,GACXuB,UAAU,gCACVP,QAASlB,SAQrB,OACE,kBAAC,IAAD,CAAkByB,UAAU,eAC1B,kBAAC,IAAD,CAAMC,MAAO,CAAEC,UAAW,wBACxB,uBAAKC,QAAQ,UACX,uBAAKC,KAAM,IACT,6BACE,yBAAKJ,UAAU,sCACb,kBAAC,IAAD,CACEK,MAAM,UACNL,UAAU,OACVP,QAAStB,EAASyB,MAHpB,kBAQJ,kBAAC,IAAD,CAAOU,OAAO,KAAKnB,QAASA,EAASoB,WAAYtC","file":"static/js/1.a3cf6e2c.chunk.js","sourcesContent":["import React from 'react'\nimport { replace } from 'ramda'\nimport { Row, Col, Tooltip, message } from 'antd'\nimport { ColumnProps } from 'antd/lib/table'\nimport { DeleteOutlined } from '@ant-design/icons'\nimport { Page } from '@/components/layout'\nimport Button from '@/components/button'\nimport Table from '@/components/query-table'\nimport ReactDndProvider from '@/components/snippet-scrollable-container'\nimport history from '@/utils/history'\nimport { confirm } from '@/utils/message'\nimport useTitle from '@/hooks/useTitle'\nimport { usePhraseList, useRemovePhrase } from '@/services/phrase'\nimport { PhraseTemplate } from '@/constants/types'\nimport { useBreadcrumb } from '@/hooks/useApp'\nimport * as routes from '@/constants/routes'\n\nexport default function PhraseList() {\n  useTitle('結構式報告模版')\n\n  useBreadcrumb([{ name: '報告模版' }, { name: '片語模版' }])\n\n  const { data } = usePhraseList()\n\n  const handleTo = (pathname: string) => () => {\n    history.push(pathname)\n  }\n\n  const handleToEditPage = (record: PhraseTemplate) => () => {\n    handleTo(replace(':id', `${record.id}`)(routes.PHRASE_EDIT))()\n  }\n\n  const _handleRemove = (evt: React.MouseEvent<HTMLElement>) => {\n    let id = evt.currentTarget.dataset.id\n    confirm({\n      title: '確認要刪除嗎？',\n      onOk: () => handleRemove({ id }),\n    })\n  }\n\n  const [, handleRemove] = useRemovePhrase({\n    onCompleted: () => {\n      message.success('片語模版已刪除')\n    },\n  })\n\n  const columns: ColumnProps<PhraseTemplate>[] = [\n    {\n      title: '模版名稱',\n      dataIndex: 'name',\n      render: (v, r) => (\n        <Button type=\"link\" onClick={handleToEditPage(r)}>\n          {v}\n        </Button>\n      ),\n    },\n    {\n      title: '創作者',\n      dataIndex: 'author',\n    },\n    {\n      title: '狀態',\n      dataIndex: 'statusName',\n    },\n    {\n      title: '創作時間',\n      dataIndex: 'createdAtStr',\n    },\n    {\n      title: '上次修改時間',\n      dataIndex: 'updatedAtStr',\n    },\n    {\n      title: '模版描述',\n      dataIndex: 'description',\n    },\n    {\n      title: 'actions',\n      dataIndex: 'delete',\n      align: 'center',\n      render: (_, r) => (\n        <>\n          <Tooltip title=\"刪除\">\n            <DeleteOutlined\n              data-id={r.id}\n              className=\"c-icon text-lg cursor-pointer\"\n              onClick={_handleRemove}\n            />\n          </Tooltip>\n        </>\n      ),\n    },\n  ]\n\n  return (\n    <ReactDndProvider className=\"is--preview\">\n      <Page style={{ minHeight: 'calc(100vh - 203px)' }}>\n        <Row justify=\"center\">\n          <Col span={22}>\n            <div>\n              <div className=\"flex justify-end items-center mb-4\">\n                <Button\n                  color=\"outline\"\n                  className=\"ml-4\"\n                  onClick={handleTo(routes.PHRASE_CREATE)}>\n                  新增\n                </Button>\n              </div>\n            </div>\n            <Table rowKey=\"id\" columns={columns} dataSource={data} />\n          </Col>\n        </Row>\n      </Page>\n    </ReactDndProvider>\n  )\n}\n"],"sourceRoot":""}