{"version":3,"sources":["bootstrap.ts","utils/createPack.tsx","components/error-boundary.tsx","components/exception.tsx","components/loading.tsx","components/breadcrumb.tsx","components/app-header.tsx","containers/home/index.ts","containers/login/index.tsx","app.tsx","serviceWorker.ts","index.tsx","components/checkbox.tsx","components/collapse.ts","theme.ts","components/radio.tsx","utils/history.ts","components/select.tsx","hooks/useApp.ts","constants/item-types.ts","components/datepicker.tsx","utils/message.tsx","components/snippet-utils.tsx","hooks/useAuth.tsx","utils/request.ts","utils/get-display-name.ts","components/report-template-modal.tsx","components/report-template-wrapper.tsx","components/report-template-input-text.tsx","components/input-number.tsx","components/report-template-input-number.tsx","components/editable-table.tsx","components/report-template-selection-modal.tsx","components/report-template-multiple-selection.tsx","components/report-template-single-selection.tsx","components/report-template-date.tsx","components/report-template-time.tsx","components/report-template-select.tsx","components/report-template-section-header.tsx","components/report-template-cloze.tsx","components/report-template-list.tsx","components/snippet-toolbar.tsx","components/withTinyMCE.js","components/snippet.tsx","components/tabs.ts","components/draggable-tabs.js","utils/webHelper.ts","services/reportTemplate.ts","hooks/useTitle.ts","components/layout.tsx","components/modal.tsx","components/table.tsx","components/withScroll.js","components/snippet-scrollable-container.tsx","components/input.tsx","components/app-footer.tsx","../theme.js","hooks/useReportTemplate.ts","constants/enums.ts","services/pathology.ts","containers/report-typing/header.tsx","containers/report-typing/components.tsx","containers/report-typing/autoHeight.tsx","containers/report-typing/report-typing.tsx","containers/report-typing/pie.tsx","containers/report-typing/index.ts","components/snippet-block-placeholder.ts","components/snippets-container.tsx","components/snippet-list-menu-item.tsx","components/snippet-list-menu.tsx","constants/env.ts","utils/form.ts","containers/report-template-editor/index.ts","containers/report-template-list/index.ts","containers/report-inquiry/index.ts","containers/pathol-images-viewer/index.ts","containers/radiol-images-viewer/index.ts","containers/report-list/index.ts","constants/routes.ts","components/button.tsx"],"names":["dayjs","extend","isSameOrBefore","isSameOrAfter","advancedFormat","customParseFormat","weekYear","weekOfYear","isMoment","localeData","badMutable","weekday","locale","pack","children","components","length","Component","rest","React","type","props","ErrorFallbackWrapper","styled","div","ErrorFallback","error","componentStack","resetErrorBoundary","role","className","message","onClick","initialState","info","ErrorBoundary","state","args","onReset","setState","this","onError","prevProps","resetKeys","a","b","some","item","index","Object","is","changedArray","onResetKeysChange","fallbackRender","FallbackComponent","fallback","isValidElement","Error","Exception","ExceptionWrapper","style","backgroundImage","envStore","publicUrl","to","color","Wrapper","memo","justify","Loading3QuartersOutlined","spin","StyledBreadcrumb","AppHeader","useBreadcrumbState","items","content","useHeaderContentValue","useState","history","location","pathname","current","setCurrentPath","handleTo","push","getMenuClassName","targetUrl","cx","includes","Header","Logo","src","alt","mode","borderBottom","lineHeight","MenuItem","key","routes","SettingOutlined","icon","ExportOutlined","marginRight","minWidth","borderColor","separator","minHeight","display","alignItems","Item","HomeOutlined","top","map","x","idx","href","name","p","theme","primary","purple150","lazy","Login","ForgetPassword","LoginRoute","Suspense","exact","path","component","App","isAuthenticated","useAuth","useRoutes","renderRouteItem","useCallback","param","id","title","renderRoute","data","hide","Home","Boolean","window","hostname","match","redirect","EnhancedApp","createPack","initializeState","set","zhTW","value","suspense","fetcher","request","DndProvider","backend","HTML5Backend","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","console","CheckboxGroup","Group","StyledCheckbox","secondary","CheckboxComponent","forwardRef","ref","displayName","StyledCollapse","StyledRadio","darkGrey","RadioComponent","createHashHistory","basename","appBaseName","StyledSelect","SelectComponent","Option","breadcrumbState","atom","default","useRecoilState","useBreadcrumb","setter","useSetRecoilState","useEffect","headerContentState","useHeaderContent","node","useRecoilValue","CARD","BOARD","SNIPPET","borderLess","css","RangePicker","StyledDatePicker","StyledTimePicker","DatePickerComponent","marginTop","marginBottom","confirm","onOk","onCancel","width","okText","cancelText","centered","autoFocusButton","okButtonProps","cancelButtonProps","modalDefaultProps","compose","require","hasClassName","nodes","find","n","isNil","canMoveSnippet","element","elem","parentNode","unshift","getPlaceHolderIndex","clientOffset","overSnippet","findSnippet","classList","contains","parentElement","elementFromPoint","y","snippetIndex","dataset","placeholderIndex","Number","isOverSnippet","padding","renderSnippets","snippetList","mapIndexed","wrapperId","draggable","tabSize","inline","dangerouslySetInnerHTML","__html","html","pathOr","AuthContext","createContext","user","logout","setUser","_","setIsAuthenticated","_user","Cookies","getJSON","AuthProvider","onCompleted","remove","useMemo","Provider","context","useContext","undefined","cond","contentTypeIs","s","ifElse","identity","c","invoker","url","body","headers","errorMsg","options","fullUrl","always","T","apiBaseUrl","fetch","FormData","JSON","stringify","Accept","response","json","ok","Promise","reject","blob","text","err","getDisplayName","TemplateModal","visible","maskClosable","keyboard","footer","StyledCard","TemplateWrapper","onDelete","onEdit","titleVisible","bodyVisible","useReportPreview","isPreview","FontColorsOutlined","InputTextModal","useForm","form","validateFields","values","createFormItemLayout","labelAlign","initialValues","label","valuePropName","StyledInputNumber","attrs","min","ThousandSeprartorInput","thosandSeprartor","CurrencyInput","currency","PercentInput","percent","InputNumberModal","EditableTable","onChange","onRowAdd","onRowDelete","triggerChange","changedValue","rowKey","pagination","size","dataSource","onAddRowClick","onDeleteRowClick","editable","defaultValue","uuid","selected","freetext","TemplateSelectionModal","columns","v","r","noStyle","align","concat","__","filter","ReportTemplateMultipleSelection","editModalVisible","handleEditModalVisible","onUpdate","useUpdateSnippet","setting","handleOk","bodyStyle","paddingLeft","defaultChecked","bordered","placeholder","ReportTemplateSingleSelection","InputDateModal","allowClear","picker","InputTimeModal","format","ReportTemplateCloze","reportTemplateList","componentType","BoldOutlined","FontSizeOutlined","inputProps","tooltip","multipleLine","autoSize","minRows","NumberOutlined","max","formatter","units","DatabaseOutlined","UnorderedListOutlined","TemplateMultipleSelection","OrderedListOutlined","TemplateSingleSelection","CalendarOutlined","ClockCircleOutlined","Cloze","reportTemplateById","mergeAll","ToolbarWrapper","SHIFT_TYPES","SnippetToolbar","tabIndex","onShift","handleShift","shift","LeftOutlined","RightOutlined","EditOutlined","DeleteOutlined","defaultConfig","block_formats","menubar","external_plugins","custom_format","utils","component_plugin","fontsize_formats","force_br_newlines","force_p_newlines","forced_root_block","plugins","tinymce","link_title","table_toolbar","textcolor_cols","content_security_policy","allow_unsafe_link_target","relative_urls","convert_urls","valid_elements","valid_children","toolbar1","withDragSource","DragSource","ItemTypes","beginDrag","fromMenu","originalIndex","canDrag","connect","monitor","connectDragSource","dragSource","connectDragPreview","dragPreview","isDragging","Snippet","componentDidMount","getEmptyImage","shiftSnippet","handleRemove","removeSnippet","prev","_onMouseOver","_onMouseOut","styles","mergeRight","isFocus","borderRadius","border","outlineColor","cursor","position","marginLeft","getItemStyles","onMouseOver","onMouseOut","data-index","Children","child","cloneElement","ComposedComponent","withTinyMCE","editor","toolbarMouseOver","toolbarVisible","initialize","snippet","_get","_config","clone","config","init","selector","language_url","setup","on","e","onEditorBlur","onEditorFocus","Function","execInit","setContent","init_instance_callback","undoManager","add","log","offsetTop","onBlur","get","prevState","equals","defaultProps","hoist","bg","TabNode","connectDropTarget","isOver","draggingItem","moveTabNode","withDropTarget","DropTarget","drop","dragKey","getItem","hoverKey","dropTarget","WrapTabNode","DraggableTabs","order","newOrder","slice","forEach","indexOf","dragIndex","hoverIndex","splice","renderTabBar","DefaultTabBar","TabPane","Tabs","addIndex","isEmpty","either","RisNil","not","d","Date","now","performance","replace","Math","random","floor","toString","getNumberFromString","str","isEnvDev","appUrl","useAddNewTemplate","useReportTemplateState","reportTemplates","setReportTemplates","handler","newList","createdAt","moment","createdAtStr","updatedAt","updatedAtStr","store","useUpdateTemplate","findIndex","update","useAddNewReport","useReportList","reportList","setReportList","useUpdateReport","DEFAULT_USE_TITLE_OPTIONS","restoreOnUnmount","prevTitleRef","useRef","appTitle","_title","background","borderTopLeftRadius","borderTopRightRadius","Page","Content","StyledModal","ModalComponent","success","StyledTable","TableComponent","isRowDeletable","isCanEdit","_columns","canEdit","placement","emptyText","image","PRESENTED_IMAGE_SIMPLE","description","Column","noop","intBetween","val","createVerticalStrength","_buffer","point","h","w","buffer","defaultHorizontalStrength","defaultVerticalStrength","ScrollableComponent","WrappedComponent","ScrollingComponent","ctx","handleEvent","evt","dragging","attached","attach","updateScrolling","throttle","container","getBoundingClientRect","box","left","height","coords","changedTouches","clientX","clientY","getCoords","scaleX","horizontalStrength","scaleY","verticalStrength","frame","startScrolling","trailing","useScroll","_initial","findDOMNode","wrappedInstance","addEventListener","clearMonitorSubscription","dragDropManager","getMonitor","subscribeToStateChange","handleMonitorChange","_remove","removeEventListener","stopScrolling","i","tick","strengthMultiplier","onScrollChange","scrollLeft","scrollTop","scrollWidth","scrollHeight","clientWidth","clientHeight","raf","detach","cancel","contextType","DndContext","withScroll","vStrength","ReactDndProvider","StyledInput","TextArea","AppFooter","Footer","module","exports","danger","cornblue","comet","btn","sider","snippetCategoryOfReport","PATHOLOGICAL_DIAGNOSIS","GROSS","MICROSCOPY","NOTES","REFERENCES","setComponent","keys","fakeReportTemplateList","Store","defaultSnippetsOfReport","reportTemplateListState","reportPreviewState","selectorFamily","categoryState","head","reportListState","useReportTemplates","total","useReportTemplate","reportTemplate","setReportTemplate","_snippetList","setSnippetList","category","setCategory","handleTabAdd","last","inc","Rlast","sort","handleTabRemove","targetKey","omit","snippetById","handleTabEdit","action","handleTabChange","activeKey","handleTabMove","snippetKeys","orderA","orderB","handleTabNameChange","newTabName","target","innerHTML","handleSnippetUpdate","flatten","setIsPreview","useToggleReportPreview","setSetting","ActionTypes","reportAnnotations","menuState","StyledAnchor","PieChart","chartWidth","legendWidth","leftContentVisible","rightContentVisible","onLayoutChange","dropdownMatchSelectWidth","dropdownStyle","autoFocus","onSelect","VISIBLE_LEFT","CheckOutlined","VISIBLE_RIGHT","RADIOL_IMAGE","join","dropLast","split","open","REPORT_INQUIRY","computeHeight","parseInt","getComputedStyle","paddingTop","paddingBottom","autoHeight","computedHeight","root","handleRoot","getAutoHeight","ReactFitText","DataView","Pie","legendData","legendBlock","requestRef","chart","getG2Instance","requestAnimationFrame","getLegendData","resize","geom","getAllGeoms","origin","_origin","checked","handleLegendClick","newItem","filteredLegendData","l","Debounce","hasLegend","passive","preProps","cancelAnimationFrame","formatColor","valueFormat","subTitle","forceFit","inner","animate","colors","lineWidth","pieClassName","classNames","propsData","propsSelected","defaultColors","parseFloat","dv","source","transform","field","dimension","as","maxFontSize","scale","range","onGetG2Instance","showTitle","innerRadius","stroke","toFixed","backgroundColor","isNaN","PureComponent","Link","Anchor","col","whiteSpace","getAnchorStyles","affixed","borderBottomLeftRadius","borderBottomRightRadius","ReportTyping","useTitle","reviewDoctor","serialNo","useSwr","method","classification","noType","no","others","usePathology","selectedKeys","setSelectedKeys","setCurrentId","payload","setIsAffixed","percentage","setPercentage","handleValuesChange","round","getFieldsValue","colSpan","onValuesChange","gutter","span","defaultActiveKey","expandIcon","Panel","header","showInkInFixed","affix","link","preventDefault","scroll","behavior","tabBarGutter","closable","tab","contentEditable","suppressContentEditableWarning","spellCheck","onSnippetUpdate","gt","renderCategory","ORREQNO","ORWORKNO","HNAMEC","HSEX","CSECT","HHISNUM","HBED","HBIRTHDT","ORPROCED","canDrop","handleSnippetDrop","handleSnippetMove","getClientOffset","hover","hoverBoundingRect","hoverMiddleY","bottom","didDrop","SnippetsContainer","atIndex","handleFindSnippet","isPlaced","droppedItem","nextIndex","insert","handleSnippetRemove","handleSnippetShift","lt","isPlaceHold","cardList","withRouter","endDrag","SnippetListMenuItem","SnippetListMenuWrapper","comp","SnippetListMenu","pageSize","process","REACT_APP_API_ROOT","REACT_APP_TITLE","protocol","host","REACT_APP_FAKE_API_ROOT","createElement","wrapper","labelCol","xs","sm","wrapperCol","parser","rules","required","number","account","pattern","RegExp","password","REPORT_TEMPLATE_LIST","REPORT_TEMPLATE_EDIT","REPORT_TEMPLATE_CREATE","REPORT_LIST","PatholImagesViewer","RadiolImagesViewer","ReportList","ReportInquiry","ReportTemplateList","ReportTemplateBuilder","StyledButton","ButtonComponent","loading","actionType"],"mappings":"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","file":"static/js/main.73c05b91.chunk.js","sourcesContent":["import dayjs from 'dayjs'\nimport customParseFormat from 'dayjs/plugin/customParseFormat'\nimport weekOfYear from 'dayjs/plugin/weekOfYear'\nimport weekday from 'dayjs/plugin/weekday'\nimport isMoment from 'dayjs/plugin/isMoment'\nimport badMutable from 'dayjs/plugin/badMutable'\nimport localeData from 'dayjs/plugin/localeData'\nimport advancedFormat from 'dayjs/plugin/advancedFormat'\nimport weekYear from 'dayjs/plugin/weekYear'\nimport isSameOrBefore from 'dayjs/plugin/isSameOrBefore'\nimport isSameOrAfter from 'dayjs/plugin/isSameOrAfter'\nimport 'dayjs/locale/zh-tw'\n\ndayjs.extend(isSameOrBefore)\ndayjs.extend(isSameOrAfter)\ndayjs.extend(advancedFormat)\ndayjs.extend(customParseFormat)\ndayjs.extend(weekYear)\ndayjs.extend(weekOfYear)\ndayjs.extend(isMoment)\ndayjs.extend(localeData)\ndayjs.extend(badMutable)\ndayjs.extend(weekday)\n\ndayjs.locale('zh-tw')\n","import * as React from 'react'\n\nexport interface WithChildrenProps {\n  children: React.ReactNode\n}\n\nexport type PackComponentType<\n  T extends WithChildrenProps = WithChildrenProps\n> = React.ElementType<T>\n\nexport function pack(\n  children: React.ReactNode = null,\n  ...components: PackComponentType[]\n) {\n  if (!components.length) {\n    return children as JSX.Element\n  }\n\n  const [Component, ...rest] = components\n\n  if (React.isValidElement(Component)) {\n    return (\n      <Component.type {...Component.props}>\n        {pack(children, ...rest)}\n      </Component.type>\n    )\n  }\n\n  return <Component>{pack(children, ...rest)}</Component>\n}\n\nexport function createPack(...components: any[]) {\n  return function PackComponent({ children }: WithChildrenProps) {\n    return pack(children, ...components)\n  }\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport Button from '@/components/button'\n\ntype ErrorInfo = {\n  componentStack: string\n}\n\ntype FallbackProps = {\n  error?: Error\n  componentStack?: string\n  resetErrorBoundary: () => void\n}\n\ntype ErrorBoundaryProps = {\n  onResetKeysChange?: (\n    prevResetKeys: Array<any> | undefined,\n    resetKeys: Array<any> | undefined\n  ) => void\n  onReset?: (...args: any) => void\n  onError?: (error: Error, componentStack: string) => void\n  resetKeys?: Array<any>\n  FallbackComponent?: React.ComponentType<FallbackProps>\n  fallbackRender?: (props: FallbackProps) => React.ReactElement<any, any> | null\n  fallback?: React.ReactElement<any, any> | null\n}\n\ntype ErrorBoundaryState = {\n  hasError?: boolean\n  error?: Error | null\n  info?: ErrorInfo | null\n}\n\nconst ErrorFallbackWrapper = styled.div`\n  width: 100%;\n  height: 100vh;\n  margin: 0 auto;\n  padding: 50px;\n`\n\nfunction ErrorFallback({\n  error,\n  componentStack,\n  resetErrorBoundary,\n}: FallbackProps) {\n  return (\n    <ErrorFallbackWrapper role=\"alert\">\n      <p className=\"text-xl\">Something went wrong:</p>\n      <pre className=\"text-sm\">{error?.message}</pre>\n      <pre className=\"text-sm\">{componentStack}</pre>\n      <Button onClick={resetErrorBoundary}>Try again</Button>\n    </ErrorFallbackWrapper>\n  )\n}\n\nconst changedArray = (a: any[] | undefined = [], b: any[] | undefined = []) =>\n  a.length !== b.length || a.some((item, index) => !Object.is(item, b[index]))\n\nconst initialState = { error: null, info: null }\nexport default class ErrorBoundary extends React.Component<\n  ErrorBoundaryProps,\n  ErrorBoundaryState\n> {\n  state: ErrorBoundaryState = initialState\n\n  resetErrorBoundary = (...args: any) => {\n    this.props.onReset?.(...args)\n    this.setState(initialState)\n  }\n\n  componentDidCatch(error: Error, info: ErrorInfo) {\n    this.props.onError?.(error, info?.componentStack)\n    this.setState({ error, info })\n  }\n\n  componentDidUpdate(prevProps: ErrorBoundaryProps) {\n    const { error } = this.state\n    const { resetKeys } = this.props\n    if (error !== null && changedArray(prevProps.resetKeys, resetKeys)) {\n      this.props.onResetKeysChange?.(prevProps.resetKeys, resetKeys)\n      this.setState(initialState)\n    }\n  }\n\n  render() {\n    const { error, info } = this.state\n    const {\n      fallbackRender,\n      FallbackComponent = ErrorFallback,\n      fallback,\n    } = this.props\n\n    if (error !== null) {\n      const props = {\n        componentStack: info?.componentStack,\n        error,\n        resetErrorBoundary: this.resetErrorBoundary,\n      }\n      if (React.isValidElement(fallback)) {\n        return fallback\n      } else if (typeof fallbackRender === 'function') {\n        return fallbackRender(props)\n      } else if (FallbackComponent) {\n        return <FallbackComponent {...props} />\n      } else {\n        throw new Error(\n          'react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop'\n        )\n      }\n    }\n\n    return this.props.children\n  }\n}\n\nfunction withErrorBoundary<P>(\n  Component: React.ComponentType<P>,\n  errorBoundaryProps: ErrorBoundaryProps\n) {\n  function Wrapped(props: any) {\n    return (\n      <ErrorBoundary {...errorBoundaryProps}>\n        <Component {...props} />\n      </ErrorBoundary>\n    )\n  }\n\n  // Format for display in DevTools\n  const name = Component.displayName || Component.name || 'Unknown'\n  Wrapped.displayName = `withErrorBoundary(${name})`\n\n  return Wrapped\n}\n\nfunction useErrorHandler<P = Error>(givenError?: P) {\n  const [error, setError] = React.useState(null)\n  if (givenError) throw givenError\n  if (error) throw error\n  return setError\n}\n\nexport { ErrorBoundary, withErrorBoundary, useErrorHandler }\n","import React from 'react'\nimport { Link } from 'react-router-dom'\nimport styled from 'styled-components'\nimport Button from '@/components/button'\nimport { envStore } from '@/constants/env'\n\ntype Props = {\n  type?: number | string | 404\n}\n\nexport default function Exception({ type = 404 }: Props) {\n  return (\n    <ExceptionWrapper>\n      <div className=\"exception\">\n        <div className=\"exception__imgBlock\">\n          <div\n            className=\"exception__imgEle\"\n            style={{\n              backgroundImage: `url(\"${envStore.publicUrl}/images/${type}.svg\")`,\n            }}\n          />\n        </div>\n        <div className=\"exception__content\">\n          <h1>404</h1>\n          <div className=\"exception__desc\">抱歉，你訪問的頁面不存在</div>\n          <div className=\"exception__actions\">\n            <Link to=\"/\">\n              <Button color=\"primary\">回首頁</Button>\n            </Link>\n          </div>\n        </div>\n      </div>\n    </ExceptionWrapper>\n  )\n}\n\nconst ExceptionWrapper = styled.div`\n  height: 100%;\n  margin-right: -24px;\n  background: #f9f9fb;\n  border-radius: 4px;\n\n  .exception {\n    display: flex;\n    align-items: center;\n    height: 100%;\n  }\n\n  .exception .exception__imgBlock {\n    flex: 0 0 62.5%;\n    width: 62.5%;\n    padding-right: 152px;\n    zoom: 1;\n  }\n\n  .exception .exception__imgEle {\n    float: right;\n    width: 100%;\n    max-width: 430px;\n    height: 360px;\n    background-repeat: no-repeat;\n    background-position: 50% 50%;\n    background-size: contain;\n  }\n\n  .exception .exception__content {\n    flex: auto;\n  }\n\n  .exception .exception__content h1 {\n    margin-bottom: 24px;\n    color: #434e59;\n    font-weight: 600;\n    font-size: 72px;\n    line-height: 72px;\n  }\n\n  .exception .exception__content .exception__desc {\n    margin-bottom: 24px;\n    color: rgba(0, 0, 0, 0.45);\n    font-size: 20px;\n    line-height: 28px;\n  }\n`\n","import React from 'react'\nimport styled from 'styled-components'\nimport { Row, Col } from 'antd'\nimport { Loading3QuartersOutlined } from '@ant-design/icons'\n\ntype PropTypes = {\n  className?: string\n  style?: React.CSSProperties\n}\n\nconst Wrapper = styled.div`\n  .ant-spin {\n    &--inner {\n      margin: 0 auto;\n    }\n  }\n`\n\nexport function Loading(props: PropTypes) {\n  return <Loading3QuartersOutlined {...props} />\n}\n\nexport default React.memo(function Loading({\n  className,\n  style,\n  ...props\n}: PropTypes) {\n  return (\n    <Wrapper className=\"bg-greyF9\">\n      <Row justify=\"center\" className={className}>\n        <Col className=\"ant-spin--inner\">\n          <Loading3QuartersOutlined spin style={style} />\n        </Col>\n      </Row>\n    </Wrapper>\n  )\n})\n","import { Breadcrumb } from 'antd'\nimport styled from 'styled-components'\n\nconst StyledBreadcrumb = styled(Breadcrumb)`\n  &.ant-breadcrumb {\n    font-size: 16px;\n\n    .ant-breadcrumb-link {\n      cursor: pointer;\n    }\n\n    .ant-breadcrumb-link,\n    a {\n      color: #fff;\n    }\n\n    .anticon {\n      font-size: 16px;\n    }\n\n    .ant-breadcrumb-link:hover,\n    a:hover {\n      text-decoration: underline;\n    }\n\n    .ant-breadcrumb-separator {\n      margin: 0 16px;\n      color: #fff;\n    }\n\n    > span:last-child {\n      color: #fff;\n      text-decoration: underline;\n    }\n  }\n`\n\nexport default StyledBreadcrumb\n","import React from 'react'\nimport cx from 'classnames'\nimport { Layout, Avatar, Menu } from 'antd'\nimport {\n  SettingOutlined,\n  ExportOutlined,\n  HomeOutlined,\n} from '@ant-design/icons'\nimport styled from 'styled-components'\nimport Button from '@/components/button'\nimport Breadcrumb from '@/components/breadcrumb'\nimport { useBreadcrumbState, useHeaderContentValue } from '@/hooks/useApp'\nimport history from '@/utils/history'\nimport { envStore } from '@/constants/env'\nimport * as routes from '@/constants/routes'\n\nexport default function AppHeader() {\n  const [items] = useBreadcrumbState()\n  const content = useHeaderContentValue()\n\n  const [current, setCurrentPath] = React.useState(history.location.pathname)\n\n  const handleTo = (pathname?: string) => () => {\n    if (pathname) {\n      setCurrentPath(pathname)\n      history.push(pathname)\n    }\n  }\n\n  const getMenuClassName = (targetUrl: string) => {\n    return cx({ 'is--current': current !== '/' && targetUrl.includes(current) })\n  }\n\n  return (\n    <Header>\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center\">\n          <Logo onClick={handleTo('/')}>\n            <img\n              src={`${envStore.publicUrl}/images/logo-sm@2x.png`}\n              alt=\"app-logo\"\n              className=\"cursor-pointer\"\n            />\n          </Logo>\n          <Menu\n            mode=\"horizontal\"\n            className=\"bg-transparent ml-3\"\n            style={{ borderBottom: 'none', lineHeight: '46px' }}>\n            <MenuItem\n              key={routes.REPORT_LIST}\n              onClick={handleTo(routes.REPORT_LIST)}\n              className={getMenuClassName(routes.REPORT_LIST)}>\n              <div className=\"flex items-center text-lg\">\n                <SettingOutlined />\n                清單查詢\n              </div>\n            </MenuItem>\n            <MenuItem\n              key={routes.REPORT_INQUIRY}\n              onClick={handleTo(routes.REPORT_INQUIRY)}\n              className={getMenuClassName(routes.REPORT_INQUIRY)}>\n              <div className=\"flex items-center text-lg\">\n                <SettingOutlined />\n                輸入報告\n              </div>\n            </MenuItem>\n            <MenuItem\n              key={routes.REPORT_TEMPLATE_LIST}\n              onClick={handleTo(routes.REPORT_TEMPLATE_LIST)}\n              className={getMenuClassName(routes.REPORT_TEMPLATE_LIST)}>\n              <div className=\"flex items-center text-lg\">\n                <SettingOutlined />\n                結構式報告\n              </div>\n            </MenuItem>\n            <MenuItem\n              key=\"outside\"\n              onClick={handleTo(routes.REPORT_TEMPLATE_EDIT)}\n              className={getMenuClassName('outside')}>\n              <div className=\"flex items-center text-lg\">\n                <SettingOutlined />\n                醫學影像教學平台\n              </div>\n            </MenuItem>\n          </Menu>\n        </div>\n        <div className=\"flex items-center\">\n          <div className=\"text-white text-lg mr-4\">Hi, 使用者</div>\n          <Avatar className=\"flex items-center h-12 w-12\">\n            <div className=\"text-2xl\">C</div>\n          </Avatar>\n          <Button\n            icon={\n              <ExportOutlined\n                className=\"text-white text-2xl\"\n                style={{ marginRight: 0 }}\n              />\n            }\n            className=\"ml-4 bg-transparent border border-white rounded pr-1 hover--none\"\n            style={{ minWidth: 35, borderColor: '#fff' }}\n          />\n        </div>\n      </div>\n      <div className=\"mt-3 ml-4 pb-0 flex justify-between\">\n        <Breadcrumb\n          separator=\">\"\n          style={{ minHeight: 32, display: 'flex', alignItems: 'center' }}>\n          <Breadcrumb.Item onClick={handleTo('/')}>\n            <HomeOutlined className=\"relative\" style={{ top: -4 }} />\n          </Breadcrumb.Item>\n          {items.map((x, idx) => (\n            <Breadcrumb.Item\n              key={`breadcrumb-${idx}`}\n              onClick={handleTo(x.href)}>\n              {x.name}\n            </Breadcrumb.Item>\n          ))}\n        </Breadcrumb>\n        {content}\n      </div>\n    </Header>\n  )\n}\n\nconst Header = styled(Layout.Header)`\n  &.ant-layout-header {\n    height: auto;\n    padding: 16px 1.7rem 10px 2.1rem;\n    background: ${p => `linear-gradient(-90deg, #42c2b8, ${p.theme.primary})`};\n    color: ${p => p.theme.primary};\n    box-shadow: 0 0 20px ${p => p.theme.purple150};\n  }\n\n  .anticon {\n    cursor: pointer;\n  }\n`\n\nconst MenuItem = styled(Menu.Item)`\n  &.ant-menu-item {\n    margin: 0 5px !important;\n    padding: 0 15px !important;\n    border-radius: 6px;\n    border-bottom: none !important;\n    color: #fff;\n\n    &.is--current,\n    &:hover {\n      color: #fff !important;\n      background: rgba(24, 144, 138, 1) !important;\n    }\n  }\n\n  &.ant-menu-item-selected {\n    color: #fff !important;\n  }\n`\n\nconst Logo = styled.div``\n","import React from 'react'\n\nexport default React.lazy(() => import('./home'))\n","import React from 'react'\nimport { Route, Switch } from 'react-router-dom'\nimport Loading from '@/components/loading'\n\nconst Login = React.lazy(() => import('./login'))\n\nconst ForgetPassword = React.lazy(() => import('./forget-password'))\n\nexport default function LoginRoute() {\n  return (\n    <React.Suspense fallback={<Loading />}>\n      <Switch>\n        <Route exact path=\"/\" component={Login} />\n        <Route path=\"/login\" component={Login} />\n        <Route path=\"/forget-password\" component={ForgetPassword} />\n      </Switch>\n    </React.Suspense>\n  )\n}\n","import React from 'react'\nimport { Switch, Route } from 'react-router-dom'\nimport { Layout } from 'antd'\nimport ErrorBoundary from '@/components/error-boundary'\nimport Exception from '@/components/exception'\nimport Loading from '@/components/loading'\nimport AppHeader from '@/components/app-header'\nimport { useRoutes, RouteItem } from '@/constants/routes'\nimport Home from '@/containers/home'\nimport Login from '@/containers/login'\nimport useAuth from '@/hooks/useAuth'\n\nfunction App() {\n  const { isAuthenticated } = useAuth()\n\n  const routes = useRoutes()\n\n  const renderRouteItem = React.useCallback((item: RouteItem) => {\n    const path = `${item.path}${item.param ? `/${item.param}` : ''}`\n\n    return (\n      <Route\n        exact\n        key={item.id}\n        path={path}\n        component={\n          item.component ? item.component : () => <h1> {item.title} </h1>\n        }\n      />\n    )\n  }, [])\n\n  const renderRoute: any = React.useCallback(\n    (data: RouteItem[]) => {\n      return data.map((item: RouteItem) => {\n        return [\n          renderRouteItem(item),\n          item.children && renderRoute(item.children),\n          item.hide && renderRoute(item.hide),\n        ]\n      })\n    },\n    [renderRouteItem]\n  )\n\n  return (\n    <ErrorBoundary>\n      {!isAuthenticated && <Login />}\n      {isAuthenticated && (\n        <Layout>\n          <AppHeader />\n          <React.Suspense fallback={<Loading />}>\n            <Switch>\n              <Route exact path=\"/\" component={Home} />\n              {renderRoute(routes)}\n              <Route component={Exception} />\n            </Switch>\n          </React.Suspense>\n        </Layout>\n      )}\n    </ErrorBoundary>\n  )\n}\n\nexport default App\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import './bootstrap'\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport { Router } from 'react-router-dom'\nimport { DndProvider } from 'react-dnd'\nimport { HTML5Backend } from 'react-dnd-html5-backend'\nimport { RecoilRoot, MutableSnapshot } from 'recoil'\nimport { ConfigProvider } from 'antd'\nimport zhTW from 'antd/lib/locale/zh_TW'\nimport { ThemeProvider } from 'styled-components'\nimport { SWRConfig } from 'swr'\nimport request from '@/utils/request'\nimport history from '@/utils/history'\nimport { createPack } from '@/utils/createPack'\nimport { redirect } from '@/utils/webHelper'\nimport { AuthProvider } from '@/hooks/useAuth'\nimport App from './app'\nimport theme from './theme'\nimport * as serviceWorker from './serviceWorker'\nimport './index.css'\n\nredirect()\n\nconst initializeState = ({ set }: MutableSnapshot) => {\n  // set('reportTemplateListState', Store.get('reportTemplateListState'))\n  // for(const [key, value] of Storage.entries()) {\n  //   set(myLookupOfAtomWithKey(key), JSON.parse(value).value);\n  // }\n}\n\nconst EnhancedApp = createPack(\n  <RecoilRoot initializeState={initializeState} />,\n  <ThemeProvider theme={theme} />,\n  <ConfigProvider locale={zhTW} />,\n  <AuthProvider />,\n  <SWRConfig value={{ suspense: true, fetcher: request }} />,\n  <DndProvider backend={HTML5Backend} />,\n  <Router history={history} />\n)\n\n// ReactDOM.unstable_createRoot(document.getElementById('root') as any).render(\n//   <EnhancedApp>\n//     <App />\n//   </EnhancedApp>\n// )\nReactDOM.render(\n  <EnhancedApp>\n    <App />\n  </EnhancedApp>,\n  document.getElementById('root')\n)\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister()\n","import React from 'react'\nimport { Checkbox } from 'antd'\nimport { CheckboxProps } from 'antd/lib/checkbox'\nimport styled from 'styled-components'\nimport { RefProps } from '@/constants/types'\n\nconst CheckboxGroup = Checkbox.Group\n\nconst StyledCheckbox = styled(Checkbox)`\n  .ant-checkbox-checked .ant-checkbox-inner {\n    background-color: ${p => p.theme.primary};\n    border-color: ${p => p.theme.primary};\n  }\n\n  &.ant-checkbox-wrapper:hover .ant-checkbox-inner,\n  .ant-checkbox:hover .ant-checkbox-inner,\n  .ant-checkbox-input:focus + .ant-checkbox-inner {\n    border-color: ${p => p.theme.primary};\n  }\n\n  .ant-checkbox-checked .ant-checkbox-inner:after {\n    border: 2px solid #fff;\n    border-top: 0;\n    border-left: 0;\n  }\n\n  .ant-checkbox-inner {\n    border: 1px solid ${p => p.theme.secondary};\n  }\n\n  &.is--normal {\n    font-size: 14px !important;\n    font-weight: normal !important;\n  }\n`\n\ntype Props = RefProps & CheckboxProps\n\nconst CheckboxComponent: React.ElementType<Props> = React.forwardRef<\n  typeof StyledCheckbox,\n  Props\n>(({ ...props }, ref) => <StyledCheckbox forwardRef={ref} {...props} />)\n\nCheckboxComponent.displayName = 'Checkbox'\n\nexport { CheckboxComponent as Checkbox, CheckboxGroup }\n\nexport default CheckboxComponent\n","import { Collapse } from 'antd'\nimport styled from 'styled-components'\n\nconst borderRadius = '8px'\n\nconst StyledCollapse = styled(Collapse)`\n  &.ant-collapse {\n    border-radius: ${borderRadius};\n    border-bottom: none;\n\n    > .ant-collapse-item > .ant-collapse-header {\n      padding-left: 0;\n      background: ${p => p.theme.primary};\n      color: #fff;\n    }\n\n    &.header-pl-clear > .ant-collapse-item > .ant-collapse-header {\n      padding-left: 16px;\n    }\n\n    > .ant-collapse-item:first-child > .ant-collapse-header {\n      border-top-left-radius: ${borderRadius};\n      border-top-right-radius: ${borderRadius};\n    }\n\n    > .ant-collapse-item:last-child {\n      border-bottom: none;\n    }\n\n    > .ant-collapse-item:last-child > .ant-collapse-content {\n      border-bottom-left-radius: ${borderRadius};\n      border-bottom-right-radius: ${borderRadius};\n    }\n\n    > .ant-collapse-item.ant-collapse-item-active:last-child {\n      border-bottom: 1px solid #d9d9d9;\n    }\n\n    > .ant-collapse-item:not(.ant-collapse-item-active):last-child\n      > .ant-collapse-header {\n      border-bottom-left-radius: ${borderRadius};\n      border-bottom-right-radius: ${borderRadius};\n    }\n  }\n`\n\nexport default StyledCollapse\n","export { default } from '../theme'\n","import React from 'react'\nimport { Radio } from 'antd'\nimport { RadioProps } from 'antd/lib/radio'\nimport styled from 'styled-components'\n\nconst StyledRadio = styled(Radio)`\n  &.ant-radio-wrapper {\n    color: ${p => p.theme.darkGrey};\n\n    span.ant-radio + * {\n      padding-left: 16px;\n    }\n\n    .ant-radio-inner,\n    .ant-radio-checked .ant-radio-inner {\n      border-color: ${p => p.theme.primary};\n    }\n\n    .ant-radio-inner::after {\n      background: ${p => p.theme.primary};\n    }\n\n    &:hover,\n    .ant-radio:hover .ant-radio-inner,\n    .ant-radio-input:focus + .ant-radio-inner {\n      border-color: ${p => p.theme.primary};\n    }\n  }\n`\n\ninterface Props extends RadioProps {\n  css?: React.CSSProperties\n}\n\nclass RadioComponent extends React.Component<Props, any> {\n  public static Group = Radio.Group\n\n  public static displayName = 'Radio'\n\n  public render() {\n    return <StyledRadio {...this.props} />\n  }\n}\n\nexport default RadioComponent\n","import { History, createHashHistory } from 'history'\nimport { envStore } from '@/constants/env'\n\nconst history = createHashHistory({ basename: envStore.appBaseName })\n\nexport default history as NonNullable<History>\n","import React from 'react'\nimport { Select } from 'antd'\nimport { SelectProps } from 'antd/lib/select'\nimport styled from 'styled-components'\n\nconst StyledSelect: any = styled(Select)`\n  &.ant-select {\n    &.ant-select-single:not(.ant-select-customize-input) .ant-select-selector,\n    .ant-select-selection:hover,\n    .ant-select-selection:active,\n    .ant-select-selection:focus {\n      border-color: ${p => p.theme.primary};\n    }\n\n    .ant-select-selection {\n      border-color: ${p => p.theme.secondary};\n    }\n\n    .ant-select-selection:active,\n    .ant-select-selection:focus {\n      box-shadow: none;\n    }\n\n    .ant-select-arrow {\n      color: ${p => p.theme.primary};\n    }\n\n    .ant-select-arrow-icon {\n      position: relative;\n      top: -1px;\n      font-size: 14px;\n    }\n\n    &.ant-select-borderless .ant-select-selector {\n      position: relative;\n      bottom: 1px;\n      border: 0;\n      border-bottom: 1px solid ${p => p.theme.primary} !important;\n      border-bottom-left-radius: 0;\n      border-bottom-right-radius: 0;\n    }\n  }\n\n  &.ant-select.is--outline {\n    > .ant-select-selector {\n      background: transparent;\n      border: 1px solid #fff;\n      color: #fff;\n\n      &:active,\n      &:focus,\n      &:hover {\n        border: 1px solid #fff;\n      }\n    }\n\n    .ant-select-selection-placeholder,\n    .ant-select-arrow {\n      color: #fff;\n    }\n\n    .ant-select-selection-placeholder {\n      opacity: 1;\n      left: 30%;\n    }\n  }\n\n  &.ant-select.is--transparent {\n    &.ant-select-focused > .ant-select-selector {\n      border: 1px solid #666a8f;\n    }\n\n    > .ant-select-selector {\n      background: transparent;\n      border: 1px solid #666a8f;\n      color: #a9b6d8;\n\n      &:active,\n      &:focus,\n      &:hover {\n        border: 1px solid #666a8f;\n      }\n    }\n\n    .ant-select-arrow {\n      color: #a9b6d8;\n    }\n  }\n`\n\nclass SelectComponent<T = any> extends React.Component<SelectProps<T>, any> {\n  public static Option = Select.Option\n\n  public static displayName = 'Select'\n\n  render() {\n    return <StyledSelect {...this.props}>{this.props.children}</StyledSelect>\n  }\n}\n\nexport default SelectComponent\n","import React from 'react'\nimport { atom, useRecoilState, useRecoilValue, useSetRecoilState } from 'recoil'\n\ntype BreadcrumbItem = {\n  href?: string\n  name: string\n}\n\nexport const breadcrumbState = atom<BreadcrumbItem[]>({\n  key: 'breadcrumbState',\n  default: [],\n})\n\nexport function useBreadcrumbState() {\n  const state = useRecoilState(breadcrumbState)\n  return state\n}\n\nexport function useBreadcrumb(items: BreadcrumbItem[] = []) {\n  const setter = useSetRecoilState(breadcrumbState)\n\n  React.useEffect(() => {\n    setter(items)\n  }, []) // eslint-disable-line\n}\n\nexport const headerContentState = atom<React.ReactNode>({\n  key: 'headerContentState',\n  default: null,\n})\n\nexport function useHeaderContentState() {\n  return useRecoilState(headerContentState)\n}\n\nexport function useHeaderContent(node?: React.ReactNode) {\n  const setter = useSetRecoilState(headerContentState)\n\n  React.useEffect(() => {\n    setter(node)\n\n    return () => {\n      setter(null)\n    }\n  }, [node]) // eslint-disable-line\n}\n\nexport function useHeaderContentValue() {\n  const value = useRecoilValue(headerContentState)\n  return value\n}\n","export default {\n  CARD: 'card',\n  BOARD: 'board',\n  SNIPPET: 'snippet',\n}\n","import React from 'react'\nimport styled, { css } from 'styled-components'\nimport { DatePicker, TimePicker } from 'antd'\nimport { DatePickerProps } from 'antd/lib/date-picker'\n\nconst borderLess = css`\n  &.ant-picker-borderless {\n    border: none;\n    border-bottom: 1px solid ${p => p.theme.primary} !important;\n    border-bottom-left-radius: 0;\n    border-bottom-right-radius: 0;\n  }\n\n  &.ant-picker-focused:not(.ant-picker-borderless) {\n    box-shadow: 0 0 0 1px ${p => p.theme.primary};\n  }\n`\n\nconst RangePicker = styled(DatePicker.RangePicker)`\n  &.ant-picker {\n    border: 1px solid ${p => p.theme.primary};\n\n    &:hover,\n    &:focus {\n      border-color: ${p => p.theme.secondary};\n    }\n\n    &.ant-picker-focused {\n      box-shadow: 0 0 0 1px ${p => p.theme.primary};\n    }\n  }\n`\n\nconst StyledDatePicker: any = styled(DatePicker)`\n  &.ant-picker {\n    border: 1px solid ${p => p.theme.primary};\n\n    &:hover,\n    &:focus {\n      border-color: ${p => p.theme.secondary};\n    }\n\n    .ant-picker-suffix {\n      color: ${p => p.theme.primary};\n    }\n\n    ${borderLess};\n  }\n`\n\nconst StyledTimePicker = styled(TimePicker)`\n  &.ant-picker {\n    border: 1px solid ${p => p.theme.primary};\n\n    &:hover,\n    &:focus {\n      border-color: ${p => p.theme.secondary};\n    }\n\n    .ant-picker-suffix {\n      color: ${p => p.theme.primary};\n    }\n\n    ${borderLess};\n  }\n`\n\nfunction DatePickerComponent(props: DatePickerProps) {\n  return <StyledDatePicker {...props} />\n}\n\nexport {\n  DatePickerComponent as DatePicker,\n  RangePicker,\n  StyledTimePicker as TimePicker,\n}\n\nexport default DatePickerComponent\n","import React from 'react'\nimport { Modal } from 'antd'\nimport { ModalProps, ModalFuncProps } from 'antd/lib/modal'\n\nexport const modalDefaultProps = (\n  content?: React.ReactNode,\n  props?: ModalProps\n): ModalFuncProps => ({\n  content: (\n    <div\n      className=\"text-darkGrey font-medium\"\n      css={{ marginTop: 16, marginBottom: 30 }}>\n      {content}\n    </div>\n  ),\n  icon: null,\n  width: 440,\n  okText: '刪除',\n  cancelText: '取消',\n  centered: true,\n  // maskStyle: {\n  //   background: theme.modal.maskDarken,\n  // },\n  autoFocusButton: null,\n  okButtonProps: {\n    className: 'c-btn is--danger',\n    style: { minWidth: 80, marginRight: 24 },\n  },\n  cancelButtonProps: {\n    className: 'c-btn is--outline mr-0 float-right',\n    style: { minWidth: 80 },\n  },\n  ...props,\n})\n\nexport const confirm = ({\n  onOk,\n  onCancel,\n  content = '刪除後將無法還原，確認繼續？',\n  ...props\n}: ModalFuncProps) => {\n  Modal.confirm({\n    ...modalDefaultProps(content),\n    ...props,\n    onOk: () => {\n      if (onOk) {\n        onOk()\n      }\n    },\n    onCancel() {\n      if (onCancel) {\n        onCancel()\n      }\n    },\n  })\n}\n","import React from 'react'\nimport { includes, pathOr } from 'ramda'\nimport { XYCoord } from 'react-dnd'\nimport { isNil, mapIndexed } from '@/utils/webHelper'\nimport Snippet from '@/components/snippet'\nimport { SnippetProps } from '@/constants/types'\nconst { compose } = require('ramda')\n\n/* prettier-ignore */\nconst REPORT_TEMPLATE_BUILDER_CLASSNAME = 'report-template-builder__main-content'\nconst UI_DRAGGABLE_CLASSNAME = 'ui-draggable'\n\nconst hasClassName = (nodes: Element[], className: string) => {\n  return nodes.find(\n    n => !isNil(n.className) && includes(className)(n.className)\n  )\n}\n\nexport function canMoveSnippet(\n  element: Element | null,\n  className = REPORT_TEMPLATE_BUILDER_CLASSNAME\n) {\n  let elem = element\n\n  const nodes: Element[] = []\n  nodes.push(elem as Element)\n\n  while (elem?.parentNode) {\n    nodes.unshift(elem.parentNode as Element)\n    elem = elem.parentNode as Element\n  }\n\n  if (\n    hasClassName(nodes, 'report-template-builder-contentarea--fixed-layout') ||\n    hasClassName(nodes, 'snippet-drawer-menu')\n  ) {\n    return false\n  }\n  if (\n    hasClassName(nodes, className) ||\n    hasClassName(nodes, UI_DRAGGABLE_CLASSNAME)\n  ) {\n    return true\n  }\n\n  return false\n}\n\nfunction findSnippet(\n  element: HTMLElement,\n  className = UI_DRAGGABLE_CLASSNAME\n): HTMLElement | null {\n  if (element.classList.contains(className)) {\n    return element\n  }\n  return element.parentElement && findSnippet(element.parentElement, className)\n}\n\nexport function getPlaceHolderIndex(clientOffset: XYCoord) {\n  const hoverElement = document.elementFromPoint(clientOffset.x, clientOffset.y)\n\n  // find ui-draggable classname\n  const overSnippet = findSnippet(hoverElement as NonNullable<HTMLElement>)\n\n  const snippetIndex = overSnippet && overSnippet.dataset.index\n  const placeholderIndex = overSnippet ? Number(overSnippet.dataset.index) : -1\n\n  const isOverSnippet = !isNil(snippetIndex)\n\n  return {\n    overSnippet,\n    placeholderIndex,\n    isOverSnippet: isOverSnippet,\n  }\n}\n\nexport function renderSnippets(props: { [key: string]: any } = {}) {\n  return (snippetList?: SnippetProps[]) =>\n    compose(\n      mapIndexed((item: SnippetProps, idx: number) => (\n        <Snippet\n          {...props}\n          key={item.id}\n          wrapperId={`${item.id}`}\n          item={item}\n          draggable={false}\n          tabSize={item.tabSize}>\n          {item.inline ? (\n            <div\n              id={`${item.id}`}\n              className={`${item.id}`}\n              css={{ padding: 16 }}\n              dangerouslySetInnerHTML={{ __html: item.html }}\n            />\n          ) : (\n            <item.Component\n              id={item.id}\n              className={item.id}\n              item={item}\n              index={idx}\n            />\n          )}\n        </Snippet>\n      )),\n      pathOr([], [])\n    )(snippetList)\n}\n","import React from 'react'\n// import { isNil } from 'ramda'\nimport Cookies from 'js-cookie'\nimport { User } from '@/services/authService'\n\nexport type LogoutFn = (params?: { onCompleted?: () => any }) => any\n\nexport type AuthContextType = {\n  logout: LogoutFn\n  isAuthenticated: boolean\n  user: User\n  setUser: React.Dispatch<React.SetStateAction<User | null>>\n  setIsAuthenticated: React.Dispatch<React.SetStateAction<boolean>>\n}\n\nexport const AuthContext = React.createContext<AuthContextType>({\n  isAuthenticated: false,\n  user: {} as User,\n  logout: () => ({}),\n  setUser: (_: React.SetStateAction<User | null>) => ({}),\n  setIsAuthenticated: (_: React.SetStateAction<boolean>) => ({}),\n})\n\nconst _user = Cookies.getJSON('vghks_user')\n// const _token = Cookies.get('vghks_token')\n\nexport function AuthProvider(props: any) {\n  const [isAuthenticated, setIsAuthenticated] = React.useState(\n    true // !isNil(_user) && !isNil(_token)\n  )\n\n  const [user, setUser] = React.useState<User>(_user)\n\n  const logout = React.useCallback(({ onCompleted } = {}) => {\n    Cookies.remove('vghks_token')\n    Cookies.remove('vghks_user')\n\n    setIsAuthenticated(false)\n\n    if (onCompleted) {\n      onCompleted()\n    }\n  }, [])\n\n  const value = React.useMemo(\n    () => ({\n      isAuthenticated,\n      setIsAuthenticated,\n      setUser,\n      logout,\n      user,\n    }),\n    [isAuthenticated, logout, user, setUser, setIsAuthenticated]\n  )\n\n  return <AuthContext.Provider value={value} {...props} />\n}\n\nexport function useAuth() {\n  const context = React.useContext(AuthContext)\n  if (context === undefined) {\n    throw new Error(`useAuth must be used within a AuthProvider`)\n  }\n  return context\n}\n\nexport default useAuth\n","import {\n  compose,\n  ifElse,\n  invoker,\n  path,\n  identity,\n  includes,\n  always,\n  T,\n} from 'ramda'\nimport { isNil } from '@/utils/webHelper'\nimport envStore from '@/constants/env'\nconst { cond } = require('ramda')\n\ntype RequestInit = {\n  body?: any\n  credentials?: RequestCredentials_\n  headers?: HeadersInit_\n  integrity?: string\n  keepalive?: boolean\n  method?: string\n  mode?: RequestMode_\n  referrer?: string\n  window?: any\n  errorMsg?: boolean\n  onCompleted?: (data: any) => any\n  onError?: (err: Error) => any\n}\n\nconst contentTypeIs = (s: string) => {\n  return compose(\n    ifElse(isNil, identity, (c = '') => c.includes(s)),\n    invoker(1, 'get')('content-type'),\n    path(['headers'])\n  )\n}\n\nexport const post = (url: string, options: RequestInit) =>\n  fetch(url, { ...options, method: 'POST' })\n\nexport function request(\n  url: string,\n  {\n    body,\n    headers,\n    errorMsg = true,\n    onCompleted,\n    onError,\n    ...options\n  }: RequestInit = {}\n) {\n  const fullUrl = cond([\n    [includes('http'), always(url)],\n    [T, always(envStore.apiBaseUrl + url)],\n  ])(url)\n\n  return fetch(fullUrl, {\n    ...options,\n    body: body instanceof FormData ? body : JSON.stringify(body),\n    headers: {\n      'Content-Type': 'application/json',\n      Accept: 'application/json',\n      //   authorization: '',\n      ...headers,\n    },\n  })\n    .then(async (response: Response) => {\n      if (onCompleted) {\n        onCompleted(response)\n      }\n\n      if (contentTypeIs('application/json')(response)) {\n        const json = await response.json()\n\n        if (!response.ok) {\n          return Promise.reject(json)\n        }\n\n        return json\n      }\n\n      if (contentTypeIs('sheet')(response)) {\n        return await response.blob()\n      }\n\n      return response.text()\n    })\n    .catch((err: Error) => {\n      //   if (errorMsg) {\n      //     error(err)\n      //   }\n\n      if (onError) {\n        onError(err)\n      }\n\n      return err\n    })\n}\n\nexport default request\n","export default function getDisplayName(Component: any) {\n  return (\n    Component.displayName ||\n    Component.name ||\n    (typeof Component === 'string' && Component.length > 0\n      ? Component\n      : 'Unknown')\n  )\n}\n","import React from 'react'\nimport { ModalProps as AntModalProps } from 'antd/lib/modal'\nimport Modal from '@/components/modal'\nimport Button from '@/components/button'\n\nexport interface ModalProps<T = any>\n  extends Omit<AntModalProps, 'onOk' | 'onCancel'> {\n  item?: T\n  onOk?: (data?: any) => void\n  onCancel: () => void\n  children?: React.ReactNode\n}\n\nfunction TemplateModal<T = any>({\n  onCancel,\n  onOk,\n  item,\n  children,\n  ...props\n}: ModalProps<T>) {\n  const handleOk = () => {\n    if (onOk) {\n      onOk()\n    }\n  }\n  return (\n    <Modal\n      visible\n      onCancel={onCancel}\n      width={650}\n      maskClosable={false}\n      keyboard={false}\n      footer={[\n        <Button\n          key=\"btn-cancel\"\n          color=\"outline\"\n          style={{ minWidth: 80, marginRight: 16 }}\n          onClick={onCancel}>\n          取消\n        </Button>,\n        <Button\n          key=\"btn-save\"\n          color=\"primary\"\n          style={{ minWidth: 80 }}\n          onClick={handleOk}>\n          儲存\n        </Button>,\n      ]}\n      {...props}>\n      {children}\n    </Modal>\n  )\n}\n\nexport { TemplateModal as Modal }\n\nexport default TemplateModal\n","import React from 'react'\nimport cx from 'classnames'\nimport { Card } from 'antd'\nimport { CardProps } from 'antd/lib/card'\nimport { FontColorsOutlined } from '@ant-design/icons'\nimport styled from 'styled-components'\nimport { useReportPreview } from '@/hooks/useReportTemplate'\nimport { isNil } from '@/utils/webHelper'\n\nconst StyledCard = styled(Card)`\n  &.ant-card {\n    border-radius: 10px;\n    border: none;\n    cursor: move;\n  }\n\n  .ant-card-head {\n    padding-left: 18px;\n    border-bottom: none;\n    color: ${p => p.theme.primary};\n    font-size: 14px;\n    font-weight: 600;\n  }\n\n  &.ant-card-head--hide .ant-card-head {\n    display: none;\n  }\n\n  &.ant-card-body--hide {\n    .ant-card-head {\n      padding-bottom: 16px;\n      border-bottom: 1px dashed #f0f0f0;\n    }\n\n    .ant-card-body {\n      display: none;\n    }\n  }\n\n  &.is--preview .ant-card-head {\n    min-height: auto;\n  }\n\n  &.is--preview .ant-card-head-title {\n    padding-top: 0;\n  }\n\n  &.is--preview .ant-card-body {\n    padding-top: 12px;\n    padding-bottom: 8px;\n  }\n\n  .ant-card-head-title {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    padding-bottom: 0;\n  }\n\n  .ant-card-body {\n    padding-top: 6px;\n    padding-left: 26px;\n    padding-bottom: 20px;\n  }\n`\n\ninterface Props extends CardProps {\n  titleVisible?: boolean\n  bodyVisible?: boolean\n  onEdit?: () => void\n  onDelete?: () => void\n}\n\nfunction TemplateWrapper({\n  title,\n  children,\n  onDelete,\n  onEdit,\n  titleVisible = false,\n  bodyVisible = true,\n  ...props\n}: Props) {\n  const [isPreview] = useReportPreview()\n\n  return (\n    <StyledCard\n      title={\n        <div className=\"flex items-center\">\n          {!isPreview && <FontColorsOutlined className=\"mr-3\" />}\n          {title || '預設標題 (可點鉛筆圖示可進行編輯)'}\n        </div>\n      }\n      className={cx({\n        'ant-card-head--hide': isNil(title) && !titleVisible,\n        'ant-card-body--hide': !bodyVisible,\n        // 'is--preview': isPreview,\n      })}\n      {...props}>\n      {children}\n    </StyledCard>\n  )\n}\n\nexport default TemplateWrapper\n","import React from 'react'\nimport { Form } from 'antd'\nimport { Input, TextArea } from '@/components/input'\nimport Checkbox from '@/components/checkbox'\nimport { Modal, ModalProps } from '@/components/report-template-modal'\nimport TemplateWrapper from '@/components/report-template-wrapper'\nimport { createFormItemLayout } from '@/utils/form'\nimport { ReportTemplateSetting, ReportTemplateProps } from '@/constants/types'\nimport { useUpdateSnippet } from '@/hooks/useReportTemplate'\n\ninterface Setting extends ReportTemplateSetting {\n  defaultValue?: string\n  multipleLine?: boolean\n}\n\nexport default function ReportTemplateInputText(props: ReportTemplateProps) {\n  const { editModalVisible, handleEditModalVisible, onUpdate, item } = props\n\n  const { setting, handleOk } = useUpdateSnippet<Setting>({ item, onUpdate })\n\n  const inputProps = {\n    bordered: false,\n    className: 'w-2/3',\n    placeholder: setting.tooltip || '輸入內容',\n    defaultValue: setting.defaultValue,\n  }\n\n  return (\n    <>\n      {editModalVisible && (\n        <InputTextModal\n          item={setting}\n          onCancel={handleEditModalVisible}\n          onOk={handleOk}\n        />\n      )}\n      <TemplateWrapper title={setting.text || ''}>\n        <Form.Item noStyle name={['data', item.id]}>\n          {setting.multipleLine ? (\n            <TextArea {...inputProps} autoSize={{ minRows: 3 }} />\n          ) : (\n            <Input {...inputProps} />\n          )}\n        </Form.Item>\n      </TemplateWrapper>\n    </>\n  )\n}\n\nfunction InputTextModal({\n  onOk,\n  onCancel,\n  item,\n  ...props\n}: ModalProps<Setting>) {\n  const [form] = Form.useForm()\n\n  const handleOk = () => {\n    form.validateFields().then(values => {\n      if (onOk) {\n        onOk(values)\n      }\n      onCancel()\n    })\n  }\n\n  return (\n    <Modal<Setting>\n      {...props}\n      title={\n        <>\n          <div>\n            Text\n            <div className=\"inline ml-2 text-sm text-gray-600\">\n              typically used for description something.\n            </div>\n          </div>\n        </>\n      }\n      onCancel={onCancel}\n      onOk={handleOk}>\n      <Form\n        {...createFormItemLayout(5, 16)}\n        labelAlign=\"left\"\n        form={form}\n        initialValues={item}>\n        <Form.Item label=\"Text\" name=\"text\">\n          <Input />\n        </Form.Item>\n        <Form.Item label=\"Default Value\" name=\"defaultValue\">\n          <Input />\n        </Form.Item>\n        <Form.Item label=\"Tooltip\" name=\"tooltip\">\n          <Input />\n        </Form.Item>\n        <Form.Item\n          label=\"Multiple Lines\"\n          name=\"multipleLine\"\n          valuePropName=\"checked\">\n          <Checkbox />\n        </Form.Item>\n      </Form>\n    </Modal>\n  )\n}\n","import React from 'react'\nimport { InputNumber } from 'antd'\nimport { InputNumberProps } from 'antd/lib/input-number'\nimport styled from 'styled-components'\nimport { RefProps } from '@/constants/types'\nimport { percent, currency, thosandSeprartor } from '@/utils/form'\n\ntype Props = RefProps & InputNumberProps & { bordered?: boolean }\n\nconst StyledInputNumber = styled(InputNumber).attrs({\n  min: 0 as any, // dont know why error\n})<Props>`\n  &.ant-input-number {\n    border-color: ${p => p.theme.primary};\n\n    ::placeholder {\n      color: red;\n    }\n  }\n\n  &.ant-input-number-focused,\n  &.ant-input-number:focus,\n  &.ant-input-number:hover {\n    border-color: ${p => p.theme.primary};\n  }\n\n  &.ant-input-number-focused:not(.ant-input-number-borderless),\n  &.ant-input-number:focus:not(.ant-input-number-borderless) {\n    box-shadow: 0 0 0 1px ${p => p.theme.primary};\n  }\n\n  &.ant-input-number-borderless,\n  &.ant-input-number-borderless:hover,\n  &.ant-input-number-borderless:focus,\n  &.ant-input-number-borderless-focused,\n  &.ant-input-number-borderless-disabled,\n  &.ant-input-number-borderless[disabled] {\n    border: none;\n    border-bottom: 1px solid ${p => p.theme.primary};\n  }\n`\n\nexport const ThousandSeprartorInput = React.forwardRef<\n  typeof InputNumber,\n  Props\n>(({ ...props }, ref) => (\n  <StyledInputNumber forwardRef={ref} {...props} {...thosandSeprartor} />\n))\n\nexport const CurrencyInput = React.forwardRef<typeof InputNumber, Props>(\n  ({ ...props }, ref) => (\n    <StyledInputNumber forwardRef={ref} {...props} {...currency} />\n  )\n)\n\nexport const PercentInput = React.forwardRef<typeof InputNumber, Props>(\n  ({ ...props }, ref) => (\n    <StyledInputNumber forwardRef={ref} {...props} {...percent} />\n  )\n)\n\nThousandSeprartorInput.displayName = 'ThousandSeprartorInput'\n\nCurrencyInput.displayName = 'CurrencyInput'\n\nPercentInput.displayName = 'PercentInput'\n\nexport { StyledInputNumber as InputNumber }\n\nexport default StyledInputNumber\n","import React from 'react'\nimport { Form } from 'antd'\nimport Input from '@/components/input'\nimport InputNumber from '@/components/input-number'\nimport { Modal, ModalProps } from '@/components/report-template-modal'\nimport TemplateWrapper from '@/components/report-template-wrapper'\nimport { createFormItemLayout } from '@/utils/form'\nimport { ReportTemplateSetting, ReportTemplateProps } from '@/constants/types'\nimport { useUpdateSnippet } from '@/hooks/useReportTemplate'\n\ninterface Setting extends ReportTemplateSetting {\n  defaultValue?: number\n  max?: number\n  min?: number\n  units?: string\n}\n\nexport default function ReportTemplateInputNumber(props: ReportTemplateProps) {\n  const { editModalVisible, handleEditModalVisible, item, onUpdate } = props\n\n  const { setting, handleOk } = useUpdateSnippet<Setting>({ item, onUpdate })\n\n  return (\n    <>\n      {editModalVisible && (\n        <InputNumberModal\n          item={setting}\n          onCancel={handleEditModalVisible}\n          onOk={handleOk}\n        />\n      )}\n      <TemplateWrapper title={setting.text || ''}>\n        <Form.Item noStyle name={['data', item.id]}>\n          <InputNumber\n            style={{ width: '33.333333%' }}\n            className=\"ant-input-number-borderless\"\n            defaultValue={setting.defaultValue}\n            min={setting.min}\n            max={setting.max}\n            formatter={value => `${setting.units || ''} ${value}`}\n            placeholder={setting.tooltip || '輸入數值'}\n          />\n        </Form.Item>\n      </TemplateWrapper>\n    </>\n  )\n}\n\nfunction InputNumberModal({ onOk, onCancel, item, ...props }: ModalProps) {\n  const [form] = Form.useForm()\n\n  const handleOk = () => {\n    form.validateFields().then(values => {\n      if (onOk) {\n        onOk(values)\n      }\n      onCancel()\n    })\n  }\n\n  return (\n    <Modal\n      {...props}\n      title={\n        <>\n          <div>\n            Number\n            <div className=\"inline ml-2 text-sm text-gray-600\">\n              typically used for input number.\n            </div>\n          </div>\n        </>\n      }\n      onOk={handleOk}\n      onCancel={onCancel}>\n      <Form\n        {...createFormItemLayout(5, 16)}\n        labelAlign=\"left\"\n        form={form}\n        initialValues={item}>\n        <Form.Item label=\"Text\" name=\"text\">\n          <Input />\n        </Form.Item>\n        <Form.Item label=\"Default Value\" name=\"defaultValue\">\n          <Input />\n        </Form.Item>\n        <Form.Item label=\"Tooltip\" name=\"tooltip\">\n          <Input />\n        </Form.Item>\n        <Form.Item label=\"Minimum Value\" name=\"min\">\n          <InputNumber />\n        </Form.Item>\n        <Form.Item label=\"Maximum Value\" name=\"max\">\n          <InputNumber />\n        </Form.Item>\n        <Form.Item label=\"Units\" name=\"units\">\n          <Input />\n        </Form.Item>\n      </Form>\n    </Modal>\n  )\n}\n","// tslint:disable: quotemark no-implicit-dependencies no-shadowed-variable no-var-requires\nimport React from 'react'\nimport { TableProps } from 'antd/lib/table'\nimport { FormInstance } from 'antd/lib/form'\nimport Table from '@/components/table'\n\ntype EditableTableProps<T> = Omit<TableProps<T>, 'onChange'> & {\n  value?: T[]\n  form: FormInstance\n  onChange?(changedValue: T[] | null): void\n  onRowAdd: (form: FormInstance) => any\n  onRowDelete: (value: { id: React.Key; form: FormInstance }) => any\n}\n\nexport default function EditableTable<T = any>({\n  form,\n  value,\n  onChange,\n  onRowAdd,\n  onRowDelete,\n  ...props\n}: EditableTableProps<T>) {\n  const triggerChange = (changedValue: T[]) => {\n    if (onChange) {\n      onChange(changedValue)\n    }\n  }\n\n  const handleAdd = () => {\n    triggerChange(onRowAdd(form))\n  }\n\n  const handleDelete = (id: string) => {\n    triggerChange(onRowDelete({ id, form }))\n  }\n\n  return (\n    <Table\n      {...props}\n      rowKey=\"id\"\n      pagination={false}\n      size=\"small\"\n      dataSource={value as any}\n      onAddRowClick={handleAdd}\n      onDeleteRowClick={handleDelete}\n      editable={true}\n    />\n  )\n}\n","import React from 'react'\nimport { Form } from 'antd'\nimport { ColumnProps } from 'antd/lib/table'\nimport { FormInstance } from 'antd/lib/form'\nimport { concat, __, pathOr, invoker, filter } from 'ramda'\nimport Input from '@/components/input'\nimport Checkbox from '@/components/checkbox'\nimport EditableTable from '@/components/editable-table'\nimport { uuid } from '@/utils/webHelper'\nimport { createFormItemLayout } from '@/utils/form'\nimport { ReportTemplateSetting } from '@/constants/types'\nimport { Modal, ModalProps } from './report-template-modal'\nconst { compose } = require('ramda')\n\nexport interface Setting extends ReportTemplateSetting {\n  options?: Option[]\n}\n\nexport type Option = {\n  id: React.Key\n  text?: string\n  selected?: boolean\n  freetext?: boolean\n}\n\nexport const defaultValue: Setting = {\n  options: [\n    {\n      id: uuid(),\n      text: '預設選項 1',\n      selected: true,\n      freetext: false,\n    },\n    {\n      id: uuid(),\n      text: '預設選項 2',\n      selected: true,\n      freetext: false,\n    },\n    {\n      id: uuid(),\n      text: '預設選項 3',\n      selected: true,\n      freetext: false,\n    },\n  ],\n}\n\nexport function TemplateSelectionModal({\n  onCancel,\n  onOk,\n  item,\n  ...props\n}: ModalProps) {\n  const [form] = Form.useForm()\n\n  const handleOk = () => {\n    form.validateFields().then(values => {\n      if (onOk) {\n        onOk(values)\n      }\n      onCancel()\n    })\n  }\n\n  const handleRowAdd = (form: FormInstance) => {\n    return compose(\n      concat(__, [\n        {\n          id: uuid(),\n          text: undefined,\n          selected: true,\n          freetext: false,\n        },\n      ]),\n      pathOr([], ['options']),\n      invoker(0, 'getFieldsValue')()\n    )(form)\n  }\n\n  const handleRowDelete = ({\n    id,\n    form,\n  }: {\n    id: React.Key\n    form: FormInstance\n  }) => {\n    return compose(\n      filter((x: any) => x.id !== id),\n      pathOr([], ['options']),\n      invoker(0, 'getFieldsValue')()\n    )(form)\n  }\n\n  const columns: ColumnProps<Option>[] = [\n    {\n      title: '選項名稱',\n      render: (v, r, idx) => (\n        <Form.Item noStyle name={['options', idx, 'text']}>\n          <Input />\n        </Form.Item>\n      ),\n    },\n    {\n      title: '是否可選',\n      align: 'center',\n      render: (v, r, idx) => (\n        <Form.Item\n          noStyle\n          name={['options', idx, 'selected']}\n          valuePropName=\"checked\">\n          <Checkbox />\n        </Form.Item>\n      ),\n    },\n    {\n      title: '是否可輸入',\n      align: 'center',\n      render: (v, r, idx) => (\n        <Form.Item\n          noStyle\n          name={['options', idx, 'freetext']}\n          valuePropName=\"checked\">\n          <Checkbox />\n        </Form.Item>\n      ),\n    },\n  ]\n\n  return (\n    <Modal\n      {...props}\n      title={\n        <>\n          <div>Single Selection List</div>\n          <div className=\"mt-1 text-sm text-gray-600\">\n            Typically used for shorter lists so that all responses are visible\n            as radio buttons. Only allow a single selection.\n          </div>\n        </>\n      }\n      onCancel={onCancel}\n      onOk={handleOk}>\n      <Form\n        {...createFormItemLayout(3, 16)}\n        labelAlign=\"left\"\n        form={form}\n        initialValues={item}>\n        <Form.Item label=\"Text\" name=\"text\">\n          <Input />\n        </Form.Item>\n        <Form.Item label=\"Tooltip\" name=\"tooltip\">\n          <Input />\n        </Form.Item>\n        <Form.Item label=\"Options\" />\n        <Form.Item noStyle name=\"options\">\n          <EditableTable\n            columns={columns}\n            form={form}\n            onRowAdd={handleRowAdd}\n            onRowDelete={handleRowDelete}\n          />\n        </Form.Item>\n      </Form>\n    </Modal>\n  )\n}\n","import React from 'react'\nimport { Form } from 'antd'\nimport cx from 'classnames'\nimport { pathOr } from 'ramda'\nimport { Checkbox, CheckboxGroup } from '@/components/checkbox'\nimport Input from '@/components/input'\nimport TemplateWrapper from '@/components/report-template-wrapper'\nimport {\n  TemplateSelectionModal,\n  Setting,\n  Option,\n  defaultValue,\n} from '@/components/report-template-selection-modal'\nimport { mapIndexed } from '@/utils/webHelper'\nimport { ReportTemplateProps } from '@/constants/types'\nimport { useUpdateSnippet } from '@/hooks/useReportTemplate'\nconst { compose } = require('ramda')\n\nfunction ReportTemplateMultipleSelection(props: ReportTemplateProps) {\n  const { item, editModalVisible, handleEditModalVisible, onUpdate } = props\n\n  const { setting, handleOk } = useUpdateSnippet<Setting>({\n    item,\n    onUpdate,\n    defaultValue,\n  })\n\n  return (\n    <>\n      {editModalVisible && (\n        <TemplateSelectionModal\n          item={setting}\n          onCancel={handleEditModalVisible}\n          onOk={handleOk}\n          title={\n            <>\n              <div>Multiple Selection List</div>\n              <div className=\"mt-1 text-sm text-gray-600\">\n                typically used for shorter lists so that all responses are\n                visible as checkboxes. Allows Multiple selections.\n              </div>\n            </>\n          }\n        />\n      )}\n      <TemplateWrapper\n        title={setting.text || ''}\n        bodyStyle={{ paddingLeft: 36 }}>\n        <Form.Item noStyle name={['data', item.id]}>\n          <CheckboxGroup>\n            {compose(\n              mapIndexed((x: Option, idx: number) => (\n                <Checkbox\n                  key={x.id}\n                  className={cx('block ml-0', { 'mt-1': idx > 0 })}\n                  defaultChecked={false}\n                  value={`${idx}`}>\n                  {x.text}\n                  {x.freetext && (\n                    <Input\n                      bordered={false}\n                      size=\"small\"\n                      placeholder=\"輸入備註\"\n                      className=\"ml-4 w-1/3\"\n                    />\n                  )}\n                </Checkbox>\n              )),\n              pathOr([], ['options'])\n            )(setting)}\n          </CheckboxGroup>\n        </Form.Item>\n      </TemplateWrapper>\n    </>\n  )\n}\n\nexport default ReportTemplateMultipleSelection\n","import React from 'react'\nimport cx from 'classnames'\nimport { Form } from 'antd'\nimport { pathOr } from 'ramda'\nimport Radio from '@/components/radio'\nimport Input from '@/components/input'\nimport TemplateWrapper from '@/components/report-template-wrapper'\nimport {\n  TemplateSelectionModal,\n  Setting,\n  Option,\n  defaultValue,\n} from '@/components/report-template-selection-modal'\nimport { mapIndexed } from '@/utils/webHelper'\nimport { ReportTemplateProps } from '@/constants/types'\nimport { useUpdateSnippet } from '@/hooks/useReportTemplate'\nconst { compose } = require('ramda')\n\nfunction ReportTemplateSingleSelection(props: ReportTemplateProps) {\n  const { item, editModalVisible, handleEditModalVisible, onUpdate } = props\n\n  const { setting, handleOk } = useUpdateSnippet<Setting>({\n    item,\n    onUpdate,\n    defaultValue,\n  })\n\n  return (\n    <>\n      {editModalVisible && (\n        <TemplateSelectionModal\n          item={setting}\n          onCancel={handleEditModalVisible}\n          onOk={handleOk}\n        />\n      )}\n      <TemplateWrapper\n        title={setting.text || ''}\n        bodyStyle={{ paddingLeft: 36 }}>\n        <Form.Item noStyle name={['data', item.id]}>\n          <Radio.Group>\n            {compose(\n              mapIndexed((x: Option, idx: number) => (\n                <Radio\n                  key={x.id}\n                  className={cx('block', { 'mt-1': idx > 0 })}\n                  defaultChecked={false}\n                  value={`${idx}`}>\n                  {x.text}\n                  {x.freetext && (\n                    <Input\n                      size=\"small\"\n                      bordered={false}\n                      placeholder=\"輸入備註\"\n                      className=\"ml-3 w-1/3\"\n                    />\n                  )}\n                </Radio>\n              )),\n              pathOr([], ['options'])\n            )(setting)}\n          </Radio.Group>\n        </Form.Item>\n      </TemplateWrapper>\n    </>\n  )\n}\n\nexport default ReportTemplateSingleSelection\n","import React from 'react'\nimport { Form } from 'antd'\nimport Input from '@/components/input'\nimport DatePicker from '@/components/datepicker'\nimport { Modal, ModalProps } from '@/components/report-template-modal'\nimport TemplateWrapper from '@/components/report-template-wrapper'\nimport { createFormItemLayout } from '@/utils/form'\nimport { ReportTemplateProps } from '@/constants/types'\nimport { useUpdateSnippet } from '@/hooks/useReportTemplate'\n\ntype Setting = {\n  text?: string\n  defaultValue?: moment.Moment\n  tooltip?: string\n}\n\nexport default function ReportTemplateDate(props: ReportTemplateProps) {\n  const { editModalVisible, handleEditModalVisible, item, onUpdate } = props\n\n  const { setting, handleOk } = useUpdateSnippet<Setting>({ item, onUpdate })\n\n  return (\n    <>\n      {editModalVisible && (\n        <InputDateModal\n          item={setting}\n          onCancel={handleEditModalVisible}\n          onOk={handleOk}\n        />\n      )}\n      <TemplateWrapper title={setting.text || ''}>\n        <Form.Item noStyle name={['data', item.id]}>\n          <DatePicker\n            bordered={false}\n            className=\"w-1/3\"\n            placeholder={setting.tooltip || '選擇日期'}\n            defaultValue={setting.defaultValue}\n          />\n        </Form.Item>\n      </TemplateWrapper>\n    </>\n  )\n}\n\nfunction InputDateModal({\n  onOk,\n  onCancel,\n  item,\n  ...props\n}: ModalProps<Setting>) {\n  const [form] = Form.useForm()\n\n  const handleOk = () => {\n    form.validateFields().then(values => {\n      if (onOk) {\n        onOk(values)\n      }\n      onCancel()\n    })\n  }\n\n  return (\n    <Modal<Setting>\n      {...props}\n      title={\n        <>\n          <div>\n            Date\n            <div className=\"inline ml-2 text-sm text-gray-600\">\n              typically used for target date.\n            </div>\n          </div>\n        </>\n      }\n      onCancel={onCancel}\n      onOk={handleOk}>\n      <Form\n        {...createFormItemLayout(5, 16)}\n        labelAlign=\"left\"\n        form={form}\n        initialValues={item}>\n        <Form.Item label=\"Text\" name=\"text\">\n          <Input />\n        </Form.Item>\n        <Form.Item label=\"Default Value\" name=\"defaultValue\">\n          <DatePicker allowClear picker=\"date\" className=\"w-full\" />\n        </Form.Item>\n        <Form.Item label=\"Tooltip\" name=\"tooltip\">\n          <Input />\n        </Form.Item>\n      </Form>\n    </Modal>\n  )\n}\n","import React from 'react'\nimport { Form } from 'antd'\nimport Input from '@/components/input'\nimport { TimePicker } from '@/components/datepicker'\nimport { Modal, ModalProps } from '@/components/report-template-modal'\nimport TemplateWrapper from '@/components/report-template-wrapper'\nimport { createFormItemLayout } from '@/utils/form'\nimport { ReportTemplateSetting, ReportTemplateProps } from '@/constants/types'\nimport { useUpdateSnippet } from '@/hooks/useReportTemplate'\n\ninterface Setting extends ReportTemplateSetting {\n  defaultValue?: moment.Moment\n}\n\nexport default function ReportTemplateTime(props: ReportTemplateProps) {\n  const { editModalVisible, handleEditModalVisible, item, onUpdate } = props\n\n  const { setting, handleOk } = useUpdateSnippet<Setting>({ item, onUpdate })\n\n  return (\n    <>\n      {editModalVisible && (\n        <InputTimeModal\n          item={setting}\n          onCancel={handleEditModalVisible}\n          onOk={handleOk}\n        />\n      )}\n      <TemplateWrapper title={setting.text || ''}>\n        <Form.Item noStyle name={['data', item.id]}>\n          <TimePicker\n            bordered={false}\n            className=\"w-1/3\"\n            placeholder={setting.tooltip || '選擇時間'}\n            defaultValue={setting.defaultValue}\n          />\n        </Form.Item>\n      </TemplateWrapper>\n    </>\n  )\n}\n\nfunction InputTimeModal({\n  onOk,\n  onCancel,\n  item,\n  ...props\n}: ModalProps<Setting>) {\n  const [form] = Form.useForm()\n\n  const handleOk = () => {\n    form.validateFields().then(values => {\n      if (onOk) {\n        onOk(values)\n      }\n      onCancel()\n    })\n  }\n\n  return (\n    <Modal<Setting>\n      {...props}\n      title={\n        <>\n          <div>\n            Time\n            <div className=\"inline ml-2 text-sm text-gray-600\">\n              typically used for target time.\n            </div>\n          </div>\n        </>\n      }\n      onCancel={onCancel}\n      onOk={handleOk}>\n      <Form\n        {...createFormItemLayout(5, 16)}\n        labelAlign=\"left\"\n        form={form}\n        initialValues={item}>\n        <Form.Item label=\"Text\" name=\"text\">\n          <Input />\n        </Form.Item>\n        <Form.Item label=\"Default Value\" name=\"defaultValue\">\n          <TimePicker allowClear format=\"HH:mm\" className=\"w-full\" />\n        </Form.Item>\n        <Form.Item label=\"Tooltip\" name=\"tooltip\">\n          <Input />\n        </Form.Item>\n      </Form>\n    </Modal>\n  )\n}\n","import React from 'react'\nimport { pathOr, map } from 'ramda'\nimport { Form } from 'antd'\nimport Select from '@/components/select'\nimport TemplateWrapper from '@/components/report-template-wrapper'\nimport {\n  TemplateSelectionModal,\n  Option,\n  defaultValue,\n} from '@/components/report-template-selection-modal'\nimport { ReportTemplateSetting, ReportTemplateProps } from '@/constants/types'\nimport { useUpdateSnippet } from '@/hooks/useReportTemplate'\nconst { compose } = require('ramda')\n\ninterface Setting extends ReportTemplateSetting {\n  options?: Option[]\n  selectionType?: 'single' | 'multiple'\n}\n\nexport default function ReportTemplateSelect(props: ReportTemplateProps) {\n  const { item, editModalVisible, handleEditModalVisible, onUpdate } = props\n\n  const { setting, handleOk } = useUpdateSnippet<Setting>({\n    item,\n    onUpdate,\n    defaultValue,\n  })\n\n  return (\n    <>\n      {editModalVisible && (\n        <TemplateSelectionModal\n          item={setting}\n          onCancel={handleEditModalVisible}\n          onOk={handleOk}\n          title={\n            <>\n              <div>Drop-down List</div>\n              <div className=\"mt-1 text-sm text-gray-600\">\n                typically used for lists of greater than 6 or 7 options.\n              </div>\n            </>\n          }\n        />\n      )}\n      <TemplateWrapper title={setting.text || ''}>\n        <Form.Item noStyle name={['data', item.id]}>\n          <Select\n            allowClear\n            bordered={false}\n            className=\"w-1/3\"\n            placeholder={setting.tooltip || '請選擇...'}>\n            {compose(\n              map((x: Option) => (\n                <Select.Option key={x.id} value={x.text as any}>\n                  {x.text}\n                </Select.Option>\n              )),\n              pathOr([], ['options'])\n            )(setting)}\n          </Select>\n        </Form.Item>\n      </TemplateWrapper>\n    </>\n  )\n}\n","import React from 'react'\nimport { Form } from 'antd'\nimport Input from '@/components/input'\nimport { Modal, ModalProps } from '@/components/report-template-modal'\nimport TemplateWrapper from '@/components/report-template-wrapper'\nimport { createFormItemLayout } from '@/utils/form'\nimport { useUpdateSnippet } from '@/hooks/useReportTemplate'\nimport { ReportTemplateSetting, ReportTemplateProps } from '@/constants/types'\n\ninterface Setting extends ReportTemplateSetting {}\n\nexport default function TemplateSectionHeader(props: ReportTemplateProps) {\n  const { item, editModalVisible, handleEditModalVisible, onUpdate } = props\n\n  const { setting, handleOk } = useUpdateSnippet<Setting>({\n    item,\n    onUpdate,\n  })\n\n  return (\n    <>\n      {editModalVisible && (\n        <InputTextModal\n          item={setting}\n          onCancel={handleEditModalVisible}\n          onOk={handleOk}\n        />\n      )}\n      <TemplateWrapper\n        titleVisible\n        bodyVisible={false}\n        title={setting.text}\n        onEdit={handleEditModalVisible}></TemplateWrapper>\n    </>\n  )\n}\n\nfunction InputTextModal({\n  onOk,\n  onCancel,\n  item,\n  ...props\n}: ModalProps<Setting>) {\n  const [form] = Form.useForm()\n\n  const handleOk = () => {\n    form.validateFields().then(values => {\n      if (onOk) {\n        onOk(values)\n      }\n      onCancel()\n    })\n  }\n\n  return (\n    <Modal<Setting>\n      {...props}\n      title={\n        <>\n          <div>\n            Section Header\n            <div className=\"inline ml-2 text-sm text-gray-600\">\n              typically used for section.\n            </div>\n          </div>\n        </>\n      }\n      onCancel={onCancel}\n      onOk={handleOk}>\n      <Form\n        {...createFormItemLayout(5, 16)}\n        labelAlign=\"left\"\n        form={form}\n        initialValues={item}>\n        <Form.Item label=\"Text\" name=\"text\">\n          <Input />\n        </Form.Item>\n        <Form.Item label=\"Tooltip\" name=\"tooltip\">\n          <Input />\n        </Form.Item>\n      </Form>\n    </Modal>\n  )\n}\n","import React from 'react'\n\nfunction ReportTemplateCloze() {\n  return <div></div>\n}\n\nexport const html = `\n  <div>\n    Cloze test\n  </div>\n`\n\nexport const Component = ReportTemplateCloze\n\nexport default ReportTemplateCloze\n","import { map, mergeAll } from 'ramda'\nimport {\n  CalendarOutlined,\n  ClockCircleOutlined,\n  OrderedListOutlined,\n  UnorderedListOutlined,\n  FontSizeOutlined,\n  DatabaseOutlined,\n  NumberOutlined,\n  BoldOutlined,\n  FontColorsOutlined,\n} from '@ant-design/icons'\nimport { uuid } from '@/utils/webHelper'\nimport TemplateInputText from '@/components/report-template-input-text'\nimport TemplateInputNumber from '@/components/report-template-input-number'\nimport TemplateMultipleSelection from '@/components/report-template-multiple-selection'\nimport TemplateSingleSelection from '@/components/report-template-single-selection'\nimport TemplateDate from '@/components/report-template-date'\nimport TemplateTime from '@/components/report-template-time'\nimport TemplateSelect from '@/components/report-template-select'\nimport TempldateSectionHeader from '@/components/report-template-section-header'\nimport * as Cloze from '@/components/report-template-cloze'\nconst { compose } = require('ramda')\n\ninterface ReportTemplateListItem {\n  id: React.Key\n  type: string\n  name: string\n  Component: React.Component\n  inline: boolean\n}\n\nconst reportTemplateList = [\n  {\n    id: uuid(),\n    type: 'TemplateSectionHeader',\n    componentType: 'header',\n    name: 'Section Header',\n    inline: false,\n    icon: BoldOutlined,\n    Component: TempldateSectionHeader,\n  },\n  {\n    id: uuid(),\n    type: 'TemplateInputText',\n    name: 'Text',\n    inline: false,\n    icon: FontSizeOutlined,\n    Component: TemplateInputText,\n  },\n  {\n    id: uuid(),\n    type: 'TemplateInputNumber',\n    name: 'Number',\n    inline: false,\n    icon: NumberOutlined,\n    Component: TemplateInputNumber,\n  },\n  {\n    id: uuid(),\n    type: 'TemplateSelect',\n    name: 'Drop-down List',\n    inline: false,\n    icon: DatabaseOutlined,\n    Component: TemplateSelect,\n  },\n  {\n    id: uuid(),\n    type: 'TemplateMultipleSelection',\n    name: 'Multiple Selection List',\n    inline: false,\n    icon: UnorderedListOutlined,\n    Component: TemplateMultipleSelection,\n  },\n  {\n    id: uuid(),\n    type: 'TemplateSingleSelection',\n    name: 'Single Selection List',\n    inline: false,\n    icon: OrderedListOutlined,\n    Component: TemplateSingleSelection,\n  },\n  {\n    id: uuid(),\n    type: 'TemplateDate',\n    name: 'Date',\n    inline: false,\n    icon: CalendarOutlined,\n    Component: TemplateDate,\n  },\n  {\n    id: uuid(),\n    type: 'TemplateTime',\n    name: 'Time',\n    inline: false,\n    icon: ClockCircleOutlined,\n    Component: TemplateTime,\n  },\n  {\n    id: uuid(),\n    type: 'TemplateCloze',\n    name: 'Cloze',\n    inline: true,\n    icon: FontColorsOutlined,\n    html: Cloze.html,\n    Component: Cloze.Component,\n  },\n]\n\nexport const reportTemplateById = compose(\n  mergeAll,\n  map((x: ReportTemplateListItem) => ({ [x.type]: x }))\n)(reportTemplateList)\n\nexport default reportTemplateList\n","import React from 'react'\nimport styled from 'styled-components'\nimport {\n  EditOutlined,\n  DeleteOutlined,\n  RightOutlined,\n  LeftOutlined,\n} from '@ant-design/icons'\nimport cx from 'classnames'\nimport { Tooltip } from 'antd'\n\ntype Props = {\n  editable?: boolean\n  tabIndex: number\n  onEdit: () => void\n  onDelete: () => void\n  onShift: (shift: number) => void\n}\n\nconst ToolbarWrapper = styled.div`\n  position: absolute;\n  top: 8px;\n  right: 15px;\n  visibility: hidden;\n  transition: visibility 0s, opacity 0.3s, max-height 0.6s linear;\n  opacity: 0;\n  z-index: 1;\n\n  &.is--over {\n    visibility: visible;\n    transition: visibility 0s, opacity 0.3s, max-height 0.6s linear;\n    opacity: 0.8;\n  }\n`\n\nexport const SHIFT_TYPES = {\n  LEFT: -1,\n  RIGHT: 1,\n}\n\nexport default function SnippetToolbar({\n  tabIndex,\n  onEdit,\n  onDelete,\n  onShift,\n  editable = true,\n}: Props) {\n  const handleShift = (shift: number) => () => {\n    onShift(shift)\n  }\n\n  return (\n    <ToolbarWrapper\n      className={cx('text-primary', { 'is--over': tabIndex === 1 })}>\n      <Tooltip title=\"向左縮排\">\n        <LeftOutlined\n          className=\"mr-2 cursor-pointer\"\n          onClick={handleShift(SHIFT_TYPES.LEFT)}\n        />\n      </Tooltip>\n      <Tooltip title=\"向右縮排\">\n        <RightOutlined\n          className=\"mr-2 cursor-pointer\"\n          onClick={handleShift(SHIFT_TYPES.RIGHT)}\n        />\n      </Tooltip>\n      {editable && (\n        <Tooltip title=\"編輯\">\n          <EditOutlined className=\"mr-2 cursor-pointer\" onClick={onEdit} />\n        </Tooltip>\n      )}\n      <Tooltip title=\"刪除\">\n        <DeleteOutlined className=\"cursor-pointer\" onClick={onDelete} />\n      </Tooltip>\n    </ToolbarWrapper>\n  )\n}\n\nexport { SnippetToolbar }\n","/* eslint-disable no-undef */\nimport React from 'react'\nimport { clone, is, equals } from 'ramda'\nimport envStore from '@/constants/env'\nimport hoist from 'hoist-non-react-statics'\nimport getDisplayName from '@/utils/get-display-name'\n\nlet defaultConfig = {\n  block_formats: 'Heading 1=h1;Heading 2=h2;Heading 3=h3;Paragraph=p',\n  inline: true,\n  menubar: false,\n  external_plugins: {\n    custom_format: '/js/tinymce_plugins/custom_format/plugin.js',\n    utils: '/js/tinymce_plugins/utils/plugin.js',\n    component_plugin: '/js/tinymce_plugins/component_plugin/plugin.js',\n  },\n  fontsize_formats: '10px 12px 14px 16px 18px 20px 24px 32px 36px',\n  force_br_newlines: true,\n  force_p_newlines: false,\n  forced_root_block: 'div',\n  plugins: 'image textcolor lists emoticons link table media code',\n  tinymce: `${envStore.publicUrl}/js/tinymce/4.9.2/tinymce.min.js`,\n  link_title: false,\n  table_toolbar:\n    'tablemergecells tablesplitcells | tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol',\n  textcolor_cols: '5',\n  content_security_policy: '',\n  allow_unsafe_link_target: true,\n  relative_urls: false,\n  convert_urls: false,\n  valid_elements: '*[*]',\n  valid_children:\n    'h1[div|strong|b],h2[div|strong|b],h3[div|strong|b],p[div|strong|b]',\n  toolbar1:\n    'undo redo | custom-formatselect fontsizeselect | bold italic underline strikethrough forecolor removeformat | align numlist bullist outdent indent | link | upload-image image_options |fontawesome | component-list',\n}\n\nexport default function withTinyMCE(ComposedComponent) {\n  class withTinyMCE extends React.Component {\n    static displayName = `withTinyMCE(${getDisplayName(ComposedComponent)})`\n\n    static defaultProps = {\n      inline: false,\n    }\n\n    state = {\n      top: 0,\n      tabIndex: -1,\n      editor: null,\n      toolbarMouseOver: false,\n      toolbarVisible: false,\n    }\n\n    componentDidMount() {\n      if (this.props.inline) {\n        console.log(this.props.item)\n        this.initialize(this.props.item)\n      }\n    }\n\n    componentDidUpdate(prevProps, prevState) {\n      if (!this.props.isDragging && prevProps.isDragging) {\n        this.setState({ toolbarVisible: false })\n      }\n      if (!this.props.inline) {\n        return\n      }\n      if (!equals(this.props.id, prevProps.id)) {\n        this.initialize(this.props.item)\n      }\n      if (!equals(this.props.item?.html, prevProps.item?.html)) {\n        this.state.editor.setContent(this.props.item?.html)\n      }\n    }\n\n    initialize = snippet => {\n      if (this._get(snippet.id)) {\n        this.remove(snippet.id)\n      }\n\n      const _config = clone(snippet.config || defaultConfig)\n\n      tinymce.init({\n        ..._config,\n        selector: `#${snippet.id}`,\n        language_url: '/js/tinymce_lang/zh_TW.js',\n        content: snippet.html,\n        setup: editor => {\n          editor.on('blur', e => this.onEditorBlur(e))\n          editor.on('focus', e => this.onEditorFocus(e))\n\n          if (is(Function, _config.execInit)) {\n            _config.execInit(editor)\n          }\n\n          if (snippet.html) {\n            editor.on('init', () => editor.setContent(snippet.html))\n          }\n        },\n        init_instance_callback: editor => {\n          if (editor) {\n            this.setState({ editor })\n          }\n          editor.undoManager.add()\n        },\n      })\n    }\n\n    onEditorBlur = e => {\n      // const { updateSnippet, index } = this.props\n      // if (updateSnippet) {\n      //   updateSnippet(e.target.getContent(), index)\n      // }\n      console.log('blur')\n    }\n\n    onEditorFocus = () => {\n      // const { index } = this.props\n      // $(`.sort-item`).removeClass(s.focus)\n      // $(`.sort-item:nth-child(${index + 1})`).addClass(s.focus)\n      console.log('focus')\n    }\n\n    onClick = () => {\n      const { toolbarVisible } = this.state\n\n      if (!toolbarVisible) {\n        const snippetEl = document.getElementById(this.props.id)\n        const top = snippetEl.offsetTop + 30\n\n        this.setState({ toolbarVisible: true, tabIndex: 1, top })\n      }\n    }\n\n    onBlur = () => {\n      const { toolbarVisible, toolbarMouseOver } = this.state\n      if (toolbarVisible && !toolbarMouseOver) {\n        this.setState({ toolbarVisible: false, tabIndex: -1 })\n      }\n    }\n\n    _get = id => {\n      return tinymce.get(id)\n    }\n\n    remove = id => {\n      tinymce.remove(this._get(id || this.props.id))\n    }\n\n    render() {\n      return <ComposedComponent {...this.state} {...this.props} />\n    }\n  }\n\n  return hoist(withTinyMCE, ComposedComponent)\n}\n","import React from 'react'\nimport { DragSource, ConnectDragPreview, ConnectDragSource } from 'react-dnd'\nimport { getEmptyImage } from 'react-dnd-html5-backend'\nimport { mergeRight } from 'ramda'\nimport cx from 'classnames'\nimport { confirm } from '@/utils/message'\nimport { SnippetProps } from '@/constants/types'\nimport ItemTypes from '@/constants/item-types'\nimport SnippetToolbar from './snippet-toolbar'\nimport theme from '../theme'\nimport withTinyMCE from './withTinyMCE'\nconst { compose } = require('ramda')\n\ntype Props = {\n  id?: React.Key\n  wrapperId?: string\n  className?: string\n  style?: React.CSSProperties\n  index?: number\n  tabSize?: number\n  isDragging?: boolean\n  draggable?: boolean\n  inline?: boolean\n  fromMenu?: boolean\n  item: SnippetProps\n  connectDragPreview?: ConnectDragPreview\n  connectDragSource?: ConnectDragSource\n  children?: React.ReactNode\n  findSnippet?(id: React.Key): { index: number; snippet: SnippetProps }\n  shiftSnippet?(id: React.Key, shift: number): any\n  removeSnippet?(index: number): void\n}\n\ntype State = {\n  tabIndex: number\n  editModalVisible: boolean\n}\n\nconst withDragSource = DragSource(\n  ItemTypes.BOARD,\n  {\n    beginDrag(props: Props) {\n      return {\n        ...props,\n        fromMenu: false,\n        originalIndex: (props as any).findSnippet(props.id).index,\n      }\n    },\n    canDrag(props: Props) {\n      return !!(props.draggable && !props.fromMenu)\n    },\n  },\n  (connect, monitor) => ({\n    connectDragSource: connect.dragSource(),\n    connectDragPreview: connect.dragPreview(),\n    isDragging: monitor.isDragging(),\n  })\n)\n\nclass Snippet extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props)\n\n    this.state = {\n      tabIndex: -1,\n      editModalVisible: false,\n    }\n  }\n\n  componentDidMount = () => {\n    const { connectDragPreview } = this.props\n    if (connectDragPreview) {\n      connectDragPreview(getEmptyImage() /* { anchorX: 0.2, anchorY: 0.1 } */)\n    }\n  }\n\n  handleShift = (shift: number) => {\n    const { id, shiftSnippet } = this.props\n\n    if (shiftSnippet && id) {\n      shiftSnippet(id, shift)\n    }\n  }\n\n  handleRemove = () => {\n    confirm({\n      content: '刪除後將無法還原，確認繼續？',\n      title: '確認要刪除這個模版?',\n      onOk: () => {\n        ;(this.props as any).removeSnippet(this.props.index)\n      },\n      onCancel() {},\n    })\n  }\n\n  handleEditModalVisible = () => {\n    this.setState(prev => ({ editModalVisible: !prev.editModalVisible }))\n  }\n\n  _onMouseOver = () => {\n    this.setState({ tabIndex: 1 })\n  }\n\n  _onMouseOut = () => {\n    this.setState({ tabIndex: -1 })\n  }\n\n  render() {\n    const {\n      props: {\n        connectDragSource = (node: any) => node,\n        connectDragPreview = (node: any) => node,\n        wrapperId,\n        index,\n        draggable,\n        style = {},\n        className = 'mb-3',\n        item,\n      },\n      state: { tabIndex, editModalVisible },\n    } = this\n\n    const styles = mergeRight(\n      getItemStyles({ ...this.props, ...this.state }),\n      style\n    )\n\n    return connectDragSource(\n      connectDragPreview(\n        <div\n          id={wrapperId}\n          style={styles}\n          className={cx(\n            'ui-sortable',\n            { 'ui-draggable': draggable },\n            className\n          )}\n          tabIndex={tabIndex}\n          onMouseOver={this._onMouseOver}\n          onMouseOut={this._onMouseOut}\n          data-index={index}>\n          {draggable && (\n            <SnippetToolbar\n              tabIndex={tabIndex}\n              editable={!item.inline}\n              onEdit={this.handleEditModalVisible}\n              onDelete={this.handleRemove}\n              onShift={this.handleShift}\n            />\n          )}\n          {React.Children.map(this.props.children, child =>\n            React.cloneElement(child as any, {\n              editModalVisible,\n              handleEditModalVisible: this.handleEditModalVisible,\n            })\n          )}\n        </div>\n      )\n    )\n  }\n}\n\nfunction getItemStyles(props: Partial<Props & State>): React.CSSProperties {\n  const { isDragging, tabIndex, draggable, tabSize = 0 } = props\n\n  const isFocus = tabIndex === 1\n\n  return {\n    ...(isFocus ? { borderRadius: 3 } : {}),\n    ...(draggable\n      ? { border: `1px dashed ${draggable ? '#e7e7e7' : 'transparent'}` }\n      : {\n          outlineColor: isFocus ? theme.purple150 : 'transparent',\n        }),\n    cursor: 'default',\n    position: 'relative',\n    display: isDragging ? 'none' : 'block',\n    marginLeft: tabSize * 50,\n  }\n}\n\nexport default compose(withDragSource, withTinyMCE)(Snippet) as typeof Snippet\n","import { Tabs } from 'antd'\nimport styled from 'styled-components'\n\nconst bg = 'rgb(43,193,183)'\n\nexport default styled(Tabs)`\n  &.ant-tabs {\n    .ant-tabs-tab {\n      display: flex;\n      align-items: center;\n      padding: 10px 24px !important;\n      margin-right: 4px !important;\n      color: #fff !important;\n      border-color: ${bg} !important;\n      background: ${bg} !important;\n      border-top-left-radius: 12px !important;\n      border-top-right-radius: 12px !important;\n    }\n\n    .ant-tabs-tab-active {\n      border-color: #fff !important;\n      background: #fff !important;\n\n      svg path {\n        fill: ${p => p.theme.primary} !important;\n      }\n    }\n\n    .ant-tabs-tab .anticon {\n      color: #fff !important;\n    }\n\n    .ant-tabs-tab.is--over {\n      border: 1px dashed lightgrey !important;\n    }\n\n    .ant-tabs-tab.is--dragging {\n      opacity: 0.3;\n    }\n\n    > .ant-tabs-nav .ant-tabs-nav-add,\n    .ant-tabs > div > .ant-tabs-nav .ant-tabs-nav-add {\n      background: transparent;\n      border-color: transparent;\n      color: ${p => p.theme.darkGrey};\n\n      .anticon-plus {\n        color: ${p => p.theme.darkGrey};\n      }\n\n      .anticon-plus:hover {\n        color: ${p => p.theme.primary};\n      }\n    }\n\n    .ant-tabs-tab-btn:focus,\n    .ant-tabs-tab-remove:focus,\n    .ant-tabs-tab-btn:active,\n    .ant-tabs-tab-remove:active,\n    .ant-tabs-tab.ant-tabs-tab-active .ant-tabs-tab-btn {\n      color: ${p => p.theme.secondary} !important;\n    }\n  }\n\n  &.ant-tabs-top > .ant-tabs-nav,\n  &.ant-tabs-top > div > .ant-tabs-nav {\n    margin-bottom: 0;\n  }\n\n  &.ant-tabs-top > .ant-tabs-nav::before {\n    border-bottom: none;\n  }\n`\n","import React from 'react'\nimport { DragSource, DropTarget } from 'react-dnd'\nimport cx from 'classnames'\nimport { compose } from 'ramda'\nimport Tabs from '@/components/tabs'\n\n// Drag & Drop node\nclass TabNode extends React.Component {\n  render() {\n    const {\n      connectDragSource,\n      connectDropTarget,\n      isDragging,\n      isOver,\n      moveTabNode,\n      draggingItem,\n      id,\n      ...props\n    } = this.props\n\n    return connectDragSource(\n      connectDropTarget(\n        React.cloneElement(props.children, {\n          className: cx(props.children.props.className, {\n            'is--dragging': isDragging,\n            'is--over': isOver && id !== draggingItem?.id,\n          }),\n        })\n      )\n    )\n  }\n}\n\nconst withDropTarget = DropTarget(\n  'DND_NODE',\n  {\n    drop(props, monitor) {\n      const dragKey = monitor.getItem().index\n      const hoverKey = props.index\n\n      if (dragKey === hoverKey) {\n        return\n      }\n\n      props.moveTabNode(dragKey, hoverKey)\n      monitor.getItem().index = hoverKey\n    },\n  },\n  (connect, monitor) => ({\n    connectDropTarget: connect.dropTarget(),\n    isOver: monitor.isOver(),\n    draggingItem: monitor.getItem(),\n  })\n)\n\nconst withDragSource = DragSource(\n  'DND_NODE',\n  {\n    beginDrag(props) {\n      return {\n        id: props.id,\n        index: props.index,\n      }\n    },\n  },\n  (connect, monitor) => ({\n    connectDragSource: connect.dragSource(),\n    isDragging: monitor.isDragging(),\n  })\n)\n\nconst WrapTabNode = compose(withDropTarget, withDragSource)(TabNode)\n\nexport default class DraggableTabs extends React.Component {\n  static defaultProps = {\n    order: [],\n  }\n\n  moveTabNode = (dragKey, hoverKey) => {\n    const { children, order, moveTabNode } = this.props\n    const newOrder = order.slice()\n\n    React.Children.forEach(children, c => {\n      if (newOrder.indexOf(c.key) === -1) {\n        newOrder.push(c.key)\n      }\n    })\n\n    const dragIndex = newOrder.indexOf(dragKey)\n    const hoverIndex = newOrder.indexOf(hoverKey)\n\n    newOrder.splice(dragIndex, 1)\n    newOrder.splice(hoverIndex, 0, dragKey)\n\n    moveTabNode(newOrder)\n  }\n\n  renderTabBar = (props, DefaultTabBar) => (\n    <DefaultTabBar {...props}>\n      {node => (\n        <WrapTabNode\n          key={node.key}\n          id={node.key}\n          index={node.key}\n          moveTabNode={this.moveTabNode}>\n          {node}\n        </WrapTabNode>\n      )}\n    </DefaultTabBar>\n  )\n\n  render() {\n    const { moveTabNode, children, ...props } = this.props\n\n    return (\n      <Tabs renderTabBar={this.renderTabBar} {...props}>\n        {children}\n      </Tabs>\n    )\n  }\n}\n\nDraggableTabs.TabPane = Tabs.TabPane\n","import moment from 'moment'\nimport { envStore } from '@/constants/env'\nconst {\n  forEach,\n  addIndex,\n  map,\n  isEmpty,\n  either,\n  compose,\n  not,\n  isNil: RisNil,\n  path,\n} = require('ramda')\n\nexport function queryString(search: string): { [key: string]: any } {\n  if (!search) {\n    search = window.location.search\n  }\n\n  const params = new URLSearchParams(search)\n\n  let result: object | any = {}\n\n  params.forEach((value: string, key: string) => (result[key] = value))\n\n  return result\n}\n\nexport function uuid() {\n  let d = Date.now()\n  if (\n    typeof performance !== 'undefined' &&\n    typeof performance.now === 'function'\n  ) {\n    d += performance.now()\n  }\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {\n    const r = (d + Math.random() * 16) % 16 | 0\n    d = Math.floor(d / 16)\n    return (c === 'x' ? r : (r & 0x3) | 0x8).toString(16)\n  })\n}\n\nexport function isUUID(uuid: string) {\n  return /^[0-9a-f]{8}-[0-9a-f]{4}-[0-5][0-9a-f]{3}-[089ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(\n    uuid\n  )\n}\n\nexport const forEachIndexed = addIndex(forEach)\nexport const mapIndexed: any = addIndex(map)\n\nexport const isNil = either(isEmpty, RisNil)\n\nexport const hasPath = (namedPath: Array<string | number>) =>\n  compose(not, isNil, path(namedPath))\n\nexport const getRangeDate = (\n  date: [moment.Moment, moment.Moment],\n  dateFormat?: string\n) => {\n  const [startDate, stopDate] = date\n\n  return [\n    startDate\n      ? dateFormat\n        ? startDate.format(dateFormat)\n        : startDate.toISOString()\n      : undefined,\n    stopDate\n      ? dateFormat\n        ? stopDate.format(dateFormat)\n        : stopDate.toISOString()\n      : undefined,\n  ]\n}\n\nexport const toThousandSeparator = (number: number | string) => {\n  if (number && (typeof number === 'number' || isNaN(number as any))) {\n    return number.toLocaleString()\n  }\n  return number\n}\n\nexport const capitalize = (s: string) => {\n  if (typeof s !== 'string') return ''\n  return s.charAt(0).toUpperCase() + s.slice(1)\n}\n\nexport function getNumberFromString(str?: string) {\n  if (!str) {\n    return str\n  }\n  return str.replace(/[^\\d.]/g, '')\n}\n\nexport const redirect = () => {\n  if (!envStore.isEnvDev && window.location.pathname === '/') {\n    window.location.href = envStore.appUrl\n    return\n  }\n}\n","import store from 'store'\nimport moment from 'moment'\nimport { update } from 'ramda'\nimport { Mutation, MutationOptions } from '@/constants/types'\nimport {\n  ReportTemplate,\n  useReportTemplateState,\n  useReportList,\n} from '@/hooks/useReportTemplate'\nimport { uuid } from '@/utils/webHelper'\n\nexport const useAddNewTemplate = ({ onCompleted }: MutationOptions = {}) => {\n  const [reportTemplates, setReportTemplates] = useReportTemplateState()\n\n  const handler = (values: ReportTemplate) => {\n    let id = uuid()\n    let newList = [\n      ...reportTemplates,\n      {\n        ...values,\n        id,\n        createdAt: moment(),\n        createdAtStr: moment().format('YYYY/MM/DD HH:mm'),\n        updatedAt: moment(),\n        updatedAtStr: moment().format('YYYY/MM/DD HH:mm'),\n      },\n    ]\n\n    setReportTemplates(newList)\n\n    store.set('reportTemplateListState', newList)\n\n    if (onCompleted) {\n      onCompleted({ ...values, id })\n    }\n  }\n\n  return [false, handler] as Mutation\n}\n\nexport const deleteTemplate = () => {}\n\nexport const useUpdateTemplate = (options: MutationOptions = {}) => {\n  const [reportTemplates, setReportTemplates] = useReportTemplateState()\n\n  const handler = (values: ReportTemplate) => {\n    let index = reportTemplates.findIndex(x => `${x.id}` === `${values.id}`)\n    let newList = update(\n      index,\n      {\n        ...values,\n        updatedAt: moment(),\n        updatedAtStr: moment().format('YYYY/MM/DD HH:mm'),\n      },\n      reportTemplates\n    )\n\n    setReportTemplates(newList)\n\n    store.set('reportTemplateListState', newList)\n  }\n\n  return [false, handler] as Mutation\n}\n\nexport const useAddNewReport = ({ onCompleted }: MutationOptions = {}) => {\n  const [reportList, setReportList] = useReportList()\n  const handler = (values: any) => {\n    let id = uuid()\n    let newList = [\n      ...reportList,\n      {\n        ...values,\n        id,\n        createdAt: moment(),\n        createdAtStr: moment().format('YYYY/MM/DD HH:mm'),\n        updatedAt: moment(),\n        updatedAtStr: moment().format('YYYY/MM/DD HH:mm'),\n      },\n    ]\n\n    setReportList(newList)\n    store.set('reportListState', newList)\n\n    if (onCompleted) {\n      onCompleted({ ...values, id })\n    }\n  }\n  return [false, handler] as Mutation\n}\n\nexport const useUpdateReport = (options: MutationOptions = {}) => {\n  const [reportList, setReportList] = useReportList()\n\n  const handler = (values: any) => {\n    let index = reportList.findIndex((x: any) => `${x.id}` === `${values.id}`)\n    let newList = update(\n      index,\n      {\n        ...values,\n        updatedAt: moment(),\n        updatedAtStr: moment().format('YYYY/MM/DD HH:mm'),\n      },\n      reportList\n    )\n    setReportList(newList)\n    store.set('reportListState', newList)\n  }\n  return [false, handler] as Mutation\n}\n","import React from 'react'\nimport { replace } from 'ramda'\nimport { envStore } from '@/constants/env'\n\nexport interface UseTitleOptions {\n  restoreOnUnmount?: boolean\n}\n\nconst DEFAULT_USE_TITLE_OPTIONS: UseTitleOptions = {\n  restoreOnUnmount: false,\n}\n\nfunction useTitle(\n  title: string,\n  options: UseTitleOptions = DEFAULT_USE_TITLE_OPTIONS\n) {\n  const prevTitleRef = React.useRef(document.title)\n  document.title = replace(/%s/, title)(envStore.appTitle)\n  React.useEffect(() => {\n    if (options && options.restoreOnUnmount) {\n      return () => {\n        document.title = prevTitleRef.current // eslint-disable-line\n      }\n    } else {\n      return\n    }\n  }, []) // eslint-disable-line\n}\n\nexport default typeof document !== 'undefined'\n  ? useTitle\n  : (_title: string) => {}\n","import React from 'react'\nimport { Layout } from 'antd'\nimport cx from 'classnames'\nimport AppFooter from '@/components/app-footer'\nimport theme from '../theme'\n\ninterface PageProps {\n  children: React.ReactNode\n  style?: React.CSSProperties\n  className?: string\n  wrapperClassName?: string\n  wrapperStyle?: React.CSSProperties\n}\n\nexport function Page({ children, style, className = 'pr-16' }: PageProps) {\n  return (\n    <Layout>\n      <Layout.Content\n        style={{\n          background: `linear-gradient(-90deg,#42c2b8,${theme.primary})`,\n        }}>\n        <div\n          className={cx('pl-8 pt-6 pb-12', className)}\n          style={style}\n          css={{\n            background: 'rgb(221, 228, 237)',\n            borderTopLeftRadius: 32,\n            borderTopRightRadius: 32,\n          }}>\n          {children}\n        </div>\n      </Layout.Content>\n      <AppFooter />\n    </Layout>\n  )\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport { Modal } from 'antd'\nimport { ModalProps } from 'antd/lib/modal'\n\nconst StyledModal = styled(Modal)`\n  animation-duration: 0s !important;\n  transition: none !important;\n\n  .ant-modal-header--border-none {\n    border-bottom: none;\n  }\n\n  .ant-modal-footer {\n    padding-top: 14px;\n    padding-bottom: 14px;\n  }\n`\n\nexport default class ModalComponent extends React.Component<ModalProps, any> {\n  static confirm = Modal.confirm\n  static error = Modal.error\n  static success = Modal.success\n  static info = Modal.info\n\n  render() {\n    return <StyledModal {...this.props}>{this.props.children}</StyledModal>\n  }\n}\n","import React from 'react'\nimport { Table, Empty, Tooltip } from 'antd'\nimport { TableProps } from 'antd/lib/table'\nimport { CloseOutlined, PlusOutlined } from '@ant-design/icons'\nimport styled from 'styled-components'\n\nconst StyledTable: any = styled(Table)`\n  &.ant-table-wrapper {\n    .ant-pagination-prev .ant-pagination-item-link,\n    .ant-pagination-next .ant-pagination-item-link {\n      border-color: ${p => p.theme.pagination};\n      border-radius: 6px;\n      color: ${p => p.theme.pagination};\n    }\n\n    .ant-pagination-item {\n      border-color: ${p => p.theme.pagination};\n    }\n\n    .ant-pagination-item a {\n      color: ${p => p.theme.pagination};\n    }\n\n    .ant-pagination-item-active,\n    .ant-pagination-item-active:focus,\n    .ant-pagination-item:hover {\n      border-color: ${p => p.theme.pagination};\n      background: ${p => p.theme.pagination};\n\n      a {\n        color: #fff;\n      }\n    }\n\n    .ant-table-pagination.ant-pagination {\n      margin-top: 32px;\n    }\n\n    .ant-pagination-prev:hover .ant-pagination-item-link,\n    .ant-pagination-next:hover .ant-pagination-item-link {\n      border-color: ${p => p.theme.pagination};\n      background: ${p => p.theme.pagination};\n      color: #fff;\n    }\n\n    .ant-pagination-simple-pager {\n      color: ${p => p.theme.pagination};\n    }\n  }\n\n  .ant-table-tbody > tr > td {\n    height: 40px;\n    padding-top: 10px;\n    padding-bottom: 10px;\n    line-height: 1em;\n    color: #4a4a4a;\n    background: #f0f2f5;\n    border-bottom: 1px solid #e9e9e9;\n  }\n\n  .ant-table-thead > tr > th {\n    background: rgb(39, 189, 179);\n    border-bottom: 1px solid #e9e9e9;\n    color: #fff;\n    font-weight: 600;\n    font-size: 16px;\n  }\n`\n\ntype Props<T> = TableProps<T> & {\n  editable?: boolean\n  isRowDeletable?: (row: T) => boolean\n  onAddRowClick?: (param?: any) => any\n  onDeleteRowClick?: (param?: any) => any\n  isCanEdit?: any\n}\n\nfunction TableComponent<T = any>({\n  editable = false,\n  columns = [],\n  onAddRowClick,\n  isRowDeletable = () => true,\n  onDeleteRowClick,\n  isCanEdit = '',\n  ...props\n}: Props<T>) {\n  const _columns = React.useMemo(() => {\n    let canEdit: boolean = true\n    if (!editable) {\n      return columns\n    }\n    if (isCanEdit !== '') {\n      canEdit = isCanEdit\n    }\n\n    const handleRowDelete = (key: React.Key) => () => {\n      if (onDeleteRowClick) {\n        onDeleteRowClick(key)\n      }\n    }\n\n    return [\n      {\n        title: (\n          <Tooltip placement=\"topLeft\" title=\"新增\">\n            <PlusOutlined\n              className=\"ml-1 relative\"\n              style={{ top: -3 }}\n              onClick={canEdit ? onAddRowClick : undefined}\n            />\n          </Tooltip>\n        ),\n        width: 50,\n        render: (_: any, __: any, idx: number) => (\n          <div className=\"text-center\">#{idx + 1}</div>\n        ),\n      },\n      ...columns,\n      {\n        width: 50,\n        render: (_: any, r: any, idx: number) => (\n          <Tooltip placement=\"topLeft\" title=\"刪除\">\n            <CloseOutlined\n              onClick={isRowDeletable(r) ? handleRowDelete(r.id) : undefined}\n            />\n          </Tooltip>\n        ),\n      },\n    ]\n  }, [columns, editable]) // eslint-disable-line\n\n  return (\n    <StyledTable\n      columns={_columns}\n      locale={{\n        emptyText: (\n          <Empty\n            image={Empty.PRESENTED_IMAGE_SIMPLE}\n            description={\n              <span>\n                <span className=\"d-block\">\n                  尚無資料，請點選「＋新增」新增資料。\n                </span>\n              </span>\n            }\n          />\n        ),\n      }}\n      {...props}>\n      {props.children}\n    </StyledTable>\n  )\n}\n\nTableComponent.displayName = 'Table'\nTableComponent.Column = Table.Column\n\nexport default TableComponent\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { findDOMNode } from 'react-dom'\nimport { DndContext } from 'react-dnd'\nimport throttle from 'lodash.throttle'\nimport raf from 'raf'\nimport hoist from 'hoist-non-react-statics'\nimport getDisplayName from '@/utils/get-display-name'\n\nfunction noop() {}\n\nfunction intBetween(min, max, val) {\n  return Math.floor(Math.min(max, Math.max(min, val)))\n}\n\nfunction getCoords(evt) {\n  if (evt.type === 'touchmove') {\n    return {\n      x: evt.changedTouches[0].clientX,\n      y: evt.changedTouches[0].clientY,\n    }\n  }\n\n  return { x: evt.clientX, y: evt.clientY }\n}\n\nconst DEFAULT_BUFFER = 150\n\nexport function createHorizontalStrength(_buffer) {\n  return function defaultHorizontalStrength({ x, w, y, h }, point) {\n    const buffer = Math.min(w / 2, _buffer)\n    const inRange = point.x >= x && point.x <= x + w\n    const inBox = inRange && point.y >= y && point.y <= y + h\n\n    if (inBox) {\n      if (point.x < x + buffer) {\n        return (point.x - x - buffer) / buffer\n      } else if (point.x > x + w - buffer) {\n        return -(x + w - point.x - buffer) / buffer\n      }\n    }\n\n    return 0\n  }\n}\n\nexport function createVerticalStrength(_buffer) {\n  return function defaultVerticalStrength({ y, h, x, w }, point) {\n    const buffer = Math.min(h / 2, _buffer)\n    const inRange = point.y >= y && point.y <= y + h\n    const inBox = inRange && point.x >= x && point.x <= x + w\n\n    if (inBox) {\n      if (point.y < y + buffer) {\n        return (point.y - y - buffer) / buffer\n      } else if (point.y > y + h - buffer) {\n        return -(y + h - point.y - buffer) / buffer\n      }\n    }\n\n    return 0\n  }\n}\n\nexport const defaultHorizontalStrength = createHorizontalStrength(\n  DEFAULT_BUFFER\n)\n\nexport const defaultVerticalStrength = createVerticalStrength(DEFAULT_BUFFER)\n\nexport default function createScrollingComponent(WrappedComponent) {\n  class ScrollingComponent extends React.Component {\n    static displayName = `Scrolling(${getDisplayName(WrappedComponent)})`\n\n    static propTypes = {\n      onScrollChange: PropTypes.func,\n      verticalStrength: PropTypes.func,\n      horizontalStrength: PropTypes.func,\n      strengthMultiplier: PropTypes.number,\n    }\n\n    static defaultProps = {\n      useScroll: true,\n      onScrollChange: noop,\n      verticalStrength: defaultVerticalStrength,\n      horizontalStrength: defaultHorizontalStrength,\n      strengthMultiplier: 30,\n    }\n\n    static contextType = DndContext\n\n    constructor(props, ctx) {\n      super(props, ctx)\n\n      this.scaleX = 0\n      this.scaleY = 0\n      this.frame = null\n\n      this.attached = false\n      this.dragging = false\n    }\n\n    componentDidMount() {\n      if (this.props.useScroll) {\n        this._initial()\n      }\n    }\n\n    _initial() {\n      // window.document.body.addEventListener('dragover', this.handleEvent);\n      this.container = findDOMNode(this.wrappedInstance)\n      this.container.addEventListener('dragover', this.handleEvent)\n      // touchmove events don't seem to work across siblings, so we unfortunately\n      // have to attach the listeners to the body\n      window.document.body.addEventListener('touchmove', this.handleEvent)\n\n      this.clearMonitorSubscription = this.context.dragDropManager\n        .getMonitor()\n        .subscribeToStateChange(() => this.handleMonitorChange())\n    }\n\n    componentWillUnmount() {\n      if (this.props.useScroll) {\n        this._remove()\n      }\n    }\n\n    _remove() {\n      // window.document.body.removeEventListener('dragover', this.handleEvent);\n      this.container.removeEventListener('dragover', this.handleEvent)\n      window.document.body.removeEventListener('touchmove', this.handleEvent)\n      this.clearMonitorSubscription()\n      this.stopScrolling()\n    }\n\n    handleEvent = evt => {\n      if (this.dragging && !this.attached) {\n        this.attach()\n        this.updateScrolling(evt)\n      }\n    }\n\n    handleMonitorChange() {\n      const isDragging = this.context.dragDropManager.getMonitor().isDragging()\n\n      if (!this.dragging && isDragging) {\n        this.dragging = true\n      } else if (this.dragging && !isDragging) {\n        this.dragging = false\n        this.stopScrolling()\n      }\n    }\n\n    attach() {\n      this.attached = true\n      window.document.body.addEventListener('dragover', this.updateScrolling)\n      window.document.body.addEventListener('touchmove', this.updateScrolling)\n    }\n\n    detach() {\n      this.attached = false\n      window.document.body.removeEventListener('dragover', this.updateScrolling)\n      window.document.body.removeEventListener(\n        'touchmove',\n        this.updateScrolling\n      )\n    }\n\n    // Update scaleX and scaleY every 100ms or so\n    // and start scrolling if necessary\n    updateScrolling = throttle(\n      evt => {\n        const {\n          left: x,\n          top: y,\n          width: w,\n          height: h,\n        } = this.container.getBoundingClientRect()\n        const box = { x, y, w, h }\n        const coords = getCoords(evt)\n\n        // calculate strength\n        this.scaleX = this.props.horizontalStrength(box, coords)\n        this.scaleY = this.props.verticalStrength(box, coords)\n\n        // start scrolling if we need to\n        if (!this.frame && (this.scaleX || this.scaleY)) {\n          this.startScrolling()\n        }\n      },\n      100,\n      { trailing: false }\n    )\n\n    startScrolling() {\n      let i = 0\n      const tick = () => {\n        const { scaleX, scaleY, container } = this\n        const { strengthMultiplier, onScrollChange } = this.props\n\n        // stop scrolling if there's nothing to do\n        if (strengthMultiplier === 0 || scaleX + scaleY === 0) {\n          this.stopScrolling()\n          return\n        }\n\n        // there's a bug in safari where it seems like we can't get\n        // mousemove events from a container that also emits a scroll\n        // event that same frame. So we double the strengthMultiplier and only adjust\n        // the scroll position at 30fps\n        if (i++ % 2) {\n          const {\n            scrollLeft,\n            scrollTop,\n            scrollWidth,\n            scrollHeight,\n            clientWidth,\n            clientHeight,\n          } = container\n\n          const newLeft = scaleX\n            ? (container.scrollLeft = intBetween(\n                0,\n                scrollWidth - clientWidth,\n                scrollLeft + scaleX * strengthMultiplier\n              ))\n            : scrollLeft\n\n          const newTop = scaleY\n            ? (container.scrollTop = intBetween(\n                0,\n                scrollHeight - clientHeight,\n                scrollTop + scaleY * strengthMultiplier\n              ))\n            : scrollTop\n\n          onScrollChange(newLeft, newTop)\n        }\n        this.frame = raf(tick)\n      }\n\n      tick()\n    }\n\n    stopScrolling() {\n      this.detach()\n      this.scaleX = 0\n      this.scaleY = 0\n\n      if (this.frame) {\n        raf.cancel(this.frame)\n        this.frame = null\n      }\n    }\n\n    render() {\n      const {\n        // not passing down these props\n        strengthMultiplier,\n        verticalStrength,\n        horizontalStrength,\n        onScrollChange,\n        ...props\n      } = this.props\n\n      return (\n        <WrappedComponent\n          ref={ref => {\n            this.wrappedInstance = ref\n          }}\n          {...props}\n        />\n      )\n    }\n  }\n\n  return hoist(ScrollingComponent, WrappedComponent)\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport cx from 'classnames'\nimport withScroll, { createVerticalStrength } from './withScroll'\n\ninterface Props {\n  className?: string\n  useScroll?: boolean\n}\n\nconst DndScrollableElement = styled.div`\n  height: 85vh;\n  padding-top: 0;\n  overflow-y: scroll;\n\n  .report-template-builder {\n    &__main-content {\n      min-height: 371.25mm;\n      margin: 0 auto;\n      padding: 16px;\n      box-sizing: border-box;\n      max-width: 100%;\n      background: #fff;\n      border-top-right-radius: 16px;\n      border-bottom-left-radius: 16px;\n      border-bottom-right-radius: 16px;\n    }\n\n    &__contentarea {\n      min-height: 348.75mm;\n    }\n\n    &__contentarea--fixed-layout {\n      min-height: auto;\n    }\n\n    &__snippet-toolbar {\n      visibility: hidden;\n    }\n  }\n\n  .ui-draggable {\n    &:focus,\n    &:active {\n      outline: 0;\n\n      .course-builder__snippet-toolbar {\n        visibility: visible;\n        opacity: 1;\n        transition: visibility 0s, opacity 0.3s, max-height 0.6s linear;\n      }\n    }\n  }\n\n  &.is--preview {\n    height: auto;\n  }\n`\n\nconst ScrollableComponent = withScroll(DndScrollableElement)\n\nconst vStrength = createVerticalStrength(150)\n\nexport default class ReactDndProvider extends React.Component<Props> {\n  static defaultProps = {\n    useScroll: true,\n  }\n\n  render() {\n    const { className, useScroll } = this.props\n\n    return (\n      <ScrollableComponent\n        useScroll={useScroll}\n        verticalStrength={vStrength}\n        strengthMultiplier={100}\n        className={cx('report-template-builder', className)}>\n        {this.props.children}\n      </ScrollableComponent>\n    )\n  }\n}\n","import { Input } from 'antd'\nimport styled, { css } from 'styled-components'\n\nconst borderLess = css`\n  &.ant-input-borderless {\n    border: none;\n    border-bottom: 1px solid ${p => p.theme.primary};\n    border-bottom-left-radius: 0;\n    border-bottom-right-radius: 0;\n  }\n\n  &:active:not(.ant-input-borderless) {\n    box-shadow: 0 0 0 1px ${p => p.theme.primary};\n  }\n`\n\nconst StyledInput = styled(Input)`\n  &.ant-input-affix-wrapper .ant-input,\n  &.ant-input {\n    border-color: ${p => p.theme.primary};\n\n    &:hover,\n    &:focus {\n      border-color: ${p => p.theme.secondary};\n    }\n\n    ${borderLess};\n  }\n`\n\nconst Search = styled(Input.Search)`\n  &.ant-input-search {\n    .ant-input {\n      border-color: ${p => p.theme.primary};\n\n      &:hover,\n      &:focus {\n        border-color: ${p => p.theme.secondary};\n      }\n\n      &:focus {\n        box-shadow: 0 0 0 1px ${p => p.theme.primary};\n      }\n    }\n\n    .anticon-search {\n      font-size: 20px;\n      color: ${p => p.theme.primary};\n    }\n  }\n`\n\nconst TextArea = styled(Input.TextArea)`\n  &.ant-input {\n    resize: none;\n    border: 1px solid ${p => p.theme.primary};\n\n    &:hover,\n    &:focus {\n      border-color: ${p => p.theme.secondary};\n    }\n\n    ${borderLess};\n  }\n`\n\nexport { StyledInput as Input, TextArea, Search }\n\nexport default StyledInput\n","import React from 'react'\nimport { Layout } from 'antd'\n\nexport default function AppFooter() {\n  return (\n    <Layout.Footer\n      className=\"pb-6 text-center text-gray-600 border-t border-gray-400\"\n      style={{ background: 'rgb(221, 228, 237)' }}>\n      2020 高雄榮總數位病理平台\n    </Layout.Footer>\n  )\n}\n","const primary = '#38a8a9'\n\nmodule.exports = {\n  primary,\n  secondary: '#42c2b8',\n  danger: '#d74c4c',\n  darkGrey: '#4a4a4a',\n  purple150: 'rgba(115, 105, 215, 0.15)',\n  cornblue: '#a9b6d8',\n  comet: '#555977',\n  btn: {\n    danger: '#d74c4c',\n    primary: '#2c908a',\n    secondary: '#42c2b8',\n  },\n  sider: {\n    bg: primary,\n  },\n  pagination: primary,\n}\n","import React from 'react'\nimport { atom, useRecoilState, selectorFamily } from 'recoil'\nimport {\n  find,\n  mergeAll,\n  map,\n  values,\n  head,\n  keys,\n  pathOr,\n  sort,\n  last as Rlast,\n  omit,\n  inc,\n  filter,\n  flatten,\n  length,\n  path,\n} from 'ramda'\nimport Store from 'store'\nimport moment from 'moment'\nimport { reportTemplateById } from '@/components/report-template-list'\nimport { getNumberFromString } from '@/utils/webHelper'\nimport { confirm } from '@/utils/message'\nimport { SnippetProps, ReportTemplateSetting } from '@/constants/types'\n\nconst { compose } = require('ramda')\n\nexport type Snippets = { [key: string]: SnippetProps[] }\n\nexport type ReportTemplate = {\n  id: any // React.Key\n  name: string\n  author: string\n  status: 1\n  statusName: string\n  createdAt: moment.Moment\n  createdAtStr: string\n  updatedAt: moment.Moment\n  updatedAtStr: string\n  description: string\n  setting: Snippets\n}\n\n// 模版分類\nconst snippetCategoryOfReport = {\n  PATHOLOGICAL_DIAGNOSIS: 'Pathological diagnosis',\n  GROSS: 'Gross',\n  MICROSCOPY: 'Microscopy',\n  NOTES: 'Notes',\n  REFERENCES: 'References',\n}\n\nconst setComponent = compose(\n  map((x: ReportTemplate) => ({\n    ...x,\n    setting: compose(\n      mergeAll,\n      map((key: string) => ({\n        [key]: compose(\n          map((s: SnippetProps) => ({\n            ...s,\n            Component: path([s.type, 'Component'])(reportTemplateById),\n          })),\n          pathOr([], ['setting', key])\n        )(x),\n      })),\n      keys,\n      pathOr({}, ['setting'])\n    )(x),\n  })),\n  pathOr([], [])\n)\n\nconst fakeReportTemplateList: ReportTemplate[] = setComponent(\n  Store.get('reportTemplateListState')\n)\n\nconst defaultSnippetsOfReport = compose(\n  mergeAll,\n  map((key: string) => ({ [key]: [] })),\n  values\n)(snippetCategoryOfReport)\n\nconst reportTemplateListState = atom({\n  key: 'reportTemplateListState',\n  default: fakeReportTemplateList,\n})\n\nexport const snippetsOfReportState = selectorFamily<\n  ReportTemplate,\n  React.Key | undefined\n>({\n  key: 'reportSnippetsState',\n  get: id => ({ get }) => {\n    console.log(id)\n    console.log(setComponent(get(reportTemplateListState)))\n    return compose(\n      // pathOr(defaultSnippetsOfReport, ['setting']),\n      find((x: ReportTemplate) => `${x.id}` === `${id}`)\n    )(setComponent(get(reportTemplateListState)))\n  },\n})\n\nconst reportPreviewState = atom({\n  key: 'reportPreviewState',\n  default: false,\n})\n\nconst categoryState = atom<string>({\n  key: 'categoryState',\n  default: compose(head, values)(snippetCategoryOfReport),\n})\n\nexport const reportListState = atom({\n  key: 'reportListState',\n  default: setComponent(Store.get('reportListState') || []),\n})\n\n// 輸入報告清單\nexport function useReportList() {\n  return useRecoilState(reportListState)\n}\n\n// 報告模版清單\nexport function useReportTemplates() {\n  const [reportTemplates] = useRecoilState(reportTemplateListState)\n\n  return {\n    content: reportTemplates,\n    total: length(reportTemplates),\n  }\n}\n\n// 報告模版清單\nexport function useReportTemplateState() {\n  return useRecoilState(reportTemplateListState)\n}\n\n// 模版報告資料\nexport function useReportTemplate(id?: React.Key) {\n  const [reportTemplateList] = useRecoilState(reportTemplateListState)\n\n  const [reportTemplate, setReportTemplate] = React.useState<ReportTemplate>({\n    setting: defaultSnippetsOfReport,\n  } as any)\n\n  // const [reportTemplate] = useRecoilState<ReportTemplate>(\n  //   snippetsOfReportState(id) as any\n  // )\n\n  React.useEffect(() => {\n    console.log(id)\n    if (id) {\n      console.log(id)\n      console.log(\n        compose(\n          // pathOr(defaultSnippetsOfReport, ['setting']),\n          find((x: ReportTemplate) => `${x.id}` === `${id}`)\n        )(setComponent(reportTemplateList))\n      )\n      setReportTemplate(\n        compose(\n          // pathOr(defaultSnippetsOfReport, ['setting']),\n          find((x: ReportTemplate) => `${x.id}` === `${id}`)\n        )(setComponent(reportTemplateList))\n      )\n    }\n  }, [id]) // eslint-disable-line\n\n  let _snippetList = pathOr(defaultSnippetsOfReport, ['setting'])(\n    reportTemplate\n  )\n\n  React.useEffect(() => {\n    setSnippetList(_snippetList)\n  }, [JSON.stringify(_snippetList)]) // eslint-disable-line\n\n  const [snippetList, setSnippetList] = React.useState<Snippets>(_snippetList)\n\n  const [category, setCategory] = useRecoilState(categoryState)\n\n  const handleSnippetUpdate = (data: any[]) => {\n    setSnippetList(prev => ({ ...prev, [category]: data }))\n  }\n\n  const handleTabChange = (activeKey: string) => {\n    setCategory(activeKey)\n  }\n\n  const handleTabMove = (order: string[]) => {\n    const snippetKeys = keys(snippetList)\n\n    setSnippetList(\n      compose(\n        mergeAll,\n        map((key: string) => ({ [key]: snippetList[key] })),\n        sort((a: string, b: string) => {\n          const orderA = order.indexOf(a)\n          const orderB = order.indexOf(b)\n\n          if (orderA !== -1 && orderB !== -1) {\n            return orderA - orderB\n          }\n          if (orderA !== -1) {\n            return -1\n          }\n          if (orderB !== -1) {\n            return 1\n          }\n\n          const ia = snippetKeys.indexOf(a)\n          const ib = snippetKeys.indexOf(b)\n\n          return ia - ib\n        }),\n        keys\n      )(snippetList)\n    )\n  }\n\n  const handleTabAdd = () => {\n    const last = compose(\n      inc,\n      pathOr(0, []),\n      getNumberFromString,\n      Rlast,\n      sort((a: any, b: any) => a - b),\n      keys\n    )(snippetList)\n\n    setSnippetList(prev => ({ ...prev, [`新標籤頁${last}`]: [] }))\n    setCategory(`新標籤頁${last}`)\n  }\n\n  const handleTabRemove = (targetKey: string) => {\n    confirm({\n      title: '確認要刪除此頁籤嗎？',\n      content: '刪除會連同模版資料一起刪除，確認繼續？',\n      onOk: () => {\n        setSnippetList(prev => omit([targetKey], prev))\n\n        if (category === targetKey) {\n          setCategory(\n            compose(\n              Rlast,\n              filter((key: string) => key !== targetKey),\n              keys\n            )(snippetList)\n          )\n        }\n      },\n    })\n  }\n\n  const handleTabNameChange = (targetKey: string) => (\n    evt: React.FocusEvent<HTMLSpanElement>\n  ) => {\n    const newTabName = evt.target.innerHTML\n\n    setSnippetList(prev =>\n      compose(\n        mergeAll,\n        map((key: string) => ({\n          [key === targetKey ? newTabName : key]: prev[key],\n        })),\n        keys\n      )(prev)\n    )\n    setCategory(newTabName)\n  }\n\n  const handleTabEdit = (\n    e:\n      | string\n      | React.MouseEvent<Element, MouseEvent>\n      | React.KeyboardEvent<Element>,\n    action: 'add' | 'remove'\n  ) => {\n    const handler = action === 'add' ? handleTabAdd : handleTabRemove\n\n    handler(e as string)\n  }\n\n  let snippetById: { [key: string]: SnippetProps } = {}\n\n  return {\n    category,\n    reportTemplate,\n    snippetList,\n    setCategory,\n    setSnippetList,\n    handleTabEdit,\n    handleTabChange,\n    handleTabMove,\n    handleTabAdd,\n    handleTabRemove,\n    handleTabNameChange,\n    handleSnippetUpdate,\n    total: compose(length, flatten, values)(snippetList),\n    snippetById: compose(\n      map((x: SnippetProps) => (snippetById[x.id] = x)),\n      flatten,\n      values\n    )(snippetList),\n  }\n}\n\n// 切換編輯/檢視模式\nexport function useReportPreview() {\n  const [isPreview, setIsPreview] = useRecoilState(reportPreviewState)\n\n  return [isPreview, () => setIsPreview(prev => !prev)] as [boolean, () => void]\n}\n\n// 更方便切換編輯/檢視模式\nexport function useToggleReportPreview(state: boolean = false) {\n  const [isPreview, setIsPreview] = useRecoilState(reportPreviewState)\n\n  React.useEffect(() => {\n    setIsPreview(state)\n\n    return () => {\n      setIsPreview(false)\n    }\n  }, [state]) // eslint-disable-line\n\n  return [isPreview, () => setIsPreview(prev => !prev)] as [boolean, () => void]\n}\n\nexport function useUpdateSnippet<T = ReportTemplateSetting>(options: {\n  item: SnippetProps\n  onUpdate: (data: any) => void\n  defaultValue?: any\n}) {\n  const { item, onUpdate, defaultValue = {} } = options\n\n  const [setting, setSetting] = React.useState<T>(\n    pathOr(defaultValue, ['setting'], item) as T\n  )\n\n  const handleOk = (values: T) => {\n    setSetting(values)\n    onUpdate({ ...item, setting: values })\n  }\n\n  return { setting, handleOk }\n}\n","export enum ActionTypes {\n  DELETABLE = 'deletable',\n  UPDATABLE = 'updatable',\n  CREATABLE = 'creatable',\n  READABLE = 'readable',\n}\n\nexport const reportAnnotations = [\n  '檢體不適當',\n  '不符合',\n  '通知惡性或疑似',\n  '通知癌前病灶',\n  '其他危險值',\n  '肺結核',\n  '是否保留',\n]\n","import useSwr from 'swr'\nimport request from '@/utils/request'\nimport { pathOr, head } from 'ramda'\nconst { compose } = require('ramda')\n\nexport function usePathology() {\n  const { data, ...others } = useSwr(`/api/b2/getPathologyResult`, url =>\n    request(url, {\n      method: 'POST',\n      body: {\n        classification: 'pathorderview',\n        noType: 'HHISNUM',\n        no: '16685033',\n      },\n    })\n  )\n\n  return {\n    ...others,\n    data: compose(head, pathOr({}, ['result']))(data),\n  }\n}\n","import React from 'react'\nimport { CheckOutlined } from '@ant-design/icons'\nimport { replace, join, dropLast, split } from 'ramda'\nimport { envStore } from '@/constants/env'\nimport Button from '@/components/button'\nimport Select from '@/components/select'\nimport { confirm } from '@/utils/message'\nimport history from '@/utils/history'\nimport { REPORT_INQUIRY, RADIOL_IMAGE } from '@/constants/routes'\nconst { compose } = require('ramda')\n\nexport enum menuState {\n  VISIBLE_RIGHT = '1',\n  VISIBLE_LEFT = '2',\n}\n\ntype Props = {\n  rightContentVisible: boolean\n  leftContentVisible: boolean\n  onLayoutChange: (value: string) => void\n  onOk: () => void\n}\n\nexport default function Header({\n  leftContentVisible,\n  rightContentVisible,\n  onLayoutChange,\n  onOk,\n}: Props) {\n  const handleConfirm = () => {\n    confirm({\n      title: '確認要取消嗎？',\n      content: '取消後未儲存的資料將會消失，確認取消嗎？',\n      okText: '確認',\n      onOk: () => {\n        history.push(REPORT_INQUIRY)\n      },\n    })\n  }\n\n  const handleSave = () => {\n    onOk()\n  }\n\n  const handleOpenImageViewer = () => {\n    let pathname = replace(\n      ':studyInstanceUIDs',\n      '1.3.6.1.4.1.14519.5.2.1.5099.8010.199920086920823171706454903251'\n    )(RADIOL_IMAGE)\n\n    // remove last `/`\n    let url = compose(join('/'), dropLast(1), split('/'))(envStore.appUrl)\n\n    window.open(`${url}${pathname}`, '__blank')\n  }\n\n  return (\n    <div className=\"inline-flex\">\n      <Select\n        mode=\"multiple\"\n        placeholder=\"檢 視\"\n        className=\"is--outline cursor-pointer\"\n        style={{ minWidth: 80 }}\n        dropdownMatchSelectWidth={false}\n        dropdownStyle={{ minWidth: 138 }}\n        autoFocus={false}\n        onSelect={onLayoutChange}\n        value={[]}>\n        <Select.Option value={menuState.VISIBLE_LEFT}>\n          <div className=\"flex items-center\">\n            顯示左邊內容\n            {leftContentVisible && <CheckOutlined className=\"ml-4\" />}\n          </div>\n        </Select.Option>\n        <Select.Option value={menuState.VISIBLE_RIGHT}>\n          <div className=\"flex items-center\">\n            顯示右邊內容\n            {rightContentVisible && <CheckOutlined className=\"ml-4\" />}\n          </div>\n        </Select.Option>\n      </Select>\n      <Button\n        color=\"outline\"\n        className=\"ml-2 text-white border-white bg-transparent\"\n        onClick={handleOpenImageViewer}\n        style={{ minWidth: 80 }}>\n        影像\n      </Button>\n      <Button\n        color=\"outline\"\n        className=\"ml-2 text-white border-white bg-transparent\"\n        onClick={handleSave}\n        style={{ minWidth: 80 }}>\n        儲存\n      </Button>\n      <Button\n        color=\"outline\"\n        className=\"ml-2 text-white border-white bg-transparent\"\n        onClick={handleConfirm}\n        style={{ minWidth: 80 }}>\n        取消\n      </Button>\n      <Button\n        color=\"outline\"\n        className=\"ml-6 text-white border-white bg-transparent\">\n        下載 JSON\n      </Button>\n      <Button\n        color=\"outline\"\n        className=\"ml-2 text-white border-white bg-transparent\">\n        輸出報告\n      </Button>\n    </div>\n  )\n}\n","import { Anchor } from 'antd'\nimport styled from 'styled-components'\n\nconst StyledAnchor = styled(Anchor)`\n  &.ant-anchor-wrapper {\n    background: transparent;\n  }\n\n  .fixed {\n    position: relative !important;\n  }\n\n  a:hover,\n  .ant-anchor-link-active > .ant-anchor-link-title {\n    color: ${p => p.theme.primary};\n  }\n\n  .ant-anchor-ink-ball {\n    border: 2px solid ${p => p.theme.primary};\n  }\n\n  .ant-anchor-ink::before {\n    /* background-color: ${p => p.theme.secondary}; */\n  }\n`\n\nconst PieChart = styled.div<{\n  legendWidth?: number\n  chartWidth?: number\n}>`\n  &.pie {\n    position: relative;\n\n    .chart {\n      position: relative;\n    }\n\n    &.hasLegend .chart {\n      width: calc(100% - ${p => p.chartWidth + 'px'});\n    }\n\n    .legend {\n      position: absolute;\n      top: 50%;\n      right: 0;\n      min-width: ${p => p.legendWidth}px;\n      margin: 0 20px;\n      padding: 0;\n      list-style: none;\n      transform: translateY(-50%);\n      li {\n        height: 22px;\n        margin-bottom: 16px;\n        line-height: 22px;\n        cursor: pointer;\n        &:last-child {\n          margin-bottom: 0;\n        }\n      }\n    }\n\n    .dot {\n      position: relative;\n      top: -1px;\n      display: inline-block;\n      width: 8px;\n      height: 8px;\n      margin-right: 8px;\n      border-radius: 8px;\n    }\n\n    .line {\n      display: inline-block;\n      width: 1px;\n      height: 16px;\n      margin-right: 8px;\n      background-color: hsv(0, 0, 91%);\n    }\n\n    .legendTitle {\n      color: rgba(0, 0, 0, 0.65);\n    }\n\n    .percent {\n      color: rgba(0, 0, 0, 0.45);\n    }\n\n    .value {\n      position: absolute;\n      right: 0;\n    }\n\n    .title {\n      margin-bottom: 8px;\n    }\n\n    .total {\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      max-height: 62px;\n      text-align: center;\n      transform: translate(-50%, -50%);\n      font-size: 14px;\n\n      & > h4 {\n        height: 22px;\n        margin-bottom: 8px;\n        color: rgba(0, 0, 0, 0.45);\n        font-weight: normal;\n        font-size: 14px;\n        line-height: 22px;\n      }\n      & > p {\n        display: block;\n        height: 32px;\n        color: rgba(0, 0, 0, 0.85);\n        font-size: 1.2em;\n        line-height: 32px;\n        white-space: nowrap;\n      }\n    }\n  }\n\n  &.legendBlock {\n    &.hasLegend .chart {\n      width: 100%;\n      margin: 0 0 32px 0;\n    }\n    .legend {\n      position: relative;\n      transform: none;\n    }\n  }\n`\n\nexport { StyledAnchor as Anchor, PieChart }\n","/* eslint eqeqeq: 0 */\nimport React from 'react'\n\nexport type IReactComponent<P = any> =\n  | React.StatelessComponent<P>\n  | React.ComponentClass<P>\n  | React.ClassicComponentClass<P>\n\nfunction computeHeight(node: HTMLDivElement) {\n  const totalHeight = parseInt(getComputedStyle(node).height, 10)\n  const padding =\n    parseInt(getComputedStyle(node).paddingTop, 10) +\n    parseInt(getComputedStyle(node).paddingBottom, 10)\n  return totalHeight - padding\n}\n\nfunction getAutoHeight(n: HTMLDivElement | undefined) {\n  if (!n) {\n    return 0\n  }\n\n  let node = n\n\n  let height = computeHeight(node)\n\n  while (!height) {\n    node = node.parentNode as HTMLDivElement\n    if (node) {\n      height = computeHeight(node)\n    } else {\n      break\n    }\n  }\n\n  return height\n}\n\ninterface AutoHeightProps {\n  height?: number\n}\n\nfunction autoHeight() {\n  return <P extends AutoHeightProps>(\n    WrappedComponent: React.ComponentClass<P> | React.FC<P>\n  ) =>\n    class extends React.Component<P & AutoHeightProps> {\n      state = {\n        computedHeight: 0,\n      }\n\n      root: HTMLDivElement | undefined = undefined\n\n      componentDidMount() {\n        const { height } = this.props\n        if (!height) {\n          const h = getAutoHeight(this.root)\n          // eslint-disable-next-line\n          this.setState({ computedHeight: h })\n        }\n      }\n\n      handleRoot = (node: HTMLDivElement) => {\n        this.root = node\n      }\n\n      render() {\n        const { height } = this.props\n        const { computedHeight } = this.state\n        const h = height || computedHeight\n        return (\n          <div ref={this.handleRoot}>\n            {h > 0 && <WrappedComponent {...this.props} height={h} />}\n          </div>\n        )\n      }\n    }\n}\n\nexport default autoHeight\n","import React from 'react'\nimport { RouteComponentProps } from 'react-router-dom'\nimport { Row, Col, BackTop, Affix, Form, Select } from 'antd'\nimport cx from 'classnames'\nimport {\n  map,\n  pathOr,\n  keys,\n  gt,\n  __,\n  length,\n  ifElse,\n  equals,\n  always,\n  filter,\n  values,\n  not,\n} from 'ramda'\nimport useTitle from '@/hooks/useTitle'\nimport { useBreadcrumb, useHeaderContent } from '@/hooks/useApp'\nimport {\n  useReportTemplate,\n  useReportTemplateState,\n  useToggleReportPreview,\n} from '@/hooks/useReportTemplate'\nimport { isNil, mapIndexed } from '@/utils/webHelper'\nimport { SnippetProps } from '@/constants/types'\nimport { reportAnnotations } from '@/constants/enums'\nimport { Page } from '@/components/layout'\nimport ReactDndProvider from '@/components/snippet-scrollable-container'\nimport SnippetsContainer from '@/components/snippets-container'\nimport { Checkbox, CheckboxGroup } from '@/components/checkbox'\nimport Radio from '@/components/radio'\nimport Input from '@/components/input'\nimport Collapse from '@/components/collapse'\nimport SnippetListMenu from '@/components/snippet-list-menu'\nimport { renderSnippets } from '@/components/snippet-utils'\nimport Tabs from '@/components/draggable-tabs'\nimport { useAddNewReport, useUpdateReport } from '@/services/reportTemplate'\nimport { usePathology } from '@/services/pathology'\nimport { Anchor } from './components'\nimport Header from './header'\nimport Pie from './pie'\nconst { compose } = require('ramda')\n\nconst { Link } = Anchor\n\nenum menuState {\n  VISIBLE_RIGHT = '1',\n  VISIBLE_LEFT = '2',\n}\n\n// interface Props extends RouteComponentProps<{ id: string }> {}\n\ninterface Props extends RouteComponentProps<{ id: string }> {\n  id: any\n  reviewDoctor: string\n  serialNo: string\n}\n\nconst col = ifElse(equals(false), always(5), always(0))\n\nexport default function ReportTyping(props: Props) {\n  useTitle('輸入報告')\n  useBreadcrumb([{ name: '輸入報告' }, { name: '病理報告輸入' }])\n  useToggleReportPreview(true)\n\n  const { reviewDoctor, serialNo } = props\n\n  const [form] = Form.useForm()\n\n  const [reportTemplates] = useReportTemplateState()\n\n  const { data /* isValidating */ } = usePathology()\n\n  const [selectedKeys, setSelectedKeys] = React.useState<any[]>([\n    menuState.VISIBLE_LEFT,\n    menuState.VISIBLE_RIGHT,\n  ])\n\n  const [id, setCurrentId] = React.useState(props.id)\n\n  React.useEffect(() => {\n    setCurrentId(props.id)\n  }, [props.id])\n\n  const handleLayoutChange = (value: string) => {\n    setSelectedKeys((prev: string[]) =>\n      prev.includes(value) ? prev.filter(x => x !== value) : [...prev, value]\n    )\n  }\n\n  const leftContentVisible = selectedKeys.includes(menuState.VISIBLE_LEFT)\n  const rightContentVisible = selectedKeys.includes(menuState.VISIBLE_RIGHT)\n\n  const [creating, handleAdd] = useAddNewReport({\n    onCompleted: () => {},\n  })\n\n  const [updating, handleUpdate] = useUpdateReport()\n\n  const handleOk = () => {\n    form.validateFields().then(values => {\n      console.log(props)\n      console.log(values)\n      console.log(snippetList)\n\n      let payload = {\n        ...values,\n        reviewDoctor: props.reviewDoctor,\n        serialNo: props.serialNo,\n      }\n\n      const handler = console.log(payload)\n    })\n  }\n\n  useHeaderContent(\n    <Header\n      leftContentVisible={leftContentVisible}\n      rightContentVisible={rightContentVisible}\n      onLayoutChange={handleLayoutChange}\n      onOk={handleOk}\n    />\n  )\n\n  const handleReportChange = (value: string) => {\n    setCurrentId(value)\n  }\n\n  // const { params } = props.match\n  const {\n    total,\n    category,\n    snippetList,\n    handleTabEdit,\n    handleTabChange,\n    handleTabMove,\n    handleTabNameChange,\n    handleSnippetUpdate,\n  } = useReportTemplate(id)\n\n  const [affixed, setIsAffixed] = React.useState<boolean | undefined>(false)\n\n  const [percentage, setPercentage] = React.useState(0)\n\n  const handleAffixChange = (affixed?: boolean) => {\n    setIsAffixed(affixed)\n  }\n\n  // TODO: 還要切換 category\n  const handleAnchorClick = (\n    e: React.MouseEvent<HTMLElement>,\n    link: {\n      title: React.ReactNode\n      href: string\n    }\n  ) => {\n    e.preventDefault()\n    window.scroll({\n      behavior: 'smooth',\n      left: 0,\n      top: document.getElementById(link.href)?.offsetTop,\n    })\n  }\n\n  const handleValuesChange = React.useCallback(\n    (_: any, { data }: { data: { [key: string]: any } }) => {\n      setPercentage(\n        Math.round(\n          (compose(length, filter(compose(not, isNil)), values)(data) / total) *\n            100\n        )\n      )\n    },\n    [total]\n  )\n\n  React.useEffect(() => {\n    handleValuesChange(null, form.getFieldsValue())\n  }, [total]) // eslint-disable-line\n\n  const renderCategory = (category: string) => {\n    return compose(gt(__, 0), length, pathOr([], [category]))(snippetList) ? (\n      <h2 id={category} className=\"my-2\">\n        {category}\n      </h2>\n    ) : null\n  }\n\n  let colSpan = 14 + col(leftContentVisible) + col(rightContentVisible)\n\n  return (\n    <ReactDndProvider className=\"is--preview\">\n      <BackTop />\n      <Page>\n        <Form form={form} onValuesChange={handleValuesChange}>\n          <Row gutter={16}>\n            {leftContentVisible && (\n              <Col span={5}>\n                <Collapse\n                  // accordion\n                  defaultActiveKey={[1, 2]}\n                  expandIcon={() => null}\n                  className=\"shadow-2xl\">\n                  <Collapse.Panel\n                    header={<div className=\"text-center\">報告內容</div>}\n                    key={1}>\n                    <Row className=\"mb-2 text-sm text-darkGrey\">\n                      <Col span={24} className=\"mb-3\">\n                        <div className=\"inline-block\" css={{ width: 65 }}>\n                          審核醫師\n                        </div>\n                        <Input\n                          className=\"w-2/3\"\n                          bordered={false}\n                          defaultValue={reviewDoctor}\n                        />\n                      </Col>\n                      <Col span={24} className=\"my-3\">\n                        <div className=\"inline-block\" css={{ width: 65 }}>\n                          申請序號\n                        </div>\n                        <Input\n                          className=\"w-2/3\"\n                          bordered={false}\n                          value={serialNo}\n                        />\n                      </Col>\n                      <Col span={24} className=\"my-3\">\n                        <div className=\"inline-block\" css={{ width: 65 }}>\n                          報告格式\n                        </div>\n                        <Select\n                          className=\"w-2/3\"\n                          bordered={false}\n                          defaultValue={id}\n                          onChange={handleReportChange}>\n                          {reportTemplates.map(x => (\n                            <Select.Option key={x.id} value={x.id}>\n                              {x.name}\n                            </Select.Option>\n                          ))}\n                        </Select>\n                      </Col>\n                      <Col span={24} className=\"mt-3\">\n                        <Affix offsetTop={0} onChange={handleAffixChange}>\n                          <Anchor\n                            showInkInFixed\n                            affix={false}\n                            className=\"is--fixed\"\n                            style={getAnchorStyles(affixed)}\n                            onClick={handleAnchorClick}>\n                            {compose(\n                              mapIndexed((key: string, idx: number) => (\n                                <Link\n                                  key={`${key}-${idx}`}\n                                  href={key}\n                                  title={key}>\n                                  {compose(\n                                    mapIndexed((x: SnippetProps) => (\n                                      <Link\n                                        key={x.id}\n                                        href={`${x.id}`}\n                                        title={pathOr(\n                                          x.id,\n                                          ['setting', 'text'],\n                                          x\n                                        )}\n                                      />\n                                    )),\n                                    pathOr([], [key])\n                                  )(snippetList)}\n                                </Link>\n                              )),\n                              keys\n                            )(snippetList)}\n                          </Anchor>\n                        </Affix>\n                      </Col>\n                    </Row>\n                  </Collapse.Panel>\n                  <Collapse.Panel\n                    header={<div className=\"text-center\">模版工具</div>}\n                    key={2}>\n                    <Row>\n                      <Col span={24}>\n                        <SnippetListMenu />\n                      </Col>\n                    </Row>\n                  </Collapse.Panel>\n                </Collapse>\n              </Col>\n            )}\n\n            <Col span={colSpan}>\n              <div className=\"pt-2 bg-white rounded-lg shadow-2xl\">\n                <Affix offsetTop={0}>\n                  <div\n                    className={cx(\n                      'px-4 mb-4 -mt-2',\n                      'flex items-center justify-between',\n                      'rounded-lg shadow-sm',\n                      'text-xl text-darkGrey font-medium'\n                    )}\n                    css={{ background: '#fff' }}>\n                    <div>\n                      Pathological Image Report\n                      <div className=\"text-base text-gray-600\">\n                        Imaging Report From for Hepatocellular Carcinoma\n                      </div>\n                    </div>\n                    <Pie\n                      percent={percentage}\n                      total={`${percentage}%`}\n                      style={{ width: 70, paddingTop: 6 }}\n                      height={80}\n                    />\n                  </div>\n                </Affix>\n              </div>\n\n              <div className=\"rounded-lg shadow-2xl\">\n                <Tabs\n                  type=\"editable-card\"\n                  activeKey={category}\n                  onChange={handleTabChange}\n                  onEdit={handleTabEdit}\n                  tabBarGutter={8}\n                  moveTabNode={handleTabMove}\n                  className=\"flex-1\">\n                  {compose(\n                    map((category: string) => (\n                      <Tabs.TabPane\n                        closable\n                        key={category}\n                        tab={\n                          <span\n                            contentEditable\n                            suppressContentEditableWarning\n                            spellCheck={false}\n                            className=\"outline-none\"\n                            css={{ whiteSpace: 'nowrap' }}\n                            onChange={handleTabNameChange(category)}>\n                            {category}\n                          </span>\n                        }>\n                        <Col\n                          span={24}\n                          className=\"p-4 report-template-builder__main-content\">\n                          <SnippetsContainer\n                            // draggable={!isPreview}\n                            draggable\n                            snippetList={snippetList[category]}\n                            onSnippetUpdate={handleSnippetUpdate}\n                          />\n                        </Col>\n                      </Tabs.TabPane>\n                    )),\n                    keys\n                  )(snippetList)}\n                  <Tabs.TabPane key=\"overview\" tab=\"Overview\">\n                    {compose(\n                      map((category: string) => (\n                        <div key={category} className=\"px-3 bg-white\">\n                          {renderCategory(category)}\n                          {compose(\n                            renderSnippets({ className: 'mb-0' }),\n                            pathOr([], [category])\n                          )(snippetList)}\n                        </div>\n                      )),\n                      keys\n                    )(snippetList)}\n                  </Tabs.TabPane>\n                </Tabs>\n              </div>\n            </Col>\n\n            {rightContentVisible && (\n              <Col span={5}>\n                <Collapse\n                  activeKey={[1, 2, 3, 4]}\n                  expandIcon={() => null}\n                  className=\"shadow-2xl\">\n                  <Collapse.Panel\n                    header={<div className=\"text-center\">醫囑內容</div>}\n                    key={1}>\n                    <div className=\"border-b border-gray-600 p-3\">\n                      申請序號：{data?.ORREQNO}\n                    </div>\n                    <div className=\"border-b border-gray-600 p-3\">\n                      病理號：{data?.ORWORKNO}\n                    </div>\n                    <div className=\"border-b border-gray-600 p-3\">\n                      病患姓名：{data?.HNAMEC}\n                    </div>\n                    <div className=\"border-b border-gray-600 p-3\">\n                      性別：{data?.HSEX}\n                    </div>\n                    <div className=\"border-b border-gray-600 p-3\">\n                      申請科別：{data?.CSECT}\n                    </div>\n                    <div className=\"border-b border-gray-600 p-3\">\n                      病例號：{data?.HHISNUM}\n                    </div>\n                    <div className=\"border-b border-gray-600 p-3\">\n                      病房床號：{data?.HBED}\n                    </div>\n                    <div className=\"border-b border-gray-600 p-3\">\n                      出生日期：{data?.HBIRTHDT}\n                    </div>\n                    <div className=\"border-b border-gray-600 p-3\">\n                      醫屬名稱：{data?.ORPROCED}\n                    </div>\n                    <div className=\"border-b border-gray-600 p-3\">\n                      現在輸入：{'LoginUser'}\n                    </div>\n                    <div className=\"border-b border-gray-600 p-3\">\n                      審核者：{reviewDoctor}\n                    </div>\n                  </Collapse.Panel>\n                  <Collapse.Panel\n                    header={<div className=\"text-center\">儲存狀態</div>}\n                    key={2}>\n                    <Form.Item noStyle name=\"state\">\n                      <Radio.Group className=\"pl-3\">\n                        <Radio className=\"block\" value=\"1\">\n                          已輸\n                        </Radio>\n                        <Radio className=\"block mt-1\" value=\"2\">\n                          待發\n                        </Radio>\n                        <Radio className=\"block mt-1\" value=\"3\">\n                          急發\n                        </Radio>\n                      </Radio.Group>\n                    </Form.Item>\n                  </Collapse.Panel>\n                  <Collapse.Panel\n                    header={<div className=\"text-center\">報告註記</div>}\n                    key={3}>\n                    <Form.Item noStyle name=\"annotations\">\n                      <CheckboxGroup>\n                        {reportAnnotations.map((x, idx) => (\n                          <Checkbox\n                            key={`annotations-${idx}`}\n                            className={cx('block ml-0 pl-2', {\n                              'mt-1': idx > 0,\n                            })}\n                            defaultChecked={false}\n                            value={`${idx}`}>\n                            {x}\n                          </Checkbox>\n                        ))}\n                      </CheckboxGroup>\n                    </Form.Item>\n                  </Collapse.Panel>\n                  <Collapse.Panel\n                    header={<div className=\"text-center\">操作熱鍵</div>}\n                    key={4}>\n                    <div className=\"pl-6\">\n                      <code className=\"bg-yellow-400 px-1\">CTRL＋W</code>,{' '}\n                      <code className=\"bg-yellow-400 px-1\">CTRL+S</code> 儲存\n                    </div>\n                    <div className=\"pl-6 pt-2\">\n                      <code className=\"bg-yellow-400 px-1\">F9</code> 片語視窗\n                    </div>\n                  </Collapse.Panel>\n                </Collapse>\n              </Col>\n            )}\n          </Row>\n        </Form>\n      </Page>\n    </ReactDndProvider>\n  )\n}\n\nfunction getAnchorStyles(affixed?: boolean): React.CSSProperties | undefined {\n  if (!affixed) {\n    return undefined\n  }\n\n  return {\n    marginLeft: -16,\n    marginRight: -16,\n    background: '#fff',\n    padding: 24,\n    borderBottomLeftRadius: 8,\n    borderBottomRightRadius: 8,\n  }\n}\n","import { G2 } from 'bizcharts/typings/index'\nimport React from 'react'\nimport Chart from 'bizcharts/lib/components/Chart'\nimport Tooltip from 'bizcharts/lib/components/Tooltip'\nimport Coord from 'bizcharts/lib/components/Coord'\nimport Geom from 'bizcharts/lib/components/Geom'\nimport { Divider } from 'antd'\nimport classNames from 'classnames'\nimport Debounce from 'lodash.debounce'\nimport autoHeight from './autoHeight'\nimport { PieChart } from './components'\nimport theme from '../../theme'\nconst ReactFitText = require('react-fittext')\nconst { DataView } = require('@antv/data-set')\n\ninterface PieProps {\n  animate?: boolean\n  color?: string\n  colors?: string[]\n  selected?: boolean\n  height?: number\n  margin?: [number, number, number, number]\n  hasLegend?: boolean\n  padding?: [number, number, number, number]\n  percent?: number\n  data?: {\n    x: string | string\n    y: number\n  }[]\n  inner?: number\n  lineWidth?: number\n  forceFit?: boolean\n  style?: React.CSSProperties\n  className?: string\n  total?: React.ReactNode | number | (() => React.ReactNode | number)\n  title?: React.ReactNode\n  tooltip?: boolean\n  valueFormat?: (value: string) => string | React.ReactNode\n  subTitle?: React.ReactNode\n  width?: number\n  legendWidth?: number\n}\n\ninterface PieState {\n  legendData: {\n    checked: boolean\n    x: string\n    color: string\n    percent: number\n    y: string\n  }[]\n  legendBlock: boolean\n}\n\nclass Pie extends React.PureComponent<PieProps, PieState> {\n  state: PieState = {\n    legendData: [],\n    legendBlock: false,\n  }\n\n  requestRef: number | undefined = undefined\n\n  root: HTMLDivElement | undefined = undefined\n\n  chart: G2.Chart | undefined = undefined\n\n  componentDidMount() {\n    window.addEventListener(\n      'resize',\n      () => {\n        this.requestRef = requestAnimationFrame(() => this.resize())\n      },\n      { passive: true }\n    )\n  }\n\n  componentDidUpdate(preProps: PieProps) {\n    const { data } = this.props\n    if (data !== preProps.data) {\n      // because of charts data create when rendered\n      // so there is a trick for get rendered time\n      this.getLegendData()\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.requestRef) {\n      window.cancelAnimationFrame(this.requestRef)\n    }\n    if (this.resize) {\n      window.removeEventListener('resize', this.resize)\n      this.resize.cancel()\n    }\n  }\n\n  getG2Instance = (chart: G2.Chart) => {\n    this.chart = chart\n    requestAnimationFrame(() => {\n      this.getLegendData()\n      this.resize()\n    })\n  }\n\n  // for custom lengend view\n  getLegendData = () => {\n    if (!this.chart) return\n    const geom = this.chart.getAllGeoms()[0] // 获取所有的图形\n    if (!geom) return\n    const items = (geom as any).get('dataArray') || [] // 获取图形对应的\n\n    const legendData = items.map((item: { color: any; _origin: any }[]) => {\n      /* eslint no-underscore-dangle:0 */\n      const origin = item[0]._origin\n      origin.color = item[0].color\n      origin.checked = true\n      return origin\n    })\n\n    this.setState({\n      legendData,\n    })\n  }\n\n  handleRoot = (n: HTMLDivElement) => {\n    this.root = n\n  }\n\n  handleLegendClick = (item: any, i: number) => {\n    const newItem = item\n    newItem.checked = !newItem.checked\n\n    const { legendData } = this.state\n    legendData[i] = newItem\n\n    const filteredLegendData = legendData.filter(l => l.checked).map(l => l.x)\n\n    if (this.chart) {\n      this.chart.filter('x', val => filteredLegendData.indexOf(`${val}`) > -1)\n    }\n\n    this.setState({\n      legendData,\n    })\n  }\n\n  resize = Debounce(() => {\n    const { hasLegend } = this.props\n    const { legendBlock } = this.state\n    if (!hasLegend || !this.root) {\n      window.removeEventListener('resize', this.resize)\n      return\n    }\n    if (\n      this.root &&\n      this.root.parentNode &&\n      (this.root.parentNode as HTMLElement).clientWidth <= 380\n    ) {\n      if (!legendBlock) {\n        this.setState({\n          legendBlock: true,\n        })\n      }\n    } else if (legendBlock) {\n      this.setState({\n        legendBlock: false,\n      })\n    }\n  }, 400)\n\n  render() {\n    const {\n      valueFormat,\n      subTitle,\n      total,\n      hasLegend = false,\n      className,\n      style,\n      height,\n      forceFit = true,\n      percent,\n      color,\n      inner = 0.75,\n      animate = true,\n      colors,\n      lineWidth = 0,\n      width = 240,\n      legendWidth = 250,\n    } = this.props\n\n    const { legendData, legendBlock } = this.state\n    const pieClassName = classNames('pie', className, {\n      hasLegend: !!hasLegend,\n      legendBlock: legendBlock,\n    })\n\n    const {\n      data: propsData,\n      selected: propsSelected = true,\n      tooltip: propsTooltip = true,\n    } = this.props\n\n    let data = propsData || []\n    let selected = propsSelected\n    let tooltip = propsTooltip\n\n    const defaultColors = colors\n    data = data || []\n    selected = selected || true\n    tooltip = tooltip || true\n    let formatColor\n\n    const scale = {\n      x: {\n        type: 'cat',\n        range: [0, 1],\n      },\n      y: {\n        min: 0,\n      },\n    }\n\n    if (percent || percent === 0) {\n      selected = false\n      tooltip = false\n      formatColor = (value: string) => {\n        if (value === '占比') {\n          return color || theme.primary\n        }\n        return '#f0f2f5'\n      }\n\n      data = [\n        {\n          x: '占比',\n          y: parseFloat(`${percent}`),\n        },\n        {\n          x: '反比',\n          y: 100 - parseFloat(`${percent}`),\n        },\n      ]\n    }\n\n    const tooltipFormat = [\n      'x*percent',\n      (x: string, p: number) => ({\n        name: x,\n        value: `${(p * 100).toFixed(2)}%`,\n      }),\n    ]\n\n    const padding = [6, 0, 6, 0]\n\n    const dv = new DataView()\n    dv.source(data).transform({\n      type: 'percent',\n      field: 'y',\n      dimension: 'x',\n      as: 'percent',\n    })\n\n    return (\n      <PieChart\n        ref={this.handleRoot}\n        className={pieClassName}\n        chartWidth={width}\n        style={style}\n        legendWidth={legendWidth}>\n        <ReactFitText maxFontSize={25}>\n          <div className=\"chart\">\n            <Chart\n              scale={scale}\n              height={height}\n              forceFit={forceFit}\n              data={dv}\n              padding={padding}\n              animate={animate}\n              onGetG2Instance={this.getG2Instance}>\n              {!!tooltip && <Tooltip showTitle={false} />}\n              <Coord type=\"theta\" innerRadius={inner} />\n              <Geom\n                style={{ lineWidth, stroke: '#fff' }}\n                tooltip={tooltip && tooltipFormat}\n                type=\"intervalStack\"\n                position=\"percent\"\n                color={[\n                  'x',\n                  percent || percent === 0 ? formatColor : defaultColors,\n                ]}\n                selected={selected}\n              />\n            </Chart>\n\n            {(subTitle || total) && (\n              <div className=\"total\">\n                {subTitle && <h4 className=\"pie-sub-title\">{subTitle}</h4>}\n                {/* eslint-disable-next-line */}\n                {total && (\n                  <div className=\"pie-stat\">\n                    {typeof total === 'function' ? total() : total}\n                  </div>\n                )}\n              </div>\n            )}\n          </div>\n        </ReactFitText>\n\n        {hasLegend && (\n          <ul className=\"legend\">\n            {legendData.map((item, i) => (\n              <li key={item.x} onClick={() => this.handleLegendClick(item, i)}>\n                <span\n                  className=\"dot\"\n                  style={{\n                    backgroundColor: !item.checked ? '#aaa' : item.color,\n                  }}\n                />\n                <span className=\"legendTitle\">{item.x}</span>\n                <Divider type=\"vertical\" />\n                <span className=\"percent\">\n                  {`${(Number.isNaN(item.percent)\n                    ? 0\n                    : item.percent * 100\n                  ).toFixed(2)}%`}\n                </span>\n                <span className=\"value\">\n                  {valueFormat ? valueFormat(item.y) : item.y}\n                </span>\n              </li>\n            ))}\n          </ul>\n        )}\n      </PieChart>\n    )\n  }\n}\n\nexport default autoHeight()(Pie)\n","import ReportTyping from './report-typing'\n\nexport default ReportTyping\n// import React from 'react'\n\n// export default React.lazy(() => import('../report-typing/report-typing'))\n","import styled from 'styled-components'\n\ntype Props = {\n  border?: string\n}\n\nexport default styled.div.attrs({\n  className: 'block-placeholder',\n})<Props>`\n  display: flex;\n  align-items: center;\n  padding-left: 25px;\n  height: 50px;\n  border: rgba(225, 225, 225, 0.9) 2px ${p => p.border || 'dashed'};\n  background-color: transparent;\n  margin-bottom: 35px;\n`\n","/**\n * NOTE:\n * nerver using index as list component key forever,\n * it will completely fucked up your page\n */\nimport React from 'react'\nimport { withRouter } from 'react-router-dom'\nimport { DropTarget, ConnectDropTarget, XYCoord } from 'react-dnd'\nimport {\n  equals,\n  length,\n  remove,\n  update,\n  insert,\n  cond,\n  gt,\n  lt,\n  T,\n  __,\n  add,\n  pathOr,\n  identity,\n  always,\n} from 'ramda'\nimport cx from 'classnames'\nimport { uuid } from '@/utils/webHelper'\nimport ItemTypes from '@/constants/item-types'\nimport { SnippetProps } from '@/constants/types'\nimport Snippet from '@/components/snippet'\nimport BlockPlaceholder from '@/components/snippet-block-placeholder'\nimport { canMoveSnippet, getPlaceHolderIndex } from './snippet-utils'\nconst { compose } = require('ramda')\n\ninterface Props {\n  draggingItem: any\n  isOver?: boolean\n  draggable?: boolean\n  canDrop?: boolean\n  snippetList: SnippetProps[]\n  connectDropTarget: ConnectDropTarget\n  onSnippetUpdate(data: any): void\n}\n\ninterface State {\n  placeholderIndex: number | null\n}\n\nconst withDropTarget = DropTarget<Props>(\n  ItemTypes.BOARD,\n  {\n    drop(_, monitor, component) {\n      if (!component || !component.props.draggable) {\n        return\n      }\n\n      const canDrop = monitor.canDrop()\n      let { placeholderIndex } = component.state\n      const item = monitor.getItem()\n\n      if (canDrop && item.fromMenu) {\n        component.handleSnippetDrop({ ...item, placeholderIndex })\n      }\n\n      if (canDrop && !item.fromMenu) {\n        component.handleSnippetMove(item.id, placeholderIndex)\n      }\n    },\n    canDrop({ snippetList }, monitor) {\n      // if there is no items in cards, and is over on the board currently,\n      // we can display a placeholder and drop the snippet item on the board.\n      if (snippetList.length === 0 && monitor.isOver()) {\n        return true\n      }\n\n      const clientOffset = monitor.getClientOffset() as XYCoord\n      const element = document.elementFromPoint(clientOffset.x, clientOffset.y)\n\n      return canMoveSnippet(element)\n    },\n    hover(_, monitor, component) {\n      // Determine mouse position\n      const clientOffset = monitor.getClientOffset() as XYCoord\n\n      let {\n        placeholderIndex,\n        isOverSnippet,\n        overSnippet,\n      } = getPlaceHolderIndex(clientOffset)\n\n      // 還要判斷是否是在最後一個 snippet 下面及 snippets-container 裡面\n      if (!isOverSnippet) {\n        return\n      }\n\n      const hoverBoundingRect = (overSnippet as HTMLElement).getBoundingClientRect()\n      const hoverMiddleY =\n        (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2\n      const hoverClientY = clientOffset.y - hoverBoundingRect.top\n\n      if (hoverClientY < hoverMiddleY) {\n        placeholderIndex -= 1\n      }\n\n      if (\n        monitor.canDrop() &&\n        !equals(component.state.placeholderIndex, placeholderIndex)\n      ) {\n        component.setState({ placeholderIndex })\n      }\n    },\n  },\n  (connect, monitor) => ({\n    connectDropTarget: connect.dropTarget(),\n    isOver: monitor.isOver(),\n    canDrop: monitor.canDrop(),\n    didDrop: monitor.didDrop(),\n    draggingItem: monitor.getItem(),\n  })\n)\n\nclass SnippetsContainer extends React.Component<Props, State> {\n  static defaultProps = {\n    draggable: true,\n    snippetList: [],\n  }\n\n  public state: State = {\n    placeholderIndex: null,\n  }\n\n  handleSnippetMove = (id: React.Key, atIndex: number) => {\n    const { snippetList } = this.props\n    const { snippet, index } = this.handleFindSnippet(id)\n\n    const newList = []\n    let isPlaced = false\n\n    snippetList.forEach((s, idx) => {\n      if (idx === index) {\n        return\n      }\n\n      if (!isPlaced && atIndex < idx) {\n        newList.push(snippet)\n        isPlaced = true\n      }\n\n      newList.push(s)\n\n      if (!isPlaced && atIndex === idx) {\n        newList.push(snippet)\n        isPlaced = true\n      }\n    })\n\n    // we dropped the only one snippet in the list so let it back to list.\n    if (length(snippetList) === 1 && !atIndex) {\n      newList.push(snippet)\n    }\n\n    this.props.onSnippetUpdate(newList)\n    this.setState({ placeholderIndex: null })\n  }\n\n  // prettier-ignore\n  handleSnippetDrop = (droppedItem: { [key: string]: any; placeholderIndex: number }) => {\n    const { placeholderIndex, ...item } = droppedItem\n\n    const snippetList = [...this.props.snippetList]\n\n    const nextIndex = placeholderIndex + 1\n    let newList: any[] = []\n\n    const snippet: Partial<SnippetProps> = {\n      ...item,\n      fromMenu: false,\n      id: `${item.id}__${uuid()}`,\n    }\n\n    if (length(snippetList) === 0) {\n      newList = insert(0, snippet)(snippetList)\n    }\n    if (length(snippetList) > 0) {\n      newList = insert(nextIndex, snippet)(snippetList)\n    }\n\n    this.props.onSnippetUpdate(newList)\n    this.setState({ placeholderIndex: null })\n  }\n\n  handleSnippetRemove = (index: number) => {\n    this.props.onSnippetUpdate(remove(index, 1)(this.props.snippetList))\n  }\n\n  handleSnippetShift = (id: React.Key, shift: number) => {\n    const { snippet } = this.handleFindSnippet(id)\n\n    this.handleSnippetUpdate({\n      ...snippet,\n      tabSize: compose(\n        cond([\n          [gt(__, 2), always(2)],\n          [lt(__, 0), always(0)],\n          [T, identity],\n        ]),\n        add(shift),\n        pathOr(0, ['tabSize'])\n      )(snippet),\n    })\n  }\n\n  handleSnippetUpdate = (data: any) => {\n    const { snippet, index } = this.handleFindSnippet(data.id)\n\n    this.props.onSnippetUpdate(\n      update(index, { ...snippet, ...data })(this.props.snippetList)\n    )\n  }\n\n  handleFindSnippet = (id: React.Key) => {\n    const { snippetList } = this.props\n    const snippet = snippetList.filter(x => x.id === id)[0]\n\n    return {\n      snippet,\n      index: snippetList.indexOf(snippet),\n    }\n  }\n\n  render() {\n    const {\n      connectDropTarget,\n      isOver,\n      canDrop,\n      snippetList,\n      draggingItem,\n      draggable, // 模版是否可拖曳，編輯模式下才會是 true\n    } = this.props\n\n    const { placeholderIndex } = this.state\n\n    let isPlaceHold = false\n    const cardList = []\n\n    snippetList.forEach((item, idx) => {\n      if (isOver && canDrop) {\n        isPlaceHold = false\n        if (idx === 0 && placeholderIndex === -1) {\n          cardList.push(<BlockPlaceholder key={`block-placeholder-${idx}`} />)\n        } else if ((placeholderIndex as any) > idx) {\n          isPlaceHold = true\n        }\n      }\n\n      if (item !== undefined) {\n        cardList.push(\n          <Snippet\n            key={item.id}\n            id={item.id}\n            index={idx}\n            draggable={draggable}\n            item={item}\n            inline={item.inline}\n            wrapperId={`snippet-wrapper-${idx}`}\n            tabSize={item.tabSize}\n            findSnippet={this.handleFindSnippet}\n            shiftSnippet={this.handleSnippetShift}\n            removeSnippet={this.handleSnippetRemove}>\n            {item.inline ? (\n              <div\n                id={`${item.id}`}\n                className={`${item.id}`}\n                css={{ padding: 16 }}\n              />\n            ) : (\n              <item.Component\n                id={item.id}\n                className={item.id}\n                item={item}\n                index={idx}\n                onUpdate={this.handleSnippetUpdate}\n              />\n            )}\n          </Snippet>\n        )\n      }\n\n      if (isOver && canDrop && placeholderIndex === idx) {\n        cardList.push(<BlockPlaceholder key={`block-placeholder-${idx}`} />)\n      }\n    })\n\n    // if placeholder index is greater than array.length, display placeholder as last\n    if (isPlaceHold) {\n      cardList.push(<BlockPlaceholder key={'block-placeholder-bottom'} />)\n    }\n\n    // if there is no items in cards currently, display a placeholder anyway\n    if (isOver && canDrop && snippetList.length === 0) {\n      cardList.push(<BlockPlaceholder key={'block-placeholder-zero'} />)\n    }\n\n    // if just has only one item in list and currently dragged, display a placeholder\n    if (isOver && canDrop && snippetList.length === 1) {\n      if (!draggingItem.fromMenu) {\n        cardList.push(<BlockPlaceholder key={'block-placeholder-zero'} />)\n      }\n    }\n\n    return connectDropTarget(\n      <div\n        className={cx('report-template-builder__contentarea', {\n          'report-template-builder__contentarea--fixed-layout': !draggable,\n        })}>\n        {cardList}\n      </div>\n    )\n  }\n}\n\nexport default compose(withRouter, withDropTarget)(SnippetsContainer)\n","import React from 'react'\nimport { DragSource, ConnectDragSource } from 'react-dnd'\nimport styled from 'styled-components'\nimport ItemTypes from '@/constants/item-types'\n\ninterface Props {\n  connectDragSource: ConnectDragSource\n  children?: React.ReactNode\n  className?: string\n  id?: React.Key\n}\n\nconst withDragSource = DragSource(\n  ItemTypes.BOARD,\n  {\n    beginDrag(props: Props) {\n      const { children, className, ...rest } = props // eslint-disable-line\n      return {\n        ...rest,\n        fromMenu: true,\n      }\n    },\n    endDrag(_, monitor) {\n      if (!monitor.didDrop()) {\n        return\n      }\n    },\n    isDragging(props, monitor) {\n      const isDragging = props.id === monitor.getItem().id\n\n      return isDragging\n    },\n  },\n  (connect, monitor) => ({\n    connectDragSource: connect.dragSource(),\n    connectDragPreview: connect.dragPreview(),\n    isDragging: monitor.isDragging(),\n  })\n)\n\nclass SnippetListMenuItem extends React.Component<Props> {\n  render() {\n    const { connectDragSource, id, ...rest } = this.props\n\n    return (\n      <SnippetListMenuWrapper\n        {...rest}\n        ref={comp => connectDragSource(comp)}\n        id={`${id}`}>\n        <div className=\"snippet-drawer-menu__item--content\">\n          {this.props.children}\n        </div>\n      </SnippetListMenuWrapper>\n    )\n  }\n}\n\nconst SnippetListMenuWrapper = styled.div`\n  cursor: move;\n`\n\nexport default withDragSource(SnippetListMenuItem)\n","import React from 'react'\nimport cx from 'classnames'\nimport { FontColorsOutlined } from '@ant-design/icons'\nimport styled from 'styled-components'\nimport SnippetListMenuItem from '@/components/snippet-list-menu-item'\nimport reportTemplateList from '@/components/report-template-list'\n\ninterface Props {\n  className?: string\n  style?: React.CSSProperties\n}\n\nexport default class SnippetListMenu extends React.Component<Props> {\n  render() {\n    return (\n      <SnippetListMenuWrapper\n        className={cx('snippet-drawer-menu', this.props.className)}\n        {...this.props}>\n        <div className=\"snippet-drawer-menu__list\">\n          {reportTemplateList.map(item => (\n            <SnippetListMenuItem\n              {...item}\n              key={item.id}\n              className=\"snippet-drawer-menu__item py-3\">\n              <div className=\"flex items-center\">\n                {item.icon ? (\n                  <item.icon className=\"mr-2\" />\n                ) : (\n                  <FontColorsOutlined className=\"mr-2\" />\n                )}\n                {item.name}\n              </div>\n            </SnippetListMenuItem>\n          ))}\n        </div>\n      </SnippetListMenuWrapper>\n    )\n  }\n}\n\nconst SnippetListMenuWrapper = styled.div`\n  .snippet-drawer-menu {\n    &__list {\n      height: 100%;\n      overflow-y: auto;\n      overflow-x: hidden;\n\n      ::-webkit-scrollbar {\n        display: none;\n      }\n    }\n  }\n`\n","class EnvStore {\n  pageSize = 10\n  apiBaseUrl = process.env.REACT_APP_API_ROOT || 'http://18.181.199.235:8080'\n\n  get isEnvDev(): boolean {\n    return process.env.NODE_ENV === 'development'\n  }\n  get appBaseName(): string {\n    return process.env.REACT_APP_BASE_NAME || ''\n  }\n  get appTitle(): string {\n    return `%s | ${\n      process.env.REACT_APP_TITLE || '高雄榮民總醫院 數位病理平台'\n    }`\n  }\n  get appUrl(): string {\n    return `${window.location.protocol}//${window.location.host}${this.appBaseName}/#/`\n  }\n  get appBaseUrl(): string {\n    return `/#/${this.appBaseName}`\n  }\n  get fakeApiBaseUrl(): string {\n    return (\n      process.env.REACT_APP_FAKE_API_ROOT ||\n      (this.isEnvDev ? 'http://localhost:3004' : 'http://localhost:3004')\n    )\n  }\n  get publicUrl(): string {\n    return process.env.PUBLIC_URL || ''\n  }\n  get canUseDOM(): boolean {\n    return !!(\n      typeof window !== 'undefined' &&\n      window.document &&\n      window.document.createElement\n    )\n  }\n  set setPageSize(pageSize: number | undefined) {\n    this.pageSize = pageSize || 50\n  }\n  set setApiBaseUrl(url: string) {\n    this.apiBaseUrl = url\n  }\n}\n\nexport const envStore = new EnvStore()\n\nexport function isMobile() {\n  let check = false\n  ;(function (a) {\n    if (\n      /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(\n        a\n      ) ||\n      // eslint-disable-next-line no-useless-escape\n      /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(\n        a.substr(0, 4)\n      )\n    )\n      check = true\n  })(navigator.userAgent || navigator.vendor || (window as any).opera)\n  return check\n}\n\nexport default envStore\n","import { ReactText } from 'react'\n\nexport const createFormItemLayout = (label: number = 3, wrapper?: number) => ({\n  labelCol: {\n    xs: { span: label },\n    sm: { span: label },\n  },\n  wrapperCol: {\n    xs: { span: wrapper || 24 - label },\n    sm: { span: wrapper || 24 - label },\n  },\n})\n\nexport const thosandSeprartor = {\n  formatter: (value: number | string | undefined) => {\n    if (!value) {\n      return value as string\n    }\n    return `${value}`.replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')\n  },\n  parser: (value: string | undefined) =>\n    (value ? value.replace(/\\$\\s?|(,*)/g, '') : value) as ReactText,\n}\n\nexport const currency = {\n  formatter: (value: number | string | undefined) => {\n    if (!value) {\n      return value as string\n    }\n    return `$ ${value}`.replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')\n  },\n  parser: (value: string | undefined) =>\n    (value ? value.replace(/\\$\\s?|(,*)/g, '') : value) as ReactText,\n}\n\nexport const percent = {\n  // min: 0,\n  max: 100,\n  formatter: (value: number | string | undefined) => {\n    if (!value) {\n      return value as string\n    }\n    return `${value}%`\n  },\n  parser: (value: string | undefined) =>\n    (value ? value.replace('%', '') : value) as ReactText,\n}\n\nexport const rules = {\n  required: { required: true, message: '此欄位必填' },\n  number: {\n    required: false,\n    type: 'number',\n    message: '請填寫數字',\n    transform(value: any) {\n      if (!value) {\n        return value\n      }\n      return Number(value)\n    },\n  },\n  account: {\n    required: true,\n    message: '欄位長度為8~128字元,特殊符號-,_',\n    pattern: new RegExp(/^.{8,128}$/),\n  },\n  password: {\n    required: true,\n    message: '密碼長度為6~128字元',\n    pattern: new RegExp(/^.{6,128}$/),\n  },\n}\n","import React from 'react'\n\nexport default React.lazy(() => import('./report-template-builder'))\n","import React from 'react'\n\nexport default React.lazy(\n  () => import('../report-template-list/report-template-list')\n)\n","import React from 'react'\n\nexport default React.lazy(() => import('./report-inquiry'))\n","import React from 'react'\n\nexport default React.lazy(() => import('./pathol-image-viewer'))\n","import React from 'react'\n\nexport default React.lazy(() => import('./radiol-image-viewer'))\n","import React from 'react'\n\nexport default React.lazy(() => import('./report-list'))\n","import ReportTemplateBuilder from '@/containers/report-template-editor'\nimport ReportTemplateList from '@/containers/report-template-list'\nimport ReportInquiry from '@/containers/report-inquiry'\nimport ReportTyping from '@/containers/report-typing'\nimport PatholImagesViewer from '@/containers/pathol-images-viewer'\nimport RadiolImagesViewer from '@/containers/radiol-images-viewer'\nimport ReportList from '@/containers/report-list'\n\nexport type RouteItem = {\n  id: number\n  title: string\n  path: string\n  component: typeof React.Component\n  icon?: React.FunctionComponent\n  disabled?: boolean\n  param?: string\n  children?: RouteItem[]\n  hide?: RouteItem[]\n}\n\nexport type Route = RouteItem & {\n  children: Array<RouteItem>\n  hide: Array<RouteItem>\n  disabled: boolean\n}\n\nexport const PATHOL_IMAGE = '/pathol-images/:studyInstanceUIDs'\nexport const RADIOL_IMAGE = '/radiol-images/:studyInstanceUIDs'\nexport const REPORT_TEMPLATE_LIST = '/report-templates'\nexport const REPORT_INPUT = '/report-input/:id'\nexport const REPORT_TEMPLATE_EDIT = `${REPORT_TEMPLATE_LIST}/:id`\nexport const REPORT_TEMPLATE_CREATE = `${REPORT_TEMPLATE_LIST}/create`\nexport const REPORT_INQUIRY = '/report-inquiry'\nexport const REPORT_LIST= '/report-list'\n\nexport function useRoutes() {\n  return [\n    {\n      id: 1,\n      title: '病理影像',\n      path: PATHOL_IMAGE,\n      component: PatholImagesViewer,\n    },\n    {\n      id: 2,\n      title: '放射影像',\n      path: RADIOL_IMAGE,\n      component: RadiolImagesViewer,\n    },\n    {\n      id: 999,\n      title: '清單查詢',\n      path: REPORT_LIST,\n      component: ReportList,\n    },\n    {\n      id: 3,\n      title: '報告查詢',\n      path: REPORT_INQUIRY,\n      component: ReportInquiry,\n    },\n    {\n      id: 10,\n      title: '輸入報告',\n      path: REPORT_INPUT,\n      component: ReportTyping,\n    },\n    {\n      id: 4,\n      title: '結構式報告模版',\n      path: 'report-template',\n      children: [\n        {\n          id: 5,\n          title: '報告模版清單',\n          path: REPORT_TEMPLATE_LIST,\n          component: ReportTemplateList,\n        },\n        {\n          id: 6,\n          title: '報告模版新增',\n          path: REPORT_TEMPLATE_CREATE,\n          component: ReportTemplateBuilder,\n        },\n        {\n          id: 7,\n          title: '報告模版編輯',\n          path: REPORT_TEMPLATE_EDIT,\n          component: ReportTemplateBuilder,\n        },\n      ],\n    },\n  ]\n}\n\nexport default useRoutes\n","import React from 'react'\nimport styled, { css } from 'styled-components'\nimport { Button } from 'antd'\nimport { ButtonProps } from 'antd/lib/button'\nimport { ActionTypes } from '@/constants/enums'\n// import useRouteCRUDAuthCheck from 'shared/hooks/useRouteCRUDAuthCheck'\n// import * as Icons from 'shared/components/Icons'\n\ninterface Props extends Omit<ButtonProps, 'icon'> {\n  children?: React.ReactNode\n  circle?: boolean\n  color?: string\n  css?: React.CSSProperties\n  icon?: string | React.ReactNode\n  onClick?: (evt: React.MouseEvent<HTMLElement>) => any\n  actionType?: ActionTypes\n}\n\nconst StyledButton = styled(Button)<Props>`\n  &.ant-btn {\n    min-width: 80px;\n    border-radius: 4px;\n    font-weight: 500;\n\n    .anticon {\n      margin-right: 6px;\n    }\n\n    svg {\n      width: 20px;\n      height: 20px;\n    }\n\n    &.ant-btn-sm svg {\n      width: 16px;\n      height: 16px;\n    }\n\n    ${p =>\n      p.color === 'primary' &&\n      css`\n        color: #fff;\n        border-color: ${p => p.theme.btn.primary};\n        background: ${p => p.theme.btn.primary};\n\n        &:hover,\n        &:focus,\n        &:active {\n          color: #fff;\n          background: ${p => p.theme.btn.secondary};\n          border-color: ${p => p.theme.btn.secondary};\n        }\n      `};\n\n    ${p =>\n      p.color === 'outline' &&\n      css`\n        padding: 0 8px;\n        color: ${p => p.theme.btn.primary};\n        border: 1.3px solid ${p => p.theme.btn.primary};\n        background: #fff;\n\n        &:hover,\n        &:focus,\n        &:active {\n          color: #fff;\n          background: ${p => p.theme.btn.primary};\n          border: 1.3px solid ${p => p.theme.btn.primary};\n        }\n      `};\n\n    ${p =>\n      p.color === 'danger' &&\n      css`\n        color: ${p => p.theme.btn.danger};\n        border: 1.3px solid ${p => p.theme.btn.danger};\n        background: #fff;\n\n        &:hover,\n        &:focus,\n        &:active {\n          color: ${p => p.theme.btn.danger};\n          background: #fff6e4;\n          border: 1.3px solid ${p => p.theme.btn.danger};\n        }\n      `};\n\n    ${p =>\n      p.type === 'link' &&\n      css`\n        min-width: auto;\n        padding-left: 0;\n        padding-right: 0;\n        background: transparent;\n        border-color: transparent;\n        color: ${p.theme.primary};\n\n        > span {\n          text-decoration: underline;\n        }\n\n        &:hover {\n          background: transparent;\n          border-color: transparent;\n        }\n      `};\n\n    ${p =>\n      p.size === 'small' &&\n      css`\n        line-height: 1.2;\n      `}\n\n    &.hover--none {\n      &:hover,\n      &:focus,\n      &:active {\n        color: initial;\n        background: initial;\n        border-color: initial;\n      }\n    }\n  }\n\n  &.ant-btn.ant-btn-loading:not(.ant-btn-circle):not(.ant-btn-circle-outline):not(.ant-btn-icon-only) {\n    padding-left: 20px;\n  }\n\n  &.ant-btn[disabled] {\n    svg > g path:nth-child(2) {\n      transition: fill 0.4s ease;\n      fill: darkgrey;\n    }\n  }\n`\n\nexport { StyledButton as Butotn }\n\nexport default function ButtonComponent({\n  // icon,\n  children,\n  loading,\n  actionType,\n  ...props\n}: Props) {\n  // const [, checkIsAuthenticated] = useRouteCRUDAuthCheck()\n\n  // if (actionType && !checkIsAuthenticated(actionType)) {\n  //   return null\n  // }\n\n  return (\n    <StyledButton {...props} loading={loading}>\n      {(() => {\n        // if (icon && !loading) {\n        //   let Icon\n\n        //   const isElement = React.isValidElement(icon)\n\n        //   if (!isElement) {\n        //     Icon = icon\n        //   }\n\n        //   if (typeof icon === 'string') {\n        //     const nameCapitalized = icon.charAt(0).toUpperCase() + icon.slice(1)\n        //     const iconName = 'Icon' + nameCapitalized\n        //     Icon = (Icons as any)[iconName]\n        //   }\n\n        //   return (\n        //     <div className=\"l-flex--center\">\n        //       {isElement ? icon : <Icon className=\"c-icon is--secondary\" />}\n        //       {children}\n        //     </div>\n        //   )\n        // }\n\n        return children\n      })()}\n    </StyledButton>\n  )\n}\n"],"sourceRoot":""}