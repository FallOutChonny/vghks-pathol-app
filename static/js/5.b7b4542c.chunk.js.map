{"version":3,"sources":["../dicom-core/extensions/MODULE_TYPES.js","../dicom-core/log.js","../dicom-core/extensions/ExtensionManager.js","../dicom-core/extensions/index.js","../dicom-core/services/ServicesManager.js","../dicom-core/services/UINotificationService/index.js","../dicom-core/services/UIModalService/index.js","../dicom-core/services/UIDialogService/index.js","../dicom-core/services/MeasurementService/MeasurementService.js","../dicom-core/services/MeasurementService/index.js","../dicom-core/classes/metadata/Metadata.js","../dicom-core/classes/OHIFError.js","../dicom-core/classes/metadata/InstanceMetadata.js","../dicom-core/utils/getWADORSImageId.js","../dicom-core/utils/getImageId.js","../dicom-core/classes/metadata/OHIFInstanceMetadata.js","../dicom-core/classes/metadata/SeriesMetadata.js","../dicom-core/classes/metadata/OHIFSeriesMetadata.js","../dicom-core/user.js","../dicom-core/DICOMWeb/index.js","../dicom-core/DICOMWeb/getAttribute.js","../dicom-core/DICOMWeb/getAuthorizationHeader.js","../dicom-core/DICOMWeb/getModalities.js","../dicom-core/DICOMWeb/getName.js","../dicom-core/DICOMWeb/getNumber.js","../dicom-core/DICOMWeb/getString.js","../dicom-core/utils/guid.js","../dicom-core/classes/ImageSet.js","../dicom-core/utils/isImage.js","../dicom-core/utils/sopClassDictionary.js","../dicom-core/utils/isDisplaySetReconstructable.js","../dicom-core/errorHandler.js","../dicom-core/utils/isLowPriorityModality.js","../dicom-core/classes/metadata/StudyMetadata.js","../dicom-core/classes/metadata/OHIFStudyMetadata.js","../dicom-core/classes/metadata/index.js","../dicom-core/classes/CommandsManager.js","../dicom-core/redux/actions.js","../dicom-core/redux/constants/ActionTypes.js","../dicom-core/utils/str2ab.js","../dicom-core/utils/metadataProvider/fetchPaletteColorLookupTableData.js","../dicom-core/utils/metadataProvider/unpackOverlay.js","../dicom-core/utils/metadataProvider/fetchOverlayData.js","../dicom-core/classes/MetadataProvider.js","../dicom-core/utils/metadataProvider/getPixelSpacingInformation.js","../dicom-core/utils/StackManager.js","../dicom-core/classes/StudyLoadingListener.js","../dicom-core/utils/hotkeys/recordPlugin.js","../dicom-core/utils/hotkeys/index.js","../dicom-core/utils/hotkeys/pausePlugin.js","../dicom-core/classes/HotkeysManager.js","../dicom-core/utils/objectPath.js","../dicom-core/utils/absoluteUrl.js","../dicom-core/utils/addServers.js","../dicom-core/utils/sortBy.js","../dicom-core/classes/TypeSafeCollection.js","../dicom-core/utils/studyMetadataManager.js","../dicom-core/utils/dicomLoaderService.js","../dicom-core/utils/b64toBlob.js","../dicom-core/utils/loadAndCacheDerivedDisplaySets.js","../dicom-core/utils/urlUtil.js","../dicom-core/utils/makeDeferred.js","../dicom-core/utils/Queue.js","../dicom-core/utils/hierarchicalListUtils.js","../dicom-core/utils/progressTrackingUtils.js","../dicom-core/utils/index.js","../dicom-core/utils/writeScript.js","../dicom-core/utils/makeCancelable.js","../dicom-core/utils/isDicomUid.js","../dicom-core/utils/resolveObjectPath.js","../dicom-core/classes/StudyMetadataSource.js","../dicom-core/studies/services/wado/getReferencedSeriesSequence.js","../dicom-core/studies/services/wado/studyInstanceHelpers.js","../dicom-core/studies/services/wado/retrieveMetadataLoader.js","../dicom-core/studies/services/wado/retrieveMetadataLoaderSync.js","../dicom-core/studies/getSeriesInfo.js","../dicom-core/studies/sortStudy.js","../dicom-core/studies/services/wado/retrieveMetadataLoaderAsync.js","../dicom-core/studies/services/wado/retrieveMetadata.js","../dicom-core/studies/retrieveStudyMetadata.js","../dicom-core/classes/OHIFStudyMetadataSource.js","../dicom-core/classes/index.js","../dicom-core/classes/StudyPrefetcher.js","../dicom-core/studies/services/qido/instances.js","../dicom-core/studies/services/qido/studies.js","../dicom-core/studies/services/index.js","../dicom-core/studies/searchStudies.js","../dicom-core/studies/index.js","../dicom-core/studies/retrieveStudiesMetadata.js","../dicom-core/studies/getStudyBoxData.js","../dicom-core/DICOMSR/utils/findInstanceMetadataBySopInstanceUid.js","../dicom-core/DICOMSR/parseDicomStructuredReport.js","../dicom-core/measurements/tools/arrowAnnotate.js","../dicom-core/measurements/tools/bidirectional.js","../dicom-core/measurements/tools/ellipticalRoi.js","../dicom-core/measurements/tools/circleRoi.js","../dicom-core/measurements/tools/freehandMouse.js","../dicom-core/measurements/tools/length.js","../dicom-core/measurements/tools/nonTarget.js","../dicom-core/measurements/tools/rectangleRoi.js","../dicom-core/measurements/tools/angle.js","../dicom-core/measurements/tools/targetCR.js","../dicom-core/measurements/tools/targetNE.js","../dicom-core/measurements/tools/targetUN.js","../dicom-core/measurements/lib/getLabel.js","../dicom-core/measurements/lib/getDescription.js","../dicom-core/measurements/lib/getImageIdForImagePath.js","../dicom-core/measurements/toolGroups/allTools.js","../dicom-core/measurements/configuration.js","../dicom-core/measurements/dataExchange.js","../dicom-core/measurements/classes/MeasurementApi.js","../dicom-core/measurements/classes/TimepointApi.js","../dicom-core/measurements/conformance/criteria/BaseCriterion.js","../dicom-core/measurements/conformance/criteria/Location.js","../dicom-core/measurements/conformance/criteria/MaxTargetsPerOrgan.js","../dicom-core/measurements/conformance/criteria/MaxTargets.js","../dicom-core/measurements/conformance/criteria/MeasurementsLength.js","../dicom-core/measurements/conformance/criteria/Modality.js","../dicom-core/measurements/conformance/criteria/NonTargetResponse.js","../dicom-core/measurements/conformance/criteria/TargetType.js","../dicom-core/measurements/conformance/CriteriaEvaluator.js","../dicom-core/measurements/conformance/evaluations/index.js","../dicom-core/measurements/conformance/ConformanceCriteria.js","../dicom-core/measurements/lib/getImageAttributes.js","../dicom-core/measurements/lib/refreshCornerstoneViewports.js","../dicom-core/measurements/measurementHandlers/handleSingleMeasurementAdded.js","../dicom-core/measurements/measurementHandlers/handleChildMeasurementAdded.js","../dicom-core/measurements/measurementHandlers/handleSingleMeasurementModified.js","../dicom-core/measurements/measurementHandlers/handleChildMeasurementModified.js","../dicom-core/measurements/measurementHandlers/handleSingleMeasurementRemoved.js","../dicom-core/measurements/measurementHandlers/handleChildMeasurementRemoved.js","../dicom-core/measurements/measurementHandlers/index.js","../dicom-core/measurements/toolGroups/targets.js","../dicom-core/measurements/toolGroups/nonTargets.js","../dicom-core/measurements/toolGroups/temp.js","../dicom-core/measurements/ltTools.js","../dicom-core/measurements/index.js","../dicom-core/DICOMSR/utils/isToolSupported.js","../dicom-core/DICOMSR/parseMeasurementsData.js","../dicom-core/DICOMSR/utils/getAllDisplaySets.js","../dicom-core/DICOMSR/handleStructuredReport.js","../dicom-core/DICOMSR/utils/findMostRecentStructuredReport.js","../dicom-core/DICOMSR/index.js","../dicom-core/DICOMSR/dataExchange.js","../dicom-core/cornerstone.js","../dicom-core/lib/cornerstone.js","../dicom-core/hanging-protocols/lib/validate.js","../dicom-core/hanging-protocols/customAttributes.js","../dicom-core/hanging-protocols/HPMatcher.js","../dicom-core/hanging-protocols/customViewportSettings.js","../dicom-core/hanging-protocols/lib/comparators.js","../dicom-core/hanging-protocols/classes/Rule.js","../dicom-core/hanging-protocols/classes/rules.js","../dicom-core/hanging-protocols/lib/removeFromArray.js","../dicom-core/hanging-protocols/classes/ViewportStructure.js","../dicom-core/hanging-protocols/classes/Viewport.js","../dicom-core/hanging-protocols/classes/Stage.js","../dicom-core/hanging-protocols/classes/Protocol.js","../dicom-core/hanging-protocols/protocolStore/classes/ProtocolStore.js","../dicom-core/hanging-protocols/protocolStore/defaultProtocol.js","../dicom-core/hanging-protocols/protocolStore/classes/ProtocolStrategy.js","../dicom-core/hanging-protocols/ProtocolEngine.js","../dicom-core/hanging-protocols/protocolStore/testProtocols.js","../dicom-core/hanging-protocols/index.js","../dicom-core/hanging-protocols/lib/sortByScore.js","../dicom-core/header.js","../dicom-core/object.js","../dicom-core/redux/reducers/extensions.js","../dicom-core/redux/reducers/loading.js","../dicom-core/redux/reducers/preferences.js","../dicom-core/redux/reducers/servers.js","../dicom-core/redux/reducers/studies.js","../dicom-core/redux/reducers/timepointManager.js","../dicom-core/redux/reducers/viewports.js","../dicom-core/redux/reducers/index.js","../dicom-core/redux/localStorage.js","../dicom-core/redux/sessionStorage.js","../dicom-core/redux/index.js","../dicom-core/string.js","../dicom-core/ui/unsavedChanges.js","../dicom-core/ui/index.js","../dicom-core/index.js","../dicom-core/ui/getScrollbarSize.js","../dicom-core/ui/getOffset.js","../dicom-core/ui/isCharacterKeyPress.js","../dicom-core/ui/handleError.js","../dicom-cornerstone/state.js","../dicom-viewer/utils/initWebWorker.js","../dicom-viewer/contexts/ModalContext.js","../dicom-viewer/contexts/DialogContext.js","../dicom-viewer/components/Modal.js","../dicom-viewer/hooks/usePrevious.ts","../dicom-cornerstone/initCornerstoneTools.js","../dicom-cornerstone/utils/measurementServiceMappings/measurementServiceMappingsFactory.js","../dicom-cornerstone/init.js","../dicom-cornerstone/utils/setCornerstoneLayout.js","../dicom-cornerstone/commandsModule.js","../dicom-cornerstone/toolbarModule.js","../dicom-cornerstone/index.js","../dicom-viewer/configureStore.js","../dicom-viewer/extensions/commandModule.js","../dicom-viewer/reducers/layout.js","../dicom-viewer/config.js","../dicom-viewer/AppContext.js","../dicom-viewer/components/ViewerWithStudies.js","../dicom-viewer/components/ViewerRetrieveStudyData.js","../dicom-viewer/hooks/useServer.js","../dicom-viewer/App.js","../dicom-viewer/components/ViewportErrorIndicator.js","../dicom-viewer/components/ViewportLoadingIndicator.js","../dicom-viewer/components/ImageThumbnail.js","../dicom-viewer/components/Thumbnail.js","../dicom-viewer/components/Fade.js","../dicom-viewer/components/Overlay.js","../dicom-viewer/components/OverlayTrigger.js","../dicom-viewer/assets/adjust.svg","../dicom-viewer/assets/angle-double-down.svg","../dicom-viewer/assets/angle-double-up.svg","../dicom-viewer/assets/angle-left.svg","../dicom-viewer/assets/arrows.svg","../dicom-viewer/assets/arrows-alt-h.svg","../dicom-viewer/assets/arrows-alt-v.svg","../dicom-viewer/assets/bars.svg","../dicom-viewer/assets/brain.svg","../dicom-viewer/assets/brush.svg","../dicom-viewer/assets/caret-down.svg","../dicom-viewer/assets/caret-up.svg","../dicom-viewer/assets/check.svg","../dicom-viewer/assets/check-circle.svg","../dicom-viewer/assets/check-circle-o.svg","../dicom-viewer/assets/chevron-down.svg","../dicom-viewer/assets/circle.svg","../dicom-viewer/assets/circle-notch.svg","../dicom-viewer/assets/circle-o.svg","../dicom-viewer/assets/cog.svg","../dicom-viewer/assets/create-comment.svg","../dicom-viewer/assets/create-screen-capture.svg","../dicom-viewer/assets/crosshairs.svg","../dicom-viewer/assets/cube.svg","../dicom-viewer/assets/3d-rotate.svg","../dicom-viewer/assets/database.svg","../dicom-viewer/assets/dot-circle.svg","../dicom-viewer/assets/edit.svg","../dicom-viewer/assets/ellipse-circle.svg","../dicom-viewer/assets/ellipse-h.svg","../dicom-viewer/assets/ellipse-v.svg","../dicom-viewer/assets/exclamation-circle.svg","../dicom-viewer/assets/exclamation-triangle.svg","../dicom-viewer/assets/fast-backward.svg","../dicom-viewer/assets/fast-forward.svg","../dicom-viewer/assets/stop.svg","../dicom-viewer/assets/info.svg","../dicom-viewer/assets/inline-edit.svg","../dicom-viewer/assets/level.svg","../dicom-viewer/assets/link.svg","../dicom-viewer/assets/link-circles.svg","../dicom-viewer/assets/list.svg","../dicom-viewer/assets/liver.svg","../dicom-viewer/assets/lock.svg","../dicom-viewer/assets/lock-alt.svg","../dicom-viewer/assets/lung.svg","../dicom-viewer/assets/measure-non-target.svg","../dicom-viewer/assets/measure-target.svg","../dicom-viewer/assets/measure-target-cr.svg","../dicom-viewer/assets/measure-target-ne.svg","../dicom-viewer/assets/measure-target-un.svg","../dicom-viewer/assets/measure-temp.svg","../dicom-viewer/assets/object-group.svg","../dicom-viewer/assets/ohif-logo.svg","../dicom-viewer/assets/ohif-text-logo.svg","../dicom-viewer/assets/oval.svg","../dicom-viewer/assets/palette.svg","../dicom-viewer/assets/play.svg","../dicom-viewer/assets/plus.svg","../dicom-viewer/assets/power-off.svg","../dicom-viewer/assets/reset.svg","../dicom-viewer/assets/rotate.svg","../dicom-viewer/assets/rotate-right.svg","../dicom-viewer/assets/save-regular.svg","../dicom-viewer/assets/scissors.svg","../dicom-viewer/assets/search.svg","../dicom-viewer/assets/search-plus.svg","../dicom-viewer/assets/soft-tissue.svg","../dicom-viewer/assets/sort.svg","../dicom-viewer/assets/sort-down.svg","../dicom-viewer/assets/sort-up.svg","../dicom-viewer/assets/sphere.svg","../dicom-viewer/assets/square-o.svg","../dicom-viewer/assets/star.svg","../dicom-viewer/assets/step-backward.svg","../dicom-viewer/assets/step-forward.svg","../dicom-viewer/assets/sun.svg","../dicom-viewer/assets/th.svg","../dicom-viewer/assets/th-large.svg","../dicom-viewer/assets/th-list.svg","../dicom-viewer/assets/times.svg","../dicom-viewer/assets/trash.svg","../dicom-viewer/assets/unlink.svg","../dicom-viewer/assets/user.svg","../dicom-viewer/assets/youtube.svg","../dicom-viewer/assets/eye.svg","../dicom-viewer/assets/eye-closed.svg","../dicom-viewer/components/Icon.js","../dicom-viewer/components/ToolbarButton.js","../dicom-viewer/components/Tooltip.js","../dicom-viewer/components/ExpandableToolMenu.js","../dicom-viewer/components/CineDialog.js","../dicom-viewer/components/LayoutChooser.js","../dicom-viewer/components/LayoutButton.js","../dicom-viewer/components/RoundedButtonGroup.js","../dicom-viewer/components/ToolbarRow.js","../dicom-viewer/components/ViewportPane.js","../dicom-viewer/components/ViewportGrid.js","../dicom-viewer/components/ViewerMain.js","../dicom-viewer/components/StudyBrowser.js","../dicom-viewer/index.js","../dicom-viewer/utils/setConfiguration.js","containers/radiol-images-viewer/radiol-image-viewer.tsx"],"names":["COMMANDS","PANEL","SOP_CLASS_HANDLER","TOOLBAR","VIEWPORT","log","error","console","warn","info","trace","debug","time","timeEnd","ExtensionManager","commandsManager","servicesManager","api","appConfig","this","modules","registeredExtensionIds","moduleTypeNames","Object","values","MODULE_TYPES","_commandsManager","_servicesManager","_appConfig","_api","forEach","moduleType","extensions","extension","Array","isArray","ohifExtension","configuration","registerExtension","extensionId","id","Math","random","toString","substr","includes","preRegistration","extensionModule","_getExtensionModule","_initSpecialModuleTypes","push","module","lower","getModuleFnName","charAt","toUpperCase","getModuleFn","ex","definitions","defaultContext","keys","length","_initCommandsModule","commandDefinitions","getContext","createContext","commandName","commandDefinition","context","registerCommand","ServicesManager","services","registeredServiceNames","service","name","create","ohifService","registerService","serviceShowRequestQueue","publicAPI","hide","serviceImplementation","_hide","show","title","message","duration","position","type","autoClose","_show","setServiceImplementation","hideImplementation","showImplementation","showArguments","pop","content","contentProps","shouldCloseOnEsc","isOpen","onClose","closeButton","customClassName","dismiss","_dismiss","dismissAll","_dismissAll","onStart","onDrag","onStop","centralize","preservePosition","isDraggable","showOverlay","defaultPosition","_create","dismissImplementation","dismissAllImplementation","createImplementation","MEASUREMENT_SCHEMA_KEYS","EVENTS","MEASUREMENT_UPDATED","MEASUREMENT_ADDED","VALUE_TYPES","POLYLINE","POINT","ELLIPSE","MULTIPOINT","CIRCLE","MeasurementService","_arrayOfObjects","obj","entries","map","e","sources","mappings","measurements","listeners","defineProperty","value","writable","enumerable","configurable","m","measurement","version","guid","source","definition","addOrUpdate","measurementId","getAnnotation","matchingCriteria","toSourceSchema","toMeasurementSchema","_isValidSource","mapping","_getSourceInfo","_getMappingByMeasurementSource","getMeasurement","matchingMapping","_getMatchingMapping","sourceMeasurement","sourceInfo","_sourceHasMappings","find","_isValidMeasurement","internalId","newMeasurement","modifiedTimestamp","floor","Date","now","_broadcastChange","eventName","callback","_isValidEvent","listenerId","subscription","unsubscribe","_unsubscribe","Error","filter","points","hasListeners","hasCallbacks","listener","undefined","measurementData","key","getFourRandomValues","substring","Metadata","data","uid","_data","propertyName","propertyValue","_uid","attribute","_custom","attributeMap","_hasOwn","prototype","hasOwnProperty","call","index","OHIFError","stack","constructor","InstanceMetadata","defineProperties","_imageId","_definePublicProperties","get","getSOPInstanceUID","getTagValue","tagOrProperty","defaultValue","getIndexedValue","val","idx","parseFloat","parseInt","instance","frame","result","hasIndexValues","indexOf","splitValues","split","isValidIndex","indexedValue","getWADORSImageId","uri","wadorsuri","replace","getWADORSImageUrl","updateQueryStringParameter","regex","RegExp","separator","match","getImageId","thumbnail","url","renderingAttr","imageId","wadouri","OHIFInstanceMetadata","series","study","init","getData","_sopInstanceUID","SOPInstanceUID","_study","_series","_instance","_cache","bypassCache","rawValue","instanceData","metadata","SeriesMetadata","_seriesInstanceUID","_instances","_firstInstance","getSeriesInstanceUID","getInstanceByUID","found","getInstanceByIndex","isValidUID","isValidCallback","OHIFSeriesMetadata","SeriesInstanceUID","instances","addInstance","user","userLoggedIn","getUserId","getName","getAccessToken","login","Promise","resolve","reject","logout","setData","DICOMWeb","getAttribute","element","Value","input","padFour","l","output","i","j","charCodeAt","convertToInt","getAuthorizationHeader","requestOptions","headers","accessToken","auth","Authorization","btoa","getModalities","Modality","ModalitiesInStudy","modalities","vr","Alphabetic","getNumber","getString","join","_getImagePositionPatient","image","ImagePositionPatient","ImageSet","images","attributes","hasOwn","sortingCallback","sort","referenceImagePositionPatient","refIppVec","Vector3","ImageOrientationPatient","scanAxisNormal","cross","distanceImagePairs","ippVec","distance","clone","sub","dot","a","b","sortedImages","imagesTypes","isImage","SOPClassUID","isDisplaySetReconstructable","firstInstance","isMultiframe","NumberOfFrames","constructableModalities","firstImage","firstImageRows","Rows","firstImageColumns","Columns","firstImageSamplesPerPixel","SamplesPerPixel","firstImageOrientationPatient","firstImagePositionPatient","_isSameOrientation","missingFrames","lastIpp","averageSpacingBetweenFrames","_getPerpendicularDistance","previousImagePositionPatient","spacingIssue","_getSpacingIssue","issue","reconstructionIssues","MISSING_FRAMES","IRREGULAR_SPACING","processSingleframe","iop1","iop2","abs","iopTolerance","spacing","averageSpacing","multipleOfAverageSpacing","numberOfSpacings","round","sqrt","pow","errorHandler","getHTTPErrorHandler","LOW_PRIORITY_MODALITIES","freeze","isLowPriorityModality","StudyMetadata","_studyInstanceUID","_displaySets","_derivedDisplaySets","_firstSeries","getStudyInstanceUID","slice","sopClassHandlerModules","displaySets","getInstanceCount","displaySet","seriesData","setAttributes","displaySetInstanceUID","SeriesDescription","SeriesNumber","sopClassUIDs","uniqueSopClassUIDsInSeries","Set","forEachInstance","instanceSopClassUID","add","from","getSopClassUIDs","sopClassHandlerExtensions","handlersForSopClassUID","plugin","errorInterceptor","dicomWebClient","dwc","wadoRoot","getDisplaySetFromSeries","getFirstInstance","_getDisplaySetFromSopClassModule","sopClassModule","isDerived","_addDerivedDisplaySet","stackableInstances","isMultiFrame","makeDisplaySet","isClip","StudyInstanceUID","numImageFrames","InstanceNumber","AcquisitionDatetime","isSingleImageModality","setAttribute","referencedSeriesInstanceUID","referencedFrameOfReferenceUID","filteredDerivedDisplaySets","ReferencedSeriesSequence","some","ReferencedSeries","ReferencedFrameOfReferenceUID","getSeriesCount","forEachSeries","_createDisplaySetsForSeries","ds","_insertDisplaySet","containsSeries","splice","addDisplaySet","firstIndexWithSameSeriesNumber","insertIndex","startingIndex","SeriesDate","seriesDateTime","SeriesTime","displaySetI","getSeriesByUID","findIndex","reduce","sum","getSeriesByIndex","findDisplaySet","firstSeries","getFirstSeries","findInstance","findSeriesAndInstanceByInstance","DICOMwebClient","imageSet","frameRate","sortBy","getImage","isReconstructable","sortByImagePositionPatient","OHIFStudyMetadata","addSeries","CommandsManager","getAppState","getActiveContexts","contexts","_getAppState","_getActiveContexts","contextName","clearContext","foundCommand","activeContext","options","getCommand","commandFn","storeContexts","definitionOptions","commandParams","appState","assign","actions","setViewportActive","viewportIndex","setViewportSpecificData","viewportSpecificData","setViewportLayoutAndData","numRows","numColumns","viewports","setLayout","clearViewportSpecificData","setActiveViewportSpecificData","setStudyLoadingProgress","progressId","progressData","clearStudyLoadingProgress","setUserPreferences","state","setExtensionData","setTimepoints","setMeasurements","setStudyData","setServers","servers","str2ab","str","strLen","bytes","Uint8Array","buffer","fetchPaletteColorLookupTableData","server","PaletteColorLookupTableUID","RedPaletteColorLookupTableDescriptor","GreenPaletteColorLookupTableDescriptor","BluePaletteColorLookupTableDescriptor","RedPaletteColorLookupTableData","GreenPaletteColorLookupTableData","BluePaletteColorLookupTableData","entry","_paletteColorCache","promises","_getPaletteColor","all","then","count","maxAge","paletteColorLookupTableData","lutDescriptor","numLutEntries","bits","arrayBufferToPaletteColorLUT","arraybuffer","byteArray","Uint16Array","lut","BulkDataURI","config","retrieveBulkData","InlineBinary","atob","unpackOverlay","arrayBuffer","bitArray","byteIndex","bitIndex","bitByteIndex","fetchOverlayData","OverlayDataPromises","OverlayDataTags","overlayGroup","groupStr","OverlayDataTag","_getOverlayData","ArrayBuffer","results","tag","dicomWeb","metadataProvider","Map","dicomJSONDatasetOrP10ArrayBuffer","dicomData","DicomMessage","readFile","dicomJSONDataset","dict","naturalizedDataset","dcmjs","DicomMetaDictionary","naturalizeDataset","_getAndCacheStudy","_getAndCacheSeriesFromStudy","_getAndCacheInstanceFromStudy","_checkBulkDataAndInlineBinaries","uids","imageIdToUIDs","set","studies","PhotometricInterpretation","_getUIDsFromImageID","_getInstanceData","query","fallback","_getInstance","INSTANCE","getTagFromInstance","naturalizedTagOrWADOImageLoaderTag","_getCornerstoneWADOImageLoaderTag","wadoImageLoaderTag","WADO_IMAGE_LOADER_TAGS","GENERAL_SERIES_MODULE","seriesDate","seriesTime","dicomParser","parseDA","parseTM","modality","seriesInstanceUID","seriesNumber","studyInstanceUID","PATIENT_STUDY_MODULE","patientAge","PatientAge","patientSize","PatientSize","patientWeight","PatientWeight","IMAGE_PLANE_MODULE","rowPixelSpacing","columnPixelSpacing","rowCosines","columnCosines","PixelSpacing","ImagerPixelSpacing","PixelSpacingCalibrationType","PixelSpacingCalibrationDescription","EstimatedRadiographicMagnificationFactor","SequenceOfUltrasoundRegions","isProjection","TYPES","CorrectedImagerPixelSpacing","pixelSpacing","PhysicalDeltaX","PhysicalDeltaY","getPixelSpacingInformation","frameOfReferenceUID","FrameOfReferenceUID","rows","columns","imageOrientationPatient","imagePositionPatient","sliceThickness","SliceThickness","sliceLocation","SliceLocation","IMAGE_PIXEL_MODULE","samplesPerPixel","photometricInterpretation","bitsAllocated","BitsAllocated","bitsStored","BitsStored","highBit","HighBit","pixelRepresentation","PixelRepresentation","planarConfiguration","PlanarConfiguration","pixelAspectRatio","PixelAspectRatio","smallestPixelValue","SmallestPixelValue","largestPixelValue","LargestPixelValue","redPaletteColorLookupTableDescriptor","greenPaletteColorLookupTableDescriptor","bluePaletteColorLookupTableDescriptor","redPaletteColorLookupTableData","greenPaletteColorLookupTableData","bluePaletteColorLookupTableData","VOI_LUT_MODULE","WindowCenter","WindowWidth","windowCenter","windowWidth","MODALITY_LUT_MODULE","rescaleIntercept","RescaleIntercept","rescaleSlope","RescaleSlope","rescaleType","RescaleType","SOP_COMMON_MODULE","sopClassUID","sopInstanceUID","PET_ISOTOPE_MODULE","RadiopharmaceuticalInformationSequence","RadiopharmaceuticalInformation","RadiopharmaceuticalStartTime","RadionuclideTotalDose","RadionuclideHalfLife","radiopharmaceuticalInfo","radiopharmaceuticalStartTime","radionuclideTotalDose","radionuclideHalfLife","OVERLAY_PLANE_MODULE","overlays","OverlayData","OverlayRowsTag","OverlayColumnsTag","OverlayType","OverlayOriginTag","OverlayDescriptionTag","OverlayLabelTag","ROIAreaTag","ROIMeanTag","ROIStandardDeviationTag","OverlayOrigin","overlay","x","y","pixelData","description","label","roiArea","roiMean","roiStandardDeviation","PATIENT_MODULE","patientName","PatientName","patientId","PatientID","GENERAL_IMAGE_MODULE","sopInstanceUid","instanceNumber","lossyImageCompression","LossyImageCompression","lossyImageCompressionRatio","LossyImageCompressionRatio","lossyImageCompressionMethod","LossyImageCompressionMethod","GENERAL_STUDY_MODULE","studyDescription","StudyDescription","studyDate","StudyDate","studyTime","StudyTime","accessionNumber","AccessionNumber","CINE_MODULE","frameTime","FrameTime","splitImageId","qs","queryString","parse","studyUID","seriesUID","objectUID","stackMap","stackUpdatedCallbacks","createAndAddStack","numImages","imageIds","imageIndex","metaData","naturalizedInstance","frameNumber","addImageIdToUIDs","StackManager","clearStacks","makeAndAddStack","findStack","findOrCreateStack","getAllStacks","addStackUpdatedCallback","getConfiguration","setConfiguration","BaseLoadingListener","getNewId","startListening","statsItemsLimit","stats","items","total","elapsedTime","speed","_setProgressData","_clearProgressById","_addStatsData","_updateProgress","date","newItem","item","shift","oldestItem","getTime","_getProgressId","stopListening","_clearProgress","timeSlice","randomNumber","DICOMFileLoadingListener","_imageLoadProgressEventHandler","eventData","detail","dataSetUrl","_convertImageIdToDataSetUrl","bytesDiff","loaded","_lastLoaded","_dataSetUrl","_getDataSetUrl","_checkCachedData","dataSet","cornerstoneWADOImageLoader","dataSetCacheManager","dataSetLength","percentComplete","imageLoadProgressEventName","_getImageLoadProgressEventName","imageLoadProgressEventHandler","_imageLoadProgressEventHandle","bind","cornerstone","events","addEventListener","imageLoadProgressEventHandle","removeEventListener","multiFrame","bytesLoaded","bytesTotal","bytesPerSecond","StackLoadingListener","imageDataMap","_convertImageIdsArrayToMap","framesStatus","_createArray","loadedCount","imageIdsMap","array","IMAGE_LOADED","IMAGE_CACHE_PROMISE_REMOVED","_updateFrameStatus","imageLoadedEventName","_getImageLoadedEventName","imageCachePromiseRemovedEventName","_getImageCachePromiseRemoveEventName","imageLoadedEventHandler","_imageLoadedEventHandler","imageCachePromiseRemovedEventHandler","_imageCachePromiseRemovedEventHandler","imageData","totalFramesCount","loadedFramesCount","loadingFramesCount","framesPerSecond","progressBar","ch","StudyLoadingListener","stackMetaData","_createListener","addStack","addStudy","displaySetInstanceUIDs","destroy","_getSchema","colonIndex","Mousetrap","_recordedSequence","_recordedSequenceCallback","_currentRecordedKeys","_recordedCharacterKey","_origHandleKey","handleKey","_handleKey","character","modifiers","self","recording","_recordCurrentCombo","_recordKey","apply","arguments","_finishRecording","sequence","_normalizeSequence","record","stopRecord","startRecording","recordPlugin","_originalStopCallback","stopCallback","combo","paused","pause","unpause","pausePlugin","HotkeysManager","hotkeyDefinitions","hotkeyDefaults","isEnabled","event","hotkeys","_getValidDefinitions","registerHotkeys","UINotificationService","_parseToArrayLike","hotkeyDefinitionsObj","copy","entryValue","_parseToHotKeyObj","previouslyRegisteredDefinition","previouslyRegisteredKeys","_unbindHotkeys","_bindHotkeys","setHotkeys","reset","combinedKeys","evt","preventDefault","stopPropagation","runCommand","unbind","ObjectPath","object","path","components","getPathComponents","isValidObject","last","currentObject","field","isValid","absoluteUrl","absolutePath","window","location","origin","absoluteUrlParts","rootUrlPrefixIndex","addServers","store","serverType","endpoint","dispatch","fields","n_fields","A","B","reverse","primer","TypeSafeCollection","_operationCount","_elementList","_handlers","silent","payload","_elements","handlers","limit","handler","_isFunction","insert","_elementWithPayload","_invalidate","_elementWithId","_trigger","propertyMap","findAllEntriesBy","foundCount","removed","_isObject","_compareToPropertyMapStrict","_sortListBy","list","subject","_isString","_hasOwnProperty","_getPropertyValue","targetObject","fragments","fragmentCount","firstFragment","remainingFragments","specifiers","property","order","_isValidSortingSpecifier","specifierCount","specifier","aValue","bValue","studyMetadataList","studyMetadata","findBy","remove","purge","removeAll","imageObj","someInvalidStrings","strings","string","getImageInstance","dataset","getImageInstanceId","imageInstance","fetchIt","fetch","response","cornerstoneRetriever","loadAndCacheImage","wadorsRetriever","retrieveInstance","dicomLoaderService","localFile","findImageIdOnStudies","loadFileRequest","getDicomDataMethod","loaderRegExp","loaderType","exec","lastIndex","getImageLoaderType","authorizationHeaders","wadoUri","getLocalData","getDataByImageType","getDataByDatasetType","loaderIterator","getLoaderIterator","loader","b64toBlob","b64Data","contentType","sliceSize","byteCharacters","byteArrays","offset","byteNumbers","blob","Blob","loadAndCacheDerivedDisplaySets","referencedDisplaySet","studyMetadataManager","derivedDisplaySets","getDerivedDatasets","displaySetsPerModality","isLoaded","loadError","recentDateTime","recentDisplaySet","dateTime","Number","isLoading","load","toLowerCaseFirstLetter","word","toLowerCase","toParse","lib","getQueryFilters","search","searchParameters","filters","paramString","isValidPath","paramPatternPiece","parseParam","paramStr","_paramDecoded","strToDecode","decoded","decode","replaceParam","paramKey","paramValue","paramPattern","makeDeferred","promise","res","rej","Queue","size","awaiting","task","onError","boundTask","queue","cleaner","clean","args","chain","prev","addToList","addValuesToList","forEachValue","getItem","indexOrPath","subpath","isSublist","print","text","prevLen","repeat","sublist","toSublist","TYPE","Symbol","TASK","LIST","createList","objectWithType","head","named","observers","isList","isOfType","createTask","next","isTask","failed","progress","increaseList","notify","getOverallProgress","update","isValidProgress","finish","status","seal","partial","failures","waitOn","thenable","addDeferred","deferred","setTaskName","contains","getTaskByName","addObserver","observer","removeObserver","utils","writeScript","fileName","script","document","createElement","src","onload","body","appendChild","DicomLoaderService","urlUtil","makeCancelable","isCanceled","cancel","isDicomUid","test","trim","resolveObjectPath","root","hierarchicalListUtils","progressTrackingUtils","StudyMetadataSource","getReferencedSeriesSequence","referencedSeriesSequenceRaw","referencedSeriesSequence","referencedSeries","referencedInstanceSequenceRaw","referencedInstanceSequence","referencedInstance","referencedSOPClassUID","referencedSOPInstanceUID","createStudy","aSopInstance","seriesMap","seriesLoader","wadoUriRoot","qidoRoot","NumberOfStudyRelatedInstances","InstitutionName","buildInstanceWadoUrl","params","buildInstanceWadoRsUri","buildInstanceFrameWadoRsUri","baseWadoRsUri","makeSOPInstance","sopInstance","imageRendering","thumbnailRendering","wadoRSMetadata","wadorsImageId","wadors","metaDataManager","addInstancesToStudy","sopInstanceList","createStudyFromSOPInstanceList","firstSopInstance","RetrieveMetadataLoader","configLoad","preLoad","preLoadData","loadData","posLoad","postLoadData","loaders","done","RetrieveMetadataLoaderSync","client","retrieveSeriesMetadata","retrieveStudyMetadata","getLoaders","runLoaders","INFO","getSeriesInfo","isLowPriority","seriesSortCriteria","default","seriesInfoSortingCriteria","secondSeries","instancesSortCriteria","sortingCriteria","sortStudySeries","seriesSortingCriteria","sortStudyInstances","instancesList","instancesSortingCriteria","attachSeriesLoader","hasNext","sopInstances","makeSeriesAsyncLoader","seriesInstanceUIDList","RetrieveMetadataLoaderAsync","preLoaders","queryParams","searchForSeries","getPreLoaders","seriesSorted","seriesInstanceUIDsMap","seriesAsyncLoader","asyncLoader","seriesDataFromQIDO","enableStudyLazyLoad","retrieveMetadataLoader","execLoad","RetrieveMetadata","StudyMetaDataPromises","has","classes","OHIFStudyMetadataSource","OHIF","viewer","Studies","_updateStudyCollections","getByInstanceUID","studyInfo","createDisplaySets","catch","selected","getDisplaySets","MetadataProvider","StudyPrefetcher","cacheFullHandler","stopPrefetching","prefetchDisplaySetsTimeout","lastActiveViewportElement","prefetchDisplaySets","cornerstoneTools","requestPoolManager","clearRequestStack","timeout","clearTimeout","prefetchDisplaySetsHandler","setTimeout","displaySetsToPrefetch","getDisplaySetsToPrefetch","displaySetCount","getImageIdsFromDisplaySets","prefetchImageIds","nonCachedImageIds","filterCachedImageIds","noop","addRequest","startGrabbing","viewerbase","getStudyMetadata","instanceMetadata","displaySetImage","getActiveViewportImage","prefetchOrder","topdown","downward","closest","activeDisplaySet","selectedDisplaySets","begin","end","min","activeDisplaySetIndex","left","right","concat","getImageIdsFromDisplaySet","numFrames","isImageCached","imageCache","sizeInBytes","resultDataToStudyMetadata","resultData","dateToString","year","getFullYear","month","getMonth","day","getDate","resultDataToStudies","referringPhysicianName","PatientBirthdate","patientSex","studyId","numberOfStudyRelatedSeries","numberOfStudyRelatedInstances","qidoSupportsIncludeField","serverSupportsQIDOIncludeField","commaSeparatedFields","parameters","fuzzymatching","includefield","studyDateFrom","studyDateTo","dateFrom","dateTo","studyUIDs","getQIDOQueryParams","searchForStudies","WADO","QIDO","Instances","searchForInstances","studySearchPromises","loadingDict","deleteStudyMetadataPromise","delete","retrieveStudiesMetadata","studyInstanceUIDs","getStudyBoxData","searchStudies","promiseKeyObj","promiseKey","JSON","stringify","sortStudy","deepSort","findInstanceMetadataBySopInstanceUID","instanceFound","getImagePath","frameIndex","parseDicomStructuredReport","part10SRArrayBuffer","storedMeasurementByToolType","adapters","Cornerstone","MeasurementReport","generateToolState","measurementNumber","toolName","imagePath","toolData","timepointId","toolType","_id","arrowAnnotate","toolGroup","cornerstoneToolType","measurementTable","displayFunction","caseProgress","include","evaluate","bidirectional","shortestDiameter","longestDiameter","ellipticalRoi","meanValue","cachedStats","mean","isNaN","toFixed","circleRoi","freehandMouse","meanStdDev","lengthValue","nonTarget","rectangleRoi","angle","rAngle","String","fromCharCode","targetCR","targetNE","targetUN","lesionNamingNumber","childTools","tools","measurementApiDefaultConfig","measurementTools","newLesions","toolGroupId","dataExchange","retrieve","timepointIds","timepointApiDefaultConfig","timepointData","disassociate","MeasurementApi","timepointApi","Instance","initialize","toolsGroupsMap","tool","getToolsGroupsMap","measurementLabel","getLabel","labels","toolState","globalImageIdSpecificToolStateManager","saveToolState","getToolConfiguration","childToolKey","childMeasurement","syncMeasurementAndToolData","getImageIdForImagePath","currentToolState","alreadyExists","restoreToolState","toolGroups","toolGroupTools","getToolGroupTools","onMeasurementsUpdated","retrievalFn","measurementTypeId","addMeasurement","syncMeasurementsAndToolData","getEnabledElements","enabledElement","updateImage","storeFn","isToolIncluded","timepointFilter","tp","timepoints","t","sortedMeasurements","toolId","toolItemId","includedChildTools","every","toolConfig","parentTool","currentMeasurement","current","initialTimepointIds","initialtpid","lesionExistsAtTimepoints","groupId","acc","tp1","tp2","toolGroupMeasurement","isNewLesionsMeasurement","maxTargetMeasurementNumber","calculateLesionMaxMeasurementNumber","maxNonTargetMeasurementNumber","max","maxNewTargetMeasurementNumber","calculateNewLesionMaxMeasurementNumber","maxNewNonTargetMeasurementNumber","additionalData","TrialPatientLocationUID","childToolTypes","childToolType","collectionToUpdate","propertyFilter","increment","updateNumbering","timepoint","groupCollection","collection","relatedMeasurement","emptyItem","groupTool","createdAt","measurementsInTimepoint","calculateLesionNamingNumber","calculateMeasurementNumber","addedMeasurement","updateObject","getPreviousMeasurement","isSplitLesion","isNodal","getDescription","hasDuplicateMeasurementNumber","updateMeasurementNumberForAllMeasurements","toolIndex","groupIndex","group","lesionNamingNumberFilter","tGroup","childTool","filterKeys","groupItems","filterKey","groupItem","measurementsData","measurementEntries","measurementEntry","mEntry","onMeasurementRemoved","syncFilter","syncFilterKeys","syncFilterKey","TIMEPOINT_TYPE_NAMES","prebaseline","baseline","followup","TimepointApi","currentTimepointId","comparisonTimepointKey","onTimepointsUpdated","visitNumber","visitDate","timepointType","timepointIndex","reason","disassociateFn","retrieveTimepoints","removeFn","tpIndex","updateFn","locked","prior","comparisonTimepoint","comparison","userComparison","nextBaselineAfterCurrent","currentTimepoint","allNextTimepoints","latestInitialBeforeNextFUIndex","timepointToCheck","latestInitialTimepointAfterCurrent","visitDateToCheck","preBaselineTimepointIds","baselineTimepointIds","currentVisitDate","nadir","timepointKey","resultIncludes","timepointTypeName","calculateVisitNumber","timepointName","currentIndex","parenthesis","0","1","parenthesisText","BaseCriterion","criterionName","passed","isGlobal","baselineMeasurementNumbers","newTargetNumbers","newTarget","targets","target","LocationSchema","LocationCriterion","props","nonTargets","generateResponse","MaxTargetsPerOrganSchema","properties","minimum","required","MaxTargetsPerOrganCriterion","targetsPerOrgan","getNewTargetNumbers","MaxTargetsSchema","locationIn","minItems","uniqueItems","locationNotIn","MaxTargetsCriterion","measurementNumbers","lesionType","plural","amount","MeasurementsLengthSchema","longAxis","shortAxis","longAxisSliceThicknessMultiplier","shortAxisSliceThicknessMultiplier","modalityIn","modalityNotIn","anyOf","MeasurementsLengthCriterion","longMultiplier","shortMultiplier","childToolsCount","child","ModalitySchema","method","enum","measurementTypes","ModalityCriterion","modalitiesSet","validationMethod","invalidModalities","measurementType","uniqueModalities","uniqueModalitiesText","modalityText","NonTargetResponseSchema","NonTargetResponseCriterion","TargetTypeSchema","TargetTypeCriterion","Criteria","initialCriteria","CriteriaEvaluator","criteriaObject","criteriaValidator","getCriteriaValidator","criteria","errors","dataPath","criterionkey","optionsObject","Criterion","criterion","newTargetMatch","schema","criterionDefinition","oneOf","$ref","Ajv","compile","nonconformities","criterionResult","criterionKey","criterionDefinitions","recist11","evaluations","initialEvaluations","ConformanceCriteria","measurementApi","groupedNonConformities","maxTargets","maxNewTargets","loadStudy","trialCriteriaType","baselinePromise","followupPromise","baselineData","followupData","mergedData","resultBoth","validateTimepoint","resultBaseline","resultFollowup","groupNonConformities","groups","nonConformity","globals","messages","groupName","measureNumber","evaluators","getEvaluators","evaluator","getMaxTargets","resultItem","trialCriteriaTypeId","evaluation","evaluationTimepoint","studyPromises","fillData","evaluationKey","evaluationDefinitions","getEnabledElement","refreshCornerstoneViewports","handleSingleMeasurementAdded","cancelled","imageAttributes","getImageAttributes","userId","additionalProperties","parentMeasurement","updateMeasurement","viewport","getViewport","handleSingleMeasurementRemoved","deleteMeasurements","measurementIndex","getEventData","MeasurementHandlers","handleChildMeasurementAdded","handleSingleMeasurementModified","handleChildMeasurementModified","handleChildMeasurementRemoved","onAdded","onModified","onRemoved","cloneDeep","temp","ltTools","isToolSupported","parseMeasurementsData","unsupportedTools","annotation","generateReport","getAllDisplaySets","allDisplaySets","retrieveMeasurementFromSR","serverUrl","stowSRFromMeasurements","DicomDict","meta","FileMetaInformationVersion","_meta","MediaStorageSOPClassUID","MediaStorageSOPInstanceUID","TransferSyntaxUID","ImplementationClassUID","ImplementationVersionName","denaturalized","denaturalizeDataset","dicomDict","part10Buffer","write","datasets","storeInstances","isStructuredReportSeries","compareSeriesDate","series1","series2","findMostRecentStructuredReport","mostRecentStructuredReport","getSeries","DICOMSR","retrieveMeasurements","latestSeries","storeMeasurements","firstMeasurementKey","firstMeasurement","getBoundingBox","textLines","font","textStyle","getFont","fontSize","getFontSize","save","textBaseline","maxWidth","width","measureText","boundingBox","padding","height","centering","top","restore","pixelToPage","canvas","canvasOffset","$","canvasPosition","pixelToCanvas","repositionTextBox","isCreating","allowedBorders","uiSettings","autoPositionMeasurementsTextCallOuts","allow","T","R","L","getRenderingInformation","limits","mid","directions","diffX","cornerAxis","x1","y1","calculateAxisCenter","axis","start","lowest","handles","textBox","$canvas","canvasWidth","outerWidth","canvasHeight","outerHeight","canvasDimensions","bounds","getHandlePosition","cornerAxisPosition","availableAreas","labelWidth","labelHeight","topLeft","bottomRight","getAvailableBlankAreas","tempDirections","tempCornerAxis","foundPlace","renderingInformation","pageToPixel","toolAxis","boxSize","getTextBoxSizeInPixels","textBoxOffset","centerX","centerY","halfBoxSizeX","halfBoxSizeY","offsetY","offsetX","getTextBoxOffset","canvasBorders","x0","y0","pixelPosition","validate","validators","equals","doesNotEqual","doesNotContain","startsWith","endsWith","CustomAttributeRetrievalCallbacks","HPMatcher","metadataInstance","rules","format","details","requiredFailed","score","rule","customAttribute","setCustomAttribute","errorMessages","testConstraint","constraint","attributeValue","customAttributeExists","getCustomAttribute","weight","CustomViewportSettings","comparators","validator","validatorOption","EQUALS_REGEXP","Rule","_constraintInfo","_validatorAndValue","constraintInfo","ruleConstraint","comparator","isRuleForPrior","ruleValidatorAndValue","getConstraintValidatorAndValue","intValue","validatorAndValue","getConstraintInfo","currentValidator","ProtocolMatchingRule","StudyMatchingRule","SeriesMatchingRule","ImageMatchingRule","removeFromArray","indexToRemove","ViewportStructure","Viewport","viewportSettings","imageMatchingRules","seriesMatchingRules","studyMatchingRules","ruleObject","fromObject","Stage","viewportStructure","createdDate","currentStage","clonedStage","viewportObject","Protocol","hasUpdatedPriorsInformation","modifiedDate","createdBy","modifiedBy","availableTo","editableBy","protocolMatchingRules","stages","numberOfPriorsReferenced","skipCache","stage","priorsReferenced","getNumberOfPriorsReferenced","updateNumberOfPriorsReferenced","stageObject","currentProtocol","clonedProtocol","protocolWasModified","ProtocolStore","strategy","onReady","protocolId","getProtocol","getProtocolInstance","protocol","addProtocol","updateProtocol","removeProtocol","protocolObject","protocolInstance","defaultProtocol","oneByOne","first","getDefaultProtocol","ProtocolStrategy","hangingProtocols","defaultsAdded","ProtocolEngine","protocolStore","priorStudies","studyMetadataSource","matchedProtocols","matchedProtocolScores","newStageIds","getBestProtocolMatch","setHangingProtocol","matched","studyInstance","numberOfAvailablePriors","getNumberOfAvailablePriors","getObjectID","clear","_clearMatchedProtocols","findMatchByStudy","matchedDetail","highestScoringProtocolId","_largestKeyByValue","updateProtocolMatches","bestMatch","_getHighestScoringProtocol","studyObjectID","getAvailableStudyPriors","priors","instanceMatchingRules","matchingScores","currentStudy","highestStudyMatchingScore","highestSeriesMatchingScore","priorStudy","validatorType","abstractPriorValue","studyIndex","priorStudyObjectID","updateViewports","studyMatchDetails","seriesMatchDetails","instanceMatchDetails","matchDetails","totalMatchScore","currentSOPInstanceUID","imageDetails","currentImageIdIndex","matchingScore","sortingInfo","getUID","sortingFunction","numViewports","getNumProtocolStages","stageModel","getCurrentStageModel","getLayoutTemplateName","layoutProps","viewportData","matchImages","cornerstoneViewportParams","viewportSettingsKeys","currentViewportData","customSettings","renderedCallback","customSetting","currentMatch","currentPosition","scoresLength","newProtocol","isPrototypeOf","numberOfStages","stageAction","isPreviousStageAvailable","isNextStageAvailable","setCurrentProtocolStage","addCustomAttribute","attributeId","attributeName","addCustomViewportSetting","settingId","settingName","header","getNestedObject","shallowObject","nestedObject","propertyArray","currentProperty","getShallowObject","putValues","baseKey","resultObject","currentKey","currentValue","defaultState","action","extensionName","currentData","incomingData","lastUpdated","loading","windowLevelData","level","2","3","4","5","6","7","8","9","10","generalPreferences","preferences","uniqBy","s","active","newServer","newServers","studyData","updatedStudyData","timepointManager","setAutoFreeze","DEFAULT_STATE","activeViewportIndex","layout","findActiveViewportSpecificData","currentViewportSpecificData","numberOfViewports","getActiveViewportIndex","currentActiveViewportIndex","reducers","useActiveViewport","produce","draftState","LocalStorageApi","localStorage","saveState","serializedState","setItem","loadState","SessionStorageApi","sessionStorage","redux","isObject","isString","pattern","encodeId","rootNode","children","node","Node","recursively","probe","append","getNodeUpToIndex","notFound","nonRecursively","trigger","attachHandler","removeHandler","ui","getScrollbarSize","inner","style","outer","visibility","overflow","w1","offsetWidth","h1","offsetHeight","w2","h2","clientWidth","clientHeight","removeChild","getOffset","offsetParent","offsetLeft","offsetTop","isCharacterKeyPress","which","ctrlKey","metaKey","altKey","handleError","class","hideConfirm","cancelLabel","cancelClass","UIModalService","UIDialogService","enabledElements","setEnabledElement","initialized","ModalContext","Provider","ModalProvider","Modal","modal","DEFAULT_OPTIONS","useState","setOptions","useCallback","useEffect","ModalContent","className","classNames","defaultProps","Consumer","DialogContext","DialogProvider","isDragging","setIsDragging","dialogs","setDialogs","lastDialogId","setLastDialogId","lastDialogPosition","setLastDialogPosition","centerPositions","setCenterPositions","dialog","getCenterPosition","querySelector","itemBounds","getBoundingClientRect","dialogId","_bringToFront","topDialog","isEmpty","_updateLastDialogPosition","draggableItemBounds","validCallback","DialogContent","dragableItem","disabled","srcElement","tagName","zIndex","onClick","customStyle","backgroundColor","display","alignItems","justifyContent","setAppElement","getElementById","OHIFModal","data-cy","usePrevious","ref","useRef","SUPPORTED_TOOLS","measurementServiceMappingsFactory","measurementService","_getAttributes","_getValueTypeFromToolType","Length","EllipticalRoi","RectangleRoi","ArrowAnnotate","_getPointsFromHandles","handle","point","_getHandlesFromPoints","p","toAnnotation","unit","referenceSeriesUID","_measurementServiceId","toMeasurement","csToolsAnnotation","area","csToolsConfig","addProvider","external","Hammer","cornerstoneMath","loadHandlerManager","setErrorLoadingHandler","fontFamily","setFont","toolStyle","setToolWidth","toolColors","setToolColor","setActiveColor","touchProximity","stackPrefetch","maxImagesToPrefetch","Infinity","preserveExistingPool","maxSimultaneousRequests","initCornerstoneTools","globalToolSyncEnabled","showSVGCursors","autoResizeViewports","toolsGroupedByType","touch","csTools","PanMultiTouchTool","ZoomTouchPinchTool","annotations","ArrowAnnotateTool","BidirectionalTool","LengthTool","AngleTool","FreehandRoiTool","EllipticalRoiTool","DragProbeTool","RectangleRoiTool","other","PanTool","ZoomTool","WwwcTool","WwwcRegionTool","MagnifyTool","StackScrollTool","StackScrollMouseWheelTool","OverlayTool","toolsGroup","_connectToolsToMeasurementService","internalToolsConfig","getTextCallback","eventDetails","changeTextCallback","externalToolProps","internalToolProps","merge","toolsWithHideableHandles","parsedProps","hideHandles","drawHandlesOnHover","parseToolProps","addTool","BaseAnnotationTool","importInternal","setToolPassive","setToolActive","mouseButtonMask","pointers","setToolEnabled","csToolsVer4MeasurementSource","createSource","valueType","addMapping","_initMeasurementService","sourceId","ELEMENT_ENABLED","subscribe","addMeasurementServiceId","MEASUREMENT_MODIFIED","csToolsEvtName","csTool","measurementServiceId","addOrUpdateMeasurement","setCornerstoneLayout","scroll","import","commandsModule","rotateViewport","rotation","setViewport","flipViewportHorizontal","hflip","flipViewportVertical","vflip","scaleViewport","direction","step","scale","fitToWindow","resetViewport","invertViewport","invert","clearAnnotations","imageIdToolState","measurementsToRemove","nextImage","previousImage","getActiveViewportEnabledElement","showDownloadViewportModal","updateTableWithNewMeasurementData","getNearbyToolData","canvasCoordinates","availableToolTypes","nearbyTool","pointNearTool","elementToolData","getToolState","elementToolInstance","getToolForElement","removeToolState","setWindowLevel","voi","jumpToImage","rotateViewportCW","rotateViewportCCW","scaleUpViewport","scaleDownViewport","fitViewportToWindow","setZoomTool","TOOLBAR_BUTTON_TYPES","icon","commandOptions","behavior","togglable","Component","React","lazy","OHIFCornerstoneViewport","Suspense","getViewportModule","onNewImage","jumpData","getToolbarModule","toolbarModule","getCommandsModule","logger","createLogger","collapsed","middleware","thunkMiddleware","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","rootReducer","combineReducers","preloadedState","createStore","applyMiddleware","getState","updateActiveViewport","maxIndex","newIndex","setWindowLevelPreset","preset","updateViewportDisplaySet","activeViewport","currentDisplaySetIndex","newDisplaySetData","incrementActiveViewport","decrementActiveViewport","windowLevelPreset1","windowLevelPreset2","windowLevelPreset3","windowLevelPreset4","windowLevelPreset5","windowLevelPreset6","windowLevelPreset7","windowLevelPreset8","windowLevelPreset9","nextViewportDisplaySet","previousViewportDisplaySet","createSelector","layoutViewports","activeContexts","activeLayoutViewport","activeViewportSpecificData","activeViewportPluginName","activeViewportExtension","routerBasename","showStudyList","filterQueryParam","supportsFuzzyMatching","cornerstoneExtensionConfig","AppContext","useAppContext","useContext","AppProvider","useSelector","registerServices","defaultConfig","appConfigHotkeys","commandsManagerConfig","hotkeysManager","userPreferredHotkeys","setDefaultHotKeys","extensionManager","CORNERSTONE","VTK","hooks","requiredExtensions","GenericViewerCommands","OHIFCornerstoneExtension","disableMeasurementPanel","mergedExtensions","registerExtensions","ViewerWithStudies","isLeftSidePanelOpen","isRightSidePanelOpen","selectedRightSidePanel","selectedLeftSidePanel","thumbnails","earliestDate","toISOString","latestDate","moment","isLocked","storeTimepoints","updateTimepoint","removeTimepoint","disassociateStudy","activeServer","isStudyLoaded","setState","_mapStudiesToThumbnails","prevProps","panelExt","comp","component","onChange","altImageText","getActiveServer","ConnectedViewerWithStudies","connect","_promoteStudyDisplaySet","promoted","promotedResponse","searchMethod","listCopy","promotedCount","arrayValues","itemToPromote","_promoteToFront","valueToCompare","_addSeriesToStudy","seriesMetadata","updateSeries","createAndAddDisplaySetsForSeries","_updateStudyMetadataManager","isActive","ConnectedViewerRetrieveStudyData","ownProps","cancelableSeriesPromises","cancelableStudiesPromises","seriesInstanceUIDs","setError","setStudies","setIsStudyLoaded","isFilterStrategy","maxConcurrentMetadataRequests","studyDidLoad","_promoteList","queryParamApplied","showUserMessage","_showUserMessage","applied","validateFilterApplied","arrayToInspect","seriesInstanceUIDStr","validatePromoteApplied","resultSeries","validateMethod","_isQueryParamApplied","processStudies","studiesData","_thinStudyData","_addDerivedDisplaySets","_updateStudyDisplaySets","loadRemainingSeries","loadNextSeries","concurrentRequestsAllowed","fill","loadStudies","retrieveParams","purgeCancellablePromises","prevStudyInstanceUIDs","isValidServer","useServerFromUrl","previousServers","urlBasedServers","enableGoogleCloudAdapter","serverHasChanged","exists","UrlUtil","getSeriesInstanceUIDs","routeLocation","queryFilters","querySeriesUIDs","_seriesInstanceUIDs","App","useRouteMatch","project","dicomStore","useLocation","useDispatch","shouldUpdateServer","useServer","seriesUIDs","ViewportErrorIndicator","bottom","margin","textAlign","pointerEvents","ViewportLoadingIndicator","ImageThumbnail","loadingOrError","cancelablePromise","imageSrc","stackPercentComplete","propsError","setLoading","setImage","canvasRef","createRef","showStackLoadingProgressBar","shouldRenderToCanvas","fetchImagePromise","setImagePromise","purgeCancelablePromise","renderToCanvas","ImageThumbnailWrapper","alt","imageThumbnailLoadingIndicator","keyframes","styled","div","theme","primary","Thumbnail","onDoubleClick","onMouseDown","supportsDrag","useDrag","canDrag","monitor","drag","hasImage","hasAltText","ThumbnailWrapper","infoOnly","getInfo","getSeriesInformation","ThumbnailFooter","fadeStyles","ENTERING","ENTERED","Fade","Transition","innerProps","cloneElement","in","mountOnEnter","unmountOnExit","appear","animation","rootClose","placement","Overlay","transition","createChainedFunction","funcs","f","isOneOf","one","of","OverlayTrigger","handleToggle","handleDelayedShow","handleDelayedHide","handleHide","handleMouseOver","handleMouseOverOut","handleMouseOut","_mountNode","defaultOverlayShown","renderOverlay","ReactDOM","unmountComponentAtNode","_hoverShowDelay","_hoverHideDelay","delay","delayHide","delayShow","relatedNative","currentTarget","related","relatedTarget","nativeEvent","onHide","unstable_renderSubtreeIntoContainer","_overlay","onBlur","onFocus","onMouseOut","onMouseOver","Children","only","childProps","triggerProps","warning","makeOverlay","_extends","_objectWithoutProperties","excluded","sourceKeys","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","d","_ref","svgRef","viewBox","ForwardRef","forwardRef","strokeWidth","strokeLinecap","strokeLinejoin","stroke","fillRule","transform","_ref13","clipRule","opacity","cx","cy","r","strokeDasharray","rx","ry","strokeMiterlimit","focusable","role","ICONS","eye","eyeClosed","brush","scissors","th","star","sortUp","sphere","sortDown","cube","crosshairs","dotCircle","angleLeft","d3Rotate","plus","chevronDown","angleDoubleDown","angleDoubleUp","arrowsAltH","arrowsAltV","bars","caretDown","caretUp","checkCircleO","check","circle","circleO","times","createComment","createScreenCapture","edit","fastBackward","fastForward","objectGroup","powerOff","inlineEdit","ohifLogo","ohifTextLogo","lock","play","database","cog","circleNotch","squareO","checkCircle","lockAlt","stepBackward","stepForward","stop","thLarge","thList","sun","palette","youtube","oval","ellipseH","ellipseV","adjust","linkCircles","searchPlus","measureNonTarget","measureTarget","measureTargetCr","measureTargetUn","measureTargetNe","measureTemp","ellipseCircle","arrows","rotate","rotateRight","trash","unlink","exclamationCircle","link","exclamationTriangle","brain","softTissue","lung","liver","saveRegular","Icon","getIcon","ToolbarButton","labelWhenActive","classnames","iconProps","arrowIconName","isExpanded","arrowIcon","isExpandable","cypressSelectorId","ToolbarButtonWrapper","Tooltip","positionTop","positionLeft","arrowOffsetTop","arrowOffsetLeft","outerStyle","arrowStyle","TooltipWrapper","ExpandableToolMenu","toolbarMenuOverlay","getButtons","buttons","button","activeCommand","activeIcon","btn","onExpandableToolClick","onGroupMenuClick","onOverlayHide","toolbarComponent","ExpandableToolStyles","createGlobalStyle","scrollToIndex","toolImport","CineDialog","handleInputChange","onFrameRateChanged","onClickPlayPause","isPlaying","onPlayPauseChanged","onClickNextButton","onClickBackButton","onClickSkipToStart","onClickSkipToEnd","cineFrameRate","CineDialogWrapper","data-toggle","cineMinFrameRate","cineMaxFrameRate","cineStepFrameRate","PureComponent","ConnectedCineDialog","cine","activeEnabledElement","activeViewportCineData","dispatchSetViewportSpecificData","propsFromState","propsFromDispatch","stackData","LayoutChooser","isRange","cell","parentCell","row","col","highlightCells","currentCell","table","newRow","emptyCell","selectedCell","column","visible","minWidth","cellBorder","LayoutChooserWrapper","border","onMouseEnter","onMouseLeave","LayoutButton","dropdownVisible","ConnectedLayoutButton","currentLayout","vtk","onChangeFromDispatch","RoundedButtonGroup","onClickOption","newValue","onValueChanged","option","roundedButtonWrapper","noselect","optionText","bottomLabel","ToolbarRow","closeCineDialogIfNotApplicable","activeButtons","toolbarButtons","toolbarButtonDefinitions","_getVisibleToolbarButtons","seriesPerStudyCount","_handleBuiltIn","updateButtonGroups","panelModules","buttonGroups","panelExtension","panelModule","defaultContexts","menuOptions","menuOption","hasActiveContext","actx","isDisabled","menuOptionEntry","unshift","activeContextsChanged","prevStudies","studiesUpdated","buttonComponents","_getButtonComponents","onPressRight","side","handleSidePanelChange","ToolbarRowWrapper","marginLeft","_getCustomButtonComponent","CustomComponent","activeButtonsIds","parentContext","toolbarClickCallback","_handleToolbarButtonClick","_getExpandableButtonComponent","childButtons","childButton","_getDefaultButtonComponent","_this","hasCustomComponent","hasNestedButtonDefinitions","toggables","toolbarModules","newDialogId","withModal","withDialog","ViewportPaneWrapper","ViewportPane","onDrop","propClassName","useDrop","accept","drop","droppedItem","canDrop","isOver","collect","highlighted","hovered","EmptyViewport","ViewportGrid","availablePlugins","defaultPluginName","defaultPlugin","setViewportData","ViewportPanes","useMemo","pluginName","ViewportComponent","_getViewportComponent","rowSize","colSize","ViewportGridWrapper","gridTemplateRows","gridTemplateColumns","supportsDrop","DefaultViewport","getAvailableViewportModules","memoize","viewportModules","availableViewportModules","moduleDefinition","ConnectedViewportGrid","_values","ViewerMain","fillEmptyViewportPanes","dirtyViewportPanes","viewportPane","foundDisplaySet","v","vp","getSourceDisplaySet","dSet","prevViewportAmount","viewportAmount","isVtk","ViewerMainWrapper","ConnectedViewerMain","StudyBrowser","onThumbnailClick","onThumbnailDoubleClick","StyledBrowserWrapper","thumb","thumbIndex","flat","ConnectedStudyBrowser","stackLoadingProgressMap","studiesWithLoadingData","stackId","stackProgressData","currentDisplaySet","findDisplaySetByUID","ohif","app","httpErrorHandler","configure","beforeSend","xhr","setRequestHeader","maxWebWorkers","navigator","hardwareConcurrency","startWebWorkersOnDemand","taskConfiguration","decodeTask","initializeCodecsOnStartup","usePDFJS","strict","webWorkerManager","initWebWorkers","RadiolImageViewer","useTitle","useBreadcrumb","useVisible","annotationListVisible","handleAnnotationListVisible","useHeaderContent","color","bodyStyle","paddingTop","span","bordered","gutter","selectedPanel","sideClicked","openKey","selectedKey","updatedState","prevSelectedPanel","isSameSelectedPanel","activeKey","expandIcon","Panel"],"mappings":"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","file":"static/js/5.b7b4542c.chunk.js","sourcesContent":["export default {\n  COMMANDS: 'commandsModule',\n  PANEL: 'panelModule',\n  SOP_CLASS_HANDLER: 'sopClassHandlerModule',\n  TOOLBAR: 'toolbarModule',\n  VIEWPORT: 'viewportModule',\n};\n","const log = {\n  error: console.error,\n  warn: console.warn,\n  info: console.log,\n  trace: console.trace,\n  debug: console.debug,\n  time: console.time,\n  timeEnd: console.timeEnd,\n};\n\nexport default log;\n","import MODULE_TYPES from './MODULE_TYPES.js';\nimport log from './../log.js';\n\nexport default class ExtensionManager {\n  constructor({ commandsManager, servicesManager, api, appConfig = {} }) {\n    this.modules = {};\n    this.registeredExtensionIds = [];\n    this.moduleTypeNames = Object.values(MODULE_TYPES);\n    //\n    this._commandsManager = commandsManager;\n    this._servicesManager = servicesManager;\n    this._appConfig = appConfig;\n    this._api = api;\n\n    this.moduleTypeNames.forEach(moduleType => {\n      this.modules[moduleType] = [];\n    });\n  }\n\n  /**\n   * An array of extensions, or an array of arrays that contains extension\n   * configuration pairs.\n   *\n   * @param {Object[]} extensions - Array of extensions\n   */\n  registerExtensions(extensions) {\n    extensions.forEach(extension => {\n      const hasConfiguration = Array.isArray(extension);\n\n      if (hasConfiguration) {\n        const [ohifExtension, configuration] = extension;\n        this.registerExtension(ohifExtension, configuration);\n      } else {\n        this.registerExtension(extension);\n      }\n    });\n  }\n\n  /**\n   *\n   * TODO: Id Management: SopClassHandlers currently refer to viewport module by id; setting the extension id as viewport module id is a workaround for now\n   * @param {Object} extension\n   * @param {Object} configuration\n   */\n  registerExtension(extension, configuration = {}) {\n    if (!extension) {\n      log.warn(\n        'Attempting to register a null/undefined extension. Exiting early.'\n      );\n      return;\n    }\n\n    let extensionId = extension.id;\n\n    if (!extensionId) {\n      extensionId = Math.random()\n        .toString(36)\n        .substr(2, 5);\n\n      log.warn(`Extension ID not set. Using random string ID: ${extensionId}`);\n    }\n\n    if (this.registeredExtensionIds.includes(extensionId)) {\n      log.warn(\n        `Extension ID ${extensionId} has already been registered. Exiting before duplicating modules.`\n      );\n      return;\n    }\n\n    // preRegistrationHook\n    if (extension.preRegistration) {\n      extension.preRegistration({\n        servicesManager: this._servicesManager,\n        commandsManager: this._commandsManager,\n        appConfig: this._appConfig,\n        configuration,\n      });\n    }\n\n    // Register Modules\n    this.moduleTypeNames.forEach(moduleType => {\n      const extensionModule = this._getExtensionModule(\n        moduleType,\n        extension,\n        extensionId,\n        configuration\n      );\n\n      if (extensionModule) {\n        this._initSpecialModuleTypes(moduleType, extensionModule);\n\n        this.modules[moduleType].push({\n          extensionId,\n          module: extensionModule,\n        });\n      }\n    });\n\n    // Track extension registration\n    this.registeredExtensionIds.push(extensionId);\n  }\n\n  /**\n   * @private\n   * @param {string} moduleType\n   * @param {Object} extension\n   * @param {string} extensionId - Used for logging warnings\n   */\n  _getExtensionModule(moduleType, extension, extensionId, configuration) {\n    const getModuleFnName = 'get' + _capitalizeFirstCharacter(moduleType);\n    const getModuleFn = extension[getModuleFnName];\n\n    if (!getModuleFn) {\n      return;\n    }\n\n    try {\n      const extensionModule = getModuleFn({\n        servicesManager: this._servicesManager,\n        commandsManager: this._commandsManager,\n        appConfig: this._appConfig,\n        configuration,\n        api: this._api\n      });\n\n      if (!extensionModule) {\n        log.warn(\n          `Null or undefined returned when registering the ${getModuleFnName} module for the ${extensionId} extension`\n        );\n      }\n\n      return extensionModule;\n    } catch (ex) {\n      log.error(\n        `Exception thrown while trying to call ${getModuleFnName} for the ${extensionId} extension`\n      );\n    }\n  }\n\n  _initSpecialModuleTypes(moduleType, extensionModule) {\n    switch (moduleType) {\n      case 'commandsModule': {\n        const { definitions, defaultContext } = extensionModule;\n        if (!definitions || Object.keys(definitions).length === 0) {\n          log.warn('Commands Module contains no command definitions');\n          return;\n        }\n        this._initCommandsModule(definitions, defaultContext);\n        break;\n      }\n      default:\n      // code block\n    }\n  }\n\n  /**\n   *\n   * @private\n   * @param {Object[]} commandDefinitions\n   */\n  _initCommandsModule(commandDefinitions, defaultContext = 'VIEWER') {\n    if (!this._commandsManager.getContext(defaultContext)) {\n      this._commandsManager.createContext(defaultContext);\n    }\n\n    Object.keys(commandDefinitions).forEach(commandName => {\n      const commandDefinition = commandDefinitions[commandName];\n      const commandHasContextThatDoesNotExist =\n        commandDefinition.context &&\n        !this._commandsManager.getContext(commandDefinition.context);\n\n      if (commandHasContextThatDoesNotExist) {\n        this._commandsManager.createContext(commandDefinition.context);\n      }\n\n      this._commandsManager.registerCommand(\n        commandDefinition.context || defaultContext,\n        commandName,\n        commandDefinition\n      );\n    });\n  }\n}\n\n/**\n * @private\n * @param {string} lower\n */\nfunction _capitalizeFirstCharacter(lower) {\n  return lower.charAt(0).toUpperCase() + lower.substr(1);\n}\n","import ExtensionManager from './ExtensionManager';\nimport MODULE_TYPES from './MODULE_TYPES.js';\n\nexport default {\n  ExtensionManager,\n  MODULE_TYPES,\n};\n\nexport { ExtensionManager, MODULE_TYPES };\n","import log from './../log.js';\n\nexport default class ServicesManager {\n  constructor() {\n    this.services = {};\n    this.registeredServiceNames = [];\n  }\n\n  /**\n   * Registers a new service.\n   *\n   * @param {Object} service\n   * @param {Object} configuration\n   */\n  registerService(service, configuration = {}) {\n    if (!service) {\n      log.warn(\n        'Attempting to register a null/undefined service. Exiting early.'\n      );\n      return;\n    }\n\n    if (!service.name) {\n      log.warn(`Service name not set. Exiting early.`);\n      return;\n    }\n\n    if (this.registeredServiceNames.includes(service.name)) {\n      log.warn(\n        `Service name ${service.name} has already been registered. Exiting before duplicating services.`\n      );\n      return;\n    }\n\n    if (service.create) {\n      this.services[service.name] = service.create({\n        configuration,\n      });\n    } else {\n      log.warn(`Service create factory function not defined. Exiting early.`);\n      return;\n    }\n\n    /* Track service registration */\n    this.registeredServiceNames.push(service.name);\n  }\n\n  /**\n   * An array of services, or an array of arrays that contains service\n   * configuration pairs.\n   *\n   * @param {Object[]} services - Array of services\n   */\n  registerServices(services) {\n    services.forEach(service => {\n      const hasConfiguration = Array.isArray(service);\n\n      if (hasConfiguration) {\n        const [ohifService, configuration] = service;\n        this.registerService(ohifService, configuration);\n      } else {\n        this.registerService(service);\n      }\n    });\n  }\n}\n","/**\n * A UI Notification\n *\n * @typedef {Object} Notification\n * @property {string} title -\n * @property {string} message -\n * @property {number} [duration=5000] - in ms\n * @property {string} [position=\"bottomRight\"] -\"topLeft\" | \"topCenter | \"topRight\" | \"bottomLeft\" | \"bottomCenter\" | \"bottomRight\"\n * @property {string} [type=\"info\"] - \"info\" | \"error\" | \"warning\" | \"success\"\n * @property {boolean} [autoClose=true]\n */\n\nconst name = 'UINotificationService';\n\nconst serviceShowRequestQueue = [];\n\nconst publicAPI = {\n  name,\n  hide: _hide,\n  show: _show,\n  setServiceImplementation,\n};\n\nconst serviceImplementation = {\n  _hide: () => console.warn('hide() NOT IMPLEMENTED'),\n  _show: showArguments => {\n    serviceShowRequestQueue.push(showArguments);\n\n    console.warn('show() NOT IMPLEMENTED');\n  },\n};\n\n/**\n * Create and show a new UI notification; returns the\n * ID of the created notification.\n *\n * @param {Notification} notification { title, message, duration, position, type, autoClose}\n * @returns {number} id\n */\nfunction _show({\n  title,\n  message,\n  duration = 5000,\n  position = 'bottomRight',\n  type = 'info',\n  autoClose = true,\n}) {\n  return serviceImplementation._show({\n    title,\n    message,\n    duration,\n    position,\n    type,\n    autoClose,\n  });\n}\n\n/**\n * Hides/dismisses the notification, if currently shown\n *\n * @param {number} id - id of the notification to hide/dismiss\n * @returns undefined\n */\nfunction _hide(id) {\n  return serviceImplementation._hide({ id });\n}\n\n/**\n *\n *\n * @param {*} {\n *   hide: hideImplementation,\n *   show: showImplementation,\n * }\n */\nfunction setServiceImplementation({\n  hide: hideImplementation,\n  show: showImplementation,\n}) {\n  if (hideImplementation) {\n    serviceImplementation._hide = hideImplementation;\n  }\n  if (showImplementation) {\n    serviceImplementation._show = showImplementation;\n\n    while (serviceShowRequestQueue.length > 0) {\n      const showArguments = serviceShowRequestQueue.pop();\n      serviceImplementation._show(showArguments);\n    }\n  }\n}\n\nexport default {\n  name,\n  create: ({ configuration = {} }) => {\n    return publicAPI;\n  },\n};\n","/**\n * UI Modal\n *\n * @typedef {Object} ModalProps\n * @property {ReactElement|HTMLElement} [content=null] Modal content.\n * @property {Object} [contentProps=null] Modal content props.\n * @property {boolean} [shouldCloseOnEsc=false] Modal is dismissible via the esc key.\n * @property {boolean} [isOpen=true] Make the Modal visible or hidden.\n * @property {boolean} [closeButton=true] Should the modal body render the close button.\n * @property {string} [title=null] Should the modal render the title independently of the body content.\n * @property {string} [customClassName=null] The custom class to style the modal.\n */\n\nconst name = 'UIModalService';\n\nconst publicAPI = {\n  name,\n  hide: _hide,\n  show: _show,\n  setServiceImplementation,\n};\n\nconst serviceImplementation = {\n  _hide: () => console.warn('hide() NOT IMPLEMENTED'),\n  _show: () => console.warn('show() NOT IMPLEMENTED'),\n};\n\n/**\n * Show a new UI modal;\n *\n * @param {ModalProps} props { content, contentProps, shouldCloseOnEsc, isOpen, onClose, closeButton, title, customClassName }\n */\nfunction _show({\n  content = null,\n  contentProps = null,\n  shouldCloseOnEsc = false,\n  isOpen = true,\n  onClose = null,\n  closeButton = true,\n  title = null,\n  customClassName = null,\n}) {\n  return serviceImplementation._show({\n    content,\n    contentProps,\n    shouldCloseOnEsc,\n    isOpen,\n    onClose,\n    closeButton,\n    title,\n    customClassName,\n  });\n}\n\n/**\n * Hides/dismisses the modal, if currently shown\n *\n * @returns void\n */\nfunction _hide() {\n  return serviceImplementation._hide();\n}\n\n/**\n *\n *\n * @param {*} {\n *   hide: hideImplementation,\n *   show: showImplementation,\n * }\n */\nfunction setServiceImplementation({\n  hide: hideImplementation,\n  show: showImplementation,\n}) {\n  if (hideImplementation) {\n    serviceImplementation._hide = hideImplementation;\n  }\n  if (showImplementation) {\n    serviceImplementation._show = showImplementation;\n  }\n}\n\nexport default {\n  name,\n  create: ({ configuration = {} }) => {\n    return publicAPI;\n  },\n};\n","/**\n * A UI Element Position\n *\n * @typedef {Object} ElementPosition\n * @property {number} top -\n * @property {number} left -\n * @property {number} right -\n * @property {number} bottom -\n */\n\n/**\n * UI Dialog\n *\n * @typedef {Object} DialogProps\n * @property {string} id The dialog id.\n * @property {ReactElement|HTMLElement} content The dialog content.\n * @property {Object} contentProps The dialog content props.\n * @property {boolean} [isDraggable=true] Controls if dialog content is draggable or not.\n * @property {boolean} [showOverlay=false] Controls dialog overlay.\n * @property {boolean} [centralize=false] Center the dialog on the screen.\n * @property {boolean} [preservePosition=true] Use last position instead of default.\n * @property {ElementPosition} defaultPosition Specifies the `x` and `y` that the dragged item should start at.\n * @property {Function} onStart Called when dragging starts. If `false` is returned any handler, the action will cancel.\n * @property {Function} onStop Called when dragging stops.\n * @property {Function} onDrag Called while dragging.\n */\n\nconst name = 'UIDialogService';\n\nconst publicAPI = {\n  name,\n  dismiss: _dismiss,\n  dismissAll: _dismissAll,\n  create: _create,\n  setServiceImplementation,\n};\n\nconst serviceImplementation = {\n  _dismiss: () => console.warn('dismiss() NOT IMPLEMENTED'),\n  _dismissAll: () => console.warn('dismissAll() NOT IMPLEMENTED'),\n  _create: () => console.warn('create() NOT IMPLEMENTED'),\n};\n\n/**\n * Show a new UI dialog;\n *\n * @param {DialogProps} props { id, content, contentProps, onStart, onDrag, onStop, centralize, isDraggable, showOverlay, preservePosition, defaultPosition }\n */\nfunction _create({\n  id,\n  content,\n  contentProps,\n  onStart,\n  onDrag,\n  onStop,\n  centralize = false,\n  preservePosition = true,\n  isDraggable = true,\n  showOverlay = false,\n  defaultPosition,\n}) {\n  return serviceImplementation._create({\n    id,\n    content,\n    contentProps,\n    onStart,\n    onDrag,\n    onStop,\n    centralize,\n    preservePosition,\n    isDraggable,\n    showOverlay,\n    defaultPosition,\n  });\n}\n\n/**\n * Destroys all dialogs, if any\n *\n * @returns void\n */\nfunction _dismissAll() {\n  return serviceImplementation._dismissAll();\n}\n\n/**\n * Destroy the dialog, if currently created\n *\n * @returns void\n */\nfunction _dismiss({ id }) {\n  return serviceImplementation._dismiss({ id });\n}\n\n/**\n *\n *\n * @param {*} {\n *   dismiss: dismissImplementation,\n *   dismissAll: dismissAllImplementation,\n *   create: createImplementation,\n * }\n */\nfunction setServiceImplementation({\n  dismiss: dismissImplementation,\n  dismissAll: dismissAllImplementation,\n  create: createImplementation,\n}) {\n  if (dismissImplementation) {\n    serviceImplementation._dismiss = dismissImplementation;\n  }\n  if (dismissAllImplementation) {\n    serviceImplementation._dismissAll = dismissAllImplementation;\n  }\n  if (createImplementation) {\n    serviceImplementation._create = createImplementation;\n  }\n}\n\nexport default {\n  name,\n  create: ({ configuration = {} }) => {\n    return publicAPI;\n  },\n};\n","/**\n * Measurement source schema\n *\n * @typedef {Object} MeasurementSource\n * @property {number} id -\n * @property {string} name -\n * @property {string} version -\n */\n\n/**\n * Measurement schema\n *\n * @typedef {Object} Measurement\n * @property {number} id -\n * @property {string} sopInstanceUid -\n * @property {string} FrameOfReferenceUID -\n * @property {string} referenceSeriesUID -\n * @property {string} label -\n * @property {string} description -\n * @property {string} type -\n * @property {string} unit -\n * @property {number} area -\n * @property {Array} points -\n * @property {MeasurementSource} source -\n */\n\n/* Measurement schema keys for object validation. */\nconst MEASUREMENT_SCHEMA_KEYS = [\n  'id',\n  'SOPInstanceUID',\n  'FrameOfReferenceUID',\n  'referenceSeriesUID',\n  'label',\n  'description',\n  'type',\n  'unit',\n  'area', // TODO: Add concept names instead (descriptor)\n  'points',\n  'source',\n]\n\nconst EVENTS = {\n  MEASUREMENT_UPDATED: 'event::measurement_updated',\n  MEASUREMENT_ADDED: 'event::measurement_added',\n}\n\nconst VALUE_TYPES = {\n  POLYLINE: 'value_type::polyline',\n  POINT: 'value_type::point',\n  ELLIPSE: 'value_type::ellipse',\n  MULTIPOINT: 'value_type::multipoint',\n  CIRCLE: 'value_type::circle',\n}\n\nclass MeasurementService {\n  constructor() {\n    this.sources = {}\n    this.mappings = {}\n    this.measurements = {}\n    this.listeners = {}\n    Object.defineProperty(this, 'EVENTS', {\n      value: EVENTS,\n      writable: false,\n      enumerable: true,\n      configurable: false,\n    })\n    Object.defineProperty(this, 'VALUE_TYPES', {\n      value: VALUE_TYPES,\n      writable: false,\n      enumerable: true,\n      configurable: false,\n    })\n  }\n\n  /**\n   * Get all measurements.\n   *\n   * @return {Measurement[]} Array of measurements\n   */\n  getMeasurements() {\n    const measurements = this._arrayOfObjects(this.measurements)\n    return (\n      measurements &&\n      measurements.map(m => this.measurements[Object.keys(m)[0]])\n    )\n  }\n\n  /**\n   * Get specific measurement by its id.\n   *\n   * @param {string} id If of the measurement\n   * @return {Measurement} Measurement instance\n   */\n  getMeasurement(id) {\n    let measurement = null\n    const measurements = this.measurements[id]\n\n    if (measurements && Object.keys(measurements).length > 0) {\n      measurement = this.measurements[id]\n    }\n\n    return measurement\n  }\n\n  /**\n   * Create a new source.\n   *\n   * @param {string} name Name of the source\n   * @param {string} version Source name\n   * @return {MeasurementSource} Measurement source instance\n   */\n  createSource(name, version) {\n    if (!name) {\n      log.warn('Source name not provided. Exiting early.')\n      return\n    }\n\n    if (!version) {\n      log.warn('Source version not provided. Exiting early.')\n      return\n    }\n\n    const id = guid()\n    const source = {\n      id,\n      name,\n      version,\n    }\n    source.addOrUpdate = (definition, measurement) => {\n      return this.addOrUpdate(source, definition, measurement)\n    }\n    source.getAnnotation = (definition, measurementId) => {\n      return this.getAnnotation(source, definition, measurementId)\n    }\n\n    log.info(`New '${name}@${version}' source added.`)\n    this.sources[id] = source\n\n    return source\n  }\n\n  /**\n   * Add a new measurement matching criteria along with mapping functions.\n   *\n   * @param {MeasurementSource} source Measurement source instance\n   * @param {string} definition Definition of the measurement (Annotation Type)\n   * @param {MatchingCriteria} matchingCriteria The matching criteria\n   * @param {Function} toSourceSchema Mapping function to source schema\n   * @param {Function} toMeasurementSchema Mapping function to measurement schema\n   * @return void\n   */\n  addMapping(\n    source,\n    definition,\n    matchingCriteria,\n    toSourceSchema,\n    toMeasurementSchema\n  ) {\n    if (!this._isValidSource(source)) {\n      log.warn('Invalid source. Exiting early.')\n      return\n    }\n\n    if (!matchingCriteria) {\n      log.warn('Matching criteria not provided. Exiting early.')\n      return\n    }\n\n    if (!definition) {\n      log.warn('Definition not provided. Exiting early.')\n      return\n    }\n\n    if (!toSourceSchema) {\n      log.warn('Source mapping function not provided. Exiting early.')\n      return\n    }\n\n    if (!toMeasurementSchema) {\n      log.warn('Measurement mapping function not provided. Exiting early.')\n      return\n    }\n\n    const mapping = {\n      matchingCriteria,\n      definition,\n      toSourceSchema,\n      toMeasurementSchema,\n    }\n\n    if (Array.isArray(this.mappings[source.id])) {\n      this.mappings[source.id].push(mapping)\n    } else {\n      this.mappings[source.id] = [mapping]\n    }\n\n    log.info(\n      `New measurement mapping added to source '${this._getSourceInfo(\n        source\n      )}'.`\n    )\n  }\n\n  /**\n   * Get annotation for specific source.\n   *\n   * @param {MeasurementSource} source Measurement source instance\n   * @param {string} definition The source definition\n   * @param {string} measurementId The measurement service measurement id\n   * @return {Object} Source measurement schema\n   */\n  getAnnotation(source, definition, measurementId) {\n    if (!this._isValidSource(source)) {\n      log.warn('Invalid source. Exiting early.')\n      return\n    }\n\n    if (!definition) {\n      log.warn('No source definition provided. Exiting early.')\n      return\n    }\n\n    const mapping = this._getMappingByMeasurementSource(\n      measurementId,\n      definition\n    )\n    if (mapping) return mapping.toSourceSchema(measurement, definition)\n\n    const measurement = this.getMeasurement(measurementId)\n    const matchingMapping = this._getMatchingMapping(\n      source,\n      definition,\n      measurement\n    )\n\n    if (matchingMapping) {\n      log.info('Matching mapping found:', matchingMapping)\n      const { toSourceSchema, definition } = matchingMapping\n      return toSourceSchema(measurement, definition)\n    }\n  }\n\n  /**\n   * Adds or update persisted measurements.\n   *\n   * @param {MeasurementSource} source The measurement source instance\n   * @param {string} definition The source definition\n   * @param {Measurement} measurement The source measurement\n   * @return {string} A measurement id\n   */\n  addOrUpdate(source, definition, sourceMeasurement) {\n    if (!this._isValidSource(source)) {\n      log.warn('Invalid source. Exiting early.')\n      return\n    }\n\n    const sourceInfo = this._getSourceInfo(source)\n\n    if (!definition) {\n      console.log('TEST')\n      log.warn('No source definition provided. Exiting early.')\n      return\n    }\n\n    if (!this._sourceHasMappings(source)) {\n      log.warn(\n        `No measurement mappings found for '${sourceInfo}' source. Exiting early.`\n      )\n      return\n    }\n\n    let measurement = {}\n    try {\n      const sourceMappings = this.mappings[source.id]\n      const { toMeasurementSchema } = sourceMappings.find(\n        mapping => mapping.definition === definition\n      )\n\n      /* Convert measurement */\n      measurement = toMeasurementSchema(sourceMeasurement)\n\n      /* Assign measurement source instance */\n      measurement.source = source\n    } catch (error) {\n      log.warn(\n        `Failed to map '${sourceInfo}' measurement for definition ${definition}:`,\n        error.message\n      )\n      return\n    }\n\n    if (!this._isValidMeasurement(measurement)) {\n      log.warn(\n        `Attempting to add or update a invalid measurement provided by '${sourceInfo}'. Exiting early.`\n      )\n      return\n    }\n\n    let internalId = sourceMeasurement.id\n    if (!internalId) {\n      internalId = guid()\n      log.warn(`Measurement ID not found. Generating UID: ${internalId}`)\n    }\n\n    const newMeasurement = {\n      ...measurement,\n      modifiedTimestamp: Math.floor(Date.now() / 1000),\n      id: internalId,\n    }\n\n    if (this.measurements[internalId]) {\n      log.info(\n        `Measurement already defined. Updating measurement.`,\n        newMeasurement\n      )\n      this.measurements[internalId] = newMeasurement\n      this._broadcastChange(\n        this.EVENTS.MEASUREMENT_UPDATED,\n        source,\n        newMeasurement\n      )\n    } else {\n      log.info(`Measurement added.`, newMeasurement)\n      this.measurements[internalId] = newMeasurement\n      this._broadcastChange(\n        this.EVENTS.MEASUREMENT_ADDED,\n        source,\n        newMeasurement\n      )\n    }\n\n    return newMeasurement.id\n  }\n\n  /**\n   * Subscribe to measurement updates.\n   *\n   * @param {string} eventName The name of the event\n   * @param {Function} callback Events callback\n   * @return {Object} Observable object with actions\n   */\n  subscribe(eventName, callback) {\n    if (this._isValidEvent(eventName)) {\n      const listenerId = guid()\n      const subscription = { id: listenerId, callback }\n\n      console.info(`Subscribing to '${eventName}'.`)\n      if (Array.isArray(this.listeners[eventName])) {\n        this.listeners[eventName].push(subscription)\n      } else {\n        this.listeners[eventName] = [subscription]\n      }\n\n      return {\n        unsubscribe: () => this._unsubscribe(eventName, listenerId),\n      }\n    } else {\n      throw new Error(`Event ${eventName} not supported.`)\n    }\n  }\n\n  _getMappingByMeasurementSource(measurementId, definition) {\n    const measurement = this.getMeasurement(measurementId)\n    if (this._isValidSource(measurement.source)) {\n      return this.mappings[measurement.source.id].find(\n        m => m.definition === definition\n      )\n    }\n  }\n\n  /**\n   * Get measurement mapping function if matching criteria.\n   *\n   * @param {MeasurementSource} source Measurement source instance\n   * @param {string} definition The source definition\n   * @param {string} measurement The measurement serice measurement\n   * @return {Object} The mapping based on matched criteria\n   */\n  _getMatchingMapping(source, definition, measurement) {\n    const sourceMappings = this.mappings[source.id]\n\n    const sourceMappingsByDefinition = sourceMappings.filter(\n      mapping => mapping.definition === definition\n    )\n\n    /* Criteria Matching */\n    return sourceMappingsByDefinition.find(({ matchingCriteria }) => {\n      return (\n        measurement.points &&\n        measurement.points.length === matchingCriteria.points\n      )\n    })\n  }\n\n  /**\n   * Returns formatted string with source info.\n   *\n   * @param {MeasurementSource} source Measurement source\n   * @return {string} Source information\n   */\n  _getSourceInfo(source) {\n    return `${source.name}@${source.version}`\n  }\n\n  /**\n   * Checks if given source is valid.\n   *\n   * @param {MeasurementSource} source Measurement source\n   * @return {boolean} Measurement source validation\n   */\n  _isValidSource(source) {\n    return source && this.sources[source.id]\n  }\n\n  /**\n   * Checks if a given source has mappings.\n   *\n   * @param {MeasurementSource} source The measurement source\n   * @return {boolean} Validation if source has mappings\n   */\n  _sourceHasMappings(source) {\n    return (\n      Array.isArray(this.mappings[source.id]) && this.mappings[source.id].length\n    )\n  }\n\n  /**\n   * Broadcasts measurement changes.\n   *\n   * @param {string} measurementId The measurement id\n   * @param {MeasurementSource} source The measurement source\n   * @param {string} eventName The event name\n   * @return void\n   */\n  _broadcastChange(eventName, source, measurement) {\n    const hasListeners = Object.keys(this.listeners).length > 0\n    const hasCallbacks = Array.isArray(this.listeners[eventName])\n\n    if (hasListeners && hasCallbacks) {\n      this.listeners[eventName].forEach(listener => {\n        listener.callback({ source, measurement })\n      })\n    }\n  }\n\n  /**\n   * Unsubscribe to measurement updates.\n   *\n   * @param {string} eventName The name of the event\n   * @param {string} listenerId The listeners id\n   * @return void\n   */\n  _unsubscribe(eventName, listenerId) {\n    if (!this.listeners[eventName]) {\n      return\n    }\n\n    const listeners = this.listeners[eventName]\n    if (Array.isArray(listeners)) {\n      this.listeners[eventName] = listeners.filter(\n        ({ id }) => id !== listenerId\n      )\n    } else {\n      this.listeners[eventName] = undefined\n    }\n  }\n\n  /**\n   * Check if a given measurement data is valid.\n   *\n   * @param {Measurement} measurementData Measurement data\n   * @return {boolean} Measurement validation\n   */\n  _isValidMeasurement(measurementData) {\n    Object.keys(measurementData).forEach(key => {\n      if (!MEASUREMENT_SCHEMA_KEYS.includes(key)) {\n        log.warn(`Invalid measurement key: ${key}`)\n        return false\n      }\n    })\n\n    return true\n  }\n\n  /**\n   * Check if a given measurement service event is valid.\n   *\n   * @param {string} eventName The name of the event\n   * @return {boolean} Event name validation\n   */\n  _isValidEvent(eventName) {\n    return Object.values(this.EVENTS).includes(eventName)\n  }\n\n  /**\n   * Converts object of objects to array.\n   *\n   * @return {Array} Array of objects\n   */\n  _arrayOfObjects = obj => {\n    return Object.entries(obj).map(e => ({ [e[0]]: e[1] }))\n  }\n}\n\nconst log = {\n  error: console.error,\n  warn: console.warn,\n  info: console.log,\n  trace: console.trace,\n  debug: console.debug,\n  time: console.time,\n  timeEnd: console.timeEnd,\n}\n\n/**\n * Create a random GUID\n *\n * @return {string}\n */\nconst guid = () => {\n  const getFourRandomValues = () => {\n    return Math.floor((1 + Math.random()) * 0x10000)\n      .toString(16)\n      .substring(1)\n  }\n  return (\n    getFourRandomValues() +\n    getFourRandomValues() +\n    '-' +\n    getFourRandomValues() +\n    '-' +\n    getFourRandomValues() +\n    '-' +\n    getFourRandomValues() +\n    '-' +\n    getFourRandomValues() +\n    getFourRandomValues() +\n    getFourRandomValues()\n  )\n}\n\nexport default MeasurementService\nexport { EVENTS, VALUE_TYPES }\n","import MeasurementService from './MeasurementService';\n\nexport default {\n  name: 'MeasurementService',\n  create: ({ configuration = {} }) => {\n    return new MeasurementService();\n  },\n};\n","/**\n * Constants\n */\n\nconst STRING = 'string';\nconst NUMBER = 'number';\nconst FUNCTION = 'function';\nconst OBJECT = 'object';\n\n/**\n * Class Definition\n */\n\nexport class Metadata {\n  /**\n   * Constructor and Instance Methods\n   */\n\n  constructor(data, uid) {\n    // Define the main \"_data\" private property as an immutable property.\n    // IMPORTANT: This property can only be set during instance construction.\n    Object.defineProperty(this, '_data', {\n      configurable: false,\n      enumerable: false,\n      writable: false,\n      value: data,\n    });\n\n    // Define the main \"_uid\" private property as an immutable property.\n    // IMPORTANT: This property can only be set during instance construction.\n    Object.defineProperty(this, '_uid', {\n      configurable: false,\n      enumerable: false,\n      writable: false,\n      value: uid,\n    });\n\n    // Define \"_custom\" properties as an immutable property.\n    // IMPORTANT: This property can only be set during instance construction.\n    Object.defineProperty(this, '_custom', {\n      configurable: false,\n      enumerable: false,\n      writable: false,\n      value: Object.create(null),\n    });\n  }\n\n  getData() {\n    return this._data;\n  }\n\n  getDataProperty(propertyName) {\n    let propertyValue;\n    const _data = this._data;\n    if (\n      _data instanceof Object ||\n      (typeof _data === OBJECT && _data !== null)\n    ) {\n      propertyValue = _data[propertyName];\n    }\n    return propertyValue;\n  }\n\n  /**\n   * Get unique object ID\n   */\n  getObjectID() {\n    return this._uid;\n  }\n\n  /**\n   * Set custom attribute value\n   * @param {String} attribute Custom attribute name\n   * @param {Any} value     Custom attribute value\n   */\n  setCustomAttribute(attribute, value) {\n    this._custom[attribute] = value;\n  }\n\n  /**\n   * Get custom attribute value\n   * @param  {String} attribute Custom attribute name\n   * @return {Any}              Custom attribute value\n   */\n  getCustomAttribute(attribute) {\n    return this._custom[attribute];\n  }\n\n  /**\n   * Check if a custom attribute exists\n   * @param  {String} attribute Custom attribute name\n   * @return {Boolean}          True if custom attribute exists or false if not\n   */\n  customAttributeExists(attribute) {\n    return attribute in this._custom;\n  }\n\n  /**\n   * Set custom attributes in batch mode.\n   * @param {Object} attributeMap An object whose own properties will be used as custom attributes.\n   */\n  setCustomAttributes(attributeMap) {\n    const _hasOwn = Object.prototype.hasOwnProperty;\n    const _custom = this._custom;\n    for (let attribute in attributeMap) {\n      if (_hasOwn.call(attributeMap, attribute)) {\n        _custom[attribute] = attributeMap[attribute];\n      }\n    }\n  }\n\n  /**\n   * Static Methods\n   */\n\n  static isValidUID(uid) {\n    return typeof uid === STRING && uid.length > 0;\n  }\n\n  static isValidIndex(index) {\n    return typeof index === NUMBER && index >= 0 && (index | 0) === index;\n  }\n\n  static isValidCallback(callback) {\n    return typeof callback === FUNCTION;\n  }\n}\n","// @TODO: improve this object\n/**\n * Objects to be used to throw errors\n */\nclass OHIFError extends Error {\n  constructor(message) {\n    super();\n    this.message = message;\n    this.stack = new Error().stack;\n    this.name = this.constructor.name;\n  }\n}\n\nexport default OHIFError;\n","import { Metadata } from './Metadata';\nimport OHIFError from '../OHIFError.js';\n\n/**\n * ATTENTION! This class should never depend on StudyMetadata or SeriesMetadata classes as this could\n * possibly cause circular dependency issues.\n */\n\nconst UNDEFINED = 'undefined';\nconst STRING = 'string';\n\nexport class InstanceMetadata extends Metadata {\n  constructor(data, uid) {\n    super(data, uid);\n    // Initialize Private Properties\n    Object.defineProperties(this, {\n      _imageId: {\n        configurable: true, // configurable so that it can be redefined in sub-classes...\n        enumerable: false,\n        writable: true,\n        value: null,\n      },\n    });\n    // Initialize Public Properties\n    this._definePublicProperties();\n  }\n\n  /**\n   * Private Methods\n   */\n\n  /**\n   * Define Public Properties\n   * This method should only be called during initialization (inside the class constructor)\n   */\n  _definePublicProperties() {\n    /**\n     * Property: this.SOPInstanceUID\n     * Same as this.getSOPInstanceUID()\n     * It's specially useful in contexts where a method call is not suitable like in search criteria. For example:\n     * sopInstanceCollection.findBy({\n     *   SOPInstanceUID: '1.2.3.4.5.6.77777.8888888.99999999999.0'\n     * });\n     */\n    Object.defineProperty(this, 'SOPInstanceUID', {\n      configurable: false,\n      enumerable: false,\n      get: function() {\n        return this.getSOPInstanceUID();\n      },\n    });\n  }\n\n  /**\n   * Public Methods\n   */\n\n  /**\n   * Returns the StudyInstanceUID of the current instance. This method is basically a shorthand the full \"getTagValue\" method call.\n   */\n  getStudyInstanceUID() {\n    return this.getTagValue('StudyInstanceUID', null);\n  }\n\n  /**\n   * Returns the SeriesInstanceUID of the current instance. This method is basically a shorthand the full \"getTagValue\" method call.\n   */\n  getSeriesInstanceUID() {\n    return this.getTagValue('SeriesInstanceUID', null);\n  }\n\n  /**\n   * Returns the SOPInstanceUID of the current instance.\n   */\n  getSOPInstanceUID() {\n    return this.getTagValue('SOPInstanceUID', null);\n  }\n\n  // @TODO: Improve this... (E.g.: blob data)\n  getStringValue(tagOrProperty, index, defaultValue) {\n    let value = this.getTagValue(tagOrProperty, defaultValue);\n\n    if (typeof value !== STRING && typeof value !== UNDEFINED) {\n      value = value.toString();\n    }\n\n    return InstanceMetadata.getIndexedValue(value, index, defaultValue);\n  }\n\n  // @TODO: Improve this... (E.g.: blob data)\n  getFloatValue(tagOrProperty, index, defaultValue) {\n    let value = this.getTagValue(tagOrProperty, defaultValue);\n    value = InstanceMetadata.getIndexedValue(value, index, defaultValue);\n\n    if (value instanceof Array) {\n      value.forEach((val, idx) => {\n        value[idx] = parseFloat(val);\n      });\n\n      return value;\n    }\n\n    return typeof value === STRING ? parseFloat(value) : value;\n  }\n\n  // @TODO: Improve this... (E.g.: blob data)\n  getIntValue(tagOrProperty, index, defaultValue) {\n    let value = this.getTagValue(tagOrProperty, defaultValue);\n    value = InstanceMetadata.getIndexedValue(value, index, defaultValue);\n\n    if (value instanceof Array) {\n      value.forEach((val, idx) => {\n        value[idx] = parseFloat(val);\n      });\n\n      return value;\n    }\n\n    return typeof value === STRING ? parseInt(value) : value;\n  }\n\n  /**\n   * This function should be overriden by specialized classes in order to allow client libraries or viewers to take advantage of the Study Metadata API.\n   */\n  getTagValue(tagOrProperty, defaultValue) {\n    /**\n     * Please override this method on a specialized class.\n     */\n    throw new OHIFError(\n      'InstanceMetadata::getTagValue is not overriden. Please, override it in a specialized class. See OHIFInstanceMetadata for example'\n    );\n  }\n\n  /**\n   * Compares the current instance with another one.\n   * @param {InstanceMetadata} instance An instance of the InstanceMetadata class.\n   * @returns {boolean} Returns true if both instances refer to the same instance.\n   */\n  equals(instance) {\n    const self = this;\n    return (\n      instance === self ||\n      (instance instanceof InstanceMetadata &&\n        instance.getSOPInstanceUID() === self.getSOPInstanceUID())\n    );\n  }\n\n  /**\n   * Check if the tagOrProperty exists\n   * @param  {String} tagOrProperty tag or property be checked\n   * @return {Boolean}   True if the tag or property exists or false if doesn't\n   */\n  tagExists(tagOrProperty) {\n    /**\n     * Please override this method\n     */\n    throw new OHIFError(\n      'InstanceMetadata::tagExists is not overriden. Please, override it in a specialized class. See OHIFInstanceMetadata for example'\n    );\n  }\n\n  /**\n   * Get custom image id of a sop instance\n   * @return {Any}          sop instance image id\n   */\n  getImageId(frame) {\n    /**\n     * Please override this method\n     */\n    throw new OHIFError(\n      'InstanceMetadata::getImageId is not overriden. Please, override it in a specialized class. See OHIFInstanceMetadata for example'\n    );\n  }\n\n  /**\n   * Static Methods\n   */\n\n  /**\n   * Get an value based that can be index based. This function is called by all getters. See above functions.\n   *     - If value is a String and has indexes:\n   *         - If undefined index: returns an array of the split values.\n   *         - If defined index:\n   *             - If invalid: returns defaultValue\n   *             - If valid: returns the indexed value\n   *      - If value is not a String, returns default value.\n   */\n  static getIndexedValue(value, index, defaultValue) {\n    let result = defaultValue;\n\n    if (typeof value === STRING) {\n      const hasIndexValues = value.indexOf('\\\\') !== -1;\n\n      result = value;\n\n      if (hasIndexValues) {\n        const splitValues = value.split('\\\\');\n        if (Metadata.isValidIndex(index)) {\n          const indexedValue = splitValues[index];\n\n          result = typeof indexedValue !== STRING ? defaultValue : indexedValue;\n        } else {\n          result = splitValues;\n        }\n      }\n    }\n\n    return result;\n  }\n}\n","function getWADORSImageUrl(instance, frame) {\n  let wadorsuri = instance.wadorsuri;\n\n  if (!wadorsuri) {\n    return;\n  }\n\n  // Use null to obtain an imageId which represents the instance\n  if (frame === null) {\n    wadorsuri = wadorsuri.replace(/frames\\/(\\d+)/, '');\n  } else {\n    // We need to sum 1 because WADO-RS frame number is 1-based\n    frame = frame ? parseInt(frame) + 1 : 1;\n\n    // Replaces /frame/1 by /frame/{frame}\n    wadorsuri = wadorsuri.replace(/frames\\/(\\d+)/, `frames/${frame}`);\n  }\n\n  return wadorsuri;\n}\n\n/**\n * Obtain an imageId for Cornerstone based on the WADO-RS scheme\n *\n * @param {object} instanceMetada metadata object (InstanceMetadata)\n * @param {(string\\|number)} [frame] the frame number\n * @returns {string} The imageId to be used by Cornerstone\n */\nexport default function getWADORSImageId(instance, frame) {\n  const uri = getWADORSImageUrl(instance, frame);\n\n  if (!uri) {\n    return;\n  }\n\n  return `wadors:${uri}`;\n}\n","import getWADORSImageId from './getWADORSImageId';\n\n// https://stackoverflow.com/a/6021027/3895126\nfunction updateQueryStringParameter(uri, key, value) {\n  const regex = new RegExp('([?&])' + key + '=.*?(&|$)', 'i');\n  const separator = uri.indexOf('?') !== -1 ? '&' : '?';\n  if (uri.match(regex)) {\n    return uri.replace(regex, '$1' + key + '=' + value + '$2');\n  } else {\n    return uri + separator + key + '=' + value;\n  }\n}\n\n/**\n * Obtain an imageId for Cornerstone from an image instance\n *\n * @param instance\n * @param frame\n * @param thumbnail\n * @returns {string} The imageId to be used by Cornerstone\n */\nexport default function getImageId(instance, frame, thumbnail = false) {\n  if (!instance) {\n    return;\n  }\n\n  if (typeof instance.getImageId === 'function') {\n    return instance.getImageId();\n  }\n\n  if (instance.url) {\n    if (frame !== undefined) {\n      instance.url = updateQueryStringParameter(instance.url, 'frame', frame);\n    }\n\n    return instance.url;\n  }\n\n  const renderingAttr = thumbnail ? 'thumbnailRendering' : 'imageRendering';\n\n  if (\n    !instance[renderingAttr] ||\n    instance[renderingAttr] === 'wadouri' ||\n    !instance.wadorsuri\n  ) {\n    let imageId = 'dicomweb:' + instance.wadouri;\n    if (frame !== undefined) {\n      imageId += '&frame=' + frame;\n    }\n\n    return imageId;\n  } else {\n    return getWADORSImageId(instance, frame, thumbnail); // WADO-RS Retrieve Frame\n  }\n}\n","import { InstanceMetadata } from './InstanceMetadata';\nimport getImageId from '../../utils/getImageId.js';\n\nexport class OHIFInstanceMetadata extends InstanceMetadata {\n  /**\n   * @param {Object} Instance object.\n   */\n  constructor(data, series, study, uid) {\n    super(data, uid);\n    this.init(series, study);\n  }\n\n  init(series, study) {\n    const instance = this.getData();\n\n    // Initialize Private Properties\n    Object.defineProperties(this, {\n      _sopInstanceUID: {\n        configurable: false,\n        enumerable: false,\n        writable: false,\n        value: instance.SOPInstanceUID,\n      },\n      _study: {\n        configurable: false,\n        enumerable: false,\n        writable: false,\n        value: study,\n      },\n      _series: {\n        configurable: false,\n        enumerable: false,\n        writable: false,\n        value: series,\n      },\n      _instance: {\n        configurable: false,\n        enumerable: false,\n        writable: false,\n        value: instance,\n      },\n      _cache: {\n        configurable: false,\n        enumerable: false,\n        writable: false,\n        value: Object.create(null),\n      },\n    });\n  }\n\n  // Override\n  getTagValue(tagOrProperty, defaultValue, bypassCache) {\n    // check if this property has been cached...\n    if (tagOrProperty in this._cache && bypassCache !== true) {\n      return this._cache[tagOrProperty];\n    }\n\n    const instanceData = this._instance.metadata;\n\n    // Search property value in the whole study metadata chain...\n    let rawValue;\n    if (tagOrProperty in instanceData) {\n      rawValue = instanceData[tagOrProperty];\n    } else if (tagOrProperty in this._series) {\n      rawValue = this._series[tagOrProperty];\n    } else if (tagOrProperty in this._study) {\n      rawValue = this._study[tagOrProperty];\n    }\n\n    if (rawValue !== void 0) {\n      // if rawValue value is not undefined, cache result...\n      this._cache[tagOrProperty] = rawValue;\n      return rawValue;\n    }\n\n    return defaultValue;\n  }\n\n  // Override\n  tagExists(tagOrProperty) {\n    return (\n      tagOrProperty in this._instance.metadata ||\n      tagOrProperty in this._series ||\n      tagOrProperty in this._study\n    );\n  }\n\n  // Override\n  getImageId(frame, thumbnail) {\n    // If _imageID is not cached, create it\n    if (this._imageId === null) {\n      this._imageId = getImageId(this.getData(), frame, thumbnail);\n    }\n\n    return this._imageId;\n  }\n}\n","import { Metadata } from './Metadata';\nimport { InstanceMetadata } from './InstanceMetadata';\n\nexport class SeriesMetadata extends Metadata {\n  constructor(data, uid) {\n    super(data, uid);\n    // Initialize Private Properties\n    Object.defineProperties(this, {\n      _seriesInstanceUID: {\n        configurable: true, // configurable so that it can be redefined in sub-classes...\n        enumerable: false,\n        writable: true,\n        value: null,\n      },\n      _instances: {\n        configurable: false,\n        enumerable: false,\n        writable: false,\n        value: [],\n      },\n      _firstInstance: {\n        configurable: false,\n        enumerable: false,\n        writable: true,\n        value: null,\n      },\n    });\n    // Initialize Public Properties\n    this._definePublicProperties();\n  }\n\n  /**\n   * Private Methods\n   */\n\n  /**\n   * Define Public Properties\n   * This method should only be called during initialization (inside the class constructor)\n   */\n  _definePublicProperties() {\n    /**\n     * Property: this.seriesInstanceUID\n     * Same as this.getSeriesInstanceUID()\n     * It's specially useful in contexts where a method call is not suitable like in search criteria. For example:\n     * seriesCollection.findBy({\n     *   seriesInstanceUID: '1.2.3.4.5.6.77777.8888888.99999999999.0'\n     * });\n     */\n    Object.defineProperty(this, 'seriesInstanceUID', {\n      configurable: false,\n      enumerable: false,\n      get: function() {\n        return this.getSeriesInstanceUID();\n      },\n    });\n  }\n\n  /**\n   * Public Methods\n   */\n\n  /**\n   * Returns the SeriesInstanceUID of the current series.\n   */\n  getSeriesInstanceUID() {\n    return this._seriesInstanceUID;\n  }\n\n  /**\n   * Append an instance to the current series.\n   * @param {InstanceMetadata} instance The instance to be added to the current series.\n   * @returns {boolean} Returns true on success, false otherwise.\n   */\n  addInstance(instance) {\n    let result = false;\n    if (\n      instance instanceof InstanceMetadata &&\n      this.getInstanceByUID(instance.getSOPInstanceUID()) === void 0\n    ) {\n      this._instances.push(instance);\n      result = true;\n    }\n    return result;\n  }\n\n  /**\n   * Get the first instance of the current series retaining a consistent result across multiple calls.\n   * @return {InstanceMetadata} An instance of the InstanceMetadata class or null if it does not exist.\n   */\n  getFirstInstance() {\n    let instance = this._firstInstance;\n    if (!(instance instanceof InstanceMetadata)) {\n      instance = null;\n      const found = this.getInstanceByIndex(0);\n      if (found instanceof InstanceMetadata) {\n        this._firstInstance = found;\n        instance = found;\n      }\n    }\n    return instance;\n  }\n\n  /**\n   * Find an instance by index.\n   * @param {number} index An integer representing a list index.\n   * @returns {InstanceMetadata} Returns a InstanceMetadata instance when found or undefined otherwise.\n   */\n  getInstanceByIndex(index) {\n    let found; // undefined by default...\n    if (Metadata.isValidIndex(index)) {\n      found = this._instances[index];\n    }\n    return found;\n  }\n\n  /**\n   * Find an instance by SOPInstanceUID.\n   * @param {string} uid An UID string.\n   * @returns {InstanceMetadata} Returns a InstanceMetadata instance when found or undefined otherwise.\n   */\n  getInstanceByUID(uid) {\n    let found; // undefined by default...\n    if (Metadata.isValidUID(uid)) {\n      found = this._instances.find(instance => {\n        return instance.getSOPInstanceUID() === uid;\n      });\n    }\n    return found;\n  }\n\n  /**\n   * Retrieve the number of instances within the current series.\n   * @returns {number} The number of instances in the current series.\n   */\n  getInstanceCount() {\n    return this._instances.length;\n  }\n\n  /**\n   * Invokes the supplied callback for each instance in the current series passing\n   * two arguments: instance (an InstanceMetadata instance) and index (the integer\n   * index of the instance within the current series)\n   * @param {function} callback The callback function which will be invoked for each instance in the series.\n   * @returns {undefined} Nothing is returned.\n   */\n  forEachInstance(callback) {\n    if (Metadata.isValidCallback(callback)) {\n      this._instances.forEach((instance, index) => {\n        callback.call(null, instance, index);\n      });\n    }\n  }\n\n  /**\n   * Find the index of an instance inside the series.\n   * @param {InstanceMetadata} instance An instance of the SeriesMetadata class.\n   * @returns {number} The index of the instance inside the series or -1 if not found.\n   */\n  indexOfInstance(instance) {\n    return this._instances.indexOf(instance);\n  }\n\n  /**\n   * Search the associated instances using the supplied callback as criteria. The callback is passed\n   * two arguments: instance (a InstanceMetadata instance) and index (the integer\n   * index of the instance within its series)\n   * @param {function} callback The callback function which will be invoked for each instance.\n   * @returns {InstanceMetadata|undefined} If an instance is found based on callback criteria it\n   *                                     returns a InstanceMetadata. \"undefined\" is returned otherwise\n   */\n  findInstance(callback) {\n    if (Metadata.isValidCallback(callback)) {\n      return this._instances.find((instance, index) => {\n        return callback.call(null, instance, index);\n      });\n    }\n  }\n\n  /**\n   * Compares the current series with another one.\n   * @param {SeriesMetadata} series An instance of the SeriesMetadata class.\n   * @returns {boolean} Returns true if both instances refer to the same series.\n   */\n  equals(series) {\n    const self = this;\n    return (\n      series === self ||\n      (series instanceof SeriesMetadata &&\n        series.getSeriesInstanceUID() === self.getSeriesInstanceUID())\n    );\n  }\n}\n","import { SeriesMetadata } from './SeriesMetadata';\nimport { OHIFInstanceMetadata } from './OHIFInstanceMetadata';\n\nexport class OHIFSeriesMetadata extends SeriesMetadata {\n  /**\n   * @param {Object} Series object.\n   */\n  constructor(data, study, uid) {\n    super(data, uid);\n    this.init(study);\n  }\n\n  init(study) {\n    const series = this.getData();\n\n    // define \"_seriesInstanceUID\" protected property...\n    Object.defineProperty(this, '_seriesInstanceUID', {\n      configurable: false,\n      enumerable: false,\n      writable: false,\n      value: series.SeriesInstanceUID,\n    });\n\n    // populate internal list of instances...\n    series.instances.forEach(instance => {\n      this.addInstance(new OHIFInstanceMetadata(instance, series, study));\n    });\n  }\n}\n","// These should be overridden by the implementation\nlet user = {\n  userLoggedIn: () => false,\n  getUserId: () => null,\n  getName: () => null,\n  getAccessToken: () => null,\n  login: () => new Promise((resolve, reject) => reject()),\n  logout: () => new Promise((resolve, reject) => reject()),\n  getData: key => null,\n  setData: (key, value) => null,\n};\n\nexport default user;\n","import getAttribute from './getAttribute.js';\nimport getAuthorizationHeader from './getAuthorizationHeader.js';\nimport getModalities from './getModalities.js';\nimport getName from './getName.js';\nimport getNumber from './getNumber.js';\nimport getString from './getString.js';\n\nconst DICOMWeb = {\n  getAttribute,\n  getAuthorizationHeader,\n  getModalities,\n  getName,\n  getNumber,\n  getString,\n};\n\nexport default DICOMWeb;\n","/**\n * Returns the specified element as a dicom attribute group/element.\n *\n * @param element - The group/element of the element (e.g. '00280009')\n * @param [defaultValue] - The value to return if the element is not present\n * @returns {*}\n */\nexport default function getAttribute(element, defaultValue) {\n  if (!element) {\n    return defaultValue;\n  }\n  // Value is not present if the attribute has a zero length value\n  if (!element.Value) {\n    return defaultValue;\n  }\n  // Sanity check to make sure we have at least one entry in the array.\n  if (!element.Value.length) {\n    return defaultValue;\n  }\n\n  return convertToInt(element.Value);\n}\n\nfunction convertToInt(input) {\n  function padFour(input) {\n    const l = input.length;\n\n    if (l == 0) return '0000';\n    if (l == 1) return '000' + input;\n    if (l == 2) return '00' + input;\n    if (l == 3) return '0' + input;\n\n    return input;\n  }\n\n  let output = '';\n  for (let i = 0; i < input.length; i++) {\n    for (let j = 0; j < input[i].length; j++) {\n      output += padFour(input[i].charCodeAt(j).toString(16));\n    }\n  }\n\n  return parseInt(output, 16);\n}\n","import user from '../user';\n\n/**\n * Returns the Authorization header as part of an Object.\n *\n * @export\n * @param {Object} [server={}]\n * @param {Object} [server.requestOptions]\n * @param {string|function} [server.requestOptions.auth]\n * @returns {Object} { Authorization }\n */\nexport default function getAuthorizationHeader({ requestOptions } = {}) {\n  const headers = {};\n\n  // Check for OHIF.user since this can also be run on the server\n  const accessToken = user && user.getAccessToken && user.getAccessToken();\n\n  // Auth for a specific server\n  if (requestOptions && requestOptions.auth) {\n    if (typeof requestOptions.auth === 'function') {\n      // Custom Auth Header\n      headers.Authorization = requestOptions.auth(requestOptions);\n    } else {\n      // HTTP Basic Auth (user:password)\n      headers.Authorization = `Basic ${btoa(requestOptions.auth)}`;\n    }\n  }\n  // Auth for the user's default\n  else if (accessToken) {\n    headers.Authorization = `Bearer ${accessToken}`;\n  }\n\n  return headers;\n}\n","export default function getModalities(Modality, ModalitiesInStudy) {\n  if (!Modality && !ModalitiesInStudy) {\n    return {};\n  }\n\n  const modalities = Modality || {\n    vr: 'CS',\n    Value: [],\n  };\n\n  if (ModalitiesInStudy) {\n    if (modalities.vr && modalities.vr === ModalitiesInStudy.vr) {\n      for (let i = 0; i < ModalitiesInStudy.Value.length; i++) {\n        const value = ModalitiesInStudy.Value[i];\n        if (modalities.Value.indexOf(value) === -1) {\n          modalities.Value.push(value);\n        }\n      }\n    } else {\n      return ModalitiesInStudy;\n    }\n  }\n\n  return modalities;\n}\n","/**\n * Returns the Alphabetic version of a PN\n *\n * @param element - The group/element of the element (e.g. '00200013')\n * @param [defaultValue] - The default value to return if the element is not found\n * @returns {*}\n */\nexport default function getName(element, defaultValue) {\n  if (!element) {\n    return defaultValue;\n  }\n  // Value is not present if the attribute has a zero length value\n  if (!element.Value) {\n    return defaultValue;\n  }\n  // Sanity check to make sure we have at least one entry in the array.\n  if (!element.Value.length) {\n    return defaultValue;\n  }\n  // Return the Alphabetic component group\n  if (element.Value[0].Alphabetic) {\n    return element.Value[0].Alphabetic;\n  }\n  // Orthanc does not return PN properly so this is a temporary workaround\n  return element.Value[0];\n}\n","/**\n * Returns the first string value as a Javascript Number\n * @param element - The group/element of the element (e.g. '00200013')\n * @param [defaultValue] - The default value to return if the element does not exist\n * @returns {*}\n */\nexport default function getNumber(element, defaultValue) {\n  if (!element) {\n    return defaultValue;\n  }\n  // Value is not present if the attribute has a zero length value\n  if (!element.Value) {\n    return defaultValue;\n  }\n  // Sanity check to make sure we have at least one entry in the array.\n  if (!element.Value.length) {\n    return defaultValue;\n  }\n\n  return parseFloat(element.Value[0]);\n}\n","/**\n * Returns the specified element as a string.  Multi-valued elements will be separated by a backslash\n *\n * @param element - The group/element of the element (e.g. '00200013')\n * @param [defaultValue] - The value to return if the element is not present\n * @returns {*}\n */\nexport default function getString(element, defaultValue) {\n  if (!element) {\n    return defaultValue;\n  }\n  // Value is not present if the attribute has a zero length value\n  if (!element.Value) {\n    return defaultValue;\n  }\n  // Sanity check to make sure we have at least one entry in the array.\n  if (!element.Value.length) {\n    return defaultValue;\n  }\n  // Join the array together separated by backslash\n  // NOTE: Orthanc does not correctly split values into an array so the join is a no-op\n  return element.Value.join('\\\\');\n}\n","/**\n * Create a random GUID\n *\n * @return {string}\n */\nconst guid = () => {\n  const getFourRandomValues = () => {\n    return Math.floor((1 + Math.random()) * 0x10000)\n      .toString(16)\n      .substring(1);\n  };\n  return (\n    getFourRandomValues() +\n    getFourRandomValues() +\n    '-' +\n    getFourRandomValues() +\n    '-' +\n    getFourRandomValues() +\n    '-' +\n    getFourRandomValues() +\n    '-' +\n    getFourRandomValues() +\n    getFourRandomValues() +\n    getFourRandomValues()\n  );\n};\n\nexport default guid;\n","import guid from '../utils/guid.js';\nimport OHIFError from './OHIFError';\nimport { Vector3 } from 'cornerstone-math';\n\nconst OBJECT = 'object';\n\n/**\n * This class defines an ImageSet object which will be used across the viewer. This object represents\n * a list of images that are associated by any arbitrary criteria being thus content agnostic. Besides the\n * main attributes (images and uid) it allows additional attributes to be appended to it (currently\n * indiscriminately, but this should be changed).\n */\nclass ImageSet {\n  constructor(images) {\n    if (Array.isArray(images) !== true) {\n      throw new OHIFError('ImageSet expects an array of images');\n    }\n\n    // @property \"images\"\n    Object.defineProperty(this, 'images', {\n      enumerable: false,\n      configurable: false,\n      writable: false,\n      value: images,\n    });\n\n    // @property \"uid\"\n    Object.defineProperty(this, 'uid', {\n      enumerable: false,\n      configurable: false,\n      writable: false,\n      value: guid(), // Unique ID of the instance\n    });\n  }\n\n  getUID() {\n    return this.uid;\n  }\n\n  setAttribute(attribute, value) {\n    this[attribute] = value;\n  }\n\n  getAttribute(attribute) {\n    return this[attribute];\n  }\n\n  setAttributes(attributes) {\n    if (typeof attributes === OBJECT && attributes !== null) {\n      const imageSet = this,\n        hasOwn = Object.prototype.hasOwnProperty;\n      for (let attribute in attributes) {\n        if (hasOwn.call(attributes, attribute)) {\n          imageSet[attribute] = attributes[attribute];\n        }\n      }\n    }\n  }\n\n  getImage(index) {\n    return this.images[index];\n  }\n\n  sortBy(sortingCallback) {\n    return this.images.sort(sortingCallback);\n  }\n\n  sortByImagePositionPatient() {\n    const images = this.images;\n    const referenceImagePositionPatient = _getImagePositionPatient(images[0]);\n\n    const refIppVec = new Vector3(\n      referenceImagePositionPatient[0],\n      referenceImagePositionPatient[1],\n      referenceImagePositionPatient[2]\n    );\n\n    const ImageOrientationPatient = _getImageOrientationPatient(images[0]);\n\n    const scanAxisNormal = new Vector3(\n      ImageOrientationPatient[0],\n      ImageOrientationPatient[1],\n      ImageOrientationPatient[2]\n    ).cross(\n      new Vector3(\n        ImageOrientationPatient[3],\n        ImageOrientationPatient[4],\n        ImageOrientationPatient[5]\n      )\n    );\n\n    const distanceImagePairs = images.map(function(image) {\n      const ippVec = new Vector3(..._getImagePositionPatient(image));\n      const positionVector = refIppVec.clone().sub(ippVec);\n      const distance = positionVector.dot(scanAxisNormal);\n\n      return {\n        distance,\n        image,\n      };\n    });\n\n    distanceImagePairs.sort(function(a, b) {\n      return b.distance - a.distance;\n    });\n\n    const sortedImages = distanceImagePairs.map(a => a.image);\n\n    images.sort(function(a, b) {\n      return sortedImages.indexOf(a) - sortedImages.indexOf(b);\n    });\n  }\n}\n\nfunction _getImagePositionPatient(image) {\n  return image.getData().metadata.ImagePositionPatient;\n}\n\nfunction _getImageOrientationPatient(image) {\n  return image.getData().metadata.ImageOrientationPatient;\n}\n\nexport default ImageSet;\n","import { sopClassDictionary } from './sopClassDictionary';\n\nconst imagesTypes = [\n  sopClassDictionary.ComputedRadiographyImageStorage,\n  sopClassDictionary.DigitalXRayImageStorageForPresentation,\n  sopClassDictionary.DigitalXRayImageStorageForProcessing,\n  sopClassDictionary.DigitalMammographyXRayImageStorageForPresentation,\n  sopClassDictionary.DigitalMammographyXRayImageStorageForProcessing,\n  sopClassDictionary.DigitalIntraOralXRayImageStorageForPresentation,\n  sopClassDictionary.DigitalIntraOralXRayImageStorageForProcessing,\n  sopClassDictionary.CTImageStorage,\n  sopClassDictionary.EnhancedCTImageStorage,\n  sopClassDictionary.LegacyConvertedEnhancedCTImageStorage,\n  sopClassDictionary.UltrasoundMultiframeImageStorage,\n  sopClassDictionary.MRImageStorage,\n  sopClassDictionary.EnhancedMRImageStorage,\n  sopClassDictionary.EnhancedMRColorImageStorage,\n  sopClassDictionary.LegacyConvertedEnhancedMRImageStorage,\n  sopClassDictionary.UltrasoundImageStorage,\n  sopClassDictionary.SecondaryCaptureImageStorage,\n  sopClassDictionary.MultiframeSingleBitSecondaryCaptureImageStorage,\n  sopClassDictionary.MultiframeGrayscaleByteSecondaryCaptureImageStorage,\n  sopClassDictionary.MultiframeGrayscaleWordSecondaryCaptureImageStorage,\n  sopClassDictionary.MultiframeTrueColorSecondaryCaptureImageStorage,\n  sopClassDictionary.XRayAngiographicImageStorage,\n  sopClassDictionary.EnhancedXAImageStorage,\n  sopClassDictionary.XRayRadiofluoroscopicImageStorage,\n  sopClassDictionary.EnhancedXRFImageStorage,\n  sopClassDictionary.XRay3DAngiographicImageStorage,\n  sopClassDictionary.XRay3DCraniofacialImageStorage,\n  sopClassDictionary.BreastTomosynthesisImageStorage,\n  sopClassDictionary.BreastProjectionXRayImageStorageForPresentation,\n  sopClassDictionary.BreastProjectionXRayImageStorageForProcessing,\n  sopClassDictionary.IntravascularOpticalCoherenceTomographyImageStorageForPresentation,\n  sopClassDictionary.IntravascularOpticalCoherenceTomographyImageStorageForProcessing,\n  sopClassDictionary.NuclearMedicineImageStorage,\n  sopClassDictionary.VLEndoscopicImageStorage,\n  sopClassDictionary.VideoEndoscopicImageStorage,\n  sopClassDictionary.VLMicroscopicImageStorage,\n  sopClassDictionary.VideoMicroscopicImageStorage,\n  sopClassDictionary.VLSlideCoordinatesMicroscopicImageStorage,\n  sopClassDictionary.VLPhotographicImageStorage,\n  sopClassDictionary.VideoPhotographicImageStorage,\n  sopClassDictionary.OphthalmicPhotography8BitImageStorage,\n  sopClassDictionary.OphthalmicPhotography16BitImageStorage,\n  sopClassDictionary.OphthalmicTomographyImageStorage,\n  sopClassDictionary.VLWholeSlideMicroscopyImageStorage,\n  sopClassDictionary.PositronEmissionTomographyImageStorage,\n  sopClassDictionary.EnhancedPETImageStorage,\n  sopClassDictionary.LegacyConvertedEnhancedPETImageStorage,\n  sopClassDictionary.RTImageStorage,\n];\n\n/**\n * Checks whether dicom files with specified SOP Class UID have image data\n * @param {string} SOPClassUID - SOP Class UID to be checked\n * @returns {boolean} - true if it has image data\n */\nexport const isImage = SOPClassUID => {\n  if (!SOPClassUID) return false;\n  return imagesTypes.indexOf(SOPClassUID) !== -1;\n};\n","// TODO: Deprecate since we have the same thing in dcmjs?\nexport const sopClassDictionary = {\n  ComputedRadiographyImageStorage: '1.2.840.10008.5.1.4.1.1.1',\n  DigitalXRayImageStorageForPresentation: '1.2.840.10008.5.1.4.1.1.1.1',\n  DigitalXRayImageStorageForProcessing: '1.2.840.10008.5.1.4.1.1.1.1.1',\n  DigitalMammographyXRayImageStorageForPresentation:\n    '1.2.840.10008.5.1.4.1.1.1.2',\n  DigitalMammographyXRayImageStorageForProcessing:\n    '1.2.840.10008.5.1.4.1.1.1.2.1',\n  DigitalIntraOralXRayImageStorageForPresentation:\n    '1.2.840.10008.5.1.4.1.1.1.3',\n  DigitalIntraOralXRayImageStorageForProcessing:\n    '1.2.840.10008.5.1.4.1.1.1.3.1',\n  CTImageStorage: '1.2.840.10008.5.1.4.1.1.2',\n  EnhancedCTImageStorage: '1.2.840.10008.5.1.4.1.1.2.1',\n  LegacyConvertedEnhancedCTImageStorage: '1.2.840.10008.5.1.4.1.1.2.2',\n  UltrasoundMultiframeImageStorage: '1.2.840.10008.5.1.4.1.1.3.1',\n  MRImageStorage: '1.2.840.10008.5.1.4.1.1.4',\n  EnhancedMRImageStorage: '1.2.840.10008.5.1.4.1.1.4.1',\n  MRSpectroscopyStorage: '1.2.840.10008.5.1.4.1.1.4.2',\n  EnhancedMRColorImageStorage: '1.2.840.10008.5.1.4.1.1.4.3',\n  LegacyConvertedEnhancedMRImageStorage: '1.2.840.10008.5.1.4.1.1.4.4',\n  UltrasoundImageStorage: '1.2.840.10008.5.1.4.1.1.6.1',\n  EnhancedUSVolumeStorage: '1.2.840.10008.5.1.4.1.1.6.2',\n  SecondaryCaptureImageStorage: '1.2.840.10008.5.1.4.1.1.7',\n  MultiframeSingleBitSecondaryCaptureImageStorage:\n    '1.2.840.10008.5.1.4.1.1.7.1',\n  MultiframeGrayscaleByteSecondaryCaptureImageStorage:\n    '1.2.840.10008.5.1.4.1.1.7.2',\n  MultiframeGrayscaleWordSecondaryCaptureImageStorage:\n    '1.2.840.10008.5.1.4.1.1.7.3',\n  MultiframeTrueColorSecondaryCaptureImageStorage:\n    '1.2.840.10008.5.1.4.1.1.7.4',\n  Sop12LeadECGWaveformStorage: '1.2.840.10008.5.1.4.1.1.9.1.1',\n  GeneralECGWaveformStorage: '1.2.840.10008.5.1.4.1.1.9.1.2',\n  AmbulatoryECGWaveformStorage: '1.2.840.10008.5.1.4.1.1.9.1.3',\n  HemodynamicWaveformStorage: '1.2.840.10008.5.1.4.1.1.9.2.1',\n  CardiacElectrophysiologyWaveformStorage: '1.2.840.10008.5.1.4.1.1.9.3.1',\n  BasicVoiceAudioWaveformStorage: '1.2.840.10008.5.1.4.1.1.9.4.1',\n  GeneralAudioWaveformStorage: '1.2.840.10008.5.1.4.1.1.9.4.2',\n  ArterialPulseWaveformStorage: '1.2.840.10008.5.1.4.1.1.9.5.1',\n  RespiratoryWaveformStorage: '1.2.840.10008.5.1.4.1.1.9.6.1',\n  GrayscaleSoftcopyPresentationStateStorage: '1.2.840.10008.5.1.4.1.1.11.1',\n  ColorSoftcopyPresentationStateStorage: '1.2.840.10008.5.1.4.1.1.11.2',\n  PseudoColorSoftcopyPresentationStateStorage: '1.2.840.10008.5.1.4.1.1.11.3',\n  BlendingSoftcopyPresentationStateStorage: '1.2.840.10008.5.1.4.1.1.11.4',\n  XAXRFGrayscaleSoftcopyPresentationStateStorage:\n    '1.2.840.10008.5.1.4.1.1.11.5',\n  XRayAngiographicImageStorage: '1.2.840.10008.5.1.4.1.1.12.1',\n  EnhancedXAImageStorage: '1.2.840.10008.5.1.4.1.1.12.1.1',\n  XRayRadiofluoroscopicImageStorage: '1.2.840.10008.5.1.4.1.1.12.2',\n  EnhancedXRFImageStorage: '1.2.840.10008.5.1.4.1.1.12.2.1',\n  XRay3DAngiographicImageStorage: '1.2.840.10008.5.1.4.1.1.13.1.1',\n  XRay3DCraniofacialImageStorage: '1.2.840.10008.5.1.4.1.1.13.1.2',\n  BreastTomosynthesisImageStorage: '1.2.840.10008.5.1.4.1.1.13.1.3',\n  BreastProjectionXRayImageStorageForPresentation:\n    '1.2.840.10008.5.1.4.1.1.13.1.4',\n  BreastProjectionXRayImageStorageForProcessing:\n    '1.2.840.10008.5.1.4.1.1.13.1.5',\n  IntravascularOpticalCoherenceTomographyImageStorageForPresentation:\n    '1.2.840.10008.5.1.4.1.1.14.1',\n  IntravascularOpticalCoherenceTomographyImageStorageForProcessing:\n    '1.2.840.10008.5.1.4.1.1.14.2',\n  NuclearMedicineImageStorage: '1.2.840.10008.5.1.4.1.1.20',\n  RawDataStorage: '1.2.840.10008.5.1.4.1.1.66',\n  SpatialRegistrationStorage: '1.2.840.10008.5.1.4.1.1.66.1',\n  SpatialFiducialsStorage: '1.2.840.10008.5.1.4.1.1.66.2',\n  DeformableSpatialRegistrationStorage: '1.2.840.10008.5.1.4.1.1.66.3',\n  SegmentationStorage: '1.2.840.10008.5.1.4.1.1.66.4',\n  SurfaceSegmentationStorage: '1.2.840.10008.5.1.4.1.1.66.5',\n  RealWorldValueMappingStorage: '1.2.840.10008.5.1.4.1.1.67',\n  SurfaceScanMeshStorage: '1.2.840.10008.5.1.4.1.1.68.1',\n  SurfaceScanPointCloudStorage: '1.2.840.10008.5.1.4.1.1.68.2',\n  VLEndoscopicImageStorage: '1.2.840.10008.5.1.4.1.1.77.1.1',\n  VideoEndoscopicImageStorage: '1.2.840.10008.5.1.4.1.1.77.1.1.1',\n  VLMicroscopicImageStorage: '1.2.840.10008.5.1.4.1.1.77.1.2',\n  VideoMicroscopicImageStorage: '1.2.840.10008.5.1.4.1.1.77.1.2.1',\n  VLSlideCoordinatesMicroscopicImageStorage: '1.2.840.10008.5.1.4.1.1.77.1.3',\n  VLPhotographicImageStorage: '1.2.840.10008.5.1.4.1.1.77.1.4',\n  VideoPhotographicImageStorage: '1.2.840.10008.5.1.4.1.1.77.1.4.1',\n  OphthalmicPhotography8BitImageStorage: '1.2.840.10008.5.1.4.1.1.77.1.5.1',\n  OphthalmicPhotography16BitImageStorage: '1.2.840.10008.5.1.4.1.1.77.1.5.2',\n  StereometricRelationshipStorage: '1.2.840.10008.5.1.4.1.1.77.1.5.3',\n  OphthalmicTomographyImageStorage: '1.2.840.10008.5.1.4.1.1.77.1.5.4',\n  VLWholeSlideMicroscopyImageStorage: '1.2.840.10008.5.1.4.1.1.77.1.6',\n  LensometryMeasurementsStorage: '1.2.840.10008.5.1.4.1.1.78.1',\n  AutorefractionMeasurementsStorage: '1.2.840.10008.5.1.4.1.1.78.2',\n  KeratometryMeasurementsStorage: '1.2.840.10008.5.1.4.1.1.78.3',\n  SubjectiveRefractionMeasurementsStorage: '1.2.840.10008.5.1.4.1.1.78.4',\n  VisualAcuityMeasurementsStorage: '1.2.840.10008.5.1.4.1.1.78.5',\n  SpectaclePrescriptionReportStorage: '1.2.840.10008.5.1.4.1.1.78.6',\n  OphthalmicAxialMeasurementsStorage: '1.2.840.10008.5.1.4.1.1.78.7',\n  IntraocularLensCalculationsStorage: '1.2.840.10008.5.1.4.1.1.78.8',\n  MacularGridThicknessandVolumeReport: '1.2.840.10008.5.1.4.1.1.79.1',\n  OphthalmicVisualFieldStaticPerimetryMeasurementsStorage:\n    '1.2.840.10008.5.1.4.1.1.80.1',\n  OphthalmicThicknessMapStorage: '1.2.840.10008.5.1.4.1.1.81.1',\n  CornealTopographyMapStorage: '1.2.840.10008.5.1.4.1.1.82.1',\n  BasicTextSR: '1.2.840.10008.5.1.4.1.1.88.11',\n  EnhancedSR: '1.2.840.10008.5.1.4.1.1.88.22',\n  ComprehensiveSR: '1.2.840.10008.5.1.4.1.1.88.33',\n  Comprehensive3DSR: '1.2.840.10008.5.1.4.1.1.88.34',\n  ProcedureLog: '1.2.840.10008.5.1.4.1.1.88.40',\n  MammographyCADSR: '1.2.840.10008.5.1.4.1.1.88.50',\n  KeyObjectSelection: '1.2.840.10008.5.1.4.1.1.88.59',\n  ChestCADSR: '1.2.840.10008.5.1.4.1.1.88.65',\n  XRayRadiationDoseSR: '1.2.840.10008.5.1.4.1.1.88.67',\n  RadiopharmaceuticalRadiationDoseSR: '1.2.840.10008.5.1.4.1.1.88.68',\n  ColonCADSR: '1.2.840.10008.5.1.4.1.1.88.69',\n  ImplantationPlanSRDocumentStorage: '1.2.840.10008.5.1.4.1.1.88.70',\n  EncapsulatedPDFStorage: '1.2.840.10008.5.1.4.1.1.104.1',\n  EncapsulatedCDAStorage: '1.2.840.10008.5.1.4.1.1.104.2',\n  PositronEmissionTomographyImageStorage: '1.2.840.10008.5.1.4.1.1.128',\n  EnhancedPETImageStorage: '1.2.840.10008.5.1.4.1.1.130',\n  LegacyConvertedEnhancedPETImageStorage: '1.2.840.10008.5.1.4.1.1.128.1',\n  BasicStructuredDisplayStorage: '1.2.840.10008.5.1.4.1.1.131',\n  RTImageStorage: '1.2.840.10008.5.1.4.1.1.481.1',\n  RTDoseStorage: '1.2.840.10008.5.1.4.1.1.481.2',\n  RTStructureSetStorage: '1.2.840.10008.5.1.4.1.1.481.3',\n  RTBeamsTreatmentRecordStorage: '1.2.840.10008.5.1.4.1.1.481.4',\n  RTPlanStorage: '1.2.840.10008.5.1.4.1.1.481.5',\n  RTBrachyTreatmentRecordStorage: '1.2.840.10008.5.1.4.1.1.481.6',\n  RTTreatmentSummaryRecordStorage: '1.2.840.10008.5.1.4.1.1.481.7',\n  RTIonPlanStorage: '1.2.840.10008.5.1.4.1.1.481.8',\n  RTIonBeamsTreatmentRecordStorage: '1.2.840.10008.5.1.4.1.1.481.9',\n  RTBeamsDeliveryInstructionStorage: '1.2.840.10008.5.1.4.34.7',\n  GenericImplantTemplateStorage: '1.2.840.10008.5.1.4.43.1',\n  ImplantAssemblyTemplateStorage: '1.2.840.10008.5.1.4.44.1',\n  ImplantTemplateGroupStorage: '1.2.840.10008.5.1.4.45.1',\n};\n","/**\n * Checks if a series is reconstructable to a 3D volume.\n *\n * @param {Object[]} instances An array of `OHIFInstanceMetadata` objects.\n */\nexport default function isDisplaySetReconstructable(instances) {\n  if (!instances.length) {\n    return { value: false };\n  }\n\n  const firstInstance = instances[0].getData().metadata;\n\n  const Modality = firstInstance.Modality;\n  const isMultiframe = firstInstance.NumberOfFrames > 1;\n\n  if (!constructableModalities.includes(Modality)) {\n    return { value: false };\n  }\n\n  // Can't reconstruct if we only have one image.\n  if (!isMultiframe && instances.length === 1) {\n    return { value: false };\n  }\n\n  if (isMultiframe) {\n    return processMultiframe(instances[0]);\n  } else {\n    return processSingleframe(instances);\n  }\n}\n\nfunction processMultiframe(instance) {\n  //TODO: deal with multriframe checks! return false for now as can't reconstruct.\n  return { value: false };\n}\n\nfunction processSingleframe(instances) {\n  const firstImage = instances[0].getData().metadata;\n  const firstImageRows = firstImage.Rows;\n  const firstImageColumns = firstImage.Columns;\n  const firstImageSamplesPerPixel = firstImage.SamplesPerPixel;\n  const firstImageOrientationPatient = firstImage.ImageOrientationPatient;\n  const firstImagePositionPatient = firstImage.ImagePositionPatient;\n\n  // Can't reconstruct if we:\n  // -- Have a different dimensions within a displaySet.\n  // -- Have a different number of components within a displaySet.\n  // -- Have different orientations within a displaySet.\n  for (let i = 1; i < instances.length; i++) {\n    const instance = instances[i].getData().metadata;\n    const {\n      Rows,\n      Columns,\n      SamplesPerPixel,\n      ImageOrientationPatient,\n    } = instance;\n\n    if (\n      Rows !== firstImageRows ||\n      Columns !== firstImageColumns ||\n      SamplesPerPixel !== firstImageSamplesPerPixel ||\n      !_isSameOrientation(ImageOrientationPatient, firstImageOrientationPatient)\n    ) {\n      return { value: false };\n    }\n  }\n\n  let missingFrames = 0;\n\n  // Check if frame spacing is approximately equal within a spacingTolerance.\n  // If spacing is on a uniform grid but we are missing frames,\n  // Allow reconstruction, but pass back the number of missing frames.\n  if (instances.length > 2) {\n    const lastIpp = instances[instances.length - 1].getData().metadata\n      .ImagePositionPatient;\n\n    // We can't reconstruct if we are missing ImagePositionPatient values\n    if (!firstImagePositionPatient || !lastIpp) {\n      return { value: false };\n    }\n\n    const averageSpacingBetweenFrames =\n      _getPerpendicularDistance(firstImagePositionPatient, lastIpp) /\n      (instances.length - 1);\n\n    let previousImagePositionPatient = firstImagePositionPatient;\n\n    for (let i = 1; i < instances.length; i++) {\n      const instance = instances[i].getData().metadata;\n      const { ImagePositionPatient } = instance;\n\n      const spacingBetweenFrames = _getPerpendicularDistance(\n        ImagePositionPatient,\n        previousImagePositionPatient\n      );\n      const spacingIssue = _getSpacingIssue(\n        spacingBetweenFrames,\n        averageSpacingBetweenFrames\n      );\n\n      if (spacingIssue) {\n        const issue = spacingIssue.issue;\n\n        if (issue === reconstructionIssues.MISSING_FRAMES) {\n          missingFrames += spacingIssue.missingFrames;\n        } else if (issue === reconstructionIssues.IRREGULAR_SPACING) {\n          return { value: false };\n        }\n      }\n\n      previousImagePositionPatient = ImagePositionPatient;\n    }\n  }\n\n  return { value: true, missingFrames };\n}\n\nfunction _isSameOrientation(iop1, iop2) {\n  if (iop1 === undefined || !iop2 === undefined) {\n    return;\n  }\n\n  return (\n    Math.abs(iop1[0] - iop2[0]) < iopTolerance &&\n    Math.abs(iop1[1] - iop2[1]) < iopTolerance &&\n    Math.abs(iop1[2] - iop2[2]) < iopTolerance\n  );\n}\n\n// TODO: Is 10% a reasonable spacingTolerance for spacing?\nconst spacingTolerance = 0.1;\nconst iopTolerance = 0.01;\n\n/**\n * Checks for spacing issues.\n *\n * @param {number} spacing The spacing between two frames.\n * @param {number} averageSpacing The average spacing between all frames.\n *\n * @returns {Object} An object containing the issue and extra information if necessary.\n */\nfunction _getSpacingIssue(spacing, averageSpacing) {\n  const equalWithinTolerance =\n    Math.abs(spacing - averageSpacing) < averageSpacing * spacingTolerance;\n\n  if (equalWithinTolerance) {\n    return;\n  }\n\n  const multipleOfAverageSpacing = spacing / averageSpacing;\n\n  const numberOfSpacings = Math.round(multipleOfAverageSpacing);\n\n  const errorForEachSpacing =\n    Math.abs(spacing - numberOfSpacings * averageSpacing) / numberOfSpacings;\n\n  if (errorForEachSpacing < spacingTolerance * averageSpacing) {\n    return {\n      issue: reconstructionIssues.MISSING_FRAMES,\n      missingFrames: numberOfSpacings - 1,\n    };\n  }\n\n  return { issue: reconstructionIssues.IRREGULAR_SPACING };\n}\n\nfunction _getPerpendicularDistance(a, b) {\n  return Math.sqrt(\n    Math.pow(a[0] - b[0], 2) +\n    Math.pow(a[1] - b[1], 2) +\n    Math.pow(a[2] - b[2], 2)\n  );\n}\n\nconst constructableModalities = ['MR', 'CT', 'PT', 'NM'];\nconst reconstructionIssues = {\n  MISSING_FRAMES: 'missingframes',\n  IRREGULAR_SPACING: 'irregularspacing',\n};\n","// These should be overridden by the implementation\nconst errorHandler = {\n  getHTTPErrorHandler: () => null,\n};\n\nexport default errorHandler;\n","const LOW_PRIORITY_MODALITIES = Object.freeze([\n  'SEG',\n  'DOC',\n  'RTSTRUCT',\n  'SR',\n  'KO',\n  'PR',\n]);\n\nexport default function isLowPriorityModality(Modality) {\n  return LOW_PRIORITY_MODALITIES.includes(Modality);\n}\n","// - createStacks\nimport DICOMWeb from './../../DICOMWeb';\nimport ImageSet from './../ImageSet';\nimport { InstanceMetadata } from './InstanceMetadata';\nimport { Metadata } from './Metadata';\nimport OHIFError from '../OHIFError';\nimport { SeriesMetadata } from './SeriesMetadata';\n// - createStacks\nimport { api } from 'dicomweb-client';\n// - createStacks\nimport { isImage } from '../../utils/isImage';\nimport isDisplaySetReconstructable from '../../utils/isDisplaySetReconstructable';\nimport errorHandler from '../../errorHandler';\nimport isLowPriorityModality from '../../utils/isLowPriorityModality';\n\nexport class StudyMetadata extends Metadata {\n  constructor(data, uid) {\n    super(data, uid);\n    // Initialize Private Properties\n    Object.defineProperties(this, {\n      _studyInstanceUID: {\n        configurable: true, // configurable so that it can be redefined in sub-classes...\n        enumerable: false,\n        writable: true,\n        value: null,\n      },\n      _series: {\n        configurable: false,\n        enumerable: false,\n        writable: false,\n        value: [],\n      },\n      _displaySets: {\n        configurable: false,\n        enumerable: false,\n        writable: false,\n        value: [],\n      },\n      _derivedDisplaySets: {\n        configurable: false,\n        enumerable: false,\n        writable: false,\n        value: [],\n      },\n      _firstSeries: {\n        configurable: false,\n        enumerable: false,\n        writable: true,\n        value: null,\n      },\n      _firstInstance: {\n        configurable: false,\n        enumerable: false,\n        writable: true,\n        value: null,\n      },\n    });\n    // Initialize Public Properties\n    this._definePublicProperties();\n  }\n\n  /**\n   * Private Methods\n   */\n\n  /**\n   * Define Public Properties\n   * This method should only be called during initialization (inside the class constructor)\n   */\n  _definePublicProperties() {\n    /**\n     * Property: this.studyInstanceUID\n     * Same as this.getStudyInstanceUID()\n     * It's specially useful in contexts where a method call is not suitable like in search criteria. For example:\n     * studyCollection.findBy({\n     *   studyInstanceUID: '1.2.3.4.5.6.77777.8888888.99999999999.0'\n     * });\n     */\n    Object.defineProperty(this, 'studyInstanceUID', {\n      configurable: false,\n      enumerable: false,\n      get: function() {\n        return this.getStudyInstanceUID();\n      },\n    });\n  }\n\n  /**\n   * Public Methods\n   */\n\n  /**\n   * Getter for displaySets\n   * @return {Array} Array of display set object\n   */\n  getDisplaySets() {\n    return this._displaySets.slice();\n  }\n\n  /**\n   * Split a series metadata object into display sets\n   * @param {Array} sopClassHandlerModules List of SOP Class Modules\n   * @param {SeriesMetadata} series The series metadata object from which the display sets will be created\n   * @returns {Array} The list of display sets created for the given series object\n   */\n  _createDisplaySetsForSeries(sopClassHandlerModules, series) {\n    const study = this;\n    const displaySets = [];\n\n    const anyInstances = series.getInstanceCount() > 0;\n\n    if (!anyInstances) {\n      const displaySet = new ImageSet([]);\n      const seriesData = series.getData();\n\n      displaySet.setAttributes({\n        displaySetInstanceUID: displaySet.uid,\n        SeriesInstanceUID: seriesData.SeriesInstanceUID,\n        SeriesDescription: seriesData.SeriesDescription,\n        SeriesNumber: seriesData.SeriesNumber,\n        Modality: seriesData.Modality,\n      });\n\n      displaySets.push(displaySet);\n\n      return displaySets;\n    }\n\n    const sopClassUIDs = getSopClassUIDs(series);\n\n    if (sopClassHandlerModules && sopClassHandlerModules.length > 0) {\n      const displaySet = _getDisplaySetFromSopClassModule(\n        sopClassHandlerModules,\n        series,\n        study,\n        sopClassUIDs\n      );\n\n      if (displaySet) {\n        displaySet.sopClassModule = true;\n\n        if (displaySet.isDerived) {\n          this._addDerivedDisplaySet(displaySet);\n        }\n\n        displaySets.push(displaySet);\n\n        return displaySets;\n      }\n    }\n\n    // WE NEED A BETTER WAY TO NOTE THAT THIS IS THE DEFAULT BEHAVIOR FOR LOADING\n    // A DISPLAY SET IF THERE IS NO MATCHING SOP CLASS PLUGIN\n\n    // Search through the instances (InstanceMetadata object) of this series\n    // Split Multi-frame instances and Single-image modalities\n    // into their own specific display sets. Place the rest of each\n    // series into another display set.\n    const stackableInstances = [];\n    series.forEachInstance(instance => {\n      // All imaging modalities must have a valid value for SOPClassUID (x00080016) or Rows (x00280010)\n      if (\n        !isImage(instance.getTagValue('SOPClassUID')) &&\n        !instance.getTagValue('Rows')\n      ) {\n        return;\n      }\n\n      let displaySet;\n\n      if (isMultiFrame(instance)) {\n        displaySet = makeDisplaySet(series, [instance]);\n\n        displaySet.setAttributes({\n          sopClassUIDs,\n          isClip: true,\n          SeriesInstanceUID: series.getSeriesInstanceUID(),\n          StudyInstanceUID: study.getStudyInstanceUID(), // Include the study instance UID for drag/drop purposes\n          numImageFrames: instance.getTagValue('NumberOfFrames'), // Override the default value of instances.length\n          InstanceNumber: instance.getTagValue('InstanceNumber'), // Include the instance number\n          AcquisitionDatetime: instance.getTagValue('AcquisitionDateTime'), // Include the acquisition datetime\n        });\n        displaySets.push(displaySet);\n      } else if (isSingleImageModality(instance.Modality)) {\n        displaySet = makeDisplaySet(series, [instance]);\n        displaySet.setAttributes({\n          sopClassUIDs,\n          StudyInstanceUID: study.getStudyInstanceUID(), // Include the study instance UID\n          SeriesInstanceUID: series.getSeriesInstanceUID(),\n          InstanceNumber: instance.getTagValue('InstanceNumber'), // Include the instance number\n          AcquisitionDatetime: instance.getTagValue('AcquisitionDateTime'), // Include the acquisition datetime\n        });\n        displaySets.push(displaySet);\n      } else {\n        stackableInstances.push(instance);\n      }\n    });\n\n    if (stackableInstances.length) {\n      const displaySet = makeDisplaySet(series, stackableInstances);\n      displaySet.setAttribute('StudyInstanceUID', study.getStudyInstanceUID());\n      displaySet.setAttributes({\n        sopClassUIDs,\n      });\n      displaySets.push(displaySet);\n    }\n\n    return displaySets;\n  }\n\n  /**\n   * Adds the displaySets to the studies list of derived displaySets.\n   * @param {object} displaySet The displaySet to append to the derived displaysets list.\n   */\n  _addDerivedDisplaySet(displaySet) {\n    this._derivedDisplaySets.push(displaySet);\n    // --> Perhaps that logic should exist in the extension sop class handler and this be a dumb list.\n    // TODO -> Get x Modality by referencedSeriesInstanceUid, FoR, etc.\n  }\n\n  /**\n   * Adds the displaySets to the studies list of derived displaySets.\n   * @param {array} displaySets The displaySets array to append to the derived displaysets list.\n   */\n  _addDerivedDisplaySets(displaySets) {\n    displaySets.map(displaySet => this._derivedDisplaySets.push(displaySet));\n  }\n\n  /**\n   * Returns a list of derived datasets in the study, filtered by the given filter.\n   * @param {object} filter An object containing search filters\n   * @param {object} filter.Modality\n   * @param {object} filter.referencedSeriesInstanceUID\n   * @param {object} filter.referencedFrameOfReferenceUID\n   * @return {Array} filtered derived display sets\n   */\n  getDerivedDatasets(filter) {\n    const {\n      Modality,\n      referencedSeriesInstanceUID,\n      referencedFrameOfReferenceUID,\n    } = filter;\n\n    let filteredDerivedDisplaySets = this._derivedDisplaySets;\n\n    if (Modality) {\n      filteredDerivedDisplaySets = filteredDerivedDisplaySets.filter(\n        displaySet => displaySet.Modality === Modality\n      );\n    }\n\n    if (referencedSeriesInstanceUID) {\n      filteredDerivedDisplaySets = filteredDerivedDisplaySets.filter(\n        displaySet => {\n          if (!displaySet.metadata.ReferencedSeriesSequence) {\n            return false;\n          }\n\n          const ReferencedSeriesSequence = Array.isArray(\n            displaySet.metadata.ReferencedSeriesSequence\n          )\n            ? displaySet.metadata.ReferencedSeriesSequence\n            : [displaySet.metadata.ReferencedSeriesSequence];\n\n          return ReferencedSeriesSequence.some(\n            ReferencedSeries =>\n              ReferencedSeries.SeriesInstanceUID === referencedSeriesInstanceUID\n          );\n        }\n      );\n    }\n\n    if (referencedFrameOfReferenceUID) {\n      filteredDerivedDisplaySets = filteredDerivedDisplaySets.filter(\n        displaySet =>\n          displaySet.ReferencedFrameOfReferenceUID ===\n          referencedFrameOfReferenceUID\n      );\n    }\n\n    return filteredDerivedDisplaySets;\n  }\n\n  /**\n   * Creates a set of displaySets to be placed in the Study Metadata\n   * The displaySets that appear in the Study Metadata must represent\n   * imaging modalities. A series may be split into one or more displaySets.\n   *\n   * Furthermore, for drag/drop functionality,\n   * it is easiest if the stack objects also contain information about\n   * which study they are linked to.\n   *\n   * @param {StudyMetadata} study The study instance metadata to be used\n   * @returns {Array} An array of series to be placed in the Study Metadata\n   */\n  createDisplaySets(sopClassHandlerModules) {\n    const displaySets = [];\n    const anyDisplaySets = this.getSeriesCount();\n\n    if (!anyDisplaySets) {\n      return displaySets;\n    }\n\n    // Loop through the series (SeriesMetadata)\n    this.forEachSeries(series => {\n      const displaySetsForSeries = this._createDisplaySetsForSeries(\n        sopClassHandlerModules,\n        series\n      );\n\n      displaySetsForSeries.forEach(ds => this._insertDisplaySet(ds));\n    });\n\n    return this._displaySets;\n  }\n\n  /**\n   * Method to append display sets from a given series to the internal list of display sets\n   * @param {Array} sopClassHandlerModules A list of SOP Class Handler Modules\n   * @param {SeriesMetadata} series The series metadata object from which the display sets will be created\n   * @returns {boolean} Returns true on success or false on failure (e.g., the series does not belong to this study)\n   */\n  createAndAddDisplaySetsForSeries(sopClassHandlerModules, series) {\n    if (!this.containsSeries(series)) {\n      return false;\n    }\n\n    const displaySets = this._createDisplaySetsForSeries(\n      sopClassHandlerModules,\n      series\n    );\n\n    // Note: filtering in place because this._displaySets has writable: false\n    for (let i = this._displaySets.length - 1; i >= 0; i--) {\n      const displaySet = this._displaySets[i];\n      if (displaySet.SeriesInstanceUID === series.getSeriesInstanceUID()) {\n        this._displaySets.splice(i, 1);\n      }\n    }\n\n    displaySets.forEach(displaySet => {\n      this.addDisplaySet(displaySet);\n    });\n\n    return true;\n  }\n\n  /**\n   * Add a single display set to the list\n   * @param {Object} displaySet Display set object\n   * @returns {boolean} True on success, false on failure.\n   */\n  addDisplaySet(displaySet) {\n    if (displaySet instanceof ImageSet || displaySet.sopClassModule) {\n      this._insertDisplaySet(displaySet);\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * Invokes the supplied callback for each display set in the current study passing\n   * two arguments: display set (a ImageSet instance) and index (the integer\n   * index of the display set within the current study)\n   * @param {function} callback The callback function which will be invoked for each display set instance.\n   * @returns {undefined} Nothing is returned.\n   */\n  forEachDisplaySet(callback) {\n    if (Metadata.isValidCallback(callback)) {\n      this._displaySets.forEach((displaySet, index) => {\n        callback.call(null, displaySet, index);\n      });\n    }\n  }\n\n  /**\n   * Insert the displaySet so that the list has an increasing SeriesNumber,\n   * with the most recent series first for displaySets with the same SeriesNumber.\n   *\n   * If the displaySet is low priority, the same logic is applied, but is sorted within a sub list\n   * At the end of the list, where all low priority data is found.\n   */\n  _insertDisplaySet(displaySet) {\n    const { SeriesNumber } = displaySet;\n    const displaySets = this._displaySets;\n    let insertIndex = displaySets.length;\n    let firstIndexWithSameSeriesNumber;\n\n    // If low priority, start search from next low priority.\n    if (isLowPriorityModality(displaySet.Modality)) {\n      let startingIndex;\n\n      // Find where the first low priority displaySet is.\n      for (let i = 0; i < displaySets.length; i++) {\n        if (isLowPriorityModality(displaySets[i].Modality)) {\n          startingIndex = i;\n          break;\n        }\n      }\n\n      if (!startingIndex) {\n        startingIndex = displaySets.length;\n      }\n\n      // Find the correct SeriesNumber location to insert within the low priority\n      // Modality displaySets\n      for (let i = startingIndex; i < displaySets.length; i++) {\n        if (\n          displaySets[i].SeriesNumber === SeriesNumber &&\n          !firstIndexWithSameSeriesNumber\n        ) {\n          firstIndexWithSameSeriesNumber = i;\n        }\n\n        if (displaySets[i].SeriesNumber > SeriesNumber) {\n          insertIndex = i;\n          break;\n        }\n      }\n    } else {\n      // Find correct SeriesNumber to insert or where the low priority modalities start.\n      for (let i = 0; i < displaySets.length; i++) {\n        if (\n          displaySets[i].SeriesNumber === SeriesNumber &&\n          !firstIndexWithSameSeriesNumber\n        ) {\n          firstIndexWithSameSeriesNumber = i;\n        }\n\n        if (\n          displaySets[i].SeriesNumber > SeriesNumber ||\n          isLowPriorityModality(displaySets[i].Modality)\n        ) {\n          insertIndex = i;\n          break;\n        }\n      }\n    }\n\n    // If we have multiple displaySets with the same series number, find the insert position based on\n    // SeriesDate and SeriesTime.\n    if (firstIndexWithSameSeriesNumber !== undefined) {\n      // If no SeriesDate, is just a placeholder displaySet, just insert anywhere, it will be re-added later.\n      if (displaySet.SeriesDate) {\n        const seriesDateTime = `${displaySet.SeriesDate}${displaySet.SeriesTime}`;\n\n        for (let i = firstIndexWithSameSeriesNumber; i < insertIndex; i++) {\n          const displaySetI = displaySets[i];\n\n          if (\n            displaySetI.SeriesDate &&\n            `${displaySetI.SeriesDate}${displaySetI.SeriesTime}` <\n              seriesDateTime\n          ) {\n            insertIndex = i;\n            break;\n          }\n        }\n      }\n    }\n\n    this._displaySets.splice(insertIndex, 0, displaySet);\n    this.displaySets = this._displaySets;\n  }\n\n  /**\n   * Search the associated display sets using the supplied callback as criteria. The callback is passed\n   * two arguments: display set (an ImageSet instance) and index (the integer\n   * index of the display set within the current study)\n   * @param {function} callback The callback function which will be invoked for each display set instance.\n   * @returns {undefined} Nothing is returned.\n   */\n  findDisplaySet(callback) {\n    if (Metadata.isValidCallback(callback)) {\n      return this._displaySets.find((displaySet, index) => {\n        return callback.call(null, displaySet, index);\n      });\n    }\n  }\n\n  /**\n   * Retrieve the number of display sets within the current study.\n   * @returns {number} The number of display sets in the current study.\n   */\n  getDisplaySetCount() {\n    return this._displaySets.length;\n  }\n\n  /**\n   * Returns the StudyInstanceUID of the current study.\n   */\n  getStudyInstanceUID() {\n    return this._studyInstanceUID;\n  }\n\n  /**\n   * Getter for series\n   * @return {Array} Array of SeriesMetadata object\n   */\n  getSeries() {\n    return this._series.slice();\n  }\n\n  /**\n   * Append a series to the current study.\n   * @param {SeriesMetadata} series The series to be added to the current study.\n   * @returns {boolean} Returns true on success, false otherwise.\n   */\n  addSeries(series) {\n    let result = false;\n    if (\n      series instanceof SeriesMetadata &&\n      this.getSeriesByUID(series.getSeriesInstanceUID()) === void 0\n    ) {\n      this._series.push(series);\n      result = true;\n    }\n    return result;\n  }\n\n  /**\n   * Update a series in the current study by SeriesInstanceUID.\n   * @param {String} SeriesInstanceUID The SeriesInstanceUID to be updated\n   * @param {SeriesMetadata} series The series to be added to the current study.\n   * @returns {boolean} Returns true on success, false otherwise.\n   */\n  updateSeries(SeriesInstanceUID, series) {\n    const index = this._series.findIndex(series => {\n      return series.getSeriesInstanceUID() === SeriesInstanceUID;\n    });\n\n    if (index < 0) {\n      return false;\n    }\n\n    if (!(series instanceof SeriesMetadata)) {\n      throw new Error('Series must be an instance of SeriesMetadata');\n    }\n\n    this._series[index] = series;\n\n    return true;\n  }\n\n  /**\n   * Find a series by index.\n   * @param {number} index An integer representing a list index.\n   * @returns {SeriesMetadata} Returns a SeriesMetadata instance when found or undefined otherwise.\n   */\n  getSeriesByIndex(index) {\n    let found; // undefined by default...\n    if (Metadata.isValidIndex(index)) {\n      found = this._series[index];\n    }\n    return found;\n  }\n\n  /**\n   * Find a series by SeriesInstanceUID.\n   * @param {string} uid An UID string.\n   * @returns {SeriesMetadata} Returns a SeriesMetadata instance when found or undefined otherwise.\n   */\n  getSeriesByUID(uid) {\n    let found; // undefined by default...\n    if (Metadata.isValidUID(uid)) {\n      found = this._series.find(series => {\n        return series.getSeriesInstanceUID() === uid;\n      });\n    }\n    return found;\n  }\n\n  containsSeries(series) {\n    return (\n      series instanceof SeriesMetadata && this._series.indexOf(series) >= 0\n    );\n  }\n\n  /**\n   * Retrieve the number of series within the current study.\n   * @returns {number} The number of series in the current study.\n   */\n  getSeriesCount() {\n    return this._series.length;\n  }\n\n  /**\n   * Retrieve the number of instances within the current study.\n   * @returns {number} The number of instances in the current study.\n   */\n  getInstanceCount() {\n    return this._series.reduce((sum, series) => {\n      return sum + series.getInstanceCount();\n    }, 0);\n  }\n\n  /**\n   * Invokes the supplied callback for each series in the current study passing\n   * two arguments: series (a SeriesMetadata instance) and index (the integer\n   * index of the series within the current study)\n   * @param {function} callback The callback function which will be invoked for each series instance.\n   * @returns {undefined} Nothing is returned.\n   */\n  forEachSeries(callback) {\n    if (Metadata.isValidCallback(callback)) {\n      this._series.forEach((series, index) => {\n        callback.call(null, series, index);\n      });\n    }\n  }\n\n  /**\n   * Find the index of a series inside the study.\n   * @param {SeriesMetadata} series An instance of the SeriesMetadata class.\n   * @returns {number} The index of the series inside the study or -1 if not found.\n   */\n  indexOfSeries(series) {\n    return this._series.indexOf(series);\n  }\n\n  /**\n   * Compares the current study instance with another one.\n   * @param {StudyMetadata} study An instance of the StudyMetadata class.\n   * @returns {boolean} Returns true if both instances refer to the same study.\n   */\n  equals(study) {\n    const self = this;\n    return (\n      study === self ||\n      (study instanceof StudyMetadata &&\n        study.getStudyInstanceUID() === self.getStudyInstanceUID())\n    );\n  }\n\n  /**\n   * Get the first series of the current study retaining a consistent result across multiple calls.\n   * @return {SeriesMetadata} An instance of the SeriesMetadata class or null if it does not exist.\n   */\n  getFirstSeries() {\n    let series = this._firstSeries;\n    if (!(series instanceof SeriesMetadata)) {\n      series = null;\n      const found = this.getSeriesByIndex(0);\n      if (found instanceof SeriesMetadata) {\n        this._firstSeries = found;\n        series = found;\n      }\n    }\n    return series;\n  }\n\n  /**\n   * Get the first image id given display instance uid.\n   * @return {string} The image id.\n   */\n  getFirstImageId(displaySetInstanceUID) {\n    try {\n      const displaySet = this.findDisplaySet(\n        displaySet => displaySet.displaySetInstanceUID === displaySetInstanceUID\n      );\n      return displaySet.images[0].getImageId();\n    } catch (error) {\n      console.error('Failed to retrieve image metadata');\n      return null;\n    }\n  }\n\n  /**\n   * Get the first instance of the current study retaining a consistent result across multiple calls.\n   * @return {InstanceMetadata} An instance of the InstanceMetadata class or null if it does not exist.\n   */\n  getFirstInstance() {\n    let instance = this._firstInstance;\n    if (!(instance instanceof InstanceMetadata)) {\n      instance = null;\n      const firstSeries = this.getFirstSeries();\n      if (firstSeries instanceof SeriesMetadata) {\n        const found = firstSeries.getFirstInstance();\n        if (found instanceof InstanceMetadata) {\n          this._firstInstance = found;\n          instance = found;\n        }\n      }\n    }\n    return instance;\n  }\n\n  /**\n   * Search the associated series to find an specific instance using the supplied callback as criteria.\n   * The callback is passed two arguments: instance (a InstanceMetadata instance) and index (the integer\n   * index of the instance within the current series)\n   * @param {function} callback The callback function which will be invoked for each instance instance.\n   * @returns {Object} Result object containing series (SeriesMetadata) and instance (InstanceMetadata)\n   *                   objects or an empty object if not found.\n   */\n  findSeriesAndInstanceByInstance(callback) {\n    let result;\n\n    if (Metadata.isValidCallback(callback)) {\n      let instance;\n\n      const series = this._series.find(series => {\n        instance = series.findInstance(callback);\n        return instance instanceof InstanceMetadata;\n      });\n\n      // No series found\n      if (series instanceof SeriesMetadata) {\n        result = {\n          series,\n          instance,\n        };\n      }\n    }\n\n    return result || {};\n  }\n\n  /**\n   * Find series by instance using the supplied callback as criteria. The callback is passed\n   * two arguments: instance (a InstanceMetadata instance) and index (the integer index of\n   * the instance within its series)\n   * @param {function} callback The callback function which will be invoked for each instance.\n   * @returns {SeriesMetadata|undefined} If a series is found based on callback criteria it\n   *                                     returns a SeriesMetadata. \"undefined\" is returned otherwise\n   */\n  findSeriesByInstance(callback) {\n    const result = this.findSeriesAndInstanceByInstance(callback);\n\n    return result.series;\n  }\n\n  /**\n   * Find an instance using the supplied callback as criteria. The callback is passed\n   * two arguments: instance (a InstanceMetadata instance) and index (the integer index of\n   * the instance within its series)\n   * @param {function} callback The callback function which will be invoked for each instance.\n   * @returns {InstanceMetadata|undefined} If an instance is found based on callback criteria it\n   *                                     returns a InstanceMetadata. \"undefined\" is returned otherwise\n   */\n  findInstance(callback) {\n    const result = this.findSeriesAndInstanceByInstance(callback);\n\n    return result.instance;\n  }\n}\n\n/**\n *\n * @typedef StudyMetadata\n * @property {function} getSeriesCount - returns the number of series in the study\n * @property {function} forEachSeries - function that invokes callback with each series and index\n * @property {function} getStudyInstanceUID - returns the study's instance UID\n *\n */\n\n/**\n * @typedef SeriesMetadata\n * @property {function} getSeriesInstanceUID - returns the series's instance UID\n * @property {function} getData - ???\n * @property {function} forEachInstance - ???\n */\n\nconst dwc = api.DICOMwebClient;\n\nconst isMultiFrame = instance => {\n  return instance.getTagValue('NumberOfFrames') > 1;\n};\n\nconst makeDisplaySet = (series, instances) => {\n  const instance = instances[0];\n  const imageSet = new ImageSet(instances);\n  const seriesData = series.getData();\n\n  // set appropriate attributes to image set...\n  imageSet.setAttributes({\n    displaySetInstanceUID: imageSet.uid, // create a local alias for the imageSet UID\n    SeriesDate: seriesData.SeriesDate,\n    SeriesTime: seriesData.SeriesTime,\n    SeriesInstanceUID: series.getSeriesInstanceUID(),\n    SeriesNumber: instance.getTagValue('SeriesNumber'),\n    SeriesDescription: instance.getTagValue('SeriesDescription'),\n    numImageFrames: instances.length,\n    frameRate: instance.getTagValue('FrameTime'),\n    Modality: instance.getTagValue('Modality'),\n    isMultiFrame: isMultiFrame(instance),\n  });\n\n  // Sort the images in this series if needed\n  const shallSort = true; //!OHIF.utils.ObjectPath.get(Meteor, 'settings.public.ui.sortSeriesByIncomingOrder');\n  if (shallSort) {\n    imageSet.sortBy((a, b) => {\n      // Sort by InstanceNumber (0020,0013)\n      return (\n        (parseInt(a.getTagValue('InstanceNumber', 0)) || 0) -\n        (parseInt(b.getTagValue('InstanceNumber', 0)) || 0)\n      );\n    });\n  }\n\n  // Include the first image instance number (after sorted)\n  imageSet.setAttribute(\n    'InstanceNumber',\n    imageSet.getImage(0).getTagValue('InstanceNumber')\n  );\n\n  const isReconstructable = isDisplaySetReconstructable(instances);\n\n  imageSet.isReconstructable = isReconstructable.value;\n\n  if (shallSort && imageSet.isReconstructable) {\n    imageSet.sortByImagePositionPatient();\n  }\n\n  if (isReconstructable.missingFrames) {\n    // TODO -> This is currently unused, but may be used for reconstructing\n    // Volumes with gaps later on.\n    imageSet.missingFrames = isReconstructable.missingFrames;\n  }\n\n  return imageSet;\n};\n\nconst isSingleImageModality = Modality => {\n  return Modality === 'CR' || Modality === 'MG' || Modality === 'DX';\n};\n\nfunction getSopClassUIDs(series) {\n  const uniqueSopClassUIDsInSeries = new Set();\n  series.forEachInstance(instance => {\n    const instanceSopClassUID = instance.getTagValue('SOPClassUID');\n\n    uniqueSopClassUIDsInSeries.add(instanceSopClassUID);\n  });\n  const sopClassUIDs = Array.from(uniqueSopClassUIDsInSeries);\n\n  return sopClassUIDs;\n}\n\n/**\n * @private\n * @param {SeriesMetadata} series\n * @param {StudyMetadata} study\n * @param {string[]} sopClassUIDs\n */\nfunction _getDisplaySetFromSopClassModule(\n  sopClassHandlerExtensions, // TODO: Update Usage\n  series,\n  study,\n  sopClassUIDs\n) {\n  // TODO: For now only use the plugins if all instances have the same SOPClassUID\n  if (sopClassUIDs.length !== 1) {\n    console.warn(\n      'getDisplaySetFromSopClassPlugin: More than one SOPClassUID in the same series is not yet supported.'\n    );\n    return;\n  }\n\n  const SOPClassUID = sopClassUIDs[0];\n  const sopClassHandlerModules = sopClassHandlerExtensions.map(extension => {\n    return extension.module;\n  });\n\n  const handlersForSopClassUID = sopClassHandlerModules.filter(module => {\n    return module.sopClassUIDs.includes(SOPClassUID);\n  });\n\n  // TODO: Sort by something, so we can determine which plugin to use\n  if (!handlersForSopClassUID || !handlersForSopClassUID.length) {\n    return;\n  }\n\n  const plugin = handlersForSopClassUID[0];\n  const headers = DICOMWeb.getAuthorizationHeader();\n  const errorInterceptor = errorHandler.getHTTPErrorHandler();\n  const dicomWebClient = new dwc({\n    url: study.getData().wadoRoot,\n    headers,\n    errorInterceptor,\n  });\n\n  let displaySet = plugin.getDisplaySetFromSeries(\n    series,\n    study,\n    dicomWebClient,\n    headers\n  );\n  if (displaySet && !displaySet.Modality) {\n    const instance = series.getFirstInstance();\n    displaySet.Modality = instance.getTagValue('Modality');\n  }\n  return displaySet;\n}\n","import { StudyMetadata } from './StudyMetadata';\nimport { OHIFSeriesMetadata } from './OHIFSeriesMetadata';\n\nexport class OHIFStudyMetadata extends StudyMetadata {\n  /**\n   * @param {Object} Study object.\n   */\n  constructor(data, uid) {\n    super(data, uid);\n    this.init();\n  }\n\n  init() {\n    const study = this.getData();\n\n    // define \"_studyInstanceUID\" protected property\n    Object.defineProperty(this, '_studyInstanceUID', {\n      configurable: false,\n      enumerable: false,\n      writable: false,\n      value: study.StudyInstanceUID,\n    });\n\n    // populate internal list of series\n    study.series.forEach(series => {\n      this.addSeries(new OHIFSeriesMetadata(series, study));\n    });\n  }\n}\n","import { InstanceMetadata } from './InstanceMetadata';\nimport { Metadata } from './Metadata';\nimport { OHIFInstanceMetadata } from './OHIFInstanceMetadata';\nimport { OHIFSeriesMetadata } from './OHIFSeriesMetadata';\nimport { OHIFStudyMetadata } from './OHIFStudyMetadata';\nimport { SeriesMetadata } from './SeriesMetadata';\nimport { StudyMetadata } from './StudyMetadata';\n\nconst metadata = {\n  Metadata,\n  StudyMetadata,\n  SeriesMetadata,\n  InstanceMetadata,\n  OHIFStudyMetadata,\n  OHIFSeriesMetadata,\n  OHIFInstanceMetadata,\n};\n\nexport {\n  Metadata,\n  StudyMetadata,\n  SeriesMetadata,\n  InstanceMetadata,\n  OHIFStudyMetadata,\n  OHIFSeriesMetadata,\n  OHIFInstanceMetadata,\n};\n\nexport default metadata;\n","import log from '../log.js';\n\n/**\n * The definition of a command\n *\n * @typedef {Object} CommandDefinition\n * @property {Function} commandFn - Command to call\n * @property {Array} storeContexts - Array of string of modules required from store\n * @property {Object} options - Object of params to pass action\n */\n\n/**\n * The Commands Manager tracks named commands (or functions) that are scoped to\n * a context. When we attempt to run a command with a given name, we look for it\n * in our active contexts. If found, we run the command, passing in any application\n * or call specific data specified in the command's definition.\n *\n * NOTE: A more robust version of the CommandsManager lives in v1. If you're looking\n * to extend this class, please check it's source before adding new methods.\n */\nexport class CommandsManager {\n  constructor({ getAppState, getActiveContexts } = {}) {\n    this.contexts = {};\n\n    if (!getAppState || !getActiveContexts) {\n      log.warn(\n        'CommandsManager was instantiated without getAppState() or getActiveContexts()'\n      );\n    }\n\n    this._getAppState = getAppState;\n    this._getActiveContexts = getActiveContexts;\n  }\n\n  /**\n   * Allows us to create commands \"per context\". An example would be the \"Cornerstone\"\n   * context having a `SaveImage` command, and the \"VTK\" context having a `SaveImage`\n   * command. The distinction of a context allows us to call the command in either\n   * context, and have faith that the correct command will be run.\n   *\n   * @method\n   * @param {string} contextName - Namespace for commands\n   * @returns {undefined}\n   */\n  createContext(contextName) {\n    if (!contextName) {\n      return;\n    }\n\n    if (this.contexts[contextName]) {\n      return this.clearContext(contextName);\n    }\n\n    this.contexts[contextName] = {};\n  }\n\n  /**\n   * Returns all command definitions for a given context\n   *\n   * @method\n   * @param {string} contextName - Namespace for commands\n   * @returns {Object} - the matched context\n   */\n  getContext(contextName) {\n    const context = this.contexts[contextName];\n\n    if (!context) {\n      return;\n    }\n\n    return context;\n  }\n\n  /**\n   * Clears all registered commands for a given context.\n   *\n   * @param {string} contextName - Namespace for commands\n   * @returns {undefined}\n   */\n  clearContext(contextName) {\n    if (!contextName) {\n      return;\n    }\n\n    this.contexts[contextName] = {};\n  }\n\n  /**\n   * Register a new command with the command manager. Scoped to a context, and\n   * with a definition to assist command callers w/ providing the necessary params\n   *\n   * @method\n   * @param {string} contextName - Namespace for command; often scoped to the extension that added it\n   * @param {string} commandName - Unique name identifying the command\n   * @param {CommandDefinition} definition - {@link CommandDefinition}\n   */\n  registerCommand(contextName, commandName, definition) {\n    if (typeof definition !== 'object') {\n      return;\n    }\n\n    const context = this.getContext(contextName);\n    if (!context) {\n      return;\n    }\n\n    context[commandName] = definition;\n  }\n\n  /**\n   * Finds a command with the provided name if it exists in the specified context,\n   * or a currently active context.\n   *\n   * @method\n   * @param {String} commandName - Command to find\n   * @param {String} [contextName] - Specific command to look in. Defaults to current activeContexts\n   */\n  getCommand(commandName, contextName) {\n    let contexts = [];\n\n    if (contextName) {\n      const context = this.getContext(contextName);\n      if (context) {\n        contexts.push(context);\n      }\n    } else {\n      const activeContexts = this._getActiveContexts();\n      activeContexts.forEach(activeContext => {\n        const context = this.getContext(activeContext);\n        if (context) {\n          contexts.push(context);\n        }\n      });\n    }\n\n    if (contexts.length === 0) {\n      return;\n    }\n\n    let foundCommand;\n    contexts.forEach(context => {\n      if (context[commandName]) {\n        foundCommand = context[commandName];\n      }\n    });\n\n    return foundCommand;\n  }\n\n  /**\n   *\n   * @method\n   * @param {String} commandName\n   * @param {Object} [options={}] - Extra options to pass the command. Like a mousedown event\n   * @param {String} [contextName]\n   */\n  runCommand(commandName, options = {}, contextName) {\n    const definition = this.getCommand(commandName, contextName);\n    if (!definition) {\n      log.warn(`Command \"${commandName}\" not found in current context`);\n      return;\n    }\n\n    const { commandFn, storeContexts = [] } = definition;\n    const definitionOptions = definition.options;\n\n    let commandParams = {};\n    const appState = this._getAppState();\n    storeContexts.forEach(context => {\n      commandParams[context] = appState[context];\n    });\n\n    commandParams = Object.assign(\n      {},\n      commandParams, // Required store contexts\n      definitionOptions, // \"Command configuration\"\n      options // \"Time of call\" info\n    );\n\n    if (typeof commandFn !== 'function') {\n      log.warn(`No commandFn was defined for command \"${commandName}\"`);\n      return;\n    } else {\n      return commandFn(commandParams);\n    }\n  }\n}\n\nexport default CommandsManager;\n","/** Action Creators:\n *  https://redux.js.org/basics/actions#action-creators\n */\n\nimport {\n  CLEAR_VIEWPORT,\n  SET_ACTIVE_SPECIFIC_DATA,\n  SET_SERVERS,\n  SET_VIEWPORT,\n  SET_VIEWPORT_ACTIVE,\n  SET_VIEWPORT_LAYOUT,\n  SET_VIEWPORT_LAYOUT_AND_DATA,\n  SET_USER_PREFERENCES,\n} from './constants/ActionTypes.js';\n\n/**\n * The definition of a viewport layout.\n *\n * @typedef {Object} ViewportLayout\n * @property {number} numRows -\n * @property {number} numColumns -\n * @property {array} viewports -\n */\n\n/**\n * VIEWPORT\n */\nexport const setViewportSpecificData = (\n  viewportIndex,\n  viewportSpecificData\n) => ({\n  type: SET_VIEWPORT,\n  viewportIndex,\n  viewportSpecificData,\n});\n\nexport const setViewportActive = viewportIndex => ({\n  type: SET_VIEWPORT_ACTIVE,\n  viewportIndex,\n});\n\n/**\n * @param {ViewportLayout} layout\n */\nexport const setLayout = ({ numRows, numColumns, viewports }) => ({\n  type: SET_VIEWPORT_LAYOUT,\n  numRows,\n  numColumns,\n  viewports,\n});\n\n/**\n * @param {number} layout.numRows\n * @param {number} layout.numColumns\n * @param {array} viewports\n */\nexport const setViewportLayoutAndData = (\n  { numRows, numColumns, viewports },\n  viewportSpecificData\n) => ({\n  type: SET_VIEWPORT_LAYOUT_AND_DATA,\n  numRows,\n  numColumns,\n  viewports,\n  viewportSpecificData,\n});\n\nexport const clearViewportSpecificData = viewportIndex => ({\n  type: CLEAR_VIEWPORT,\n  viewportIndex,\n});\n\nexport const setActiveViewportSpecificData = viewportSpecificData => ({\n  type: SET_ACTIVE_SPECIFIC_DATA,\n  viewportSpecificData,\n});\n\n/**\n * NOT-VIEWPORT\n */\nexport const setStudyLoadingProgress = (progressId, progressData) => ({\n  type: 'SET_STUDY_LOADING_PROGRESS',\n  progressId,\n  progressData,\n});\n\nexport const clearStudyLoadingProgress = progressId => ({\n  type: 'CLEAR_STUDY_LOADING_PROGRESS',\n  progressId,\n});\n\nexport const setUserPreferences = state => ({\n  type: SET_USER_PREFERENCES,\n  state,\n});\n\nexport const setExtensionData = (extension, data) => ({\n  type: 'SET_EXTENSION_DATA',\n  extension,\n  data,\n});\n\nexport const setTimepoints = state => ({\n  type: 'SET_TIMEPOINTS',\n  state,\n});\n\nexport const setMeasurements = state => ({\n  type: 'SET_MEASUREMENTS',\n  state,\n});\n\nexport const setStudyData = (StudyInstanceUID, data) => ({\n  type: 'SET_STUDY_DATA',\n  StudyInstanceUID,\n  data,\n});\n\nexport const setServers = servers => ({\n  type: SET_SERVERS,\n  servers,\n});\n\nconst actions = {\n  /**\n   * VIEWPORT\n   */\n  setViewportActive,\n  setViewportSpecificData,\n  setViewportLayoutAndData,\n  setLayout,\n  clearViewportSpecificData,\n  setActiveViewportSpecificData,\n  /**\n   * NOT-VIEWPORT\n   */\n  setStudyLoadingProgress,\n  clearStudyLoadingProgress,\n  setUserPreferences,\n  setExtensionData,\n  setTimepoints,\n  setMeasurements,\n  setStudyData,\n  setServers,\n};\n\nexport default actions;\n","/**\n * VIEWPORT\n */\nexport const SET_VIEWPORT = 'VIEWPORT::SET';\nexport const SET_VIEWPORT_ACTIVE = 'VIEWPORT::SET_ACTIVE';\nexport const SET_VIEWPORT_LAYOUT = 'VIEWPORT::SET_LAYOUT';\nexport const SET_VIEWPORT_LAYOUT_AND_DATA =\n  'VIEWPORT::SET_VIEWPORT_LAYOUT_AND_DATA';\nexport const CLEAR_VIEWPORT = 'VIEWPORT::CLEAR';\nexport const SET_SPECIFIC_DATA = 'VIEWPORT::SET_SPECIFIC_DATA';\nexport const SET_ACTIVE_SPECIFIC_DATA = 'VIEWPORT::SET_ACTIVE_SPECIFIC_DATA';\n\n/**\n * SERVERS\n */\nexport const ADD_SERVER = 'ADD_SERVER';\nexport const SET_SERVERS = 'SET_SERVERS';\n\n/**\n * EXTENSIONS\n */\nexport const SET_EXTENSION_DATA = 'SET_EXTENSION_DATA';\n\n/**\n * PREFERENCES\n * */\nexport const SET_USER_PREFERENCES = 'SET_USER_PREFERENCES';\n","/**\n * Convert String to ArrayBuffer\n *\n * @param {String} str Input String\n * @return {ArrayBuffer} Output converted ArrayBuffer\n */\nexport default function str2ab(str) {\n  const strLen = str.length;\n  const bytes = new Uint8Array(strLen);\n\n  for (let i = 0; i < strLen; i++) {\n    bytes[i] = str.charCodeAt(i);\n  }\n\n  return bytes.buffer;\n}\n","import { api } from 'dicomweb-client';\nimport DICOMWeb from '../../DICOMWeb';\nimport str2ab from '../str2ab';\n\nimport errorHandler from '../../errorHandler';\n\nexport default async function fetchPaletteColorLookupTableData(\n  instance,\n  server\n) {\n  const {\n    PaletteColorLookupTableUID,\n    RedPaletteColorLookupTableDescriptor,\n    GreenPaletteColorLookupTableDescriptor,\n    BluePaletteColorLookupTableDescriptor,\n    RedPaletteColorLookupTableData,\n    GreenPaletteColorLookupTableData,\n    BluePaletteColorLookupTableData,\n  } = instance;\n\n  return new Promise((resolve, reject) => {\n    let entry;\n    if (_paletteColorCache.isValidUID(PaletteColorLookupTableUID)) {\n      entry = _paletteColorCache.get(PaletteColorLookupTableUID);\n\n      if (entry) {\n        return resolve(entry);\n      }\n    }\n\n    // no entry in cache... Fetch remote data.\n    const promises = [\n      _getPaletteColor(\n        server,\n        RedPaletteColorLookupTableData,\n        RedPaletteColorLookupTableDescriptor\n      ),\n      _getPaletteColor(\n        server,\n        GreenPaletteColorLookupTableData,\n        GreenPaletteColorLookupTableDescriptor\n      ),\n      _getPaletteColor(\n        server,\n        BluePaletteColorLookupTableData,\n        BluePaletteColorLookupTableDescriptor\n      ),\n    ];\n\n    Promise.all(promises).then(\n      ([\n        RedPaletteColorLookupTableData,\n        GreenPaletteColorLookupTableData,\n        BluePaletteColorLookupTableData,\n      ]) => {\n        // when PaletteColorLookupTableUID is present, the entry can be cached...\n        _paletteColorCache.add({\n          RedPaletteColorLookupTableData,\n          GreenPaletteColorLookupTableData,\n          BluePaletteColorLookupTableData,\n          PaletteColorLookupTableUID,\n        });\n\n        instance.RedPaletteColorLookupTableData = RedPaletteColorLookupTableData;\n        instance.GreenPaletteColorLookupTableData = GreenPaletteColorLookupTableData;\n        instance.BluePaletteColorLookupTableData = BluePaletteColorLookupTableData;\n\n        resolve();\n      }\n    );\n  });\n}\n\n/**\n * Simple cache schema for retrieved color palettes.\n */\nconst _paletteColorCache = {\n  count: 0,\n  maxAge: 24 * 60 * 60 * 1000, // 24h cache?\n  entries: {},\n  isValidUID: function(PaletteColorLookupTableUID) {\n    return (\n      typeof PaletteColorLookupTableUID === 'string' &&\n      PaletteColorLookupTableUID.length > 0\n    );\n  },\n  get: function(PaletteColorLookupTableUID) {\n    let entry = null;\n    if (this.entries.hasOwnProperty(PaletteColorLookupTableUID)) {\n      entry = this.entries[PaletteColorLookupTableUID];\n      // check how the entry is...\n      if (Date.now() - entry.time > this.maxAge) {\n        // entry is too old... remove entry.\n        delete this.entries[PaletteColorLookupTableUID];\n        this.count--;\n        entry = null;\n      }\n    }\n    return entry;\n  },\n  add: function(entry) {\n    if (this.isValidUID(entry.uid)) {\n      let PaletteColorLookupTableUID = entry.uid;\n      if (this.entries.hasOwnProperty(PaletteColorLookupTableUID) !== true) {\n        this.count++; // increment cache entry count...\n      }\n      entry.time = Date.now();\n      this.entries[PaletteColorLookupTableUID] = entry;\n      // @TODO: Add logic to get rid of old entries and reduce memory usage...\n    }\n  },\n};\n\nfunction _getPaletteColor(server, paletteColorLookupTableData, lutDescriptor) {\n  const numLutEntries = lutDescriptor[0];\n  const bits = lutDescriptor[2];\n\n  const arrayBufferToPaletteColorLUT = arraybuffer => {\n    const byteArray = bits === 16 ?\n      new Uint16Array(arraybuffer) :\n      new Uint8Array(arraybuffer);\n    const lut = [];\n\n    for (let i = 0; i < numLutEntries; i++) {\n      lut[i] = byteArray[i];\n    }\n\n    return lut;\n  };\n\n  if (paletteColorLookupTableData.BulkDataURI) {\n    let uri = paletteColorLookupTableData.BulkDataURI;\n\n    // TODO: Workaround for dcm4chee behind SSL-terminating proxy returning\n    // incorrect bulk data URIs\n    if (server.wadoRoot.indexOf('https') === 0 && !uri.includes('https')) {\n      uri = uri.replace('http', 'https');\n    }\n\n    const config = {\n      url: server.wadoRoot, //BulkDataURI is absolute, so this isn't used\n      headers: DICOMWeb.getAuthorizationHeader(server),\n      errorInterceptor: errorHandler.getHTTPErrorHandler(),\n    };\n    const dicomWeb = new api.DICOMwebClient(config);\n    const options = {\n      BulkDataURI: uri,\n    };\n\n    return dicomWeb\n      .retrieveBulkData(options)\n      .then(result => result[0])\n      .then(arrayBufferToPaletteColorLUT);\n  } else if (paletteColorLookupTableData.InlineBinary) {\n    const inlineBinaryData = atob(paletteColorLookupTableData.InlineBinary);\n    const arraybuffer = str2ab(inlineBinaryData);\n\n    return new Promise(resolve => {\n      resolve(arrayBufferToPaletteColorLUT(arraybuffer));\n    });\n  } else {\n    return Promise.resolve(\n      arrayBufferToPaletteColorLUT(paletteColorLookupTableData)\n    );\n  }\n}\n","export default function unpackOverlay(arrayBuffer) {\n  const bitArray = new Uint8Array(arrayBuffer);\n  const byteArray = new Uint8Array(8 * bitArray.length);\n\n  for (let byteIndex = 0; byteIndex < byteArray.length; byteIndex++) {\n    const bitIndex = byteIndex % 8;\n    const bitByteIndex = Math.floor(byteIndex / 8);\n    byteArray[byteIndex] =\n      1 * ((bitArray[bitByteIndex] & (1 << bitIndex)) >> bitIndex);\n  }\n\n  return byteArray;\n}\n","import { api } from 'dicomweb-client';\nimport DICOMWeb from '../../DICOMWeb';\nimport str2ab from '../str2ab';\nimport unpackOverlay from './unpackOverlay';\n\nimport errorHandler from '../../errorHandler';\n\nexport default async function fetchOverlayData(instance, server) {\n  const OverlayDataPromises = [];\n  const OverlayDataTags = [];\n\n  return new Promise((resolve, reject) => {\n    for (let overlayGroup = 0x00; overlayGroup <= 0x1e; overlayGroup += 0x02) {\n      let groupStr = `60${overlayGroup.toString(16)}`;\n\n      if (groupStr.length === 3) {\n        groupStr = `600${overlayGroup.toString(16)}`;\n      }\n\n      const OverlayDataTag = `${groupStr}3000`;\n\n      if (instance[OverlayDataTag] && instance[OverlayDataTag].InlineBinary) {\n        const inlineBinaryData = atob(instance[OverlayDataTag].InlineBinary);\n        const arraybuffer = str2ab(inlineBinaryData);\n\n        instance[OverlayDataTag] = unpackOverlay(arraybuffer);\n      } else if (\n        instance[OverlayDataTag] &&\n        instance[OverlayDataTag].BulkDataURI\n      ) {\n        OverlayDataPromises.push(\n          _getOverlayData(instance[OverlayDataTag], server)\n        );\n        OverlayDataTags.push(OverlayDataTag);\n      } else if (\n        instance[OverlayDataTag] &&\n        instance[OverlayDataTag] instanceof ArrayBuffer\n      ) {\n        instance[OverlayDataTag] = unpackOverlay(instance[OverlayDataTag]);\n      }\n    }\n\n    if (OverlayDataPromises.length) {\n      Promise.all(OverlayDataPromises).then(results => {\n        for (let i = 0; i < results.length; i++) {\n          instance[OverlayDataTags[i]] = results[i];\n        }\n\n        resolve();\n      });\n    } else {\n      resolve();\n    }\n  });\n}\n\nasync function _getOverlayData(tag, server) {\n  const { BulkDataURI } = tag;\n\n  let uri = BulkDataURI;\n\n  // TODO: Workaround for dcm4chee behind SSL-terminating proxy returning\n  // incorrect bulk data URIs\n  if (server.wadoRoot.indexOf('https') === 0 && !uri.includes('https')) {\n    uri = uri.replace('http', 'https');\n  }\n\n  const config = {\n    url: server.wadoRoot, //BulkDataURI is absolute, so this isn't used\n    headers: DICOMWeb.getAuthorizationHeader(server),\n    errorInterceptor: errorHandler.getHTTPErrorHandler(),\n  };\n  const dicomWeb = new api.DICOMwebClient(config);\n  const options = {\n    BulkDataURI: uri,\n  };\n\n  return dicomWeb\n    .retrieveBulkData(options)\n    .then(result => result[0])\n    .then(unpackOverlay);\n}\n","import dcmjs from 'dcmjs';\nimport queryString from 'query-string';\nimport dicomParser from 'dicom-parser';\nimport getPixelSpacingInformation from '../utils/metadataProvider/getPixelSpacingInformation';\nimport fetchPaletteColorLookupTableData from '../utils/metadataProvider/fetchPaletteColorLookupTableData';\nimport fetchOverlayData from '../utils/metadataProvider/fetchOverlayData';\n\nclass MetadataProvider {\n  constructor() {\n    // Define the main \"metadataLookup\" private property as an immutable property.\n    Object.defineProperty(this, 'studies', {\n      configurable: false,\n      enumerable: false,\n      writable: false,\n      value: new Map(),\n    });\n    Object.defineProperty(this, 'imageIdToUIDs', {\n      configurable: false,\n      enumerable: false,\n      writable: false,\n      value: new Map(),\n    });\n  }\n\n  async addInstance(dicomJSONDatasetOrP10ArrayBuffer, options = {}) {\n    let dicomJSONDataset;\n\n    // If Arraybuffer, parse to DICOMJSON before naturalizing.\n    if (dicomJSONDatasetOrP10ArrayBuffer instanceof ArrayBuffer) {\n      const dicomData = DicomMessage.readFile(dicomJSONDatasetOrP10ArrayBuffer);\n\n      dicomJSONDataset = dicomData.dict;\n    } else {\n      dicomJSONDataset = dicomJSONDatasetOrP10ArrayBuffer;\n    }\n\n    // Check if dataset is already naturalized.\n\n    let naturalizedDataset;\n\n    if (dicomJSONDataset['SeriesInstanceUID'] === undefined) {\n      naturalizedDataset = dcmjs.data.DicomMetaDictionary.naturalizeDataset(\n        dicomJSONDataset\n      );\n    } else {\n      naturalizedDataset = dicomJSONDataset;\n    }\n\n    const {\n      StudyInstanceUID,\n      SeriesInstanceUID,\n      SOPInstanceUID,\n    } = naturalizedDataset;\n\n    const study = this._getAndCacheStudy(StudyInstanceUID);\n    const series = this._getAndCacheSeriesFromStudy(study, SeriesInstanceUID);\n    const instance = this._getAndCacheInstanceFromStudy(series, SOPInstanceUID);\n\n    Object.assign(instance, naturalizedDataset);\n\n    await this._checkBulkDataAndInlineBinaries(instance, options.server);\n\n    return instance;\n  }\n\n  addImageIdToUIDs(imageId, uids) {\n    // This method is a fallback for when you don't have WADO-URI or WADO-RS.\n    // You can add instances fetched by any method by calling addInstance, and hook an imageId to point at it here.\n    // An example would be dicom hosted at some random site.\n\n    this.imageIdToUIDs.set(imageId, uids);\n  }\n\n  _getAndCacheStudy(StudyInstanceUID) {\n    const studies = this.studies;\n\n    let study = studies.get(StudyInstanceUID);\n\n    if (!study) {\n      study = { series: new Map() };\n      studies.set(StudyInstanceUID, study);\n    }\n\n    return study;\n  }\n  _getAndCacheSeriesFromStudy(study, SeriesInstanceUID) {\n    let series = study.series.get(SeriesInstanceUID);\n\n    if (!series) {\n      series = { instances: new Map() };\n      study.series.set(SeriesInstanceUID, series);\n    }\n\n    return series;\n  }\n\n  _getAndCacheInstanceFromStudy(series, SOPInstanceUID) {\n    let instance = series.instances.get(SOPInstanceUID);\n\n    if (!instance) {\n      instance = {};\n      series.instances.set(SOPInstanceUID, instance);\n    }\n\n    return instance;\n  }\n\n  async _checkBulkDataAndInlineBinaries(instance, server) {\n    await fetchOverlayData(instance, server);\n\n    if (instance.PhotometricInterpretation === 'PALETTE COLOR') {\n      await fetchPaletteColorLookupTableData(instance, server);\n    }\n  }\n\n  _getInstance(imageId) {\n    const uids = this._getUIDsFromImageID(imageId);\n\n    if (!uids) {\n      return;\n    }\n\n    const { StudyInstanceUID, SeriesInstanceUID, SOPInstanceUID } = uids;\n\n    return this._getInstanceData(\n      StudyInstanceUID,\n      SeriesInstanceUID,\n      SOPInstanceUID\n    );\n  }\n\n  get(query, imageId, options = { fallback: false }) {\n    const instance = this._getInstance(imageId);\n\n    if (query === INSTANCE) {\n      return instance;\n    }\n\n    return this.getTagFromInstance(query, instance, options);\n  }\n\n  getTag(query, imageId, options) {\n    return this.get(query, imageId, options);\n  }\n\n  getInstance(imageId) {\n    return this.get(INSTANCE, imageId);\n  }\n\n  getTagFromInstance(\n    naturalizedTagOrWADOImageLoaderTag,\n    instance,\n    options = { fallback: false }\n  ) {\n    if (!instance) {\n      return;\n    }\n\n    // If its a naturalized dcmjs tag present on the instance, return.\n    if (instance[naturalizedTagOrWADOImageLoaderTag]) {\n      return instance[naturalizedTagOrWADOImageLoaderTag];\n    }\n\n    // Maybe its a legacy CornerstoneWADOImageLoader tag then:\n    return this._getCornerstoneWADOImageLoaderTag(\n      naturalizedTagOrWADOImageLoaderTag,\n      instance\n    );\n  }\n\n  _getCornerstoneWADOImageLoaderTag(wadoImageLoaderTag, instance) {\n    let metadata;\n\n    switch (wadoImageLoaderTag) {\n      case WADO_IMAGE_LOADER_TAGS.GENERAL_SERIES_MODULE:\n        const { SeriesDate, SeriesTime } = instance;\n\n        let seriesDate;\n        let seriesTime;\n\n        if (SeriesDate) {\n          seriesDate = dicomParser.parseDA(SeriesDate);\n        }\n\n        if (SeriesTime) {\n          seriesTime = dicomParser.parseTM(SeriesTime);\n        }\n\n        metadata = {\n          modality: instance.Modality,\n          seriesInstanceUID: instance.SeriesInstanceUID,\n          seriesNumber: instance.SeriesNumber,\n          studyInstanceUID: instance.StudyInstanceUID,\n          seriesDate,\n          seriesTime,\n        };\n        break;\n      case WADO_IMAGE_LOADER_TAGS.PATIENT_STUDY_MODULE:\n        metadata = {\n          patientAge: instance.PatientAge,\n          patientSize: instance.PatientSize,\n          patientWeight: instance.PatientWeight,\n        };\n        break;\n      case WADO_IMAGE_LOADER_TAGS.IMAGE_PLANE_MODULE:\n        const { ImageOrientationPatient } = instance;\n\n        // Fallback for DX images.\n        // TODO: We should use the rest of the results of this function\n        // to update the UI somehow\n        const { PixelSpacing } = getPixelSpacingInformation(instance);\n\n        let rowPixelSpacing;\n        let columnPixelSpacing;\n\n        let rowCosines;\n        let columnCosines;\n\n        if (PixelSpacing) {\n          rowPixelSpacing = PixelSpacing[0];\n          columnPixelSpacing = PixelSpacing[1];\n        }\n\n        if (ImageOrientationPatient) {\n          rowCosines = ImageOrientationPatient.slice(0, 3);\n          columnCosines = ImageOrientationPatient.slice(3, 6);\n        }\n\n        metadata = {\n          frameOfReferenceUID: instance.FrameOfReferenceUID,\n          rows: instance.Rows,\n          columns: instance.Columns,\n          imageOrientationPatient: ImageOrientationPatient,\n          rowCosines,\n          columnCosines,\n          imagePositionPatient: instance.ImagePositionPatient,\n          sliceThickness: instance.SliceThickness,\n          sliceLocation: instance.SliceLocation,\n          pixelSpacing: PixelSpacing,\n          rowPixelSpacing,\n          columnPixelSpacing,\n        };\n        break;\n      case WADO_IMAGE_LOADER_TAGS.IMAGE_PIXEL_MODULE:\n        metadata = {\n          samplesPerPixel: instance.SamplesPerPixel,\n          photometricInterpretation: instance.PhotometricInterpretation,\n          rows: instance.Rows,\n          columns: instance.Columns,\n          bitsAllocated: instance.BitsAllocated,\n          bitsStored: instance.BitsStored,\n          highBit: instance.HighBit,\n          pixelRepresentation: instance.PixelRepresentation,\n          planarConfiguration: instance.PlanarConfiguration,\n          pixelAspectRatio: instance.PixelAspectRatio,\n          smallestPixelValue: instance.SmallestPixelValue,\n          largestPixelValue: instance.LargestPixelValue,\n          redPaletteColorLookupTableDescriptor:\n            instance.RedPaletteColorLookupTableDescriptor,\n          greenPaletteColorLookupTableDescriptor:\n            instance.GreenPaletteColorLookupTableDescriptor,\n          bluePaletteColorLookupTableDescriptor:\n            instance.BluePaletteColorLookupTableDescriptor,\n          redPaletteColorLookupTableData:\n            instance.RedPaletteColorLookupTableData,\n          greenPaletteColorLookupTableData:\n            instance.GreenPaletteColorLookupTableData,\n          bluePaletteColorLookupTableData:\n            instance.BluePaletteColorLookupTableData,\n        };\n\n        break;\n      case WADO_IMAGE_LOADER_TAGS.VOI_LUT_MODULE:\n        const { WindowCenter, WindowWidth } = instance;\n\n        const windowCenter = Array.isArray(WindowCenter)\n          ? WindowCenter\n          : [WindowCenter];\n        const windowWidth = Array.isArray(WindowWidth)\n          ? WindowWidth\n          : [WindowWidth];\n\n        metadata = {\n          windowCenter,\n          windowWidth,\n        };\n\n        break;\n      case WADO_IMAGE_LOADER_TAGS.MODALITY_LUT_MODULE:\n        metadata = {\n          rescaleIntercept: instance.RescaleIntercept,\n          rescaleSlope: instance.RescaleSlope,\n          rescaleType: instance.RescaleType,\n        };\n        break;\n      case WADO_IMAGE_LOADER_TAGS.SOP_COMMON_MODULE:\n        metadata = {\n          sopClassUID: instance.SOPClassUID,\n          sopInstanceUID: instance.SOPInstanceUID,\n        };\n        break;\n      case WADO_IMAGE_LOADER_TAGS.PET_ISOTOPE_MODULE:\n        const { RadiopharmaceuticalInformationSequence } = instance;\n\n        if (RadiopharmaceuticalInformationSequence) {\n          const RadiopharmaceuticalInformation = Array.isArray(\n            RadiopharmaceuticalInformationSequence\n          )\n            ? RadiopharmaceuticalInformationSequence[0]\n            : RadiopharmaceuticalInformationSequence;\n\n          const {\n            RadiopharmaceuticalStartTime,\n            RadionuclideTotalDose,\n            RadionuclideHalfLife,\n          } = RadiopharmaceuticalInformation;\n\n          const radiopharmaceuticalInfo = {\n            radiopharmaceuticalStartTime: dicomParser.parseTM(\n              RadiopharmaceuticalStartTime\n            ),\n            radionuclideTotalDose: RadionuclideTotalDose,\n            radionuclideHalfLife: RadionuclideHalfLife,\n          };\n          metadata = {\n            radiopharmaceuticalInfo,\n          };\n        }\n\n        break;\n      case WADO_IMAGE_LOADER_TAGS.OVERLAY_PLANE_MODULE:\n        const overlays = [];\n\n        for (\n          let overlayGroup = 0x00;\n          overlayGroup <= 0x1e;\n          overlayGroup += 0x02\n        ) {\n          let groupStr = `60${overlayGroup.toString(16)}`;\n\n          if (groupStr.length === 3) {\n            groupStr = `600${overlayGroup.toString(16)}`;\n          }\n\n          const OverlayDataTag = `${groupStr}3000`;\n          const OverlayData = instance[OverlayDataTag];\n\n          if (!OverlayData) {\n            continue;\n          }\n\n          const OverlayRowsTag = `${groupStr}0010`;\n          const OverlayColumnsTag = `${groupStr}0011`;\n          const OverlayType = `${groupStr}0040`;\n          const OverlayOriginTag = `${groupStr}0050`;\n          const OverlayDescriptionTag = `${groupStr}0022`;\n          const OverlayLabelTag = `${groupStr}1500`;\n          const ROIAreaTag = `${groupStr}1301`;\n          const ROIMeanTag = `${groupStr}1302`;\n          const ROIStandardDeviationTag = `${groupStr}1303`;\n          const OverlayOrigin = instance[OverlayOriginTag];\n\n          const overlay = {\n            rows: instance[OverlayRowsTag],\n            columns: instance[OverlayColumnsTag],\n            type: instance[OverlayType],\n            x: OverlayOrigin[0],\n            y: OverlayOrigin[1],\n            pixelData: OverlayData,\n            description: instance[OverlayDescriptionTag],\n            label: instance[OverlayLabelTag],\n            roiArea: instance[ROIAreaTag],\n            roiMean: instance[ROIMeanTag],\n            roiStandardDeviation: instance[ROIStandardDeviationTag],\n          };\n\n          overlays.push(overlay);\n        }\n\n        metadata = {\n          overlays,\n        };\n\n        break;\n\n      case WADO_IMAGE_LOADER_TAGS.PATIENT_MODULE:\n        const { PatientName } = instance;\n\n        let patientName;\n        if (PatientName) {\n          patientName = PatientName.Alphabetic;\n        }\n\n        metadata = {\n          patientName,\n          patientId: instance.PatientID,\n        };\n\n        break;\n\n      case WADO_IMAGE_LOADER_TAGS.GENERAL_IMAGE_MODULE:\n        metadata = {\n          sopInstanceUid: instance.SOPInstanceUID,\n          instanceNumber: instance.InstanceNumber,\n          lossyImageCompression: instance.LossyImageCompression,\n          lossyImageCompressionRatio: instance.LossyImageCompressionRatio,\n          lossyImageCompressionMethod: instance.LossyImageCompressionMethod,\n        };\n\n        break;\n      case WADO_IMAGE_LOADER_TAGS.GENERAL_STUDY_MODULE:\n        metadata = {\n          studyDescription: instance.StudyDescription,\n          studyDate: instance.StudyDate,\n          studyTime: instance.StudyTime,\n          accessionNumber: instance.AccessionNumber,\n        };\n\n        break;\n      case WADO_IMAGE_LOADER_TAGS.CINE_MODULE:\n        metadata = {\n          frameTime: instance.FrameTime,\n        };\n\n        break;\n    }\n\n    return metadata;\n  }\n\n  _getInstanceData(StudyInstanceUID, SeriesInstanceUID, SOPInstanceUID) {\n    const study = this.studies.get(StudyInstanceUID);\n\n    if (!study) {\n      return;\n    }\n\n    const series = study.series.get(SeriesInstanceUID);\n\n    if (!series) {\n      return;\n    }\n\n    const instance = series.instances.get(SOPInstanceUID);\n\n    return instance;\n  }\n\n  _getUIDsFromImageID(imageId) {\n    if (imageId.includes('wadors:')) {\n      const strippedImageId = imageId.split('studies/')[1];\n      const splitImageId = strippedImageId.split('/');\n\n      return {\n        StudyInstanceUID: splitImageId[0], // Note: splitImageId[1] === 'series'\n        SeriesInstanceUID: splitImageId[2], // Note: splitImageId[3] === 'instances'\n        SOPInstanceUID: splitImageId[4],\n      };\n    }\n    if (imageId.includes('wado?requestType=WADO')) {\n      const qs = queryString.parse(imageId);\n\n      return {\n        StudyInstanceUID: qs.studyUID,\n        SeriesInstanceUID: qs.seriesUID,\n        SOPInstanceUID: qs.objectUID,\n      };\n    } else {\n      // Maybe its a non-standard imageId\n      return this.imageIdToUIDs.get(imageId);\n    }\n  }\n}\n\nconst metadataProvider = new MetadataProvider();\n\nexport default metadataProvider;\n\nconst WADO_IMAGE_LOADER_TAGS = {\n  // CornerstoneWADOImageLoader specific\n  GENERAL_SERIES_MODULE: 'generalSeriesModule',\n  PATIENT_STUDY_MODULE: 'patientStudyModule',\n  IMAGE_PLANE_MODULE: 'imagePlaneModule',\n  IMAGE_PIXEL_MODULE: 'imagePixelModule',\n  VOI_LUT_MODULE: 'voiLutModule',\n  MODALITY_LUT_MODULE: 'modalityLutModule',\n  SOP_COMMON_MODULE: 'sopCommonModule',\n  PET_ISOTOPE_MODULE: 'petIsotopeModule',\n  OVERLAY_PLANE_MODULE: 'overlayPlaneModule',\n\n  // react-cornerstone-viewport specifc\n  PATIENT_MODULE: 'patientModule',\n  GENERAL_IMAGE_MODULE: 'generalImageModule',\n  GENERAL_STUDY_MODULE: 'generalStudyModule',\n  CINE_MODULE: 'cineModule',\n};\n\nconst INSTANCE = 'instance';\n","import log from '../../log';\n\nexport default function getPixelSpacingInformation(instance) {\n  // See http://gdcm.sourceforge.net/wiki/index.php/Imager_Pixel_Spacing\n\n  // TODO: Add Ultrasound region spacing\n  // TODO: Add manual calibration\n\n  // TODO: Use ENUMS from dcmjs\n  const projectionRadiographSOPClassUIDs = [\n    '1.2.840.10008.5.1.4.1.1.1', //\tCR Image Storage\n    '1.2.840.10008.5.1.4.1.1.1.1', //\tDigital X-Ray Image Storage  for Presentation\n    '1.2.840.10008.5.1.4.1.1.1.1.1', //\tDigital X-Ray Image Storage  for Processing\n    '1.2.840.10008.5.1.4.1.1.1.2', //\tDigital Mammography X-Ray Image Storage  for Presentation\n    '1.2.840.10008.5.1.4.1.1.1.2.1', //\tDigital Mammography X-Ray Image Storage  for Processing\n    '1.2.840.10008.5.1.4.1.1.1.3', //\tDigital Intra  oral X-Ray Image Storage  for Presentation\n    '1.2.840.10008.5.1.4.1.1.1.3.1', //\tDigital Intra  oral X-Ray Image Storage  for Processing\n    '1.2.840.10008.5.1.4.1.1.12.1', //\tX-Ray Angiographic Image Storage\n    '1.2.840.10008.5.1.4.1.1.12.1.1', //\tEnhanced XA Image Storage\n    '1.2.840.10008.5.1.4.1.1.12.2', //\tX-Ray Radiofluoroscopic Image Storage\n    '1.2.840.10008.5.1.4.1.1.12.2.1', //\tEnhanced XRF Image Storage\n    '1.2.840.10008.5.1.4.1.1.12.3', // X-Ray Angiographic Bi-plane Image Storage\tRetired\n  ];\n\n  const {\n    PixelSpacing,\n    ImagerPixelSpacing,\n    SOPClassUID,\n    PixelSpacingCalibrationType,\n    PixelSpacingCalibrationDescription,\n    EstimatedRadiographicMagnificationFactor,\n    SequenceOfUltrasoundRegions,\n  } = instance;\n  const isProjection = projectionRadiographSOPClassUIDs.includes(SOPClassUID);\n\n  const TYPES = {\n    NOT_APPLICABLE: 'NOT_APPLICABLE',\n    UNKNOWN: 'UNKNOWN',\n    CALIBRATED: 'CALIBRATED',\n    DETECTOR: 'DETECTOR',\n  };\n\n  if (isProjection && !ImagerPixelSpacing) {\n    // If only Pixel Spacing is present, and this is a projection radiograph,\n    // PixelSpacing should be used, but the user should be informed that\n    // what it means is unknown\n    return {\n      PixelSpacing,\n      type: TYPES.UNKNOWN,\n      isProjection,\n    };\n  } else if (\n    PixelSpacing &&\n    ImagerPixelSpacing &&\n    PixelSpacing === ImagerPixelSpacing\n  ) {\n    // If Imager Pixel Spacing and Pixel Spacing are present and they have the same values,\n    // then the user should be informed that the measurements are at the detector plane\n    return {\n      PixelSpacing,\n      type: TYPES.DETECTOR,\n      isProjection,\n    };\n  } else if (\n    PixelSpacing &&\n    ImagerPixelSpacing &&\n    PixelSpacing !== ImagerPixelSpacing\n  ) {\n    // If Imager Pixel Spacing and Pixel Spacing are present and they have different values,\n    // then the user should be informed that these are \"calibrated\"\n    // (in some unknown manner if Pixel Spacing Calibration Type and/or\n    // Pixel Spacing Calibration Description are absent)\n    return {\n      PixelSpacing,\n      type: TYPES.CALIBRATED,\n      isProjection,\n      PixelSpacingCalibrationType,\n      PixelSpacingCalibrationDescription,\n    };\n  } else if (!PixelSpacing && ImagerPixelSpacing) {\n    let CorrectedImagerPixelSpacing = ImagerPixelSpacing;\n    if (EstimatedRadiographicMagnificationFactor) {\n      // Note that in IHE Mammo profile compliant displays, the value of Imager Pixel Spacing is required to be corrected by\n      // Estimated Radiographic Magnification Factor and the user informed of that.\n      // TODO: should this correction be done before all of this logic?\n      CorrectedImagerPixelSpacing = ImagerPixelSpacing.map(\n        pixelSpacing => pixelSpacing / EstimatedRadiographicMagnificationFactor\n      );\n    } else {\n      log.info(\n        'EstimatedRadiographicMagnificationFactor was not present. Unable to correct ImagerPixelSpacing.'\n      );\n    }\n\n    return {\n      PixelSpacing: CorrectedImagerPixelSpacing,\n      isProjection,\n    };\n  } else if (\n    SequenceOfUltrasoundRegions &&\n    typeof SequenceOfUltrasoundRegions === 'object'\n  ) {\n    const { PhysicalDeltaX, PhysicalDeltaY } = SequenceOfUltrasoundRegions;\n    const USPixelSpacing = [PhysicalDeltaX * 10, PhysicalDeltaY * 10];\n\n    return {\n      PixelSpacing: USPixelSpacing,\n    };\n  } else if (\n    SequenceOfUltrasoundRegions &&\n    Array.isArray(SequenceOfUltrasoundRegions) &&\n    SequenceOfUltrasoundRegions.length > 1\n  ) {\n    log.warn(\n      'Sequence of Ultrasound Regions > one entry. This is not yet implemented, all measurements will be shown in pixels.'\n    );\n  } else if (isProjection === false && !ImagerPixelSpacing) {\n    // If only Pixel Spacing is present, and this is not a projection radiograph,\n    // we can stop here\n    return {\n      PixelSpacing,\n      type: TYPES.NOT_APPLICABLE,\n      isProjection,\n    };\n  }\n\n    log.info(\n    'Unknown combination of PixelSpacing and ImagerPixelSpacing identified. Unable to determine spacing.'\n  );\n}\n","import OHIFError from '../classes/OHIFError.js';\nimport getImageId from './getImageId';\nimport metadataProvider from '../classes/MetadataProvider.js';\n\nlet stackMap = {};\nlet configuration = {};\nconst stackUpdatedCallbacks = [];\n\n/**\n * Loop through the current series and add metadata to the\n * Cornerstone meta data provider. This will be used to fill information\n * into the viewport overlays, and to calculate reference lines and orientation markers\n * @param  {Object} stackMap              stackMap object\n * @param  {Object} study                 Study object\n * @param  {Object} displaySet            The set of images to make the stack from\n * @return {Array}                        Array with image IDs\n */\nfunction createAndAddStack(stackMap, study, displaySet, stackUpdatedCallbacks) {\n  const images = displaySet.images;\n  if (!images) {\n    return;\n  }\n\n  const numImages = images.length;\n  const imageIds = [];\n  let imageId;\n\n  displaySet.images.forEach((instance, imageIndex) => {\n    const image = instance.getData();\n    const metaData = {\n      instance: image, // in this context, instance will be the data of the InstanceMetadata object...\n      series: displaySet, // TODO: Check this\n      study,\n      numImages,\n      imageIndex: imageIndex + 1,\n    };\n\n    const naturalizedInstance = instance.getData().metadata;\n    const NumberOfFrames = naturalizedInstance.NumberOfFrames;\n\n    if (NumberOfFrames > 1) {\n      for (let i = 0; i < NumberOfFrames; i++) {\n        metaData.frameNumber = i;\n        imageId = getImageId(image, i);\n        imageIds.push(imageId);\n\n        const {\n          StudyInstanceUID,\n          SeriesInstanceUID,\n          SOPInstanceUID,\n        } = instance.getData().metadata;\n\n        metadataProvider.addImageIdToUIDs(imageId, {\n          StudyInstanceUID,\n          SeriesInstanceUID,\n          SOPInstanceUID,\n        });\n      }\n    } else {\n      metaData.frameNumber = 1;\n      imageId = getImageId(image);\n      imageIds.push(imageId);\n\n      const {\n        StudyInstanceUID,\n        SeriesInstanceUID,\n        SOPInstanceUID,\n      } = naturalizedInstance;\n\n      metadataProvider.addImageIdToUIDs(imageId, {\n        StudyInstanceUID,\n        SeriesInstanceUID,\n        SOPInstanceUID,\n      });\n    }\n  });\n\n  const stack = {\n    StudyInstanceUID: study.StudyInstanceUID,\n    displaySetInstanceUID: displaySet.displaySetInstanceUID,\n    imageIds,\n    frameRate: displaySet.frameRate,\n    isClip: displaySet.isClip,\n  };\n\n  stackMap[displaySet.displaySetInstanceUID] = stack;\n\n  return stack;\n}\n\nconfiguration = {\n  createAndAddStack,\n};\n\n/**\n * This object contains all the functions needed for interacting with the stack manager.\n * Generally, findStack is the only function used. If you want to know when new stacks\n * come in, you can register a callback with addStackUpdatedCallback.\n */\nconst StackManager = {\n  /**\n   * Removes all current stacks\n   */\n  clearStacks() {\n    stackMap = {};\n  },\n  /**\n   * Create a stack from an image set, as well as add in the metadata on a per image bases.\n   * @param study The study who's metadata will be added\n   * @param displaySet The set of images to make the stack from\n   * @return {Array} Array with image IDs\n   */\n  makeAndAddStack(study, displaySet) {\n    return configuration.createAndAddStack(\n      stackMap,\n      study,\n      displaySet,\n      stackUpdatedCallbacks\n    );\n  },\n  /**\n   * Find a stack from the currently created stacks.\n   * @param displaySetInstanceUID The UID of the stack to find.\n   * @returns {*} undefined if not found, otherwise the stack object is returned.\n   */\n  findStack(displaySetInstanceUID) {\n    return stackMap[displaySetInstanceUID];\n  },\n  /**\n   * Find a stack or reate one if it has not been created yet\n   * @param study The study who's metadata will be added\n   * @param displaySet The set of images to make the stack from\n   * @return {Array} Array with image IDs\n   */\n  findOrCreateStack(study, displaySet) {\n    let stack = this.findStack(displaySet.displaySetInstanceUID);\n\n    if (!stack || !stack.imageIds) {\n      stack = this.makeAndAddStack(study, displaySet);\n    }\n\n    return stack;\n  },\n  /**\n   * Gets the underlying map of displaySetInstanceUID to stack object.\n   * WARNING: Do not change this object. It directly affects the manager.\n   * @returns {{}} map of displaySetInstanceUID -> stack.\n   */\n  getAllStacks() {\n    return stackMap;\n  },\n  /**\n   * Adds in a callback to be called on a stack being added / updated.\n   * @param callback must accept at minimum one argument,\n   * which is the stack that was added / updated.\n   */\n  addStackUpdatedCallback(callback) {\n    if (typeof callback !== 'function') {\n      throw new OHIFError('callback must be provided as a function');\n    }\n    stackUpdatedCallbacks.push(callback);\n  },\n  /**\n   * Return configuration\n   */\n  getConfiguration() {\n    return configuration;\n  },\n  /**\n   * Set configuration, in order to provide compatibility\n   * with other systems by overriding this functions\n   * @param {Object} config object with functions to be overrided\n   *\n   * For now, only makeAndAddStack can be overrided\n   */\n  setConfiguration(config) {\n    configuration = config;\n  },\n};\n\nexport { StackManager };\nexport default StackManager;\n","import cornerstone from 'cornerstone-core';\nimport cornerstoneWADOImageLoader from 'cornerstone-wado-image-loader';\nimport {\n  clearStudyLoadingProgress,\n  setStudyLoadingProgress,\n} from '../redux/actions';\nimport StackManager from '../utils/StackManager';\n\nclass BaseLoadingListener {\n  constructor(stack, options = {}) {\n    this.id = BaseLoadingListener.getNewId();\n    this.stack = stack;\n    this.startListening();\n    this.statsItemsLimit = options.statsItemsLimit || 2;\n    this.stats = {\n      items: [],\n      total: 0,\n      elapsedTime: 0,\n      speed: 0,\n    };\n\n    this._setProgressData = options._setProgressData;\n    this._clearProgressById = options._clearProgressById;\n\n    // Register the start point to make it possible to calculate\n    // bytes/s or frames/s when the first byte or frame is received\n    this._addStatsData(0);\n\n    // Update the progress before starting the download\n    // to make it possible to update the UI\n    this._updateProgress();\n  }\n\n  _addStatsData(value) {\n    const date = new Date();\n    const stats = this.stats;\n    const items = stats.items;\n    const newItem = {\n      value,\n      date,\n    };\n\n    items.push(newItem);\n    stats.total += newItem.value;\n\n    // Remove items until it gets below the limit\n    while (items.length > this.statsItemsLimit) {\n      const item = items.shift();\n      stats.total -= item.value;\n    }\n\n    // Update the elapsedTime (seconds) based on first and last\n    // elements and recalculate the speed (bytes/s or frames/s)\n    if (items.length > 1) {\n      const oldestItem = items[0];\n      stats.elapsedTime =\n        (newItem.date.getTime() - oldestItem.date.getTime()) / 1000;\n      stats.speed = (stats.total - oldestItem.value) / stats.elapsedTime;\n    }\n  }\n\n  _getProgressId() {\n    const displaySetInstanceUID = this.stack.displaySetInstanceUID;\n    return 'StackProgress:' + displaySetInstanceUID;\n  }\n\n  _clearProgress() {\n    const progressId = this._getProgressId();\n    this._clearProgressById(progressId);\n  }\n\n  startListening() {\n    throw new Error('`startListening` must be implemented by child classes');\n  }\n\n  stopListening() {\n    throw new Error('`stopListening` must be implemented by child classes');\n  }\n\n  destroy() {\n    this.stopListening();\n    this._clearProgress();\n  }\n\n  static getNewId() {\n    const timeSlice = new Date()\n      .getTime()\n      .toString()\n      .slice(-8);\n    const randomNumber = parseInt(Math.random() * 1000000000);\n\n    return timeSlice.toString() + randomNumber.toString();\n  }\n}\n\nclass DICOMFileLoadingListener extends BaseLoadingListener {\n  constructor(stack, options) {\n    super(stack, options);\n    this._dataSetUrl = this._getDataSetUrl(stack);\n    this._lastLoaded = 0;\n\n    // Check how many instances has already been download (cached)\n    this._checkCachedData();\n  }\n\n  _checkCachedData() {\n    const dataSet = cornerstoneWADOImageLoader.wadouri.dataSetCacheManager.get(\n      this._dataSetUrl\n    );\n\n    if (dataSet) {\n      const dataSetLength = dataSet.byteArray.length;\n\n      this._updateProgress({\n        percentComplete: 100,\n        loaded: dataSetLength,\n        total: dataSetLength,\n      });\n    }\n  }\n\n  _getImageLoadProgressEventName() {\n    // TODO: Add this event as a constant in Cornerstone\n    return 'cornerstoneimageloadprogress.' + this.id;\n  }\n\n  startListening() {\n    const imageLoadProgressEventName = this._getImageLoadProgressEventName();\n\n    this.imageLoadProgressEventHandler = this._imageLoadProgressEventHandle.bind(\n      this\n    );\n\n    this.stopListening();\n\n    cornerstone.events.addEventListener(\n      imageLoadProgressEventName,\n      this.imageLoadProgressEventHandle\n    );\n  }\n\n  stopListening() {\n    const imageLoadProgressEventName = this._getImageLoadProgressEventName();\n    cornerstone.events.removeEventListener(\n      imageLoadProgressEventName,\n      this.imageLoadProgressEventHandle\n    );\n  }\n\n  _imageLoadProgressEventHandler = e => {\n    const eventData = e.detail;\n    const dataSetUrl = this._convertImageIdToDataSetUrl(eventData.imageId);\n    const bytesDiff = eventData.loaded - this._lastLoaded;\n\n    if (!this._dataSetUrl === dataSetUrl) {\n      return;\n    }\n\n    // Add the bytes downloaded to the stats\n    this._addStatsData(bytesDiff);\n\n    // Update the download progress\n    this._updateProgress(eventData);\n\n    // Cache the last eventData.loaded value\n    this._lastLoaded = eventData.loaded;\n  };\n\n  _updateProgress(eventData) {\n    const progressId = this._getProgressId();\n    eventData = eventData || {};\n\n    const progressData = {\n      multiFrame: false,\n      percentComplete: eventData.percentComplete,\n      bytesLoaded: eventData.loaded,\n      bytesTotal: eventData.total,\n      bytesPerSecond: this.stats.speed,\n    };\n\n    this._setProgressData(progressId, progressData);\n  }\n\n  _convertImageIdToDataSetUrl(imageId) {\n    // Remove the prefix (\"dicomweb:\" or \"wadouri:\"\")\n    imageId = imageId.replace(/^(dicomweb:|wadouri:)/i, '');\n\n    // Remove \"frame=999&\" from the imageId\n    imageId = imageId.replace(/frame=\\d+&?/i, '');\n\n    // Remove the last \"&\" like in \"http://...?foo=1&bar=2&\"\n    imageId = imageId.replace(/&$/, '');\n\n    return imageId;\n  }\n\n  _getDataSetUrl(stack) {\n    const imageId = stack.imageIds[0];\n    return this._convertImageIdToDataSetUrl(imageId);\n  }\n}\n\nclass StackLoadingListener extends BaseLoadingListener {\n  constructor(stack, options = {}) {\n    options.statsItemsLimit = 20;\n    super(stack, options);\n\n    this.imageDataMap = this._convertImageIdsArrayToMap(stack.imageIds);\n    this.framesStatus = this._createArray(stack.imageIds.length, false);\n    this.loadedCount = 0;\n\n    // Check how many instances has already been download (cached)\n    this._checkCachedData();\n  }\n\n  _convertImageIdsArrayToMap(imageIds) {\n    const imageIdsMap = new Map();\n\n    for (let i = 0; i < imageIds.length; i++) {\n      imageIdsMap.set(imageIds[i], {\n        index: i,\n        loaded: false,\n      });\n    }\n\n    return imageIdsMap;\n  }\n\n  _createArray(length, defaultValue) {\n    // `new Array(length)` is an anti-pattern in javascript because its\n    // funny API. Otherwise I would go for `new Array(length).fill(false)`\n    const array = [];\n\n    for (let i = 0; i < length; i++) {\n      array[i] = defaultValue;\n    }\n\n    return array;\n  }\n\n  _checkCachedData() {\n    // const imageIds = this.stack.imageIds;\n    // TODO: No way to check status of Promise.\n    /*for(let i = 0; i < imageIds.length; i++) {\n            const imageId = imageIds[i];\n\n            const imagePromise = cornerstone.imageCache.getImageLoadObject(imageId).promise;\n\n            if (imagePromise && (imagePromise.state() === 'resolved')) {\n                this._updateFrameStatus(imageId, true);\n            }\n        }*/\n  }\n\n  _getImageLoadedEventName() {\n    return `${cornerstone.EVENTS.IMAGE_LOADED}.${this.id}`;\n  }\n\n  _getImageCachePromiseRemoveEventName() {\n    return `${cornerstone.EVENTS.IMAGE_CACHE_PROMISE_REMOVED}.${this.id}`;\n  }\n\n  _imageLoadedEventHandler(e) {\n    this._updateFrameStatus(e.detail.image.imageId, true);\n  }\n\n  _imageCachePromiseRemovedEventHandler(e) {\n    this._updateFrameStatus(e.detail.imageId, false);\n  }\n\n  startListening() {\n    const imageLoadedEventName = this._getImageLoadedEventName();\n    const imageCachePromiseRemovedEventName = this._getImageCachePromiseRemoveEventName();\n\n    this.imageLoadedEventHandler = this._imageLoadedEventHandler.bind(this);\n    this.imageCachePromiseRemovedEventHandler = this._imageCachePromiseRemovedEventHandler.bind(\n      this\n    );\n\n    this.stopListening();\n\n    cornerstone.events.addEventListener(\n      imageLoadedEventName,\n      this.imageLoadedEventHandler\n    );\n    cornerstone.events.addEventListener(\n      imageCachePromiseRemovedEventName,\n      this.imageCachePromiseRemovedEventHandler\n    );\n  }\n\n  stopListening() {\n    const imageLoadedEventName = this._getImageLoadedEventName();\n    const imageCachePromiseRemovedEventName = this._getImageCachePromiseRemoveEventName();\n\n    cornerstone.events.removeEventListener(\n      imageLoadedEventName,\n      this.imageLoadedEventHandler\n    );\n    cornerstone.events.removeEventListener(\n      imageCachePromiseRemovedEventName,\n      this.imageCachePromiseRemovedEventHandler\n    );\n  }\n\n  _updateFrameStatus(imageId, loaded) {\n    const imageData = this.imageDataMap.get(imageId);\n\n    if (!imageData || imageData.loaded === loaded) {\n      return;\n    }\n\n    // Add one more frame to the stats\n    if (loaded) {\n      this._addStatsData(1);\n    }\n\n    imageData.loaded = loaded;\n    this.framesStatus[imageData.index] = loaded;\n    this.loadedCount += loaded ? 1 : -1;\n    this._updateProgress();\n  }\n\n  _setProgressData(progressId, progressData) {\n    // TODO: This method (and _clearProgressById) need to access\n    // the Redux store and should therefore be provided from the\n    // application. I've added a workaround to pass this in through\n    // the 'options' variable on instantiation, but this is really ugly.\n    // We could consider making the StudyLoadingListener a higher-order\n    // component which would set this stuff itself.\n    throw new Error(\n      \"The _setProgressData function must be provided in StudyLoadingListener's options\"\n    );\n  }\n\n  _clearProgressById(progressId) {\n    throw new Error(\n      \"The _clearProgressById function must be provided in StudyLoadingListener's options\"\n    );\n  }\n\n  _updateProgress() {\n    const totalFramesCount = this.stack.imageIds.length;\n    const loadedFramesCount = this.loadedCount;\n    const loadingFramesCount = totalFramesCount - loadedFramesCount;\n    const percentComplete = Math.round(\n      (loadedFramesCount / totalFramesCount) * 100\n    );\n    const progressId = this._getProgressId();\n    const progressData = {\n      multiFrame: true,\n      totalFramesCount,\n      loadedFramesCount,\n      loadingFramesCount,\n      percentComplete,\n      framesPerSecond: this.stats.speed,\n      framesStatus: this.framesStatus,\n    };\n\n    this._setProgressData(progressId, progressData);\n  }\n\n  _logProgress() {\n    const totalFramesCount = this.stack.imageIds.length;\n    const displaySetInstanceUID = this.stack.displaySetInstanceUID;\n    let progressBar = '[';\n\n    for (let i = 0; i < totalFramesCount; i++) {\n      const ch = this.framesStatus[i] ? '|' : '.';\n      progressBar += `${ch}`;\n    }\n\n    progressBar += ']';\n    log.info(`${displaySetInstanceUID}: ${progressBar}`);\n  }\n}\n\nclass StudyLoadingListener {\n  constructor(options) {\n    this.listeners = {};\n    this.options = options;\n  }\n\n  addStack(stack, stackMetaData) {\n    // TODO: Make this work for plugins\n    if (!stack) {\n      //console.log('Skipping adding stack to StudyLoadingListener');\n      return;\n    }\n\n    const displaySetInstanceUID = stack.displaySetInstanceUID;\n\n    if (!this.listeners[displaySetInstanceUID]) {\n      const listener = this._createListener(stack, stackMetaData);\n      if (listener) {\n        this.listeners[displaySetInstanceUID] = listener;\n      }\n    }\n  }\n\n  addStudy(study) {\n    study.displaySets.forEach(displaySet => {\n      const stack = StackManager.findOrCreateStack(study, displaySet);\n\n      // TODO: Make this work for plugins\n      if (!stack) {\n        console.warn('Skipping adding displaySet to StudyLoadingListener');\n        console.warn(displaySet);\n        return;\n      }\n\n      this.addStack(stack, {\n        isMultiFrame: displaySet.isMultiFrame,\n      });\n    });\n  }\n\n  addStudies(studies) {\n    if (!studies || !studies.length) {\n      return;\n    }\n\n    studies.forEach(study => this.addStudy(study));\n  }\n\n  clear() {\n    const displaySetInstanceUIDs = Object.keys(this.listeners);\n    const length = displaySetInstanceUIDs.length;\n\n    for (let i = 0; i < length; i++) {\n      const displaySetInstanceUID = displaySetInstanceUIDs[i];\n      const displaySet = this.listeners[displaySetInstanceUID];\n\n      displaySet.destroy();\n    }\n\n    this.listeners = {};\n  }\n\n  _createListener(stack, stackMetaData) {\n    const schema = this._getSchema(stack);\n\n    // A StackLoadingListener can be created if it's wadors or not a multiframe\n    // wadouri instance (single file) that means \"N\" files will have to be\n    // downloaded where \"N\" is the number of frames. DICOMFileLoadingListener\n    // is created only if it's a single DICOM file and there's no way to know\n    // how many frames has already been loaded (bytes/s instead of frames/s).\n    if (schema === 'wadors' || !stackMetaData.isMultiFrame) {\n      return new StackLoadingListener(stack, this.options);\n    } else {\n      return new DICOMFileLoadingListener(stack, this.options);\n    }\n  }\n\n  _getSchema(stack) {\n    const imageId = stack.imageIds[0];\n    const colonIndex = imageId.indexOf(':');\n    return imageId.substring(0, colonIndex);\n  }\n\n  // Singleton\n  static getInstance(options) {\n    if (!StudyLoadingListener._instance) {\n      StudyLoadingListener._instance = new StudyLoadingListener(options);\n    }\n\n    return StudyLoadingListener._instance;\n  }\n}\n\nexport { StudyLoadingListener, StackLoadingListener, DICOMFileLoadingListener };\n","/**\n * This extension allows you to record a sequence using Mousetrap.\n * {@link https://craig.is/killing/mice}\n *\n * @author Dan Tao <daniel.tao@gmail.com>\n */\nexport default function(Mousetrap) {\n  /**\n   * the sequence currently being recorded\n   *\n   * @type {Array}\n   */\n  var _recordedSequence = [],\n    /**\n     * a callback to invoke after recording a sequence\n     *\n     * @type {Function|null}\n     */\n    _recordedSequenceCallback = null,\n    /**\n     * a list of all of the keys currently held down\n     *\n     * @type {Array}\n     */\n    _currentRecordedKeys = [],\n    /**\n     * temporary state where we remember if we've already captured a\n     * character key in the current combo\n     *\n     * @type {boolean}\n     */\n    _recordedCharacterKey = false,\n    /**\n     * a handle for the timer of the current recording\n     *\n     * @type {null|number}\n     */\n    _recordTimer = null,\n    /**\n     * the original handleKey method to override when Mousetrap.record() is\n     * called\n     *\n     * @type {Function}\n     */\n    _origHandleKey = Mousetrap.prototype.handleKey;\n\n  /**\n   * handles a character key event\n   *\n   * @param {string} character\n   * @param {Array} modifiers\n   * @param {Event} e\n   * @returns void\n   */\n  function _handleKey(character, modifiers, e) {\n    var self = this;\n\n    if (!self.recording) {\n      _origHandleKey.apply(self, arguments);\n      return;\n    }\n\n    // remember this character if we're currently recording a sequence\n    if (e.type == 'keydown') {\n      if (character.length === 1 && _recordedCharacterKey) {\n        _recordCurrentCombo();\n      }\n\n      for (let i = 0; i < modifiers.length; ++i) {\n        _recordKey(modifiers[i]);\n      }\n      _recordKey(character);\n\n      // once a key is released, all keys that were held down at the time\n      // count as a keypress\n    } else if (e.type == 'keyup' && _currentRecordedKeys.length > 0) {\n      _recordCurrentCombo();\n    }\n  }\n\n  /**\n   * marks a character key as held down while recording a sequence\n   *\n   * @param {string} key\n   * @returns void\n   */\n  function _recordKey(key) {\n    // one-off implementation of Array.indexOf, since IE6-9 don't support it\n    for (let i = 0; i < _currentRecordedKeys.length; ++i) {\n      if (_currentRecordedKeys[i] === key) {\n        return;\n      }\n    }\n\n    _currentRecordedKeys.push(key);\n\n    if (key.length === 1) {\n      _recordedCharacterKey = true;\n    }\n  }\n\n  /**\n   * marks whatever key combination that's been recorded so far as finished\n   * and gets ready for the next combo\n   *\n   * @returns void\n   */\n  function _recordCurrentCombo() {\n    _recordedSequence.push(_currentRecordedKeys);\n    _currentRecordedKeys = [];\n    _recordedCharacterKey = false;\n    _finishRecording();\n  }\n\n  /**\n   * ensures each combo in a sequence is in a predictable order and formats\n   * key combos to be '+'-delimited\n   *\n   * modifies the sequence in-place\n   *\n   * @param {Array} sequence\n   * @returns void\n   */\n  function _normalizeSequence(sequence) {\n    for (let i = 0; i < sequence.length; ++i) {\n      sequence[i].sort(function(x, y) {\n        // modifier keys always come first, in alphabetical order\n        if (x.length > 1 && y.length === 1) {\n          return -1;\n        } else if (x.length === 1 && y.length > 1) {\n          return 1;\n        }\n\n        // character keys come next (list should contain no duplicates,\n        // so no need for equality check)\n        return x > y ? 1 : -1;\n      });\n\n      sequence[i] = sequence[i].join('+');\n    }\n  }\n\n  /**\n   * finishes the current recording, passes the recorded sequence to the stored\n   * callback, and sets Mousetrap.handleKey back to its original function\n   *\n   * @returns void\n   */\n  function _finishRecording() {\n    if (_recordedSequenceCallback) {\n      _normalizeSequence(_recordedSequence);\n      _recordedSequenceCallback(_recordedSequence);\n    }\n\n    // reset all recorded state\n    _recordedSequence = [];\n    _recordedSequenceCallback = null;\n    _currentRecordedKeys = [];\n  }\n\n  /**\n   * called to set a 1 second timeout on the current recording\n   *\n   * this is so after each key press in the sequence the recording will wait for\n   * 1 more second before executing the callback\n   *\n   * @returns void\n   */\n  function _restartRecordTimer() {\n    clearTimeout(_recordTimer);\n    _recordTimer = setTimeout(_finishRecording, 1000);\n  }\n\n  /**\n   * records the next sequence and passes it to a callback once it's\n   * completed\n   *\n   * @param {Function} callback\n   * @returns void\n   */\n  Mousetrap.prototype.record = function(callback) {\n    var self = this;\n    self.recording = true;\n    _recordedSequenceCallback = function() {\n      self.recording = false;\n      callback.apply(self, arguments);\n    };\n  };\n\n  /**\n   * stop recording\n   *\n   * @param {Function} callback\n   * @returns void\n   */\n  Mousetrap.prototype.stopRecord = function() {\n    var self = this;\n    self.recording = false;\n  };\n\n  /**\n   * start recording\n   *\n   * @param {Function} callback\n   * @returns void\n   */\n  Mousetrap.prototype.startRecording = function() {\n    var self = this;\n    self.recording = true;\n  };\n\n  Mousetrap.prototype.handleKey = function() {\n    var self = this;\n    _handleKey.apply(self, arguments);\n  };\n\n  Mousetrap.init();\n}\n","import Mousetrap from 'mousetrap';\nimport pausePlugin from './pausePlugin';\nimport recordPlugin from './recordPlugin';\n\nrecordPlugin(Mousetrap);\npausePlugin(Mousetrap);\n\nexport default Mousetrap;\n","/**\n * adds a pause and unpause method to Mousetrap\n * this allows you to enable or disable keyboard shortcuts\n * without having to reset Mousetrap and rebind everything\n *\n * https://github.com/ccampbell/mousetrap/blob/master/plugins/pause/mousetrap-pause.js\n */\nexport default function(Mousetrap) {\n  var _originalStopCallback = Mousetrap.prototype.stopCallback;\n\n  Mousetrap.prototype.stopCallback = function(e, element, combo) {\n    var self = this;\n\n    if (self.paused) {\n      return true;\n    }\n\n    return _originalStopCallback.call(self, e, element, combo);\n  };\n\n  Mousetrap.prototype.pause = function() {\n    var self = this;\n    self.paused = true;\n  };\n\n  Mousetrap.prototype.unpause = function() {\n    var self = this;\n    self.paused = false;\n  };\n\n  Mousetrap.init();\n}\n","import hotkeys from './../utils/hotkeys';\nimport log from './../log.js';\n\n/**\n *\n *\n * @typedef {Object} HotkeyDefinition\n * @property {String} commandName - Command to call\n * @property {String} label - Display name for hotkey\n * @property {String[]} keys - Keys to bind; Follows Mousetrap.js binding syntax\n */\n\nexport class HotkeysManager {\n  constructor(commandsManager, servicesManager) {\n    this.hotkeyDefinitions = {};\n    this.hotkeyDefaults = [];\n    this.isEnabled = true;\n\n    if (!commandsManager) {\n      log.warn(\n        'HotkeysManager instantiated without a commandsManager. Hotkeys will be unable to find and run commands.'\n      );\n    }\n\n    this._servicesManager = servicesManager;\n    this._commandsManager = commandsManager;\n  }\n\n  /**\n   * Exposes Mousetrap.js's `.record` method, added by the record plugin.\n   *\n   * @param {*} event\n   */\n  record(event) {\n    return hotkeys.record(event);\n  }\n\n  /**\n   * Disables all hotkeys. Hotkeys added while disabled will not listen for\n   * input.\n   */\n  disable() {\n    this.isEnabled = false;\n    hotkeys.pause();\n  }\n\n  /**\n   * Enables all hotkeys.\n   */\n  enable() {\n    this.isEnabled = true;\n    hotkeys.unpause();\n  }\n\n  /**\n   * Registers a list of hotkeydefinitions.\n   *\n   * @param {HotkeyDefinition[] | Object} [hotkeyDefinitions=[]] Contains hotkeys definitions\n   */\n  setHotkeys(hotkeyDefinitions = []) {\n    try {\n      const definitions = this._getValidDefinitions(hotkeyDefinitions);\n\n      definitions.forEach(definition => this.registerHotkeys(definition));\n    } catch (error) {\n      const { UINotificationService } = this._servicesManager.services;\n      UINotificationService.show({\n        title: 'Hotkeys Manager',\n        message: 'Erro while setting hotkeys',\n        type: 'error',\n      });\n    }\n  }\n\n  /**\n   * Set default hotkey bindings. These\n   * values are used in `this.restoreDefaultBindings`.\n   *\n   * @param {HotkeyDefinition[] | Object} [hotkeyDefinitions=[]] Contains hotkeys definitions\n   */\n  setDefaultHotKeys(hotkeyDefinitions = []) {\n    const definitions = this._getValidDefinitions(hotkeyDefinitions);\n\n    this.hotkeyDefaults = definitions;\n  }\n\n  /**\n   * Take hotkey definitions that can be an array or object and make sure that it\n   * returns an array of hotkeys\n   *\n   * @param {HotkeyDefinition[] | Object} [hotkeyDefinitions=[]] Contains hotkeys definitions\n   */\n  _getValidDefinitions(hotkeyDefinitions) {\n    const definitions = Array.isArray(hotkeyDefinitions)\n      ? [...hotkeyDefinitions]\n      : this._parseToArrayLike(hotkeyDefinitions);\n\n    return definitions;\n  }\n\n  /**\n   * It parses given object containing hotkeyDefinition to array like.\n   * Each property of given object will be mapped to an object of an array. And its property name will be the value of a property named as commandName\n   *\n   * @param {HotkeyDefinition[] | Object} [hotkeyDefinitions={}] Contains hotkeys definitions\n   * @returns {HotkeyDefinition[]}\n   */\n  _parseToArrayLike(hotkeyDefinitionsObj = {}) {\n    const copy = { ...hotkeyDefinitionsObj };\n    return Object.entries(copy).map(entryValue =>\n      this._parseToHotKeyObj(entryValue[0], entryValue[1])\n    );\n  }\n\n  /**\n   * Return HotkeyDefinition object like based on given property name and property value\n   * @param {string} propertyName property name of hotkey definition object\n   * @param {object} propertyValue property value of hotkey definition object\n   *\n   * @example\n   *\n   * const hotKeyObj = {hotKeyDefA: {keys:[],....}}\n   *\n   * const parsed = _parseToHotKeyObj(Object.keys(hotKeyDefA)[0], hotKeyObj[hotKeyDefA]);\n   *  {\n   *   commandName: hotKeyDefA,\n   *   keys: [],\n   *   ....\n   *  }\n   *\n   */\n  _parseToHotKeyObj(propertyName, propertyValue) {\n    return {\n      commandName: propertyName,\n      ...propertyValue,\n    };\n  }\n\n  /**\n   * (unbinds and) binds the specified command to one or more key combinations.\n   * When a hotkey combination is triggered, the command name and active contexts\n   * are used to locate the correct command to call.\n   *\n   * @param {HotkeyDefinition} commandName\n   * @param {String} extension\n   * @returns {undefined}\n   */\n  registerHotkeys({ commandName, keys, label } = {}, extension) {\n    if (!commandName) {\n      log.warn(`No command was defined for hotkey \"${keys}\"`);\n      return;\n    }\n\n    const previouslyRegisteredDefinition = this.hotkeyDefinitions[commandName];\n\n    if (previouslyRegisteredDefinition) {\n      const previouslyRegisteredKeys = previouslyRegisteredDefinition.keys;\n      this._unbindHotkeys(commandName, previouslyRegisteredKeys);\n      log.info(`Unbinding ${commandName} from ${previouslyRegisteredKeys}`);\n    }\n\n    // Set definition & bind\n    this.hotkeyDefinitions[commandName] = { keys, label };\n    this._bindHotkeys(commandName, keys);\n    log.info(`Binding ${commandName} to ${keys}`);\n  }\n\n  /**\n   * Uses most recent\n   *\n   * @returns {undefined}\n   */\n  restoreDefaultBindings() {\n    this.setHotkeys(this.hotkeyDefaults);\n  }\n\n  /**\n   *\n   */\n  destroy() {\n    this.hotkeyDefaults = [];\n    this.hotkeyDefinitions = {};\n    hotkeys.reset();\n  }\n\n  /**\n   * Binds one or more set of hotkey combinations for a given command\n   *\n   * @private\n   * @param {string} commandName - The name of the command to trigger when hotkeys are used\n   * @param {string[]} keys - One or more key combinations that should trigger command\n   * @returns {undefined}\n   */\n  _bindHotkeys(commandName, keys) {\n    const isKeyDefined = keys === '' || keys === undefined;\n    if (isKeyDefined) {\n      return;\n    }\n\n    const isKeyArray = keys instanceof Array;\n    const combinedKeys = isKeyArray ? keys.join('+') : keys;\n\n    hotkeys.bind(combinedKeys, evt => {\n      evt.preventDefault();\n      evt.stopPropagation();\n      this._commandsManager.runCommand(commandName, { evt });\n    });\n  }\n\n  /**\n   * unbinds one or more set of hotkey combinations for a given command\n   *\n   * @private\n   * @param {string} commandName - The name of the previously bound command\n   * @param {string[]} keys - One or more sets of previously bound keys\n   * @returns {undefined}\n   */\n  _unbindHotkeys(commandName, keys) {\n    const isKeyDefined = keys !== '' && keys !== undefined;\n    if (!isKeyDefined) {\n      return;\n    }\n\n    const isKeyArray = keys instanceof Array;\n    if (isKeyArray) {\n      const combinedKeys = keys.join('+');\n      this._unbindHotkeys(commandName, combinedKeys);\n      return;\n    }\n\n    hotkeys.unbind(keys);\n  }\n}\n\nexport default HotkeysManager;\n\n// Commands Contexts:\n\n// --> Name and Priority\n// GLOBAL: 0\n// VIEWER::CORNERSTONE: 1\n// VIEWER::VTK: 1\n","export class ObjectPath {\n  /**\n   * Set an object property based on \"path\" (namespace) supplied creating\n   * ... intermediary objects if they do not exist.\n   * @param object {Object} An object where the properties specified on path should be set.\n   * @param path {String} A string representing the property to be set, e.g. \"user.study.series.timepoint\".\n   * @param value {Any} The value of the property that will be set.\n   * @return {Boolean} Returns \"true\" on success, \"false\" if any intermediate component of the supplied path\n   * ... is not a valid Object, in which case the property cannot be set. No excpetions are thrown.\n   */\n  static set(object, path, value) {\n    let components = ObjectPath.getPathComponents(path),\n      length = components !== null ? components.length : 0,\n      result = false;\n\n    if (length > 0 && ObjectPath.isValidObject(object)) {\n      let i = 0,\n        last = length - 1,\n        currentObject = object;\n\n      while (i < last) {\n        let field = components[i];\n\n        if (field in currentObject) {\n          if (!ObjectPath.isValidObject(currentObject[field])) {\n            break;\n          }\n        } else {\n          currentObject[field] = {};\n        }\n\n        currentObject = currentObject[field];\n        i++;\n      }\n\n      if (i === last) {\n        currentObject[components[last]] = value;\n        result = true;\n      }\n    }\n\n    return result;\n  }\n\n  /**\n   * Get an object property based on \"path\" (namespace) supplied traversing the object\n   * ... tree as necessary.\n   * @param object {Object} An object where the properties specified might exist.\n   * @param path {String} A string representing the property to be searched for, e.g. \"user.study.series.timepoint\".\n   * @return {Any} The value of the property if found. By default, returns the special type \"undefined\".\n   */\n  static get(object, path) {\n    let found, // undefined by default\n      components = ObjectPath.getPathComponents(path),\n      length = components !== null ? components.length : 0;\n\n    if (length > 0 && ObjectPath.isValidObject(object)) {\n      let i = 0,\n        last = length - 1,\n        currentObject = object;\n\n      while (i < last) {\n        let field = components[i];\n\n        const isValid = ObjectPath.isValidObject(currentObject[field]);\n        if (field in currentObject && isValid) {\n          currentObject = currentObject[field];\n          i++;\n        } else {\n          break;\n        }\n      }\n\n      if (i === last && components[last] in currentObject) {\n        found = currentObject[components[last]];\n      }\n    }\n\n    return found;\n  }\n\n  /**\n   * Check if the supplied argument is a real JavaScript Object instance.\n   * @param object {Any} The subject to be tested.\n   * @return {Boolean} Returns \"true\" if the object is a real Object instance and \"false\" otherwise.\n   */\n  static isValidObject(object) {\n    return (\n      typeof object === 'object' && object !== null && object instanceof Object\n    );\n  }\n\n  static getPathComponents(path) {\n    return typeof path === 'string' ? path.split('.') : null;\n  }\n}\n\nexport default ObjectPath;\n","const absoluteUrl = path => {\n  let absolutePath = '/';\n\n  if (!path) return absolutePath;\n\n  // TODO: Find another way to get root url\n  const absoluteUrl = window.location.origin;\n  const absoluteUrlParts = absoluteUrl.split('/');\n\n  if (absoluteUrlParts.length > 4) {\n    const rootUrlPrefixIndex = absoluteUrl.indexOf(absoluteUrlParts[3]);\n    absolutePath += absoluteUrl.substring(rootUrlPrefixIndex) + path;\n  } else {\n    absolutePath += path;\n  }\n\n  return absolutePath.replace(/\\/\\/+/g, '/');\n};\n\nexport default absoluteUrl;\n","// TODO: figure out where else to put this function\nconst addServers = (servers, store) => {\n  if (!servers || !store) {\n    throw new Error('The servers and store must be defined');\n  }\n\n  Object.keys(servers).forEach(serverType => {\n    const endpoints = servers[serverType];\n    endpoints.forEach(endpoint => {\n      const server = Object.assign({}, endpoint);\n      server.type = serverType;\n\n      store.dispatch({\n        type: 'ADD_SERVER',\n        server,\n      });\n    });\n  });\n};\n\nexport default addServers;\n","// Return the array sorting function for its object's properties\nexport default function sortBy() {\n  var fields = [].slice.call(arguments),\n    n_fields = fields.length;\n\n  return function(A, B) {\n    var a, b, field, key, reverse, result, i;\n\n    for (i = 0; i < n_fields; i++) {\n      result = 0;\n      field = fields[i];\n\n      key = typeof field === 'string' ? field : field.name;\n\n      a = A[key];\n      b = B[key];\n\n      if (typeof field.primer !== 'undefined') {\n        a = field.primer(a);\n        b = field.primer(b);\n      }\n\n      reverse = field.reverse ? -1 : 1;\n\n      if (a < b) {\n        result = reverse * -1;\n      }\n\n      if (a > b) {\n        result = reverse * 1;\n      }\n\n      if (result !== 0) {\n        break;\n      }\n    }\n\n    return result;\n  };\n}\n","import guid from '../utils/guid';\n\n/**\n * Constants\n */\nconst PROPERTY_SEPARATOR = '.';\nconst ORDER_ASC = 'asc';\nconst ORDER_DESC = 'desc';\nconst MIN_COUNT = 0x00000000;\nconst MAX_COUNT = 0x7fffffff;\n\n/**\n * Class Definition\n */\nexport class TypeSafeCollection {\n  constructor() {\n    this._operationCount = MIN_COUNT;\n    this._elementList = [];\n    this._handlers = Object.create(null);\n  }\n\n  /**\n   * Private Methods\n   */\n\n  _invalidate() {\n    let count = this._operationCount;\n    this._operationCount = count < MAX_COUNT ? count + 1 : MIN_COUNT;\n  }\n\n  _elements(silent) {\n    silent === true || this._operationCount;\n    return this._elementList;\n  }\n\n  _elementWithPayload(payload, silent) {\n    return this._elements(silent).find(item => item.payload === payload);\n  }\n\n  _elementWithId(id, silent) {\n    return this._elements(silent).find(item => item.id === id);\n  }\n\n  _trigger(event, data) {\n    let handlers = this._handlers;\n    if (event in handlers) {\n      handlers = handlers[event];\n      if (!(handlers instanceof Array)) {\n        return;\n      }\n      for (let i = 0, limit = handlers.length; i < limit; ++i) {\n        let handler = handlers[i];\n        if (_isFunction(handler)) {\n          handler.call(null, data);\n        }\n      }\n    }\n  }\n\n  /**\n   * Public Methods\n   */\n\n  onInsert(callback) {\n    if (_isFunction(callback)) {\n      let handlers = this._handlers.insert;\n      if (!(handlers instanceof Array)) {\n        handlers = [];\n        this._handlers.insert = handlers;\n      }\n      handlers.push(callback);\n    }\n  }\n\n  /**\n   * Update the payload associated with the given ID to be the new supplied payload.\n   * @param {string} id The ID of the entry that will be updated.\n   * @param {any} payload The element that will replace the previous payload.\n   * @returns {boolean} Returns true if the given ID is present in the collection, false otherwise.\n   */\n  updateById(id, payload) {\n    let result = false,\n      found = this._elementWithPayload(payload, true);\n    if (found) {\n      // nothing to do since the element is already in the collection...\n      if (found.id === id) {\n        // set result to true since the ids match...\n        result = true;\n        this._invalidate();\n      }\n    } else {\n      found = this._elementWithId(id, true);\n      if (found) {\n        found.payload = payload;\n        result = true;\n        this._invalidate();\n      }\n    }\n    return result;\n  }\n\n  /**\n   * Signal that the given element has been changed by notifying reactive data-source observers.\n   * This method is basically a means to invalidate the inernal reactive data-source.\n   * @param {any} payload The element that has been altered.\n   * @returns {boolean} Returns true if the element is present in the collection, false otherwise.\n   */\n  update(payload) {\n    let result = false,\n      found = this._elementWithPayload(payload, true);\n    if (found) {\n      // nothing to do since the element is already in the collection...\n      result = true;\n      this._invalidate();\n    }\n    return result;\n  }\n\n  /**\n   * Insert an element in the collection. On success, the element ID (a unique string) is returned. On failure, returns null.\n   * A failure scenario only happens when the given payload is already present in the collection. Note that NO exceptions are thrown!\n   * @param {any} payload The element to be stored.\n   * @returns {string} The ID of the inserted element or null if the element already exists...\n   */\n  insert(payload) {\n    let id = null,\n      found = this._elementWithPayload(payload, true);\n    if (!found) {\n      id = guid();\n      this._elements(true).push({ id, payload });\n      this._invalidate();\n      this._trigger('insert', { id, data: payload });\n    }\n    return id;\n  }\n\n  /**\n   * Remove all elements from the collection.\n   * @returns {void} No meaningful value is returned.\n   */\n  removeAll() {\n    let all = this._elements(true),\n      length = all.length;\n    for (let i = length - 1; i >= 0; i--) {\n      let item = all[i];\n      delete item.id;\n      delete item.payload;\n      all[i] = null;\n    }\n    all.splice(0, length);\n    this._invalidate();\n  }\n\n  /**\n   * Remove elements from the collection that match the criteria given in the property map.\n   * @param {Object} propertyMap A property map that will be macthed against all collection elements.\n   * @returns {Array} A list with all removed elements.\n   */\n  remove(propertyMap) {\n    let found = this.findAllEntriesBy(propertyMap),\n      foundCount = found.length,\n      removed = [];\n    if (foundCount > 0) {\n      const all = this._elements(true);\n      for (let i = foundCount - 1; i >= 0; i--) {\n        let item = found[i];\n        all.splice(item[2], 1);\n        removed.push(item[0]);\n      }\n      this._invalidate();\n    }\n    return removed;\n  }\n\n  /**\n   * Provides the ID of the given element inside the collection.\n   * @param {any} payload The element being searched for.\n   * @returns {string} The ID of the given element or undefined if the element is not present.\n   */\n  getElementId(payload) {\n    let found = this._elementWithPayload(payload);\n    return found && found.id;\n  }\n\n  /**\n   * Provides the position of the given element in the internal list returning -1 if the element is not present.\n   * @param {any} payload The element being searched for.\n   * @returns {number} The position of the given element in the internal list. If the element is not present -1 is returned.\n   */\n  findById(id) {\n    let found = this._elementWithId(id);\n    return found && found.payload;\n  }\n\n  /**\n   * Provides the position of the given element in the internal list returning -1 if the element is not present.\n   * @param {any} payload The element being searched for.\n   * @returns {number} The position of the given element in the internal list. If the element is not present -1 is returned.\n   */\n  indexOfElement(payload) {\n    return this._elements().indexOf(this._elementWithPayload(payload, true));\n  }\n\n  /**\n   * Provides the position of the element associated with the given ID in the internal list returning -1 if the element is not present.\n   * @param {string} id The index of the element.\n   * @returns {number} The position of the element associated with the given ID in the internal list. If the element is not present -1 is returned.\n   */\n  indexOfId(id) {\n    return this._elements().indexOf(this._elementWithId(id, true));\n  }\n\n  /**\n   * Provides a list-like approach to the collection returning an element by index.\n   * @param {number} index The index of the element.\n   * @returns {any} If out of bounds, undefined is returned. Otherwise the element in the given position is returned.\n   */\n  getElementByIndex(index) {\n    let found = this._elements()[index >= 0 ? index : -1];\n    return found && found.payload;\n  }\n\n  /**\n   * Find an element by a criteria defined by the given callback function.\n   * Attention!!! The reactive source will not be notified if no valid callback is supplied...\n   * @param {function} callback A callback function which will define the search criteria. The callback\n   * function will be passed the collection element, its ID and its index in this very order. The callback\n   * shall return true when its criterea has been fulfilled.\n   * @returns {any} The matched element or undefined if not match was found.\n   */\n  find(callback) {\n    let found;\n    if (_isFunction(callback)) {\n      found = this._elements().find((item, index) => {\n        return callback.call(this, item.payload, item.id, index);\n      });\n    }\n    return found && found.payload;\n  }\n\n  /**\n   * Find the first element that strictly matches the specified property map.\n   * @param {Object} propertyMap A property map that will be macthed against all collection elements.\n   * @param {Object} options A set of options. Currently only \"options.sort\" option is supported.\n   * @param {Object.SortingSpecifier} options.sort An optional sorting specifier. If a sorting specifier is supplied\n   * but is not valid, an exception will be thrown.\n   * @returns {Any} The matched element or undefined if not match was found.\n   */\n  findBy(propertyMap, options) {\n    let found;\n    if (_isObject(options)) {\n      // if the \"options\" argument is provided and is a valid object,\n      // it must be applied to the dataset before search...\n      const all = this.all(options);\n      if (all.length > 0) {\n        if (_isObject(propertyMap)) {\n          found = all.find(item =>\n            _compareToPropertyMapStrict(propertyMap, item)\n          );\n        } else {\n          found = all[0]; // simply extract the first element...\n        }\n      }\n    } else if (_isObject(propertyMap)) {\n      found = this._elements().find(item =>\n        _compareToPropertyMapStrict(propertyMap, item.payload)\n      );\n      if (found) {\n        found = found.payload;\n      }\n    }\n    return found;\n  }\n\n  /**\n   * Find all elements that strictly match the specified property map.\n   * Attention!!! The reactive source will not be notified if no valid property map is supplied...\n   * @param {Object} propertyMap A property map that will be macthed against all collection elements.\n   * @returns {Array} An array of entries of all elements that match the given criteria. Each set in\n   * in the array has the following format: [ elementData, elementId, elementIndex ].\n   */\n  findAllEntriesBy(propertyMap) {\n    const found = [];\n    if (_isObject(propertyMap)) {\n      this._elements().forEach((item, index) => {\n        if (_compareToPropertyMapStrict(propertyMap, item.payload)) {\n          // Match! Add it to the found list...\n          found.push([item.payload, item.id, index]);\n        }\n      });\n    }\n    return found;\n  }\n\n  /**\n   * Find all elements that match a specified property map.\n   * Attention!!! The reactive source will not be notified if no valid property map is supplied...\n   * @param {Object} propertyMap A property map that will be macthed against all collection elements.\n   * @param {Object} options A set of options. Currently only \"options.sort\" option is supported.\n   * @param {Object.SortingSpecifier} options.sort An optional sorting specifier. If a sorting specifier is supplied\n   * but is not valid, an exception will be thrown.\n   * @returns {Array} An array with all elements that match the given criteria and sorted in the specified sorting order.\n   */\n  findAllBy(propertyMap, options) {\n    const found = this.findAllEntriesBy(propertyMap).map(item => item[0]); // Only payload is relevant...\n    if (_isObject(options)) {\n      if ('sort' in options) {\n        _sortListBy(found, options.sort);\n      }\n    }\n    return found;\n  }\n\n  /**\n   * Executes the supplied callback function for each element of the collection.\n   * Attention!!! The reactive source will not be notified if no valid property map is supplied...\n   * @param {function} callback The callback function to be executed. The callback is passed the element,\n   * its ID and its index in this very order.\n   * @returns {void} Nothing is returned.\n   */\n  forEach(callback) {\n    if (_isFunction(callback)) {\n      this._elements().forEach((item, index) => {\n        callback.call(this, item.payload, item.id, index);\n      });\n    }\n  }\n\n  /**\n   * Count the number of elements currently in the collection.\n   * @returns {number} The current number of elements in the collection.\n   */\n  count() {\n    return this._elements().length;\n  }\n\n  /**\n   * Returns a list with all elements of the collection optionally sorted by a sorting specifier criteria.\n   * @param {Object} options A set of options. Currently only \"options.sort\" option is supported.\n   * @param {Object.SortingSpecifier} options.sort An optional sorting specifier. If a sorting specifier is supplied\n   * but is not valid, an exception will be thrown.\n   * @returns {Array} An array with all elements stored in the collection.\n   */\n  all(options) {\n    let list = this._elements().map(item => item.payload);\n    if (_isObject(options)) {\n      if ('sort' in options) {\n        _sortListBy(list, options.sort);\n      }\n    }\n    return list;\n  }\n}\n\n/**\n * Utility Functions\n */\n\n/**\n * Test if supplied argument is a valid object for current class purposes.\n * Atention! The underscore version of this function should not be used for performance reasons.\n */\nfunction _isObject(subject) {\n  return (\n    subject instanceof Object ||\n    (typeof subject === 'object' && subject !== null)\n  );\n}\n\n/**\n * Test if supplied argument is a valid string for current class purposes.\n * Atention! The underscore version of this function should not be used for performance reasons.\n */\nfunction _isString(subject) {\n  return typeof subject === 'string';\n}\n\n/**\n * Test if supplied argument is a valid function for current class purposes.\n * Atention! The underscore version of this function should not be used for performance reasons.\n */\nfunction _isFunction(subject) {\n  return typeof subject === 'function';\n}\n\n/**\n * Shortcut for Object's prototype \"hasOwnProperty\" method.\n */\nconst _hasOwnProperty = Object.prototype.hasOwnProperty;\n\n/**\n * Retrieve an object's property value by name. Composite property names (e.g., 'address.country.name') are accepted.\n * @param {Object} targetObject The object we want read the property from...\n * @param {String} propertyName The property to be read (e.g., 'address.street.name' or 'address.street.number'\n * to read object.address.street.name or object.address.street.number, respectively);\n * @returns {Any} Returns whatever the property holds or undefined if the property cannot be read or reached.\n */\nfunction _getPropertyValue(targetObject, propertyName) {\n  let propertyValue; // undefined (the default return value)\n  if (_isObject(targetObject) && _isString(propertyName)) {\n    const fragments = propertyName.split(PROPERTY_SEPARATOR);\n    const fragmentCount = fragments.length;\n    if (fragmentCount > 0) {\n      const firstFragment = fragments[0];\n      const remainingFragments =\n        fragmentCount > 1 ? fragments.slice(1).join(PROPERTY_SEPARATOR) : null;\n      propertyValue = targetObject[firstFragment];\n      if (remainingFragments !== null) {\n        propertyValue = _getPropertyValue(propertyValue, remainingFragments);\n      }\n    }\n  }\n  return propertyValue;\n}\n\n/**\n * Compare a property map with a target object using strict comparison.\n * @param {Object} propertyMap The property map whose properties will be used for comparison. Composite\n * property names (e.g., 'address.country.name') will be tested against the \"resolved\" properties from the target object.\n * @param {Object} targetObject The target object whose properties will be tested.\n * @returns {boolean} Returns true if the properties match, false otherwise.\n */\nfunction _compareToPropertyMapStrict(propertyMap, targetObject) {\n  let result = false;\n  // \"for in\" loops do not thown exceptions for invalid data types...\n  for (let propertyName in propertyMap) {\n    if (_hasOwnProperty.call(propertyMap, propertyName)) {\n      if (\n        propertyMap[propertyName] !==\n        _getPropertyValue(targetObject, propertyName)\n      ) {\n        result = false;\n        break;\n      } else if (result !== true) {\n        result = true;\n      }\n    }\n  }\n  return result;\n}\n\n/**\n * Checks if a sorting specifier is valid.\n * A valid sorting specifier consists of an array of arrays being each subarray a pair\n * in the format [\"property name\", \"sorting order\"].\n * The following exemple can be used to sort studies by \"date\"\" and use \"time\" to break ties in descending order.\n * [ [ 'study.date', 'desc' ], [ 'study.time', 'desc' ] ]\n * @param {Array} specifiers The sorting specifier to be tested.\n * @returns {boolean} Returns true if the specifiers are valid, false otherwise.\n */\nfunction _isValidSortingSpecifier(specifiers) {\n  let result = true;\n  if (specifiers instanceof Array && specifiers.length > 0) {\n    for (let i = specifiers.length - 1; i >= 0; i--) {\n      const item = specifiers[i];\n      if (item instanceof Array) {\n        const property = item[0];\n        const order = item[1];\n        if (\n          _isString(property) &&\n          (order === ORDER_ASC || order === ORDER_DESC)\n        ) {\n          continue;\n        }\n      }\n      result = false;\n      break;\n    }\n  }\n  return result;\n}\n\n/**\n * Sorts an array based on sorting specifier options.\n * @param {Array} list The that needs to be sorted.\n * @param {Array} specifiers An array of specifiers. Please read isValidSortingSpecifier method definition for further details.\n * @returns {void} No value is returned. The array is sorted in place.\n */\nfunction _sortListBy(list, specifiers) {\n  if (list instanceof Array && _isValidSortingSpecifier(specifiers)) {\n    const specifierCount = specifiers.length;\n    list.sort(function _sortListByCallback(a, b) {\n      // callback name for stack traces...\n      let index = 0;\n      while (index < specifierCount) {\n        const specifier = specifiers[index];\n        const property = specifier[0];\n        const order = specifier[1] === ORDER_DESC ? -1 : 1;\n        const aValue = _getPropertyValue(a, property);\n        const bValue = _getPropertyValue(b, property);\n        // @TODO: should we check for the types being compared, like:\n        // ~~ if (typeof aValue !== typeof bValue) continue;\n        // Not sure because dates, for example, can be correctly compared to numbers...\n        if (aValue < bValue) {\n          return order * -1;\n        }\n        if (aValue > bValue) {\n          return order * 1;\n        }\n        if (++index >= specifierCount) {\n          return 0;\n        }\n      }\n    });\n  } else {\n    throw new Error('Invalid Arguments');\n  }\n}\n","import { TypeSafeCollection } from '../classes/TypeSafeCollection';\n\nconst studyMetadataList = new TypeSafeCollection();\n\nfunction add(studyMetadata) {\n  studyMetadataList.insert(studyMetadata);\n}\n\nfunction get(studyInstanceUID) {\n  return studyMetadataList.findBy({ studyInstanceUID });\n}\n\nfunction all(options) {\n  return studyMetadataList.all(options);\n}\n\nfunction remove(studyInstanceUID) {\n  studyMetadataList.remove({ studyInstanceUID });\n}\n\nfunction purge() {\n  studyMetadataList.removeAll();\n}\n\nexport default {\n  add,\n  get,\n  all,\n  remove,\n  purge,\n};\n","import cornerstone from 'cornerstone-core';\nimport cornerstoneWADOImageLoader from 'cornerstone-wado-image-loader';\nimport { api } from 'dicomweb-client';\nimport DICOMWeb from '../DICOMWeb';\n\nimport errorHandler from '../errorHandler';\n\nconst getImageId = imageObj => {\n  if (!imageObj) {\n    return;\n  }\n\n  return typeof imageObj.getImageId === 'function'\n    ? imageObj.getImageId()\n    : imageObj.url;\n};\n\nconst findImageIdOnStudies = (studies, displaySetInstanceUID) => {\n  const study = studies.find(study => {\n    const displaySet = study.displaySets.some(\n      displaySet => displaySet.displaySetInstanceUID === displaySetInstanceUID\n    );\n    return displaySet;\n  });\n  const { series = [] } = study;\n  const { instances = [] } = series[0] || {};\n  const instance = instances[0];\n\n  return getImageId(instance);\n};\n\nconst someInvalidStrings = strings => {\n  const stringsArray = Array.isArray(strings) ? strings : [strings];\n  const emptyString = string => !string;\n  let invalid = stringsArray.some(emptyString);\n  return invalid;\n};\n\nconst getImageInstance = dataset => {\n  return dataset && dataset.images && dataset.images[0];\n};\n\nconst getImageInstanceId = imageInstance => {\n  return getImageId(imageInstance);\n};\n\nconst fetchIt = (url, headers = DICOMWeb.getAuthorizationHeader()) => {\n  return fetch(url, headers).then(response => response.arrayBuffer());\n};\n\nconst cornerstoneRetriever = imageId => {\n  return cornerstone.loadAndCacheImage(imageId).then(image => {\n    return image && image.data && image.data.byteArray.buffer;\n  });\n};\n\nconst wadorsRetriever = (\n  url,\n  studyInstanceUID,\n  seriesInstanceUID,\n  sopInstanceUID,\n  headers = DICOMWeb.getAuthorizationHeader(),\n  errorInterceptor = errorHandler.getHTTPErrorHandler()\n) => {\n  const config = {\n    url,\n    headers,\n    errorInterceptor,\n  };\n  const dicomWeb = new api.DICOMwebClient(config);\n\n  return dicomWeb.retrieveInstance({\n    studyInstanceUID,\n    seriesInstanceUID,\n    sopInstanceUID,\n  });\n};\n\nconst getImageLoaderType = imageId => {\n  const loaderRegExp = /^\\w+\\:/;\n  const loaderType = loaderRegExp.exec(imageId);\n\n  return (\n    (loaderRegExp.lastIndex === 0 &&\n      loaderType &&\n      loaderType[0] &&\n      loaderType[0].replace(':', '')) ||\n    ''\n  );\n};\n\nclass DicomLoaderService {\n  getLocalData(dataset, studies) {\n    if (dataset && dataset.localFile) {\n      // Use referenced imageInstance\n      const imageInstance = getImageInstance(dataset);\n      let imageId = getImageInstanceId(imageInstance);\n\n      // or Try to get it from studies\n      if (someInvalidStrings(imageId)) {\n        imageId = findImageIdOnStudies(studies, dataset.displaySetInstanceUID);\n      }\n\n      if (!someInvalidStrings(imageId)) {\n        return cornerstoneWADOImageLoader.wadouri.loadFileRequest(imageId);\n      }\n    }\n  }\n\n  getDataByImageType(dataset) {\n    const imageInstance = getImageInstance(dataset);\n\n    if (imageInstance) {\n      const imageId = getImageInstanceId(imageInstance);\n      let getDicomDataMethod = fetchIt;\n      const loaderType = getImageLoaderType(imageId);\n\n      switch (loaderType) {\n        case 'dicomfile':\n          getDicomDataMethod = cornerstoneRetriever.bind(this, imageId);\n          break;\n        case 'wadors':\n          const url = imageInstance.getData().wadoRoot;\n          const studyInstanceUID = imageInstance.getStudyInstanceUID();\n          const seriesInstanceUID = imageInstance.getSeriesInstanceUID();\n          const sopInstanceUID = imageInstance.getSOPInstanceUID();\n          const invalidParams = someInvalidStrings([\n            url,\n            studyInstanceUID,\n            seriesInstanceUID,\n            sopInstanceUID,\n          ]);\n          if (invalidParams) {\n            return;\n          }\n\n          getDicomDataMethod = wadorsRetriever.bind(\n            this,\n            url,\n            studyInstanceUID,\n            seriesInstanceUID,\n            sopInstanceUID\n          );\n          break;\n        case 'wadouri':\n          // Strip out the image loader specifier\n          imageId = imageId.substring(imageId.indexOf(':') + 1);\n\n          if (someInvalidStrings(imageId)) {\n            return;\n          }\n          getDicomDataMethod = fetchIt.bind(this, imageId);\n          break;\n      }\n\n      return getDicomDataMethod();\n    }\n  }\n\n  getDataByDatasetType(dataset) {\n    const {\n      StudyInstanceUID,\n      SeriesInstanceUID,\n      SOPInstanceUID,\n      authorizationHeaders,\n      wadoRoot,\n      wadoUri,\n    } = dataset;\n    // Retrieve wadors or just try to fetch wadouri\n    if (!someInvalidStrings(wadoRoot)) {\n      return wadorsRetriever(\n        wadoRoot,\n        StudyInstanceUID,\n        SeriesInstanceUID,\n        SOPInstanceUID,\n        authorizationHeaders\n      );\n    } else if (!someInvalidStrings(wadoUri)) {\n      return fetchIt(wadoUri, { headers: authorizationHeaders });\n    }\n  }\n\n  *getLoaderIterator(dataset, studies) {\n    yield this.getLocalData(dataset, studies);\n    yield this.getDataByImageType(dataset);\n    yield this.getDataByDatasetType(dataset);\n  }\n\n  findDicomDataPromise(dataset, studies) {\n    const loaderIterator = this.getLoaderIterator(dataset, studies);\n    // it returns first valid retriever method.\n    for (const loader of loaderIterator) {\n      if (loader) {\n        return loader;\n      }\n    }\n\n    // in case of no valid loader\n    throw new Error('Invalid dicom data loader');\n  }\n}\n\nconst dicomLoaderService = new DicomLoaderService();\n\nexport default dicomLoaderService;\n","/* Enabled JPEG images downloading on IE11. */\nconst b64toBlob = (b64Data, contentType = '', sliceSize = 512) => {\n  const byteCharacters = atob(b64Data);\n  const byteArrays = [];\n\n  for (let offset = 0; offset < byteCharacters.length; offset += sliceSize) {\n    const slice = byteCharacters.slice(offset, offset + sliceSize);\n\n    const byteNumbers = new Array(slice.length);\n    for (let i = 0; i < slice.length; i++) {\n      byteNumbers[i] = slice.charCodeAt(i);\n    }\n\n    const byteArray = new Uint8Array(byteNumbers);\n    byteArrays.push(byteArray);\n  }\n\n  const blob = new Blob(byteArrays, { type: contentType });\n  return blob;\n};\n\nexport default b64toBlob;\n","import studyMetadataManager from './studyMetadataManager';\n\n/**\n * Study schema\n *\n * @typedef {Object} Study\n * @property {Array} seriesList -\n * @property {Object} seriesMap -\n * @property {Object} seriesLoader -\n * @property {string} wadoUriRoot -\n * @property {string} wadoRoot -\n * @property {string} qidoRoot -\n * @property {string} patientName -\n * @property {string} patientId -\n * @property {number} patientAge -\n * @property {number} patientSize -\n * @property {number} patientWeight -\n * @property {string} accessionNumber -\n * @property {string} studyDate -\n * @property {string} studyTime -\n * @property {string} modalities -\n * @property {string} studyDescription -\n * @property {string} imageCount -\n * @property {string} studyInstanceUid -\n * @property {string} institutionName -\n * @property {Array} displaySets -\n */\n\n/**\n * Factory function to load and cache derived display sets.\n *\n * @param {object} referencedDisplaySet Display set\n * @param {string} referencedDisplaySet.displaySetInstanceUid Display set instance uid\n * @param {string} referencedDisplaySet.seriesDate\n * @param {string} referencedDisplaySet.seriesTime\n * @param {string} referencedDisplaySet.seriesInstanceUid\n * @param {string} referencedDisplaySet.seriesNumber\n * @param {string} referencedDisplaySet.seriesDescription\n * @param {number} referencedDisplaySet.numImageFrames\n * @param {string} referencedDisplaySet.frameRate\n * @param {string} referencedDisplaySet.modality\n * @param {boolean} referencedDisplaySet.isMultiFrame\n * @param {number} referencedDisplaySet.instanceNumber\n * @param {boolean} referencedDisplaySet.isReconstructable\n * @param {string} referencedDisplaySet.studyInstanceUid\n * @param {Array} referencedDisplaySet.sopClassUids\n * @param {Study[]} studies Collection of studies\n * @returns void\n */\nconst loadAndCacheDerivedDisplaySets = (referencedDisplaySet, studies) => {\n  const { StudyInstanceUID, SeriesInstanceUID } = referencedDisplaySet;\n\n  const promises = [];\n\n  const studyMetadata = studyMetadataManager.get(StudyInstanceUID);\n\n  if (!studyMetadata) {\n    return promises;\n  }\n\n  const derivedDisplaySets = studyMetadata.getDerivedDatasets({\n    referencedSeriesInstanceUID: SeriesInstanceUID,\n  });\n\n  if (!derivedDisplaySets.length) {\n    return promises;\n  }\n\n  // Filter by type\n  const displaySetsPerModality = {};\n\n  derivedDisplaySets.forEach(displaySet => {\n    const Modality = displaySet.Modality;\n\n    if (displaySetsPerModality[Modality] === undefined) {\n      displaySetsPerModality[Modality] = [];\n    }\n\n    displaySetsPerModality[Modality].push(displaySet);\n  });\n\n  // For each type, see if any are loaded, if not load the most recent.\n  Object.keys(displaySetsPerModality).forEach(key => {\n    const displaySets = displaySetsPerModality[key];\n\n    const isLoaded = displaySets.some(displaySet => displaySet.isLoaded);\n\n    if (isLoaded) {\n      return;\n    }\n\n    if (displaySets.some(displaySet => displaySet.loadError)) {\n      return;\n    }\n\n    // find most recent and load it.\n    let recentDateTime = 0;\n    let recentDisplaySet = displaySets[0];\n\n    displaySets.forEach(displaySet => {\n      const dateTime = Number(\n        `${displaySet.SeriesDate}${displaySet.SeriesTime}`\n      );\n      if (dateTime > recentDateTime) {\n        recentDateTime = dateTime;\n        recentDisplaySet = displaySet;\n      }\n    });\n\n    recentDisplaySet.isLoading = true;\n\n    promises.push(recentDisplaySet.load(referencedDisplaySet, studies));\n  });\n\n  return promises;\n};\n\nexport default loadAndCacheDerivedDisplaySets;\n","import lib from 'query-string';\n\nconst PARAM_SEPARATOR = ';';\nconst PARAM_PATTERN_IDENTIFIER = ':';\n\nfunction toLowerCaseFirstLetter(word) {\n  return word[0].toLowerCase() + word.slice(1);\n}\nconst getQueryFilters = (location = {}) => {\n  const { search } = location;\n\n  if (!search) {\n    return;\n  }\n\n  const searchParameters = parse(search);\n  const filters = {};\n\n  Object.entries(searchParameters).forEach(([key, value]) => {\n    filters[toLowerCaseFirstLetter(key)] = value;\n  });\n\n  return filters;\n};\n\nconst decode = (strToDecode = '') => {\n  try {\n    const decoded = window.atob(strToDecode);\n    return decoded;\n  } catch (e) {\n    return strToDecode;\n  }\n};\n\nconst parse = toParse => {\n  if (toParse) {\n    return lib.parse(toParse);\n  }\n\n  return {};\n};\nconst parseParam = paramStr => {\n  const _paramDecoded = decode(paramStr);\n  if (_paramDecoded && typeof _paramDecoded === 'string') {\n    return _paramDecoded.split(PARAM_SEPARATOR);\n  }\n};\n\nconst replaceParam = (path = '', paramKey, paramValue) => {\n  const paramPattern = `${PARAM_PATTERN_IDENTIFIER}${paramKey}`;\n  if (paramValue) {\n    return path.replace(paramPattern, paramValue);\n  }\n\n  return path;\n};\n\nconst isValidPath = path => {\n  const paramPatternPiece = `/${PARAM_PATTERN_IDENTIFIER}`;\n  return path.indexOf(paramPatternPiece) < 0;\n};\n\nconst queryString = {\n  getQueryFilters,\n};\n\nconst paramString = {\n  isValidPath,\n  parseParam,\n  replaceParam,\n};\n\nexport { parse, queryString, paramString };\n","export default function makeDeferred() {\n  let reject, resolve, promise = new Promise(function (res, rej) {\n    resolve = res;\n    reject = rej;\n  });\n  return Object.freeze({ promise, resolve, reject });\n}\n","\nexport default class Queue {\n\n  constructor(limit) {\n    this.limit = limit;\n    this.size = 0;\n    this.awaiting = null;\n  }\n\n  /**\n   * Creates a new \"proxy\" function associated with the current execution queue\n   * instance. When the returned function is invoked, the queue limit is checked\n   * to make sure the limit of scheduled tasks is repected (throwing an\n   * exception when the limit has been reached and before calling the original\n   * function). The original function is only invoked after all the previously\n   * scheduled tasks have finished executing (their returned promises have\n   * resolved/rejected);\n   *\n   * @param {function} task The function whose execution will be associated\n   * with the current Queue instance;\n   * @returns {function} The \"proxy\" function bound to the current Queue\n   * instance;\n   */\n  bind(task) {\n    return bind(this, task);\n  }\n\n  bindSafe(task, onError) {\n    const boundTask = bind(this, task);\n    return async function safeTask(...args) {\n      try {\n        return await boundTask(...args);\n      } catch (e) {\n        onError(e);\n      }\n    };\n  }\n}\n\n/**\n * Utils\n */\n\nfunction bind(queue, task) {\n  const cleaner = clean.bind(null, queue);\n  return async function boundTask(...args) {\n    if (queue.size >= queue.limit) {\n      throw new Error('Queue limit reached');\n    }\n    const promise = chain(queue.awaiting, task, args);\n    queue.awaiting = promise.then(cleaner, cleaner);\n    queue.size++;\n    return promise;\n  };\n}\n\nfunction clean(queue) {\n  if (queue.size > 0 && --queue.size === 0) {\n    queue.awaiting = null;\n  }\n}\n\nasync function chain(prev, task, args) {\n  await prev;\n  return task(...args);\n}\n","/**\n * Constants\n */\n\nconst SEPARATOR = '/';\n\n/**\n * API\n */\n\n/**\n * Add values to a list hierarchically.\n *  @ For example:\n *    addToList([], 'a', 'b', 'c');\n *  will add the following hierarchy to the list:\n *    a > b > c\n *  resulting in the following array:\n *    [['a', [['b', ['c']]]]]\n * @param {Array} list The target list;\n * @param  {...string} values The values to be hierarchically added to the list;\n * @returns {Array} Returns the provided list possibly updated with the given\n *  values or null when a bad list (not an actual array) is provided\n */\nfunction addToList(list, ...values) {\n  if (Array.isArray(list)) {\n    if (values.length > 0) {\n      addValuesToList(list, values);\n    }\n    return list;\n  }\n  return null;\n}\n\n/**\n * Iterates through the provided hierarchical list executing the callback\n * once for each leaf-node of the tree. The ancestors of the leaf-node being\n * visited are passed to the callback function along with the leaf-node in\n * the exact same order they appear on the tree (from root to leaf);\n *  @ For example, if the hierachy `a > b > c` appears on the tree (\"a\" being\n *    the root and \"c\" being the leaf) the callback function will be called as:\n *  callback('a', 'b', 'c');\n * @param {Array} list The hierarchical list to be iterated\n * @param {function} callback The callback which will be exected once for\n *  each leaf-node of the hierarchical list;\n * @returns {Array} Returns the provided list or null for bad arguments;\n */\nfunction forEach(list, callback) {\n  if (Array.isArray(list)) {\n    if (typeof callback === 'function') {\n      forEachValue(list, callback);\n    }\n    return list;\n  }\n  return null;\n}\n\n/**\n * Retrieves an item from the given hierarchical list based on an index (number)\n * or a path (string).\n *  @ For example:\n *    getItem(list, '1/0/4')\n *  will retrieve the fourth grandchild, from the first child of the second\n *  element of the list;\n * @param {Array} list The source list;\n * @param {string|number} indexOrPath The index of the element inside list\n *  (number) or the path to reach the desired element (string). The slash \"/\"\n *  character is cosidered the path separator;\n */\nfunction getItem(list, indexOrPath) {\n  if (Array.isArray(list)) {\n    let subpath = null;\n    let index = typeof indexOrPath === 'number' ? indexOrPath : -1;\n    if (typeof indexOrPath === 'string') {\n      const separator = indexOrPath.indexOf(SEPARATOR);\n      if (separator > 0) {\n        index = parseInt(indexOrPath.slice(0, separator), 10);\n        if (separator + 1 < indexOrPath.length) {\n          subpath = indexOrPath.slice(separator + 1, indexOrPath.length);\n        }\n      } else {\n        index = parseInt(indexOrPath, 10);\n      }\n    }\n    if (index >= 0 && index < list.length) {\n      const item = list[index];\n      if (isSublist(item)) {\n        if (subpath !== null) {\n          return getItem(item[1], subpath);\n        }\n        return item[0];\n      }\n      return item;\n    }\n  }\n}\n\n/**\n * Pretty-print the provided hierarchical list;\n * @param {Array} list The source list;\n * @returns {string} The textual representation of the hierarchical list;\n */\nfunction print(list) {\n  let text = '';\n  if (Array.isArray(list)) {\n    let prev = [];\n    forEachValue(list, function(...args) {\n      let prevLen = prev.length;\n      for (let i = 0, l = args.length; i < l; ++i) {\n        if (i < prevLen && args[i] === prev[i]) {\n          continue;\n        }\n        text += '  '.repeat(i) + args[i] + '\\n';\n      }\n      prev = args;\n    });\n  }\n  return text;\n}\n\n/**\n * Utils\n */\n\nfunction forEachValue(list, callback) {\n  for (let i = 0, l = list.length; i < l; ++i) {\n    let item = list[i];\n    if (isSublist(item)) {\n      if (item[1].length > 0) {\n        forEachValue(item[1], callback.bind(null, item[0]));\n        continue;\n      }\n      item = item[0];\n    }\n    callback(item);\n  }\n}\n\nfunction addValuesToList(list, values) {\n  let value = values.shift();\n  let index = add(list, value);\n  if (index >= 0) {\n    if (values.length > 0) {\n      let sublist = list[index];\n      if (!isSublist(sublist)) {\n        sublist = toSublist(value);\n        list[index] = sublist;\n      }\n      return addValuesToList(sublist[1], values);\n    }\n    return true;\n  }\n  return false;\n}\n\nfunction add(list, value) {\n  let index = find(list, value);\n  if (index === -2) {\n    index = list.push(value) - 1;\n  }\n  return index;\n}\n\nfunction find(list, value) {\n  if (typeof value === 'string') {\n    for (let i = 0, l = list.length; i < l; ++i) {\n      let item = list[i];\n      if (item === value || (isSublist(item) && item[0] === value)) {\n        return i;\n      }\n    }\n    return -2;\n  }\n  return -1;\n}\n\nfunction isSublist(subject) {\n  return (\n    Array.isArray(subject) &&\n    subject.length === 2 &&\n    typeof subject[0] === 'string' &&\n    Array.isArray(subject[1])\n  );\n}\n\nfunction toSublist(value) {\n  return [value + '', []];\n}\n\n/**\n * Exports\n */\n\nexport { addToList, getItem, forEach, print };\n","import makeDeferred from './makeDeferred';\n\n/**\n * Constants\n */\n\nconst TYPE = Symbol('Type');\nconst TASK = Symbol('Task');\nconst LIST = Symbol('List');\n\n/**\n * Public Methods\n */\n\n/**\n * Creates an instance of a task list\n * @returns {Object} A task list object\n */\nfunction createList() {\n  return objectWithType(LIST, {\n    head: null,\n    named: Object.create(null),\n    observers: [],\n  });\n}\n\n/**\n * Checks if the given argument is a List instance\n * @param {any} subject The value to be tested\n * @returns {boolean} true if a valid List instance is given, false otherwise\n */\nfunction isList(subject) {\n  return isOfType(LIST, subject);\n}\n\n/**\n * Creates an instance of a task\n * @param {Object} list The List instance related to this task\n * @param {Object} next The next Task instance to link to\n * @returns {Object} A task object\n */\nfunction createTask(list, next) {\n  return objectWithType(TASK, {\n    list: isList(list) ? list : null,\n    next: isTask(next) ? next : null,\n    failed: false,\n    awaiting: null,\n    progress: 0.0,\n  });\n}\n\n/**\n * Checks if the given argument is a Task instance\n * @param {any} subject The value to be tested\n * @returns {boolean} true if a valid Task instance is given, false otherwise\n */\nfunction isTask(subject) {\n  return isOfType(TASK, subject);\n}\n\n/**\n * Appends a new Task to the given List instance and notifies the list observers\n * @param {Object} list A List instance\n * @returns {Object} The new Task instance appended to the List or null if the\n *  given List instanc is not valid\n */\nfunction increaseList(list) {\n  if (isList(list)) {\n    const task = createTask(list, list.head);\n    list.head = task;\n    notify(list, getOverallProgress(list));\n    return task;\n  }\n  return null;\n}\n\n/**\n * Updates the internal progress value of the given Task instance and notifies\n * the observers of the associated list.\n * @param {Object} task The Task instance to be updated\n * @param {number} value A number between 0 (inclusive) and 1 (exclusive)\n *  indicating the progress of the task;\n * @returns {void} Nothing is returned\n */\nfunction update(task, value) {\n  if (isTask(task) && isValidProgress(value) && value < 1.0) {\n    if (task.progress !== value) {\n      task.progress = value;\n      if (isList(task.list)) {\n        notify(task.list, getOverallProgress(task.list));\n      }\n    }\n  }\n}\n\n/**\n * Sets a Task instance as finished (progress = 1.0), freezes it in order to\n * prevent further modifications and notifies the observers of the associated\n * list.\n * @param {Object} task The Task instance to be finalized\n * @returns {void} Nothing is returned\n */\nfunction finish(task) {\n  if (isTask(task)) {\n    task.progress = 1.0;\n    task.awaiting = null;\n    Object.freeze(task);\n    if (isList(task.list)) {\n      notify(task.list, getOverallProgress(task.list));\n    }\n  }\n}\n\n/**\n * Generate a summarized snapshot of the current status of the given task List\n * @param {Object} list The List instance to be scanned\n * @returns {Object} An obeject representing the summarized status of the list\n */\nfunction getOverallProgress(list) {\n  const status = createStatus();\n  if (isList(list)) {\n    let task = list.head;\n    while (isTask(task)) {\n      status.total++;\n      if (isValidProgress(task.progress)) {\n        status.partial += task.progress;\n        if (task.progress === 1.0 && task.failed) status.failures++;\n      }\n      task = task.next;\n    }\n  }\n  if (status.total > 0) {\n    status.progress = status.partial / status.total;\n  }\n  return Object.freeze(status);\n}\n\n/**\n * Adds a Task instance to the given list that waits on a given \"thenable\". When\n * the thenable resolves the \"finish\" method is called on the newly created\n * instance thus notifying the observers of the list.\n * @param {Object} list The List instance to which the new task will be added\n * @param {Object|Promise} thenable The thenable to be waited on\n * @returns {Object} A reference to the newly created Task;\n */\nfunction waitOn(list, thenable) {\n  const task = increaseList(list);\n  if (isTask(task)) {\n    task.awaiting = Promise.resolve(thenable).then(\n      function() {\n        finish(task);\n      },\n      function() {\n        task.failed = true;\n        finish(task);\n      }\n    );\n    return task;\n  }\n  return null;\n}\n\n/**\n * Adds a Task instance to the given list using a deferred (a Promise that can\n * be externally resolved) notifying the observers of the list.\n * @param {Object} list The List instance to which the new task will be added\n * @returns {Object} An object with references to the created deferred and task\n */\nfunction addDeferred(list) {\n  const deferred = makeDeferred();\n  const task = waitOn(list, deferred.promise);\n  return Object.freeze({\n    deferred,\n    task,\n  });\n}\n\n/**\n * Assigns a name to a specific task of the list\n * @param {Object} list The List instance whose task will be named\n * @param {Object} task The specified Task instance\n * @param {string} name The name of the task\n * @returns {boolean} Returns true on success, false otherwise\n */\nfunction setTaskName(list, task, name) {\n  if (\n    contains(list, task) &&\n    list.named !== null &&\n    typeof list.named === 'object' &&\n    typeof name === 'string'\n  ) {\n    list.named[name] = task;\n    return true;\n  }\n  return false;\n}\n\n/**\n * Retrieves a task by name\n * @param {Object} list The List instance whose task will be retrieved\n * @param {string} name The name of the task to be retrieved\n * @returns {Object} The Task instance or null if not found\n */\nfunction getTaskByName(list, name) {\n  if (\n    isList(list) &&\n    list.named !== null &&\n    typeof list.named === 'object' &&\n    typeof name === 'string'\n  ) {\n    const task = list.named[name];\n    if (isTask(task)) {\n      return task;\n    }\n  }\n  return null;\n}\n\n/**\n * Adds an observer (callback function) to a given List instance\n * @param {Object} list The List instance to which the observer will be appended\n * @param {Function} observer The observer (function) that will be executed\n *  every time a change happens within the list\n * @returns {boolean} Returns true on success and false otherewise\n */\nfunction addObserver(list, observer) {\n  if (\n    isList(list) &&\n    Array.isArray(list.observers) &&\n    typeof observer === 'function'\n  ) {\n    list.observers.push(observer);\n    return true;\n  }\n  return false;\n}\n\n/**\n * Removes an observer (callback function) from a given List instance\n * @param {Object} list The instance List from which the observer will removed\n * @param {Function} observer The observer function to be removed\n * @returns {boolean} Returns true on success and false otherewise\n */\nfunction removeObserver(list, observer) {\n  if (\n    isList(list) &&\n    Array.isArray(list.observers) &&\n    list.observers.length > 0\n  ) {\n    const index = list.observers.indexOf(observer);\n    if (index >= 0) {\n      list.observers.splice(index, 1);\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Utils\n */\n\nfunction createStatus() {\n  return Object.seal({\n    total: 0,\n    partial: 0.0,\n    progress: 0.0,\n    failures: 0,\n  });\n}\n\nfunction objectWithType(type, object) {\n  return Object.seal(Object.defineProperty(object, TYPE, { value: type }));\n}\n\nfunction isOfType(type, subject) {\n  return (\n    subject !== null && typeof subject === 'object' && subject[TYPE] === type\n  );\n}\n\nfunction isValidProgress(value) {\n  return typeof value === 'number' && value >= 0.0 && value <= 1.0;\n}\n\nfunction contains(list, task) {\n  if (isList(list) && isTask(task)) {\n    let item = list.head;\n    while (isTask(item)) {\n      if (item === task) {\n        return true;\n      }\n      item = item.next;\n    }\n  }\n  return false;\n}\n\nfunction notify(list, data) {\n  if (\n    isList(list) &&\n    Array.isArray(list.observers) &&\n    list.observers.length > 0\n  ) {\n    list.observers.slice().forEach(function(observer) {\n      if (typeof observer === 'function') {\n        try {\n          observer(data, list);\n        } catch (e) {\n          /* Oops! */\n        }\n      }\n    });\n  }\n}\n\n/**\n * Exports\n */\n\nexport {\n  createList,\n  isList,\n  createTask,\n  isTask,\n  increaseList,\n  update,\n  finish,\n  getOverallProgress,\n  waitOn,\n  addDeferred,\n  setTaskName,\n  getTaskByName,\n  addObserver,\n  removeObserver,\n};\n","import ObjectPath from './objectPath';\nimport StackManager from './StackManager.js';\nimport absoluteUrl from './absoluteUrl';\nimport addServers from './addServers';\nimport guid from './guid';\nimport sortBy from './sortBy.js';\nimport studyMetadataManager from './studyMetadataManager';\nimport writeScript from './writeScript.js';\nimport DicomLoaderService from './dicomLoaderService.js';\nimport b64toBlob from './b64toBlob.js';\nimport loadAndCacheDerivedDisplaySets from './loadAndCacheDerivedDisplaySets.js';\nimport * as urlUtil from './urlUtil';\nimport makeDeferred from './makeDeferred';\nimport makeCancelable from './makeCancelable';\nimport hotkeys from './hotkeys';\nimport Queue from './Queue';\nimport isDicomUid from './isDicomUid';\nimport resolveObjectPath from './resolveObjectPath';\nimport * as hierarchicalListUtils from './hierarchicalListUtils';\nimport * as progressTrackingUtils from './progressTrackingUtils';\n\nconst utils = {\n  guid,\n  ObjectPath,\n  absoluteUrl,\n  addServers,\n  sortBy,\n  writeScript,\n  b64toBlob,\n  StackManager,\n  studyMetadataManager,\n  DicomLoaderService,\n  urlUtil,\n  loadAndCacheDerivedDisplaySets,\n  makeDeferred,\n  makeCancelable,\n  hotkeys,\n  Queue,\n  isDicomUid,\n  resolveObjectPath,\n  hierarchicalListUtils,\n  progressTrackingUtils,\n};\n\nexport {\n  guid,\n  ObjectPath,\n  absoluteUrl,\n  addServers,\n  sortBy,\n  writeScript,\n  b64toBlob,\n  StackManager,\n  studyMetadataManager,\n  DicomLoaderService,\n  urlUtil,\n  loadAndCacheDerivedDisplaySets,\n  makeDeferred,\n  makeCancelable,\n  hotkeys,\n  Queue,\n  isDicomUid,\n  resolveObjectPath,\n  hierarchicalListUtils,\n  progressTrackingUtils,\n};\n\nexport default utils;\n","/* jshint -W060 */\nimport absoluteUrl from './absoluteUrl';\n\nexport default function writeScript(fileName, callback) {\n  const script = document.createElement('script');\n  script.src = absoluteUrl(fileName);\n  script.onload = () => {\n    if (typeof callback === 'function') {\n      callback(script);\n    }\n  };\n\n  document.body.appendChild(script);\n}\n","export default function makeCancelable(thenable) {\n  let isCanceled = false;\n  const promise = Promise.resolve(thenable).then(\n    function(result) {\n      if (isCanceled) throw Object.freeze({ isCanceled });\n      return result;\n    },\n    function(error) {\n      if (isCanceled) throw Object.freeze({ isCanceled, error });\n      throw error;\n    }\n  );\n  return Object.assign(Object.create(promise), {\n    then: promise.then.bind(promise),\n    cancel() {\n      isCanceled = true;\n    },\n  });\n}\n","export default function isDicomUid(subject) {\n  const regex = /^\\d+(?:\\.\\d+)*$/;\n  return typeof subject === 'string' && regex.test(subject.trim());\n}\n","export default function resolveObjectPath(root, path, defaultValue) {\n  if (root !== null && typeof root === 'object' && typeof path === 'string') {\n    let value,\n      separator = path.indexOf('.');\n    if (separator >= 0) {\n      return resolveObjectPath(\n        root[path.slice(0, separator)],\n        path.slice(separator + 1, path.length),\n        defaultValue\n      );\n    }\n    value = root[path];\n    return value === undefined && defaultValue !== undefined\n      ? defaultValue\n      : value;\n  }\n}\n","import OHIFError from './OHIFError';\n\n/**\n * Abstract class to fetch study metadata.\n */\nexport class StudyMetadataSource {\n  /**\n   * Get study metadata for a study with given study InstanceUID.\n   * @param {String} studyInstanceUID Study InstanceUID.\n   */\n  getByInstanceUID(studyInstanceUID) {\n    /**\n     * Please override this method on a specialized class.\n     */\n    throw new OHIFError(\n      'StudyMetadataSource::getByInstanceUID is not overriden. Please, override it in a specialized class. See OHIFStudyMetadataSource for example'\n    );\n  }\n\n  /**\n   * Load study info and study metadata for a given study into the viewer.\n   * @param {StudyMetadata} study StudyMetadata object.\n   */\n  loadStudy(study) {\n    /**\n     * Please override this method on a specialized class.\n     */\n    throw new OHIFError(\n      'StudyMetadataSource::loadStudy is not overriden. Please, override it in a specialized class. See OHIFStudyMetadataSource for example'\n    );\n  }\n}\n","import DICOMWeb from '../../../DICOMWeb';\n\n/**\n * Function to get series sequence (sequence of pepeating items where each\n * item includes the attributes of one or more series) based on a given sopInstance.\n *\n * @param {Object} instance The sop instance\n * @returns {Promise} Referenced series sequence\n */\nconst getReferencedSeriesSequence = instance => {\n  const referencedSeriesSequenceRaw = instance['00081115'];\n\n  const referencedSeriesSequence = [];\n\n  if (referencedSeriesSequenceRaw && referencedSeriesSequenceRaw.Value) {\n    referencedSeriesSequenceRaw.Value.forEach(referencedSeries => {\n      const referencedSeriesInstanceUID = DICOMWeb.getString(\n        referencedSeries['0020000E']\n      );\n\n      const referencedInstanceSequenceRaw = referencedSeries['0008114A'];\n      const referencedInstanceSequence = [];\n\n      referencedInstanceSequenceRaw.Value.forEach(referencedInstance => {\n        referencedInstanceSequence.push({\n          referencedSOPClassUID: DICOMWeb.getString(\n            referencedInstance['00081150']\n          ),\n          referencedSOPInstanceUID: DICOMWeb.getString(\n            referencedInstance['00081155']\n          ),\n        });\n      });\n\n      referencedSeriesSequence.push({\n        referencedSeriesInstanceUID,\n        referencedInstanceSequence,\n      });\n    });\n  }\n\n  return referencedSeriesSequence;\n};\n\nexport default getReferencedSeriesSequence;\n","import DICOMWeb from '../../../DICOMWeb';\nimport metadataProvider from '../../../classes/MetadataProvider';\nimport getWADORSImageId from '../../../utils/getWADORSImageId';\nimport cornerstoneWADOImageLoader from 'cornerstone-wado-image-loader';\nimport getReferencedSeriesSequence from './getReferencedSeriesSequence';\n\n/**\n * Create a plain JS object that describes a study (a study descriptor object)\n * @param {Object} server Object with server configuration parameters\n * @param {Object} aSopInstance a SOP Instance from which study information will be added\n */\nfunction createStudy(server, aSopInstance) {\n  // TODO: Pass a reference ID to the server instead of including the URLs here\n  return {\n    series: [],\n    seriesMap: Object.create(null),\n    seriesLoader: null,\n    wadoUriRoot: server.wadoUriRoot,\n    wadoRoot: server.wadoRoot,\n    qidoRoot: server.qidoRoot,\n    PatientName: DICOMWeb.getName(aSopInstance['00100010']),\n    PatientID: DICOMWeb.getString(aSopInstance['00100020']),\n    PatientAge: DICOMWeb.getNumber(aSopInstance['00101010']),\n    PatientSize: DICOMWeb.getNumber(aSopInstance['00101020']),\n    PatientWeight: DICOMWeb.getNumber(aSopInstance['00101030']),\n    AccessionNumber: DICOMWeb.getString(aSopInstance['00080050']),\n    StudyTime: DICOMWeb.getString(aSopInstance['00080030']),\n    StudyDate: DICOMWeb.getString(aSopInstance['00080020']),\n    FrameOfReferenceUID: DICOMWeb.getString(aSopInstance['00200052']),\n    ReferencedSeriesSequence: getReferencedSeriesSequence(aSopInstance),\n    modalities: DICOMWeb.getString(aSopInstance['00080061']), // TODO -> Rename this.. it'll take a while to not mess this one up.\n    StudyDescription: DICOMWeb.getString(aSopInstance['00081030']),\n    NumberOfStudyRelatedInstances: DICOMWeb.getString(aSopInstance['00201208']),\n    StudyInstanceUID: DICOMWeb.getString(aSopInstance['0020000D']),\n    InstitutionName: DICOMWeb.getString(aSopInstance['00080080']),\n  };\n}\n\n/** Returns a WADO url for an instance\n *\n * @param StudyInstanceUID\n * @param SeriesInstanceUID\n * @param SOPInstanceUID\n * @returns  {string}\n */\nfunction buildInstanceWadoUrl(\n  server,\n  StudyInstanceUID,\n  SeriesInstanceUID,\n  SOPInstanceUID\n) {\n  // TODO: This can be removed, since DICOMWebClient has the same function. Not urgent, though\n  const params = [];\n\n  params.push('requestType=WADO');\n  params.push(`studyUID=${StudyInstanceUID}`);\n  params.push(`seriesUID=${SeriesInstanceUID}`);\n  params.push(`objectUID=${SOPInstanceUID}`);\n  params.push('contentType=application/dicom');\n  params.push('transferSyntax=*');\n\n  const paramString = params.join('&');\n\n  return `${server.wadoUriRoot}?${paramString}`;\n}\n\nfunction buildInstanceWadoRsUri(\n  server,\n  StudyInstanceUID,\n  SeriesInstanceUID,\n  SOPInstanceUID\n) {\n  return `${server.wadoRoot}/studies/${StudyInstanceUID}/series/${SeriesInstanceUID}/instances/${SOPInstanceUID}`;\n}\n\nfunction buildInstanceFrameWadoRsUri(\n  server,\n  StudyInstanceUID,\n  SeriesInstanceUID,\n  SOPInstanceUID,\n  frame\n) {\n  const baseWadoRsUri = buildInstanceWadoRsUri(\n    server,\n    StudyInstanceUID,\n    SeriesInstanceUID,\n    SOPInstanceUID\n  );\n  frame = frame != null || 1;\n\n  return `${baseWadoRsUri}/frames/${frame}`;\n}\n\nasync function makeSOPInstance(server, study, instance) {\n  const naturalizedInstance = await metadataProvider.addInstance(instance, {\n    server,\n  });\n\n  const {\n    StudyInstanceUID,\n    SeriesInstanceUID,\n    SOPInstanceUID,\n  } = naturalizedInstance;\n\n  let series = study.seriesMap[SeriesInstanceUID];\n\n  if (!series) {\n    series = {\n      SeriesInstanceUID,\n      SeriesDescription: naturalizedInstance.SeriesDescription,\n      Modality: naturalizedInstance.Modality,\n      SeriesNumber: naturalizedInstance.SeriesNumber,\n      SeriesDate: naturalizedInstance.SeriesDate,\n      SeriesTime: naturalizedInstance.SeriesTime,\n      instances: [],\n    };\n    study.seriesMap[SeriesInstanceUID] = series;\n    study.series.push(series);\n  }\n\n  const wadouri = buildInstanceWadoUrl(\n    server,\n    StudyInstanceUID,\n    SeriesInstanceUID,\n    SOPInstanceUID\n  );\n  const baseWadoRsUri = buildInstanceWadoRsUri(\n    server,\n    StudyInstanceUID,\n    SeriesInstanceUID,\n    SOPInstanceUID\n  );\n  const wadorsuri = buildInstanceFrameWadoRsUri(\n    server,\n    StudyInstanceUID,\n    SeriesInstanceUID,\n    SOPInstanceUID\n  );\n\n  const sopInstance = {\n    metadata: naturalizedInstance,\n    baseWadoRsUri,\n    wadouri,\n    wadorsuri,\n    wadoRoot: server.wadoRoot,\n    imageRendering: server.imageRendering,\n    thumbnailRendering: server.thumbnailRendering,\n  };\n\n  series.instances.push(sopInstance);\n\n  if (\n    sopInstance.thumbnailRendering === 'wadors' ||\n    sopInstance.imageRendering === 'wadors'\n  ) {\n    // If using WADO-RS for either images or thumbnails,\n    // Need to add this to cornerstoneWADOImageLoader's provider\n    // (it won't be hit on cornerstone.metaData.get, but cornerstoneWADOImageLoader\n    // will cry if you don't add data to cornerstoneWADOImageLoader.wadors.metaDataManager).\n\n    const wadoRSMetadata = Object.assign(instance);\n\n    const { NumberOfFrames } = sopInstance.metadata;\n\n    if (NumberOfFrames) {\n      for (let i = 0; i < NumberOfFrames; i++) {\n        const wadorsImageId = getWADORSImageId(sopInstance, i);\n\n        console.log(wadorsImageId);\n\n        cornerstoneWADOImageLoader.wadors.metaDataManager.add(\n          wadorsImageId,\n          wadoRSMetadata\n        );\n      }\n    } else {\n      const wadorsImageId = getWADORSImageId(sopInstance);\n\n      console.log(wadorsImageId);\n\n      cornerstoneWADOImageLoader.wadors.metaDataManager.add(\n        wadorsImageId,\n        wadoRSMetadata\n      );\n    }\n  }\n\n  return sopInstance;\n}\n\n/**\n * Add a list of SOP Instances to a given study object descriptor\n * @param {Object} server Object with server configuration parameters\n * @param {Object} study The study descriptor to which the given SOP instances will be added\n * @param {Array} sopInstanceList A list of SOP instance objects\n */\nasync function addInstancesToStudy(server, study, sopInstanceList) {\n  return Promise.all(\n    sopInstanceList.map(function(sopInstance) {\n      return makeSOPInstance(server, study, sopInstance);\n    })\n  );\n}\n\nconst createStudyFromSOPInstanceList = async (server, sopInstanceList) => {\n  if (Array.isArray(sopInstanceList) && sopInstanceList.length > 0) {\n    const firstSopInstance = sopInstanceList[0];\n    const study = createStudy(server, firstSopInstance);\n    await addInstancesToStudy(server, study, sopInstanceList);\n    return study;\n  }\n  throw new Error('Failed to create study out of provided SOP instance list');\n};\n\nexport { createStudyFromSOPInstanceList, addInstancesToStudy };\n","/**\n * Class to define inheritance of load retrieve strategy.\n * The process can be async load (lazy) or sync load\n *\n * There are methods that must be implemented at consumer level\n * To retrieve study call execLoad\n */\nexport default class RetrieveMetadataLoader {\n  /**\n   * @constructor\n   * @param {Object} server Object with server configuration parameters\n   * @param {Array} studyInstanceUID Study instance ui to be retrieved\n   * @param {Object} [filters] - Object containing filters to be applied on retrieve metadata process\n   * @param {string} [filter.seriesInstanceUID] - series instance uid to filter results against\n   */\n  constructor(server, studyInstanceUID, filters = {}) {\n    this.server = server;\n    this.studyInstanceUID = studyInstanceUID;\n    this.filters = filters;\n  }\n\n  async execLoad() {\n    await this.configLoad();\n    const preLoadData = await this.preLoad();\n    const loadData = await this.load(preLoadData);\n    const postLoadData = await this.posLoad(loadData);\n\n    return postLoadData;\n  }\n\n  /**\n   * It iterates over given loaders running each one. Loaders parameters must be bind when getting it.\n   * @param {Array} loaders - array of loader to retrieve data.\n   */\n  async runLoaders(loaders) {\n    let result;\n    for (const loader of loaders) {\n      try {\n        result = await loader();\n        if (result && result.length) {\n          break; // closes iterator in case data is retrieved successfully\n        }\n      } catch (e) {\n        throw e;\n      }\n    }\n\n    if (loaders.next().done && !result) {\n      throw new Error('RetrieveMetadataLoader failed');\n    }\n\n    return result;\n  }\n\n  // Methods to be overwrite\n  async configLoad() {}\n  async preLoad() {}\n  async load(preLoadData) {}\n  async posLoad(loadData) {}\n}\n","import { api } from 'dicomweb-client';\nimport DICOMWeb from '../../../DICOMWeb/';\nimport { createStudyFromSOPInstanceList } from './studyInstanceHelpers';\nimport RetrieveMetadataLoader from './retrieveMetadataLoader';\n\nimport errorHandler from '../../../errorHandler';\n\n/**\n * Class for sync load of study metadata.\n * It inherits from RetrieveMetadataLoader\n *\n * A list of loaders (getLoaders) can be created so, it will be applied a fallback load strategy.\n * I.e Retrieve metadata using all loaders possibilities.\n */\nexport default class RetrieveMetadataLoaderSync extends RetrieveMetadataLoader {\n  getOptions() {\n    const { studyInstanceUID, filters } = this;\n\n    const options = {\n      studyInstanceUID,\n    };\n\n    const { seriesInstanceUID } = filters;\n    if (seriesInstanceUID) {\n      options['seriesInstanceUID'] = seriesInstanceUID;\n    }\n\n    return options;\n  }\n\n  /**\n   * @returns {Array} Array of loaders. To be consumed as queue\n   */\n  *getLoaders() {\n    const loaders = [];\n    const {\n      studyInstanceUID,\n      filters: { seriesInstanceUID } = {},\n      client,\n    } = this;\n\n    if (seriesInstanceUID) {\n      loaders.push(\n        client.retrieveSeriesMetadata.bind(client, {\n          studyInstanceUID,\n          seriesInstanceUID,\n        })\n      );\n    }\n\n    loaders.push(\n      client.retrieveStudyMetadata.bind(client, { studyInstanceUID })\n    );\n\n    yield* loaders;\n  }\n\n  configLoad() {\n    const { server } = this;\n    const client = new api.DICOMwebClient({\n      url: server.wadoRoot,\n      headers: DICOMWeb.getAuthorizationHeader(server),\n      errorInterceptor: errorHandler.getHTTPErrorHandler(),\n    });\n\n    this.client = client;\n  }\n\n  async load(preLoadData) {\n    const loaders = this.getLoaders();\n    const result = this.runLoaders(loaders);\n    return result;\n  }\n\n  async posLoad(loadData) {\n    const { server } = this;\n    return createStudyFromSOPInstanceList(server, loadData);\n  }\n}\n","import DICOMWeb from '../DICOMWeb/';\nimport isLowPriorityModality from '../utils/isLowPriorityModality';\n\nconst INFO = Symbol('INFO');\n\n/**\n * Creates an object with processed series information and saves its reference\n * inside the series object itself.\n * @param {Object} series The raw series object\n * @returns {Object} object containing some useful info from given series\n */\nexport default function getSeriesInfo(series) {\n  let info = series[INFO];\n  if (!info) {\n    const Modality = DICOMWeb.getString(series['00080060'], '').toUpperCase();\n    info = Object.freeze({\n      Modality,\n      isLowPriority: isLowPriorityModality(Modality),\n      SeriesInstanceUID: DICOMWeb.getString(series['0020000E']),\n      SeriesNumber: DICOMWeb.getNumber(series['00200011'], 0) || 0,\n    });\n    series[INFO] = info;\n  }\n  return info;\n}\n","import getSeriesInfo from './getSeriesInfo';\n\n/**\n * Series sorting criteria: series considered low priority are moved to the end\n * of the list and series number is used to break ties\n * @param {Object} firstSeries\n * @param {Object} secondSeries\n */\nfunction seriesInfoSortingCriteria(firstSeries, secondSeries) {\n  const a = getSeriesInfo(firstSeries);\n  const b = getSeriesInfo(secondSeries);\n  if (!a.isLowPriority && b.isLowPriority) {\n    return -1;\n  }\n  if (a.isLowPriority && !b.isLowPriority) {\n    return 1;\n  }\n  return a.SeriesNumber - b.SeriesNumber;\n}\n\nconst seriesSortCriteria = {\n  default: (a, b) => a.SeriesNumber - b.SeriesNumber,\n  seriesInfoSortingCriteria,\n};\n\nconst instancesSortCriteria = {\n  default: (a, b) => a.InstanceNumber - b.InstanceNumber,\n};\n\nconst sortingCriteria = {\n  seriesSortCriteria,\n  instancesSortCriteria,\n};\n\n/**\n * Sorts given series (given param is modified)\n * The default criteria is based on series number in ascending order.\n *\n * @param {Array} series List of series\n * @param {function} seriesSortingCriteria method for sorting\n * @returns {Array} sorted series object\n */\nconst sortStudySeries = (\n  series,\n  seriesSortingCriteria = seriesSortCriteria.default\n) => {\n  return series.sort(seriesSortingCriteria);\n};\n\n/**\n * Sorts given instancesList (given param is modified)\n * The default criteria is based on instance number in ascending order.\n *\n * @param {Array} instancesList List of series\n * @param {function} instancesSortingCriteria method for sorting\n * @returns {Array} sorted instancesList object\n */\nconst sortStudyInstances = (\n  instancesList,\n  instancesSortingCriteria = instancesSortCriteria.default\n) => {\n  return instancesList.sort(instancesSortingCriteria);\n};\n\n/**\n * Sorts the series and instances (by default) inside a study instance based on sortingCriteria (given param is modified)\n * The default criteria is based on series and instance numbers in ascending order.\n *\n * @param {Object} study The study instance\n * @param {boolean} [deepSort = true] to sort instance also\n * @param {function} [seriesSortingCriteria = seriesSortCriteria.default] method for sorting series\n * @param {function} [instancesSortingCriteria = instancesSortCriteria.default] method for sorting instances\n * @returns {Object} sorted study object\n */\nexport default function sortStudy(\n  study,\n  deepSort = true,\n  seriesSortingCriteria = seriesSortCriteria.default,\n  instancesSortingCriteria = instancesSortCriteria.default\n) {\n  if (!study || !study.series) {\n    throw new Error('Insufficient study data was provided to sortStudy');\n  }\n\n  sortStudySeries(study.series, seriesSortingCriteria);\n\n  if (deepSort) {\n    study.series.forEach(series => {\n      sortStudyInstances(series.instances, instancesSortingCriteria);\n    });\n  }\n\n  return study;\n}\n\nexport { sortStudySeries, sortStudyInstances, sortingCriteria };\n","import { api } from 'dicomweb-client';\nimport dcmjs from 'dcmjs';\nimport DICOMWeb from '../../../DICOMWeb/';\nimport RetrieveMetadataLoader from './retrieveMetadataLoader';\nimport { sortStudySeries, sortingCriteria } from '../../sortStudy';\nimport getSeriesInfo from '../../getSeriesInfo';\nimport {\n  createStudyFromSOPInstanceList,\n  addInstancesToStudy,\n} from './studyInstanceHelpers';\n\nimport errorHandler from '../../../errorHandler';\n\nconst { naturalizeDataset } = dcmjs.data.DicomMetaDictionary;\n\n/**\n * Map series to an array of SeriesInstanceUID\n * @param {Arrays} series list of Series Instance UIDs\n * @returns {Arrays} A list of Series Instance UIDs\n */\nfunction mapStudySeries(series) {\n  return series.map(series => getSeriesInfo(series).SeriesInstanceUID);\n}\n\nfunction attachSeriesLoader(server, study, seriesLoader) {\n  study.seriesLoader = Object.freeze({\n    hasNext() {\n      return seriesLoader.hasNext();\n    },\n    async next() {\n      const series = await seriesLoader.next();\n      await addInstancesToStudy(server, study, series.sopInstances);\n      return study.seriesMap[series.seriesInstanceUID];\n    },\n  });\n}\n\n/**\n * Creates an immutable series loader object which loads each series sequentially using the iterator interface\n * @param {DICOMWebClient} dicomWebClient The DICOMWebClient instance to be used for series load\n * @param {string} studyInstanceUID The Study Instance UID from which series will be loaded\n * @param {Array} seriesInstanceUIDList A list of Series Instance UIDs\n * @returns {Object} Returns an object which supports loading of instances from each of given Series Instance UID\n */\nfunction makeSeriesAsyncLoader(\n  dicomWebClient,\n  studyInstanceUID,\n  seriesInstanceUIDList\n) {\n  return Object.freeze({\n    hasNext() {\n      return seriesInstanceUIDList.length > 0;\n    },\n    async next() {\n      const seriesInstanceUID = seriesInstanceUIDList.shift();\n      const sopInstances = await dicomWebClient.retrieveSeriesMetadata({\n        studyInstanceUID,\n        seriesInstanceUID,\n      });\n      return { studyInstanceUID, seriesInstanceUID, sopInstances };\n    },\n  });\n}\n\n/**\n * Class for async load of study metadata.\n * It inherits from RetrieveMetadataLoader\n *\n * It loads the one series and then append to seriesLoader the others to be consumed/loaded\n */\nexport default class RetrieveMetadataLoaderAsync extends RetrieveMetadataLoader {\n  configLoad() {\n    const { server } = this;\n\n    const client = new api.DICOMwebClient({\n      url: server.qidoRoot,\n      headers: DICOMWeb.getAuthorizationHeader(server),\n      errorInterceptor: errorHandler.getHTTPErrorHandler(),\n    });\n\n    this.client = client;\n  }\n\n  /**\n   * @returns {Array} Array of preLoaders. To be consumed as queue\n   */\n  *getPreLoaders() {\n    const preLoaders = [];\n    const {\n      studyInstanceUID,\n      filters: { seriesInstanceUID } = {},\n      client,\n    } = this;\n\n    if (seriesInstanceUID) {\n      const options = {\n        studyInstanceUID,\n        queryParams: { SeriesInstanceUID: seriesInstanceUID },\n      };\n      preLoaders.push(client.searchForSeries.bind(client, options));\n    }\n    // Fallback preloader\n    preLoaders.push(client.searchForSeries.bind(client, { studyInstanceUID }));\n\n    yield* preLoaders;\n  }\n\n  async preLoad() {\n    const preLoaders = this.getPreLoaders();\n\n    // seriesData is the result of the QIDO-RS Search For Series request\n    // It's an array of Objects containing DICOM Tag values at the Series level\n    const seriesData = await this.runLoaders(preLoaders);\n\n    const seriesSorted = sortStudySeries(\n      seriesData,\n      sortingCriteria.seriesSortCriteria.seriesInfoSortingCriteria\n    );\n    const seriesInstanceUIDsMap = mapStudySeries(seriesSorted);\n\n    return {\n      seriesInstanceUIDsMap,\n      seriesData,\n    };\n  }\n\n  async load(preLoadData) {\n    const { client, studyInstanceUID } = this;\n\n    const seriesAsyncLoader = makeSeriesAsyncLoader(\n      client,\n      studyInstanceUID,\n      preLoadData.seriesInstanceUIDsMap\n    );\n\n    const firstSeries = await seriesAsyncLoader.next();\n\n    return {\n      sopInstances: firstSeries.sopInstances,\n      asyncLoader: seriesAsyncLoader,\n      seriesData: preLoadData.seriesData,\n    };\n  }\n\n  async posLoad(loadData) {\n    const { server } = this;\n\n    const { sopInstances, asyncLoader, seriesData } = loadData;\n\n    const study = await createStudyFromSOPInstanceList(server, sopInstances);\n\n    // TODO: Should this be in a helper\n    const seriesDataNaturalized = seriesData.map(naturalizeDataset);\n\n    seriesDataNaturalized.forEach((series, idx) => {\n      const seriesDataFromQIDO = {\n        SeriesInstanceUID: series.SeriesInstanceUID,\n        SeriesDescription: series.SeriesDescription,\n        SeriesNumber: series.SeriesNumber,\n        Modality: series.Modality,\n        instances: [],\n      };\n\n      if (study.series[idx]) {\n        study.series[idx] = Object.assign(\n          seriesDataFromQIDO,\n          study.series[idx]\n        );\n      } else {\n        study.series[idx] = seriesDataFromQIDO;\n      }\n\n      study.seriesMap[series.SeriesInstanceUID] = study.series[idx];\n    });\n\n    if (asyncLoader.hasNext()) {\n      attachSeriesLoader(server, study, asyncLoader);\n    }\n\n    return study;\n  }\n}\n","import RetrieveMetadataLoaderSync from './retrieveMetadataLoaderSync';\nimport RetrieveMetadataLoaderAsync from './retrieveMetadataLoaderAsync';\n\n/**\n * Retrieve Study metadata from a DICOM server. If the server is configured to use lazy load, only the first series\n * will be loaded and the property \"studyLoader\" will be set to let consumer load remaining series as needed.\n *\n * @param {Object} server Object with server configuration parameters\n * @param {string} StudyInstanceUID The Study Instance UID of the study which needs to be loaded\n * @param {Object} [filters] - Object containing filters to be applied on retrieve metadata process\n * @param {string} [filter.seriesInstanceUID] - series instance uid to filter results against\n * @returns {Object} A study descriptor object\n */\nasync function RetrieveMetadata(server, StudyInstanceUID, filters = {}) {\n  const RetrieveMetadataLoader =\n    server.enableStudyLazyLoad != false\n      ? RetrieveMetadataLoaderAsync\n      : RetrieveMetadataLoaderSync;\n\n  const retrieveMetadataLoader = new RetrieveMetadataLoader(\n    server,\n    StudyInstanceUID,\n    filters\n  );\n  const studyMetadata = retrieveMetadataLoader.execLoad();\n\n  return studyMetadata;\n}\n\nexport default RetrieveMetadata;\n","import RetrieveMetadata from './services/wado/retrieveMetadata.js';\n\nconst moduleName = 'RetrieveStudyMetadata';\n// Cache for promises. Prevents unnecessary subsequent calls to the server\nconst StudyMetaDataPromises = new Map();\n\n/**\n * Retrieves study metadata\n *\n * @param {Object} server Object with server configuration parameters\n * @param {string} StudyInstanceUID The UID of the Study to be retrieved\n * @param {Object} [filters] - Object containing filters to be applied on retrieve metadata process\n * @param {string} [filter.seriesInstanceUID] - series instance uid to filter results against\n * @returns {Promise} that will be resolved with the metadata or rejected with the error\n */\nexport function retrieveStudyMetadata(server, StudyInstanceUID, filters) {\n  // @TODO: Whenever a study metadata request has failed, its related promise will be rejected once and for all\n  // and further requests for that metadata will always fail. On failure, we probably need to remove the\n  // corresponding promise from the \"StudyMetaDataPromises\" map...\n\n  if (!server) {\n    throw new Error(`${moduleName}: Required 'server' parameter not provided.`);\n  }\n  if (!StudyInstanceUID) {\n    throw new Error(\n      `${moduleName}: Required 'StudyInstanceUID' parameter not provided.`\n    );\n  }\n\n  // Already waiting on result? Return cached promise\n  if (StudyMetaDataPromises.has(StudyInstanceUID)) {\n    return StudyMetaDataPromises.get(StudyInstanceUID);\n  }\n\n  // Create a promise to handle the data retrieval\n  const promise = new Promise((resolve, reject) => {\n    RetrieveMetadata(server, StudyInstanceUID, filters).then(function(data) {\n      resolve(data);\n    }, reject);\n  });\n\n  // Store the promise in cache\n  StudyMetaDataPromises.set(StudyInstanceUID, promise);\n\n  return promise;\n}\n\n/**\n * Delete the cached study metadata retrieval promise to ensure that the browser will\n * re-retrieve the study metadata when it is next requested\n *\n * @param {String} StudyInstanceUID The UID of the Study to be removed from cache\n *\n */\nexport function deleteStudyMetadataPromise(StudyInstanceUID) {\n  if (StudyMetaDataPromises.has(StudyInstanceUID)) {\n    StudyMetaDataPromises.delete(StudyInstanceUID);\n  }\n}\n","import { studyMetadataManager } from '../utils';\n\nimport OHIFError from './OHIFError';\nimport { StudyMetadata } from './metadata/StudyMetadata';\nimport { StudyMetadataSource } from './StudyMetadataSource.js';\nimport { retrieveStudyMetadata } from '../studies/retrieveStudyMetadata.js';\n\nexport class OHIFStudyMetadataSource extends StudyMetadataSource {\n  /**\n   * Get study metadata for a study with given study InstanceUID\n   * @param server\n   * @param  {String} studyInstanceUID Study InstanceUID\n   * @return {Promise} A Promise object\n   */\n  getByInstanceUID(server, studyInstanceUID) {\n    return retrieveStudyMetadata(server, studyInstanceUID);\n  }\n\n  /**\n   * Load study info (OHIF.viewer.Studies) and study metadata (OHIF.viewer.StudyMetadataList) for a given study.\n   * @param {StudyMetadata} study StudyMetadata object.\n   */\n  loadStudy(study) {\n    if (!(study instanceof StudyMetadata)) {\n      throw new OHIFError(\n        'OHIFStudyMetadataSource::loadStudy study is not an instance of StudyMetadata'\n      );\n    }\n\n    return new Promise((resolve, reject) => {\n      const studyInstanceUID = study.getStudyInstanceUID();\n\n      if (study instanceof StudyMetadata) {\n        const alreadyLoaded = OHIF.viewer.Studies.findBy({\n          StudyInstanceUID: studyInstanceUID,\n        });\n\n        if (!alreadyLoaded) {\n          OHIFStudyMetadataSource._updateStudyCollections(study);\n        }\n\n        resolve(study);\n        return;\n      }\n\n      this.getByInstanceUID(studyInstanceUID)\n        .then(studyInfo => {\n          // Create study metadata object\n          const studyMetadata = new StudyMetadata(\n            studyInfo,\n            studyInfo.StudyInstanceUID\n          );\n\n          // Get Study display sets\n          const displaySets = studyMetadata.createDisplaySets();\n\n          OHIFStudyMetadataSource._updateStudyCollections(studyMetadata);\n          resolve(studyMetadata);\n        })\n        .catch(reject);\n    });\n  }\n\n  // Static methods\n  static _updateStudyCollections(studyMetadata) {\n    const studyInfo = studyMetadata.getData();\n\n    // Set some studyInfo properties\n    studyInfo.selected = true;\n    studyInfo.displaySets = studyMetadata.getDisplaySets();\n    studyMetadataManager.add(studyMetadata);\n  }\n}\n","import { InstanceMetadata, SeriesMetadata, StudyMetadata } from './metadata';\n\nimport CommandsManager from './CommandsManager.js';\nimport { DICOMFileLoadingListener } from './StudyLoadingListener';\nimport HotkeysManager from './HotkeysManager.js';\nimport ImageSet from './ImageSet';\nimport MetadataProvider from './MetadataProvider';\nimport OHIFError from './OHIFError.js';\nimport { OHIFStudyMetadataSource } from './OHIFStudyMetadataSource';\nimport { StackLoadingListener } from './StudyLoadingListener';\nimport { StudyLoadingListener } from './StudyLoadingListener';\nimport { StudyMetadataSource } from './StudyMetadataSource';\nimport { StudyPrefetcher } from './StudyPrefetcher';\nimport { TypeSafeCollection } from './TypeSafeCollection';\n\nexport {\n  OHIFStudyMetadataSource,\n  MetadataProvider,\n  CommandsManager,\n  HotkeysManager,\n  ImageSet,\n  StudyPrefetcher,\n  StudyLoadingListener,\n  StackLoadingListener,\n  DICOMFileLoadingListener,\n  StudyMetadata,\n  SeriesMetadata,\n  InstanceMetadata,\n  TypeSafeCollection,\n  OHIFError,\n  StudyMetadataSource,\n};\n\nconst classes = {\n  OHIFStudyMetadataSource,\n  MetadataProvider,\n  CommandsManager,\n  HotkeysManager,\n  ImageSet,\n  StudyPrefetcher,\n  StudyLoadingListener,\n  StackLoadingListener,\n  DICOMFileLoadingListener,\n  StudyMetadata,\n  SeriesMetadata,\n  InstanceMetadata,\n  TypeSafeCollection,\n  OHIFError,\n  StudyMetadataSource,\n};\n\nexport default classes;\n","import log from '../log.js';\nimport OHIFError from './OHIFError';\nimport cornerstone from 'cornerstone-core';\nimport cornerstoneTools from 'cornerstone-tools';\nimport getImageId from '../utils/getImageId.js';\n\nexport class StudyPrefetcher {\n  constructor(studies) {\n    this.studies = studies || [];\n    this.prefetchDisplaySetsTimeout = 300;\n    this.lastActiveViewportElement = null;\n\n    cornerstone.events.addEventListener(\n      'cornerstoneimagecachefull.StudyPrefetcher',\n      this.cacheFullHandler\n    );\n  }\n\n  destroy() {\n    this.stopPrefetching();\n    cornerstone.events.removeEventListener(\n      'cornerstoneimagecachefull.StudyPrefetcher',\n      this.cacheFullHandler\n    );\n  }\n\n  static getInstance() {\n    if (!StudyPrefetcher.instance) {\n      StudyPrefetcher.instance = new StudyPrefetcher([]);\n    }\n\n    return StudyPrefetcher.instance;\n  }\n\n  setStudies(studies) {\n    this.stopPrefetching();\n    this.studies = studies;\n  }\n\n  prefetch() {\n    if (!this.studies || !this.studies.length) {\n      return;\n    }\n\n    this.stopPrefetching();\n    this.prefetchDisplaySets();\n  }\n\n  stopPrefetching() {\n    cornerstoneTools.requestPoolManager.clearRequestStack('prefetch');\n  }\n\n  prefetchDisplaySetsAsync(timeout) {\n    timeout = timeout || this.prefetchDisplaySetsTimeout;\n\n    clearTimeout(this.prefetchDisplaySetsHandler);\n    this.prefetchDisplaySetsHandler = setTimeout(() => {\n      this.prefetchDisplaySets();\n    }, timeout);\n  }\n\n  prefetchDisplaySets() {\n    // TODO: Allow passing in config\n    let config = {\n      order: 'closest',\n      displaySetCount: 1,\n    };\n\n    const displaySetsToPrefetch = this.getDisplaySetsToPrefetch(config);\n    const imageIds = this.getImageIdsFromDisplaySets(displaySetsToPrefetch);\n\n    this.prefetchImageIds(imageIds);\n  }\n\n  prefetchImageIds(imageIds) {\n    const nonCachedImageIds = this.filterCachedImageIds(imageIds);\n    const requestPoolManager = cornerstoneTools.requestPoolManager;\n    const requestType = 'prefetch';\n    const preventCache = false;\n    const noop = () => {};\n\n    nonCachedImageIds.forEach(imageId => {\n      requestPoolManager.addRequest(\n        {},\n        imageId,\n        requestType,\n        preventCache,\n        noop,\n        noop\n      );\n    });\n\n    requestPoolManager.startGrabbing();\n  }\n\n  getStudy(image) {\n    const StudyInstanceUID = cornerstone.metaData.get(\n      'StudyInstanceUID',\n      image.imageId\n    );\n    return OHIF.viewer.Studies.find(\n      study => study.StudyInstanceUID === StudyInstanceUID\n    );\n  }\n\n  getSeries(study, image) {\n    const SeriesInstanceUID = cornerstone.metaData.get(\n      'SeriesInstanceUID',\n      image.imageId\n    );\n    const studyMetadata = OHIF.viewerbase.getStudyMetadata(study);\n\n    return studyMetadata.getSeriesByUID(SeriesInstanceUID);\n  }\n\n  getInstance(series, image) {\n    const instanceMetadata = cornerstone.metaData.get(\n      'instance',\n      image.imageId\n    );\n    return series.getInstanceByUID(instanceMetadata.SOPInstanceUID);\n  }\n\n  getActiveDisplaySet(displaySets, instance) {\n    return displaySets.find(displaySet => {\n      return displaySet.images.some(displaySetImage => {\n        return displaySetImage.SOPInstanceUID === instance.SOPInstanceUID;\n      });\n    });\n  }\n\n  getDisplaySetsToPrefetch(config) {\n    const image = this.getActiveViewportImage();\n\n    if (!image || !config || !config.displaySetCount) {\n      return [];\n    }\n\n    /*const study = this.getStudy(image);\n    const series = this.getSeries(study, image);\n    const instance = this.getInstance(series, image);*/\n    const displaySets = study.displaySets;\n    const activeDisplaySet = null; //this.getActiveDisplaySet(displaySets, instance);\n    const prefetchMethodMap = {\n      topdown: 'getFirstDisplaySets',\n      downward: 'getNextDisplaySets',\n      closest: 'getClosestDisplaySets',\n    };\n\n    const prefetchOrder = config.order;\n    const methodName = prefetchMethodMap[prefetchOrder];\n    const getDisplaySets = this[methodName];\n\n    if (!getDisplaySets) {\n      if (prefetchOrder) {\n        log.warn(`Invalid prefetch order configuration (${prefetchOrder})`);\n      }\n\n      return [];\n    }\n\n    return getDisplaySets.call(\n      this,\n      displaySets,\n      activeDisplaySet,\n      config.displaySetCount\n    );\n  }\n\n  getFirstDisplaySets(displaySets, activeDisplaySet, displaySetCount) {\n    const length = displaySets.length;\n    const selectedDisplaySets = [];\n\n    for (let i = 0; i < length && displaySetCount; i++) {\n      const displaySet = displaySets[i];\n\n      if (displaySet !== activeDisplaySet) {\n        selectedDisplaySets.push(displaySet);\n        displaySetCount--;\n      }\n    }\n\n    return selectedDisplaySets;\n  }\n\n  getNextDisplaySets(displaySets, activeDisplaySet, displaySetCount) {\n    const activeDisplaySetIndex = displaySets.indexOf(activeDisplaySet);\n    const begin = activeDisplaySetIndex + 1;\n    const end = Math.min(begin + displaySetCount, displaySets.length);\n\n    return displaySets.slice(begin, end);\n  }\n\n  getClosestDisplaySets(displaySets, activeDisplaySet, displaySetCount) {\n    const activeDisplaySetIndex = displaySets.indexOf(activeDisplaySet);\n    const length = displaySets.length;\n    const selectedDisplaySets = [];\n    let left = activeDisplaySetIndex - 1;\n    let right = activeDisplaySetIndex + 1;\n\n    while ((left >= 0 || right < length) && displaySetCount) {\n      if (left >= 0) {\n        selectedDisplaySets.push(displaySets[left]);\n        displaySetCount--;\n        left--;\n      }\n\n      if (right < length && displaySetCount) {\n        selectedDisplaySets.push(displaySets[right]);\n        displaySetCount--;\n        right++;\n      }\n    }\n\n    return selectedDisplaySets;\n  }\n\n  getImageIdsFromDisplaySets(displaySets) {\n    let imageIds = [];\n\n    displaySets.forEach(displaySet => {\n      imageIds = imageIds.concat(this.getImageIdsFromDisplaySet(displaySet));\n    });\n\n    return imageIds;\n  }\n\n  getImageIdsFromDisplaySet(displaySet) {\n    const imageIds = [];\n\n    // TODO: This duplicates work done by the stack manager\n    displaySet.images.forEach(image => {\n      const numFrames = image.numFrames;\n      if (numFrames > 1) {\n        for (let i = 0; i < numFrames; i++) {\n          let imageId = getImageId(image, i);\n          imageIds.push(imageId);\n        }\n      } else {\n        let imageId = getImageId(image);\n        imageIds.push(imageId);\n      }\n    });\n\n    return imageIds;\n  }\n\n  filterCachedImageIds(imageIds) {\n    return imageIds.filter(imageId => !this.isImageCached(imageId));\n  }\n\n  isImageCached(imageId) {\n    const image = cornerstone.imageCache.imageCache[imageId];\n    return image && image.sizeInBytes;\n  }\n\n  cacheFullHandler = () => {\n    log.warn('Cache full');\n    this.stopPrefetching();\n  };\n}\n","import DICOMWeb from '../../../DICOMWeb/';\nimport { api } from 'dicomweb-client';\n\nimport errorHandler from '../../../errorHandler';\n\n/**\n * Parses data returned from a QIDO search and transforms it into\n * an array of series that are present in the study\n *\n * @param server The DICOM server\n * @param StudyInstanceUID\n * @param resultData\n * @returns {Array} Series List\n */\nfunction resultDataToStudyMetadata(server, StudyInstanceUID, resultData) {\n  const seriesMap = {};\n  const series = [];\n\n  resultData.forEach(function(instance) {\n    // Use seriesMap to cache series data\n    // If the series instance UID has already been used to\n    // process series data, continue using that series\n    var SeriesInstanceUID = DICOMWeb.getString(instance['0020000E']);\n    var series = seriesMap[SeriesInstanceUID];\n\n    // If no series data exists in the seriesMap cache variable,\n    // process any available series data\n    if (!series) {\n      series = {\n        SeriesInstanceUID: SeriesInstanceUID,\n        SeriesNumber: DICOMWeb.getString(instance['00200011']),\n        instances: [],\n      };\n\n      // Save this data in the seriesMap cache variable\n      seriesMap[SeriesInstanceUID] = series;\n      series.push(series);\n    }\n\n    // The uri for the dicomweb\n    // NOTE: DCM4CHEE seems to return the data zipped\n    // NOTE: Orthanc returns the data with multi-part mime which cornerstoneWADOImageLoader doesn't\n    //       know how to parse yet\n    //var uri = DICOMWeb.getString(instance['00081190']);\n    //uri = uri.replace('wado-rs', 'dicom-web');\n\n    // manually create a WADO-URI from the UIDs\n    // NOTE: Haven't been able to get Orthanc's WADO-URI to work yet - maybe its not configured?\n    var SOPInstanceUID = DICOMWeb.getString(instance['00080018']);\n    var uri =\n      server.wadoUriRoot +\n      '?requestType=WADO&studyUID=' +\n      StudyInstanceUID +\n      '&seriesUID=' +\n      SeriesInstanceUID +\n      '&objectUID=' +\n      SOPInstanceUID +\n      '&contentType=application%2Fdicom';\n\n    console.log(uri);\n\n    // Add this instance to the current series\n    series.instances.push({\n      SOPClassUID: DICOMWeb.getString(instance['00080016']),\n      SOPInstanceUID: SOPInstanceUID,\n      uri: uri,\n      InstanceNumber: DICOMWeb.getString(instance['00200013']),\n    });\n  });\n  return series;\n}\n\n/**\n * Retrieve a set of instances using a QIDO call\n * @param server\n * @param StudyInstanceUID\n * @throws ECONNREFUSED\n * @returns {{wadoUriRoot: String, StudyInstanceUID: String, series: Array}}\n */\nexport default function Instances(server, StudyInstanceUID) {\n  // TODO: Are we using this function anywhere?? Can we remove it?\n\n  const config = {\n    url: server.qidoRoot,\n    headers: DICOMWeb.getAuthorizationHeader(server),\n    errorInterceptor: errorHandler.getHTTPErrorHandler(),\n  };\n  const dicomWeb = new api.DICOMwebClient(config);\n  const queryParams = getQIDOQueryParams(\n    filter,\n    server.qidoSupportsIncludeField\n  );\n  const options = {\n    studyInstanceUID: StudyInstanceUID,\n  };\n\n  return dicomWeb.searchForInstances(options).then(result => {\n    return {\n      wadoUriRoot: server.wadoUriRoot,\n      StudyInstanceUID: StudyInstanceUID,\n      series: resultDataToStudyMetadata(server, StudyInstanceUID, result.data),\n    };\n  });\n}\n","import { api } from 'dicomweb-client';\nimport DICOMWeb from '../../../DICOMWeb/';\n\nimport errorHandler from '../../../errorHandler';\n\n/**\n * Creates a QIDO date string for a date range query\n * Assumes the year is positive, at most 4 digits long.\n *\n * @param date The Date object to be formatted\n * @returns {string} The formatted date string\n */\nfunction dateToString(date) {\n  if (!date) return '';\n  let year = date.getFullYear().toString();\n  let month = (date.getMonth() + 1).toString();\n  let day = date.getDate().toString();\n  year = '0'.repeat(4 - year.length).concat(year);\n  month = '0'.repeat(2 - month.length).concat(month);\n  day = '0'.repeat(2 - day.length).concat(day);\n  return ''.concat(year, month, day);\n}\n\n/**\n * Produces a QIDO URL given server details and a set of specified search filter\n * items\n *\n * @param filter\n * @param serverSupportsQIDOIncludeField\n * @returns {string} The URL with encoded filter query data\n */\nfunction getQIDOQueryParams(filter, serverSupportsQIDOIncludeField) {\n  const commaSeparatedFields = [\n    '00081030', // Study Description\n    '00080060', // Modality\n    // Add more fields here if you want them in the result\n  ].join(',');\n\n  const parameters = {\n    PatientName: filter.PatientName,\n    PatientID: filter.PatientID,\n    AccessionNumber: filter.AccessionNumber,\n    StudyDescription: filter.StudyDescription,\n    ModalitiesInStudy: filter.ModalitiesInStudy,\n    limit: filter.limit,\n    offset: filter.offset,\n    fuzzymatching: filter.fuzzymatching,\n    includefield: serverSupportsQIDOIncludeField ? commaSeparatedFields : 'all',\n  };\n\n  // build the StudyDate range parameter\n  if (filter.studyDateFrom || filter.studyDateTo) {\n    const dateFrom = dateToString(new Date(filter.studyDateFrom));\n    const dateTo = dateToString(new Date(filter.studyDateTo));\n    parameters.StudyDate = `${dateFrom}-${dateTo}`;\n  }\n\n  // Build the StudyInstanceUID parameter\n  if (filter.StudyInstanceUID) {\n    let studyUIDs = filter.StudyInstanceUID;\n    studyUIDs = Array.isArray(studyUIDs) ? studyUIDs.join() : studyUIDs;\n    studyUIDs = studyUIDs.replace(/[^0-9.]+/g, '\\\\');\n    parameters.StudyInstanceUID = studyUIDs;\n  }\n\n  // Clean query params of undefined values.\n  const params = {};\n  Object.keys(parameters).forEach(key => {\n    if (parameters[key] !== undefined && parameters[key] !== '') {\n      params[key] = parameters[key];\n    }\n  });\n\n  return params;\n}\n\n/**\n * Parses resulting data from a QIDO call into a set of Study MetaData\n *\n * @param resultData\n * @returns {Array} An array of Study MetaData objects\n */\nfunction resultDataToStudies(resultData) {\n  const studies = [];\n\n  if (!resultData || !resultData.length) return;\n\n  resultData.forEach(study =>\n    studies.push({\n      StudyInstanceUID: DICOMWeb.getString(study['0020000D']),\n      // 00080005 = SpecificCharacterSet\n      StudyDate: DICOMWeb.getString(study['00080020']),\n      StudyTime: DICOMWeb.getString(study['00080030']),\n      AccessionNumber: DICOMWeb.getString(study['00080050']),\n      referringPhysicianName: DICOMWeb.getString(study['00080090']),\n      // 00081190 = URL\n      PatientName: DICOMWeb.getName(study['00100010']),\n      PatientID: DICOMWeb.getString(study['00100020']),\n      PatientBirthdate: DICOMWeb.getString(study['00100030']),\n      patientSex: DICOMWeb.getString(study['00100040']),\n      studyId: DICOMWeb.getString(study['00200010']),\n      numberOfStudyRelatedSeries: DICOMWeb.getString(study['00201206']),\n      numberOfStudyRelatedInstances: DICOMWeb.getString(study['00201208']),\n      StudyDescription: DICOMWeb.getString(study['00081030']),\n      // Modality: DICOMWeb.getString(study['00080060']),\n      // ModalitiesInStudy: DICOMWeb.getString(study['00080061']),\n      modalities: DICOMWeb.getString(\n        DICOMWeb.getModalities(study['00080060'], study['00080061'])\n      ),\n    })\n  );\n\n  return studies;\n}\n\nexport default function Studies(server, filter) {\n  const config = {\n    url: server.qidoRoot,\n    headers: DICOMWeb.getAuthorizationHeader(server),\n    errorInterceptor: errorHandler.getHTTPErrorHandler(),\n  };\n\n  const dicomWeb = new api.DICOMwebClient(config);\n  server.qidoSupportsIncludeField =\n    server.qidoSupportsIncludeField === undefined\n      ? true\n      : server.qidoSupportsIncludeField;\n  const queryParams = getQIDOQueryParams(\n    filter,\n    server.qidoSupportsIncludeField\n  );\n  const options = {\n    queryParams,\n  };\n\n  return dicomWeb.searchForStudies(options).then(resultDataToStudies);\n}\n","// DICOMWeb instance, study, and metadata retrieval\nimport Instances from './qido/instances.js';\nimport Studies from './qido/studies.js';\nimport RetrieveMetadata from './wado/retrieveMetadata.js';\n\nconst WADO = {\n  RetrieveMetadata,\n};\n\nconst QIDO = {\n  Studies,\n  Instances,\n};\n\nexport { QIDO, WADO };\n","import Studies from './services/qido/studies';\n\nconst studySearchPromises = new Map();\n\n/**\n * Search for studies information by the given filter\n *\n * @param {Object} filter Filter that will be used on search\n * @returns {Promise} resolved with an array of studies information or rejected with an error\n */\nexport default function searchStudies(server, filter) {\n  const promiseKeyObj = {\n    qidoRoot: server.qidoRoot,\n    filter,\n  };\n  const promiseKey = JSON.stringify(promiseKeyObj);\n  if (studySearchPromises.has(promiseKey)) {\n    return studySearchPromises.get(promiseKey);\n  } else {\n    const promise = Studies(server, filter);\n\n    studySearchPromises.set(promiseKey, promise);\n\n    return promise;\n  }\n}\n","import { QIDO, WADO } from './services/';\nimport {\n  deleteStudyMetadataPromise,\n  retrieveStudyMetadata,\n} from './retrieveStudyMetadata.js';\n\nimport getStudyBoxData from './getStudyBoxData';\nimport retrieveStudiesMetadata from './retrieveStudiesMetadata.js';\nimport searchStudies from './searchStudies';\nimport sortStudy from './sortStudy';\n\nconst studies = {\n  services: {\n    QIDO,\n    WADO,\n  },\n  loadingDict: {},\n  retrieveStudyMetadata,\n  deleteStudyMetadataPromise,\n  retrieveStudiesMetadata,\n  getStudyBoxData,\n  searchStudies,\n  sortStudy,\n};\n\nexport default studies;\n","import log from '../log.js';\nimport { retrieveStudyMetadata } from './retrieveStudyMetadata';\n\n/**\n * Retrieves metaData for multiple studies at once.\n *\n * This function calls retrieveStudyMetadata several times, asynchronously,\n * and waits for all of the results to be returned.\n *\n * @param {Object} server Object with server configuration parameters\n * @param {Array} studyInstanceUIDs The UIDs of the Studies to be retrieved\n * @param {Object} [filters] - Object containing filters to be applied on retrieve metadata process\n * @param {string} [filter.seriesInstanceUID] - series instance uid to filter results against\n * @returns {Promise} that will be resolved with the metadata or rejected with the error\n */\nexport default function retrieveStudiesMetadata(\n  server,\n  studyInstanceUIDs,\n  filters\n) {\n  // Create an empty array to store the Promises for each metaData retrieval call\n  const promises = [];\n\n  // Loop through the array of studyInstanceUIDs\n  studyInstanceUIDs.forEach(function(StudyInstanceUID) {\n    // Send the call and resolve or reject the related promise based on its outcome\n    const promise = retrieveStudyMetadata(server, StudyInstanceUID, filters);\n\n    // Add the current promise to the array of promises\n    promises.push(promise);\n  });\n\n  // When all of the promises are complete, this callback runs\n  const promise = Promise.all(promises);\n\n  // Warn the error on console if some retrieval failed\n  promise.catch(error => log.warn(error));\n\n  return promise;\n}\n","/**\n * Overridable namespace to allow getting study boxes data externally.\n *\n * The function must handle the first parameter as a studyInformation object containing at least the\n * StudyInstanceUID attribute.\n *\n * Shall return a promise that will be resolved with an object containing those attributes:\n * - StudyInstanceUID {String}: copy of studyInformation.StudyInstanceUID\n * - modalities {String}: 2 uppercase letters for each Modality split by any non-alphabetical char(s)\n * - StudyDate {String}: date formatted as YYYYMMDD\n * - StudyDescription {String}: study description string\n */\n// TODO: What is this for?\nconst getStudyBoxData = false;\n\nexport default getStudyBoxData;\n","/**\n *  Should Find the requested instance metadata into the displaySets and return\n *\n * @param {Array} displaySets - List of displaySets\n * @param {string} SOPInstanceUID - sopInstanceUID to look for\n * @returns {Object} - instance metadata found\n */\nconst findInstanceMetadataBySopInstanceUID = (displaySets, SOPInstanceUID) => {\n  let instanceFound;\n\n  displaySets.find(displaySet => {\n    if (!displaySet.images) return false;\n\n    instanceFound = displaySet.images.find(\n      instanceMetadata =>\n        instanceMetadata.getSOPInstanceUID() === SOPInstanceUID\n    );\n\n    return !!instanceFound;\n  });\n\n  return instanceFound;\n};\n\nexport default findInstanceMetadataBySopInstanceUID;\n","import dcmjs from 'dcmjs';\n\nimport findInstanceMetadataBySopInstanceUID from './utils/findInstanceMetadataBySopInstanceUid';\n\n/**\n * Function to parse the part10 array buffer that comes from a DICOM Structured report into measurementData\n * measurementData format is a viewer specific format to be stored into the redux and consumed by other components\n * (e.g. measurement table)\n *\n * @param {ArrayBuffer} part10SRArrayBuffer\n * @param {Array} displaySets\n * @returns\n */\nconst parseDicomStructuredReport = (part10SRArrayBuffer, displaySets) => {\n  // Get the dicom data as an Object\n\n  const dicomData = dcmjs.data.DicomMessage.readFile(part10SRArrayBuffer);\n  const dataset = dcmjs.data.DicomMetaDictionary.naturalizeDataset(\n    dicomData.dict\n  );\n\n  const { MeasurementReport } = dcmjs.adapters.Cornerstone;\n  const storedMeasurementByToolType = MeasurementReport.generateToolState(\n    dataset\n  );\n  const measurementData = {};\n  let measurementNumber = 0;\n\n  Object.keys(storedMeasurementByToolType).forEach(toolName => {\n    const measurements = storedMeasurementByToolType[toolName];\n    measurementData[toolName] = [];\n\n    measurements.forEach(measurement => {\n      const instanceMetadata = findInstanceMetadataBySopInstanceUID(\n        displaySets,\n        measurement.sopInstanceUid\n      );\n\n      const { _study: study, _series: series } = instanceMetadata;\n      const { StudyInstanceUID, PatientID } = study;\n      const { SeriesInstanceUID } = series;\n      const { sopInstanceUid, frameIndex } = measurement;\n      const imagePath = getImagePath(\n        StudyInstanceUID,\n        SeriesInstanceUID,\n        sopInstanceUid,\n        frameIndex\n      );\n\n      const imageId = instanceMetadata.getImageId();\n      if (!imageId) {\n        return;\n      }\n\n      // TODO: We need the currentTimepointID set into the viewer\n      const currentTimepointId = 'TimepointId';\n\n      const toolData = Object.assign({}, measurement, {\n        imageId,\n        imagePath,\n        SOPInstanceUID: sopInstanceUid,\n        SeriesInstanceUID,\n        StudyInstanceUID,\n        PatientID,\n        measurementNumber: ++measurementNumber,\n        timepointId: currentTimepointId,\n        toolType: toolName,\n        _id: imageId + measurementNumber,\n      });\n\n      measurementData[toolName].push(toolData);\n    });\n  });\n\n  return measurementData;\n};\n\n/**\n * Function to create imagePath with all imageData related\n *\n * @param {string} StudyInstanceUID\n * @param {string} SeriesInstanceUID\n * @param {string} SOPInstanceUID\n * @param {string} frameIndex\n * @returns\n */\nconst getImagePath = (\n  StudyInstanceUID,\n  SeriesInstanceUID,\n  SOPInstanceUID,\n  frameIndex\n) => {\n  return [StudyInstanceUID, SeriesInstanceUID, SOPInstanceUID, frameIndex].join(\n    '_'\n  );\n};\n\nexport default parseDicomStructuredReport;\n","const displayFunction = data => {\n  return data.text || '';\n};\n\nexport const arrowAnnotate = {\n  id: 'ArrowAnnotate',\n  name: 'ArrowAnnotate',\n  toolGroup: 'allTools',\n  cornerstoneToolType: 'ArrowAnnotate',\n  options: {\n    measurementTable: {\n      displayFunction,\n    },\n    caseProgress: {\n      include: true,\n      evaluate: true,\n    },\n  },\n};\n","const displayFunction = data => {\n  if (data.shortestDiameter) {\n    // TODO: Make this check criteria again to see if we should display shortest x longest\n    return data.longestDiameter + ' x ' + data.shortestDiameter;\n  }\n\n  return data.longestDiameter;\n};\n\nexport const bidirectional = {\n  id: 'Bidirectional',\n  name: 'Target',\n  toolGroup: 'allTools',\n  cornerstoneToolType: 'Bidirectional',\n  options: {\n    measurementTable: {\n      displayFunction,\n    },\n    caseProgress: {\n      include: true,\n      evaluate: true,\n    },\n  },\n};\n","const displayFunction = data => {\n  let meanValue = '';\n  const { cachedStats } = data;\n  if (cachedStats && cachedStats.mean && !isNaN(cachedStats.mean)) {\n    meanValue = cachedStats.mean.toFixed(2) + ' HU';\n  }\n  return meanValue;\n};\n\nexport const ellipticalRoi = {\n  id: 'EllipticalRoi',\n  name: 'Ellipse',\n  toolGroup: 'allTools',\n  cornerstoneToolType: 'EllipticalRoi',\n  options: {\n    measurementTable: {\n      displayFunction,\n    },\n    caseProgress: {\n      include: true,\n      evaluate: true,\n    },\n  },\n};\n","const displayFunction = data => {\n  let meanValue = '';\n  const { cachedStats } = data;\n  if (cachedStats && cachedStats.mean && !isNaN(cachedStats.mean)) {\n    meanValue = cachedStats.mean.toFixed(2) + ' HU';\n  }\n  return meanValue;\n};\n\nexport const circleRoi = {\n  id: 'CircleRoi',\n  name: 'Circle',\n  toolGroup: 'allTools',\n  cornerstoneToolType: 'CircleRoi',\n  options: {\n    measurementTable: {\n      displayFunction,\n    },\n    caseProgress: {\n      include: true,\n      evaluate: true,\n    },\n  },\n};\n","const displayFunction = data => {\n  let meanValue = '';\n  if (data.meanStdDev && data.meanStdDev.mean && !isNaN(data.meanStdDev.mean)) {\n    meanValue = data.meanStdDev.mean.toFixed(2) + ' HU';\n  }\n  return meanValue;\n};\n\nexport const freehandMouse = {\n  id: 'FreehandMouse',\n  name: 'Freehand',\n  toolGroup: 'allTools',\n  cornerstoneToolType: 'FreehandMouse',\n  options: {\n    measurementTable: {\n      displayFunction,\n    },\n    caseProgress: {\n      include: true,\n      evaluate: true,\n    },\n  },\n};\n","const displayFunction = data => {\n  let lengthValue = '';\n  if (data.length && !isNaN(data.length)) {\n    lengthValue = data.length.toFixed(2) + ' mm';\n  }\n  return lengthValue;\n};\n\nexport const length = {\n  id: 'Length',\n  name: 'Length',\n  toolGroup: 'allTools',\n  cornerstoneToolType: 'Length',\n  options: {\n    measurementTable: {\n      displayFunction,\n    },\n    caseProgress: {\n      include: true,\n      evaluate: true,\n    },\n  },\n};\n","export const nonTarget = {\n  id: 'NonTarget',\n  name: 'Non-Target',\n  toolGroup: 'allTools',\n  cornerstoneToolType: 'NonTarget',\n  options: {\n    measurementTable: {\n      displayFunction: data => data.response,\n    },\n    caseProgress: {\n      include: true,\n      evaluate: true,\n    },\n  },\n};\n","const displayFunction = data => {\n  let meanValue = '';\n  const { cachedStats } = data;\n  if (cachedStats && cachedStats.mean && !isNaN(cachedStats.mean)) {\n    meanValue = cachedStats.mean.toFixed(2) + ' HU';\n  }\n  return meanValue;\n};\n\nexport const rectangleRoi = {\n  id: 'RectangleRoi',\n  name: 'Rectangle',\n  toolGroup: 'allTools',\n  cornerstoneToolType: 'RectangleRoi',\n  options: {\n    measurementTable: {\n      displayFunction,\n    },\n    caseProgress: {\n      include: true,\n      evaluate: true,\n    },\n  },\n};\n","const displayFunction = data => {\n  let text = '';\n  if (data.rAngle && !isNaN(data.rAngle)) {\n    text = data.rAngle.toFixed(2) + String.fromCharCode(parseInt('00B0', 16));\n  }\n  return text;\n};\n\nexport const angle = {\n  id: 'Angle',\n  name: 'Angle',\n  toolGroup: 'allTools',\n  cornerstoneToolType: 'Angle',\n  options: {\n    measurementTable: {\n      displayFunction,\n    },\n    caseProgress: {\n      include: true,\n      evaluate: true,\n    },\n  },\n};\n","export const targetCR = {\n  id: 'TargetCR',\n  name: 'CR Target',\n  toolGroup: 'allTools',\n  cornerstoneToolType: 'TargetCR',\n  options: {\n    measurementTable: {\n      displayFunction: data => data.response,\n    },\n    caseProgress: {\n      include: true,\n      evaluate: true,\n    },\n  },\n};\n","export const targetNE = {\n  id: 'TargetNE',\n  name: 'NE Target',\n  toolGroup: 'allTools',\n  cornerstoneToolType: 'TargetNE',\n  options: {\n    measurementTable: {\n      displayFunction: data => data.response,\n    },\n    caseProgress: {\n      include: true,\n      evaluate: true,\n    },\n  },\n};\n","export const targetUN = {\n  id: 'TargetUN',\n  name: 'UN Target',\n  toolGroup: 'allTools',\n  cornerstoneToolType: 'TargetUN',\n  options: {\n    measurementTable: {\n      displayFunction: data => data.response,\n    },\n    caseProgress: {\n      include: true,\n      evaluate: true,\n    },\n  },\n};\n","export default function(measurement) {\n  if (!measurement) {\n    return;\n  }\n\n  switch (measurement.toolType) {\n    case 'Bidirectional':\n    case 'TargetCR':\n    case 'TargetNE':\n    case 'TargetUN':\n      return `Target ${measurement.lesionNamingNumber}`;\n    case 'NonTarget':\n      return `Non-Target ${measurement.lesionNamingNumber}`;\n  }\n}\n","export default function(measurement) {\n  return measurement.description;\n}\n","import studyMetadataManager from '../../utils/studyMetadataManager';\n\nexport default function(imagePath, thumbnail = false) {\n  const [\n    StudyInstanceUID,\n    SeriesInstanceUID,\n    SOPInstanceUID,\n    frameIndex,\n  ] = imagePath.split('_');\n  const studyMetadata = studyMetadataManager.get(StudyInstanceUID);\n  const series = studyMetadata.getSeriesByUID(SeriesInstanceUID);\n  const instance = series.getInstanceByUID(SOPInstanceUID);\n  return instance.getImageId(frameIndex, thumbnail);\n}\n","import * as tools from '../tools';\n\nconst childTools = [];\nObject.keys(tools).forEach(key => childTools.push(tools[key]));\n\nexport const allTools = {\n  id: 'allTools',\n  name: 'Measurements',\n  childTools: childTools,\n  options: {\n    caseProgress: {\n      include: true,\n      evaluate: true,\n    },\n  },\n};\n","import { allTools } from './toolGroups/allTools';\nimport {\n  retrieveMeasurements,\n  storeMeasurements,\n  retrieveTimepoints,\n  storeTimepoints,\n  removeTimepoint,\n  updateTimepoint,\n  disassociateStudy,\n} from './dataExchange';\n\nconst measurementApiDefaultConfig = {\n  measurementTools: [allTools],\n  newLesions: [\n    {\n      id: 'newTargets',\n      name: 'New Targets',\n      toolGroupId: 'targets',\n    },\n    {\n      id: 'newNonTargets',\n      name: 'New Non-Targets',\n      toolGroupId: 'nonTargets',\n    },\n  ],\n  dataExchange: {\n    retrieve: retrieveMeasurements,\n    store: storeMeasurements,\n  },\n};\n\nconst timepointApiDefaultConfig = {\n  dataExchange: {\n    retrieve: retrieveTimepoints,\n    store: storeTimepoints,\n    remove: removeTimepoint,\n    update: updateTimepoint,\n    disassociate: disassociateStudy,\n  },\n};\n\nexport { measurementApiDefaultConfig, timepointApiDefaultConfig };\n","import log from '../log';\n\nexport const retrieveMeasurements = (PatientID, timepointIds) => {\n  log.error('retrieveMeasurements');\n  return Promise.resolve();\n};\n\nexport const storeMeasurements = (measurementData, timepointIds) => {\n  log.error('storeMeasurements');\n  return Promise.resolve();\n};\n\nexport const retrieveTimepoints = filter => {\n  log.error('retrieveTimepoints');\n  return Promise.resolve();\n};\n\nexport const storeTimepoints = timepointData => {\n  log.error('storeTimepoints');\n  return Promise.resolve();\n};\n\nexport const updateTimepoint = (timepointData, query) => {\n  log.error('updateTimepoint');\n  return Promise.resolve();\n};\n\nexport const removeTimepoint = timepointId => {\n  log.error('removeTimepoint');\n  return Promise.resolve();\n};\n\nexport const disassociateStudy = (timepointIds, StudyInstanceUID) => {\n  log.error('disassociateStudy');\n  return Promise.resolve();\n};\n","import cornerstoneTools from 'cornerstone-tools';\nimport cornerstone from 'cornerstone-core';\nimport log from '../../log';\nimport getLabel from '../lib/getLabel';\nimport getDescription from '../lib/getDescription';\nimport getImageIdForImagePath from '../lib/getImageIdForImagePath';\nimport guid from '../../utils/guid';\nimport studyMetadataManager from '../../utils/studyMetadataManager';\nimport { measurementApiDefaultConfig } from './../configuration.js';\n\nconst configuration = {\n  ...measurementApiDefaultConfig,\n};\n\nexport default class MeasurementApi {\n  static Instance;\n\n  /**\n   * Set configuration: It should merge default configuration with any new one\n   *\n   * @static\n   * @param {Object} config\n   * @param {Object} config.server\n   * @param {string} config.server.type - The server type\n   * @param {string} config.server.wadoRoot - The server wado URL root\n   * @param {Array} config.measurementTools\n   * @param {string} config.measurementTools[].id - The tool group id\n   * @param {string} config.measurementTools[].name - The tool group name\n   * @param {Array} config.measurementTools[].childTools - The child tool's configuration\n   * @param {Object} config.dataExchange\n   * @param {Function} config.dataExchange.store - Function that store measurement data\n   * @param {Function} config.dataExchange.retrieve - Function that retrieves measurement data\n   *\n   * @memberof MeasurementApi\n   */\n  static setConfiguration(config) {\n    Object.assign(configuration, config);\n  }\n\n  static getConfiguration() {\n    return configuration;\n  }\n\n  static getToolsGroupsMap() {\n    const toolsGroupsMap = {};\n    configuration.measurementTools.forEach(toolGroup => {\n      toolGroup.childTools.forEach(\n        tool => (toolsGroupsMap[tool.id] = toolGroup.id)\n      );\n    });\n\n    return toolsGroupsMap;\n  }\n\n  static getToolGroupTools(toolsGroupsMap) {\n    const result = {};\n    Object.keys(toolsGroupsMap).forEach(toolType => {\n      const toolGroupId = toolsGroupsMap[toolType];\n      if (!result[toolGroupId]) {\n        result[toolGroupId] = [];\n      }\n\n      result[toolGroupId].push(toolType);\n    });\n\n    return result;\n  }\n\n  static getToolConfiguration(toolType) {\n    const configuration = MeasurementApi.getConfiguration();\n    const toolsGroupsMap = MeasurementApi.getToolsGroupsMap();\n\n    const toolGroupId = toolsGroupsMap[toolType];\n    const toolGroup = configuration.measurementTools.find(\n      toolGroup => toolGroup.id === toolGroupId\n    );\n\n    let tool;\n    if (toolGroup) {\n      tool = toolGroup.childTools.find(tool => tool.id === toolType);\n    }\n\n    return {\n      toolGroupId,\n      toolGroup,\n      tool,\n    };\n  }\n\n  static syncMeasurementAndToolData(measurement) {\n    log.info('syncMeasurementAndToolData');\n\n    const measurementLabel = getLabel(measurement);\n    if (measurementLabel) {\n      measurement.labels = [measurementLabel];\n    }\n\n    const toolState = cornerstoneTools.globalImageIdSpecificToolStateManager.saveToolState();\n\n    // Stop here if the metadata for the measurement's study is not loaded yet\n    const { StudyInstanceUID } = measurement;\n    const metadata = studyMetadataManager.get(StudyInstanceUID);\n    if (!metadata) return;\n\n    // Iterate each child tool if the current tool has children\n    const toolType = measurement.toolType;\n    const { tool } = MeasurementApi.getToolConfiguration(toolType);\n    if (Array.isArray(tool.childTools)) {\n      tool.childTools.forEach(childToolKey => {\n        const childMeasurement = measurement[childToolKey];\n        if (!childMeasurement) return;\n        childMeasurement._id = measurement._id;\n        childMeasurement.measurementNumber = measurement.measurementNumber;\n        childMeasurement.lesionNamingNumber = measurement.lesionNamingNumber;\n\n        MeasurementApi.syncMeasurementAndToolData(childMeasurement);\n      });\n\n      return;\n    }\n\n    const imageId = getImageIdForImagePath(measurement.imagePath);\n\n    // If no tool state exists for this imageId, create an empty object to store it\n    if (!toolState[imageId]) {\n      toolState[imageId] = {};\n    }\n\n    const currentToolState = toolState[imageId][toolType];\n    const toolData = currentToolState && currentToolState.data;\n\n    // Check if we already have toolData for this imageId and toolType\n    if (toolData && toolData.length) {\n      // If we have toolData, we should search it for any data related to the current Measurement\n      const toolData = toolState[imageId][toolType].data;\n\n      // Create a flag so we know if we've successfully updated the Measurement in the toolData\n      let alreadyExists = false;\n\n      // Loop through the toolData to search for this Measurement\n      toolData.forEach(tool => {\n        // Break the loop if this isn't the Measurement we are looking for\n        if (tool._id !== measurement._id) {\n          return;\n        }\n\n        // If we have found the Measurement, set the flag to True\n        alreadyExists = true;\n\n        // Update the toolData from the Measurement data\n        Object.assign(tool, measurement);\n        return false;\n      });\n\n      // If we have found the Measurement we intended to update, we can stop this function here\n      if (alreadyExists === true) {\n        return;\n      }\n    } else {\n      // If no toolData exists for this toolType, create an empty array to hold some\n      toolState[imageId][toolType] = {\n        data: [],\n      };\n    }\n\n    // If we have reached this point, it means we haven't found the Measurement we are looking for\n    // in the current toolData. This means we need to add it.\n\n    // Add the MeasurementData into the toolData for this imageId\n    toolState[imageId][toolType].data.push(measurement);\n\n    cornerstoneTools.globalImageIdSpecificToolStateManager.restoreToolState(\n      toolState\n    );\n  }\n\n  static isToolIncluded(tool) {\n    return (\n      tool.options &&\n      tool.options.caseProgress &&\n      tool.options.caseProgress.include\n    );\n  }\n\n  constructor(timepointApi, options = {}) {\n    if (MeasurementApi.Instance) {\n      MeasurementApi.Instance.initialize(timepointApi, options);\n      return MeasurementApi.Instance;\n    }\n\n    this.initialize(timepointApi, options);\n    MeasurementApi.Instance = this;\n  }\n\n  initialize(timepointApi, options = {}) {\n    this.timepointApi = timepointApi;\n    this.options = options;\n    this.toolGroups = {};\n    this.tools = {};\n    this.toolsGroupsMap = MeasurementApi.getToolsGroupsMap();\n    this.toolGroupTools = MeasurementApi.getToolGroupTools(this.toolsGroupsMap);\n\n    // Iterate over each tool group and create collection\n    configuration.measurementTools.forEach(toolGroup => {\n      this.toolGroups[toolGroup.id] = [];\n\n      // Iterate over each tool group child tools (e.g. bidirectional, targetCR, etc.) and create collection\n      toolGroup.childTools.forEach(tool => {\n        this.tools[tool.id] = [];\n      });\n    });\n  }\n\n  onMeasurementsUpdated() {\n    if (typeof this.options.onMeasurementsUpdated !== 'function') {\n      log.warn('Measurements update callback is not defined');\n      return;\n    }\n\n    this.options.onMeasurementsUpdated(Object.assign({}, this.tools));\n  }\n\n  retrieveMeasurements(PatientID, timepointIds) {\n    const retrievalFn = configuration.dataExchange.retrieve;\n    const { server } = configuration;\n    if (typeof retrievalFn !== 'function') {\n      log.error('Measurement retrieval function has not been configured.');\n      return;\n    }\n\n    return new Promise((resolve, reject) => {\n      retrievalFn(server).then(measurementData => {\n        if (measurementData) {\n          log.info('Measurement data retrieval');\n          log.info(measurementData);\n\n          Object.keys(measurementData).forEach(measurementTypeId => {\n            const measurements = measurementData[measurementTypeId];\n\n            measurements.forEach(measurement => {\n              const { toolType } = measurement;\n\n              this.addMeasurement(toolType, measurement);\n            });\n          });\n        }\n\n        resolve();\n\n        // Synchronize the new tool data\n        this.syncMeasurementsAndToolData();\n\n        cornerstone.getEnabledElements().forEach(enabledElement => {\n          if (enabledElement.image) {\n            cornerstone.updateImage(enabledElement.element);\n          }\n        });\n\n        // Let others know that the measurements are updated\n        this.onMeasurementsUpdated();\n      }, reject);\n    });\n  }\n\n  storeMeasurements(timepointId) {\n    const { server } = configuration;\n    const storeFn = configuration.dataExchange.store;\n    if (typeof storeFn !== 'function') {\n      log.error('Measurement store function has not been configured.');\n      return;\n    }\n\n    let measurementData = {};\n    configuration.measurementTools.forEach(toolGroup => {\n      // Skip the tool groups excluded from case progress\n      if (!MeasurementApi.isToolIncluded(toolGroup)) {\n        return;\n      }\n\n      toolGroup.childTools.forEach(tool => {\n        // Skip the tools excluded from case progress\n        if (!MeasurementApi.isToolIncluded(tool)) {\n          return;\n        }\n\n        if (!measurementData[toolGroup.id]) {\n          measurementData[toolGroup.id] = [];\n        }\n\n        measurementData[toolGroup.id] = measurementData[toolGroup.id].concat(\n          this.tools[tool.id]\n        );\n      });\n    });\n\n    const timepointFilter = timepointId\n      ? tp => tp.timepointId === timepointId\n      : null;\n    const timepoints = this.timepointApi.all(timepointFilter);\n    const timepointIds = timepoints.map(t => t.timepointId);\n    const PatientID = timepoints[0].PatientID;\n    const filter = {\n      PatientID,\n      timepointIds,\n    };\n\n    log.info('Saving Measurements for timepoints:', timepoints);\n    return storeFn(measurementData, filter, server).then(result => {\n      log.info('Measurement storage completed');\n      return result;\n    });\n  }\n\n  calculateLesionNamingNumber(measurements) {\n    const sortedMeasurements = measurements.sort((a, b) => {\n      if (a.lesionNamingNumber > b.lesionNamingNumber) {\n        return 1;\n      } else if (a.lesionNamingNumber < b.lesionNamingNumber) {\n        return -1;\n      }\n\n      return 0;\n    });\n\n    //  Calculate lesion naming number starting from 1 not to miss any measurement (as seen in MM)\n    //      A measurement from beginning of the list might be deleted, so a new measurement should replace that\n    let i;\n    for (i = 1; i < sortedMeasurements.length + 1; i++) {\n      if (i < sortedMeasurements[i - 1].lesionNamingNumber) {\n        break;\n      }\n    }\n\n    return i;\n  }\n\n  fetch(toolGroupId, filter) {\n    if (!this.toolGroups[toolGroupId]) {\n      throw new Error(\n        `MeasurementApi: No Collection with the id: ${toolGroupId}`\n      );\n    }\n\n    let items;\n    if (filter) {\n      items = this.toolGroups[toolGroupId].filter(filter);\n    } else {\n      items = this.toolGroups[toolGroupId];\n    }\n\n    return items.map(item => {\n      if (item.toolId) {\n        return this.tools[item.toolId].find(\n          tool => tool._id === item.toolItemId\n        );\n      }\n\n      return { lesionNamingNumber: item.lesionNamingNumber };\n    });\n  }\n\n  getFirstMeasurement(timepointId) {\n    // Get child tools from all included tool groups\n    let childTools = [];\n    configuration.measurementTools.forEach(toolGroup => {\n      // Skip the tool groups excluded from case progress\n      if (!MeasurementApi.isToolIncluded(toolGroup)) {\n        return false;\n      }\n\n      childTools = childTools.concat(toolGroup.childTools);\n    });\n\n    // Get all included child tools\n    const includedChildTools = childTools.filter(tool =>\n      MeasurementApi.isToolIncluded(tool)\n    );\n\n    // Get the first measurement for the given timepoint\n    let measurement = undefined;\n    includedChildTools.every(tool => {\n      measurement = this.tools[tool.id].find(\n        t => t.timepointId === timepointId && t.measurementNumber === 1\n      );\n\n      return !measurement;\n    });\n\n    // Return the found measurement object or undefined if not found\n    return measurement;\n  }\n\n  lesionExistsAtTimepoints(lesionNamingNumber, toolGroupId, timepointIds) {\n    // Retrieve all the data for the given tool group (e.g. 'targets')\n    const measurementsAtTimepoint = this.fetch(toolGroupId, tool =>\n      timepointIds.includes(tool.timepointId)\n    );\n\n    // Return whether or not any lesion at this timepoint has the same lesionNamingNumber\n    return !!measurementsAtTimepoint.find(\n      m => m.lesionNamingNumber === lesionNamingNumber\n    );\n  }\n\n  isNewLesionsMeasurement(measurementData) {\n    if (!measurementData) {\n      return;\n    }\n\n    const toolConfig = MeasurementApi.getToolConfiguration(\n      measurementData.toolType\n    );\n    const toolType = toolConfig.tool.parentTool || measurementData.toolType;\n    const { timepointApi } = this;\n    const currentMeasurement =\n      this.tools[toolType].find(tool => tool._id === measurementData._id) || {};\n    const timepointId =\n      currentMeasurement.timepointId || measurementData.timepointId;\n    const lesionNamingNumber =\n      currentMeasurement.lesionNamingNumber ||\n      measurementData.lesionNamingNumber;\n\n    // Stop here if the needed information is not set\n    if (!timepointApi || !timepointId || !toolConfig) {\n      return;\n    }\n\n    const { toolGroupId } = toolConfig;\n    const current = timepointApi.timepoints.find(\n      tp => tp.timepointId === timepointId\n    );\n    const initialTimepointIds = timepointApi.initialTimepointIds();\n\n    // Stop here if there's no initial timepoint, or if the current is any initial\n    if (\n      !initialTimepointIds ||\n      initialTimepointIds.length < 1 ||\n      initialTimepointIds.some(\n        initialtpid => initialtpid === current.timepointId\n      )\n    ) {\n      return false;\n    }\n\n    return (\n      this.lesionExistsAtTimepoints(\n        lesionNamingNumber,\n        toolGroupId,\n        initialTimepointIds\n      ) === false\n    );\n  }\n\n  calculateLesionMaxMeasurementNumber(groupId, filter) {\n    let measurements = [];\n    if (groupId) {\n      // Get the measurements of the group\n      measurements = this.toolGroups[groupId] || [];\n    } else {\n      // Get all measurements of all groups\n      measurements = Object.keys(this.toolGroups).reduce((acc, val) => {\n        acc.push(...this.toolGroups[val]);\n        return acc;\n      }, []);\n    }\n\n    const sortedMeasurements = measurements.filter(filter).sort((tp1, tp2) => {\n      return tp1.measurementNumber < tp2.measurementNumber ? 1 : -1;\n    });\n\n    for (let i = 0; i < sortedMeasurements.length; i++) {\n      const toolGroupMeasurement = sortedMeasurements[i];\n      const measurement = this.tools[toolGroupMeasurement.toolId].find(\n        tool => tool._id === toolGroupMeasurement.toolItemId\n      );\n      const isNew = this.isNewLesionsMeasurement(measurement);\n      if (!isNew) {\n        return measurement.measurementNumber;\n      }\n    }\n\n    return 0;\n  }\n\n  calculateNewLesionMaxMeasurementNumber(groupId, filter) {\n    const sortedMeasurements = this.toolGroups[groupId]\n      .filter(filter)\n      .sort((tp1, tp2) => {\n        return tp1.measurementNumber < tp2.measurementNumber ? 1 : -1;\n      });\n\n    for (let i = 0; i < sortedMeasurements.length; i++) {\n      const toolGroupMeasurement = sortedMeasurements[i];\n      const measurement = this.tools[toolGroupMeasurement.toolId].find(\n        tool => tool._id === toolGroupMeasurement.toolItemId\n      );\n      const isNew = this.isNewLesionsMeasurement(measurement);\n      if (isNew) {\n        return measurement.measurementNumber;\n      }\n    }\n\n    return 0;\n  }\n\n  calculateMeasurementNumber(measurement) {\n    const toolGroupId = this.toolsGroupsMap[measurement.toolType];\n\n    const filter = tool => tool._id !== measurement._id;\n\n    const isNew = this.isNewLesionsMeasurement(measurement);\n\n    if (isNew) {\n      const maxTargetMeasurementNumber = this.calculateLesionMaxMeasurementNumber(\n        'targets',\n        filter\n      );\n      const maxNonTargetMeasurementNumber = this.calculateLesionMaxMeasurementNumber(\n        'nonTargets',\n        filter\n      );\n      const maxNewTargetMeasurementNumber = this.calculateNewLesionMaxMeasurementNumber(\n        'targets',\n        filter\n      );\n      if (toolGroupId === 'targets') {\n        return Math.max(\n          maxTargetMeasurementNumber,\n          maxNonTargetMeasurementNumber,\n          maxNewTargetMeasurementNumber\n        );\n      } else if (toolGroupId === 'nonTargets') {\n        const maxNewNonTargetMeasurementNumber = this.calculateNewLesionMaxMeasurementNumber(\n          'nonTargets',\n          filter\n        );\n        return Math.max(\n          maxTargetMeasurementNumber,\n          maxNonTargetMeasurementNumber,\n          maxNewTargetMeasurementNumber,\n          maxNewNonTargetMeasurementNumber\n        );\n      }\n    } else {\n      const maxTargetMeasurementNumber = this.calculateLesionMaxMeasurementNumber(\n        'targets',\n        filter\n      );\n      if (toolGroupId === 'targets') {\n        return maxTargetMeasurementNumber;\n      } else if (toolGroupId === 'nonTargets') {\n        const maxNonTargetMeasurementNumber = this.calculateLesionMaxMeasurementNumber(\n          'nonTargets',\n          filter\n        );\n        return Math.max(\n          maxTargetMeasurementNumber,\n          maxNonTargetMeasurementNumber\n        );\n      } else {\n        return this.calculateLesionMaxMeasurementNumber(null, filter);\n      }\n    }\n\n    return 0;\n  }\n\n  getPreviousMeasurement(measurementData) {\n    if (!measurementData) {\n      return;\n    }\n\n    const { timepointId, toolType, lesionNamingNumber } = measurementData;\n    if (!timepointId || !toolType || !lesionNamingNumber) {\n      return;\n    }\n\n    const toolGroupId = this.toolsGroupsMap[measurementData.toolType];\n\n    // TODO: Remove TrialPatientLocationUID from here and override it somehow\n    // by dependant applications. Here we should use the location attribute instead of the uid\n    let filter;\n    const uid =\n      measurementData.additionalData &&\n      measurementData.additionalData.TrialPatientLocationUID;\n    if (uid) {\n      filter = tool =>\n        tool._id !== measurementData._id &&\n        tool.additionalData &&\n        tool.additionalData.TrialPatientLocationUID === uid;\n    } else {\n      filter = tool =>\n        tool._id !== measurementData._id &&\n        tool.lesionNamingNumber === lesionNamingNumber;\n    }\n\n    const childToolTypes = this.toolGroupTools[toolGroupId];\n    for (let i = 0; i < childToolTypes.length; i++) {\n      const childToolType = childToolTypes[i];\n      const toolCollection = this.tools[childToolType];\n      const item = toolCollection.find(filter);\n\n      if (item) {\n        return item;\n      }\n    }\n  }\n\n  hasDuplicateMeasurementNumber(measurementData) {\n    if (!measurementData) {\n      return;\n    }\n\n    const { toolType, measurementNumber } = measurementData;\n    if (!toolType || !measurementNumber) {\n      return;\n    }\n\n    const filter = tool =>\n      tool._id !== measurementData._id &&\n      tool.measurementNumber === measurementData.measurementNumber;\n\n    return configuration.measurementTools\n      .filter(toolGroup => toolGroup.id !== 'temp')\n      .some(toolGroup => {\n        if (this.toolGroups[toolGroup.id].find(filter)) {\n          return true;\n        }\n        return toolGroup.childTools.some(tool => {\n          if (this.tools[tool.id].find(filter)) {\n            return true;\n          }\n        });\n      });\n  }\n\n  updateNumbering(collectionToUpdate, propertyFilter, propertyName, increment) {\n    collectionToUpdate.filter(propertyFilter).forEach(item => {\n      item[propertyName] += increment;\n    });\n  }\n\n  updateMeasurementNumberForAllMeasurements(measurement, increment) {\n    const filter = tool =>\n      tool._id !== measurement._id &&\n      tool.measurementNumber >= measurement.measurementNumber;\n\n    configuration.measurementTools\n      .filter(toolGroup => toolGroup.id !== 'temp')\n      .forEach(toolGroup => {\n        this.updateNumbering(\n          this.toolGroups[toolGroup.id],\n          filter,\n          'measurementNumber',\n          increment\n        );\n\n        toolGroup.childTools.forEach(tool => {\n          this.updateNumbering(\n            this.tools[tool.id],\n            filter,\n            'measurementNumber',\n            increment\n          );\n        });\n      });\n  }\n\n  addMeasurement(toolType, measurement) {\n    const toolGroup = this.toolsGroupsMap[toolType];\n    const groupCollection = this.toolGroups[toolGroup];\n    const collection = this.tools[toolType];\n\n    // Get the related measurement by the measurement number and use its location if defined\n    const relatedMeasurement = collection.find(\n      t =>\n        t.lesionNamingNumber === measurement.lesionNamingNumber &&\n        t.toolType === measurement.toolType\n    );\n\n    // Use the related measurement location if found and defined\n    if (relatedMeasurement && relatedMeasurement.location) {\n      measurement.location = relatedMeasurement.location;\n    }\n\n    // Use the related measurement description if found and defined\n    if (relatedMeasurement && relatedMeasurement.description) {\n      measurement.description = relatedMeasurement.description;\n    }\n\n    measurement._id = guid();\n\n    // Get the timepoint\n    let timepoint;\n    if (measurement.StudyInstanceUID) {\n      timepoint = this.timepointApi.study(measurement.StudyInstanceUID)[0];\n    } else {\n      const { timepointId } = measurement;\n      timepoint = this.timepointApi.timepoints.find(\n        t => t.timepointId === timepointId\n      );\n    }\n\n    // Preventing errors thrown when non-associated (standalone) study is opened...\n    // @TODO: Make sure this logic is correct.\n    if (!timepoint) return;\n\n    // Empty Item is the lesion just added in cornerstoneTools, but does not have measurement data yet\n    const emptyItem = groupCollection.find(\n      groupTool =>\n        !groupTool.toolId && groupTool.timepointId === timepoint.timepointId\n    );\n\n    // Set the timepointId attribute to measurement to make it easier to filter measurements by timepoint\n    measurement.timepointId = timepoint.timepointId;\n\n    // Check if the measurement data is just added by a cornerstone tool and is still empty\n    if (emptyItem) {\n      // Set relevant initial data and measurement number to the measurement\n      measurement.lesionNamingNumber = emptyItem.lesionNamingNumber;\n      measurement.measurementNumber = emptyItem.measurementNumber;\n\n      groupCollection\n        .filter(\n          groupTool =>\n            groupTool.timepointId === timepoint.timepointId &&\n            groupTool.lesionNamingNumber === measurement.lesionNamingNumber\n        )\n        .forEach(groupTool => {\n          groupTool.toolId = tool.id;\n          groupTool.toolItemId = measurement._id;\n          groupTool.createdAt = measurement.createdAt;\n          groupTool.measurementNumber = measurement.measurementNumber;\n        });\n    } else {\n      // Handle measurements not added by cornerstone tools and update its number\n      const measurementsInTimepoint = groupCollection.filter(\n        groupTool => groupTool.timepointId === timepoint.timepointId\n      );\n      measurement.lesionNamingNumber = this.calculateLesionNamingNumber(\n        measurementsInTimepoint\n      );\n      measurement.measurementNumber =\n        measurement.measurementNumber ||\n        this.calculateMeasurementNumber(measurement) + 1;\n    }\n\n    // Define an update object to reflect the changes in the collection\n    const updateObject = {\n      timepointId: timepoint.timepointId,\n      lesionNamingNumber: measurement.lesionNamingNumber,\n      measurementNumber: measurement.measurementNumber,\n    };\n\n    // Find the matched measurement from other timepoints\n    const found = this.getPreviousMeasurement(measurement);\n\n    // Check if a previous related meausurement was found on other timepoints\n    if (found) {\n      // Use the same number as the previous measurement\n      measurement.lesionNamingNumber = found.lesionNamingNumber;\n      measurement.measurementNumber = found.measurementNumber;\n\n      // TODO: Remove TrialPatientLocationUID from here and override it somehow\n      // by dependant applications\n\n      // Change the update object to set the same number, additionalData,\n      // location, label and description to the current measurement\n      updateObject.lesionNamingNumber = found.lesionNamingNumber;\n      updateObject.measurementNumber = found.measurementNumber;\n      updateObject.additionalData = measurement.additionalData || {};\n      updateObject.additionalData.TrialPatientLocationUID =\n        found.additionalData && found.additionalData.TrialPatientLocationUID;\n      updateObject.location = found.location;\n      updateObject.label = found.label;\n      updateObject.description = found.description;\n      updateObject.isSplitLesion = found.isSplitLesion;\n      updateObject.isNodal = found.isNodal;\n\n      const description = getDescription(found, measurement);\n      if (description) {\n        updateObject.description = description;\n      }\n    } else if (this.hasDuplicateMeasurementNumber(measurement)) {\n      // Update measurementNumber for the measurements with masurementNumber greater or equal than\n      //  measurementNumber of the added measurement (except the added one)\n      //   only if there is another measurement with the same measurementNumber\n      this.updateMeasurementNumberForAllMeasurements(measurement, 1);\n    }\n\n    let addedMeasurement;\n\n    // Upsert the measurement in collection\n    const toolIndex = collection.findIndex(\n      tool => tool._id === measurement._id\n    );\n    if (toolIndex > -1) {\n      addedMeasurement = Object.assign({}, collection[toolIndex], updateObject);\n      collection[toolIndex] = addedMeasurement;\n    } else {\n      addedMeasurement = Object.assign({}, measurement, updateObject);\n      collection.push(addedMeasurement);\n    }\n\n    if (!emptyItem) {\n      // Reflect the entry in the tool group collection\n      groupCollection.push({\n        toolId: toolType,\n        toolItemId: addedMeasurement._id,\n        timepointId: timepoint.timepointId,\n        StudyInstanceUID: addedMeasurement.StudyInstanceUID,\n        createdAt: addedMeasurement.createdAt,\n        lesionNamingNumber: addedMeasurement.lesionNamingNumber,\n        measurementNumber: addedMeasurement.measurementNumber,\n      });\n    }\n\n    // Let others know that the measurements are updated\n    this.onMeasurementsUpdated();\n\n    // TODO: Enable reactivity\n    // this.timepointChanged.set(timepoint.timepointId);\n\n    return addedMeasurement;\n  }\n\n  updateMeasurement(toolType, measurement) {\n    const collection = this.tools[toolType];\n\n    const toolIndex = collection.findIndex(\n      tool => tool._id === measurement._id\n    );\n    if (toolIndex < 0) {\n      return;\n    }\n\n    collection[toolIndex] = Object.assign({}, measurement);\n\n    // Let others know that the measurements are updated\n    this.onMeasurementsUpdated();\n\n    // TODO: Enable reactivity\n    // this.timepointChanged.set(timepoint.timepointId);\n  }\n\n  onMeasurementRemoved(toolType, measurement) {\n    const { lesionNamingNumber, measurementNumber } = measurement;\n\n    const toolGroupId = this.toolsGroupsMap[toolType];\n    const groupCollection = this.toolGroups[toolGroupId];\n\n    const groupIndex = groupCollection.findIndex(\n      group => group.toolItemId === measurement._id\n    );\n    if (groupIndex < 0) {\n      return;\n    }\n\n    //  Remove the deleted measurement only in its timepoint from the collection\n    groupCollection.splice(groupIndex, 1);\n\n    //  Check which timepoints have the deleted measurement\n    const timepointsWithDeletedMeasurement = groupCollection\n      .filter(tool => tool.measurementNumber === measurementNumber)\n      .map(tool => tool.timepointId);\n\n    //  Update lesionNamingNumber and measurementNumber only if there is no timepoint with that measurement\n    if (timepointsWithDeletedMeasurement.length < 1) {\n      //  Decrease lesionNamingNumber of all measurements with lesionNamingNumber greater than lesionNamingNumber of the deleted measurement by 1\n      const lesionNamingNumberFilter = tool =>\n        tool.lesionNamingNumber >= lesionNamingNumber;\n      this.updateNumbering(\n        groupCollection,\n        lesionNamingNumberFilter,\n        'lesionNamingNumber',\n        -1\n      );\n\n      const toolGroup = configuration.measurementTools.find(\n        tGroup => tGroup.id === toolGroupId\n      );\n      if (toolGroup && toolGroup.childTools) {\n        toolGroup.childTools.forEach(childTool => {\n          const collection = this.tools[childTool.id];\n          this.updateNumbering(\n            collection,\n            lesionNamingNumberFilter,\n            'lesionNamingNumber',\n            -1\n          );\n        });\n      }\n\n      //  Decrease measurementNumber of all measurements with measurementNumber greater than measurementNumber of the deleted measurement by 1\n      this.updateMeasurementNumberForAllMeasurements(measurement, -1);\n    }\n\n    // Synchronize the new tool data\n    this.syncMeasurementsAndToolData();\n\n    // Let others know that the measurements are updated\n    this.onMeasurementsUpdated();\n\n    // TODO: Enable reactivity\n    // this.timepointChanged.set(timepoint.timepointId);\n  }\n\n  syncMeasurementsAndToolData() {\n    configuration.measurementTools.forEach(toolGroup => {\n      // Skip the tool groups excluded from case progress\n      if (!MeasurementApi.isToolIncluded(toolGroup)) {\n        return;\n      }\n      toolGroup.childTools.forEach(tool => {\n        // Skip the tools excluded from case progress\n        if (!MeasurementApi.isToolIncluded(tool)) {\n          return;\n        }\n        const measurements = this.tools[tool.id];\n        measurements.forEach(measurement => {\n          MeasurementApi.syncMeasurementAndToolData(measurement);\n        });\n      });\n    });\n  }\n\n  deleteMeasurements(toolType, measurementTypeId, filter) {\n    const filterKeys = Object.keys(filter);\n    const groupCollection = this.toolGroups[measurementTypeId];\n\n    // Stop here if it is a temporary toolGroups\n    if (!groupCollection) return;\n\n    // Get the entries information before removing them\n    const groupItems = groupCollection.filter(toolGroup => {\n      return filterKeys.every(\n        filterKey => toolGroup[filterKey] === filter[filterKey]\n      );\n    });\n    const entries = [];\n    groupItems.forEach(groupItem => {\n      if (!groupItem.toolId) {\n        return;\n      }\n\n      const collection = this.tools[groupItem.toolId];\n      const toolIndex = collection.findIndex(\n        tool => tool._id === groupItem.toolItemId\n      );\n      if (toolIndex > -1) {\n        entries.push(collection[toolIndex]);\n        collection.splice(toolIndex, 1);\n      }\n    });\n\n    // Stop here if no entries were found\n    if (!entries.length) {\n      return;\n    }\n\n    // If the filter doesn't have the measurement number, get it from the first entry\n    const lesionNamingNumber =\n      filter.lesionNamingNumber || entries[0].lesionNamingNumber;\n\n    // Synchronize the new data with cornerstone tools\n    const toolState = cornerstoneTools.globalImageIdSpecificToolStateManager.saveToolState();\n\n    entries.forEach(entry => {\n      const measurementsData = [];\n      const { tool } = MeasurementApi.getToolConfiguration(entry.toolType);\n      if (Array.isArray(tool.childTools)) {\n        tool.childTools.forEach(key => {\n          const childMeasurement = entry[key];\n          if (!childMeasurement) return;\n          measurementsData.push(childMeasurement);\n        });\n      } else {\n        measurementsData.push(entry);\n      }\n\n      measurementsData.forEach(measurementData => {\n        const { imagePath, toolType } = measurementData;\n        const imageId = getImageIdForImagePath(imagePath);\n        if (imageId && toolState[imageId]) {\n          const toolData = toolState[imageId][toolType];\n          const measurementEntries = toolData && toolData.data;\n          const measurementEntry = measurementEntries.find(\n            mEntry => mEntry._id === entry._id\n          );\n          if (measurementEntry) {\n            const index = measurementEntries.indexOf(measurementEntry);\n            measurementEntries.splice(index, 1);\n          }\n        }\n      });\n\n      this.onMeasurementRemoved(toolType, entry);\n    });\n\n    cornerstoneTools.globalImageIdSpecificToolStateManager.restoreToolState(\n      toolState\n    );\n\n    // Synchronize the updated measurements with Cornerstone Tools\n    // toolData to make sure the displayed measurements show 'Target X' correctly\n    const syncFilter = Object.assign({}, filter);\n    delete syncFilter.timepointId;\n    delete syncFilter.lesionNamingNumber;\n\n    const syncFilterKeys = Object.keys(syncFilter);\n\n    const toolTypes = [...new Set(entries.map(entry => entry.toolType))];\n    toolTypes.forEach(toolType => {\n      const collection = this.tools[toolType];\n      collection\n        .filter(tool => {\n          return (\n            tool.lesionNamingNumber > lesionNamingNumber - 1 &&\n            syncFilterKeys.every(\n              syncFilterKey => tool[syncFilterKey] === filter[syncFilterKey]\n            )\n          );\n        })\n        .forEach(measurement => {\n          MeasurementApi.syncMeasurementAndToolData(measurement);\n        });\n    });\n  }\n}\n","import log from '../../log';\nimport { timepointApiDefaultConfig } from './../configuration.js';\n\nconst configuration = {\n  ...timepointApiDefaultConfig,\n};\n\nconst TIMEPOINT_TYPE_NAMES = {\n  prebaseline: 'Pre-Baseline',\n  baseline: 'Baseline',\n  followup: 'Follow-up',\n};\n\nexport default class TimepointApi {\n  static Instance;\n\n  static setConfiguration(config) {\n    Object.assign(configuration, config);\n  }\n\n  static getConfiguration() {\n    return configuration;\n  }\n\n  constructor(currentTimepointId, options = {}) {\n    if (TimepointApi.Instance) {\n      TimepointApi.Instance.initialize(currentTimepointId, options);\n      return TimepointApi.Instance;\n    }\n\n    this.initialize(currentTimepointId, options);\n    TimepointApi.Instance = this;\n  }\n\n  initialize(currentTimepointId, options = {}) {\n    this.currentTimepointId = currentTimepointId;\n    this.comparisonTimepointKey = options.comparisonTimepointKey || 'baseline';\n    this.options = options;\n    this.timepoints = [];\n  }\n\n  onTimepointsUpdated() {\n    if (typeof this.options.onTimepointsUpdated !== 'function') {\n      log.warn('Timepoints update callback is not defined');\n      return;\n    }\n\n    this.options.onTimepointsUpdated(Object.assign([], this.timepoints));\n  }\n\n  calculateVisitNumber(timepoint) {\n    // Retrieve all of the relevant follow-up timepoints for this patient\n    const sortedTimepoints = this.timepoints.sort((tp1, tp2) => {\n      return tp1.visitDate > tp2.visitDate ? 1 : -1;\n    });\n    const filteredTimepoints = sortedTimepoints.find(\n      tp =>\n        tp.PatientID === timepoint.PatientID &&\n        tp.timepointType === timepoint.timepointType\n    );\n\n    // Create an array of just timepointIds, so we can use indexOf\n    // on it to find the current timepoint's relative position\n    const timepointIds = filteredTimepoints.map(\n      timepoint => timepoint.timepointId\n    );\n\n    // Calculate the index of the current timepoint in the array of all\n    // relevant follow-up timepoints\n    const visitNumber = timepointIds.indexOf(timepoint.timepointId) + 1;\n\n    // If visitNumber is 0, it means that the current timepoint was not in the list\n    if (!visitNumber) {\n      throw new Error(\n        'Current timepoint was not in the list of relevant timepoints?'\n      );\n    }\n\n    return visitNumber;\n  }\n\n  retrieveTimepoints(filter) {\n    const retrievalFn = configuration.dataExchange.retrieve;\n    if (typeof retrievalFn !== 'function') {\n      log.error('Timepoint retrieval function has not been configured.');\n      return;\n    }\n\n    return new Promise((resolve, reject) => {\n      retrievalFn(filter)\n        .then(timepointData => {\n          log.info('Timepoint data retrieval');\n\n          timepointData.forEach(timepoint => {\n            const timepointIndex = this.timepoints.findIndex(\n              tp => tp.timepointId === timepoint.timepointId\n            );\n            if (timepointIndex < 0) {\n              this.timepoints.push(timepoint);\n            } else {\n              this.timepoints[timepointIndex] = timepoint;\n            }\n          });\n\n          // Let others know that the timepoints are updated\n          this.onTimepointsUpdated();\n\n          resolve();\n        })\n        .catch(reason => {\n          log.error(`Timepoint retrieval function failed: ${reason}`);\n          reject(reason);\n        });\n    });\n  }\n\n  storeTimepoints() {\n    const storeFn = configuration.dataExchange.store;\n    if (typeof storeFn !== 'function') {\n      log.error('Timepoint store function has not been configured.');\n      return;\n    }\n\n    log.info('Preparing to store timepoints');\n    log.info(JSON.stringify(this.timepoints, null, 2));\n\n    storeFn(this.timepoints).then(() =>\n      log.info('Timepoint storage completed')\n    );\n  }\n\n  disassociateStudy(timepointIds, StudyInstanceUID) {\n    const disassociateFn = configuration.dataExchange.disassociate;\n    if (typeof disassociateFn !== 'function') {\n      log.error('Study disassociate function has not been configured.');\n      return;\n    }\n\n    disassociateFn(timepointIds, StudyInstanceUID).then(() => {\n      log.info('Disassociation completed');\n\n      this.timepoints = [];\n      this.retrieveTimepoints({});\n    });\n  }\n\n  removeTimepoint(timepointId) {\n    const removeFn = configuration.dataExchange.remove;\n    if (typeof removeFn !== 'function') {\n      log.error('Timepoint remove function has not been configured.');\n      return;\n    }\n\n    const timepointData = {\n      timepointId,\n    };\n\n    log.info('Preparing to remove timepoint');\n    log.info(JSON.stringify(timepointData, null, 2));\n\n    removeFn(timepointData).then(() => {\n      log.info('Timepoint removal completed');\n\n      const tpIndex = this.timepoints.findIndex(\n        tp => tp.timepointId === timepointId\n      );\n      if (tpIndex > -1) {\n        this.timepoints.splice(tpIndex, 1);\n      }\n\n      // Let others know that the timepoints are updated\n      this.onTimepointsUpdated();\n    });\n  }\n\n  updateTimepoint(timepointId, query) {\n    const updateFn = configuration.dataExchange.update;\n    if (typeof updateFn !== 'function') {\n      log.error('Timepoint update function has not been configured.');\n      return;\n    }\n\n    const timepointData = {\n      timepointId,\n    };\n\n    log.info('Preparing to update timepoint');\n    log.info(JSON.stringify(timepointData, null, 2));\n    log.info(JSON.stringify(query, null, 2));\n\n    updateFn(timepointData, query).then(() => {\n      log.info('Timepoint updated completed');\n\n      const tpIndex = this.timepoints.findIndex(\n        tp => tp.timepointId === timepointId\n      );\n      if (tpIndex > -1) {\n        this.timepoints[tpIndex] = Object.assign(\n          {},\n          this.timepoints[tpIndex],\n          query\n        );\n      }\n\n      // Let others know that the timepoints are updated\n      this.onTimepointsUpdated();\n    });\n  }\n\n  // Return all timepoints\n  all(filter) {\n    let timepointsToReturn;\n    if (filter) {\n      timepointsToReturn = this.timepoints.filter(filter);\n    } else {\n      timepointsToReturn = this.timepoints;\n    }\n\n    return timepointsToReturn.sort((tp1, tp2) => {\n      return tp1.visitDate < tp2.visitDate ? 1 : -1;\n    });\n  }\n\n  // Return only the current timepoint\n  current() {\n    return this.timepoints.find(\n      tp => tp.timepointId === this.currentTimepointId\n    );\n  }\n\n  lock() {\n    const tpIndex = this.timepoints.findIndex(\n      tp => tp.timepointId === this.currentTimepointId\n    );\n    if (tpIndex < 0) {\n      return;\n    }\n\n    this.timepoints[tpIndex] = Object.assign({}, this.timepoints[tpIndex], {\n      locked: true,\n    });\n  }\n\n  // Return the prior timepoint\n  prior() {\n    const current = this.current();\n    if (!current) {\n      return;\n    }\n\n    return this.all().find(tp => tp.visitDate < current.visitDate);\n  }\n\n  // Return only the current and prior timepoints\n  currentAndPrior() {\n    const timepoints = [];\n\n    const current = this.current();\n    if (current) {\n      timepoints.push(current);\n    }\n\n    const prior = this.prior();\n    if (current && prior && prior.timepointId !== current.timepointId) {\n      timepoints.push(prior);\n    }\n\n    return timepoints;\n  }\n\n  // Return the current and the comparison timepoints\n  currentAndComparison(comparisonTimepointKey = this.comparisonTimepointKey) {\n    const current = this.current();\n    const comparisonTimepoint = this.comparison(comparisonTimepointKey);\n    const timepoints = [current];\n\n    if (\n      comparisonTimepoint &&\n      !timepoints.find(tp => tp.timepointId === comparisonTimepoint.timepointId)\n    ) {\n      timepoints.push(comparisonTimepoint);\n    }\n\n    return timepoints;\n  }\n\n  /**\n   * Return true if there are 2 or more baseline timepoints before and at the current timepoint, otherwise false\n   * @returns {boolean}\n   */\n  isRebaseline(timepointId) {\n    const current = timepointId\n      ? this.timepoints.find(tp => tp.timepointId === timepointId)\n      : this.current();\n    if (!current) {\n      return false;\n    }\n\n    const baselines = this.timepoints.filter(\n      tp => tp.timepointType === 'baseline' && tp.visitDate <= current.visitDate\n    );\n    return baselines.length > 1;\n  }\n\n  /**\n   * Return the next (closest future) baseline after current timepoint\n   * @returns {*}\n   */\n  nextBaselineAfterCurrent() {\n    let current = this.current();\n\n    //  Get all next timepoints newer than the current timepoint sorted by visitDate ascending\n    const sortedTimepoints = this.timepoints.sort((tp1, tp2) => {\n      return tp1.visitDate > tp2.visitDate ? 1 : -1;\n    });\n    return sortedTimepoints.find(\n      tp => tp.visitDate > current.visitDate && tp.timepointType === 'baseline'\n    );\n  }\n\n  /**\n   * Set the current timepoint id\n   * @param timepointId\n   */\n  setCurrentTimepointId(timepointId) {\n    this.currentTimepointId = timepointId;\n  }\n\n  /**\n   * Set the comparison timepoint that overrides the default comparison timepoint (called based on user selection in a viewport)\n   * @param timepoint\n   */\n  setUserComparison(timepoint) {\n    this.userComparison = timepoint;\n  }\n\n  /**\n   * Return only the comparison timepoint\n   * @param {String} [comparisonTimepointKey]\n   * @return {*}\n   */\n  comparison(comparisonTimepointKey = this.comparisonTimepointKey) {\n    // Return the comparison timepoint set by user if exists\n    if (this.userComparison) {\n      return this.userComparison;\n    }\n\n    const current = this.current();\n    if (!current) {\n      return;\n    }\n\n    // If current timepoint is prebaseline, the first (closest future) BL after current is comparison regardless of default comparison timepoint\n    if (current.timepointType === 'prebaseline') {\n      const nextBaselineAfterCurrent = this.nextBaselineAfterCurrent();\n      // If there is a next baseline, make it comparison, otherwise comparison is done by default comparison timepoint\n      if (nextBaselineAfterCurrent) {\n        return nextBaselineAfterCurrent;\n      }\n    }\n\n    // If current timepoint is baseline, the prior is comparison if exists regardless of default comparison timepoint\n    if (current.timepointType === 'baseline') {\n      const prior = this.prior();\n      if (prior) {\n        return prior;\n      }\n    }\n\n    const comparison = this[comparisonTimepointKey]();\n\n    // Do not return a comparison if it would be identical to\n    // the current.\n    if (comparison && comparison.timepointId === current.timepointId) {\n      return;\n    }\n\n    return comparison;\n  }\n\n  /**\n   * Return the latest initial (prebaseline or baseline) timepoint after current and before the next followup timepoint\n   * @returns {*}\n   */\n  latestInitialTimepointAfterCurrent() {\n    let currentTimepoint = this.current();\n\n    //  Skip if the current timepoint is FU since there is no initial timepoint after follow-up\n    if (currentTimepoint.timepointType === 'followup') {\n      return;\n    }\n\n    //  Get all next timepoints newer than the current timepoint sorted by visitDate ascending\n    const sortedTimepoints = this.timepoints.sort((tp1, tp2) => {\n      return tp1.visitDate > tp2.visitDate ? 1 : -1;\n    });\n    const allNextTimepoints = sortedTimepoints.filter(\n      tp => tp.visitDate > currentTimepoint.visitDate\n    );\n\n    const nextFollowupIndex = allNextTimepoints.findIndex(\n      tp => tp.timepointType === 'followup'\n    );\n    const latestInitialBeforeNextFUIndex = nextFollowupIndex - 1;\n\n    if (latestInitialBeforeNextFUIndex < 0) {\n      //  There is no FU and all next timepoints are initial, so return the last one\n      return allNextTimepoints[allNextTimepoints.length - 1];\n    }\n\n    //  Return the latest initial timepoint before the next FU\n    return allNextTimepoints[latestInitialBeforeNextFUIndex];\n  }\n\n  /**\n   * Return timepoint ids of initial timepoints which are prebaseline and baseline\n   * @returns {*}\n   */\n  initialTimepointIds() {\n    let timepointToCheck = this.current();\n\n    //  If the current timepoint is PBL or BL, then get the recent PBL/BL of the current timepoint by its first FU\n    //      If it does not exist, then there is no newer initial timepoint, so the current timepoint is used to determine initial timepoint ids\n    if (\n      timepointToCheck.timepointType === 'prebaseline' ||\n      timepointToCheck.timepointType === 'baseline'\n    ) {\n      timepointToCheck =\n        this.latestInitialTimepointAfterCurrent() || timepointToCheck;\n    }\n\n    const visitDateToCheck = timepointToCheck.visitDate;\n\n    const preBaselineTimepoints =\n      this.timepoints.filter(\n        tp =>\n          tp.timepointType === 'prebaseline' && tp.visitDate <= visitDateToCheck\n      ) || [];\n    const preBaselineTimepointIds = preBaselineTimepoints.map(\n      timepoint => timepoint.timepointId\n    );\n\n    const baselineTimepoints =\n      this.timepoints.filter(\n        tp =>\n          tp.timepointType === 'baseline' && tp.visitDate <= visitDateToCheck\n      ) || [];\n    const baselineTimepointIds = baselineTimepoints.map(\n      timepoint => timepoint.timepointId\n    );\n\n    return preBaselineTimepointIds.concat(baselineTimepointIds);\n  }\n\n  // Return only the baseline timepoint\n  baseline() {\n    const currentVisitDate = this.current().visitDate;\n    return this.all().find(\n      tp => tp.timepointType === 'baseline' && tp.visitDate <= currentVisitDate\n    );\n  }\n\n  /**\n   * Return only the nadir timepoint. Must be prior to the current timepoint\n   * @return {any}\n   */\n  nadir() {\n    const current = this.current();\n    const nadir = this.all().find(\n      tp =>\n        tp.timepointId !== current.timepointId &&\n        tp.timepointKey === 'nadir' &&\n        tp.visitDate <= current.visitDate\n    );\n\n    // If we have found a nadir, return that\n    if (nadir) {\n      return nadir;\n    }\n\n    // Otherwise, return the most recent baseline\n    // This should only happen if we are only at FU1,\n    // so the baseline is the nadir.\n    return this.baseline();\n  }\n\n  // Return only the key timepoints (current, prior, nadir and baseline)\n  key() {\n    const result = [this.current()];\n    const prior = this.prior();\n    const nadir = this.nadir();\n    const baseline = this.baseline();\n\n    const resultIncludes = timepoint =>\n      !!result.find(x => x.timepointId === timepoint.timepointId);\n\n    if (prior && resultIncludes(prior) === false) {\n      result.push(prior);\n    }\n\n    if (nadir && resultIncludes(nadir) === false) {\n      result.push(nadir);\n    }\n\n    if (baseline && resultIncludes(baseline) === false) {\n      result.push(baseline);\n    }\n\n    return result;\n  }\n\n  // Return only the timepoints for the given study\n  study(StudyInstanceUID) {\n    return this.all().filter(timepoint =>\n      timepoint.studyInstanceUIDs.includes(StudyInstanceUID)\n    );\n  }\n\n  // Return the timepoint's name\n  name(timepoint) {\n    const timepointTypeName = TIMEPOINT_TYPE_NAMES[timepoint.timepointType];\n\n    // Check if this is a Baseline timepoint, if it is, return 'Baseline'\n    if (timepoint.timepointType === 'baseline') {\n      return 'Baseline';\n    } else if (timepoint.visitNumber) {\n      return `${timepointTypeName} ${timepoint.visitNumber}`;\n    }\n\n    const visitNumber = this.calculateVisitNumber(timepoint);\n\n    // Return the timepoint name as 'Follow-up N'\n    return `${timepointTypeName} ${visitNumber}`;\n  }\n\n  // Build the timepoint title based on its date\n  title(timepoint) {\n    const timepointName = this.name(timepoint);\n\n    const all = this.all();\n    let index = -1;\n    let currentIndex = null;\n    for (let i = 0; i < all.length; i++) {\n      const currentTimepoint = all[i];\n\n      // Skip the iterations until we can't find the selected timepoint on study list\n      if (this.currentTimepointId === currentTimepoint.timepointId) {\n        currentIndex = 0;\n      }\n\n      if (currentIndex !== null) {\n        index = currentIndex++;\n      }\n\n      // Break the loop if reached the timepoint to get the title\n      if (currentTimepoint.timepointId === timepoint.timepointId) {\n        break;\n      }\n    }\n\n    const states = {\n      0: ['Current'],\n      1: ['Prior'],\n    };\n    const parenthesis = states[index] || [];\n    const nadir = this.nadir();\n\n    if (nadir && nadir.timepointId === timepoint.timepointId) {\n      parenthesis.push('Nadir');\n    }\n\n    let parenthesisText = '';\n    if (parenthesis.length) {\n      parenthesisText = `(${parenthesis.join(', ')})`;\n    }\n\n    return `${timepointName} ${parenthesisText}`;\n  }\n}\n","export class BaseCriterion {\n  constructor(options, criterionName) {\n    this.options = options;\n    this.criterionName = criterionName;\n  }\n\n  generateResponse(message, measurements) {\n    const passed = !message;\n    const isGlobal = !measurements || !measurements.length;\n\n    return {\n      passed,\n      isGlobal,\n      message,\n      measurements,\n      criterionName: this.criterionName,\n    };\n  }\n\n  getNewTargetNumbers(data) {\n    const { options } = this;\n    const baselineMeasurementNumbers = [];\n    const newTargetNumbers = new Set();\n\n    if (options.newTarget) {\n      data.targets.forEach(target => {\n        const { measurementNumber } = target.measurement;\n        if (target.timepoint.timepointType === 'baseline') {\n          baselineMeasurementNumbers.push(measurementNumber);\n        }\n      });\n      data.targets.forEach(target => {\n        const { measurementNumber } = target.measurement;\n        if (target.timepoint.timepointType === 'followup') {\n          if (!baselineMeasurementNumbers.includes(measurementNumber)) {\n            newTargetNumbers.add(measurementNumber);\n          }\n        }\n      });\n    }\n\n    return newTargetNumbers;\n  }\n}\n","import { BaseCriterion } from './BaseCriterion';\n\nexport const LocationSchema = {\n  type: 'object',\n};\n\n/* LocationCriterion\n *   Check if the there are non-target measurements with response different than \"present\" on baseline\n */\nexport class LocationCriterion extends BaseCriterion {\n  constructor(...props) {\n    super(...props);\n  }\n\n  evaluate(data) {\n    const items = data.targets.concat(data.nonTargets);\n    const measurements = [];\n    let message;\n\n    items.forEach(item => {\n      const measurement = item.measurement;\n\n      if (!measurement.location) {\n        measurements.push(measurement);\n      }\n    });\n\n    if (measurements.length) {\n      message = 'All measurements should have a location';\n    }\n\n    return this.generateResponse(message, measurements);\n  }\n}\n","import { BaseCriterion } from './BaseCriterion';\n\nexport const MaxTargetsPerOrganSchema = {\n  type: 'object',\n  properties: {\n    limit: {\n      label: 'Max targets allowed per organ',\n      type: 'integer',\n      minimum: 1,\n    },\n    newTarget: {\n      label: 'Flag to evaluate only new targets',\n      type: 'boolean',\n    },\n    isNodal: {\n      label: 'Filter to evaluate only nodal or extranodal measurements',\n      type: 'boolean'\n    },\n    message: {\n      label: 'Message to be displayed in case of nonconformity',\n      type: 'string',\n    }\n  },\n  required: ['limit'],\n};\n\n/*\n * MaxTargetsPerOrganCriterion\n *   Check if the number of target measurements per organ exceeded the limit allowed\n * Options:\n *   limit: Max targets allowed in study\n *   newTarget: Flag to evaluate only new targets (must be evaluated on both)\n *   isNodal: Filter to evaluate only nodal or extranodal measurements\n *   message: Message to be displayed in case of nonconformity\n */\nexport class MaxTargetsPerOrganCriterion extends BaseCriterion {\n  constructor(...props) {\n    super(...props);\n  }\n\n  evaluate(data) {\n    const { options } = this;\n    const targetsPerOrgan = {};\n    let measurements = [];\n\n    const newTargetNumbers = this.getNewTargetNumbers(data);\n    data.targets.forEach(target => {\n      const { measurement } = target;\n      const { location, measurementNumber, isSplitLesion, isNodal } = measurement;\n\n      if (isSplitLesion)\n        return;\n\n      if (typeof isNodal === 'boolean' && typeof options.isNodal === 'boolean' && options.isNodal !== isNodal)\n        return;\n\n      if (!targetsPerOrgan[location]) {\n        targetsPerOrgan[location] = new Set();\n      }\n\n      if (!options.newTarget || newTargetNumbers.has(measurementNumber)) {\n        targetsPerOrgan[location].add(measurementNumber);\n      }\n\n      if (targetsPerOrgan[location].size > options.limit) {\n        measurements.push(measurement);\n      }\n    });\n\n    let message;\n    if (measurements.length) {\n      const increment = options.newTarget ? 'new ' : '';\n      message =\n        options.message ||\n        `Each organ should not have more than ${\n        options.limit\n        } ${increment}targets.`;\n    }\n\n    return this.generateResponse(message, measurements);\n  }\n}\n","import { BaseCriterion } from './BaseCriterion';\n\nexport const MaxTargetsSchema = {\n  type: 'object',\n  properties: {\n    limit: {\n      label: 'Max targets allowed in study',\n      type: 'integer',\n      minimum: 0,\n    },\n    newTarget: {\n      label: 'Flag to evaluate only new targets',\n      type: 'boolean',\n    },\n    locationIn: {\n      label:\n        'Filter to evaluate only measurements with the specified locations',\n      type: 'array',\n      items: {\n        type: 'string',\n      },\n      minItems: 1,\n      uniqueItems: true,\n    },\n    locationNotIn: {\n      label:\n        'Filter to evaluate only measurements without the specified locations',\n      type: 'array',\n      items: {\n        type: 'string',\n      },\n      minItems: 1,\n      uniqueItems: true,\n    },\n    isNodal: {\n      label: 'Filter to evaluate only nodal or extranodal measurements',\n      type: 'boolean'\n    },\n    message: {\n      label: 'Message to be displayed in case of nonconformity',\n      type: 'string',\n    }\n  },\n  required: ['limit'],\n};\n\n/* MaxTargetsCriterion\n *   Check if the number of target measurements exceeded the limit allowed\n * Options:\n *   limit: Max targets allowed in study\n *   newTarget: Flag to evaluate only new targets (must be evaluated on both)\n *   locationIn: Filter to evaluate only measurements with the specified locations\n *   locationNotIn: Filter to evaluate only measurements without the specified locations\n *   isNodal: Filter to evaluate only nodal or extranodal measurements\n *   message: Message to be displayed in case of nonconformity\n */\nexport class MaxTargetsCriterion extends BaseCriterion {\n  constructor(...props) {\n    super(...props);\n  }\n\n  evaluate(data) {\n    const { options } = this;\n\n    const newTargetNumbers = this.getNewTargetNumbers(data);\n    const measurementNumbers = [];\n    data.targets.forEach(target => {\n      const { location, measurementNumber, isSplitLesion, isNodal } = target.measurement;\n\n      if (isSplitLesion)\n        return;\n\n      if (typeof isNodal === 'boolean' && typeof options.isNodal === 'boolean' && options.isNodal !== isNodal)\n        return;\n\n      if (options.newTarget && !newTargetNumbers.has(measurementNumber))\n        return;\n\n      if (options.locationIn && options.locationIn.indexOf(location) === -1)\n        return;\n\n      if (options.locationNotIn && options.locationNotIn.indexOf(location) > -1)\n        return;\n\n      measurementNumbers.push(measurementNumber);\n    });\n\n    let lesionType = '';\n    if (typeof options.isNodal === 'boolean') {\n      lesionType = options.isNodal ? 'nodal ' : 'extranodal ';\n    }\n\n    let message;\n    if (measurementNumbers.length > options.limit) {\n      const increment = options.newTarget ? 'new ' : '';\n      const plural = options.limit === 1 ? '' : 's';\n      const amount = options.limit === 0 ? '' : `more than ${options.limit}`;\n      message =\n        options.message ||\n        `The study should not have ${amount} ${increment}${lesionType}target${plural}.`;\n    }\n\n    return this.generateResponse(message);\n  }\n}\n","import { BaseCriterion } from './BaseCriterion';\n\nexport const MeasurementsLengthSchema = {\n  type: 'object',\n  properties: {\n    longAxis: {\n      label: 'Minimum length of long axis',\n      type: 'number',\n      minimum: 0,\n    },\n    shortAxis: {\n      label: 'Minimum length of short axis',\n      type: 'number',\n      minimum: 0,\n    },\n    longAxisSliceThicknessMultiplier: {\n      label: 'Length of long axis multiplier',\n      type: 'number',\n      minimum: 0,\n    },\n    shortAxisSliceThicknessMultiplier: {\n      label: 'Length of short axis multiplier',\n      type: 'number',\n      minimum: 0,\n    },\n    modalityIn: {\n      label:\n        'Filter to evaluate only measurements with the specified modalities',\n      type: 'array',\n      items: {\n        type: 'string',\n      },\n      minItems: 1,\n      uniqueItems: true,\n    },\n    modalityNotIn: {\n      label:\n        'Filter to evaluate only measurements without the specified modalities',\n      type: 'array',\n      items: {\n        type: 'string',\n      },\n      minItems: 1,\n      uniqueItems: true,\n    },\n    locationIn: {\n      label:\n        'Filter to evaluate only measurements with the specified locations',\n      type: 'array',\n      items: {\n        type: 'string',\n      },\n      minItems: 1,\n      uniqueItems: true,\n    },\n    locationNotIn: {\n      label:\n        'Filter to evaluate only measurements without the specified locations',\n      type: 'array',\n      items: {\n        type: 'string',\n      },\n      minItems: 1,\n      uniqueItems: true,\n    },\n    isNodal: {\n      label: 'Filter to evaluate only nodal or extranodal measurements',\n      type: 'boolean',\n    },\n    message: {\n      label: 'Message to be displayed in case of nonconformity',\n      type: 'string',\n    },\n  },\n  anyOf: [\n    { required: ['message', 'longAxis'] },\n    { required: ['message', 'shortAxis'] },\n    { required: ['message', 'longAxisSliceThicknessMultiplier'] },\n    { required: ['message', 'shortAxisSliceThicknessMultiplier'] },\n  ],\n};\n\n/*\n * MeasurementsLengthCriterion\n *   Check the measurements of all bidirectional tools based on\n *   short axis, long axis, modalities, location and slice thickness\n * Options:\n *   longAxis: Minimum length of long axis\n *   shortAxis: Minimum length of short axis\n *   longAxisSliceThicknessMultiplier: Length of long axis multiplier\n *   shortAxisSliceThicknessMultiplier: Length of short axis multiplier\n *   modalityIn: Filter to evaluate only measurements with the specified modalities\n *   modalityNotIn: Filter to evaluate only measurements without the specified modalities\n *   locationIn: Filter to evaluate only measurements with the specified locations\n *   locationNotIn: Filter to evaluate only measurements without the specified locations\n *   isNodal: Filter to evaluate only nodal or extranodal measurements\n *   message: Message to be displayed in case of nonconformity\n */\nexport class MeasurementsLengthCriterion extends BaseCriterion {\n  constructor(...props) {\n    super(...props);\n  }\n\n  evaluate(data) {\n    let message;\n    let measurements = [];\n    const { options } = this;\n    const longMultiplier = options.longAxisSliceThicknessMultiplier;\n    const shortMultiplier = options.shortAxisSliceThicknessMultiplier;\n\n    data.targets.forEach(item => {\n      const { metadata, measurement } = item;\n      const { location } = measurement;\n\n      let { longestDiameter, shortestDiameter, isNodal } = measurement;\n      if (measurement.childToolsCount) {\n        const child = measurement.bidirectional;\n        longestDiameter = (child && child.longestDiameter) || 0;\n        shortestDiameter = (child && child.shortestDiameter) || 0;\n      }\n\n      const { SliceThickness } = metadata;\n\n      const Modality = metadata.getTagValue('Modality') || '';\n\n      // Stop here if the measurement does not match the Modality and location filters\n      if (\n        typeof isNodal === 'boolean' &&\n        typeof options.isNodal === 'boolean' &&\n        options.isNodal !== isNodal\n      )\n        return;\n      if (options.locationIn && options.locationIn.indexOf(location) === -1)\n        return;\n      if (options.modalityIn && options.modalityIn.indexOf(Modality) === -1)\n        return;\n      if (options.locationNotIn && options.locationNotIn.indexOf(location) > -1)\n        return;\n      if (options.modalityNotIn && options.modalityNotIn.indexOf(Modality) > -1)\n        return;\n\n      // Check the measurement length\n      const failed =\n        (options.longAxis && longestDiameter < options.longAxis) ||\n        (options.shortAxis && shortestDiameter < options.shortAxis) ||\n        (longMultiplier &&\n          !isNaN(SliceThickness) &&\n          longestDiameter < longMultiplier * SliceThickness) ||\n        (shortMultiplier &&\n          !isNaN(SliceThickness) &&\n          shortestDiameter < shortMultiplier * SliceThickness);\n\n      // Mark this measurement as invalid if some of the checks have failed\n      if (failed) {\n        measurements.push(measurement);\n      }\n    });\n\n    // Use the options' message if some measurement is invalid\n    if (measurements.length) {\n      message = options.message;\n    }\n\n    return this.generateResponse(message, measurements);\n  }\n}\n","import { BaseCriterion } from './BaseCriterion';\n\nexport const ModalitySchema = {\n  type: 'object',\n  properties: {\n    method: {\n      label: 'Specify if it\\'s goinig to \"allow\" or \"deny\" the modalities',\n      type: 'string',\n      enum: ['allow', 'deny'],\n    },\n    measurementTypes: {\n      label: 'List of measurement types that will be evaluated',\n      type: 'array',\n      items: {\n        type: 'string',\n      },\n      minItems: 1,\n      uniqueItems: true,\n    },\n    modalities: {\n      label: 'List of allowed/denied modalities',\n      type: 'array',\n      items: {\n        type: 'string',\n      },\n      minItems: 1,\n      uniqueItems: true,\n    },\n  },\n  required: ['method', 'modalities'],\n};\n\n/*\n * ModalityCriteria\n *   Check if a Modality is allowed or denied\n * Options:\n *   method (string): Specify if it\\'s goinig to \"allow\" or \"deny\" the modalities\n *   measurementTypes (string[]): List of measurement types that will be evaluated\n *   modalities (string[]): List of allowed/denied modalities\n */\nexport class ModalityCriterion extends BaseCriterion {\n  constructor(...props) {\n    super(...props);\n  }\n\n  evaluate(data) {\n    const measurementTypes = this.options.measurementTypes || ['targets'];\n    const modalitiesSet = new Set(this.options.modalities);\n    const validationMethod = this.options.method;\n    const measurements = [];\n    const invalidModalities = new Set();\n    let message;\n\n    measurementTypes.forEach(measurementType => {\n      const items = data[measurementType];\n\n      items.forEach(item => {\n        const { measurement, metadata } = item;\n        const Modality = metadata.getTagValue('Modality') || '';\n\n        if (\n          (validationMethod === 'allow' && !modalitiesSet.has(Modality)) ||\n          (validationMethod === 'deny' && modalitiesSet.has(Modality))\n        ) {\n          measurements.push(measurement);\n          invalidModalities.add(Modality);\n        }\n      });\n    });\n\n    if (measurements.length) {\n      const uniqueModalities = Array.from(invalidModalities);\n      const uniqueModalitiesText = uniqueModalities.join(', ');\n      const modalityText =\n        uniqueModalities.length > 1 ? 'modalities' : 'Modality';\n\n      message = `The ${modalityText} ${uniqueModalitiesText} should not be used as a method of measurement`;\n    }\n\n    return this.generateResponse(message, measurements);\n  }\n}\n","import { BaseCriterion } from './BaseCriterion';\n\nexport const NonTargetResponseSchema = {\n  type: 'object',\n};\n\n/* NonTargetResponseCriterion\n *   Check if the there are non-target measurements with response different than \"present\" on baseline\n */\nexport class NonTargetResponseCriterion extends BaseCriterion {\n  constructor(...props) {\n    super(...props);\n  }\n\n  evaluate(data) {\n    const items = data.nonTargets;\n    const measurements = [];\n    let message;\n\n    items.forEach(item => {\n      const measurement = item.measurement;\n      const response = (measurement.response || '').toLowerCase();\n\n      if (response !== 'present') {\n        measurements.push(measurement);\n      }\n    });\n\n    if (measurements.length) {\n      message = 'Non-targets can only be assessed as \"present\"';\n    }\n\n    return this.generateResponse(message, measurements);\n  }\n}\n","import { BaseCriterion } from './BaseCriterion';\n\nexport const TargetTypeSchema = {\n  type: 'object',\n};\n\n/* TargetTypeCriterion\n *   Check if the there are non-bidirectional target measurements on baseline\n */\nexport class TargetTypeCriterion extends BaseCriterion {\n  constructor(...props) {\n    super(...props);\n  }\n\n  evaluate(data) {\n    const items = data.targets;\n    const measurements = [];\n    let message;\n\n    items.forEach(item => {\n      const measurement = item.measurement;\n\n      if (\n        measurement.toolType !== 'Bidirectional' &&\n        !measurement.bidirectional\n      ) {\n        measurements.push(measurement);\n      }\n    });\n\n    if (measurements.length) {\n      message =\n        'Target lesions must have measurements (cannot be assessed as CR, UN/NE, EX)';\n    }\n\n    return this.generateResponse(message, measurements);\n  }\n}\n","import { BaseCriterion } from './criteria/BaseCriterion';\nimport * as initialCriteria from './criteria';\nimport Ajv from 'ajv';\n\nconst Criteria = Object.assign({}, initialCriteria);\n\nexport class CriteriaEvaluator {\n  constructor(criteriaObject) {\n    const criteriaValidator = this.getCriteriaValidator();\n    this.criteria = [];\n\n    if (!criteriaValidator(criteriaObject)) {\n      let message = '';\n      criteriaValidator.errors.forEach(error => {\n        message += `\\noptions${error.dataPath} ${error.message}`;\n      });\n      throw new Error(message);\n    }\n\n    Object.keys(criteriaObject).forEach(criterionkey => {\n      const optionsObject = criteriaObject[criterionkey];\n      const Criterion = Criteria[`${criterionkey}Criterion`];\n      const optionsArray =\n        optionsObject instanceof Array ? optionsObject : [optionsObject];\n      optionsArray.forEach(options =>\n        this.criteria.push(new Criterion(options, criterionkey))\n      );\n    });\n  }\n\n  getMaxTargets(newTarget = false) {\n    let result = 0;\n    this.criteria.forEach(criterion => {\n      const newTargetMatch = newTarget === !!criterion.options.newTarget;\n      if (criterion instanceof Criteria.MaxTargetsCriterion && newTargetMatch) {\n        const { limit } = criterion.options;\n        if (limit > result) {\n          result = limit;\n        }\n      }\n    });\n    return result;\n  }\n\n  getCriteriaValidator() {\n    if (CriteriaEvaluator.criteriaValidator) {\n      return CriteriaEvaluator.criteriaValidator;\n    }\n\n    const schema = {\n      properties: {},\n      definitions: {},\n    };\n\n    Object.keys(Criteria).forEach(key => {\n      const Criterion = Criteria[key];\n      if (Criterion.prototype instanceof BaseCriterion) {\n        const criterionkey = key.replace(/Criterion$/, '');\n        const criterionDefinition = `#/definitions/${criterionkey}`;\n\n        schema.definitions[criterionkey] = Criteria[`${criterionkey}Schema`];\n        schema.properties[criterionkey] = {\n          oneOf: [\n            { $ref: criterionDefinition },\n            {\n              type: 'array',\n              items: {\n                $ref: criterionDefinition,\n              },\n            },\n          ],\n        };\n      }\n    });\n\n    CriteriaEvaluator.criteriaValidator = new Ajv().compile(schema);\n    return CriteriaEvaluator.criteriaValidator;\n  }\n\n  evaluate(data) {\n    const nonconformities = [];\n    this.criteria.forEach(criterion => {\n      const criterionResult = criterion.evaluate(data);\n      if (!criterionResult.passed) {\n        nonconformities.push(criterionResult);\n      }\n    });\n    return nonconformities;\n  }\n\n  static setCriterion(criterionKey, criterionDefinitions) {\n    Criteria[criterionKey] = criterionDefinitions;\n  }\n}\n","import * as recistEvaluation from './recist.json';\n\nexport const recist11 = recistEvaluation;\n","import { CriteriaEvaluator } from './CriteriaEvaluator';\nimport * as initialEvaluations from './evaluations';\nimport log from '../../log';\n\nconst evaluations = Object.assign({}, initialEvaluations);\n\nconst BASELINE = 'baseline';\nconst FOLLOWUP = 'followup';\nconst BOTH = 'both';\nconst TARGETS = 'targets';\nconst NONTARGETS = 'nonTargets';\n\nclass ConformanceCriteria {\n  constructor(measurementApi, timepointApi, options = {}) {\n    this.measurementApi = measurementApi;\n    this.timepointApi = timepointApi;\n    this.nonconformities = [];\n    this.groupedNonConformities = [];\n    this.maxTargets = null;\n    this.maxNewTargets = null;\n    this.options = options;\n  }\n\n  loadStudy(StudyInstanceUID) {\n    if (typeof this.options.loadStudy !== 'function') {\n      throw new Error('loadStudy callback is not defined');\n    }\n\n    return this.options.loadStudy(null, StudyInstanceUID);\n  }\n\n  async validate(trialCriteriaType) {\n    const baselinePromise = this.getData(BASELINE);\n    const followupPromise = this.getData(FOLLOWUP);\n    const [baselineData, followupData] = await Promise.all([\n      baselinePromise,\n      followupPromise,\n    ]);\n    const mergedData = {\n      targets: [],\n      nonTargets: [],\n    };\n\n    mergedData.targets = mergedData.targets.concat(baselineData.targets);\n    mergedData.targets = mergedData.targets.concat(followupData.targets);\n    mergedData.nonTargets = mergedData.nonTargets.concat(\n      baselineData.nonTargets\n    );\n    mergedData.nonTargets = mergedData.nonTargets.concat(\n      followupData.nonTargets\n    );\n\n    this.maxTargets = null;\n    this.maxNewTargets = null;\n    const resultBoth = this.validateTimepoint(\n      BOTH,\n      trialCriteriaType,\n      mergedData\n    );\n    const resultBaseline = this.validateTimepoint(\n      BASELINE,\n      trialCriteriaType,\n      baselineData\n    );\n    const resultFollowup = this.validateTimepoint(\n      FOLLOWUP,\n      trialCriteriaType,\n      followupData\n    );\n    const nonconformities = resultBaseline\n      .concat(resultFollowup)\n      .concat(resultBoth);\n    const groupedNonConformities = this.groupNonConformities(nonconformities);\n\n    // Keep both? Group the data only on viewer/measurementTable views?\n    // Work with not grouped data (worse lookup performance on measurementTableRow)?\n    this.nonconformities = nonconformities;\n    this.groupedNonConformities = groupedNonConformities;\n\n    console.warn('nonconformities');\n    console.warn(nonconformities);\n    console.warn('groupedNonConformities');\n    console.warn(groupedNonConformities);\n\n    return nonconformities;\n  }\n\n  groupNonConformities(nonconformities) {\n    const groups = {};\n    const toolsGroupsMap = this.measurementApi.toolsGroupsMap;\n\n    nonconformities.forEach(nonConformity => {\n      if (nonConformity.isGlobal) {\n        groups.globals = groups.globals || { messages: [] };\n        groups.globals.messages.push(nonConformity.message);\n\n        return;\n      }\n\n      nonConformity.measurements.forEach(measurement => {\n        const groupName = toolsGroupsMap[measurement.toolType];\n        groups[groupName] = groups[groupName] || { measurementNumbers: {} };\n\n        const group = groups[groupName];\n        const measureNumber = measurement.measurementNumber;\n        let measurementNumbers = group.measurementNumbers[measureNumber];\n\n        if (!measurementNumbers) {\n          measurementNumbers = group.measurementNumbers[measureNumber] = {\n            messages: [],\n            measurements: [],\n          };\n        }\n\n        measurementNumbers.messages.push(nonConformity.message);\n        measurementNumbers.measurements.push(measurement);\n      });\n    });\n\n    return groups;\n  }\n\n  validateTimepoint(timepointType, trialCriteriaType, data) {\n    const evaluators = this.getEvaluators(timepointType, trialCriteriaType);\n    let nonconformities = [];\n\n    evaluators.forEach(evaluator => {\n      const maxTargets = evaluator.getMaxTargets(false);\n      const maxNewTargets = evaluator.getMaxTargets(true);\n      if (maxTargets) {\n        this.maxTargets = maxTargets;\n      }\n\n      if (maxNewTargets) {\n        this.maxNewTargets = maxNewTargets;\n      }\n\n      const result = evaluator.evaluate(data);\n\n      if (result.length > 0) {\n        result.forEach(resultItem => {\n          resultItem.timepointType = timepointType;\n        });\n      }\n\n      nonconformities = nonconformities.concat(result);\n    });\n\n    return nonconformities;\n  }\n\n  getEvaluators(timepointType, trialCriteriaType) {\n    const evaluators = [];\n    console.warn(evaluations);\n    const trialCriteriaTypeId = trialCriteriaType.id.toLowerCase();\n    const evaluation = evaluations[trialCriteriaTypeId];\n\n    if (evaluation) {\n      const evaluationTimepoint = evaluation[timepointType];\n\n      if (evaluationTimepoint) {\n        evaluators.push(new CriteriaEvaluator(evaluationTimepoint));\n      }\n    }\n\n    return evaluators;\n  }\n\n  /*\n   * Build the data that will be used to do the conformance criteria checks\n   */\n  async getData(timepointType) {\n    const data = {\n      targets: [],\n      nonTargets: [],\n    };\n\n    const studyPromises = [];\n\n    const fillData = measurementType => {\n      const measurements = this.measurementApi.fetch(measurementType);\n\n      measurements.forEach(measurement => {\n        const { StudyInstanceUID } = measurement;\n\n        const timepointId = measurement.timepointId;\n        const timepoint =\n          timepointId &&\n          this.timepointApi.timepoints.find(a => a.timepointId === timepointId);\n\n        if (\n          !timepoint ||\n          (timepointType !== BOTH && timepoint.timepointType !== timepointType)\n        ) {\n          return;\n        }\n\n        const promise = this.loadStudy(StudyInstanceUID);\n        promise.then(\n          studyMetadata => {\n            data[measurementType].push({\n              measurement,\n              metadata: studyMetadata.getFirstInstance(),\n              timepoint,\n            });\n          },\n          error => {\n            throw new Error(error);\n          }\n        );\n        studyPromises.push(promise);\n      });\n    };\n\n    fillData(TARGETS);\n    fillData(NONTARGETS);\n\n    await Promise.all(studyPromises);\n\n    return data;\n  }\n\n  static setEvaluationDefinitions(evaluationKey, evaluationDefinitions) {\n    evaluations[evaluationKey] = evaluationDefinitions;\n  }\n}\n\nexport default ConformanceCriteria;\n//OHIF.measurements.ConformanceCriteria = ConformanceCriteria;\n","import cornerstone from 'cornerstone-core';\n\nexport default function(element) {\n  // Get the Cornerstone imageId\n  const enabledElement = cornerstone.getEnabledElement(element);\n  const imageId = enabledElement.image.imageId;\n\n  // Get StudyInstanceUID & PatientID\n  const {\n    StudyInstanceUID,\n    PatientID,\n    SeriesInstanceUID,\n    SOPInstanceUID,\n  } = cornerstone.metaData.get('instance', imageId);\n\n  const splitImageId = imageId.split('&frame');\n  const frameIndex =\n    splitImageId[1] !== undefined ? Number(splitImageId[1]) : 0;\n\n  const imagePath = [\n    StudyInstanceUID,\n    SeriesInstanceUID,\n    SOPInstanceUID,\n    frameIndex,\n  ].join('_');\n\n  return {\n    PatientID,\n    StudyInstanceUID,\n    SeriesInstanceUID,\n    SOPInstanceUID,\n    frameIndex,\n    imagePath,\n  };\n}\n","import cornerstone from 'cornerstone-core';\n\nexport default function refreshCornerstoneViewports() {\n  cornerstone.getEnabledElements().forEach(enabledElement => {\n    if (enabledElement.image) {\n      cornerstone.updateImage(enabledElement.element);\n    }\n  });\n}\n","import cornerstone from 'cornerstone-core';\nimport { MeasurementApi } from '../classes';\nimport log from '../../log';\nimport user from '../../user';\nimport getImageAttributes from '../lib/getImageAttributes';\nimport getLabel from '../lib/getLabel';\nimport refreshCornerstoneViewports from '../lib/refreshCornerstoneViewports';\n\nexport default function handleSingleMeasurementAdded({ eventData, tool }) {\n  const measurementApi = MeasurementApi.Instance;\n  if (!measurementApi) {\n    log.warn('Measurement API is not initialized');\n  }\n\n  const { measurementData, toolType } = eventData;\n\n  const collection = measurementApi.tools[toolType];\n\n  // Stop here if the tool data shall not be persisted (e.g. temp tools)\n  if (!collection) return;\n\n  // Stop here if there's no measurement data or if it was cancelled\n  if (!measurementData || measurementData.cancelled) return;\n\n  log.info('CornerstoneToolsMeasurementAdded');\n\n  const imageAttributes = getImageAttributes(eventData.element);\n  const measurement = Object.assign({}, measurementData, imageAttributes, {\n    lesionNamingNumber: measurementData.lesionNamingNumber,\n    userId: user.getUserId(),\n    toolType,\n  });\n\n  const addedMeasurement = measurementApi.addMeasurement(toolType, measurement);\n  Object.assign(measurementData, addedMeasurement);\n\n  const measurementLabel = getLabel(measurementData);\n  if (measurementLabel) {\n    measurementData.labels = [measurementLabel];\n  }\n\n  // TODO: This is very hacky, but will work for now\n  refreshCornerstoneViewports();\n\n  // TODO: Notify about the last activated measurement\n\n  if (MeasurementApi.isToolIncluded(tool)) {\n    // TODO: Notify that viewer suffered changes\n  }\n}\n","import cornerstone from 'cornerstone-core';\nimport { MeasurementApi } from '../classes';\nimport log from '../../log';\nimport user from '../../user';\nimport getImageAttributes from '../lib/getImageAttributes';\nimport getLabel from '../lib/getLabel';\nimport refreshCornerstoneViewports from '../lib/refreshCornerstoneViewports';\n\nexport default function({ eventData, tool, toolGroupId, toolGroup }) {\n  const measurementApi = MeasurementApi.Instance;\n  if (!measurementApi) {\n    log.warn('Measurement API is not initialized');\n  }\n\n  const { measurementData } = eventData;\n\n  const collection = measurementApi.tools[tool.parentTool];\n\n  // Stop here if the tool data shall not be persisted (e.g. temp tools)\n  if (!collection) return;\n\n  // Stop here if there's no measurement data or if it was cancelled\n  if (!measurementData || measurementData.cancelled) return;\n\n  log.info('CornerstoneToolsMeasurementAdded');\n\n  const imageAttributes = getImageAttributes(eventData.element);\n\n  const additionalProperties = Object.assign(imageAttributes, {\n    userId: user.getUserId(),\n  });\n\n  const childMeasurement = Object.assign(\n    {},\n    measurementData,\n    additionalProperties\n  );\n\n  const parentMeasurement = collection.find(\n    t =>\n      t.toolType === tool.parentTool &&\n      t.PatientID === imageAttributes.PatientID &&\n      t[tool.attribute] === null\n  );\n\n  // Check if a measurement to fit this child tool already exists\n  if (parentMeasurement) {\n    const key = tool.attribute;\n\n    // Add the createdAt attribute\n    childMeasurement.createdAt = new Date();\n\n    // Update the parent measurement\n    parentMeasurement[key] = childMeasurement;\n    parentMeasurement.childToolsCount =\n      (parentMeasurement.childToolsCount || 0) + 1;\n    measurementApi.updateMeasurement(tool.parentTool, parentMeasurement);\n\n    // Update the measurementData ID and lesionNamingNumber\n    measurementData._id = parentMeasurement._id;\n    measurementData.lesionNamingNumber = parentMeasurement.lesionNamingNumber;\n  } else {\n    const measurement = {\n      toolType: tool.parentTool,\n      lesionNamingNumber: measurementData.lesionNamingNumber,\n      userId: user.getUserId(),\n      PatientID: imageAttributes.PatientID,\n      StudyInstanceUID: imageAttributes.StudyInstanceUID,\n    };\n\n    measurement[tool.attribute] = Object.assign(\n      {},\n      measurementData,\n      additionalProperties\n    );\n\n    const addedMeasurement = measurementApi.addMeasurement(\n      tool.parentTool,\n      measurement\n    );\n    Object.assign(measurementData, addedMeasurement);\n  }\n\n  const measurementLabel = getLabel(measurementData);\n  if (measurementLabel) {\n    measurementData.labels = [measurementLabel];\n  }\n\n  // TODO: This is very hacky, but will work for now\n  refreshCornerstoneViewports();\n\n  // TODO: Notify about the last activated measurement\n\n  if (MeasurementApi.isToolIncluded(tool)) {\n    // TODO: Notify that viewer suffered changes\n  }\n}\n","import cornerstone from 'cornerstone-core';\nimport { MeasurementApi } from '../classes';\nimport log from '../../log';\n\nexport default function({ eventData, tool, toolGroupId, toolGroup }) {\n  const measurementApi = MeasurementApi.Instance;\n  if (!measurementApi) {\n    log.warn('Measurement API is not initialized');\n  }\n\n  const { measurementData, toolType } = eventData;\n\n  const collection = measurementApi.tools[toolType];\n\n  // Stop here if the tool data shall not be persisted (e.g. temp tools)\n  if (!collection) return;\n\n  log.info('CornerstoneToolsMeasurementModified');\n  let measurement = collection.find(t => t._id === measurementData._id);\n\n  // Stop here if the measurement is already deleted\n  if (!measurement) return;\n\n  measurement = Object.assign(measurement, measurementData);\n  measurement.viewport = cornerstone.getViewport(eventData.element);\n\n  measurementApi.updateMeasurement(toolType, measurement);\n\n  // TODO: Notify about the last activated measurement\n\n  if (MeasurementApi.isToolIncluded(tool)) {\n    // TODO: Notify that viewer suffered changes\n  }\n}\n","import cornerstone from 'cornerstone-core';\nimport { MeasurementApi } from '../classes';\nimport log from '../../log';\n\nexport default function({ eventData, tool, toolGroupId, toolGroup }) {\n  const measurementApi = MeasurementApi.Instance;\n  if (!measurementApi) {\n    log.warn('Measurement API is not initialized');\n  }\n\n  const { measurementData } = eventData;\n\n  const collection = measurementApi.tools[tool.parentTool];\n\n  // Stop here if the tool data shall not be persisted (e.g. temp tools)\n  if (!collection) return;\n\n  log.info('CornerstoneToolsMeasurementModified');\n\n  const measurement = collection.find(t => t._id === measurementData._id);\n  let childMeasurement = measurement && measurement[tool.attribute];\n\n  // Stop here if the measurement is already deleted\n  if (!childMeasurement) return;\n\n  childMeasurement = Object.assign(childMeasurement, measurementData);\n  childMeasurement.viewport = cornerstone.getViewport(eventData.element);\n\n  // Update the parent measurement\n  measurement[tool.attribute] = childMeasurement;\n  measurementApi.updateMeasurement(tool.parentTool, measurement);\n\n  // TODO: Notify about the last activated measurement\n\n  if (MeasurementApi.isToolIncluded(tool)) {\n    // TODO: Notify that viewer suffered changes\n  }\n}\n","import cornerstone from 'cornerstone-core';\nimport { MeasurementApi } from '../classes';\nimport log from '../../log';\nimport refreshCornerstoneViewports from '../lib/refreshCornerstoneViewports';\n\nexport default function handleSingleMeasurementRemoved({\n  eventData,\n  tool,\n  toolGroupId,\n  toolGroup,\n}) {\n  log.info('CornerstoneToolsMeasurementRemoved');\n  const { measurementData, toolType } = eventData;\n\n  const measurementApi = MeasurementApi.Instance;\n  if (!measurementApi) {\n    log.warn('Measurement API is not initialized');\n  }\n\n  const collection = measurementApi.tools[toolType];\n\n  // Stop here if the tool data shall not be persisted (e.g. temp tools)\n  if (!collection) return;\n\n  const measurementTypeId = measurementApi.toolsGroupsMap[toolType];\n  const measurement = collection.find(t => t._id === measurementData._id);\n\n  // Stop here if the measurement is already gone or never existed\n  if (!measurement) return;\n\n  // Remove all the measurements with the given type and number\n  const { lesionNamingNumber, timepointId } = measurement;\n  measurementApi.deleteMeasurements(toolType, measurementTypeId, {\n    lesionNamingNumber,\n    timepointId,\n  });\n\n  // TODO: This is very hacky, but will work for now\n  refreshCornerstoneViewports();\n\n  if (MeasurementApi.isToolIncluded(tool)) {\n    // TODO: Notify that viewer suffered changes\n  }\n}\n","import cornerstone from 'cornerstone-core';\nimport { MeasurementApi } from '../classes';\nimport log from '../../log';\nimport refreshCornerstoneViewports from '../lib/refreshCornerstoneViewports';\n\nexport default function({ eventData, tool, toolGroupId, toolGroup }) {\n  log.info('CornerstoneToolsMeasurementRemoved');\n  const { measurementData } = eventData;\n\n  const measurementApi = MeasurementApi.Instance;\n  if (!measurementApi) {\n    log.warn('Measurement API is not initialized');\n  }\n\n  const collection = measurementApi.tools[tool.parentTool];\n\n  // Stop here if the tool data shall not be persisted (e.g. temp tools)\n  if (!collection) return;\n\n  const measurementIndex = collection.findIndex(\n    t => t._id === measurementData._id\n  );\n  const measurement =\n    measurementIndex > -1 ? collection[measurementIndex] : null;\n\n  // Stop here if the measurement is already gone or never existed\n  if (!measurement) return;\n\n  if (measurement.childToolsCount === 1) {\n    // Remove the measurement\n    collection.splice(measurementIndex, 1);\n    measurementApi.onMeasurementRemoved(tool.parentTool, measurement);\n  } else {\n    // Update the measurement\n    measurement[tool.attribute] = null;\n    measurement.childToolsCount = (measurement.childToolsCount || 0) - 1;\n    measurementApi.updateMeasurement(tool.parentTool, measurement);\n  }\n\n  // TODO: This is very hacky, but will work for now\n  refreshCornerstoneViewports();\n\n  if (MeasurementApi.isToolIncluded(tool)) {\n    // TODO: Notify that viewer suffered changes\n  }\n}\n","import { MeasurementApi } from '../classes';\nimport handleSingleMeasurementAdded from './handleSingleMeasurementAdded';\nimport handleChildMeasurementAdded from './handleChildMeasurementAdded';\nimport handleSingleMeasurementModified from './handleSingleMeasurementModified';\nimport handleChildMeasurementModified from './handleChildMeasurementModified';\nimport handleSingleMeasurementRemoved from './handleSingleMeasurementRemoved';\nimport handleChildMeasurementRemoved from './handleChildMeasurementRemoved';\n\nconst getEventData = event => {\n  const eventData = event.detail;\n  if (eventData.toolName) {\n    eventData.toolType = eventData.toolName;\n  }\n\n  return eventData;\n};\n\nconst MeasurementHandlers = {\n  handleSingleMeasurementAdded,\n  handleChildMeasurementAdded,\n  handleSingleMeasurementModified,\n  handleChildMeasurementModified,\n  handleSingleMeasurementRemoved,\n  handleChildMeasurementRemoved,\n\n  onAdded(event) {\n    const eventData = getEventData(event);\n    const { toolType } = eventData;\n    const {\n      toolGroupId,\n      toolGroup,\n      tool,\n    } = MeasurementApi.getToolConfiguration(toolType);\n    const params = {\n      eventData,\n      tool,\n      toolGroupId,\n      toolGroup,\n    };\n\n    if (!tool) return;\n\n    if (tool.parentTool) {\n      handleChildMeasurementAdded(params);\n    } else {\n      handleSingleMeasurementAdded(params);\n    }\n  },\n\n  onModified(event) {\n    const eventData = getEventData(event);\n    const { toolType } = eventData;\n    const {\n      toolGroupId,\n      toolGroup,\n      tool,\n    } = MeasurementApi.getToolConfiguration(toolType);\n    const params = {\n      eventData,\n      tool,\n      toolGroupId,\n      toolGroup,\n    };\n\n    if (!tool) return;\n\n    if (tool.parentTool) {\n      handleChildMeasurementModified(params);\n    } else {\n      handleSingleMeasurementModified(params);\n    }\n  },\n\n  onRemoved(event) {\n    const eventData = getEventData(event);\n    const { toolType } = eventData;\n    const {\n      toolGroupId,\n      toolGroup,\n      tool,\n    } = MeasurementApi.getToolConfiguration(toolType);\n    const params = {\n      eventData,\n      tool,\n      toolGroupId,\n      toolGroup,\n    };\n\n    if (!tool) return;\n\n    if (tool.parentTool) {\n      handleChildMeasurementRemoved(params);\n    } else {\n      handleSingleMeasurementRemoved(params);\n    }\n  },\n};\n\nexport default MeasurementHandlers;\n","import { bidirectional, targetCR, targetUN, targetNE } from '../tools';\n\nexport const targets = {\n  id: 'targets',\n  name: 'Targets',\n  childTools: [bidirectional, targetCR, targetUN, targetNE],\n  options: {\n    caseProgress: {\n      include: true,\n      evaluate: true,\n    },\n  },\n};\n","import { nonTarget } from '../tools';\n\nexport const nonTargets = {\n  id: 'nonTargets',\n  name: 'Non-Targets',\n  childTools: [nonTarget],\n  options: {\n    caseProgress: {\n      include: true,\n      evaluate: true,\n    },\n  },\n};\n","import { length, ellipticalRoi } from '../tools';\nimport cloneDeep from 'lodash.clonedeep';\n\nconst childTools = cloneDeep([length, ellipticalRoi]);\n\n// Exclude temp tools from case progress\nchildTools.forEach(childTool => {\n  childTool.options = Object.assign({}, childTool.options, {\n    caseProgress: {\n      include: false,\n      evaluate: false,\n    },\n  });\n});\n\nexport const temp = {\n  id: 'temp',\n  name: 'Temporary',\n  childTools,\n  options: {\n    caseProgress: {\n      include: false,\n      evaluate: false,\n    },\n  },\n};\n","import { targets } from './toolGroups/targets';\nimport { nonTargets } from './toolGroups/nonTargets';\nimport { temp } from './toolGroups/temp';\nimport cloneDeep from 'lodash.clonedeep';\n\nconst ltTools = cloneDeep([targets, nonTargets, temp]);\n\nltTools.forEach(toolGroup => {\n  toolGroup.childTools.forEach(tool => {\n    tool.toolGroup = toolGroup.id;\n  });\n});\n\nexport default ltTools;\n","import * as tools from './tools';\n\nimport { MeasurementApi, TimepointApi } from './classes';\nimport { ConformanceCriteria } from './conformance';\nimport MeasurementHandlers from './measurementHandlers';\nimport getDescription from './lib/getDescription';\nimport getImageAttributes from './lib/getImageAttributes';\nimport getImageIdForImagePath from './lib/getImageIdForImagePath';\nimport getLabel from './lib/getLabel';\nimport ltTools from './ltTools';\n\nconst measurements = {\n  TimepointApi,\n  MeasurementApi,\n  ConformanceCriteria,\n  MeasurementHandlers,\n  ltTools,\n  tools,\n  getLabel,\n  getDescription,\n  getImageAttributes,\n  getImageIdForImagePath,\n};\n\nexport default measurements;\n","import dcmjs from 'dcmjs';\n\n/**\n *  Checks if dcmjs has support to determined tool\n *\n * @param {string} toolName\n * @returns {boolean}\n */\nconst isToolSupported = toolName => {\n  const adapter = dcmjs.adapters.Cornerstone;\n  return !!adapter[toolName];\n};\n\nexport default isToolSupported;\n","import dcmjs from 'dcmjs';\nimport cornerstone from 'cornerstone-core';\n\nimport log from '../log';\nimport measurements from '../measurements';\nimport isToolSupported from './utils/isToolSupported';\n\n/**\n * Function to parse OHIF viewer measurementData into a dcmjs MeasurementReport\n *\n * @param {Object} measurementsData - OHIF measurementData object\n * @returns {Object} Dataset: measurement report from dcmjs\n */\nconst parseMeasurementsData = measurementsData => {\n  const { MeasurementReport } = dcmjs.adapters.Cornerstone;\n  const { getImageIdForImagePath } = measurements;\n\n  const toolState = {};\n  const unsupportedTools = [];\n\n  Object.keys(measurementsData).forEach(measurementType => {\n    const annotations = measurementsData[measurementType];\n\n    annotations.forEach(annotation => {\n      const { toolType, imagePath } = annotation;\n\n      if (isToolSupported(toolType)) {\n        const imageId = getImageIdForImagePath(imagePath);\n        toolState[imageId] = toolState[imageId] || {};\n        toolState[imageId][toolType] = toolState[imageId][toolType] || {\n          data: [],\n        };\n\n        toolState[imageId][toolType].data.push(annotation);\n      } else {\n        unsupportedTools.push(toolType);\n      }\n    });\n  });\n\n  if (unsupportedTools.length > 0) {\n    log.warn(\n      `[DICOMSR] Tooltypes not supported: ${unsupportedTools.join(', ')}`\n    );\n  }\n\n  const report = MeasurementReport.generateReport(\n    toolState,\n    cornerstone.metaData\n  );\n\n  return {\n    dataset: report.dataset,\n  };\n};\n\nexport default parseMeasurementsData;\n","/**\n * Retrieve a list of all displaySets of all studies\n *\n * @param {Object} studies - List of studies loaded into the viewer\n * @returns {Object} List of DisplaySets\n */\nconst getAllDisplaySets = studies => {\n  let allDisplaySets = [];\n\n  studies.forEach(study => {\n    if (study.getDisplaySets) {\n      allDisplaySets = allDisplaySets.concat(study.getDisplaySets());\n    }\n  });\n\n  return allDisplaySets;\n};\n\nexport default getAllDisplaySets;\n","import dcmjs from 'dcmjs';\nimport { api } from 'dicomweb-client';\n\nimport DICOMWeb from '../DICOMWeb';\nimport parseDicomStructuredReport from './parseDicomStructuredReport';\nimport parseMeasurementsData from './parseMeasurementsData';\nimport getAllDisplaySets from './utils/getAllDisplaySets';\nimport errorHandler from '../errorHandler';\n\nconst VERSION_NAME = 'dcmjs-0.0';\nconst TRANSFER_SYNTAX_UID = '1.2.840.10008.1.2.1';\n\n/**\n * Function to retrieve measurements from DICOM Structured Reports coming from determined server\n *\n * @param {Array} series - List of all series metaData loaded\n * @param {Array} studies - List of all studies metaData loaded\n * @param {string} serverUrl - Server URL to be used on request\n * @returns {Object} MeasurementData\n */\nconst retrieveMeasurementFromSR = async (series, studies, serverUrl) => {\n  const config = {\n    url: serverUrl,\n    headers: DICOMWeb.getAuthorizationHeader(),\n    errorInterceptor: errorHandler.getHTTPErrorHandler(),\n  };\n\n  const dicomWeb = new api.DICOMwebClient(config);\n\n  const instance = series.getFirstInstance();\n  const options = {\n    studyInstanceUID: instance.getStudyInstanceUID(),\n    seriesInstanceUID: instance.getSeriesInstanceUID(),\n    sopInstanceUID: instance.getSOPInstanceUID(),\n  };\n\n  const part10SRArrayBuffer = await dicomWeb.retrieveInstance(options);\n  const displaySets = getAllDisplaySets(studies);\n  const measurementsData = parseDicomStructuredReport(\n    part10SRArrayBuffer,\n    displaySets\n  );\n\n  return measurementsData;\n};\n\n/**\n * Function to store measurements to DICOM Structured Reports in determined server\n *\n * @param {Object} measurements - OHIF measurementData object\n * @param {string} serverUrl - Server URL to be used on request\n * @returns {Promise}\n */\nconst stowSRFromMeasurements = async (measurements, serverUrl) => {\n  const { dataset } = parseMeasurementsData(measurements);\n  const { DicomMetaDictionary, DicomDict } = dcmjs.data;\n  const meta = {\n    FileMetaInformationVersion: dataset._meta.FileMetaInformationVersion.Value,\n    MediaStorageSOPClassUID: dataset.SOPClassUID,\n    MediaStorageSOPInstanceUID: dataset.SOPInstanceUID,\n    TransferSyntaxUID: TRANSFER_SYNTAX_UID,\n    ImplementationClassUID: DicomMetaDictionary.uid(),\n    ImplementationVersionName: VERSION_NAME,\n  };\n\n  const denaturalized = DicomMetaDictionary.denaturalizeDataset(meta);\n  const dicomDict = new DicomDict(denaturalized);\n\n  dicomDict.dict = DicomMetaDictionary.denaturalizeDataset(dataset);\n\n  const part10Buffer = dicomDict.write();\n\n  const config = {\n    url: serverUrl,\n    headers: DICOMWeb.getAuthorizationHeader(),\n    errorInterceptor: errorHandler.getHTTPErrorHandler(),\n  };\n\n  const dicomWeb = new api.DICOMwebClient(config);\n  const options = {\n    datasets: [part10Buffer],\n  };\n\n  await dicomWeb.storeInstances(options);\n};\n\nexport { retrieveMeasurementFromSR, stowSRFromMeasurements };\n","/**\n * Should find the most recent Structured Report metadata\n *\n * @param {Array} studies\n * @returns {Object} Series\n */\nconst findMostRecentStructuredReport = studies => {\n  let mostRecentStructuredReport;\n\n  studies.forEach(study => {\n    const allSeries = study.getSeries ? study.getSeries() : [];\n    allSeries.forEach(series => {\n      // Skip series that may not have instances yet\n      // This can happen if we have retrieved just the initial\n      // details about the series via QIDO-RS, but not the full metadata\n      if (!series.instances || !series.instances.length) {\n        return;\n      }\n\n      if (isStructuredReportSeries(series)) {\n        if (\n          !mostRecentStructuredReport ||\n          compareSeriesDate(series, mostRecentStructuredReport)\n        ) {\n          mostRecentStructuredReport = series;\n        }\n      }\n    });\n  });\n\n  return mostRecentStructuredReport;\n};\n\n/**\n *  Checks if series sopClassUID matches with the supported Structured Reports sopClassUID\n *\n * @param {Object} series - Series metadata\n * @returns {boolean}\n */\nconst isStructuredReportSeries = series => {\n  const supportedSopClassUIDs = [\n    '1.2.840.10008.5.1.4.1.1.88.22',\n    '1.2.840.10008.5.1.4.1.1.11.1',\n  ];\n\n  const firstInstance = series.getFirstInstance();\n  const SOPClassUID = firstInstance.getData().metadata.SOPClassUID;\n\n  return supportedSopClassUIDs.includes(SOPClassUID);\n};\n\n/**\n *  Checkes if series1 is newer than series2\n *\n * @param {Object} series1 - Series Metadata 1\n * @param {Object} series2 - Series Metadata 2\n * @returns {boolean} true/false if series1 is newer than series2\n */\nconst compareSeriesDate = (series1, series2) => {\n  return (\n    series1._data.SeriesDate > series2._data.SeriesDate ||\n    (series1._data.SeriesDate === series2._data.SeriesDate &&\n      series1._data.SeriesTime > series2._data.SeriesTime)\n  );\n};\n\nexport default findMostRecentStructuredReport;\n","import { retrieveMeasurements, storeMeasurements } from './dataExchange';\nimport isToolSupported from './utils/isToolSupported';\n\nconst DICOMSR = {\n  retrieveMeasurements,\n  storeMeasurements,\n  isToolSupported,\n};\n\nexport default DICOMSR;\n","import log from '../log';\nimport studies from '../studies';\nimport utils from '../utils';\nimport {\n  retrieveMeasurementFromSR,\n  stowSRFromMeasurements,\n} from './handleStructuredReport';\nimport findMostRecentStructuredReport from './utils/findMostRecentStructuredReport';\n\n/**\n *\n * @typedef serverType\n * @property {string} type - type of the server\n * @property {string} wadoRoot - server wado root url\n *\n */\n\n/**\n * Function to be registered into MeasurementAPI to retrieve measurements from DICOM Structured Reports\n *\n * @param {serverType} server\n * @returns {Promise} Should resolve with OHIF measurementData object\n */\nconst retrieveMeasurements = server => {\n  log.info('[DICOMSR] retrieveMeasurements');\n\n  if (!server || server.type !== 'dicomWeb') {\n    log.error('[DICOMSR] DicomWeb server is required!');\n    return Promise.reject({});\n  }\n\n  const serverUrl = server.wadoRoot;\n  const studies = utils.studyMetadataManager.all();\n\n  const latestSeries = findMostRecentStructuredReport(studies);\n\n  if (!latestSeries) return Promise.resolve({});\n\n  return retrieveMeasurementFromSR(latestSeries, studies, serverUrl);\n};\n\n/**\n *  Function to be registered into MeasurementAPI to store measurements into DICOM Structured Reports\n *\n * @param {Object} measurementData - OHIF measurementData object\n * @param {Object} filter\n * @param {serverType} server\n * @returns {Object} With message to be displayed on success\n */\nconst storeMeasurements = async (measurementData, filter, server) => {\n  log.info('[DICOMSR] storeMeasurements');\n\n  if (!server || server.type !== 'dicomWeb') {\n    log.error('[DICOMSR] DicomWeb server is required!');\n    return Promise.reject({});\n  }\n\n  const serverUrl = server.wadoRoot;\n  const firstMeasurementKey = Object.keys(measurementData)[0];\n  const firstMeasurement = measurementData[firstMeasurementKey][0];\n  const StudyInstanceUID =\n    firstMeasurement && firstMeasurement.StudyInstanceUID;\n\n  try {\n    await stowSRFromMeasurements(measurementData, serverUrl);\n    if (StudyInstanceUID) {\n      studies.deleteStudyMetadataPromise(StudyInstanceUID);\n    }\n\n    return {\n      message: 'Measurements saved successfully',\n    };\n  } catch (error) {\n    log.error(\n      `[DICOMSR] Error while saving the measurements: ${error.message}`\n    );\n    throw new Error('Error while saving the measurements.');\n  }\n};\n\nexport { retrieveMeasurements, storeMeasurements };\n","import metadataProvider from './classes/MetadataProvider';\nimport {\n  getBoundingBox,\n  pixelToPage,\n  repositionTextBox,\n} from './lib/cornerstone.js';\n\nconst cornerstone = {\n  metadataProvider,\n  getBoundingBox,\n  pixelToPage,\n  repositionTextBox,\n};\n\nexport default cornerstone;\n","import cornerstone from 'cornerstone-core';\nimport cornerstoneTools from 'cornerstone-tools';\n\nfunction getBoundingBox(context, textLines, x, y, options) {\n  if (Object.prototype.toString.call(textLines) !== '[object Array]') {\n    textLines = [textLines];\n  }\n\n  const padding = 5;\n  const font = cornerstoneTools.textStyle.getFont();\n  const fontSize = cornerstoneTools.textStyle.getFontSize();\n\n  context.save();\n  context.font = font;\n  context.textBaseline = 'top';\n\n  // Find the longest text width in the array of text data\n  let maxWidth = 0;\n\n  textLines.forEach(text => {\n    // Get the text width in the current font\n    const width = context.measureText(text).width;\n\n    // Find the maximum with for all the text Rows;\n    maxWidth = Math.max(maxWidth, width);\n  });\n\n  // Calculate the bounding box for this text box\n  const boundingBox = {\n    width: maxWidth + padding * 2,\n    height: padding + textLines.length * (fontSize + padding),\n  };\n\n  if (options && options.centering && options.centering.x === true) {\n    x -= boundingBox.width / 2;\n  }\n\n  if (options && options.centering && options.centering.y === true) {\n    y -= boundingBox.height / 2;\n  }\n\n  boundingBox.left = x;\n  boundingBox.top = y;\n\n  context.restore();\n\n  // Return the bounding box so it can be used for pointNearHandle\n  return boundingBox;\n}\n\nfunction pixelToPage(element, position) {\n  const enabledElement = cornerstone.getEnabledElement(element);\n  const result = {\n    x: 0,\n    y: 0,\n  };\n\n  // Stop here if the cornerstone element is not enabled or position is not an object\n  if (!enabledElement || typeof position !== 'object') {\n    return result;\n  }\n\n  const canvas = enabledElement.canvas;\n\n  const canvasOffset = $(canvas).offset();\n  result.x += canvasOffset.left;\n  result.y += canvasOffset.top;\n\n  const canvasPosition = cornerstone.pixelToCanvas(element, position);\n  result.x += canvasPosition.x;\n  result.y += canvasPosition.y;\n\n  return result;\n}\n\nfunction repositionTextBox(eventData, measurementData, config) {\n  // Stop here if it's not a measurement creating\n  if (!measurementData.isCreating) {\n    return;\n  }\n\n  const element = eventData.element;\n  const enabledElement = cornerstone.getEnabledElement(element);\n  const image = enabledElement.image;\n\n  const allowedBorders = OHIF.uiSettings.autoPositionMeasurementsTextCallOuts;\n  const allow = {\n    T: !allowedBorders || allowedBorders.includes('T'),\n    R: !allowedBorders || allowedBorders.includes('R'),\n    B: !allowedBorders || allowedBorders.includes('B'),\n    L: !allowedBorders || allowedBorders.includes('L'),\n  };\n\n  const getAvailableBlankAreas = (enabledElement, labelWidth, labelHeight) => {\n    const { element, canvas, image } = enabledElement;\n\n    const topLeft = cornerstone.pixelToCanvas(element, {\n      x: 0,\n      y: 0,\n    });\n\n    const bottomRight = cornerstone.pixelToCanvas(element, {\n      x: image.width,\n      y: image.height,\n    });\n\n    const $canvas = $(canvas);\n    const canvasWidth = $canvas.outerWidth();\n    const canvasHeight = $canvas.outerHeight();\n\n    const result = {};\n    result['x-1'] = allow.L && topLeft.x > labelWidth;\n    result['y-1'] = allow.T && topLeft.y > labelHeight;\n    result.x1 = allow.R && canvasWidth - bottomRight.x > labelWidth;\n    result.y1 = allow.B && canvasHeight - bottomRight.y > labelHeight;\n\n    return result;\n  };\n\n  const getRenderingInformation = (limits, tool) => {\n    const mid = {};\n    mid.x = limits.x / 2;\n    mid.y = limits.y / 2;\n\n    const directions = {};\n    directions.x = tool.x < mid.x ? -1 : 1;\n    directions.y = tool.y < mid.y ? -1 : 1;\n\n    const diffX = directions.x < 0 ? tool.x : limits.x - tool.x;\n    const diffY = directions.y < 0 ? tool.y : limits.y - tool.y;\n    let cornerAxis = diffY < diffX ? 'y' : 'x';\n\n    const map = {\n      'x-1': 'L',\n      'y-1': 'T',\n      x1: 'R',\n      y1: 'B',\n    };\n\n    let current = 0;\n    while (current < 4 && !allow[map[cornerAxis + directions[cornerAxis]]]) {\n      // Invert the direction for the next iteration\n      directions[cornerAxis] *= -1;\n\n      // Invert the tempCornerAxis\n      cornerAxis = cornerAxis === 'x' ? 'y' : 'x';\n\n      current++;\n    }\n\n    return {\n      directions,\n      cornerAxis,\n    };\n  };\n\n  const calculateAxisCenter = (axis, start, end) => {\n    const a = start[axis];\n    const b = end[axis];\n    const lowest = Math.min(a, b);\n    const highest = Math.max(a, b);\n    return lowest + (highest - lowest) / 2;\n  };\n\n  const getTextBoxSizeInPixels = (element, bounds) => {\n    const topLeft = cornerstone.pageToPixel(element, 0, 0);\n    const bottomRight = cornerstone.pageToPixel(element, bounds.x, bounds.y);\n    return {\n      x: bottomRight.x - topLeft.x,\n      y: bottomRight.y - topLeft.y,\n    };\n  };\n\n  function getTextBoxOffset(config, cornerAxis, toolAxis, boxSize) {\n    config = config || {};\n    const centering = config.centering || {};\n    const centerX = !!centering.x;\n    const centerY = !!centering.y;\n    const halfBoxSizeX = boxSize.x / 2;\n    const halfBoxSizeY = boxSize.y / 2;\n    const offset = {\n      x: [],\n      y: [],\n    };\n\n    if (cornerAxis === 'x') {\n      const offsetY = centerY ? 0 : halfBoxSizeY;\n\n      offset.x[-1] = centerX ? halfBoxSizeX : 0;\n      offset.x[1] = centerX ? -halfBoxSizeX : -boxSize.x;\n      offset.y[-1] = offsetY;\n      offset.y[1] = offsetY;\n    } else {\n      const offsetX = centerX ? 0 : halfBoxSizeX;\n\n      offset.x[-1] = offsetX;\n      offset.x[1] = offsetX;\n      offset.y[-1] = centerY ? halfBoxSizeY : 0;\n      offset.y[1] = centerY ? -halfBoxSizeY : -boxSize.y;\n    }\n\n    return offset;\n  }\n\n  const handles = measurementData.handles;\n  const textBox = handles.textBox;\n\n  const $canvas = $(enabledElement.canvas);\n  const canvasWidth = $canvas.outerWidth();\n  const canvasHeight = $canvas.outerHeight();\n  const offset = $canvas.offset();\n  const canvasDimensions = {\n    x: canvasWidth,\n    y: canvasHeight,\n  };\n\n  const bounds = {};\n  bounds.x = textBox.boundingBox.width;\n  bounds.y = textBox.boundingBox.height;\n\n  const getHandlePosition = key => {\n    const { x, y } = handles[key];\n\n    return { x, y };\n  };\n  const start = getHandlePosition('start');\n  const end = getHandlePosition('end');\n\n  const tool = {};\n  tool.x = calculateAxisCenter('x', start, end);\n  tool.y = calculateAxisCenter('y', start, end);\n\n  let limits = {};\n  limits.x = image.width;\n  limits.y = image.height;\n\n  let { directions, cornerAxis } = getRenderingInformation(limits, tool);\n\n  const availableAreas = getAvailableBlankAreas(\n    enabledElement,\n    bounds.x,\n    bounds.y\n  );\n  const tempDirections = Object.assign({}, directions);\n  let tempCornerAxis = cornerAxis;\n  let foundPlace = false;\n  let current = 0;\n  while (current < 4) {\n    if (availableAreas[tempCornerAxis + tempDirections[tempCornerAxis]]) {\n      foundPlace = true;\n      break;\n    }\n\n    // Invert the direction for the next iteration\n    tempDirections[tempCornerAxis] *= -1;\n\n    // Invert the tempCornerAxis\n    tempCornerAxis = tempCornerAxis === 'x' ? 'y' : 'x';\n\n    current++;\n  }\n\n  let cornerAxisPosition;\n  if (foundPlace) {\n    directions = Object.assign({}, directions, tempDirections);\n    cornerAxis = tempCornerAxis;\n    cornerAxisPosition = directions[cornerAxis] < 0 ? 0 : limits[cornerAxis];\n  } else {\n    limits = Object.assign({}, limits, canvasDimensions);\n\n    const toolPositionOnCanvas = cornerstone.pixelToCanvas(element, tool);\n    const renderingInformation = getRenderingInformation(\n      limits,\n      toolPositionOnCanvas\n    );\n    directions = renderingInformation.directions;\n    cornerAxis = renderingInformation.cornerAxis;\n\n    const position = {\n      x: directions.x < 0 ? offset.left : offset.left + canvasWidth,\n      y: directions.y < 0 ? offset.top : offset.top + canvasHeight,\n    };\n\n    const pixelPosition = cornerstone.pageToPixel(\n      element,\n      position.x,\n      position.y\n    );\n    cornerAxisPosition = pixelPosition[cornerAxis];\n  }\n\n  const toolAxis = cornerAxis === 'x' ? 'y' : 'x';\n  const boxSize = getTextBoxSizeInPixels(element, bounds);\n\n  textBox[cornerAxis] = cornerAxisPosition;\n  textBox[toolAxis] = tool[toolAxis];\n\n  // Adjust the text box position reducing its size from the corner axis\n  const textBoxOffset = getTextBoxOffset(config, cornerAxis, toolAxis, boxSize);\n  textBox[cornerAxis] += textBoxOffset[cornerAxis][directions[cornerAxis]];\n\n  // Preventing the text box from partially going outside the canvas area\n  const topLeft = cornerstone.pixelToCanvas(element, textBox);\n  const bottomRight = {\n    x: topLeft.x + bounds.x,\n    y: topLeft.y + bounds.y,\n  };\n  const canvasBorders = {\n    x0: offset.left,\n    y0: offset.top,\n    x1: offset.left + canvasWidth,\n    y1: offset.top + canvasHeight,\n  };\n  if (topLeft[toolAxis] < 0) {\n    const x = canvasBorders.x0;\n    const y = canvasBorders.y0;\n    const pixelPosition = cornerstone.pageToPixel(element, x, y);\n    textBox[toolAxis] = pixelPosition[toolAxis];\n  } else if (bottomRight[toolAxis] > canvasDimensions[toolAxis]) {\n    const x = canvasBorders.x1 - bounds.x;\n    const y = canvasBorders.y1 - bounds.y;\n    const pixelPosition = cornerstone.pageToPixel(element, x, y);\n    textBox[toolAxis] = pixelPosition[toolAxis];\n  }\n}\n\nexport { getBoundingBox, pixelToPage, repositionTextBox };\n","import validate from 'validate.js';\n\nvalidate.validators.equals = function(value, options, key, attributes) {\n  if (options && value !== options.value) {\n    return key + 'must equal ' + options.value;\n  }\n};\n\nvalidate.validators.doesNotEqual = function(value, options, key) {\n  if (options && value === options.value) {\n    return key + 'cannot equal ' + options.value;\n  }\n};\n\nvalidate.validators.contains = function(value, options, key) {\n  if (options && value.indexOf && value.indexOf(options.value) === -1) {\n    return key + 'must contain ' + options.value;\n  }\n};\n\nvalidate.validators.doesNotContain = function(value, options, key) {\n  if (options && value.indexOf && value.indexOf(options.value) !== -1) {\n    return key + 'cannot contain ' + options.value;\n  }\n};\n\nvalidate.validators.startsWith = function(value, options, key) {\n  if (options && value.startsWith && !value.startsWith(options.value)) {\n    return key + 'must start with ' + options.value;\n  }\n};\n\nvalidate.validators.endsWith = function(value, options, key) {\n  if (options && value.endsWith && !value.endsWith(options.value)) {\n    return key + 'must end with ' + options.value;\n  }\n};\n\nexport { validate };\n","// Define an empty object to store callbacks that are used to retrieve custom attributes\n// The simplest example for a custom attribute is the Timepoint type (i.e. baseline or follow-up)\n// used in the LesionTracker application.\n//\n// Timepoint type can be obtained given a studyId, and this is done through a custom callback.\n// Developers can define attributes (i.e. attributeId = timepointType) with a name ('Timepoint Type')\n// and a callback function that is used to calculate them.\n//\n// The input to the callback, which is called during viewport-image matching rule evaluation\n// is the set of attributes that contains the specified attribute. In our example, timepointType is\n// linked to the study attributes, and so the inputs to the callback is an object containing\n// the study attributes.\nconst CustomAttributeRetrievalCallbacks = {};\n\n/**\n * Adds a custom attribute to be used in the HangingProtocol UI and matching rules, including a\n * callback that will be used to calculate the attribute value.\n *\n * @param attributeId The ID used to refer to the attribute (e.g. 'timepointType')\n * @param attributeName The name of the attribute to be displayed (e.g. 'Timepoint Type')\n * @param callback The function used to calculate the attribute value from the other attributes at its level (e.g. study/series/image)\n */\nfunction addCustomAttribute(attributeId, attributeName, callback) {\n  CustomAttributeRetrievalCallbacks[attributeId] = {\n    name: attributeName,\n    callback: callback,\n  };\n}\n\nexport { CustomAttributeRetrievalCallbacks, addCustomAttribute };\n","import OHIFError from '../classes/OHIFError.js';\nimport metadata from '../classes/metadata/';\nimport { validate } from './lib/validate.js';\nimport { CustomAttributeRetrievalCallbacks } from './customAttributes';\n\n/**\n * Import Constants\n */\nconst { InstanceMetadata } = metadata;\n\n/**\n * Match a Metadata instance against rules using Validate.js for validation.\n * @param  {InstanceMetadata} metadataInstance Metadata instance object\n * @param  {Array} rules Array of MatchingRules instances (StudyMatchingRule|SeriesMatchingRule|ImageMatchingRule) for the match\n * @return {Object}      Matching Object with score and details (which rule passed or failed)\n */\nconst match = (metadataInstance, rules) => {\n  // Make sure the supplied data is valid.\n  if (!(metadataInstance instanceof InstanceMetadata)) {\n    throw new OHIFError(\n      'HPMatcher::match metadataInstance must be an instance of InstanceMetadata'\n    );\n  }\n\n  const options = {\n    format: 'grouped',\n  };\n\n  const details = {\n    passed: [],\n    failed: [],\n  };\n\n  let requiredFailed = false;\n  let score = 0;\n\n  rules.forEach(rule => {\n    const attribute = rule.attribute;\n\n    // Do not use the custom attribute from the metadataInstance since it is subject to change\n    if (CustomAttributeRetrievalCallbacks.hasOwnProperty(attribute)) {\n      const customAttribute = CustomAttributeRetrievalCallbacks[attribute];\n      metadataInstance.setCustomAttribute(\n        attribute,\n        customAttribute.callback(metadataInstance)\n      );\n    }\n\n    // Format the constraint as required by Validate.js\n    const testConstraint = {\n      [attribute]: rule.constraint,\n    };\n\n    // Create a single attribute object to be validated, since metadataInstance is an\n    // instance of Metadata (StudyMetadata, SeriesMetadata or InstanceMetadata)\n    const attributeValue = metadataInstance.customAttributeExists(attribute)\n      ? metadataInstance.getCustomAttribute(attribute)\n      : metadataInstance.getTagValue(attribute);\n    const attributeMap = {\n      [attribute]: attributeValue,\n    };\n\n    // Use Validate.js to evaluate the constraints on the specified metadataInstance\n    let errorMessages;\n    try {\n      errorMessages = validate(attributeMap, testConstraint, [options]);\n    } catch (e) {\n      errorMessages = ['Something went wrong during validation.', e];\n    }\n\n    if (!errorMessages) {\n      // If no errorMessages were returned, then validation passed.\n\n      // Add the rule's weight to the total score\n      score += parseInt(rule.weight, 10);\n\n      // Log that this rule passed in the matching details object\n      details.passed.push({\n        rule,\n      });\n    } else {\n      // If errorMessages were present, then validation failed\n\n      // If the rule that failed validation was Required, then\n      // mark that a required Rule has failed\n      if (rule.required) {\n        requiredFailed = true;\n      }\n\n      // Log that this rule failed in the matching details object\n      // and include any error messages\n      details.failed.push({\n        rule,\n        errorMessages,\n      });\n    }\n  });\n\n  // If a required Rule has failed Validation, set the matching score to zero\n  if (requiredFailed) {\n    score = 0;\n  }\n\n  return {\n    score,\n    details,\n    requiredFailed,\n  };\n};\n\nconst HPMatcher = {\n  match,\n};\n\nexport { HPMatcher };\n","// Define an empty object to store callbacks that are used to apply custom viewport settings\n// after a viewport is rendered.\nconst CustomViewportSettings = {};\n\n/**\n * Adds a custom setting that can be chosen in the HangingProtocol UI and applied to a Viewport\n *\n * @param settingId The ID used to refer to the setting (e.g. 'displayCADMarkers')\n * @param settingName The name of the setting to be displayed (e.g. 'Display CAD Markers')\n * @param options\n * @param callback A function to be run after a viewport is rendered with a series\n */\nfunction addCustomViewportSetting(settingId, settingName, options, callback) {\n  CustomViewportSettings[settingId] = {\n    id: settingId,\n    text: settingName,\n    options: options,\n    callback: callback,\n  };\n}\n\nexport { CustomViewportSettings, addCustomViewportSetting };\n","const comparators = [\n  {\n    id: 'equals',\n    name: '= (Equals)',\n    validator: 'equals',\n    validatorOption: 'value',\n    description: 'The attribute must equal this value.',\n  },\n  {\n    id: 'doesNotEqual',\n    name: '!= (Does not equal)',\n    validator: 'doesNotEqual',\n    validatorOption: 'value',\n    description: 'The attribute must not equal this value.',\n  },\n  {\n    id: 'contains',\n    name: 'Contains',\n    validator: 'contains',\n    validatorOption: 'value',\n    description: 'The attribute must contain this value.',\n  },\n  {\n    id: 'doesNotContain',\n    name: 'Does not contain',\n    validator: 'doesNotContain',\n    validatorOption: 'value',\n    description: 'The attribute must not contain this value.',\n  },\n  {\n    id: 'startsWith',\n    name: 'Starts with',\n    validator: 'startsWith',\n    validatorOption: 'value',\n    description: 'The attribute must start with this value.',\n  },\n  {\n    id: 'endsWith',\n    name: 'Ends with',\n    validator: 'endsWith',\n    validatorOption: 'value',\n    description: 'The attribute must end with this value.',\n  },\n  {\n    id: 'onlyInteger',\n    name: 'Only Integers',\n    validator: 'numericality',\n    validatorOption: 'onlyInteger',\n    description: \"Real numbers won't be allowed.\",\n  },\n  {\n    id: 'greaterThan',\n    name: '> (Greater than)',\n    validator: 'numericality',\n    validatorOption: 'greaterThan',\n    description: 'The attribute has to be greater than this value.',\n  },\n  {\n    id: 'greaterThanOrEqualTo',\n    name: '>= (Greater than or equal to)',\n    validator: 'numericality',\n    validatorOption: 'greaterThanOrEqualTo',\n    description: 'The attribute has to be at least this value.',\n  },\n  {\n    id: 'lessThanOrEqualTo',\n    name: '<= (Less than or equal to)',\n    validator: 'numericality',\n    validatorOption: 'lessThanOrEqualTo',\n    description: 'The attribute can be this value at the most.',\n  },\n  {\n    id: 'lessThan',\n    name: '< (Less than)',\n    validator: 'numericality',\n    validatorOption: 'lessThan',\n    description: 'The attribute has to be less than this value.',\n  },\n  {\n    id: 'odd',\n    name: 'Odd',\n    validator: 'numericality',\n    validatorOption: 'odd',\n    description: 'The attribute has to be odd.',\n  },\n  {\n    id: 'even',\n    name: 'Even',\n    validator: 'numericality',\n    validatorOption: 'even',\n    description: 'The attribute has to be even.',\n  },\n];\n\n// Immutable object\nObject.freeze(comparators);\n\nexport { comparators };\n","import { comparators } from '../lib/comparators';\nimport guid from '../../utils/guid';\n\nconst EQUALS_REGEXP = /^equals$/;\n\n/**\n * This Class represents a Rule to be evaluated given a set of attributes\n * Rules have:\n * - An attribute (e.g. 'SeriesDescription')\n * - A constraint Object, in the form required by Validate.js:\n *\n * rule.constraint = {\n *   contains: {\n *      value: 'T-1'\n *      }\n *   };\n *\n *  Note: In this example we use the 'contains' Validator, which is a custom Validator defined in Viewerbase\n *\n * - A value for whether or not they are Required to be matched (default: False)\n * - A value for their relative weighting during Protocol or Image matching (default: 1)\n */\nexport default class Rule {\n  /**\n   * The Constructor for the Class to create a Rule with the bare\n   * minimum information\n   *\n   * @param name The desired name for the Rule\n   */\n  constructor(attribute, constraint, required, weight) {\n    // Create a new UUID for this Rule\n    this.id = guid();\n\n    // Set the Rule's weight (defaults to 1)\n    this.weight = weight || 1;\n\n    // If an attribute is specified, assign it\n    if (attribute) {\n      this.attribute = attribute;\n    }\n\n    // If a constraint is specified, assign it\n    if (constraint) {\n      this.constraint = constraint;\n    }\n\n    // If a value for 'required' is specified, assign it\n    if (required === undefined) {\n      // If no value was specified, default to False\n      this.required = false;\n    } else {\n      this.required = required;\n    }\n\n    // Cache for constraint info object\n    this._constraintInfo = void 0;\n\n    // Cache for validator and value object\n    this._validatorAndValue = void 0;\n  }\n\n  /**\n   * Occasionally the Rule class needs to be instantiated from a JavaScript Object.\n   * This function fills in a Protocol with the Object data.\n   *\n   * @param input A Rule as a JavaScript Object, e.g. retrieved from JSON\n   */\n  fromObject(input) {\n    // Check if the input already has an ID\n    // If so, keep it. It not, create a new UUID\n    this.id = input.id || guid();\n\n    // Assign the specified input data to the Rule\n    this.required = input.required;\n    this.weight = input.weight;\n    this.attribute = input.attribute;\n    this.constraint = input.constraint;\n  }\n\n  /**\n   * Get the constraint info object for the current constraint\n   * @return {Object\\undefined} Constraint object or undefined if current constraint\n   *                            is not valid or not found in comparators list\n   */\n  getConstraintInfo() {\n    let constraintInfo = this._constraintInfo;\n    // Check if info is cached already\n    if (constraintInfo !== void 0) {\n      return constraintInfo;\n    }\n\n    const ruleConstraint = Object.keys(this.constraint)[0];\n\n    if (ruleConstraint !== void 0) {\n      constraintInfo = comparators.find(\n        comparator => ruleConstraint === comparator.id\n      );\n    }\n\n    // Cache this information for later use\n    this._constraintInfo = constraintInfo;\n\n    return constraintInfo;\n  }\n\n  /**\n   * Check if current rule is related to priors\n   * @return {Boolean} True if a rule is related to priors or false otherwise\n   */\n  isRuleForPrior() {\n    // @TODO: Should we check this too? this.attribute === 'relativeTime'\n    return this.attribute === 'abstractPriorValue';\n  }\n\n  /**\n   * If the current rule is a rule for priors, returns the number of referenced priors. Otherwise, returns -1.\n   * @return {Number} The number of referenced priors or -1 if not applicable. Returns zero if the actual value could not be determined.\n   */\n  getNumberOfPriorsReferenced() {\n    if (!this.isRuleForPrior()) {\n      return -1;\n    }\n\n    // Get rule's validator and value\n    const ruleValidatorAndValue = this.getConstraintValidatorAndValue();\n    const { value, validator } = ruleValidatorAndValue;\n    const intValue = parseInt(value, 10) || 0; // avoid possible NaN\n\n    // \"Equal to\" validators\n    if (EQUALS_REGEXP.test(validator)) {\n      // In this case, -1 (the oldest prior) indicates that at least one study is used\n      return intValue < 0 ? 1 : intValue;\n    }\n\n    // Default cases return value\n    return 0;\n  }\n\n  /**\n   * Get the constraint validator and value\n   * @return {Object|undefined} Returns an object containing the validator and it's value or undefined\n   */\n  getConstraintValidatorAndValue() {\n    let validatorAndValue = this._validatorAndValue;\n\n    // Check if validator and value are cached already\n    if (validatorAndValue !== void 0) {\n      return validatorAndValue;\n    }\n\n    // Get the constraint info object\n    const constraintInfo = this.getConstraintInfo();\n\n    // Constraint info object exists and is valid\n    if (constraintInfo !== void 0) {\n      const validator = constraintInfo.validator;\n      const currentValidator = this.constraint[validator];\n\n      if (currentValidator) {\n        const constraintValidator = constraintInfo.validatorOption;\n        const constraintValue = currentValidator[constraintValidator];\n\n        validatorAndValue = {\n          value: constraintValue,\n          validator: constraintInfo.id,\n        };\n\n        this._validatorAndValue = validatorAndValue;\n      }\n    }\n\n    return validatorAndValue;\n  }\n}\n","import Rule from './Rule';\n\n/**\n * The ProtocolMatchingRule Class extends the Rule Class.\n *\n * At present it does not add any new methods or attributes\n * @type {ProtocolMatchingRule}\n */\nclass ProtocolMatchingRule extends Rule {}\n\n/**\n * The StudyMatchingRule Class extends the Rule Class.\n *\n * At present it does not add any new methods or attributes\n * @type {StudyMatchingRule}\n */\nclass StudyMatchingRule extends Rule {}\n\n/**\n * The SeriesMatchingRule Class extends the Rule Class.\n *\n * At present it does not add any new methods or attributes\n * @type {SeriesMatchingRule}\n */\nclass SeriesMatchingRule extends Rule {}\n\n/**\n * The ImageMatchingRule class extends the Rule Class.\n *\n * At present it does not add any new methods or attributes\n * @type {ImageMatchingRule}\n */\nclass ImageMatchingRule extends Rule {}\n\nexport {\n  ProtocolMatchingRule,\n  StudyMatchingRule,\n  SeriesMatchingRule,\n  ImageMatchingRule,\n};\n","/**\n * Removes the first instance of an element from an array, if an equal value exists\n *\n * @param array\n * @param input\n *\n * @returns {boolean} Whether or not the element was found and removed\n */\nconst removeFromArray = (array, input) => {\n  // If the array is empty, stop here\n  if (!array || !array.length) {\n    return false;\n  }\n\n  array.forEach((value, index) => {\n    // TODO: Double check whether or not this deep equality check is necessary\n    //if (_.isEqual(value, input)) {\n    if (value === input) {\n      indexToRemove = index;\n      return false;\n    }\n  });\n\n  if (indexToRemove === void 0) {\n    return false;\n  }\n\n  array.splice(indexToRemove, 1);\n  return true;\n};\n\nexport { removeFromArray };\n","/**\n * The ViewportStructure class represents the layout and layout properties that\n * Viewports are displayed in. ViewportStructure has a type, which corresponds to\n * a layout template, and a set of properties, which depend on the type.\n *\n * @type {ViewportStructure}\n */\nexport default class ViewportStructure {\n  constructor(type, properties) {\n    this.type = type;\n    this.properties = properties;\n  }\n\n  /**\n   * Occasionally the ViewportStructure class needs to be instantiated from a JavaScript Object.\n   * This function fills in a ViewportStructure with the Object data.\n   *\n   * @param input The ViewportStructure as a JavaScript Object, e.g. retrieved from JSON\n   */\n  fromObject(input) {\n    this.type = input.type;\n    this.properties = input.properties;\n  }\n\n  /**\n   * Retrieve the layout template name based on the layout type\n   *\n   * @returns {string}\n   */\n  getLayoutTemplateName() {\n    // Viewport structure can be updated later when we build more complex display layouts\n    switch (this.type) {\n      case 'grid':\n        return 'gridLayout';\n    }\n  }\n\n  /**\n   * Retrieve the number of Viewports required for this layout\n   * given the layout type and properties\n   *\n   * @returns {string}\n   */\n  getNumViewports() {\n    // Viewport structure can be updated later when we build more complex display layouts\n    switch (this.type) {\n      case 'grid':\n        // For the typical grid layout, we only need to multiply Rows by Columns to\n        // obtain the number of viewports\n        return this.properties.Rows * this.properties.Columns;\n    }\n  }\n}\n","import {\n  StudyMatchingRule,\n  SeriesMatchingRule,\n  ImageMatchingRule,\n} from './rules';\nimport { removeFromArray } from '../lib/removeFromArray';\n\n/**\n * This Class defines a Viewport in the Hanging Protocol Stage. A Viewport contains\n * arrays of Rules that are matched in the ProtocolEngine in order to determine which\n * images should be hung.\n *\n * @type {Viewport}\n */\nexport default class Viewport {\n  constructor() {\n    this.viewportSettings = {};\n    this.imageMatchingRules = [];\n    this.seriesMatchingRules = [];\n    this.studyMatchingRules = [];\n  }\n\n  /**\n   * Occasionally the Viewport class needs to be instantiated from a JavaScript Object.\n   * This function fills in a Viewport with the Object data.\n   *\n   * @param input The Viewport as a JavaScript Object, e.g. retrieved from JSON\n   */\n  fromObject(input) {\n    // If ImageMatchingRules exist, create them from the Object data\n    // and add them to the Viewport's imageMatchingRules array\n    if (input.imageMatchingRules) {\n      input.imageMatchingRules.forEach(ruleObject => {\n        var rule = new ImageMatchingRule();\n        rule.fromObject(ruleObject);\n        this.imageMatchingRules.push(rule);\n      });\n    }\n\n    // If SeriesMatchingRules exist, create them from the Object data\n    // and add them to the Viewport's seriesMatchingRules array\n    if (input.seriesMatchingRules) {\n      input.seriesMatchingRules.forEach(ruleObject => {\n        var rule = new SeriesMatchingRule();\n        rule.fromObject(ruleObject);\n        this.seriesMatchingRules.push(rule);\n      });\n    }\n\n    // If StudyMatchingRules exist, create them from the Object data\n    // and add them to the Viewport's studyMatchingRules array\n    if (input.studyMatchingRules) {\n      input.studyMatchingRules.forEach(ruleObject => {\n        var rule = new StudyMatchingRule();\n        rule.fromObject(ruleObject);\n        this.studyMatchingRules.push(rule);\n      });\n    }\n\n    // If ViewportSettings exist, add them to the current protocol\n    if (input.viewportSettings) {\n      this.viewportSettings = input.viewportSettings;\n    }\n  }\n\n  /**\n   * Finds and removes a rule from whichever array it exists in.\n   * It is not required to specify if it exists in studyMatchingRules,\n   * seriesMatchingRules, or imageMatchingRules\n   *\n   * @param rule\n   */\n  removeRule(rule) {\n    var array;\n    if (rule instanceof StudyMatchingRule) {\n      array = this.studyMatchingRules;\n    } else if (rule instanceof SeriesMatchingRule) {\n      array = this.seriesMatchingRules;\n    } else if (rule instanceof ImageMatchingRule) {\n      array = this.imageMatchingRules;\n    }\n\n    removeFromArray(array, rule);\n  }\n}\n","import ViewportStructure from './ViewportStructure';\nimport Viewport from './Viewport';\nimport guid from '../../utils/guid';\n\n/**\n * A Stage is one step in the Display Set Sequence for a Hanging Protocol\n *\n * Stages are defined as a ViewportStructure and an array of Viewports\n *\n * @type {Stage}\n */\nexport default class Stage {\n  constructor(ViewportStructure, name) {\n    // Create a new UUID for this Stage\n    this.id = guid();\n\n    // Assign the name and ViewportStructure provided\n    this.name = name;\n    this.viewportStructure = ViewportStructure;\n\n    // Create an empty array for the Viewports\n    this.viewports = [];\n\n    // Set the created date to Now\n    this.createdDate = new Date();\n  }\n\n  /**\n   * Creates a clone of the current Stage with a new name\n   *\n   * @param name\n   * @returns {Stage|*}\n   */\n  createClone(name) {\n    // Create a new JavaScript independent of the current Protocol\n    var currentStage = Object.assign({}, this);\n\n    // Create a new Stage to return\n    var clonedStage = new Stage();\n\n    // Assign the desired properties\n    currentStage.id = clonedStage.id;\n    clonedStage.fromObject(currentStage);\n\n    // If we have specified a name, assign it\n    if (name) {\n      clonedStage.name = name;\n    }\n\n    // Return the cloned Stage\n    return clonedStage;\n  }\n\n  /**\n   * Occasionally the Stage class needs to be instantiated from a JavaScript Object.\n   * This function fills in a Protocol with the Object data.\n   *\n   * @param input A Stage as a JavaScript Object, e.g. retrieved from JSON\n   */\n  fromObject(input) {\n    // Check if the input already has an ID\n    // If so, keep it. It not, create a new UUID\n    this.id = input.id || guid();\n\n    // Assign the input name to the Stage\n    this.name = input.name;\n\n    // If a ViewportStructure is present in the input, add it from the\n    // input data\n    this.viewportStructure = new ViewportStructure();\n    this.viewportStructure.fromObject(input.viewportStructure);\n\n    // If any viewports are present in the input object\n    if (input.viewports) {\n      input.viewports.forEach(viewportObject => {\n        // Create a new Viewport with their data\n        var viewport = new Viewport();\n        viewport.fromObject(viewportObject);\n\n        // Add it to the viewports array\n        this.viewports.push(viewport);\n      });\n    }\n  }\n}\n","import { ProtocolMatchingRule } from './rules';\nimport { removeFromArray } from '../lib/removeFromArray';\nimport Stage from './Stage';\nimport guid from '../../utils/guid';\nimport user from '../../user';\n\n/**\n * This class represents a Hanging Protocol at the highest level\n *\n * @type {Protocol}\n */\nexport default class Protocol {\n  /**\n   * The Constructor for the Class to create a Protocol with the bare\n   * minimum information\n   *\n   * @param name The desired name for the Protocol\n   */\n  constructor(name) {\n    // Create a new UUID for this Protocol\n    this.id = guid();\n\n    // Store a value which determines whether or not a Protocol is locked\n    // This is probably temporary, since we will eventually have role / user\n    // checks for editing. For now we just need it to prevent changes to the\n    // default protocols.\n    this.locked = false;\n\n    // Boolean value to indicate if the protocol has updated priors information\n    // it's set in \"updateNumberOfPriorsReferenced\" function\n    this.hasUpdatedPriorsInformation = false;\n\n    // Apply the desired name\n    this.name = name;\n\n    // Set the created and modified dates to Now\n    this.createdDate = new Date();\n    this.modifiedDate = new Date();\n\n    // If we are logged in while creating this Protocol,\n    // store this information as well\n    if (user.userLoggedIn && user.userLoggedIn()) {\n      this.createdBy = user.getUserId();\n      this.modifiedBy = user.getUserId();\n    }\n\n    // Create two empty Sets specifying which roles\n    // have read and write access to this Protocol\n    this.availableTo = new Set();\n    this.editableBy = new Set();\n\n    // Define empty arrays for the Protocol matching rules\n    // and Stages\n    this.protocolMatchingRules = [];\n    this.stages = [];\n\n    // Define auxiliary values for priors\n    this.numberOfPriorsReferenced = -1;\n  }\n\n  getNumberOfPriorsReferenced(skipCache = false) {\n    let numberOfPriorsReferenced =\n      skipCache !== true ? this.numberOfPriorsReferenced : -1;\n\n    // Check if information is cached already\n    if (numberOfPriorsReferenced > -1) {\n      return numberOfPriorsReferenced;\n    }\n\n    numberOfPriorsReferenced = 0;\n\n    // Search each study matching rule for prior rules\n    // Each stage can have many viewports that can have\n    // multiple study matching rules.\n    this.stages.forEach(stage => {\n      if (!stage.viewports) {\n        return;\n      }\n\n      stage.viewports.forEach(viewport => {\n        if (!viewport.studyMatchingRules) {\n          return;\n        }\n\n        viewport.studyMatchingRules.forEach(rule => {\n          // If the current rule is not a priors rule, it will return -1 then numberOfPriorsReferenced will continue to be 0\n          const priorsReferenced = rule.getNumberOfPriorsReferenced();\n          if (priorsReferenced > numberOfPriorsReferenced) {\n            numberOfPriorsReferenced = priorsReferenced;\n          }\n        });\n      });\n    });\n\n    this.numberOfPriorsReferenced = numberOfPriorsReferenced;\n\n    return numberOfPriorsReferenced;\n  }\n\n  updateNumberOfPriorsReferenced() {\n    this.getNumberOfPriorsReferenced(true);\n  }\n\n  /**\n   * Method to update the modifiedDate when the Protocol\n   * has been changed\n   */\n  protocolWasModified() {\n    // If we are logged in while modifying this Protocol,\n    // store this information as well\n    if (user.userLoggedIn && user.userLoggedIn()) {\n      this.modifiedBy = user.getUserId();\n    }\n\n    // Protocol has been modified, so mark priors information\n    // as \"outdated\"\n    this.hasUpdatedPriorsInformation = false;\n\n    // Update number of priors referenced info\n    this.updateNumberOfPriorsReferenced();\n\n    // Update the modifiedDate with the current Date/Time\n    this.modifiedDate = new Date();\n  }\n\n  /**\n   * Occasionally the Protocol class needs to be instantiated from a JavaScript Object\n   * containing the Protocol data. This function fills in a Protocol with the Object\n   * data.\n   *\n   * @param input A Protocol as a JavaScript Object, e.g. retrieved from JSON\n   */\n  fromObject(input) {\n    // Check if the input already has an ID\n    // If so, keep it. It not, create a new UUID\n    this.id = input.id || guid();\n\n    // Assign the input name to the Protocol\n    this.name = input.name;\n\n    // Retrieve locked status, use !! to make it truthy\n    // so that undefined values will be set to false\n    this.locked = !!input.locked;\n\n    // TODO: Check how to regenerate Set from Object\n    //this.availableTo = new Set(input.availableTo);\n    //this.editableBy = new Set(input.editableBy);\n\n    // If the input contains Protocol matching rules\n    if (input.protocolMatchingRules) {\n      input.protocolMatchingRules.forEach(ruleObject => {\n        // Create new Rules from the stored data\n        var rule = new ProtocolMatchingRule();\n        rule.fromObject(ruleObject);\n\n        // Add them to the Protocol\n        this.protocolMatchingRules.push(rule);\n      });\n    }\n\n    // If the input contains data for various Stages in the\n    // display set sequence\n    if (input.stages) {\n      input.stages.forEach(stageObject => {\n        // Create Stages from the stored data\n        var stage = new Stage();\n        stage.fromObject(stageObject);\n\n        // Add them to the Protocol\n        this.stages.push(stage);\n      });\n    }\n  }\n\n  /**\n   * Creates a clone of the current Protocol with a new name\n   *\n   * @param name\n   * @returns {Protocol|*}\n   */\n  createClone(name) {\n    // Create a new JavaScript independent of the current Protocol\n    var currentProtocol = Object.assign({}, this);\n\n    // Create a new Protocol to return\n    var clonedProtocol = new Protocol();\n\n    // Apply the desired properties\n    currentProtocol.id = clonedProtocol.id;\n    clonedProtocol.fromObject(currentProtocol);\n\n    // If we have specified a name, assign it\n    if (name) {\n      clonedProtocol.name = name;\n    }\n\n    // Unlock the clone\n    clonedProtocol.locked = false;\n\n    // Return the cloned Protocol\n    return clonedProtocol;\n  }\n\n  /**\n   * Adds a Stage to this Protocol's display set sequence\n   *\n   * @param stage\n   */\n  addStage(stage) {\n    this.stages.push(stage);\n\n    // Update the modifiedDate and User that last\n    // modified this Protocol\n    this.protocolWasModified();\n  }\n\n  /**\n   * Adds a Rule to this Protocol's array of matching rules\n   *\n   * @param rule\n   */\n  addProtocolMatchingRule(rule) {\n    this.protocolMatchingRules.push(rule);\n\n    // Update the modifiedDate and User that last\n    // modified this Protocol\n    this.protocolWasModified();\n  }\n\n  /**\n   * Removes a Rule from this Protocol's array of matching rules\n   *\n   * @param rule\n   */\n  removeProtocolMatchingRule(rule) {\n    var wasRemoved = removeFromArray(this.protocolMatchingRules, rule);\n\n    // Update the modifiedDate and User that last\n    // modified this Protocol\n    if (wasRemoved) {\n      this.protocolWasModified();\n    }\n  }\n}\n","import Protocol from '../../classes/Protocol';\n\n// The ProtocolStore class allows persisting hanging protocols using different strategies.\n// For example, one strategy stores hanging protocols in the application server while\n// another strategy stores them in a remote machine, but only one strategy can be used at a time.\n\nexport default class ProtocolStore {\n  constructor(strategy) {\n    this.strategy = strategy;\n  }\n\n  /**\n   * Get a Protocol instance or array of Protocol instances for the given protocol object or array\n   * @param  {Object|array} protocolObject Protocol plain object or array of Protocol plain objects\n   * @return {Protocol|array} Protocol instance or array of Protocol intances for the given protocol object or array\n   */\n  static getProtocolInstance(protocolObject) {\n    let result = protocolObject;\n\n    // If result is an array of protocols objects\n    if (result instanceof Array) {\n      result.forEach((protocol, index) => {\n        // Check if protocol is an instance of Protocol\n        if (!(protocol instanceof Protocol)) {\n          const protocolInstance = new Protocol();\n          protocolInstance.fromObject(protocol);\n          result[index] = protocolInstance;\n        }\n      });\n    } else if (result !== void 0 && !(result instanceof Protocol)) {\n      // Check if result exists and is not an instance of Protocol\n      const protocolInstance = new Protocol();\n      protocolInstance.fromObject(result);\n      result = protocolInstance;\n    }\n\n    return result;\n  }\n\n  /**\n   * Registers a function to be called when the protocol store is ready to persist hanging protocols\n   *\n   * NOTE: Strategies should implement this function\n   *\n   * @param callback The function to be called as a callback\n   */\n  onReady(callback) {\n    this.strategy.onReady(callback);\n  }\n\n  /**\n   * Gets the hanging protocol by protocolId if defined, otherwise all stored hanging protocols\n   *\n   * NOTE: Strategies should implement this function\n   *\n   * @param protocolId The protocol ID used to find the hanging protocol\n   * @returns {object|array} The hanging protocol by protocolId or array of the stored hanging protocols\n   */\n  getProtocol(protocolId) {\n    let result = this.strategy.getProtocol(protocolId);\n    return ProtocolStore.getProtocolInstance(result);\n  }\n\n  /**\n   * Stores the hanging protocol\n   *\n   * NOTE: Strategies should implement this function\n   *\n   * @param protocol The hanging protocol to be stored\n   */\n  addProtocol(protocol) {\n    this.strategy.addProtocol(protocol);\n  }\n\n  /**\n   * Updates the hanging protocol by protocolId\n   *\n   * NOTE: Strategies should implement this function\n   *\n   * @param protocolId The protocol ID used to find the hanging protocol to update\n   * @param protocol The updated hanging protocol\n   */\n  updateProtocol(protocolId, protocol) {\n    this.strategy.updateProtocol(protocolId, protocol);\n  }\n\n  /**\n   * Removes the hanging protocol\n   *\n   * NOTE: Strategies should implement this function\n   *\n   * @param protocolId The protocol ID used to remove the hanging protocol\n   */\n  removeProtocol(protocolId) {\n    this.strategy.removeProtocol(protocolId);\n  }\n}\n","import Protocol from '../classes/Protocol';\nimport ViewportStructure from '../classes/ViewportStructure';\nimport Viewport from '../classes/Viewport';\nimport Stage from '../classes/Stage';\n\nfunction getDefaultProtocol() {\n  const protocol = new Protocol('Default');\n  protocol.id = 'defaultProtocol';\n  protocol.locked = true;\n\n  const oneByOne = new ViewportStructure('grid', {\n    Rows: 1,\n    Columns: 1,\n  });\n\n  const viewport = new Viewport();\n  const first = new Stage(oneByOne, 'oneByOne');\n  first.viewports.push(viewport);\n\n  protocol.stages.push(first);\n\n  return protocol;\n}\n\nconst defaultProtocol = getDefaultProtocol();\n\nexport default defaultProtocol;\n","import log from '../../../log';\nimport defaultProtocol from '../defaultProtocol';\n\nexport default class ProtocolStrategy {\n  constructor() {\n    this.hangingProtocols = new Map();\n    this.defaultsAdded = false;\n  }\n\n  /**\n   * Registers a function to be called when the hangingProtocols collection is subscribed\n   * The callback is called only one time when the subscription is ready\n   *\n   * @param callback The function to be called as a callback\n   */\n  onReady(callback) {\n    if (!this.defaultsAdded) {\n      log.info('Inserting the default hanging protocol...');\n      this.addProtocol(defaultProtocol);\n      this.defaultsAdded = true;\n    }\n\n    callback();\n  }\n\n  /**\n   * Gets the hanging protocol by protocolId if defined, otherwise all stored hanging protocols\n   *\n   * @param protocolId The protocol ID used to find the hanging protocol\n   * @returns {object|array} The hanging protocol by protocolId or array of the stored hanging protocols\n   */\n  getProtocol(protocolId) {\n    // Return the hanging protocol by protocolId if defined\n    if (protocolId) {\n      return this.hangingProtocols.get(protocolId);\n    }\n\n    // Otherwise, return all protocols\n    return Array.from(this.hangingProtocols.values());\n  }\n\n  /**\n   * Stores the hanging protocol\n   *\n   * @param protocol The hanging protocol to be stored\n   */\n  addProtocol(protocol) {\n    this.hangingProtocols.set(protocol.id, protocol);\n  }\n\n  /**\n   * Updates the hanging protocol by protocolId\n   *\n   * @param protocolId The protocol ID used to find the hanging protocol to update\n   * @param protocol The updated hanging protocol\n   */\n  updateProtocol(protocolId, protocol) {\n    if (!this.hangingProtocols.has(protocolId)) {\n      return;\n    }\n\n    this.hangingProtocols.set(protocolId, protocol);\n  }\n\n  /**\n   * Removes the hanging protocol\n   *\n   * @param protocolId The protocol ID used to remove the hanging protocol\n   */\n  removeProtocol(protocolId) {\n    if (!this.hangingProtocols.has(protocolId)) {\n      return;\n    }\n\n    this.hangingProtocols.delete(protocolId);\n  }\n}\n","import OHIFError from '../classes/OHIFError.js';\nimport metadata from '../classes/metadata/';\nimport { StudyMetadataSource } from '../classes/StudyMetadataSource.js';\nimport { isImage } from '../utils/isImage.js';\nimport { HPMatcher } from './HPMatcher.js';\nimport { sortByScore } from './lib/sortByScore';\nimport log from '../log.js';\nimport sortBy from '../utils/sortBy.js';\nimport { CustomViewportSettings } from './customViewportSettings';\nimport Protocol from './classes/Protocol';\nimport { ProtocolStore } from './protocolStore/classes';\n\n/**\n * Import Constants\n */\nconst { StudyMetadata, InstanceMetadata } = metadata;\n\n// Useful constants\nconst ABSTRACT_PRIOR_VALUE = 'abstractPriorValue';\n\nexport default class ProtocolEngine {\n  matchedProtocols = new Map();\n  matchedProtocolScores = {};\n\n  /**\n   * Constructor\n   * @param  {ProtocolStore} protocolStore Protocol Store used to keep track of all hanging protocols\n   * @param  {Array} studies Array of study metadata\n   * @param  {Map} priorStudies Map of prior studies\n   * @param  {Object} studyMetadataSource Instance of StudyMetadataSource (ohif-viewerbase) Object to get study metadata\n   * @param  {Object} options\n   */\n  constructor(\n    protocolStore,\n    studies,\n    priorStudies,\n    studyMetadataSource,\n    options = {}\n  ) {\n    // -----------\n    // Type Validations\n    if (!(studyMetadataSource instanceof StudyMetadataSource)) {\n      throw new OHIFError(\n        'ProtocolEngine::constructor studyMetadataSource is not an instance of StudyMetadataSource'\n      );\n    }\n\n    if (\n      !(studies instanceof Array) &&\n      !studies.every(study => study instanceof StudyMetadata)\n    ) {\n      throw new OHIFError(\n        \"ProtocolEngine::constructor studies is not an array or it's items are not instances of StudyMetadata\"\n      );\n    }\n\n    // --------------\n    // Initialization\n    this.protocolStore = protocolStore;\n    this.studies = studies;\n    this.priorStudies = priorStudies instanceof Map ? priorStudies : new Map();\n    this.studyMetadataSource = studyMetadataSource;\n    this.options = options;\n\n    // Put protocol engine in a known state\n    this.reset();\n\n    // Create an array for new stage ids to be stored\n    // while editing a stage\n    this.newStageIds = [];\n  }\n\n  /**\n   * Resets the ProtocolEngine to the best match\n   */\n  reset() {\n    const protocol = this.getBestProtocolMatch();\n\n    this.setHangingProtocol(protocol);\n  }\n\n  /**\n   * Retrieves the current Stage from the current Protocol and stage index\n   *\n   * @returns {*} The Stage model for the currently displayed Stage\n   */\n  getCurrentStageModel() {\n    return this.protocol.stages[this.stage];\n  }\n\n  /**\n   * Finds the best protocols from Protocol Store, matching each protocol matching rules\n   * with the given study. The best protocol are orded by score and returned in an array\n   * @param  {Object} study StudyMetadata instance object\n   * @return {Array}       Array of match objects or an empty array if no match was found\n   *                       Each match object has the score of the matching and the matched\n   *                       protocol\n   */\n  findMatchByStudy(study) {\n    log.trace('ProtocolEngine::findMatchByStudy');\n\n    const matched = [];\n    const studyInstance = study.getFirstInstance();\n\n    // Set custom attribute for study metadata\n    const numberOfAvailablePriors = this.getNumberOfAvailablePriors(\n      study.getObjectID()\n    );\n\n    this.protocolStore.getProtocol().forEach(protocol => {\n      // Clone the protocol's protocolMatchingRules array\n      // We clone it so that we don't accidentally add the\n      // numberOfPriorsReferenced rule to the Protocol itself.\n      let rules = protocol.protocolMatchingRules.slice();\n      if (!rules) {\n        return;\n      }\n\n      // Check if the study has the minimun number of priors used by the protocol.\n      const numberOfPriorsReferenced = protocol.getNumberOfPriorsReferenced();\n      if (numberOfPriorsReferenced > numberOfAvailablePriors) {\n        return;\n      }\n\n      // Run the matcher and get matching details\n      const matchedDetails = HPMatcher.match(studyInstance, rules);\n      const score = matchedDetails.score;\n\n      // The protocol matched some rule, add it to the matched list\n      if (score > 0) {\n        matched.push({\n          score,\n          protocol,\n        });\n      }\n    });\n\n    // If no matches were found, select the default protocol\n    if (!matched.length) {\n      const defaultProtocol = this.protocolStore.getProtocol('defaultProtocol');\n\n      return [\n        {\n          score: 1,\n          protocol: defaultProtocol,\n        },\n      ];\n    }\n\n    // Sort the matched list by score\n    sortByScore(matched);\n\n    log.trace('ProtocolEngine::findMatchByStudy matched', matched);\n\n    return matched;\n  }\n\n  _clearMatchedProtocols() {\n    this.matchedProtocols.clear();\n    this.matchedProtocolScores = {};\n  }\n  /**\n   * Populates the MatchedProtocols Collection by running the matching procedure\n   */\n  updateProtocolMatches() {\n    log.trace('ProtocolEngine::updateProtocolMatches');\n\n    // Clear all data currently in matchedProtocols\n    this._clearMatchedProtocols();\n\n    // For each study, find the matching protocols\n    this.studies.forEach(study => {\n      const matched = this.findMatchByStudy(study);\n\n      // For each matched protocol, check if it is already in MatchedProtocols\n      matched.forEach(matchedDetail => {\n        const protocol = matchedDetail.protocol;\n        if (!protocol) {\n          return;\n        }\n\n        // If it is not already in the MatchedProtocols Collection, insert it with its score\n        if (!this.matchedProtocols.has(protocol.id)) {\n          log.trace(\n            'ProtocolEngine::updateProtocolMatches inserting protocol match',\n            matchedDetail\n          );\n          this.matchedProtocols.set(protocol.id, protocol);\n          this.matchedProtocolScores[protocol.id] = matchedDetail.score;\n        }\n      });\n    });\n  }\n\n  _largestKeyByValue(obj) {\n    return Object.keys(obj).reduce((a, b) => (obj[a] > obj[b] ? a : b));\n  }\n\n  _getHighestScoringProtocol() {\n    if (!Object.keys(this.matchedProtocolScores).length) {\n      return this.protocolStore.getProtocol('defaultProtocol');\n    }\n    const highestScoringProtocolId = this._largestKeyByValue(\n      this.matchedProtocolScores\n    );\n    return this.matchedProtocols.get(highestScoringProtocolId);\n  }\n\n  /**\n   * Return the best matched Protocol to the current study or set of studies\n   * @returns {*}\n   */\n  getBestProtocolMatch() {\n    // Run the matching to populate matchedProtocols Set and Map\n    this.updateProtocolMatches();\n\n    // Retrieve the highest scoring Protocol\n    const bestMatch = this._getHighestScoringProtocol();\n\n    log.trace('ProtocolEngine::getBestProtocolMatch bestMatch', bestMatch);\n\n    return bestMatch;\n  }\n\n  /**\n   * Get the number of prior studies supplied in the priorStudies map property.\n   *\n   * @param {String} studyObjectID The study object ID of the study whose priors are needed\n   * @returns {number} The number of available prior studies with the same PatientID\n   */\n  getNumberOfAvailablePriors(studyObjectID) {\n    return this.getAvailableStudyPriors(studyObjectID).length;\n  }\n\n  /**\n   * Get the array of prior studies from a specific study.\n   *\n   * @param {String} studyObjectID The study object ID of the study whose priors are needed\n   * @returns {Array} The array of available priors or an empty array\n   */\n  getAvailableStudyPriors(studyObjectID) {\n    const priors = this.priorStudies.get(studyObjectID);\n\n    return priors instanceof Array ? priors : [];\n  }\n\n  // Match images given a list of Studies and a Viewport's image matching reqs\n  matchImages(viewport, viewportIndex) {\n    log.trace('ProtocolEngine::matchImages');\n\n    const {\n      studyMatchingRules,\n      seriesMatchingRules,\n      imageMatchingRules: instanceMatchingRules,\n    } = viewport;\n\n    const matchingScores = [];\n    const currentStudy = this.studies[0]; // @TODO: Should this be: this.studies[this.currentStudy] ???\n    const firstInstance = currentStudy.getFirstInstance();\n\n    let highestStudyMatchingScore = 0;\n    let highestSeriesMatchingScore = 0;\n\n    // Set custom attribute for study metadata and it's first instance\n    currentStudy.setCustomAttribute(ABSTRACT_PRIOR_VALUE, 0);\n    if (firstInstance instanceof InstanceMetadata) {\n      firstInstance.setCustomAttribute(ABSTRACT_PRIOR_VALUE, 0);\n    }\n\n    // Only used if study matching rules has abstract prior values defined...\n    let priorStudies;\n\n    studyMatchingRules.forEach(rule => {\n      if (rule.attribute === ABSTRACT_PRIOR_VALUE) {\n        const validatorType = Object.keys(rule.constraint)[0];\n        const validator = Object.keys(rule.constraint[validatorType])[0];\n\n        let abstractPriorValue = rule.constraint[validatorType][validator];\n        abstractPriorValue = parseInt(abstractPriorValue, 10);\n        // TODO: Restrict or clarify validators for abstractPriorValue?\n\n        // No need to call it more than once...\n        if (!priorStudies) {\n          priorStudies = this.getAvailableStudyPriors(\n            currentStudy.getObjectID()\n          );\n        }\n\n        // TODO: Revisit this later: What about two studies with the same\n        // study date?\n\n        let priorStudy;\n        if (abstractPriorValue === -1) {\n          priorStudy = priorStudies[priorStudies.length - 1];\n        } else {\n          const studyIndex = Math.max(abstractPriorValue - 1, 0);\n          priorStudy = priorStudies[studyIndex];\n        }\n\n        // Invalid data\n        if (!priorStudy instanceof StudyMetadata) {\n          return;\n        }\n\n        const priorStudyObjectID = priorStudy.getObjectID();\n\n        // Check if study metadata is already in studies list\n        if (\n          this.studies.find(study => study.getObjectID() === priorStudyObjectID)\n        ) {\n          return;\n        }\n\n        // Get study metadata if necessary and load study in the viewer (each viewer should provide it's own load study method)\n        this.studyMetadataSource.loadStudy(priorStudy).then(\n          studyMetadata => {\n            // Set the custom attribute abstractPriorValue for the study metadata\n            studyMetadata.setCustomAttribute(\n              ABSTRACT_PRIOR_VALUE,\n              abstractPriorValue\n            );\n\n            // Also add custom attribute\n            const firstInstance = studyMetadata.getFirstInstance();\n            if (firstInstance instanceof InstanceMetadata) {\n              firstInstance.setCustomAttribute(\n                ABSTRACT_PRIOR_VALUE,\n                abstractPriorValue\n              );\n            }\n\n            // Insert the new study metadata\n            this.studies.push(studyMetadata);\n\n            // Update the viewport to refresh layout manager with new study\n            this.updateViewports(viewportIndex);\n          },\n          error => {\n            log.warn(error);\n            throw new OHIFError(\n              `ProtocolEngine::matchImages could not get study metadata for the Study with the following ObjectID: ${priorStudyObjectID}`\n            );\n          }\n        );\n      }\n      // TODO: Add relative Date / time\n    });\n\n    this.studies.forEach(study => {\n      const studyMatchDetails = HPMatcher.match(\n        study.getFirstInstance(),\n        studyMatchingRules\n      );\n\n      // Prevent bestMatch from being updated if the matchDetails' required attribute check has failed\n      if (\n        studyMatchDetails.requiredFailed === true ||\n        studyMatchDetails.score < highestStudyMatchingScore\n      ) {\n        return;\n      }\n\n      highestStudyMatchingScore = studyMatchDetails.score;\n\n      study.forEachSeries(series => {\n        const seriesMatchDetails = HPMatcher.match(\n          series.getFirstInstance(),\n          seriesMatchingRules\n        );\n\n        // Prevent bestMatch from being updated if the matchDetails' required attribute check has failed\n        if (\n          seriesMatchDetails.requiredFailed === true ||\n          seriesMatchDetails.score < highestSeriesMatchingScore\n        ) {\n          return;\n        }\n\n        highestSeriesMatchingScore = seriesMatchDetails.score;\n\n        series.forEachInstance((instance, index) => {\n          // This tests to make sure there is actually image data in this instance\n          // TODO: Change this when we add PDF and MPEG support\n          // See https://ohiforg.atlassian.net/browse/LT-227\n          if (\n            !isImage(instance.getTagValue('SOPClassUID')) &&\n            !instance.getTagValue('Rows')\n          ) {\n            return;\n          }\n\n          const instanceMatchDetails = HPMatcher.match(\n            instance,\n            instanceMatchingRules\n          );\n\n          // Prevent bestMatch from being updated if the matchDetails' required attribute check has failed\n          if (instanceMatchDetails.requiredFailed === true) {\n            return;\n          }\n\n          const matchDetails = {\n            passed: [],\n            failed: [],\n          };\n\n          matchDetails.passed = matchDetails.passed.concat(\n            instanceMatchDetails.details.passed\n          );\n          matchDetails.passed = matchDetails.passed.concat(\n            seriesMatchDetails.details.passed\n          );\n          matchDetails.passed = matchDetails.passed.concat(\n            studyMatchDetails.details.passed\n          );\n\n          matchDetails.failed = matchDetails.failed.concat(\n            instanceMatchDetails.details.failed\n          );\n          matchDetails.failed = matchDetails.failed.concat(\n            seriesMatchDetails.details.failed\n          );\n          matchDetails.failed = matchDetails.failed.concat(\n            studyMatchDetails.details.failed\n          );\n\n          const totalMatchScore =\n            instanceMatchDetails.score +\n            seriesMatchDetails.score +\n            studyMatchDetails.score;\n          const currentSOPInstanceUID = instance.getSOPInstanceUID();\n\n          const imageDetails = {\n            StudyInstanceUID: study.getStudyInstanceUID(),\n            SeriesInstanceUID: series.getSeriesInstanceUID(),\n            SOPInstanceUID: currentSOPInstanceUID,\n            currentImageIdIndex: index,\n            matchingScore: totalMatchScore,\n            matchDetails: matchDetails,\n            sortingInfo: {\n              score: totalMatchScore,\n              study:\n                instance.getTagValue('StudyDate') +\n                instance.getTagValue('StudyTime'),\n              series: parseInt(instance.getTagValue('SeriesNumber')), // TODO: change for seriesDateTime\n              instance: parseInt(instance.getTagValue('InstanceNumber')), // TODO: change for acquisitionTime\n            },\n          };\n\n          // Find the displaySet\n          const displaySet = study.findDisplaySet(displaySet =>\n            displaySet.images.find(\n              image => image.getSOPInstanceUID() === currentSOPInstanceUID\n            )\n          );\n\n          // If the instance was found, set the displaySet ID\n          if (displaySet) {\n            imageDetails.displaySetInstanceUID = displaySet.getUID();\n            imageDetails.imageId = instance.getImageId();\n          }\n\n          matchingScores.push(imageDetails);\n        });\n      });\n    });\n\n    // Sort the matchingScores\n    const sortingFunction = sortBy(\n      {\n        name: 'score',\n        reverse: true,\n      },\n      {\n        name: 'study',\n        reverse: true,\n      },\n      {\n        name: 'instance',\n      },\n      {\n        name: 'series',\n      }\n    );\n    matchingScores.sort((a, b) =>\n      sortingFunction(a.sortingInfo, b.sortingInfo)\n    );\n\n    const bestMatch = matchingScores[0];\n\n    log.trace('ProtocolEngine::matchImages bestMatch', bestMatch);\n\n    return {\n      bestMatch,\n      matchingScores,\n    };\n  }\n\n  /**\n   * Sets the current layout\n   *\n   * @param {number} numRows\n   * @param {number} numColumns\n   */\n  setLayout(numRows, numColumns) {\n    if (numRows < 1 && numColumns < 1) {\n      log.error(`Invalid layout ${numRows} x ${numColumns}`);\n      return;\n    }\n\n    if (typeof this.options.setLayout !== 'function') {\n      log.error('Hanging Protocol Engine setLayout callback is not defined');\n      return;\n    }\n\n    let viewports = [];\n    const numViewports = numRows * numColumns;\n\n    for (let i = 0; i < numViewports; i++) {\n      viewports.push({});\n    }\n\n    this.options.setLayout({ numRows, numColumns, viewports });\n  }\n\n  /**\n   * Rerenders viewports that are part of the current layout manager\n   * using the matching rules internal to each viewport.\n   *\n   * If this function is provided the index of a viewport, only the specified viewport\n   * is rerendered.\n   *\n   * @param viewportIndex\n   */\n  updateViewports(viewportIndex) {\n    log.trace(\n      `ProtocolEngine::updateViewports viewportIndex: ${viewportIndex}`\n    );\n\n    // Make sure we have an active protocol with a non-empty array of display sets\n    if (!this.getNumProtocolStages()) {\n      return;\n    }\n\n    // Retrieve the current stage\n    const stageModel = this.getCurrentStageModel();\n\n    // If the current stage does not fulfill the requirements to be displayed,\n    // stop here.\n    if (\n      !stageModel ||\n      !stageModel.viewportStructure ||\n      !stageModel.viewports ||\n      !stageModel.viewports.length\n    ) {\n      return;\n    }\n\n    // Retrieve the layoutTemplate associated with the current display set's viewport structure\n    // If no such template name exists, stop here.\n    const layoutTemplateName = stageModel.viewportStructure.getLayoutTemplateName();\n    if (!layoutTemplateName) {\n      return;\n    }\n\n    // Retrieve the properties associated with the current display set's viewport structure template\n    // If no such layout properties exist, stop here.\n    const layoutProps = stageModel.viewportStructure.properties;\n    if (!layoutProps) {\n      return;\n    }\n\n    // Create an empty array to store the output viewportData\n    const viewportData = [];\n\n    // Empty the matchDetails associated with the ProtocolEngine.\n    // This will be used to store the pass/fail details and score\n    // for each of the viewport matching procedures\n    this.matchDetails = [];\n\n    // Loop through each viewport\n    stageModel.viewports.forEach((viewport, viewportIndex) => {\n      const details = this.matchImages(viewport, viewportIndex);\n\n      this.matchDetails[viewportIndex] = details;\n\n      // Convert any YES/NO values into true/false for Cornerstone\n      const cornerstoneViewportParams = {};\n\n      // Cache viewportSettings keys\n      const viewportSettingsKeys = Object.keys(viewport.viewportSettings);\n\n      viewportSettingsKeys.forEach(key => {\n        let value = viewport.viewportSettings[key];\n        if (value === 'YES') {\n          value = true;\n        } else if (value === 'NO') {\n          value = false;\n        }\n\n        cornerstoneViewportParams[key] = value;\n      });\n\n      // imageViewerViewports occasionally needs relevant layout data in order to set\n      // the element style of the viewport in question\n      const currentViewportData = {\n        viewportIndex,\n        viewport: cornerstoneViewportParams,\n        ...layoutProps,\n      };\n\n      const customSettings = [];\n      viewportSettingsKeys.forEach(id => {\n        const setting = CustomViewportSettings[id];\n        if (!setting) {\n          return;\n        }\n\n        customSettings.push({\n          id: id,\n          value: viewport.viewportSettings[id],\n        });\n      });\n\n      currentViewportData.renderedCallback = element => {\n        //console.log('renderedCallback for ' + element.id);\n        customSettings.forEach(customSetting => {\n          log.trace(\n            `ProtocolEngine::currentViewportData.renderedCallback Applying custom setting: ${customSetting.id}`\n          );\n          log.trace(\n            `ProtocolEngine::currentViewportData.renderedCallback with value: ${customSetting.value}`\n          );\n\n          const setting = CustomViewportSettings[customSetting.id];\n          setting.callback(element, customSetting.value);\n        });\n      };\n\n      let currentMatch = details.bestMatch;\n      let currentPosition = 1;\n      const scoresLength = details.matchingScores.length;\n      while (\n        currentPosition < scoresLength &&\n        viewportData.find(a => a.imageId === currentMatch.imageId)\n      ) {\n        currentMatch = details.matchingScores[currentPosition];\n        currentPosition++;\n      }\n\n      if (currentMatch && currentMatch.imageId) {\n        currentViewportData.StudyInstanceUID = currentMatch.StudyInstanceUID;\n        currentViewportData.SeriesInstanceUID = currentMatch.SeriesInstanceUID;\n        currentViewportData.SOPInstanceUID = currentMatch.SOPInstanceUID;\n        currentViewportData.currentImageIdIndex =\n          currentMatch.currentImageIdIndex;\n        currentViewportData.displaySetInstanceUID =\n          currentMatch.displaySetInstanceUID;\n        currentViewportData.imageId = currentMatch.imageId;\n      }\n\n      // @TODO Why should we throw an exception when a best match is not found? This was aborting the whole process.\n      // if (!currentViewportData.displaySetInstanceUID) {\n      //     throw new OHIFError('ProtocolEngine::updateViewports No matching display set found?');\n      // }\n\n      viewportData.push(currentViewportData);\n    });\n\n    this.setLayout(layoutProps.Rows, layoutProps.Columns);\n\n    if (typeof this.options.setViewportSpecificData !== 'function') {\n      log.error(\n        'Hanging Protocol Engine setViewportSpecificData callback is not defined'\n      );\n      return;\n    }\n\n    // If viewportIndex is defined, then update only that viewport\n    if (viewportIndex !== undefined && viewportData[viewportIndex]) {\n      this.options.setViewportSpecificData(\n        viewportIndex,\n        viewportData[viewportIndex]\n      );\n      return;\n    }\n\n    // Update all viewports\n    viewportData.forEach(viewportSpecificData => {\n      this.options.setViewportSpecificData(\n        viewportSpecificData.viewportIndex,\n        viewportSpecificData\n      );\n    });\n  }\n\n  /**\n   * Sets the current Hanging Protocol to the specified Protocol\n   * An optional argument can also be used to prevent the updating of the Viewports\n   *\n   * @param newProtocol\n   * @param updateViewports\n   */\n  setHangingProtocol(newProtocol, updateViewports = true) {\n    log.trace('ProtocolEngine::setHangingProtocol newProtocol', newProtocol);\n    log.trace(\n      `ProtocolEngine::setHangingProtocol updateViewports = ${updateViewports}`\n    );\n\n    // Reset the array of newStageIds\n    this.newStageIds = [];\n\n    if (Protocol.prototype.isPrototypeOf(newProtocol)) {\n      this.protocol = newProtocol;\n    } else {\n      this.protocol = new Protocol();\n      this.protocol.fromObject(newProtocol);\n    }\n\n    this.stage = 0;\n\n    // Update viewports by default\n    if (updateViewports) {\n      this.updateViewports();\n    }\n  }\n\n  /**\n   * Check if the next stage is available\n   * @return {Boolean} True if next stage is available or false otherwise\n   */\n  isNextStageAvailable() {\n    const numberOfStages = this.getNumProtocolStages();\n\n    return this.stage + 1 < numberOfStages;\n  }\n\n  /**\n   * Check if the previous stage is available\n   * @return {Boolean} True if previous stage is available or false otherwise\n   */\n  isPreviousStageAvailable() {\n    return this.stage - 1 >= 0;\n  }\n\n  /**\n   * Changes the current stage to a new stage index in the display set sequence.\n   * It checks if the next stage exists.\n   *\n   * @param {Integer} stageAction An integer value specifying wheater next (1) or previous (-1) stage\n   * @return {Boolean} True if new stage has set or false, otherwise\n   */\n  setCurrentProtocolStage(stageAction) {\n    // Check if previous or next stage is available\n    if (stageAction === -1 && !this.isPreviousStageAvailable()) {\n      return false;\n    } else if (stageAction === 1 && !this.isNextStageAvailable()) {\n      return false;\n    }\n\n    // Sets the new stage\n    this.stage += stageAction;\n\n    // Log the new stage\n    log.trace(`ProtocolEngine::setCurrentProtocolStage stage = ${this.stage}`);\n\n    // Since stage has changed, we need to update the viewports\n    // and redo matchings\n    this.updateViewports();\n\n    // Everything went well\n    return true;\n  }\n\n  /**\n   * Retrieves the number of Stages in the current Protocol or\n   * undefined if no protocol or stages are set\n   */\n  getNumProtocolStages() {\n    if (\n      !this.protocol ||\n      !this.protocol.stages ||\n      !this.protocol.stages.length\n    ) {\n      return;\n    }\n\n    return this.protocol.stages.length;\n  }\n\n  /**\n   * Switches to the next protocol stage in the display set sequence\n   */\n  nextProtocolStage() {\n    log.trace('ProtocolEngine::nextProtocolStage');\n\n    if (!this.setCurrentProtocolStage(1)) {\n      log.trace('ProtocolEngine::nextProtocolStage failed');\n    }\n  }\n\n  /**\n   * Switches to the previous protocol stage in the display set sequence\n   */\n  previousProtocolStage() {\n    log.trace('ProtocolEngine::previousProtocolStage');\n\n    if (!this.setCurrentProtocolStage(-1)) {\n      log.trace('ProtocolEngine::previousProtocolStage failed');\n    }\n  }\n}\n","import Protocol from '../classes/Protocol';\nimport ViewportStructure from '../classes/ViewportStructure';\nimport Viewport from '../classes/Viewport';\nimport Stage from '../classes/Stage';\nimport {\n  ImageMatchingRule,\n  ProtocolMatchingRule,\n  SeriesMatchingRule,\n} from '../classes';\n\nfunction getMRTwoByTwoTest() {\n  var proto = new Protocol('MR_TwoByTwo');\n  proto.id = 'MR_TwoByTwo';\n  proto.locked = true;\n  // Use http://localhost:3000/viewer/1.2.840.113619.2.5.1762583153.215519.978957063.78\n\n  var StudyInstanceUID = new ProtocolMatchingRule(\n    'StudyInstanceUID',\n    {\n      equals: {\n        value: '1.2.840.113619.2.5.1762583153.215519.978957063.78',\n      },\n    },\n    true\n  );\n\n  proto.addProtocolMatchingRule(StudyInstanceUID);\n\n  var oneByTwo = new ViewportStructure('grid', {\n    Rows: 1,\n    Columns: 2,\n  });\n\n  // Stage 1\n  var left = new Viewport();\n  var right = new Viewport();\n\n  var firstSeries = new SeriesMatchingRule('SeriesNumber', {\n    equals: {\n      value: 1,\n    },\n  });\n\n  var secondSeries = new SeriesMatchingRule('SeriesNumber', {\n    equals: {\n      value: 2,\n    },\n  });\n\n  var thirdImage = new ImageMatchingRule('InstanceNumber', {\n    equals: {\n      value: 3,\n    },\n  });\n\n  left.seriesMatchingRules.push(firstSeries);\n  left.imageMatchingRules.push(thirdImage);\n\n  right.seriesMatchingRules.push(secondSeries);\n  right.imageMatchingRules.push(thirdImage);\n\n  var first = new Stage(oneByTwo, 'oneByTwo');\n  first.viewports.push(left);\n  first.viewports.push(right);\n\n  proto.stages.push(first);\n\n  // Stage 2\n  var twoByOne = new ViewportStructure('grid', {\n    Rows: 2,\n    Columns: 1,\n  });\n  var left2 = new Viewport();\n  var right2 = new Viewport();\n\n  var fourthSeries = new SeriesMatchingRule('SeriesNumber', {\n    equals: {\n      value: 4,\n    },\n  });\n\n  var fifthSeries = new SeriesMatchingRule('SeriesNumber', {\n    equals: {\n      value: 5,\n    },\n  });\n\n  left2.seriesMatchingRules.push(fourthSeries);\n  left2.imageMatchingRules.push(thirdImage);\n  right2.seriesMatchingRules.push(fifthSeries);\n  right2.imageMatchingRules.push(thirdImage);\n\n  var second = new Stage(twoByOne, 'twoByOne');\n  second.viewports.push(left2);\n  second.viewports.push(right2);\n\n  proto.stages.push(second);\n\n  return proto;\n}\n\nfunction getDemoProtocols() {\n  const demoProtocols = [];\n\n  /**\n   * Demo #1\n   */\n  demoProtocols.push({\n    id: 'demoProtocol1',\n    locked: false,\n    name: 'DFCI-CT-CHEST-COMPARE',\n    createdDate: '2017-02-14T16:07:09.033Z',\n    modifiedDate: '2017-02-14T16:18:43.930Z',\n    availableTo: {},\n    editableBy: {},\n    protocolMatchingRules: [\n      {\n        id: '7tmuq7KzDMCWFeapc',\n        weight: 2,\n        required: false,\n        attribute: 'x00081030',\n        constraint: {\n          contains: {\n            value: 'DFCI CT CHEST',\n          },\n        },\n      },\n    ],\n    stages: [\n      {\n        id: 'v5PfGt9F6mffZPif5',\n        name: 'oneByOne',\n        viewportStructure: {\n          type: 'grid',\n          properties: {\n            Rows: 1,\n            Columns: 2,\n          },\n          layoutTemplateName: 'gridLayout',\n        },\n        viewports: [\n          {\n            viewportSettings: {},\n            imageMatchingRules: [],\n            seriesMatchingRules: [\n              {\n                id: 'mXnsCcNzZL56z7mTZ',\n                weight: 1,\n                required: false,\n                attribute: 'x0008103e',\n                constraint: {\n                  contains: {\n                    value: '2.0',\n                  },\n                },\n              },\n            ],\n            studyMatchingRules: [],\n          },\n          {\n            viewportSettings: {},\n            imageMatchingRules: [],\n            seriesMatchingRules: [\n              {\n                id: 'ygz4nb28iJZcJhnYa',\n                weight: 1,\n                required: false,\n                attribute: 'x0008103e',\n                constraint: {\n                  contains: {\n                    value: '2.0',\n                  },\n                },\n              },\n            ],\n            studyMatchingRules: [\n              {\n                id: 'uDoEgLTvnXTByWnPz',\n                weight: 1,\n                required: false,\n                attribute: 'abstractPriorValue',\n                constraint: {\n                  equals: {\n                    value: 1,\n                  },\n                },\n              },\n            ],\n          },\n        ],\n        createdDate: '2017-02-14T16:07:09.033Z',\n      },\n      {\n        id: 'XTzu8HB3feep3HYKs',\n        viewportStructure: {\n          type: 'grid',\n          properties: {\n            Rows: 1,\n            Columns: 2,\n          },\n          layoutTemplateName: 'gridLayout',\n        },\n        viewports: [\n          {\n            viewportSettings: {},\n            imageMatchingRules: [],\n            seriesMatchingRules: [\n              {\n                id: 'mXnsCcNzZL56z7mTZ',\n                weight: 1,\n                required: false,\n                attribute: 'x0008103e',\n                constraint: {\n                  contains: {\n                    value: '3.0',\n                  },\n                },\n              },\n            ],\n            studyMatchingRules: [],\n          },\n          {\n            viewportSettings: {},\n            imageMatchingRules: [],\n            seriesMatchingRules: [\n              {\n                id: 'ygz4nb28iJZcJhnYa',\n                weight: 1,\n                required: false,\n                attribute: 'x0008103e',\n                constraint: {\n                  contains: {\n                    value: '3.0',\n                  },\n                },\n              },\n            ],\n            studyMatchingRules: [\n              {\n                id: 'uDoEgLTvnXTByWnPz',\n                weight: 1,\n                required: false,\n                attribute: 'abstractPriorValue',\n                constraint: {\n                  equals: {\n                    value: 1,\n                  },\n                },\n              },\n            ],\n          },\n        ],\n        createdDate: '2017-02-14T16:07:12.085Z',\n      },\n      {\n        id: '3yPYNaeFtr76Qz3jq',\n        viewportStructure: {\n          type: 'grid',\n          properties: {\n            Rows: 2,\n            Columns: 2,\n          },\n          layoutTemplateName: 'gridLayout',\n        },\n        viewports: [\n          {\n            viewportSettings: {},\n            imageMatchingRules: [],\n            seriesMatchingRules: [\n              {\n                id: 'mXnsCcNzZL56z7mTZ',\n                weight: 1,\n                required: false,\n                attribute: 'x0008103e',\n                constraint: {\n                  contains: {\n                    value: 'Body 3.0',\n                  },\n                },\n              },\n            ],\n            studyMatchingRules: [],\n          },\n          {\n            viewportSettings: {\n              wlPreset: 'Lung',\n            },\n            imageMatchingRules: [],\n            seriesMatchingRules: [\n              {\n                id: 'ygz4nb28iJZcJhnYa',\n                weight: 1,\n                required: false,\n                attribute: 'x0008103e',\n                constraint: {\n                  contains: {\n                    value: 'Lung 3.0',\n                  },\n                },\n              },\n            ],\n            studyMatchingRules: [],\n          },\n          {\n            viewportSettings: {},\n            imageMatchingRules: [],\n            seriesMatchingRules: [\n              {\n                id: '6vdBRZYnqmmosipph',\n                weight: 1,\n                required: false,\n                attribute: 'x0008103e',\n                constraint: {\n                  contains: {\n                    value: 'Body 3.0',\n                  },\n                },\n              },\n            ],\n            studyMatchingRules: [\n              {\n                id: 'SxfTyhGcMhr56PtPM',\n                weight: 1,\n                required: false,\n                attribute: 'abstractPriorValue',\n                constraint: {\n                  equals: {\n                    value: 1,\n                  },\n                },\n              },\n            ],\n          },\n          {\n            viewportSettings: {\n              wlPreset: 'Lung',\n            },\n            imageMatchingRules: [],\n            seriesMatchingRules: [\n              {\n                id: 'FTAyChZCPW68yJjXD',\n                weight: 1,\n                required: false,\n                attribute: 'x0008103e',\n                constraint: {\n                  contains: {\n                    value: 'Lung 3.0',\n                  },\n                },\n              },\n            ],\n            studyMatchingRules: [\n              {\n                id: 'gMJjfrbsqYNbErPx5',\n                weight: 1,\n                required: false,\n                attribute: 'abstractPriorValue',\n                constraint: {\n                  equals: {\n                    value: 1,\n                  },\n                },\n              },\n            ],\n          },\n        ],\n        createdDate: '2017-02-14T16:11:40.489Z',\n      },\n    ],\n    numberOfPriorsReferenced: 4,\n  });\n\n  /**\n   * Demo #2\n   */\n\n  demoProtocols.push({\n    id: 'demoProtocol2',\n    locked: false,\n    name: 'DFCI-CT-CHEST-COMPARE-2',\n    createdDate: '2017-02-14T16:07:09.033Z',\n    modifiedDate: '2017-02-14T16:18:43.930Z',\n    availableTo: {},\n    editableBy: {},\n    protocolMatchingRules: [\n      {\n        id: '7tmuq7KzDMCWFeapc',\n        weight: 2,\n        required: false,\n        attribute: 'x00081030',\n        constraint: {\n          contains: {\n            value: 'DFCI CT CHEST',\n          },\n        },\n      },\n    ],\n    stages: [\n      {\n        id: 'v5PfGt9F6mffZPif5',\n        name: 'oneByOne',\n        viewportStructure: {\n          type: 'grid',\n          properties: {\n            Rows: 1,\n            Columns: 2,\n          },\n          layoutTemplateName: 'gridLayout',\n        },\n        viewports: [\n          {\n            viewportSettings: {},\n            imageMatchingRules: [],\n            seriesMatchingRules: [\n              {\n                id: 'mXnsCcNzZL56z7mac',\n                weight: 1,\n                required: false,\n                attribute: 'x0008103e',\n                constraint: {\n                  contains: {\n                    value: '2.0',\n                  },\n                },\n              },\n            ],\n            studyMatchingRules: [],\n          },\n          {\n            viewportSettings: {},\n            imageMatchingRules: [],\n            seriesMatchingRules: [\n              {\n                id: 'ygz4nb28iJZcJhnYc',\n                weight: 1,\n                required: false,\n                attribute: 'x0008103e',\n                constraint: {\n                  contains: {\n                    value: '2.0',\n                  },\n                },\n              },\n            ],\n            studyMatchingRules: [\n              {\n                id: 'uDoEgLTvnXTByWnPt',\n                weight: 1,\n                required: false,\n                attribute: 'abstractPriorValue',\n                constraint: {\n                  equals: {\n                    value: 1,\n                  },\n                },\n              },\n            ],\n          },\n        ],\n        createdDate: '2017-02-14T16:07:09.033Z',\n      },\n      {\n        id: 'XTzu8HB3feep3HYKs',\n        viewportStructure: {\n          type: 'grid',\n          properties: {\n            Rows: 1,\n            Columns: 2,\n          },\n          layoutTemplateName: 'gridLayout',\n        },\n        viewports: [\n          {\n            viewportSettings: {},\n            imageMatchingRules: [],\n            seriesMatchingRules: [\n              {\n                id: 'mXnsCcNzZL56z7mTZ',\n                weight: 1,\n                required: false,\n                attribute: 'x0008103e',\n                constraint: {\n                  contains: {\n                    value: 'Body 3.0',\n                  },\n                },\n              },\n              {\n                id: 'mYnsCcNwZL56z7mTZ',\n                weight: 1,\n                required: false,\n                attribute: 'x0008103e',\n                constraint: {\n                  contains: {\n                    value: 'Body 5.0',\n                  },\n                },\n              },\n            ],\n            studyMatchingRules: [],\n          },\n          {\n            viewportSettings: {},\n            imageMatchingRules: [],\n            seriesMatchingRules: [\n              {\n                id: 'ygz4nb28iJZcJhnYa',\n                weight: 1,\n                required: false,\n                attribute: 'x0008103e',\n                constraint: {\n                  contains: {\n                    value: 'Body 3.0',\n                  },\n                },\n              },\n              {\n                id: 'ygz4nb29iJZcJhnYa',\n                weight: 1,\n                required: false,\n                attribute: 'x0008103e',\n                constraint: {\n                  contains: {\n                    value: 'Body 5.0',\n                  },\n                },\n              },\n            ],\n            studyMatchingRules: [\n              {\n                id: 'uDoEgLTvnXTByWnPz',\n                weight: 1,\n                required: false,\n                attribute: 'abstractPriorValue',\n                constraint: {\n                  equals: {\n                    value: 1,\n                  },\n                },\n              },\n            ],\n          },\n        ],\n        createdDate: '2017-02-14T16:07:12.085Z',\n      },\n      {\n        id: '3yPYNaeFtr76Qz3jq',\n        viewportStructure: {\n          type: 'grid',\n          properties: {\n            Rows: 2,\n            Columns: 2,\n          },\n          layoutTemplateName: 'gridLayout',\n        },\n        viewports: [\n          {\n            viewportSettings: {},\n            imageMatchingRules: [],\n            seriesMatchingRules: [\n              {\n                id: 'mXnsCcNzZL56z7mtr',\n                weight: 1,\n                required: false,\n                attribute: 'x0008103e',\n                constraint: {\n                  contains: {\n                    value: 'Body 3.0',\n                  },\n                },\n              },\n              {\n                id: 'jXnsCcNzZL56z7mTZ',\n                weight: 1,\n                required: false,\n                attribute: 'x0008103e',\n                constraint: {\n                  contains: {\n                    value: 'Body 5.0',\n                  },\n                },\n              },\n            ],\n            studyMatchingRules: [],\n          },\n          {\n            viewportSettings: {\n              wlPreset: 'Lung',\n            },\n            imageMatchingRules: [],\n            seriesMatchingRules: [\n              {\n                id: 'ygz4nb28iJZcJhnYb',\n                weight: 2,\n                required: false,\n                attribute: 'x0008103e',\n                constraint: {\n                  contains: {\n                    value: 'Lung 3.0',\n                  },\n                },\n              },\n              {\n                id: 'ycz4nb28iJZcJhnYa',\n                weight: 1,\n                required: false,\n                attribute: 'x0008103e',\n                constraint: {\n                  contains: {\n                    value: 'Lung 5.0',\n                  },\n                },\n              },\n            ],\n            studyMatchingRules: [],\n          },\n          {\n            viewportSettings: {},\n            imageMatchingRules: [],\n            seriesMatchingRules: [\n              {\n                id: '6vdBRZYnqmmosipph',\n                weight: 2,\n                required: false,\n                attribute: 'x0008103e',\n                constraint: {\n                  contains: {\n                    value: 'Body 3.0',\n                  },\n                },\n              },\n              {\n                id: '6vdBRFYnqmmosipph',\n                weight: 1,\n                required: false,\n                attribute: 'x0008103e',\n                constraint: {\n                  contains: {\n                    value: 'Body 5.0',\n                  },\n                },\n              },\n            ],\n            studyMatchingRules: [\n              {\n                id: 'SxfTyhGcMhr56PtPM',\n                weight: 1,\n                required: false,\n                attribute: 'abstractPriorValue',\n                constraint: {\n                  equals: {\n                    value: 1,\n                  },\n                },\n              },\n            ],\n          },\n          {\n            viewportSettings: {\n              wlPreset: 'Lung',\n            },\n            imageMatchingRules: [],\n            seriesMatchingRules: [\n              {\n                id: 'FTAyChZCPW68yJjXD',\n                weight: 2,\n                required: false,\n                attribute: 'x0008103e',\n                constraint: {\n                  contains: {\n                    value: 'Lung 3.0',\n                  },\n                },\n              },\n              {\n                id: 'DTAyChZCPW68yJjXD',\n                weight: 1,\n                required: false,\n                attribute: 'x0008103e',\n                constraint: {\n                  contains: {\n                    value: 'Lung 5.0',\n                  },\n                },\n              },\n            ],\n            studyMatchingRules: [\n              {\n                id: 'gMJjfrbsqYNbErPx5',\n                weight: 1,\n                required: false,\n                attribute: 'abstractPriorValue',\n                constraint: {\n                  equals: {\n                    value: 1,\n                  },\n                },\n              },\n            ],\n          },\n        ],\n        createdDate: '2017-02-14T16:11:40.489Z',\n      },\n    ],\n    numberOfPriorsReferenced: 1,\n  });\n\n  /**\n   * Demo: screenCT\n   */\n\n  demoProtocols.push({\n    id: 'screenCT',\n    locked: false,\n    name: 'DFCI-CT-CHEST-SCREEN',\n    createdDate: '2017-02-14T16:07:09.033Z',\n    modifiedDate: '2017-02-14T16:18:43.930Z',\n    availableTo: {},\n    editableBy: {},\n    protocolMatchingRules: [\n      {\n        id: '7tmuq7KzDMCWFeapc',\n        weight: 2,\n        required: false,\n        attribute: 'x00081030',\n        constraint: {\n          contains: {\n            value: 'DFCI CT CHEST',\n          },\n        },\n      },\n    ],\n    stages: [\n      {\n        id: 'v5PfGt9F6mffZPif5',\n        name: 'oneByOne',\n        viewportStructure: {\n          type: 'grid',\n          properties: {\n            Rows: 1,\n            Columns: 1,\n          },\n          layoutTemplateName: 'gridLayout',\n        },\n        viewports: [\n          {\n            viewportSettings: {},\n            imageMatchingRules: [],\n            seriesMatchingRules: [\n              {\n                id: 'mXnsCcNzZL55z7mTZ',\n                weight: 1,\n                required: false,\n                attribute: 'x0008103e',\n                constraint: {\n                  contains: {\n                    value: '2.0',\n                  },\n                },\n              },\n            ],\n            studyMatchingRules: [],\n          },\n        ],\n        createdDate: '2017-02-14T16:07:09.033Z',\n      },\n      {\n        id: 'v5PfGt9F4mffZPif5',\n        name: 'oneByOne',\n        viewportStructure: {\n          type: 'grid',\n          properties: {\n            Rows: 2,\n            Columns: 2,\n          },\n          layoutTemplateName: 'gridLayout',\n        },\n        viewports: [\n          {\n            viewportSettings: {},\n            imageMatchingRules: [],\n            seriesMatchingRules: [\n              {\n                id: 'mXnsCcNzZL56z7nTZ',\n                weight: 1,\n                required: false,\n                attribute: 'x0008103e',\n                constraint: {\n                  contains: {\n                    value: 'Body 5.0',\n                  },\n                },\n              },\n              {\n                id: 'mXnsCcNzZL56z7rTZ',\n                weight: 1,\n                required: false,\n                attribute: 'x0008103e',\n                constraint: {\n                  contains: {\n                    value: 'Body 3.0',\n                  },\n                },\n              },\n            ],\n            studyMatchingRules: [],\n          },\n          {\n            viewportSettings: {},\n            imageMatchingRules: [],\n            seriesMatchingRules: [\n              {\n                id: 'mXnsCcNzZL56r7mTZ',\n                weight: 1,\n                required: false,\n                attribute: 'x0008103e',\n                constraint: {\n                  contains: {\n                    value: 'Lung 5.0',\n                  },\n                },\n              },\n              {\n                id: 'mXnsCcNzZL56a7mTZ',\n                weight: 1,\n                required: false,\n                attribute: 'x0008103e',\n                constraint: {\n                  contains: {\n                    value: 'Lung 3.0',\n                  },\n                },\n              },\n            ],\n            studyMatchingRules: [],\n          },\n          {\n            viewportSettings: {},\n            imageMatchingRules: [],\n            seriesMatchingRules: [\n              {\n                id: 'mXnsCcRzZL56z7mTZ',\n                weight: 1,\n                required: false,\n                attribute: 'x0008103e',\n                constraint: {\n                  contains: {\n                    value: 'Body 4.0',\n                  },\n                },\n              },\n              {\n                id: 'mXnsCcNzTL56z7mTZ',\n                weight: 1,\n                required: false,\n                attribute: 'x0008103e',\n                constraint: {\n                  contains: {\n                    value: 'Coronal',\n                  },\n                },\n              },\n            ],\n            studyMatchingRules: [],\n          },\n          {\n            viewportSettings: {},\n            imageMatchingRules: [],\n            seriesMatchingRules: [\n              {\n                id: 'mXnsCcMzZL56z7mTZ',\n                weight: 1,\n                required: false,\n                attribute: 'x0008103e',\n                constraint: {\n                  contains: {\n                    value: 'Body 4.0',\n                  },\n                },\n              },\n              {\n                id: 'mXnsCcAzZL56z7mTZ',\n                weight: 1,\n                required: false,\n                attribute: 'x0008103e',\n                constraint: {\n                  contains: {\n                    value: 'Sagittal',\n                  },\n                },\n              },\n            ],\n            studyMatchingRules: [],\n          },\n        ],\n        createdDate: '2017-02-14T16:07:09.033Z',\n      },\n    ],\n    numberOfPriorsReferenced: 0,\n  });\n\n  /**\n   * Demo: PETCTSCREEN\n   */\n\n  demoProtocols.push({\n    id: 'PETCTSCREEN',\n    locked: false,\n    name: 'PETCT-SCREEN',\n    createdDate: '2017-02-14T16:07:09.033Z',\n    modifiedDate: '2017-02-14T16:18:43.930Z',\n    availableTo: {},\n    editableBy: {},\n    protocolMatchingRules: [\n      {\n        id: '7tmuqgKzDMCWFeapc',\n        weight: 5,\n        required: false,\n        attribute: 'x00081030',\n        constraint: {\n          contains: {\n            value: 'PETCT',\n          },\n        },\n      },\n    ],\n    stages: [\n      {\n        id: 'v5PfGt9F6mFgZPif5',\n        name: 'oneByOne',\n        viewportStructure: {\n          type: 'grid',\n          properties: {\n            Rows: 1,\n            Columns: 2,\n          },\n          layoutTemplateName: 'gridLayout',\n        },\n        viewports: [\n          {\n            viewportSettings: {},\n            imageMatchingRules: [],\n            seriesMatchingRules: [\n              {\n                id: 'mXnsCcAzZL56z7mTZ',\n                weight: 1,\n                required: false,\n                attribute: 'x0008103e',\n                constraint: {\n                  contains: {\n                    value: 'Topogram',\n                  },\n                },\n              },\n            ],\n            studyMatchingRules: [],\n          },\n          {\n            viewportSettings: {},\n            imageMatchingRules: [],\n            seriesMatchingRules: [\n              {\n                id: 'mXnsCcNzZR56z7mTZ',\n                weight: 1,\n                required: false,\n                attribute: 'x0008103e',\n                constraint: {\n                  contains: {\n                    value: 'Topogram',\n                  },\n                },\n              },\n              {\n                id: 'mRnsCcNzZL56z7mTZ',\n                weight: 1,\n                required: false,\n                attribute: 'x00200011',\n                constraint: {\n                  numericality: {\n                    greaterThanOrEqualTo: 2,\n                  },\n                },\n              },\n            ],\n            studyMatchingRules: [],\n          },\n        ],\n        createdDate: '2017-02-14T16:07:09.033Z',\n      },\n      {\n        id: 'v5PfGt9F6mFgZPif5',\n        name: 'oneByOne',\n        viewportStructure: {\n          type: 'grid',\n          properties: {\n            Rows: 1,\n            Columns: 2,\n          },\n          layoutTemplateName: 'gridLayout',\n        },\n        viewports: [\n          {\n            viewportSettings: {},\n            imageMatchingRules: [],\n            seriesMatchingRules: [\n              {\n                id: 'mXnsGcNzZL56z7mTZ',\n                weight: 1,\n                required: false,\n                attribute: 'x0008103e',\n                constraint: {\n                  contains: {\n                    value: 'PET WB Corrected',\n                  },\n                },\n              },\n            ],\n            studyMatchingRules: [],\n          },\n          {\n            viewportSettings: {},\n            imageMatchingRules: [],\n            seriesMatchingRules: [\n              {\n                id: 'mXnsHcNzZL56z7mTZ',\n                weight: 1,\n                required: false,\n                attribute: 'x0008103e',\n                constraint: {\n                  contains: {\n                    value: 'CT WB',\n                  },\n                },\n              },\n            ],\n            studyMatchingRules: [],\n          },\n        ],\n        createdDate: '2017-02-14T16:07:09.033Z',\n      },\n      {\n        id: 'v5PfGt9F6mFgZPif5',\n        name: 'oneByOne',\n        viewportStructure: {\n          type: 'grid',\n          properties: {\n            Rows: 1,\n            Columns: 2,\n          },\n          layoutTemplateName: 'gridLayout',\n        },\n        viewports: [\n          {\n            viewportSettings: {\n              invert: 'YES',\n            },\n            imageMatchingRules: [],\n            seriesMatchingRules: [\n              {\n                id: 'mXneCcNzZL56z7mTZ',\n                weight: 1,\n                required: false,\n                attribute: 'x0008103e',\n                constraint: {\n                  contains: {\n                    value: 'PET WB Uncorrected',\n                  },\n                },\n              },\n            ],\n            studyMatchingRules: [],\n          },\n          {\n            viewportSettings: {},\n            imageMatchingRules: [],\n            seriesMatchingRules: [\n              {\n                id: 'mXnsCuNzZL56z7mTZ',\n                weight: 1,\n                required: false,\n                attribute: 'x0008103e',\n                constraint: {\n                  contains: {\n                    value: 'CT Nk',\n                  },\n                },\n              },\n            ],\n            studyMatchingRules: [],\n          },\n        ],\n        createdDate: '2017-02-14T16:07:09.033Z',\n      },\n    ],\n    numberOfPriorsReferenced: 0,\n  });\n\n  /**\n   * Demo: PETCTCOMPARE\n   */\n\n  demoProtocols.push({\n    id: 'PETCTCOMPARE',\n    locked: false,\n    name: 'PETCT-COMPARE',\n    createdDate: '2017-02-14T16:07:09.033Z',\n    modifiedDate: '2017-02-14T16:18:43.930Z',\n    availableTo: {},\n    editableBy: {},\n    protocolMatchingRules: [\n      {\n        id: '7tmuqgKzDMCWFeapc',\n        weight: 5,\n        required: false,\n        attribute: 'x00081030',\n        constraint: {\n          contains: {\n            value: 'PETCT',\n          },\n        },\n      },\n    ],\n    stages: [\n      {\n        id: 'v5PfGt9F6mFgZPif5',\n        name: 'oneByOne',\n        viewportStructure: {\n          type: 'grid',\n          properties: {\n            Rows: 1,\n            Columns: 2,\n          },\n          layoutTemplateName: 'gridLayout',\n        },\n        viewports: [\n          {\n            viewportSettings: {},\n            imageMatchingRules: [],\n            seriesMatchingRules: [\n              {\n                id: 'mXnsCcNzZL59z7mTZ',\n                weight: 1,\n                required: false,\n                attribute: 'x0008103e',\n                constraint: {\n                  contains: {\n                    value: 'Topogram',\n                  },\n                },\n              },\n            ],\n            studyMatchingRules: [],\n          },\n          {\n            viewportSettings: {},\n            imageMatchingRules: [],\n            seriesMatchingRules: [\n              {\n                id: 'mXnsCcNzZL56z7lTZ',\n                weight: 1,\n                required: false,\n                attribute: 'x0008103e',\n                constraint: {\n                  contains: {\n                    value: 'Topogram',\n                  },\n                },\n              },\n            ],\n            studyMatchingRules: [\n              {\n                id: 'uDoEgLTbnXTByWnPz',\n                weight: 1,\n                required: false,\n                attribute: 'abstractPriorValue',\n                constraint: {\n                  equals: {\n                    value: 1,\n                  },\n                },\n              },\n            ],\n          },\n        ],\n        createdDate: '2017-02-14T16:07:09.033Z',\n      },\n      {\n        id: 'v5PfGt9F6mFgZPif5',\n        name: 'oneByOne',\n        viewportStructure: {\n          type: 'grid',\n          properties: {\n            Rows: 1,\n            Columns: 2,\n          },\n          layoutTemplateName: 'gridLayout',\n        },\n        viewports: [\n          {\n            viewportSettings: {},\n            imageMatchingRules: [],\n            seriesMatchingRules: [\n              {\n                id: 'mXnsCcNjZL56z7mTZ',\n                weight: 1,\n                required: false,\n                attribute: 'x0008103e',\n                constraint: {\n                  contains: {\n                    value: 'Topogram',\n                  },\n                },\n              },\n              {\n                id: 'mXnsCcNzZL56z7gTZ',\n                weight: 1,\n                required: false,\n                attribute: 'x00200011',\n                constraint: {\n                  numericality: {\n                    greaterThanOrEqualTo: 2,\n                  },\n                },\n              },\n            ],\n            studyMatchingRules: [],\n          },\n          {\n            viewportSettings: {},\n            imageMatchingRules: [],\n            seriesMatchingRules: [\n              {\n                id: 'mXnsCcCzZL56z7mTZ',\n                weight: 1,\n                required: false,\n                attribute: 'x0008103e',\n                constraint: {\n                  contains: {\n                    value: 'Topogram',\n                  },\n                },\n              },\n              {\n                id: 'mXnsCcNzZL56z7mTZ',\n                weight: 1,\n                required: false,\n                attribute: 'x00200011',\n                constraint: {\n                  numericality: {\n                    greaterThanOrEqualTo: 2,\n                  },\n                },\n              },\n            ],\n            studyMatchingRules: [\n              {\n                id: 'uDoEgLTvn1TByWnPz',\n                weight: 1,\n                required: false,\n                attribute: 'abstractPriorValue',\n                constraint: {\n                  equals: {\n                    value: 1,\n                  },\n                },\n              },\n            ],\n          },\n        ],\n        createdDate: '2017-02-14T16:07:09.033Z',\n      },\n      {\n        id: 'v5PfGt9F6mFgZPif5',\n        name: 'oneByOne',\n        viewportStructure: {\n          type: 'grid',\n          properties: {\n            Rows: 2,\n            Columns: 2,\n          },\n          layoutTemplateName: 'gridLayout',\n        },\n        viewports: [\n          {\n            viewportSettings: {},\n            imageMatchingRules: [],\n            seriesMatchingRules: [\n              {\n                id: 'mXnsCcNzZL26z7mTZ',\n                weight: 1,\n                required: false,\n                attribute: 'x0008103e',\n                constraint: {\n                  contains: {\n                    value: 'PET WB Corrected',\n                  },\n                },\n              },\n            ],\n            studyMatchingRules: [],\n          },\n          {\n            viewportSettings: {},\n            imageMatchingRules: [],\n            seriesMatchingRules: [\n              {\n                id: 'mXnsCcNzZL46z7mTZ',\n                weight: 1,\n                required: false,\n                attribute: 'x0008103e',\n                constraint: {\n                  contains: {\n                    value: 'CT WB',\n                  },\n                },\n              },\n            ],\n            studyMatchingRules: [],\n          },\n          {\n            viewportSettings: {},\n            imageMatchingRules: [],\n            seriesMatchingRules: [\n              {\n                id: 'mXnsCcNzZL57z7mTZ',\n                weight: 1,\n                required: false,\n                attribute: 'x0008103e',\n                constraint: {\n                  contains: {\n                    value: 'PET WB Corrected',\n                  },\n                },\n              },\n            ],\n            studyMatchingRules: [\n              {\n                id: 'uDoEgLTvnYTByWnPz',\n                weight: 1,\n                required: false,\n                attribute: 'abstractPriorValue',\n                constraint: {\n                  equals: {\n                    value: 1,\n                  },\n                },\n              },\n            ],\n          },\n          {\n            viewportSettings: {},\n            imageMatchingRules: [],\n            seriesMatchingRules: [\n              {\n                id: 'mXnsCcNzZQ56z7mTZ',\n                weight: 1,\n                required: false,\n                attribute: 'x0008103e',\n                constraint: {\n                  contains: {\n                    value: 'CT WB',\n                  },\n                },\n              },\n            ],\n            studyMatchingRules: [\n              {\n                id: 'uDoEgLTvnKTByWnPz',\n                weight: 1,\n                required: false,\n                attribute: 'abstractPriorValue',\n                constraint: {\n                  equals: {\n                    value: 1,\n                  },\n                },\n              },\n            ],\n          },\n        ],\n        createdDate: '2017-02-14T16:07:09.033Z',\n      },\n      {\n        id: 'v5PfGt9F6mFgZPif5',\n        name: 'oneByOne',\n        viewportStructure: {\n          type: 'grid',\n          properties: {\n            Rows: 2,\n            Columns: 2,\n          },\n          layoutTemplateName: 'gridLayout',\n        },\n        viewports: [\n          {\n            viewportSettings: {\n              invert: 'YES',\n            },\n            imageMatchingRules: [],\n            seriesMatchingRules: [\n              {\n                id: 'mXnsCcNzZL56z7nTZ',\n                weight: 1,\n                required: false,\n                attribute: 'x0008103e',\n                constraint: {\n                  contains: {\n                    value: 'PET WB Uncorrected',\n                  },\n                },\n              },\n            ],\n            studyMatchingRules: [],\n          },\n          {\n            viewportSettings: {},\n            imageMatchingRules: [],\n            seriesMatchingRules: [\n              {\n                id: 'mXnsCcNxZL56z7mTZ',\n                weight: 1,\n                required: false,\n                attribute: 'x0008103e',\n                constraint: {\n                  contains: {\n                    value: 'CT Nk',\n                  },\n                },\n              },\n            ],\n            studyMatchingRules: [],\n          },\n          {\n            viewportSettings: {\n              invert: 'YES',\n            },\n            imageMatchingRules: [],\n            seriesMatchingRules: [\n              {\n                id: 'mXnsCcNzZA56z7mTZ',\n                weight: 1,\n                required: false,\n                attribute: 'x0008103e',\n                constraint: {\n                  contains: {\n                    value: 'PET WB Uncorrected',\n                  },\n                },\n              },\n            ],\n            studyMatchingRules: [\n              {\n                id: 'uDoEgHTvnXTByWnPz',\n                weight: 1,\n                required: false,\n                attribute: 'abstractPriorValue',\n                constraint: {\n                  equals: {\n                    value: 1,\n                  },\n                },\n              },\n            ],\n          },\n          {\n            viewportSettings: {},\n            imageMatchingRules: [],\n            seriesMatchingRules: [\n              {\n                id: 'mXnsCcNzZP56z7mTZ',\n                weight: 1,\n                required: false,\n                attribute: 'x0008103e',\n                constraint: {\n                  contains: {\n                    value: 'CT Nk',\n                  },\n                },\n              },\n            ],\n            studyMatchingRules: [\n              {\n                id: 'uDoEgITvnXTByWnPz',\n                weight: 1,\n                required: false,\n                attribute: 'abstractPriorValue',\n                constraint: {\n                  equals: {\n                    value: 1,\n                  },\n                },\n              },\n            ],\n          },\n        ],\n        createdDate: '2017-02-14T16:07:09.033Z',\n      },\n    ],\n    numberOfPriorsReferenced: 1,\n  });\n\n  return demoProtocols;\n}\n\nconst testProtocols = {\n  getMRTwoByTwoTest,\n  getDemoProtocols,\n};\n\nexport default testProtocols;\n","import ProtocolEngine from './ProtocolEngine.js';\nimport { ProtocolStore, ProtocolStrategy } from './protocolStore';\nimport { addCustomAttribute } from './customAttributes';\nimport { addCustomViewportSetting } from './customViewportSettings';\n\nconst hangingProtocols = {\n  ProtocolEngine,\n  ProtocolStore,\n  ProtocolStrategy,\n  addCustomAttribute,\n  addCustomViewportSetting,\n};\n\nexport default hangingProtocols;\n","// Sorts an array by score\nconst sortByScore = arr => {\n  arr.sort((a, b) => {\n    return b.score - a.score;\n  });\n};\n\nexport { sortByScore };\n","//import Dropdown from './ui/dropdown/class.js';\n\n/*\n * Defines the base OHIF header object\n */\n//const dropdown = new OHIF.ui.Dropdown();\nconst header = {};\n\nexport default header;\n","// Transforms a shallow object with keys separated by \".\" into a nested object\nfunction getNestedObject(shallowObject) {\n  const nestedObject = {};\n  for (let key in shallowObject) {\n    if (!shallowObject.hasOwnProperty(key)) continue;\n    const value = shallowObject[key];\n    const propertyArray = key.split('.');\n    let currentObject = nestedObject;\n    while (propertyArray.length) {\n      const currentProperty = propertyArray.shift();\n      if (!propertyArray.length) {\n        currentObject[currentProperty] = value;\n      } else {\n        if (!currentObject[currentProperty]) {\n          currentObject[currentProperty] = {};\n        }\n\n        currentObject = currentObject[currentProperty];\n      }\n    }\n  }\n\n  return nestedObject;\n}\n\n// Transforms a nested object into a shallowObject merging its keys with \".\" character\nfunction getShallowObject(nestedObject) {\n  const shallowObject = {};\n  const putValues = (baseKey, nestedObject, resultObject) => {\n    for (let key in nestedObject) {\n      if (!nestedObject.hasOwnProperty(key)) continue;\n      let currentKey = baseKey ? `${baseKey}.${key}` : key;\n      const currentValue = nestedObject[key];\n      if (typeof currentValue === 'object') {\n        if (currentValue instanceof Array) {\n          currentKey += '[]';\n        }\n\n        putValues(currentKey, currentValue, resultObject);\n      } else {\n        resultObject[currentKey] = currentValue;\n      }\n    }\n  };\n\n  putValues('', nestedObject, shallowObject);\n  return shallowObject;\n}\n\nconst object = {\n  getNestedObject,\n  getShallowObject,\n};\n\nexport default object;\n","export const defaultState = {};\n\nconst extensions = (state = defaultState, action) => {\n  switch (action.type) {\n    case 'SET_EXTENSION_DATA':\n      const extensionName = action.extension;\n      const currentData = state[extensionName] || {};\n\n      const incomingData = action.data;\n\n      const extension = {\n        [extensionName]: {\n          ...currentData,\n          ...incomingData,\n        },\n      };\n\n      return { ...state, ...extension };\n\n    default:\n      return state;\n  }\n};\n\nexport default extensions;\n","import cloneDeep from 'lodash.clonedeep';\n\nconst defaultState = {\n  progress: {},\n  lastUpdated: null,\n};\n\nconst loading = (state = defaultState, action) => {\n  let progress;\n  let lastUpdated;\n  switch (action.type) {\n    case 'SET_STUDY_LOADING_PROGRESS':\n      progress = cloneDeep(state).progress;\n      progress[action.progressId] = action.progressData;\n\n      // This is a workaround so we can easily identify changes\n      // to the progress object without doing deep comparison.\n      lastUpdated = new Date().getTime();\n\n      return Object.assign({}, state, { progress, lastUpdated });\n    case 'CLEAR_STUDY_LOADING_PROGRESS':\n      progress = cloneDeep(state).progress;\n      delete progress[action.progressId];\n\n      lastUpdated = new Date().getTime();\n\n      return Object.assign({}, state, { progress, lastUpdated });\n    default:\n      return state;\n  }\n};\n\nexport default loading;\n","const defaultState = {\n  windowLevelData: {\n    1: { description: 'Soft tissue', window: '550', level: '40' },\n    2: { description: 'Lung', window: '150', level: '-600' },\n    3: { description: 'Liver', window: '150', level: '90' },\n    4: { description: 'Bone', window: '2500', level: '480' },\n    5: { description: 'Brain', window: '80', level: '40' },\n    6: { description: 'Trest', window: '1', level: '1' },\n    7: { description: '', window: '', level: '' },\n    8: { description: '', window: '', level: '' },\n    9: { description: '', window: '', level: '' },\n    10: { description: '', window: '', level: '' },\n  },\n  generalPreferences: {\n    // language: 'en-US'\n  },\n};\n\nconst preferences = (state = defaultState, action) => {\n  switch (action.type) {\n    case 'SET_USER_PREFERENCES': {\n      return Object.assign({}, state, action.state);\n    }\n    default:\n      return state;\n  }\n};\n\nexport { defaultState };\nexport default preferences;\n","import uniqBy from 'lodash/uniqBy';\n\nexport const defaultState = {\n  servers: [],\n};\n\nconst servers = (state = defaultState, action) => {\n  switch (action.type) {\n    case 'ADD_SERVER':\n      let servers = uniqBy([...state.servers, action.server], 'id');\n      servers.forEach(s => (s.active = true));\n      return { ...state, servers };\n\n    case 'ACTIVATE_SERVER': {\n      const newServer = { ...action.server, active: true };\n      const newServers = state.servers;\n      newServers.forEach(s => (s.active = false));\n      return {\n        ...state,\n        servers: uniqBy([...newServers, newServer], 'wadoRoot'),\n      };\n    }\n\n    case 'SET_SERVERS':\n      return { ...state, servers: action.servers };\n\n    default:\n      return state;\n  }\n};\n\nexport default servers;\n","import cloneDeep from 'lodash.clonedeep';\n\nconst defaultState = {\n  studyData: {},\n};\n\nconst servers = (state = defaultState, action) => {\n  switch (action.type) {\n    case 'SET_STUDY_DATA': {\n      const updatedStudyData = cloneDeep(state.studyData);\n      updatedStudyData[action.StudyInstanceUID] = cloneDeep(action.data);\n\n      return Object.assign({}, state, { studyData: updatedStudyData });\n    }\n    default:\n      return state;\n  }\n};\n\nexport default servers;\n","const defaultState = {\n  timepoints: [],\n  measurements: [],\n};\n\nconst timepointManager = (state = defaultState, action) => {\n  switch (action.type) {\n    case 'SET_TIMEPOINTS':\n      return Object.assign({}, state, { timepoints: action.state });\n    case 'SET_MEASUREMENTS':\n      return Object.assign({}, state, { measurements: action.state });\n    default:\n      return state;\n  }\n};\n\nexport default timepointManager;\n","import cloneDeep from 'lodash.clonedeep';\nimport produce, { setAutoFreeze } from 'immer';\n\nimport {\n  CLEAR_VIEWPORT,\n  SET_ACTIVE_SPECIFIC_DATA,\n  SET_SPECIFIC_DATA,\n  SET_VIEWPORT,\n  SET_VIEWPORT_ACTIVE,\n  SET_VIEWPORT_LAYOUT,\n  SET_VIEWPORT_LAYOUT_AND_DATA,\n} from './../constants/ActionTypes.js';\n\nsetAutoFreeze(false);\n\nexport const DEFAULT_STATE = {\n  numRows: 1,\n  numColumns: 1,\n  activeViewportIndex: 0,\n  layout: {\n    viewports: [{}],\n  },\n  viewportSpecificData: {},\n};\n\n/**\n *  Take the new number of Rows and Columns, delete all not used viewport data and also set\n *  active viewport as default in case current one is not available anymore.\n *\n * @param {Number} numRows\n * @param {Number} numColumns\n * @param {Object} currentViewportSpecificData\n * @returns\n */\nconst findActiveViewportSpecificData = (\n  numRows,\n  numColumns,\n  currentViewportSpecificData = {}\n) => {\n  const numberOfViewports = numRows * numColumns;\n  const viewportSpecificData = cloneDeep(currentViewportSpecificData);\n\n  if (numberOfViewports < Object.keys(viewportSpecificData).length) {\n    Object.keys(viewportSpecificData).forEach(key => {\n      if (key > numberOfViewports - 1) {\n        delete viewportSpecificData[key];\n      }\n    });\n  }\n\n  return viewportSpecificData;\n};\n/**\n *  Take new number of Rows and Columns and make sure the current active viewport index is still available, if not, return the default\n *\n * @param {Number} numRows\n * @param {Number} numColumns\n * @param {Number} currentActiveViewportIndex\n * @returns\n */\nconst getActiveViewportIndex = (\n  numRows,\n  numColumns,\n  currentActiveViewportIndex\n) => {\n  const numberOfViewports = numRows * numColumns;\n\n  return currentActiveViewportIndex > numberOfViewports - 1\n    ? DEFAULT_STATE.activeViewportIndex\n    : currentActiveViewportIndex;\n};\n\n/**\n * The definition of a viewport action.\n *\n * @typedef {Object} ViewportAction\n * @property {string} type -\n * @property {Object} data -\n * @property {Object} layout -\n * @property {number} viewportIndex -\n * @property {Object} viewportSpecificData -\n */\n\n/**\n * @param {Object} [state=DEFAULT_STATE] The current viewport state.\n * @param {ViewportAction} action A viewport action.\n */\nconst viewports = (state = DEFAULT_STATE, action) => {\n  let useActiveViewport = false;\n\n  switch (action.type) {\n    /**\n     * Sets the active viewport index.\n     *\n     * @return {Object} New state.\n     */\n    case SET_VIEWPORT_ACTIVE: {\n      return produce(state, draftState => {\n        draftState.activeViewportIndex = getActiveViewportIndex(\n          draftState.numRows,\n          draftState.numColumns,\n          action.viewportIndex\n        );\n      });\n    }\n\n    /**\n     * Sets viewport layout.\n     *\n     * @return {Object} New state.\n     */\n    case SET_VIEWPORT_LAYOUT: {\n      const { numRows, numColumns } = action;\n      const viewportSpecificData = findActiveViewportSpecificData(\n        numRows,\n        numColumns,\n        state.viewportSpecificData\n      );\n      const activeViewportIndex = getActiveViewportIndex(\n        numRows,\n        numColumns,\n        state.activeViewportIndex\n      );\n\n      return {\n        ...state,\n        numRows: action.numRows,\n        numColumns: action.numColumns,\n        layout: { viewports: [...action.viewports] },\n        viewportSpecificData,\n        activeViewportIndex,\n      };\n    }\n\n    /**\n     * Sets viewport layout and data.\n     *\n     * @return {Object} New state.\n     */\n    case SET_VIEWPORT_LAYOUT_AND_DATA: {\n      const { numRows, numColumns } = action;\n      const viewportSpecificData = findActiveViewportSpecificData(\n        numRows,\n        numColumns,\n        action.viewportSpecificData\n      );\n      const activeViewportIndex = getActiveViewportIndex(\n        numRows,\n        numColumns,\n        state.activeViewportIndex\n      );\n\n      return {\n        ...state,\n        numRows: action.numRows,\n        numColumns: action.numColumns,\n        layout: { viewports: [...action.viewports] },\n        viewportSpecificData,\n        activeViewportIndex,\n      };\n    }\n\n    /**\n     * Sets viewport specific data of active viewport.\n     *\n     * @return {Object} New state.\n     */\n    case SET_VIEWPORT: {\n      return produce(state, draftState => {\n        draftState.viewportSpecificData[action.viewportIndex] =\n          draftState.viewportSpecificData[action.viewportIndex] || {};\n\n        Object.keys(action.viewportSpecificData).forEach(key => {\n          draftState.viewportSpecificData[action.viewportIndex][key] =\n            action.viewportSpecificData[key];\n        });\n\n        if (action.viewportSpecificData && action.viewportSpecificData.plugin) {\n          draftState.layout.viewports[action.viewportIndex].plugin =\n            action.viewportSpecificData.plugin;\n        }\n      });\n    }\n\n    /**\n     * Sets viewport specific data of active/any viewport.\n     *\n     * @return {Object} New state.\n     */\n    case SET_ACTIVE_SPECIFIC_DATA:\n      useActiveViewport = true;\n    // Allow fall-through\n    // eslint-disable-next-line\n    case SET_SPECIFIC_DATA: {\n      const layout = cloneDeep(state.layout);\n      const viewportIndex = useActiveViewport\n        ? state.activeViewportIndex\n        : action.viewportIndex;\n\n      let viewportSpecificData = cloneDeep(state.viewportSpecificData);\n      viewportSpecificData[viewportIndex] = {\n        ...action.viewportSpecificData,\n      };\n\n      if (action.viewportSpecificData && action.viewportSpecificData.plugin) {\n        layout.viewports[viewportIndex].plugin =\n          action.viewportSpecificData.plugin;\n      }\n\n      return { ...state, layout, viewportSpecificData };\n    }\n\n    /**\n     * Clears viewport specific data of any viewport.\n     *\n     * @return {Object} New state.\n     */\n    case CLEAR_VIEWPORT: {\n      let viewportSpecificData = cloneDeep(state.viewportSpecificData);\n\n      if (action.viewportIndex) {\n        viewportSpecificData[action.viewportIndex] = {};\n        return { ...state, viewportSpecificData };\n      } else {\n        return DEFAULT_STATE;\n      }\n    }\n\n    /**\n     * Returns the current application state.\n     *\n     * @return {Object} The current state.\n     */\n    default: {\n      return state;\n    }\n  }\n};\n\nexport default viewports;\n","import extensions from './extensions';\nimport loading from './loading';\nimport preferences from './preferences';\nimport servers from './servers';\nimport studies from './studies';\nimport timepointManager from './timepointManager';\nimport viewports from './viewports';\n\nconst reducers = {\n  extensions,\n  loading,\n  preferences,\n  servers,\n  studies,\n  timepointManager,\n  viewports,\n};\n\nexport default reducers;\n","const LocalStorageApi = window.localStorage;\nconst localStorageKey = 'state';\nexport const loadState = () => {\n  try {\n    const serializedState = LocalStorageApi.getItem(localStorageKey);\n    if (!serializedState) {\n      return undefined;\n    }\n\n    return JSON.parse(serializedState);\n  } catch (e) {\n    return undefined;\n  }\n};\n\nexport const saveState = state => {\n  try {\n    const serializedState = JSON.stringify(state);\n    LocalStorageApi.setItem(localStorageKey, serializedState);\n  } catch (e) {}\n};\n\nconst localStorage = {\n  saveState,\n  loadState,\n};\n\nexport default localStorage;\n","const SessionStorageApi = window.sessionStorage;\nconst sessionStorageKey = 'state';\nexport const loadState = () => {\n  try {\n    const serializedState = SessionStorageApi.getItem(sessionStorageKey);\n    if (!serializedState) {\n      return undefined;\n    }\n\n    return JSON.parse(serializedState);\n  } catch (e) {\n    return undefined;\n  }\n};\n\nexport const saveState = state => {\n  try {\n    const serializedState = JSON.stringify(state);\n    SessionStorageApi.setItem(sessionStorageKey, serializedState);\n  } catch (e) {}\n};\n\nconst sessionStorage = {\n  saveState,\n  loadState,\n};\n\nexport default sessionStorage;\n","import actions from './actions.js';\nimport reducers from './reducers';\nimport localStorage from './localStorage.js';\nimport sessionStorage from './sessionStorage.js';\n\nconst redux = {\n  reducers,\n  actions,\n  localStorage,\n  sessionStorage,\n};\n\nexport default redux;\n","// TODO: This is duplicated in TypeSafeCollection\nfunction isObject(subject) {\n  return (\n    subject instanceof Object ||\n    (typeof subject === 'object' && subject !== null)\n  );\n}\n\n// TODO: This is duplicated in TypeSafeCollection\nfunction isString(subject) {\n  return typeof subject === 'string';\n}\n\n// Search for some string inside any object or array\nfunction search(object, query, property = null, result = []) {\n  // Create the search pattern\n  const pattern = new RegExp(query.trim(), 'i');\n\n  Object.keys(object).forEach(key => {\n    const item = object[key];\n\n    // Stop here if item is empty\n    if (!item) {\n      return;\n    }\n\n    // Get the value to be compared\n    const value = isString(property) ? item[property] : item;\n\n    // Check if the value match the pattern\n    if (isString(value) && pattern.test(value)) {\n      // Add the current item to the result\n      result.push(item);\n    }\n\n    if (isObject(item)) {\n      // Search recursively the item if the current item is an object\n      search(item, query, property, result);\n    }\n  });\n\n  // Return the found items\n  return result;\n}\n\n// Encode any string into a safe format for HTML id attribute\nfunction encodeId(input) {\n  const string = input && input.toString ? input.toString() : input;\n\n  // Return an underscore if the given string is empty or if it's not a string\n  if (string === '' || typeof string !== 'string') {\n    return '_';\n  }\n\n  // Create a converter to replace non accepted chars\n  const converter = match => '_' + match[0].charCodeAt(0).toString(16) + '_';\n\n  // Encode the given string and return it\n  return string.replace(/[^a-zA-Z0-9-]/g, converter);\n}\n\nconst string = {\n  search,\n  encodeId,\n};\n\nexport default string;\n","const FUNCTION = 'function';\nconst STRING = 'string';\nconst UNDEFINED = 'undefined';\nconst WILDCARD = '*'; // \"*\" is a special name which means \"all children\".\nconst SEPARATOR = '.';\n\n/**\n * Main Namespace Component Class\n */\n\nclass Node {\n  constructor() {\n    this.value = 0;\n    this.children = {};\n    this.handlers = {};\n  }\n\n  getPathComponents(path) {\n    return typeof path === STRING ? path.split(SEPARATOR) : null;\n  }\n\n  getNodeUpToIndex(path, index) {\n    let node = this;\n\n    for (let i = 0; i < index; ++i) {\n      let item = path[i];\n      if (node.children.hasOwnProperty(item)) {\n        node = node.children[item];\n      } else {\n        node = null;\n        break;\n      }\n    }\n\n    return node;\n  }\n\n  append(name, value) {\n    const children = this.children;\n    let node = null;\n\n    if (children.hasOwnProperty(name)) {\n      node = children[name];\n    } else if (typeof name === STRING && name !== WILDCARD) {\n      node = new Node();\n      children[name] = node;\n    }\n\n    if (node !== null) {\n      node.value += value > 0 ? parseInt(value) : 0;\n    }\n\n    return node;\n  }\n\n  probe(recursively) {\n    let value = this.value;\n\n    // Calculate entire tree value recursively?\n    if (recursively === true) {\n      const children = this.children;\n      for (let item in children) {\n        if (children.hasOwnProperty(item)) {\n          value += children[item].probe(recursively);\n        }\n      }\n    }\n\n    return value;\n  }\n\n  clear(recursively) {\n    this.value = 0;\n\n    // Clear entire tree recursively?\n    if (recursively === true) {\n      const children = this.children;\n      for (let item in children) {\n        if (children.hasOwnProperty(item)) {\n          children[item].clear(recursively);\n        }\n      }\n    }\n  }\n\n  appendPath(path, value) {\n    path = this.getPathComponents(path);\n\n    if (path !== null) {\n      const last = path.length - 1;\n      let node = this;\n      for (let i = 0; i < last; ++i) {\n        node = node.append(path[i], 0);\n        if (node === null) {\n          return false;\n        }\n      }\n\n      return node.append(path[last], value) !== null;\n    }\n\n    return false;\n  }\n\n  clearPath(path, recursively) {\n    path = this.getPathComponents(path);\n\n    if (path !== null) {\n      const last = path.length - 1;\n      let node = this.getNodeUpToIndex(path, last);\n      if (node !== null) {\n        let item = path[last];\n        if (item !== WILDCARD) {\n          if (node.children.hasOwnProperty(item)) {\n            node.children[item].clear(recursively);\n            return true;\n          }\n        } else {\n          const children = node.children;\n          for (item in children) {\n            if (children.hasOwnProperty(item)) {\n              children[item].clear(recursively);\n            }\n          }\n\n          return true;\n        }\n      }\n    }\n\n    return false;\n  }\n\n  probePath(path, recursively) {\n    path = this.getPathComponents(path);\n\n    if (path !== null) {\n      const last = path.length - 1;\n      let node = this.getNodeUpToIndex(path, last);\n      if (node !== null) {\n        let item = path[last];\n        if (item !== WILDCARD) {\n          if (node.children.hasOwnProperty(item)) {\n            return node.children[item].probe(recursively);\n          }\n        } else {\n          const children = node.children;\n          let value = 0;\n          for (item in children) {\n            if (children.hasOwnProperty(item)) {\n              value += children[item].probe(recursively);\n            }\n          }\n\n          return value;\n        }\n      }\n    }\n\n    return 0;\n  }\n\n  attachHandler(type, handler) {\n    let result = false;\n\n    if (typeof type === STRING && typeof handler === FUNCTION) {\n      const handlers = this.handlers;\n      const list = handlers.hasOwnProperty(type)\n        ? handlers[type]\n        : (handlers[type] = []);\n      const length = list.length;\n\n      let notFound = true;\n\n      for (let i = 0; i < length; ++i) {\n        if (handler === list[i]) {\n          notFound = false;\n          break;\n        }\n      }\n\n      if (notFound) {\n        list[length] = handler;\n        result = true;\n      }\n    }\n\n    return result;\n  }\n\n  removeHandler(type, handler) {\n    let result = false;\n\n    if (typeof type === STRING && typeof handler === FUNCTION) {\n      const handlers = this.handlers;\n      if (handlers.hasOwnProperty(type)) {\n        const list = handlers[type];\n        const length = list.length;\n        for (let i = 0; i < length; ++i) {\n          if (handler === list[i]) {\n            list.splice(i, 1);\n            result = true;\n            break;\n          }\n        }\n      }\n    }\n\n    return result;\n  }\n\n  trigger(type, nonRecursively) {\n    if (typeof type === STRING) {\n      const handlers = this.handlers;\n\n      if (handlers.hasOwnProperty(type)) {\n        const list = handlers[type];\n        const length = list.length;\n        for (let i = 0; i < length; ++i) {\n          list[i].call(null);\n        }\n      }\n\n      if (nonRecursively !== true) {\n        const children = this.children;\n        for (let item in children) {\n          if (children.hasOwnProperty(item)) {\n            children[item].trigger(type);\n          }\n        }\n      }\n    }\n  }\n\n  attachHandlerForPath(path, type, handler) {\n    path = this.getPathComponents(path);\n\n    if (path !== null) {\n      let node = this.getNodeUpToIndex(path, path.length);\n      if (node !== null) {\n        return node.attachHandler(type, handler);\n      }\n    }\n\n    return false;\n  }\n\n  removeHandlerForPath(path, type, handler) {\n    path = this.getPathComponents(path);\n\n    if (path !== null) {\n      let node = this.getNodeUpToIndex(path, path.length);\n      if (node !== null) {\n        return node.removeHandler(type, handler);\n      }\n    }\n\n    return false;\n  }\n\n  triggerHandlersForPath(path, type, nonRecursively) {\n    path = this.getPathComponents(path);\n\n    if (path !== null) {\n      let node = this.getNodeUpToIndex(path, path.length);\n      if (node !== null) {\n        node.trigger(type, nonRecursively);\n      }\n    }\n  }\n}\n\n/**\n * Root Namespace Node and API\n */\n\nconst rootNode = new Node();\n\nexport const unsavedChanges = {\n  rootNode: rootNode,\n\n  observer: null, //new Tracker.Dependency(),\n\n  hooks: new Map(),\n\n  /**\n   * Register a reactive dependency on every change any path suffers\n   */\n  depend: function() {\n    return; // this.observer.depend();\n  },\n\n  /**\n   * Signal an unsaved change for a given namespace.\n   * @param {String} path A string (e.g., \"viewer.studyViewer.measurements.targets\") that identifies the namespace of the signaled changes.\n   * @return {Boolean} Returns false if the signal could not be saved or the supplied namespace is invalid. Otherwise, true is returned.\n   */\n  set: function(path) {\n    const result = rootNode.appendPath(path, 1);\n    //this.observer.changed();\n    return result;\n  },\n\n  /**\n   * Clear all signaled unsaved changes for a given namespace. If the supplied namespace is a wildcard, all signals below that namespace\n   * are cleared.\n   * @param {String} path A string that identifies the namespace of the signaled changes (e.g., \"viewer.studyViewer.measurements.targets\"\n   *  for clearing the \"targets\" item of the \"viewer.studyViewer.measurements\" namespace or \"viewer.studyViewer.*\" to specify all signaled\n   *  changes for the \"viewer.studyViewer\" namespace).\n   * @param {Boolean} recursively Clear node and all its children recursively. If not specified defaults to true.\n   * @return {Boolean} Returns false if the signal could not be removed or the supplied namespace is invalid. Otherwise, true is returned.\n   */\n  clear: function(path, recursively) {\n    const result = rootNode.clearPath(\n      path,\n      typeof recursively === UNDEFINED ? true : recursively\n    );\n    //this.observer.changed();\n    return result;\n  },\n\n  /**\n   * Count the amount of signaled unsaved changes for a given namespace. If the supplied namespace is a wildcard, all signals below that\n   * namespace will also be accounted.\n   * @param {String} path A string that identifies the namespace of the signaled changes (e.g., \"viewer.studyViewer.measurements.targets\"\n   *  for counting the amount of signals for the \"targets\" item of the \"viewer.studyViewer.measurements\" namespace or \"viewer.studyViewer.*\"\n   *  to count all signaled changes for the \"viewer.studyViewer\" namespace).\n   * @param {Boolean} recursively Probe node and all its children recursively. If not specified defaults to true.\n   * @return {Number} Returns the amount of signaled changes for a given namespace. If the supplied namespace is a wildcard, the sum of all\n   *  changes for that namespace are returned.\n   */\n  probe: function(path, recursively) {\n    return rootNode.probePath(\n      path,\n      typeof recursively === UNDEFINED ? true : recursively\n    );\n  },\n\n  /**\n   * Attach an event handler to the specified namespace.\n   * @param {String} name A string that identifies the namespace to which the event handler will be attached (e.g.,\n   *  \"viewer.studyViewer.measurements\" to attach an event handler for that namespace).\n   * @param {String} type A string that identifies the event type to which the event handler will be attached.\n   * @param {Function} handler The handler that will be executed when the specifed event is triggered.\n   * @return {Boolean} Returns true on success and false on failure.\n   */\n  attachHandler: function(path, type, handler) {\n    return (\n      rootNode.appendPath(path, 0) &&\n      rootNode.attachHandlerForPath(path, type, handler)\n    );\n  },\n\n  /**\n   * Detach an event handler from the specified namespace.\n   * @param {String} name A string that identifies the namespace from which the event handler will be detached (e.g.,\n   *  \"viewer.studyViewer.measurements\" to remove an event handler from that namespace).\n   * @param {String} type A string that identifies the event type to which the event handler was attached.\n   * @param {Function} handler The handler that will be removed from execution list.\n   * @return {Boolean} Returns true on success and false on failure.\n   */\n  removeHandler: function(path, type, handler) {\n    return rootNode.removeHandlerForPath(path, type, handler);\n  },\n\n  /**\n   * Trigger all event handlers for the specified namespace and type.\n   * @param {String} name A string that identifies the namespace from which the event handler will be detached (e.g.,\n   *  \"viewer.studyViewer.measurements\" to remove an event handler from that namespace).\n   * @param {String} type A string that identifies the event type which will be triggered.\n   * @param {Boolean} nonRecursively If set to true, prevents triggering event handlers from descending tree.\n   * @return {Void} No value is returned.\n   */\n  trigger: function(path, type, nonRecursively) {\n    rootNode.triggerHandlersForPath(path, type, nonRecursively);\n  },\n\n  /**\n   * UI utility that presents a confirmation dialog to the user if any unsaved changes where signaled for the given namespace.\n   * @param {String} path A string that identifies the namespace of the signaled changes (e.g., \"viewer.studyViewer.measurements.targets\"\n   *  for considering only the signals for the \"targets\" item of the \"viewer.studyViewer.measurements\" namespace or \"viewer.studyViewer.*\"\n   *  to consider all signaled changes for the \"viewer.studyViewer\" namespace).\n   * @param {Function} callback A callback function (e.g, function(shouldProceed, hasChanges) { ... }) that will be executed after assessment.\n   *  Upon execution, the callback will receive two boolean arguments (shouldProceed and hasChanges) indicating if the action can be performed\n   *  or not and if changes that need to be cleared exist.\n   * @param {Object} options (Optional) An object with UI presentation options.\n   * @param {String} options.title The string that will be used as a title for confirmation dialog.\n   * @param {String} options.message The string that will be used as a message for confirmation dialog.\n   * @return {void} No value is returned.\n   */\n  checkBeforeAction: function(path, callback, options) {\n    let probe, hasChanges, shouldProceed;\n\n    if (typeof callback !== 'function') {\n      // nothing to do if no callback function is supplied...\n      return;\n    }\n\n    probe = this.probe(path);\n    if (probe > 0) {\n      // Unsaved changes exist...\n      hasChanges = true;\n      let dialogOptions = Object.assign(\n        {\n          title: 'You have unsaved changes!',\n          message:\n            \"Your changes will be lost if you don't save them before leaving the current page... Are you sure you want to proceed?\",\n        },\n        options\n      );\n      OHIF.ui.showDialog('dialogConfirm', dialogOptions).then(\n        function() {\n          // Unsaved changes exist but user confirms action...\n          shouldProceed = true;\n          callback.call(null, shouldProceed, hasChanges);\n        },\n        function() {\n          // Unsaved changes exist and user does NOT confirm action...\n          shouldProceed = false;\n          callback.call(null, shouldProceed, hasChanges);\n        }\n      );\n    } else {\n      // No unsaved changes, action can be performed...\n      hasChanges = false;\n      shouldProceed = true;\n      callback.call(null, shouldProceed, hasChanges);\n    }\n  },\n\n  /**\n   * UI utility that presents a \"proactive\" dialog (with three options: stay, abandon-changes, save-changes) to the user if any unsaved changes where signaled for the given namespace.\n   * @param {String} path A string that identifies the namespace of the signaled changes (e.g., \"viewer.studyViewer.measurements.targets\"\n   *  for considering only the signals for the \"targets\" item of the \"viewer.studyViewer.measurements\" namespace or \"viewer.studyViewer.*\"\n   *  to consider all signaled changes for the \"viewer.studyViewer\" namespace).\n   * @param {Function} callback A callback function (e.g, function(hasChanges, userChoice) { ... }) that will be executed after assessment.\n   *  Upon execution, the callback will receive two arguments: one boolean (hasChanges) indicating that unsaved changes exist and one string with the ID of the\n   *  option picked by the user on the dialog ('abort-action', 'abandon-changes' and 'save-changes'). If no unsaved changes exist, the second argument is null.\n   * @param {Object} options (Optional) An object with UI presentation options.\n   * @param {Object} options.position An object with optimal position (e.g., { x: ..., y: ... }) for the dialog.\n   * @return {void} No value is returned.\n   */\n  presentProactiveDialog: function(path, callback, options) {\n    let probe, hasChanges;\n\n    if (typeof callback !== 'function') {\n      // nothing to do if no callback function is supplied...\n      return;\n    }\n\n    probe = this.probe(path, true);\n    if (probe > 0) {\n      // Unsaved changes exist...\n      hasChanges = true;\n      OHIF.ui.unsavedChangesDialog(function(choice) {\n        callback.call(null, hasChanges, choice);\n      }, options);\n    } else {\n      // No unsaved changes, action can be performed...\n      hasChanges = false;\n      callback.call(null, hasChanges, null);\n    }\n  },\n\n  addHook(saveCallback, options = {}) {\n    if (!options.path) {\n      options.path = '*';\n    }\n\n    if (!options.message) {\n      options.message = 'There are unsaved changes';\n    }\n\n    this.hooks.set(saveCallback, options);\n  },\n\n  removeHook(saveCallback) {\n    this.hooks.delete(saveCallback);\n  },\n\n  confirmNavigation(navigateCallback, event) {\n    let dialogPresented = false;\n    Array.from(this.hooks.keys()).every(saveCallback => {\n      const options = this.hooks.get(saveCallback);\n      const probe = this.probe(options.path, true);\n      if (!probe) return true;\n\n      const dialogOptions = Object.assign({ class: 'themed' }, options);\n      if (event) {\n        dialogOptions.position = {\n          x: event.clientX + 15,\n          y: event.clientY + 15,\n        };\n      }\n\n      OHIF.ui.unsavedChanges.presentProactiveDialog(\n        options.path,\n        (hasChanges, userChoice) => {\n          if (!hasChanges) return;\n\n          const clear = () => this.clear(options.path, true);\n          switch (userChoice) {\n            case 'abort-action':\n              return;\n            case 'save-changes':\n              const result = saveCallback();\n              if (result instanceof Promise) {\n                return result.then(() => {\n                  clear();\n                  this.confirmNavigation(navigateCallback, event);\n                });\n              }\n\n              clear();\n              return this.confirmNavigation(navigateCallback, event);\n            case 'abandon-changes':\n              clear();\n              break;\n          }\n\n          navigateCallback();\n        },\n        dialogOptions\n      );\n\n      dialogPresented = true;\n      return false;\n    });\n\n    if (!dialogPresented) {\n      navigateCallback();\n    }\n  },\n};\n\nexport default unsavedChanges;\n","import unsavedChanges from './unsavedChanges.js';\nimport handleError from './handleError.js';\nimport isCharacterKeyPress from './isCharacterKeyPress.js';\nimport getOffset from './getOffset.js';\nimport getScrollbarSize from './getScrollbarSize.js';\n\nconst ui = {\n  getScrollbarSize,\n  getOffset,\n  isCharacterKeyPress,\n  handleError,\n};\n\nexport default ui;\n","import './lib';\n\nimport { ExtensionManager, MODULE_TYPES } from './extensions';\nimport { ServicesManager } from './services';\nimport classes, { CommandsManager, HotkeysManager } from './classes/';\n\nimport DICOMWeb from './DICOMWeb';\nimport DICOMSR from './DICOMSR';\nimport cornerstone from './cornerstone.js';\nimport hangingProtocols from './hanging-protocols';\nimport header from './header.js';\nimport log from './log.js';\nimport measurements from './measurements';\nimport metadata from './classes/metadata/';\nimport object from './object.js';\nimport redux from './redux/';\nimport string from './string.js';\nimport studies from './studies/';\nimport ui from './ui';\nimport user from './user.js';\nimport errorHandler from './errorHandler.js';\nimport utils, { hotkeys } from './utils/';\n\nimport {\n  UINotificationService,\n  UIModalService,\n  UIDialogService,\n  MeasurementService,\n} from './services';\n\nconst OHIF = {\n  MODULE_TYPES,\n  //\n  CommandsManager,\n  ExtensionManager,\n  HotkeysManager,\n  ServicesManager,\n  //\n  utils,\n  hotkeys,\n  studies,\n  redux,\n  classes,\n  metadata,\n  header,\n  cornerstone,\n  string,\n  ui,\n  user,\n  errorHandler,\n  object,\n  log,\n  DICOMWeb,\n  DICOMSR,\n  viewer: {},\n  measurements,\n  hangingProtocols,\n  //\n  UINotificationService,\n  UIModalService,\n  UIDialogService,\n  MeasurementService,\n};\n\nexport {\n  MODULE_TYPES,\n  //\n  CommandsManager,\n  ExtensionManager,\n  HotkeysManager,\n  ServicesManager,\n  //\n  utils,\n  hotkeys,\n  studies,\n  redux,\n  classes,\n  metadata,\n  header,\n  cornerstone,\n  string,\n  ui,\n  user,\n  errorHandler,\n  object,\n  log,\n  DICOMWeb,\n  DICOMSR,\n  measurements,\n  hangingProtocols,\n  //\n  UINotificationService,\n  UIModalService,\n  UIDialogService,\n  MeasurementService,\n};\n\nexport { OHIF };\n\nexport default OHIF;\n","/**\n * Get the vertical and horizontal scrollbar sizes\n * Got from https://stackoverflow.com/questions/986937/how-can-i-get-the-browsers-scrollbar-sizes\n *\n * @returns {Array} Array containing the scrollbar horizontal and vertical sizes\n */\nexport default function getScrollbarSize() {\n  const inner = document.createElement('p');\n  inner.style.width = '100%';\n  inner.style.height = '100%';\n\n  const outer = document.createElement('div');\n  outer.style.position = 'absolute';\n  outer.style.top = '0px';\n  outer.style.left = '0px';\n  outer.style.visibility = 'hidden';\n  outer.style.width = '100px';\n  outer.style.height = '100px';\n  outer.style.overflow = 'hidden';\n  outer.appendChild(inner);\n\n  document.body.appendChild(outer);\n\n  const w1 = inner.offsetWidth;\n  const h1 = inner.offsetHeight;\n  outer.style.overflow = 'scroll';\n  let w2 = inner.offsetWidth;\n  let h2 = inner.offsetHeight;\n\n  if (w1 === w2) {\n    w2 = outer.clientWidth;\n  }\n\n  if (h1 === h2) {\n    h2 = outer.clientHeight;\n  }\n\n  document.body.removeChild(outer);\n\n  return [w1 - w2, h1 - h2];\n}\n","/**\n * Get the offset for the given element\n *\n * @param {Object} element DOM element which will have the offser calculated\n * @returns {Object} Object containing the top and left offset\n */\nexport default function getOffset(element) {\n  let top = 0;\n  let left = 0;\n  if (element.offsetParent) {\n    do {\n      left += element.offsetLeft;\n      top += element.offsetTop;\n    } while ((element = element.offsetParent));\n  }\n\n  return {\n    left,\n    top,\n  };\n}\n","/**\n * Check if the pressed key combination will result in a character input\n * Got from https://stackoverflow.com/questions/4179708/how-to-detect-if-the-pressed-key-will-produce-a-character-inside-an-input-text\n *\n * @returns {Boolean} Whether the pressed key combination will input a character or not\n */\nexport default function isCharacterKeyPress(event) {\n  if (typeof event.which === 'undefined') {\n    // This is IE, which only fires keypress events for printable keys\n    return true;\n  } else if (typeof event.which === 'number' && event.which > 0) {\n    // In other browsers except old versions of WebKit, event.which is\n    // only greater than zero if the keypress is a printable key.\n    // We need to filter out backspace and ctrl/alt/meta key combinations\n    return (\n      !event.ctrlKey && !event.metaKey && !event.altKey && event.which !== 8\n    );\n  }\n\n  return false;\n}\n","import log from '../log.js';\n\nexport default function handleError(error) {\n  let { title, message } = error;\n\n  if (!title) {\n    if (error instanceof Error) {\n      title = error.name;\n    }\n  }\n\n  if (!message) {\n    if (error instanceof Error) {\n      message = error.message;\n    }\n  }\n\n  const data = Object.assign(\n    {\n      title,\n      message,\n      class: 'themed',\n      hideConfirm: true,\n      cancelLabel: 'Dismiss',\n      cancelClass: 'btn-secondary',\n    },\n    error || {}\n  );\n\n  log.error(error);\n  // TODO: Find a better way to handle errors instead of displaying a dialog for all of them.\n  // OHIF.ui.showDialog('dialogForm', data);\n}\n","const state = {\n  enabledElements: {},\n};\n\n/**\n * Sets the enabled element `dom` reference for an active viewport.\n * @param {HTMLElement} dom Active viewport element.\n * @return void\n */\nconst setEnabledElement = (viewportIndex, element) =>\n  (state.enabledElements[viewportIndex] = element);\n\n/**\n * Grabs the enabled element `dom` reference of an active viewport.\n *\n * @return {HTMLElement} Active viewport element.\n */\nconst getEnabledElement = viewportIndex => state.enabledElements[viewportIndex];\n\nexport { setEnabledElement, getEnabledElement };\n","import cornerstoneWADOImageLoader from 'cornerstone-wado-image-loader'\n\nlet initialized = false\n\nexport default function initWebWorkers() {\n  const config = {\n    maxWebWorkers: Math.max(navigator.hardwareConcurrency - 1, 1),\n    startWebWorkersOnDemand: true,\n    taskConfiguration: {\n      decodeTask: {\n        initializeCodecsOnStartup: false,\n        usePDFJS: false,\n        strict: false,\n      },\n    },\n  }\n\n  if (!initialized) {\n    cornerstoneWADOImageLoader.webWorkerManager.initialize(config)\n    initialized = true\n  }\n}\n","import React, {\n  useState,\n  createContext,\n  useContext,\n  useEffect,\n  useCallback,\n} from 'react'\nimport PropTypes from 'prop-types'\nimport classNames from 'classnames'\n\nconst ModalContext = createContext(null)\nconst { Provider } = ModalContext\n\nexport const useModal = () => useContext(ModalContext)\n\n/**\n * UI Modal\n *\n * @typedef {Object} ModalProps\n * @property {ReactElement|HTMLElement} [content=null] Modal content.\n * @property {Object} [contentProps=null] Modal content props.\n * @property {boolean} [shouldCloseOnEsc=false] Modal is dismissible via the esc key.\n * @property {boolean} [isOpen=true] Make the Modal visible or hidden.\n * @property {boolean} [closeButton=true] Should the modal body render the close button.\n * @property {string} [title=null] Should the modal render the title independently of the body content.\n * @property {string} [customClassName=null] The custom class to style the modal.\n */\n\nconst ModalProvider = ({ children, modal: Modal, service }) => {\n  const DEFAULT_OPTIONS = {\n    content: null,\n    contentProps: null,\n    shouldCloseOnEsc: false,\n    isOpen: true,\n    onClose: null,\n    closeButton: true,\n    title: null,\n    customClassName: '',\n  }\n\n  const [options, setOptions] = useState(DEFAULT_OPTIONS)\n\n  /**\n   * Show the modal and override its configuration props.\n   *\n   * @param {ModalProps} props { content, contentProps, shouldCloseOnEsc, isOpen, closeButton, title, customClassName }\n   * @returns void\n   */\n  const show = useCallback(props => setOptions({ ...options, ...props }), [\n    options,\n  ])\n\n  /**\n   * Hide the modal and set its properties to default.\n   *\n   * @returns void\n   */\n  const hide = useCallback(() => setOptions(DEFAULT_OPTIONS), [DEFAULT_OPTIONS])\n\n  /**\n   * Sets the implementation of a modal service that can be used by extensions.\n   *\n   * @returns void\n   */\n  useEffect(() => {\n    if (service) {\n      service.setServiceImplementation({ hide, show })\n    }\n  }, [hide, service, show])\n\n  const {\n    content: ModalContent,\n    contentProps,\n    isOpen,\n    onClose,\n    title,\n    customClassName,\n    shouldCloseOnEsc,\n    closeButton,\n  } = options\n\n  return (\n    <Provider value={{ show, hide }}>\n      {ModalContent && (\n        <Modal\n          className={classNames(customClassName, ModalContent.className)}\n          shouldCloseOnEsc={shouldCloseOnEsc}\n          isOpen={isOpen}\n          title={title}\n          closeButton={closeButton}\n          onClose={() => {\n            if (onClose) {\n              onClose()\n            }\n\n            hide()\n          }}>\n          <ModalContent {...contentProps} show={show} hide={hide} />\n        </Modal>\n      )}\n      {children}\n    </Provider>\n  )\n}\n\n/**\n * Higher Order Component to use the modal methods through a Class Component.\n *\n * @returns\n */\nexport const withModal = Component => {\n  return function WrappedComponent(props) {\n    const { show, hide } = useModal()\n    return <Component {...props} modal={{ show, hide }} />\n  }\n}\n\nModalProvider.defaultProps = {\n  service: null,\n}\n\nModalProvider.propTypes = {\n  children: PropTypes.oneOfType([\n    PropTypes.arrayOf(PropTypes.node),\n    PropTypes.node,\n  ]).isRequired,\n  modal: PropTypes.oneOfType([\n    PropTypes.arrayOf(PropTypes.node),\n    PropTypes.node,\n    PropTypes.func,\n  ]).isRequired,\n  service: PropTypes.shape({\n    setServiceImplementation: PropTypes.func,\n  }),\n}\n\nexport default ModalProvider\n\nexport const ModalConsumer = ModalContext.Consumer\n","import React, {\n  useState,\n  createContext,\n  useContext,\n  useCallback,\n  useEffect,\n} from 'react'\nimport PropTypes from 'prop-types'\nimport Draggable from 'react-draggable'\nimport classNames from 'classnames'\n\nimport { utils } from '@ohif/core'\n\n// import './DialogProvider.styl'\n\nconst DialogContext = createContext(null)\n\nexport const useDialog = () => useContext(DialogContext)\n\nconst DialogProvider = ({ children, service }) => {\n  const [isDragging, setIsDragging] = useState(false)\n  const [dialogs, setDialogs] = useState([])\n  const [lastDialogId, setLastDialogId] = useState(null)\n  const [lastDialogPosition, setLastDialogPosition] = useState(null)\n  const [centerPositions, setCenterPositions] = useState([])\n\n  useEffect(() => {\n    setCenterPositions(\n      dialogs.map(dialog => ({\n        id: dialog.id,\n        ...getCenterPosition(dialog.id),\n      }))\n    )\n  }, [dialogs])\n\n  const getCenterPosition = id => {\n    const root = document.querySelector('#root')\n    const centerX = root.offsetLeft + root.offsetWidth / 2\n    const centerY = root.offsetTop + root.offsetHeight / 2\n    const item = document.querySelector(`#draggableItem-${id}`)\n    const itemBounds = item.getBoundingClientRect()\n    return {\n      x: centerX - itemBounds.width / 2,\n      y: centerY - itemBounds.height / 2,\n    }\n  }\n\n  /**\n   * Creates a new dialog and return its id.\n   *\n   * @param {DialogProps} props The dialog props.\n   * @returns The new dialog id.\n   */\n  const create = useCallback(props => {\n    const { id } = props\n\n    let dialogId = id\n    if (!dialogId) {\n      dialogId = utils.guid()\n    }\n\n    setDialogs(dialogs => [...dialogs, { ...props, id: dialogId }])\n    setLastDialogId(dialogId)\n\n    return dialogId\n  }, [])\n\n  /**\n   * Dismisses the dialog with a given id.\n   *\n   * @param {Object} props -\n   * @property {string} props.id The dialog id.\n   * @returns void\n   */\n  const dismiss = useCallback(\n    ({ id }) =>\n      setDialogs(dialogs => dialogs.filter(dialog => dialog.id !== id)),\n    []\n  )\n\n  /**\n   * Sets the implementation of a dialog service that can be used by extensions.\n   *\n   * @returns void\n   */\n  useEffect(() => {\n    if (service) {\n      service.setServiceImplementation({ create, dismiss, dismissAll })\n    }\n  }, [create, dismiss, service])\n\n  /**\n   * Moves the dialog to the foreground if clicked.\n   *\n   * @param {string} id The dialog id.\n   * @returns void\n   */\n  const _bringToFront = useCallback(id => {\n    setDialogs(dialogs => {\n      const topDialog = dialogs.find(dialog => dialog.id === id)\n      return topDialog\n        ? [...dialogs.filter(dialog => dialog.id !== id), topDialog]\n        : dialogs\n    })\n  }, [])\n\n  /**\n   * UI Dialog\n   *\n   * @typedef {Object} DialogProps\n   * @property {string} id The dialog id.\n   * @property {DialogContent} content The dialog content.\n   * @property {Object} contentProps The dialog content props.\n   * @property {boolean} isDraggable Controls if dialog content is draggable or not.\n   * @property {boolean} showOverlay Controls dialog overlay.\n   * @property {boolean} centralize Center the dialog on the screen.\n   * @property {boolean} preservePosition Use last position instead of default.\n   * @property {ElementPosition} defaultPosition Specifies the `x` and `y` that the dragged item should start at.\n   * @property {Function} onStart Called when dragging starts. If `false` is returned any handler, the action will cancel.\n   * @property {Function} onStop Called when dragging stops.\n   * @property {Function} onDrag Called while dragging.\n   */\n\n  useEffect(() => _bringToFront(lastDialogId), [_bringToFront, lastDialogId])\n\n  /**\n   * Dismisses all dialogs.\n   *\n   * @returns void\n   */\n  const dismissAll = () => {\n    setDialogs([])\n  }\n\n  /**\n   * Indicate if there are no dialogs present.\n   *\n   * @returns True if no dialogs are present.\n   */\n  const isEmpty = () => dialogs && dialogs.length < 1\n\n  const renderDialogs = () =>\n    dialogs.map(dialog => {\n      const {\n        id,\n        content: DialogContent,\n        contentProps,\n        defaultPosition,\n        centralize = false,\n        preservePosition = true,\n        isDraggable = true,\n        onStart,\n        onStop,\n        onDrag,\n        showOverlay,\n      } = dialog\n\n      let position = (preservePosition && lastDialogPosition) || defaultPosition\n      if (centralize) {\n        position = centerPositions.find(position => position.id === id)\n      }\n\n      const dragableItem = () => (\n        <Draggable\n          key={id}\n          disabled={!isDraggable}\n          position={position}\n          defaultPosition={position}\n          bounds=\"parent\"\n          onStart={event => {\n            const e = event || window.event\n            const target = e.target || e.srcElement\n            const BLACKLIST = [\n              'SVG',\n              'BUTTON',\n              'PATH',\n              'INPUT',\n              'SPAN',\n              'LABEL',\n            ]\n            if (BLACKLIST.includes(target.tagName.toUpperCase())) {\n              return false\n            }\n\n            if (validCallback(onStart)) {\n              return onStart(event)\n            }\n          }}\n          onStop={event => {\n            setIsDragging(false)\n\n            if (validCallback(onStop)) {\n              return onStop(event)\n            }\n          }}\n          onDrag={event => {\n            setIsDragging(true)\n            _bringToFront(id)\n            _updateLastDialogPosition(id)\n\n            if (validCallback(onDrag)) {\n              return onDrag(event)\n            }\n          }}>\n          <div\n            id={`draggableItem-${id}`}\n            className={classNames(\n              'DraggableItem',\n              isDragging && 'dragging',\n              isDraggable && 'draggable'\n            )}\n            style={{ zIndex: '999', position: 'absolute' }}\n            onClick={() => _bringToFront(id)}>\n            <DialogContent {...dialog} {...contentProps} />\n          </div>\n        </Draggable>\n      )\n\n      return showOverlay ? (\n        <div className=\"Overlay\" key={id}>\n          {dragableItem()}\n        </div>\n      ) : (\n        dragableItem()\n      )\n    })\n\n  /**\n   * Update the last dialog position to be used as the new default position.\n   *\n   * @returns void\n   */\n  const _updateLastDialogPosition = dialogId => {\n    const draggableItemBounds = document\n      .querySelector(`#draggableItem-${dialogId}`)\n      .getBoundingClientRect()\n    setLastDialogPosition({\n      x: draggableItemBounds.x,\n      y: draggableItemBounds.y,\n    })\n  }\n\n  const validCallback = callback => callback && typeof callback === 'function'\n\n  return (\n    <DialogContext.Provider value={{ create, dismiss, dismissAll, isEmpty }}>\n      {!isEmpty() && <div className=\"DraggableArea\">{renderDialogs()}</div>}\n      {children}\n    </DialogContext.Provider>\n  )\n}\n\n/**\n *\n * High Order Component to use the dialog methods through a Class Component\n *\n */\nexport const withDialog = Component => {\n  return function WrappedComponent(props) {\n    const { create, dismiss, dismissAll, isEmpty } = useDialog()\n    return (\n      <Component {...props} dialog={{ create, dismiss, dismissAll, isEmpty }} />\n    )\n  }\n}\n\nDialogProvider.defaultProps = {\n  service: null,\n}\n\nDialogProvider.propTypes = {\n  children: PropTypes.oneOfType([\n    PropTypes.arrayOf(PropTypes.node),\n    PropTypes.node,\n    PropTypes.func,\n  ]).isRequired,\n  service: PropTypes.shape({\n    setServiceImplementation: PropTypes.func,\n  }),\n}\n\nexport default DialogProvider\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport Modal from 'react-modal'\nimport classNames from 'classnames'\n\n// import './OHIFModal.styl'\n\nconst customStyle = {\n  overlay: {\n    zIndex: 1071,\n    backgroundColor: 'rgb(0, 0, 0, 0.5)',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n}\n\nModal.setAppElement(document.getElementById('root'))\n\nconst OHIFModal = ({\n  className,\n  closeButton,\n  shouldCloseOnEsc,\n  isOpen,\n  title,\n  onClose,\n  children,\n}) => {\n  const renderHeader = () => {\n    return (\n      title && (\n        <div className=\"OHIFModal__header\" data-cy=\"modal-header\">\n          <h4>{title}</h4>\n          {closeButton && (\n            <button data-cy=\"close-button\" onClick={onClose}>\n              \n            </button>\n          )}\n        </div>\n      )\n    )\n  }\n\n  return (\n    <Modal\n      className={classNames('OHIFModal', className)}\n      data-cy=\"modal\"\n      shouldCloseOnEsc={shouldCloseOnEsc}\n      isOpen={isOpen}\n      title={title}\n      style={customStyle}>\n      <>\n        {renderHeader()}\n        <div className=\"OHIFModal__content\" data-cy=\"modal-content\">\n          {children}\n        </div>\n      </>\n    </Modal>\n  )\n}\n\nOHIFModal.propTypes = {\n  className: PropTypes.string,\n  closeButton: PropTypes.bool,\n  shouldCloseOnEsc: PropTypes.bool,\n  isOpen: PropTypes.bool,\n  title: PropTypes.string,\n  onClose: PropTypes.func,\n  children: PropTypes.oneOfType([\n    PropTypes.arrayOf(PropTypes.node),\n    PropTypes.node,\n  ]).isRequired,\n}\n\nexport default OHIFModal\n","import { useRef, useEffect } from 'react'\n\nexport default function usePrevious(value: any) {\n  // The ref object is a generic container whose current property is mutable ...\n  // ... and can hold any value, similar to an instance property on a class\n  const ref = useRef()\n\n  // Store current value in ref\n  useEffect(() => {\n    ref.current = value\n  }, [value]) // Only re-run if value changes\n\n  // Return previous value (happens before update in useEffect above)\n  return ref.current as any\n}\n","import Hammer from 'hammerjs';\nimport cornerstone from 'cornerstone-core';\nimport cornerstoneMath from 'cornerstone-math';\nimport cornerstoneTools from 'cornerstone-tools';\nimport OHIF from '@ohif/core';\n\nconst { log } = OHIF;\n\nexport default function(configuration = {}) {\n  // For debugging\n  window.cornerstoneTools = cornerstoneTools;\n\n  cornerstoneTools.external.cornerstone = cornerstone;\n  cornerstoneTools.external.Hammer = Hammer;\n  cornerstoneTools.external.cornerstoneMath = cornerstoneMath;\n  cornerstoneTools.init(configuration);\n\n  cornerstoneTools.loadHandlerManager.setErrorLoadingHandler(\n    (element, imageId, error) => {\n      log.error(imageId);\n      throw error;\n    }\n  );\n\n  // Set the tool font and font size\n  // context.font = \"[style] [variant] [weight] [size]/[line height] [font family]\";\n  const fontFamily =\n    'Roboto, OpenSans, HelveticaNeue-Light, Helvetica Neue Light, Helvetica Neue, Helvetica, Arial, Lucida Grande, sans-serif';\n  cornerstoneTools.textStyle.setFont(`16px ${fontFamily}`);\n\n  // Tool styles/colors\n  cornerstoneTools.toolStyle.setToolWidth(2);\n  cornerstoneTools.toolColors.setToolColor('rgb(255, 255, 0)');\n  cornerstoneTools.toolColors.setActiveColor('rgb(0, 255, 0)');\n\n  cornerstoneTools.store.state.touchProximity = 40;\n\n  // Configure stack prefetch\n  cornerstoneTools.stackPrefetch.setConfiguration({\n    maxImagesToPrefetch: Infinity,\n    preserveExistingPool: false,\n    maxSimultaneousRequests: 20,\n  });\n}\n","import cornerstone from 'cornerstone-core';\n\nconst SUPPORTED_TOOLS = [\n  'Length',\n  'EllipticalRoi',\n  'RectangleRoi',\n  'ArrowAnnotate',\n];\n\nconst measurementServiceMappingsFactory = measurementService => {\n  /**\n   * Maps measurement service format object to cornerstone annotation object.\n   *\n   * @param {Measurement} measurement The measurement instance\n   * @param {string} definition The source definition\n   * @return {Object} Cornerstone annotation data\n   */\n  const toAnnotation = (measurement, definition) => {\n    const {\n      id,\n      label,\n      description,\n      points,\n      unit,\n      SOPInstanceUID,\n      FrameOfReferenceUID,\n      referenceSeriesUID,\n    } = measurement;\n\n    return {\n      toolName: definition,\n      measurementData: {\n        sopInstanceUid: SOPInstanceUID,\n        frameOfReferenceUID: FrameOfReferenceUID,\n        SeriesInstanceUID: referenceSeriesUID,\n        unit,\n        text: label,\n        description,\n        handles: _getHandlesFromPoints(points),\n        _measurementServiceId: id,\n      },\n    };\n  };\n\n  /**\n   * Maps cornerstone annotation event data to measurement service format.\n   *\n   * @param {Object} cornerstone Cornerstone event data\n   * @return {Measurement} Measurement instance\n   */\n  const toMeasurement = csToolsAnnotation => {\n    const { element, measurementData } = csToolsAnnotation;\n    const tool =\n      csToolsAnnotation.toolType ||\n      csToolsAnnotation.toolName ||\n      measurementData.toolType;\n\n    const validToolType = toolName => SUPPORTED_TOOLS.includes(toolName);\n\n    if (!validToolType(tool)) {\n      throw new Error('Tool not supported');\n    }\n\n    const {\n      SOPInstanceUID,\n      FrameOfReferenceUID,\n      SeriesInstanceUID,\n    } = _getAttributes(element);\n\n    const points = [];\n    points.push(measurementData.handles);\n\n    return {\n      id: measurementData._measurementServiceId,\n      SOPInstanceUID: SOPInstanceUID,\n      FrameOfReferenceUID,\n      referenceSeriesUID: SeriesInstanceUID,\n      label: measurementData.text,\n      description: measurementData.description,\n      unit: measurementData.unit,\n      area:\n        measurementData.cachedStats &&\n        measurementData.cachedStats\n          .area /* TODO: Add concept names instead (descriptor) */,\n      type: _getValueTypeFromToolType(tool),\n      points: _getPointsFromHandles(measurementData.handles),\n    };\n  };\n\n  const _getAttributes = element => {\n    const enabledElement = cornerstone.getEnabledElement(element);\n    const imageId = enabledElement.image.imageId;\n    const instance = cornerstone.metaData.get('instance', imageId);\n\n    return {\n      SOPInstanceUID: instance.SOPInstanceUID,\n      FrameOfReferenceUID: instance.FrameOfReferenceUID,\n      SeriesInstanceUID: instance.SeriesInstanceUID,\n    };\n  };\n\n  const _getValueTypeFromToolType = toolType => {\n    const { POLYLINE, ELLIPSE, POINT } = measurementService.VALUE_TYPES;\n\n    /* TODO: Relocate static value types */\n    const TOOL_TYPE_TO_VALUE_TYPE = {\n      Length: POLYLINE,\n      EllipticalRoi: ELLIPSE,\n      RectangleRoi: POLYLINE,\n      ArrowAnnotate: POINT,\n    };\n\n    return TOOL_TYPE_TO_VALUE_TYPE[toolType];\n  };\n\n  const _getPointsFromHandles = handles => {\n    let points = [];\n    Object.keys(handles).map(handle => {\n      if (['start', 'end'].includes(handle)) {\n        let point = {};\n        if (handles[handle].x) point.x = handles[handle].x;\n        if (handles[handle].y) point.y = handles[handle].y;\n        points.push(point);\n      }\n    });\n    return points;\n  };\n\n  const _getHandlesFromPoints = points => {\n    return points\n      .map((p, i) => (i % 10 === 0 ? { start: p } : { end: p }))\n      .reduce((obj, item) => Object.assign(obj, { ...item }), {});\n  };\n\n  return {\n    toAnnotation,\n    toMeasurement,\n  };\n};\n\nexport default measurementServiceMappingsFactory;\n","import OHIF from '@ohif/core'\nimport cornerstone from 'cornerstone-core'\nimport csTools from 'cornerstone-tools'\nimport { merge } from 'ramda'\nimport initCornerstoneTools from './initCornerstoneTools.js'\nimport measurementServiceMappingsFactory from './utils/measurementServiceMappings/measurementServiceMappingsFactory'\n\n/**\n *\n * @param {Object} servicesManager\n * @param {Object} configuration\n * @param {Object|Array} configuration.csToolsConfig\n */\nexport default function init({ servicesManager, configuration }) {\n  const { MeasurementService } = servicesManager.services\n\n  const callInputDialog = (data, event, callback) => {}\n\n  const { csToolsConfig } = configuration\n  const metadataProvider = OHIF.cornerstone.metadataProvider\n\n  cornerstone.metaData.addProvider(\n    metadataProvider.get.bind(metadataProvider),\n    9999\n  )\n\n  // ~~\n  const defaultCsToolsConfig = csToolsConfig || {\n    globalToolSyncEnabled: true,\n    showSVGCursors: true,\n    autoResizeViewports: false,\n  }\n\n  initCornerstoneTools(defaultCsToolsConfig)\n\n  const toolsGroupedByType = {\n    touch: [csTools.PanMultiTouchTool, csTools.ZoomTouchPinchTool],\n    annotations: [\n      csTools.ArrowAnnotateTool,\n      csTools.BidirectionalTool,\n      csTools.LengthTool,\n      csTools.AngleTool,\n      csTools.FreehandRoiTool,\n      csTools.EllipticalRoiTool,\n      csTools.DragProbeTool,\n      csTools.RectangleRoiTool,\n    ],\n    other: [\n      csTools.PanTool,\n      csTools.ZoomTool,\n      csTools.WwwcTool,\n      csTools.WwwcRegionTool,\n      csTools.MagnifyTool,\n      csTools.StackScrollTool,\n      csTools.StackScrollMouseWheelTool,\n      csTools.OverlayTool,\n    ],\n  }\n\n  let tools = []\n  Object.keys(toolsGroupedByType).forEach(toolsGroup =>\n    tools.push(...toolsGroupedByType[toolsGroup])\n  )\n\n  /* Measurement Service */\n  _connectToolsToMeasurementService(MeasurementService)\n\n  /* Add extension tools configuration here. */\n  const internalToolsConfig = {\n    ArrowAnnotate: {\n      configuration: {\n        getTextCallback: (callback, eventDetails) =>\n          callInputDialog(null, eventDetails, callback),\n        changeTextCallback: (data, eventDetails, callback) =>\n          callInputDialog(data, eventDetails, callback),\n      },\n    },\n  }\n\n  /* Abstract tools configuration using extension configuration. */\n  const parseToolProps = (props, tool) => {\n    const { annotations } = toolsGroupedByType\n    // An alternative approach would be to remove the `drawHandlesOnHover` config\n    // from the supported configuration properties in `cornerstone-tools`\n    const toolsWithHideableHandles = annotations.filter(\n      tool => !['RectangleRoiTool', 'EllipticalRoiTool'].includes(tool.name)\n    )\n\n    let parsedProps = { ...props }\n\n    /**\n     * drawHandles - Never/Always show handles\n     * drawHandlesOnHover - Only show handles on handle hover (pointNearHandle)\n     *\n     * Does not apply to tools where handles aren't placed in predictable\n     * locations.\n     */\n    if (\n      configuration.hideHandles !== false &&\n      toolsWithHideableHandles.includes(tool)\n    ) {\n      if (props.configuration) {\n        parsedProps.configuration.drawHandlesOnHover = true\n      } else {\n        parsedProps.configuration = { drawHandlesOnHover: true }\n      }\n    }\n\n    return parsedProps\n  }\n\n  /* Add tools with its custom props through extension configuration. */\n  tools.forEach(tool => {\n    const toolName = tool.name.replace('Tool', '')\n    const externalToolsConfig = configuration.tools || {}\n    const externalToolProps = externalToolsConfig[toolName] || {}\n    const internalToolProps = internalToolsConfig[toolName] || {}\n    const props = merge(\n      internalToolProps,\n      parseToolProps(externalToolProps, tool)\n    )\n    csTools.addTool(tool, props)\n  })\n\n  // TODO -> We need a better way to do this with maybe global tool state setting all tools passive.\n  const BaseAnnotationTool = csTools.importInternal('base/BaseAnnotationTool')\n  tools.forEach(tool => {\n    if (tool.prototype instanceof BaseAnnotationTool) {\n      // BaseAnnotationTool would likely come from csTools lib exports\n      const toolName = new tool().name\n      csTools.setToolPassive(toolName) // there may be a better place to determine name; may not be on uninstantiated class\n    }\n  })\n\n  csTools.setToolActive('Pan', { mouseButtonMask: 4 })\n  csTools.setToolActive('Zoom', { mouseButtonMask: 2 })\n  csTools.setToolActive('Wwwc', { mouseButtonMask: 1 })\n  csTools.setToolActive('StackScrollMouseWheel', {}) // TODO: Empty options should not be required\n  csTools.setToolActive('PanMultiTouch', { pointers: 2 }) // TODO: Better error if no options\n  csTools.setToolActive('ZoomTouchPinch', {})\n  csTools.setToolEnabled('Overlay', {})\n}\n\nconst _initMeasurementService = measurementService => {\n  /* Initialization */\n  const { toAnnotation, toMeasurement } = measurementServiceMappingsFactory(\n    measurementService\n  )\n  const csToolsVer4MeasurementSource = measurementService.createSource(\n    'CornerstoneTools',\n    '4'\n  )\n\n  /* Matching Criterias */\n  const matchingCriteria = {\n    valueType: measurementService.VALUE_TYPES.POLYLINE,\n    points: 2,\n  }\n\n  /* Mappings */\n  measurementService.addMapping(\n    csToolsVer4MeasurementSource,\n    'Length',\n    matchingCriteria,\n    toAnnotation,\n    toMeasurement\n  )\n\n  return csToolsVer4MeasurementSource\n}\n\nconst _connectToolsToMeasurementService = measurementService => {\n  const csToolsVer4MeasurementSource = _initMeasurementService(\n    measurementService\n  )\n  const {\n    id: sourceId,\n    addOrUpdate,\n    getAnnotation,\n  } = csToolsVer4MeasurementSource\n\n  /* Measurement Service Events */\n  cornerstone.events.addEventListener(\n    cornerstone.EVENTS.ELEMENT_ENABLED,\n    event => {\n      const {\n        MEASUREMENT_ADDED,\n        MEASUREMENT_UPDATED,\n      } = measurementService.EVENTS\n\n      measurementService.subscribe(\n        MEASUREMENT_ADDED,\n        ({ source, measurement }) => {\n          if (![sourceId].includes(source.id)) {\n            const annotation = getAnnotation('Length', measurement.id)\n\n            console.log(\n              'Measurement Service [Cornerstone]: Measurement added',\n              measurement\n            )\n            console.log('Mapped annotation:', annotation)\n          }\n        }\n      )\n\n      measurementService.subscribe(\n        MEASUREMENT_UPDATED,\n        ({ source, measurement }) => {\n          if (![sourceId].includes(source.id)) {\n            const annotation = getAnnotation('Length', measurement.id)\n\n            console.log(\n              'Measurement Service [Cornerstone]: Measurement updated',\n              measurement\n            )\n            console.log('Mapped annotation:', annotation)\n          }\n        }\n      )\n\n      const addOrUpdateMeasurement = csToolsAnnotation => {\n        try {\n          const { toolName, toolType, measurementData } = csToolsAnnotation\n          const csTool = toolName || measurementData.toolType || toolType\n          csToolsAnnotation.id = measurementData._measurementServiceId\n          const measurementServiceId = addOrUpdate(csTool, csToolsAnnotation)\n\n          if (!measurementData._measurementServiceId) {\n            addMeasurementServiceId(measurementServiceId, csToolsAnnotation)\n          }\n        } catch (error) {\n          console.warn('Failed to add or update measurement:', error)\n        }\n      }\n\n      const addMeasurementServiceId = (id, csToolsAnnotation) => {\n        const { measurementData } = csToolsAnnotation\n        Object.assign(measurementData, { _measurementServiceId: id })\n      }\n\n      ;[\n        csTools.EVENTS.MEASUREMENT_ADDED,\n        csTools.EVENTS.MEASUREMENT_MODIFIED,\n      ].forEach(csToolsEvtName => {\n        event.detail.element.addEventListener(\n          csToolsEvtName,\n          ({ detail: csToolsAnnotation }) => {\n            console.log(`Cornerstone Element Event: ${csToolsEvtName}`)\n            addOrUpdateMeasurement(csToolsAnnotation)\n          }\n        )\n      })\n    }\n  )\n}\n","import { redux } from '@ohif/core';\n\nconst { setLayout } = redux.actions;\n\n/**\n * Update the current layout with a simple Cornerstone one\n *\n * @return void\n */\nconst setCornerstoneLayout = () => {\n  const layout = {\n    numRows: 1,\n    numColumns: 1,\n    viewports: [{ plugin: 'cornerstone' }],\n  };\n\n  const action = setLayout(layout);\n\n  window.store.dispatch(action);\n}\n\nexport default setCornerstoneLayout;\n","import cornerstone from 'cornerstone-core'\nimport cornerstoneTools from 'cornerstone-tools'\nimport OHIF from '@ohif/core'\n\nimport setCornerstoneLayout from './utils/setCornerstoneLayout.js'\nimport { getEnabledElement } from './state'\nconst scroll = cornerstoneTools.import('util/scroll')\n\nconst { studyMetadataManager } = OHIF.utils\nconst { setViewportSpecificData } = OHIF.redux.actions\n\nconst refreshCornerstoneViewports = () => {\n  cornerstone.getEnabledElements().forEach(enabledElement => {\n    if (enabledElement.image) {\n      cornerstone.updateImage(enabledElement.element)\n    }\n  })\n}\n\nconst commandsModule = ({ servicesManager }) => {\n  const actions = {\n    rotateViewport: ({ viewports, rotation }) => {\n      const enabledElement = getEnabledElement(viewports.activeViewportIndex)\n\n      if (enabledElement) {\n        let viewport = cornerstone.getViewport(enabledElement)\n        viewport.rotation += rotation\n        cornerstone.setViewport(enabledElement, viewport)\n      }\n    },\n    flipViewportHorizontal: ({ viewports }) => {\n      const enabledElement = getEnabledElement(viewports.activeViewportIndex)\n\n      if (enabledElement) {\n        let viewport = cornerstone.getViewport(enabledElement)\n        viewport.hflip = !viewport.hflip\n        cornerstone.setViewport(enabledElement, viewport)\n      }\n    },\n    flipViewportVertical: ({ viewports }) => {\n      const enabledElement = getEnabledElement(viewports.activeViewportIndex)\n\n      if (enabledElement) {\n        let viewport = cornerstone.getViewport(enabledElement)\n        viewport.vflip = !viewport.vflip\n        cornerstone.setViewport(enabledElement, viewport)\n      }\n    },\n    scaleViewport: ({ direction, viewports }) => {\n      const enabledElement = getEnabledElement(viewports.activeViewportIndex)\n      const step = direction * 0.15\n\n      if (enabledElement) {\n        if (step) {\n          let viewport = cornerstone.getViewport(enabledElement)\n          viewport.scale += step\n          cornerstone.setViewport(enabledElement, viewport)\n        } else {\n          cornerstone.fitToWindow(enabledElement)\n        }\n      }\n    },\n    resetViewport: ({ viewports }) => {\n      const enabledElement = getEnabledElement(viewports.activeViewportIndex)\n\n      if (enabledElement) {\n        cornerstone.reset(enabledElement)\n      }\n    },\n    invertViewport: ({ viewports }) => {\n      const enabledElement = getEnabledElement(viewports.activeViewportIndex)\n\n      if (enabledElement) {\n        let viewport = cornerstone.getViewport(enabledElement)\n        viewport.invert = !viewport.invert\n        cornerstone.setViewport(enabledElement, viewport)\n      }\n    },\n    // TODO: this is receiving `evt` from `ToolbarRow`. We could use it to have\n    //       better mouseButtonMask sets.\n    setToolActive: ({ toolName }) => {\n      if (!toolName) {\n        console.warn('No toolname provided to setToolActive command')\n      }\n      cornerstoneTools.setToolActive(toolName, { mouseButtonMask: 1 })\n    },\n    clearAnnotations: ({ viewports }) => {\n      const element = getEnabledElement(viewports.activeViewportIndex)\n      if (!element) {\n        return\n      }\n\n      const enabledElement = cornerstone.getEnabledElement(element)\n      if (!enabledElement || !enabledElement.image) {\n        return\n      }\n\n      const {\n        toolState,\n      } = cornerstoneTools.globalImageIdSpecificToolStateManager\n      if (\n        !toolState ||\n        toolState.hasOwnProperty(enabledElement.image.imageId) === false\n      ) {\n        return\n      }\n\n      const imageIdToolState = toolState[enabledElement.image.imageId]\n\n      const measurementsToRemove = []\n\n      Object.keys(imageIdToolState).forEach(toolType => {\n        const { data } = imageIdToolState[toolType]\n\n        data.forEach(measurementData => {\n          const { _id, lesionNamingNumber, measurementNumber } = measurementData\n          if (!_id) {\n            return\n          }\n\n          measurementsToRemove.push({\n            toolType,\n            _id,\n            lesionNamingNumber,\n            measurementNumber,\n          })\n        })\n      })\n\n      measurementsToRemove.forEach(measurementData => {\n        OHIF.measurements.MeasurementHandlers.onRemoved({\n          detail: {\n            toolType: measurementData.toolType,\n            measurementData,\n          },\n        })\n      })\n    },\n    nextImage: ({ viewports }) => {\n      const enabledElement = getEnabledElement(viewports.activeViewportIndex)\n      scroll(enabledElement, 1)\n    },\n    previousImage: ({ viewports }) => {\n      const enabledElement = getEnabledElement(viewports.activeViewportIndex)\n      scroll(enabledElement, -1)\n    },\n    getActiveViewportEnabledElement: ({ viewports }) => {\n      const enabledElement = getEnabledElement(viewports.activeViewportIndex)\n      return enabledElement\n    },\n    showDownloadViewportModal: ({ title, viewports }) => {},\n    updateTableWithNewMeasurementData({\n      toolType,\n      measurementNumber,\n      location,\n      description,\n    }) {\n      // Update all measurements by measurement number\n      const measurementApi = OHIF.measurements.MeasurementApi.Instance\n      const measurements = measurementApi.tools[toolType].filter(\n        m => m.measurementNumber === measurementNumber\n      )\n\n      measurements.forEach(measurement => {\n        measurement.location = location\n        measurement.description = description\n\n        measurementApi.updateMeasurement(measurement.toolType, measurement)\n      })\n\n      measurementApi.syncMeasurementsAndToolData()\n\n      refreshCornerstoneViewports()\n    },\n    getNearbyToolData({ element, canvasCoordinates, availableToolTypes }) {\n      const nearbyTool = {}\n      let pointNearTool = false\n\n      availableToolTypes.forEach(toolType => {\n        const elementToolData = cornerstoneTools.getToolState(element, toolType)\n\n        if (!elementToolData) {\n          return\n        }\n\n        elementToolData.data.forEach((toolData, index) => {\n          let elementToolInstance = cornerstoneTools.getToolForElement(\n            element,\n            toolType\n          )\n\n          if (!elementToolInstance) {\n            elementToolInstance = cornerstoneTools.getToolForElement(\n              element,\n              `${toolType}Tool`\n            )\n          }\n\n          if (!elementToolInstance) {\n            console.warn('Tool not found.')\n            return undefined\n          }\n\n          if (\n            elementToolInstance.pointNearTool(\n              element,\n              toolData,\n              canvasCoordinates\n            )\n          ) {\n            pointNearTool = true\n            nearbyTool.tool = toolData\n            nearbyTool.index = index\n            nearbyTool.toolType = toolType\n          }\n        })\n\n        if (pointNearTool) {\n          return false\n        }\n      })\n\n      return pointNearTool ? nearbyTool : undefined\n    },\n    removeToolState: ({ element, toolType, tool }) => {\n      cornerstoneTools.removeToolState(element, toolType, tool)\n      cornerstone.updateImage(element)\n    },\n    setCornerstoneLayout: () => {\n      setCornerstoneLayout()\n    },\n    setWindowLevel: ({ viewports, window, level }) => {\n      const enabledElement = getEnabledElement(viewports.activeViewportIndex)\n\n      if (enabledElement) {\n        let viewport = cornerstone.getViewport(enabledElement)\n\n        viewport.voi = {\n          windowWidth: Number(window),\n          windowCenter: Number(level),\n        }\n        cornerstone.setViewport(enabledElement, viewport)\n      }\n    },\n    jumpToImage: ({\n      StudyInstanceUID,\n      SOPInstanceUID,\n      frameIndex,\n      activeViewportIndex,\n    }) => {\n      const study = studyMetadataManager.get(StudyInstanceUID)\n\n      const displaySet = study.findDisplaySet(ds => {\n        return (\n          ds.images &&\n          ds.images.find(i => i.getSOPInstanceUID() === SOPInstanceUID)\n        )\n      })\n\n      displaySet.SOPInstanceUID = SOPInstanceUID\n      displaySet.frameIndex = frameIndex\n\n      window.store.dispatch(\n        setViewportSpecificData(activeViewportIndex, displaySet)\n      )\n\n      refreshCornerstoneViewports()\n    },\n  }\n\n  const definitions = {\n    jumpToImage: {\n      commandFn: actions.jumpToImage,\n      storeContexts: [],\n      options: {},\n    },\n    getNearbyToolData: {\n      commandFn: actions.getNearbyToolData,\n      storeContexts: [],\n      options: {},\n    },\n    removeToolState: {\n      commandFn: actions.removeToolState,\n      storeContexts: [],\n      options: {},\n    },\n    updateTableWithNewMeasurementData: {\n      commandFn: actions.updateTableWithNewMeasurementData,\n      storeContexts: [],\n      options: {},\n    },\n    showDownloadViewportModal: {\n      commandFn: actions.showDownloadViewportModal,\n      storeContexts: ['viewports'],\n      options: {},\n    },\n    getActiveViewportEnabledElement: {\n      commandFn: actions.getActiveViewportEnabledElement,\n      storeContexts: ['viewports'],\n      options: {},\n    },\n    rotateViewportCW: {\n      commandFn: actions.rotateViewport,\n      storeContexts: ['viewports'],\n      options: { rotation: 90 },\n    },\n    rotateViewportCCW: {\n      commandFn: actions.rotateViewport,\n      storeContexts: ['viewports'],\n      options: { rotation: -90 },\n    },\n    invertViewport: {\n      commandFn: actions.invertViewport,\n      storeContexts: ['viewports'],\n      options: {},\n    },\n    flipViewportVertical: {\n      commandFn: actions.flipViewportVertical,\n      storeContexts: ['viewports'],\n      options: {},\n    },\n    flipViewportHorizontal: {\n      commandFn: actions.flipViewportHorizontal,\n      storeContexts: ['viewports'],\n      options: {},\n    },\n    scaleUpViewport: {\n      commandFn: actions.scaleViewport,\n      storeContexts: ['viewports'],\n      options: { direction: 1 },\n    },\n    scaleDownViewport: {\n      commandFn: actions.scaleViewport,\n      storeContexts: ['viewports'],\n      options: { direction: -1 },\n    },\n    fitViewportToWindow: {\n      commandFn: actions.scaleViewport,\n      storeContexts: ['viewports'],\n      options: { direction: 0 },\n    },\n    resetViewport: {\n      commandFn: actions.resetViewport,\n      storeContexts: ['viewports'],\n      options: {},\n    },\n    clearAnnotations: {\n      commandFn: actions.clearAnnotations,\n      storeContexts: ['viewports'],\n      options: {},\n    },\n    nextImage: {\n      commandFn: actions.nextImage,\n      storeContexts: ['viewports'],\n      options: {},\n    },\n    previousImage: {\n      commandFn: actions.previousImage,\n      storeContexts: ['viewports'],\n      options: {},\n    },\n    // TOOLS\n    setToolActive: {\n      commandFn: actions.setToolActive,\n      storeContexts: [],\n      options: {},\n    },\n    setZoomTool: {\n      commandFn: actions.setToolActive,\n      storeContexts: [],\n      options: { toolName: 'Zoom' },\n    },\n    setCornerstoneLayout: {\n      commandFn: actions.setCornerstoneLayout,\n      storeContexts: [],\n      options: {},\n      context: 'VIEWER',\n    },\n    setWindowLevel: {\n      commandFn: actions.setWindowLevel,\n      storeContexts: ['viewports'],\n      options: {},\n    },\n  }\n\n  return {\n    actions,\n    definitions,\n    defaultContext: 'ACTIVE_VIEWPORT::CORNERSTONE',\n  }\n}\n\nexport default commandsModule\n","// TODO: A way to add Icons that don't already exist?\n// - Register them and add\n// - Include SVG Source/Inline?\n// - By URL, or own component?\n\n// What KINDS of toolbar buttons do we have...\n// - One's that dispatch commands\n// - One's that set tool's active\n// - More custom, like CINE\n//    - Built in for one's like this, or custom components?\n\n// Visible?\n// Disabled?\n// Based on contexts or misc. criteria?\n//  -- ACTIVE_ROUTE::VIEWER\n//  -- ACTIVE_VIEWPORT::CORNERSTONE\n// setToolActive commands should receive the button event that triggered\n// so we can do the \"bind to this button\" magic\n\nconst TOOLBAR_BUTTON_TYPES = {\n  COMMAND: 'command',\n  SET_TOOL_ACTIVE: 'setToolActive',\n  BUILT_IN: 'builtIn',\n}\n\nconst TOOLBAR_BUTTON_BEHAVIORS = {\n  CINE: 'CINE',\n  DOWNLOAD_SCREEN_SHOT: 'DOWNLOAD_SCREEN_SHOT',\n}\n\n/* TODO: Export enums through a extension manager. */\n// const enums = {\n//   TOOLBAR_BUTTON_TYPES,\n//   TOOLBAR_BUTTON_BEHAVIORS,\n// };\n\nconst definitions = [\n  {\n    id: 'StackScroll',\n    label: '',\n    icon: 'bars',\n    //\n    type: TOOLBAR_BUTTON_TYPES.SET_TOOL_ACTIVE,\n    commandName: 'setToolActive',\n    commandOptions: { toolName: 'StackScroll' },\n  },\n  {\n    id: 'Zoom',\n    label: '',\n    icon: 'search-plus',\n    //\n    type: TOOLBAR_BUTTON_TYPES.SET_TOOL_ACTIVE,\n    commandName: 'setToolActive',\n    commandOptions: { toolName: 'Zoom' },\n  },\n  {\n    id: 'Wwwc',\n    label: '',\n    icon: 'level',\n    //\n    type: TOOLBAR_BUTTON_TYPES.SET_TOOL_ACTIVE,\n    commandName: 'setToolActive',\n    commandOptions: { toolName: 'Wwwc' },\n  },\n  {\n    id: 'Pan',\n    label: '',\n    icon: 'arrows',\n    //\n    type: TOOLBAR_BUTTON_TYPES.SET_TOOL_ACTIVE,\n    commandName: 'setToolActive',\n    commandOptions: { toolName: 'Pan' },\n  },\n  {\n    id: 'Length',\n    label: '',\n    icon: 'measure-temp',\n    //\n    type: TOOLBAR_BUTTON_TYPES.SET_TOOL_ACTIVE,\n    commandName: 'setToolActive',\n    commandOptions: { toolName: 'Length' },\n  },\n  {\n    id: 'ArrowAnnotate',\n    label: 'Annotate',\n    icon: 'measure-non-target',\n    //\n    type: TOOLBAR_BUTTON_TYPES.SET_TOOL_ACTIVE,\n    commandName: 'setToolActive',\n    commandOptions: { toolName: 'ArrowAnnotate' },\n  },\n  {\n    id: 'Angle',\n    label: '',\n    icon: 'angle-left',\n    //\n    type: TOOLBAR_BUTTON_TYPES.SET_TOOL_ACTIVE,\n    commandName: 'setToolActive',\n    commandOptions: { toolName: 'Angle' },\n  },\n  {\n    id: 'Reset',\n    label: '',\n    icon: 'reset',\n    //\n    type: TOOLBAR_BUTTON_TYPES.COMMAND,\n    commandName: 'resetViewport',\n  },\n  {\n    id: 'Cine',\n    label: '',\n    icon: 'youtube',\n    //\n    type: TOOLBAR_BUTTON_TYPES.BUILT_IN,\n    options: {\n      behavior: TOOLBAR_BUTTON_BEHAVIORS.CINE,\n    },\n  },\n  {\n    id: 'Magnify',\n    label: '',\n    icon: 'circle',\n    //\n    type: TOOLBAR_BUTTON_TYPES.SET_TOOL_ACTIVE,\n    commandName: 'setToolActive',\n    commandOptions: { toolName: 'Magnify' },\n  },\n  {\n    id: 'WwwcRegion',\n    label: '',\n    icon: 'stop',\n    //\n    type: TOOLBAR_BUTTON_TYPES.SET_TOOL_ACTIVE,\n    commandName: 'setToolActive',\n    commandOptions: { toolName: 'WwwcRegion' },\n  },\n  {\n    id: 'DragProbe',\n    label: '',\n    icon: 'dot-circle',\n    //\n    type: TOOLBAR_BUTTON_TYPES.SET_TOOL_ACTIVE,\n    commandName: 'setToolActive',\n    commandOptions: { toolName: 'DragProbe' },\n  },\n  {\n    id: 'EllipticalRoi',\n    label: '',\n    icon: 'circle-o',\n    //\n    type: TOOLBAR_BUTTON_TYPES.SET_TOOL_ACTIVE,\n    commandName: 'setToolActive',\n    commandOptions: { toolName: 'EllipticalRoi' },\n  },\n  {\n    id: 'RectangleRoi',\n    label: '',\n    icon: 'square-o',\n    //\n    type: TOOLBAR_BUTTON_TYPES.SET_TOOL_ACTIVE,\n    commandName: 'setToolActive',\n    commandOptions: { toolName: 'RectangleRoi' },\n  },\n  {\n    id: 'Invert',\n    label: '',\n    icon: 'adjust',\n    //\n    type: TOOLBAR_BUTTON_TYPES.COMMAND,\n    commandName: 'invertViewport',\n  },\n  {\n    id: 'RotateRight',\n    label: '',\n    icon: 'rotate-right',\n    //\n    type: TOOLBAR_BUTTON_TYPES.COMMAND,\n    commandName: 'rotateViewportCW',\n  },\n  {\n    id: 'FlipH',\n    label: '',\n    icon: 'ellipse-h',\n    //\n    type: TOOLBAR_BUTTON_TYPES.COMMAND,\n    commandName: 'flipViewportHorizontal',\n  },\n  {\n    id: 'FlipV',\n    label: '',\n    icon: 'ellipse-v',\n    //\n    type: TOOLBAR_BUTTON_TYPES.COMMAND,\n    commandName: 'flipViewportVertical',\n  },\n  {\n    id: 'Clear',\n    label: '',\n    icon: 'trash',\n    //\n    type: TOOLBAR_BUTTON_TYPES.COMMAND,\n    commandName: 'clearAnnotations',\n  },\n  {\n    id: 'Bidirectional',\n    label: '',\n    icon: 'measure-target',\n    //\n    type: TOOLBAR_BUTTON_TYPES.SET_TOOL_ACTIVE,\n    commandName: 'setToolActive',\n    commandOptions: { toolName: 'Bidirectional' },\n  },\n  {\n    id: 'Download',\n    label: 'Download',\n    icon: 'create-screen-capture',\n    //\n    type: TOOLBAR_BUTTON_TYPES.BUILT_IN,\n    options: {\n      behavior: TOOLBAR_BUTTON_BEHAVIORS.DOWNLOAD_SCREEN_SHOT,\n      togglable: true,\n    },\n  },\n  // {\n  //   id: 'More',\n  //   label: '',\n  //   icon: 'ellipse-circle',\n  //   buttons: [\n  //     {\n  //       id: 'Magnify',\n  //       label: '',\n  //       icon: 'circle',\n  //       //\n  //       type: TOOLBAR_BUTTON_TYPES.SET_TOOL_ACTIVE,\n  //       commandName: 'setToolActive',\n  //       commandOptions: { toolName: 'Magnify' },\n  //     },\n  //     {\n  //       id: 'WwwcRegion',\n  //       label: '',\n  //       icon: 'stop',\n  //       //\n  //       type: TOOLBAR_BUTTON_TYPES.SET_TOOL_ACTIVE,\n  //       commandName: 'setToolActive',\n  //       commandOptions: { toolName: 'WwwcRegion' },\n  //     },\n  //     {\n  //       id: 'DragProbe',\n  //       label: '',\n  //       icon: 'dot-circle',\n  //       //\n  //       type: TOOLBAR_BUTTON_TYPES.SET_TOOL_ACTIVE,\n  //       commandName: 'setToolActive',\n  //       commandOptions: { toolName: 'DragProbe' },\n  //     },\n  //     {\n  //       id: 'EllipticalRoi',\n  //       label: '',\n  //       icon: 'circle-o',\n  //       //\n  //       type: TOOLBAR_BUTTON_TYPES.SET_TOOL_ACTIVE,\n  //       commandName: 'setToolActive',\n  //       commandOptions: { toolName: 'EllipticalRoi' },\n  //     },\n  //     {\n  //       id: 'RectangleRoi',\n  //       label: '',\n  //       icon: 'square-o',\n  //       //\n  //       type: TOOLBAR_BUTTON_TYPES.SET_TOOL_ACTIVE,\n  //       commandName: 'setToolActive',\n  //       commandOptions: { toolName: 'RectangleRoi' },\n  //     },\n  //     {\n  //       id: 'Invert',\n  //       label: '',\n  //       icon: 'adjust',\n  //       //\n  //       type: TOOLBAR_BUTTON_TYPES.COMMAND,\n  //       commandName: 'invertViewport',\n  //     },\n  //     {\n  //       id: 'RotateRight',\n  //       label: '',\n  //       icon: 'rotate-right',\n  //       //\n  //       type: TOOLBAR_BUTTON_TYPES.COMMAND,\n  //       commandName: 'rotateViewportCW',\n  //     },\n  //     {\n  //       id: 'FlipH',\n  //       label: '',\n  //       icon: 'ellipse-h',\n  //       //\n  //       type: TOOLBAR_BUTTON_TYPES.COMMAND,\n  //       commandName: 'flipViewportHorizontal',\n  //     },\n  //     {\n  //       id: 'FlipV',\n  //       label: '',\n  //       icon: 'ellipse-v',\n  //       //\n  //       type: TOOLBAR_BUTTON_TYPES.COMMAND,\n  //       commandName: 'flipViewportVertical',\n  //     },\n  //     {\n  //       id: 'Clear',\n  //       label: '',\n  //       icon: 'trash',\n  //       //\n  //       type: TOOLBAR_BUTTON_TYPES.COMMAND,\n  //       commandName: 'clearAnnotations',\n  //     },\n  //     {\n  //       id: 'Bidirectional',\n  //       label: '',\n  //       icon: 'measure-target',\n  //       //\n  //       type: TOOLBAR_BUTTON_TYPES.SET_TOOL_ACTIVE,\n  //       commandName: 'setToolActive',\n  //       commandOptions: { toolName: 'Bidirectional' },\n  //     },\n  //     {\n  //       id: 'Download',\n  //       label: 'Download',\n  //       icon: 'create-screen-capture',\n  //       //\n  //       type: TOOLBAR_BUTTON_TYPES.BUILT_IN,\n  //       options: {\n  //         behavior: TOOLBAR_BUTTON_BEHAVIORS.DOWNLOAD_SCREEN_SHOT,\n  //         togglable: true,\n  //       },\n  //     },\n  //   ],\n  // },\n  {\n    id: 'Exit2DMPR',\n    label: 'Exit 2D MPR',\n    icon: 'times',\n    //\n    type: TOOLBAR_BUTTON_TYPES.COMMAND,\n    commandName: 'setCornerstoneLayout',\n    context: 'ACTIVE_VIEWPORT::VTK',\n  },\n]\n\nexport default {\n  definitions,\n  defaultContext: 'ACTIVE_VIEWPORT::CORNERSTONE',\n}\n","import React from 'react'\nimport init from './init.js'\nimport commandsModule from './commandsModule.js'\nimport toolbarModule from './toolbarModule.js'\n\nconst Component = React.lazy(() => {\n  return import('./OHIFCornerstoneViewport')\n})\n\nconst OHIFCornerstoneViewport = props => {\n  return (\n    <React.Suspense fallback={<div>Loading...</div>}>\n      <Component {...props} />\n    </React.Suspense>\n  )\n}\n\n/**\n *\n */\nexport default {\n  /**\n   * Only required property. Should be a unique value across all extensions.\n   */\n  id: 'cornerstone',\n\n  /**\n   *\n   *\n   * @param {object} [configuration={}]\n   * @param {object|array} [configuration.csToolsConfig] - Passed directly to `initCornerstoneTools`\n   */\n  preRegistration({ servicesManager, configuration = {} }) {\n    init({ servicesManager, configuration })\n  },\n  getViewportModule({ commandsManager }) {\n    const ExtendedOHIFCornerstoneViewport = props => {\n      const onNewImageHandler = jumpData => {\n        commandsManager.runCommand('jumpToImage', jumpData)\n      }\n      return (\n        <OHIFCornerstoneViewport {...props} onNewImage={onNewImageHandler} />\n      )\n    }\n\n    return ExtendedOHIFCornerstoneViewport\n  },\n  getToolbarModule() {\n    return toolbarModule\n  },\n  getCommandsModule({ servicesManager }) {\n    return commandsModule({ servicesManager })\n  },\n}\n","import {\n  applyMiddleware,\n  combineReducers,\n  createStore,\n  compose,\n} from 'redux'\nimport { createLogger } from 'redux-logger'\nimport { redux } from '@ohif/core'\nimport thunkMiddleware from 'redux-thunk'\n\nconst logger = createLogger({\n  collapsed: true,\n})\n\n// Combine our @ohif/core and oidc reducers\n// Set init data, using values found in localStorage\nconst { reducers, localStorage, sessionStorage } = redux\nconst middleware = [thunkMiddleware]\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose\n\nconst rootReducer = combineReducers(reducers)\nconst preloadedState = {\n  ...localStorage.loadState(),\n  ...sessionStorage.loadState(),\n}\n\nconst store = createStore(\n  rootReducer,\n  preloadedState,\n  composeEnhancers(applyMiddleware(...middleware, logger))\n)\n\n// When the store's preferences change,\n// Update our cached preferences in localStorage\nstore.subscribe(() => {\n  localStorage.saveState({\n    preferences: store.getState().preferences,\n  })\n  sessionStorage.saveState({\n    servers: store.getState().servers,\n  })\n})\n\nexport default store\n","import { redux, utils } from '@ohif/core'\nimport store from '../configureStore'\n\nconst commandsModule = ({ commandsManager }) => {\n  const { setViewportActive, setActiveViewportSpecificData } = redux.actions\n\n  const actions = {\n    updateActiveViewport: ({ viewports, direction }) => {\n      const { viewportSpecificData, activeViewportIndex } = viewports\n      const maxIndex = Object.keys(viewportSpecificData).length - 1\n\n      let newIndex = activeViewportIndex + direction\n      newIndex = newIndex > maxIndex ? 0 : newIndex\n      newIndex = newIndex < 0 ? maxIndex : newIndex\n\n      store.dispatch(setViewportActive(newIndex))\n    },\n    setWindowLevelPreset: ({ viewports, preset }) => {\n      const state = store.getState()\n      const { preferences = {} } = state\n      const { window, level } =\n        preferences.windowLevelData && preferences.windowLevelData[preset]\n\n      if (window && level) {\n        commandsManager.runCommand('setWindowLevel', {\n          viewports,\n          window,\n          level,\n        })\n      }\n    },\n    updateViewportDisplaySet: ({ viewports, direction }) => {\n      const viewportSpecificData = { ...viewports.viewportSpecificData }\n      const activeViewport = viewportSpecificData[viewports.activeViewportIndex]\n      const studyMetadata = utils.studyMetadataManager.get(\n        activeViewport.StudyInstanceUID\n      )\n\n      if (!studyMetadata) {\n        return\n      }\n\n      const allDisplaySets = studyMetadata.getDisplaySets()\n      const currentDisplaySetIndex = allDisplaySets.findIndex(\n        displaySet =>\n          displaySet.displaySetInstanceUID ===\n          activeViewport.displaySetInstanceUID\n      )\n      if (currentDisplaySetIndex < 0) {\n        return\n      }\n\n      const newDisplaySetIndex = currentDisplaySetIndex + direction\n      const newDisplaySetData = allDisplaySets[newDisplaySetIndex]\n      if (!newDisplaySetData) {\n        return\n      }\n\n      store.dispatch(setActiveViewportSpecificData(newDisplaySetData))\n    },\n  }\n\n  const definitions = {\n    // Next/Previous active viewport\n    incrementActiveViewport: {\n      commandFn: actions.updateActiveViewport,\n      storeContexts: ['viewports'],\n      options: { direction: 1 },\n    },\n    decrementActiveViewport: {\n      commandFn: actions.updateActiveViewport,\n      storeContexts: ['viewports'],\n      options: { direction: -1 },\n    },\n    // Window level Presets\n    windowLevelPreset1: {\n      commandFn: actions.setWindowLevelPreset,\n      storeContexts: ['viewports'],\n      options: { preset: 1 },\n    },\n    windowLevelPreset2: {\n      commandFn: actions.setWindowLevelPreset,\n      storeContexts: ['viewports'],\n      options: { preset: 2 },\n    },\n    windowLevelPreset3: {\n      commandFn: actions.setWindowLevelPreset,\n      storeContexts: ['viewports'],\n      options: { preset: 3 },\n    },\n    windowLevelPreset4: {\n      commandFn: actions.setWindowLevelPreset,\n      storeContexts: ['viewports'],\n      options: { preset: 4 },\n    },\n    windowLevelPreset5: {\n      commandFn: actions.setWindowLevelPreset,\n      storeContexts: ['viewports'],\n      options: { preset: 5 },\n    },\n    windowLevelPreset6: {\n      commandFn: actions.setWindowLevelPreset,\n      storeContexts: ['viewports'],\n      options: { preset: 6 },\n    },\n    windowLevelPreset7: {\n      commandFn: actions.setWindowLevelPreset,\n      storeContexts: ['viewports'],\n      options: { preset: 7 },\n    },\n    windowLevelPreset8: {\n      commandFn: actions.setWindowLevelPreset,\n      storeContexts: ['viewports'],\n      options: { preset: 8 },\n    },\n    windowLevelPreset9: {\n      commandFn: actions.setWindowLevelPreset,\n      storeContexts: ['viewports'],\n      options: { preset: 9 },\n    },\n    nextViewportDisplaySet: {\n      commandFn: actions.updateViewportDisplaySet,\n      storeContexts: ['viewports'],\n      options: { direction: 1 },\n    },\n    previousViewportDisplaySet: {\n      commandFn: actions.updateViewportDisplaySet,\n      storeContexts: ['viewports'],\n      options: { direction: -1 },\n    },\n  }\n\n  return {\n    definitions,\n    defaultContext: 'VIEWER',\n  }\n}\n\nexport default {\n  id: 'generic-viewer-commands',\n  getCommandsModule({ commandsManager }) {\n    return commandsModule({ commandsManager })\n  },\n}\n","import { createSelector } from 'reselect';\n\nconst getActiveViewportIndex = state => state.viewports.activeViewportIndex;\nconst getLayoutViewports = state => state.viewports.layout.viewports;\nconst getViewportSpecificData = state => state.viewports.viewportSpecificData;\n\n/**\n * Think of this as a computed getter for our store. It lets us watch parts of\n * our redux state, and only update/recalculate when those values change.\n */\nexport const getActiveContexts = createSelector(\n  [getActiveViewportIndex, getLayoutViewports, getViewportSpecificData],\n  (activeViewportIndex, layoutViewports, viewportSpecificData) => {\n    const activeContexts = ['VIEWER'];\n    const activeLayoutViewport = layoutViewports[activeViewportIndex] || {};\n    const activeViewportSpecificData =\n      viewportSpecificData[activeViewportIndex] || {};\n    const activeViewportPluginName =\n      activeLayoutViewport.plugin || activeViewportSpecificData.plugin;\n\n    if (activeViewportPluginName) {\n      const activeViewportExtension = `ACTIVE_VIEWPORT::${activeViewportPluginName.toUpperCase()}`;\n      activeContexts.push(activeViewportExtension);\n    }\n\n    return activeContexts;\n  }\n);\n","export default {\n  // default: '/'\n  routerBasename: '/',\n  extensions: [],\n  showStudyList: true,\n  filterQueryParam: false,\n  servers: {\n    dicomWeb: [\n      {\n        name: 'DCM4CHEE',\n        wadoUriRoot: 'https://orthanc.dicom.tw:443/wado/',\n        qidoRoot: 'https://orthanc.dicom.tw/dicom-web',\n        wadoRoot: 'https://orthanc.dicom.tw/dicom-web',\n        qidoSupportsIncludeField: true,\n        imageRendering: 'wadouri',\n        thumbnailRendering: 'wadouri',\n        enableStudyLazyLoad: true,\n        supportsFuzzyMatching: true,\n      },\n    ],\n  },\n  // Extensions should be able to suggest default values for these?\n  // Or we can require that these be explicitly set\n  hotkeys: [\n    // ~ Global\n    {\n      commandName: 'incrementActiveViewport',\n      label: 'Next Viewport',\n      keys: ['right'],\n    },\n    {\n      commandName: 'decrementActiveViewport',\n      label: 'Previous Viewport',\n      keys: ['left'],\n    },\n    // Supported Keys: https://craig.is/killing/mice\n    // ~ Cornerstone Extension\n    { commandName: 'rotateViewportCW', label: 'Rotate Right', keys: ['r'] },\n    { commandName: 'rotateViewportCCW', label: 'Rotate Left', keys: ['l'] },\n    { commandName: 'invertViewport', label: 'Invert', keys: ['i'] },\n    {\n      commandName: 'flipViewportVertical',\n      label: 'Flip Horizontally',\n      keys: ['h'],\n    },\n    {\n      commandName: 'flipViewportHorizontal',\n      label: 'Flip Vertically',\n      keys: ['v'],\n    },\n    { commandName: 'scaleUpViewport', label: 'Zoom In', keys: ['+'] },\n    { commandName: 'scaleDownViewport', label: 'Zoom Out', keys: ['-'] },\n    { commandName: 'fitViewportToWindow', label: 'Zoom to Fit', keys: ['='] },\n    { commandName: 'resetViewport', label: 'Reset', keys: ['space'] },\n    // clearAnnotations\n    { commandName: 'nextImage', label: 'Next Image', keys: ['down'] },\n    { commandName: 'previousImage', label: 'Previous Image', keys: ['up'] },\n    // firstImage\n    // lastImage\n    {\n      commandName: 'previousViewportDisplaySet',\n      label: 'Previous Series',\n      keys: ['pagedown'],\n    },\n    {\n      commandName: 'nextViewportDisplaySet',\n      label: 'Next Series',\n      keys: ['pageup'],\n    },\n    // ~ Cornerstone Tools\n    { commandName: 'setZoomTool', label: 'Zoom', keys: ['z'] },\n    // ~ Window level presets\n    {\n      commandName: 'windowLevelPreset1',\n      label: 'W/L Preset 1',\n      keys: ['1'],\n    },\n    {\n      commandName: 'windowLevelPreset2',\n      label: 'W/L Preset 2',\n      keys: ['2'],\n    },\n    {\n      commandName: 'windowLevelPreset3',\n      label: 'W/L Preset 3',\n      keys: ['3'],\n    },\n    {\n      commandName: 'windowLevelPreset4',\n      label: 'W/L Preset 4',\n      keys: ['4'],\n    },\n    {\n      commandName: 'windowLevelPreset5',\n      label: 'W/L Preset 5',\n      keys: ['5'],\n    },\n    {\n      commandName: 'windowLevelPreset6',\n      label: 'W/L Preset 6',\n      keys: ['6'],\n    },\n    {\n      commandName: 'windowLevelPreset7',\n      label: 'W/L Preset 7',\n      keys: ['7'],\n    },\n    {\n      commandName: 'windowLevelPreset8',\n      label: 'W/L Preset 8',\n      keys: ['8'],\n    },\n    {\n      commandName: 'windowLevelPreset9',\n      label: 'W/L Preset 9',\n      keys: ['9'],\n    },\n  ],\n  cornerstoneExtensionConfig: {},\n  // Following property limits number of simultaneous series metadata requests.\n  // For http/1.x-only servers, set this to 5 or less to improve\n  //  on first meaningful display in viewer\n  // If the server is particularly slow to respond to series metadata\n  //  requests as it extracts the metadata from raw files everytime,\n  //  try setting this to even lower value\n  // Leave it undefined for no limit, sutiable for HTTP/2 enabled servers\n  // maxConcurrentMetadataRequests: 5,\n}\n","import React from 'react'\nimport { useSelector } from 'react-redux'\nimport {\n  CommandsManager,\n  ServicesManager,\n  HotkeysManager,\n  MeasurementService,\n  UIModalService,\n  UIDialogService,\n  ExtensionManager,\n} from '@ohif/core'\nimport OHIFCornerstoneExtension from '@ohif/extension-cornerstone'\nimport GenericViewerCommands from './extensions/commandModule'\nimport store from './configureStore'\nimport { getActiveContexts } from './reducers/layout'\nimport defaultConfig from './config'\n\nexport let AppContext = React.createContext({})\n\nexport const CONTEXTS = {\n  CORNERSTONE: 'ACTIVE_VIEWPORT::CORNERSTONE',\n  VTK: 'ACTIVE_VIEWPORT::VTK',\n}\n\nexport const useAppContext = () => React.useContext(AppContext)\n\nexport const AppProvider = ({ children, config }) => {\n  const activeContexts = useSelector(state => getActiveContexts(state))\n\n  return (\n    <AppContext.Provider value={{ appConfig: config, activeContexts }}>\n      {children}\n    </AppContext.Provider>\n  )\n}\n\nexport const withAppContext = Component => {\n  return function WrappedComponent(props) {\n    const { appConfig, activeContexts } = useAppContext()\n    return (\n      <Component\n        {...props}\n        appConfig={appConfig}\n        activeContexts={activeContexts}\n      />\n    )\n  }\n}\n\nexport const servicesManager = new ServicesManager(\n  // UINotificationService,\n  UIModalService,\n  UIDialogService,\n  MeasurementService\n)\n\nservicesManager.registerServices([MeasurementService])\n\nlet config = {}\n\nif (window) {\n  config = window.config || defaultConfig\n}\n\nconst appDefaultConfig = {\n  showStudyList: true,\n  cornerstoneExtensionConfig: {},\n  extensions: [],\n}\n\nconst appConfig = {\n  ...appDefaultConfig,\n  ...(typeof config === 'function' ? config({ servicesManager }) : config),\n}\n\nconst {\n  hotkeys: appConfigHotkeys,\n  cornerstoneExtensionConfig,\n  // extensions,\n} = appConfig\n\n/** ~~~~~~~~~~~~~ Application Setup */\nconst commandsManagerConfig = {\n  getAppState: () => store.getState(),\n  getActiveContexts: () => getActiveContexts(store.getState()),\n}\n\n/** Managers */\nexport const commandsManager = new CommandsManager(commandsManagerConfig)\n\nexport const hotkeysManager = new HotkeysManager(\n  commandsManager,\n  servicesManager\n)\n\n// TODO: Use something more resilient\n// TODO: Mozilla has a special library for this\nconst userPreferredHotkeys = JSON.parse(\n  localStorage.getItem('hotkey-definitions') || '{}'\n)\n\n// TODO: hotkeysManager.isValidDefinitionObject(/* */)\nconst hasUserPreferences =\n  userPreferredHotkeys && Object.keys(userPreferredHotkeys).length > 0\nif (hasUserPreferences) {\n  hotkeysManager.setHotkeys(userPreferredHotkeys)\n} else {\n  hotkeysManager.setHotkeys(appConfigHotkeys)\n}\n\nhotkeysManager.setDefaultHotKeys(appConfigHotkeys)\n\nexport const extensionManager = new ExtensionManager({\n  commandsManager,\n  servicesManager,\n  appConfig,\n  api: {\n    contexts: CONTEXTS,\n    hooks: {\n      useAppContext,\n    },\n  },\n})\n\nconst requiredExtensions = [\n  GenericViewerCommands,\n  [OHIFCornerstoneExtension, cornerstoneExtensionConfig],\n]\n\nif (appConfig.disableMeasurementPanel !== true) {\n  /* WARNING: MUST BE REGISTERED _AFTER_ OHIFCornerstoneExtension */\n  // requiredExtensions.push(MeasurementsPanel)\n}\n\nconst mergedExtensions = requiredExtensions.concat([\n  // TODO: add extension-html, extension-pdf...etc\n])\nextensionManager.registerExtensions(mergedExtensions)\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport PropTypes from 'prop-types'\n// import classNames from 'classnames'\nimport moment from 'moment'\nimport OHIF, { MODULE_TYPES, DICOMSR } from '@ohif/core'\n// import ConnectedHeader from './ConnectedHeader.js'\n// import ToolbarRow from './ToolbarRow.js'\n// import ConnectedStudyBrowser from './StudyBrowser'\n// import ConnectedViewerMain from './ViewerMain'\n// import SidePanel from './SidePanel'\nimport { extensionManager } from '../AppContext'\n\nclass ViewerWithStudies extends React.Component {\n  static propTypes = {\n    studies: PropTypes.arrayOf(\n      PropTypes.shape({\n        StudyInstanceUID: PropTypes.string.isRequired,\n        StudyDate: PropTypes.string,\n        PatientID: PropTypes.string,\n        displaySets: PropTypes.arrayOf(\n          PropTypes.shape({\n            displaySetInstanceUID: PropTypes.string.isRequired,\n            SeriesDescription: PropTypes.string,\n            SeriesNumber: PropTypes.number,\n            InstanceNumber: PropTypes.number,\n            numImageFrames: PropTypes.number,\n            Modality: PropTypes.string.isRequired,\n            images: PropTypes.arrayOf(\n              PropTypes.shape({\n                getImageId: PropTypes.func.isRequired,\n              })\n            ),\n          })\n        ),\n      })\n    ),\n    studyInstanceUIDs: PropTypes.array,\n    activeServer: PropTypes.shape({\n      type: PropTypes.string,\n      wadoRoot: PropTypes.string,\n    }),\n    onTimepointsUpdated: PropTypes.func,\n    onMeasurementsUpdated: PropTypes.func,\n    // window.store.getState().viewports.viewportSpecificData\n    viewports: PropTypes.object.isRequired,\n    // window.store.getState().viewports.activeViewportIndex\n    activeViewportIndex: PropTypes.number.isRequired,\n    isStudyLoaded: PropTypes.bool,\n    dialog: PropTypes.object,\n  }\n\n  constructor(props) {\n    super(props)\n\n    const { activeServer } = this.props\n    const server = Object.assign({}, activeServer)\n\n    OHIF.measurements.MeasurementApi.setConfiguration({\n      dataExchange: {\n        retrieve: DICOMSR.retrieveMeasurements,\n        store: DICOMSR.storeMeasurements,\n      },\n      server,\n    })\n\n    OHIF.measurements.TimepointApi.setConfiguration({\n      dataExchange: {\n        retrieve: this.retrieveTimepoints,\n        store: this.storeTimepoints,\n        remove: this.removeTimepoint,\n        update: this.updateTimepoint,\n        disassociate: this.disassociateStudy,\n      },\n    })\n  }\n\n  state = {\n    isLeftSidePanelOpen: true,\n    isRightSidePanelOpen: false,\n    selectedRightSidePanel: '',\n    selectedLeftSidePanel: 'studies', // TODO: Don't hardcode this\n    thumbnails: [],\n  }\n\n  componentWillUnmount() {\n    if (this.props.dialog) {\n      this.props.dialog.dismissAll()\n    }\n  }\n\n  retrieveTimepoints = filter => {\n    OHIF.log.info('retrieveTimepoints')\n\n    // Get the earliest and latest study date\n    let earliestDate = new Date().toISOString()\n    let latestDate = new Date().toISOString()\n    if (this.props.studies) {\n      latestDate = new Date('1000-01-01').toISOString()\n      this.props.studies.forEach(study => {\n        const StudyDate = moment(study.StudyDate, 'YYYYMMDD').toISOString()\n        if (StudyDate < earliestDate) {\n          earliestDate = StudyDate\n        }\n        if (StudyDate > latestDate) {\n          latestDate = StudyDate\n        }\n      })\n    }\n\n    // Return a generic timepoint\n    return Promise.resolve([\n      {\n        timepointType: 'baseline',\n        timepointId: 'TimepointId',\n        studyInstanceUIDs: this.props.studyInstanceUIDs,\n        PatientID: filter.PatientID,\n        earliestDate,\n        latestDate,\n        isLocked: false,\n      },\n    ])\n  }\n\n  storeTimepoints = timepointData => {\n    OHIF.log.info('storeTimepoints')\n    return Promise.resolve()\n  }\n\n  updateTimepoint = (timepointData, query) => {\n    OHIF.log.info('updateTimepoint')\n    return Promise.resolve()\n  }\n\n  removeTimepoint = timepointId => {\n    OHIF.log.info('removeTimepoint')\n    return Promise.resolve()\n  }\n\n  disassociateStudy = (timepointIds, StudyInstanceUID) => {\n    OHIF.log.info('disassociateStudy')\n    return Promise.resolve()\n  }\n\n  onTimepointsUpdated = timepoints => {\n    if (this.props.onTimepointsUpdated) {\n      this.props.onTimepointsUpdated(timepoints)\n    }\n  }\n\n  onMeasurementsUpdated = measurements => {\n    if (this.props.onMeasurementsUpdated) {\n      this.props.onMeasurementsUpdated(measurements)\n    }\n  }\n\n  componentDidMount() {\n    const { studies, isStudyLoaded } = this.props\n    const { TimepointApi, MeasurementApi } = OHIF.measurements\n    const currentTimepointId = 'TimepointId'\n\n    const timepointApi = new TimepointApi(currentTimepointId, {\n      onTimepointsUpdated: this.onTimepointsUpdated,\n    })\n\n    const measurementApi = new MeasurementApi(timepointApi, {\n      onMeasurementsUpdated: this.onMeasurementsUpdated,\n    })\n\n    this.currentTimepointId = currentTimepointId\n    this.timepointApi = timepointApi\n    this.measurementApi = measurementApi\n\n    if (studies) {\n      const PatientID = studies[0] && studies[0].PatientID\n\n      timepointApi.retrieveTimepoints({ PatientID })\n      if (isStudyLoaded) {\n        this.measurementApi.retrieveMeasurements(PatientID, [\n          currentTimepointId,\n        ])\n      }\n\n      this.setState({\n        thumbnails: _mapStudiesToThumbnails(studies),\n      })\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    const { studies, isStudyLoaded } = this.props\n\n    if (studies !== prevProps.studies) {\n      this.setState({\n        thumbnails: _mapStudiesToThumbnails(studies),\n      })\n    }\n    if (isStudyLoaded && isStudyLoaded !== prevProps.isStudyLoaded) {\n      const PatientID = studies[0] && studies[0].PatientID\n      const { currentTimepointId } = this\n\n      this.timepointApi.retrieveTimepoints({ PatientID })\n      this.measurementApi.retrieveMeasurements(PatientID, [currentTimepointId])\n    }\n  }\n\n  render() {\n    let VisiblePanelLeft, VisiblePanelRight // eslint-disable-line\n    const panelExtensions = extensionManager.modules[MODULE_TYPES.PANEL]\n\n    panelExtensions.forEach(panelExt => {\n      panelExt.module.components.forEach(comp => {\n        if (comp.id === this.state.selectedRightSidePanel) {\n          VisiblePanelRight = comp.component\n        } else if (comp.id === this.state.selectedLeftSidePanel) {\n          VisiblePanelLeft = comp.component\n        }\n      })\n    })\n\n    return this.props.children({\n      state: this.state,\n      props: this.props,\n      onChange: this.setState,\n    })\n  }\n}\n\n/**\n * What types are these? Why do we have \"mapping\" dropped in here instead of in\n * a mapping layer?\n *\n * TODO[react]:\n * - Add showStackLoadingProgressBar option\n *\n * @param {Study[]} studies\n * @param {DisplaySet[]} studies[].displaySets\n */\nconst _mapStudiesToThumbnails = function (studies) {\n  return studies.map(study => {\n    const { StudyInstanceUID } = study\n\n    const thumbnails = study.displaySets.map(displaySet => {\n      const {\n        displaySetInstanceUID,\n        SeriesDescription,\n        InstanceNumber,\n        numImageFrames,\n        SeriesNumber,\n      } = displaySet\n\n      let imageId\n      let altImageText\n\n      if (displaySet.Modality && displaySet.Modality === 'SEG') {\n        // TODO: We want to replace this with a thumbnail showing\n        // the segmentation map on the image, but this is easier\n        // and better than what we have right now.\n        altImageText = 'SEG'\n      } else if (displaySet.images && displaySet.images.length) {\n        const imageIndex = Math.floor(displaySet.images.length / 2)\n\n        imageId = displaySet.images[imageIndex].getImageId()\n      } else {\n        altImageText = displaySet.Modality ? displaySet.Modality : 'UN'\n      }\n\n      return {\n        imageId,\n        altImageText,\n        displaySetInstanceUID,\n        SeriesDescription,\n        InstanceNumber,\n        numImageFrames,\n        SeriesNumber,\n      }\n    })\n\n    return {\n      StudyInstanceUID,\n      thumbnails,\n    }\n  })\n}\n\nconst { setTimepoints, setMeasurements } = OHIF.redux.actions\n\nconst getActiveServer = servers => {\n  const isActive = a => a.active === true\n  return servers.servers.find(isActive)\n}\n\nconst mapStateToProps = state => {\n  const { viewports, servers } = state\n  return {\n    viewports: viewports.viewportSpecificData,\n    activeViewportIndex: viewports.activeViewportIndex,\n    activeServer: getActiveServer(servers),\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    onTimepointsUpdated: timepoints => {\n      dispatch(setTimepoints(timepoints))\n    },\n    onMeasurementsUpdated: measurements => {\n      dispatch(setMeasurements(measurements))\n    },\n  }\n}\n\nconst ConnectedViewerWithStudies = connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(ViewerWithStudies)\n\nexport default ConnectedViewerWithStudies\n","import React, { useState, useEffect, useContext, useCallback } from 'react'\nimport { connect } from 'react-redux'\nimport { metadata, studies, utils, log, redux } from '@ohif/core'\nimport PropTypes from 'prop-types'\nimport usePrevious from '../hooks/usePrevious'\nimport ViewerWithStudies from './ViewerWithStudies'\nimport { extensionManager, AppContext } from '../AppContext'\n\nconst { OHIFStudyMetadata, OHIFSeriesMetadata } = metadata\nconst { retrieveStudiesMetadata, deleteStudyMetadataPromise } = studies\nconst { studyMetadataManager, makeCancelable } = utils\n\nconst _promoteToFront = (list, values, searchMethod) => {\n  let listCopy = [...list]\n  let response = []\n  let promotedCount = 0\n\n  const arrayValues = values.split(',')\n  arrayValues.forEach(value => {\n    const index = listCopy.findIndex(searchMethod.bind(undefined, value))\n\n    if (index >= 0) {\n      const [itemToPromote] = listCopy.splice(index, 1)\n      response[promotedCount] = itemToPromote\n      promotedCount++\n    }\n  })\n\n  return {\n    promoted: promotedCount === arrayValues.length,\n    data: [...response, ...listCopy],\n  }\n}\n\n/**\n * Promote series to front if find found equivalent on filters object\n * @param {Object} study - study reference to promote series against\n * @param {Object} [filters] - Object containing filters to be applied\n * @param {string} [filter.seriesInstanceUID] - series instance uid to filter results against\n * @param {boolean} isFilterStrategy - if filtering by query param strategy ON\n */\nconst _promoteList = (study, studyMetadata, filters, isFilterStrategy) => {\n  let promoted = false\n  // Promote only if no filter should be applied\n  if (!isFilterStrategy) {\n    promoted = _promoteStudyDisplaySet(study, studyMetadata, filters)\n  }\n\n  return promoted\n}\n\nconst _promoteStudyDisplaySet = (study, studyMetadata, filters) => {\n  let promoted = false\n  const queryParamsLength = Object.keys(filters).length\n  const shouldPromoteToFront = queryParamsLength > 0\n\n  if (shouldPromoteToFront) {\n    const { seriesInstanceUID } = filters\n\n    const _seriesLookup = (valueToCompare, displaySet) => {\n      return displaySet.SeriesInstanceUID === valueToCompare\n    }\n    const promotedResponse = _promoteToFront(\n      studyMetadata.getDisplaySets(),\n      seriesInstanceUID,\n      _seriesLookup\n    )\n\n    study.displaySets = promotedResponse.data\n    promoted = promotedResponse.promoted\n  }\n\n  return promoted\n}\n\n/**\n * Method to identify if query param (from url) was applied to given list\n * @param {Object} study - study reference to promote series against\n * @param {Object} [filters] - Object containing filters to be applied\n * @param {string} [filter.seriesInstanceUID] - series instance uid to filter results against\n * @param {boolean} isFilterStrategy - if filtering by query param strategy ON\n */\nconst _isQueryParamApplied = (study, filters = {}, isFilterStrategy) => {\n  const { seriesInstanceUID } = filters\n  let applied = true\n  // skip in case no filter or no toast manager\n  if (!seriesInstanceUID) {\n    return applied\n  }\n  const seriesInstanceUIDs = seriesInstanceUID.split(',')\n\n  let validateFilterApplied = () => {\n    const sameSize = arrayToInspect.length === seriesInstanceUIDs.length\n    if (!sameSize) {\n      return\n    }\n\n    return arrayToInspect.every(item =>\n      seriesInstanceUIDs.some(\n        seriesInstanceUIDStr => seriesInstanceUIDStr === item.SeriesInstanceUID\n      )\n    )\n  }\n\n  let validatePromoteApplied = () => {\n    let isValid = true\n    for (let index = 0; index < seriesInstanceUIDs.length; index++) {\n      const seriesInstanceUIDStr = seriesInstanceUIDs[index]\n      const resultSeries = arrayToInspect[index]\n\n      if (\n        !resultSeries ||\n        resultSeries.SeriesInstanceUID !== seriesInstanceUIDStr\n      ) {\n        isValid = false\n        break\n      }\n    }\n    return isValid\n  }\n\n  const { series = [], displaySets = [] } = study\n  const arrayToInspect = isFilterStrategy ? series : displaySets\n  const validateMethod = isFilterStrategy\n    ? validateFilterApplied\n    : validatePromoteApplied\n\n  if (!arrayToInspect) {\n    applied = false\n  } else {\n    applied = validateMethod()\n  }\n\n  return applied\n}\nconst _showUserMessage = (queryParamApplied, message, dialog = {}) => {\n  if (queryParamApplied) {\n    return\n  }\n\n  const { show: showUserMessage = () => {} } = dialog\n  showUserMessage({\n    message,\n  })\n}\n\nconst _addSeriesToStudy = (studyMetadata, series) => {\n  const sopClassHandlerModules =\n    extensionManager.modules['sopClassHandlerModule']\n  const study = studyMetadata.getData()\n  const seriesMetadata = new OHIFSeriesMetadata(series, study)\n  const existingSeries = studyMetadata.getSeriesByUID(series.SeriesInstanceUID)\n  if (existingSeries) {\n    studyMetadata.updateSeries(series.SeriesInstanceUID, seriesMetadata)\n  } else {\n    studyMetadata.addSeries(seriesMetadata)\n  }\n\n  studyMetadata.createAndAddDisplaySetsForSeries(\n    sopClassHandlerModules,\n    seriesMetadata\n  )\n\n  study.displaySets = studyMetadata.getDisplaySets()\n  study.derivedDisplaySets = studyMetadata.getDerivedDatasets({\n    Modality: series.Modality,\n  })\n\n  _updateStudyMetadataManager(study, studyMetadata)\n}\n\nconst _updateStudyMetadataManager = (study, studyMetadata) => {\n  const { StudyInstanceUID } = study\n\n  if (!studyMetadataManager.get(StudyInstanceUID)) {\n    studyMetadataManager.add(studyMetadata)\n  }\n}\n\nconst _updateStudyDisplaySets = (study, studyMetadata) => {\n  const sopClassHandlerModules =\n    extensionManager.modules['sopClassHandlerModule']\n\n  if (!study.displaySets) {\n    study.displaySets = studyMetadata.createDisplaySets(sopClassHandlerModules)\n  }\n\n  if (study.derivedDisplaySets) {\n    studyMetadata._addDerivedDisplaySets(study.derivedDisplaySets)\n  }\n}\n\nconst _thinStudyData = study => {\n  return {\n    StudyInstanceUID: study.StudyInstanceUID,\n    series: study.series.map(item => ({\n      SeriesInstanceUID: item.SeriesInstanceUID,\n    })),\n  }\n}\n\nfunction ViewerRetrieveStudyData({\n  server,\n  studyInstanceUIDs,\n  seriesInstanceUIDs,\n  clearViewportSpecificData,\n  setStudyData,\n  ...props\n}) {\n  // hooks\n  const [error, setError] = useState(false)\n  const [studies, setStudies] = useState([])\n  const [isStudyLoaded, setIsStudyLoaded] = useState(false)\n  const { appConfig = {} } = useContext(AppContext)\n  const {\n    filterQueryParam: isFilterStrategy = false,\n    maxConcurrentMetadataRequests,\n  } = appConfig\n\n  let cancelableSeriesPromises\n  let cancelableStudiesPromises\n  /**\n   * Callback method when study is totally loaded\n   * @param {object} study study loaded\n   * @param {object} studyMetadata studyMetadata for given study\n   * @param {Object} [filters] - Object containing filters to be applied\n   * @param {string} [filter.seriesInstanceUID] - series instance uid to filter results against\n   */\n  const studyDidLoad = (study, studyMetadata, filters) => {\n    // User message\n    const promoted = _promoteList(\n      study,\n      studyMetadata,\n      filters,\n      isFilterStrategy\n    )\n\n    // Clear viewport to allow new promoted one to be displayed\n    if (promoted) {\n      clearViewportSpecificData(0)\n    }\n\n    const isQueryParamApplied = _isQueryParamApplied(\n      study,\n      filters,\n      isFilterStrategy\n    )\n    // Show message in case not promoted neither filtered but should to\n    _showUserMessage(\n      isQueryParamApplied,\n      'Query parameters were not totally applied. It might be using original series list for given study.'\n    )\n\n    setStudies([...studies, study])\n    setIsStudyLoaded(true)\n  }\n\n  /**\n   * Method to process studies. It will update displaySet, studyMetadata, load remaining series, ...\n   * @param {Array} studiesData Array of studies retrieved from server\n   * @param {Object} [filters] - Object containing filters to be applied\n   * @param {string} [filters.seriesInstanceUID] - series instance uid to filter results against\n   */\n  const processStudies = (studiesData, filters) => {\n    if (Array.isArray(studiesData) && studiesData.length > 0) {\n      // Map studies to new format, update metadata manager?\n      const studies = studiesData.map(study => {\n        setStudyData(study.StudyInstanceUID, _thinStudyData(study))\n        const studyMetadata = new OHIFStudyMetadata(\n          study,\n          study.StudyInstanceUID\n        )\n\n        _updateStudyDisplaySets(study, studyMetadata)\n        _updateStudyMetadataManager(study, studyMetadata)\n\n        // Attempt to load remaning series if any\n        cancelableSeriesPromises[study.StudyInstanceUID] = makeCancelable(\n          loadRemainingSeries(studyMetadata)\n        )\n          .then(result => {\n            if (result && !result.isCanceled) {\n              studyDidLoad(study, studyMetadata, filters)\n            }\n          })\n          .catch(error => {\n            if (error && !error.isCanceled) {\n              setError(true)\n              log.error(error)\n            }\n          })\n\n        return study\n      })\n\n      setStudies(studies)\n    }\n  }\n\n  const forceRerender = () => setStudies(studies => [...studies])\n\n  const loadRemainingSeries = async studyMetadata => {\n    const { seriesLoader } = studyMetadata.getData()\n    if (!seriesLoader) return\n\n    const loadNextSeries = async () => {\n      if (!seriesLoader.hasNext()) return\n      const series = await seriesLoader.next()\n      _addSeriesToStudy(studyMetadata, series)\n      forceRerender()\n      return loadNextSeries()\n    }\n\n    const concurrentRequestsAllowed =\n      maxConcurrentMetadataRequests || studyMetadata.getSeriesCount()\n    const promises = Array(concurrentRequestsAllowed)\n      .fill(null)\n      .map(loadNextSeries)\n\n    return await Promise.all(promises)\n  }\n\n  const loadStudies = async () => {\n    try {\n      const filters = {}\n      // Use the first, discard others\n      const seriesInstanceUID = seriesInstanceUIDs && seriesInstanceUIDs[0]\n      const retrieveParams = [server, studyInstanceUIDs]\n\n      if (seriesInstanceUID) {\n        filters.seriesInstanceUID = seriesInstanceUID\n        // Query param filtering controlled by appConfig property\n        if (isFilterStrategy) {\n          retrieveParams.push(filters)\n        }\n      }\n\n      cancelableStudiesPromises[studyInstanceUIDs] = makeCancelable(\n        retrieveStudiesMetadata(...retrieveParams)\n      )\n        .then(result => {\n          if (result && !result.isCanceled) {\n            processStudies(result, filters)\n          }\n        })\n        .catch(error => {\n          if (error && !error.isCanceled) {\n            setError(true)\n            log.error(error)\n          }\n        })\n    } catch (error) {\n      if (error) {\n        setError(true)\n        log.error(error)\n      }\n    }\n  }\n\n  const purgeCancellablePromises = useCallback(() => {\n    for (let studyInstanceUIDs in cancelableStudiesPromises) {\n      if ('cancel' in cancelableStudiesPromises[studyInstanceUIDs]) {\n        cancelableStudiesPromises[studyInstanceUIDs].cancel()\n      }\n    }\n\n    for (let studyInstanceUIDs in cancelableSeriesPromises) {\n      if ('cancel' in cancelableSeriesPromises[studyInstanceUIDs]) {\n        cancelableSeriesPromises[studyInstanceUIDs].cancel()\n        deleteStudyMetadataPromise(studyInstanceUIDs)\n        studyMetadataManager.remove(studyInstanceUIDs)\n      }\n    }\n  }, [cancelableStudiesPromises, cancelableSeriesPromises])\n\n  const prevStudyInstanceUIDs = usePrevious(studyInstanceUIDs)\n\n  useEffect(() => {\n    const hasStudyInstanceUIDsChanged = !(\n      prevStudyInstanceUIDs &&\n      prevStudyInstanceUIDs.every(e => studyInstanceUIDs.includes(e))\n    )\n\n    if (hasStudyInstanceUIDsChanged) {\n      studyMetadataManager.purge()\n      purgeCancellablePromises()\n    }\n  }, [prevStudyInstanceUIDs, purgeCancellablePromises, studyInstanceUIDs])\n\n  useEffect(() => {\n    cancelableSeriesPromises = {} // eslint-disable-line\n    cancelableStudiesPromises = {} // eslint-disable-line\n    loadStudies()\n\n    return () => {\n      purgeCancellablePromises()\n    }\n  }, [])\n\n  if (error) {\n    return <div>Error: {JSON.stringify(error)}</div>\n  }\n\n  return (\n    <ViewerWithStudies\n      {...props}\n      studies={studies}\n      isStudyLoaded={isStudyLoaded}\n      studyInstanceUIDs={studyInstanceUIDs}\n    />\n  )\n}\n\nViewerRetrieveStudyData.propTypes = {\n  studyInstanceUIDs: PropTypes.array.isRequired,\n  seriesInstanceUIDs: PropTypes.array,\n  server: PropTypes.object,\n  clearViewportSpecificData: PropTypes.func.isRequired,\n  setStudyData: PropTypes.func.isRequired,\n}\n\nconst { clearViewportSpecificData, setStudyData } = redux.actions\n\nconst isActive = a => a.active === true\n\nconst mapStateToProps = (state, ownProps) => {\n  const activeServer = state.servers.servers.find(isActive)\n\n  return {\n    server: ownProps.server || activeServer,\n  }\n}\nconst mapDispatchToProps = dispatch => {\n  return {\n    setStudyData: (StudyInstanceUID, data) => {\n      dispatch(setStudyData(StudyInstanceUID, data))\n    },\n    clearViewportSpecificData: () => {\n      dispatch(clearViewportSpecificData())\n    },\n  }\n}\n\nconst ConnectedViewerRetrieveStudyData = connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(ViewerRetrieveStudyData)\n\nexport default ConnectedViewerRetrieveStudyData\n","import { useContext } from 'react'\nimport { useSelector, useDispatch } from 'react-redux'\n\nimport usePrevious from './usePrevious'\n\n// Contexts\nimport { AppContext } from '../AppContext'\n\nconst getActiveServer = servers => {\n  const isActive = a => a.active === true\n\n  return servers && servers.servers && servers.servers.find(isActive)\n}\n\nconst getServers = (appConfig, project, location, dataset, dicomStore) => {\n  let servers = []\n\n  return servers\n}\n\nconst isValidServer = (server, appConfig) => {\n  return !!server\n}\n\nconst setServers = (dispatch, servers) => {\n  const action = {\n    type: 'SET_SERVERS',\n    servers,\n  }\n  dispatch(action)\n}\n\nconst useServerFromUrl = (\n  servers = [],\n  previousServers,\n  activeServer,\n  urlBasedServers,\n  appConfig,\n  project,\n  location,\n  dataset,\n  dicomStore\n) => {\n  // update state from url available only when gcloud on\n  if (!appConfig.enableGoogleCloudAdapter) {\n    return false\n  }\n\n  const serverHasChanged = previousServers !== servers && previousServers\n\n  // do not update from url. use state instead.\n  if (serverHasChanged) {\n    return false\n  }\n\n  // if no valid urlbased servers\n  if (!urlBasedServers || !urlBasedServers.length) {\n    return false\n  } else if (!servers.length || !activeServer) {\n    // no current valid server\n    return true\n  }\n\n  // const newServer = urlBasedServers[0]\n\n  let exists = servers.some(\n    // GoogleCloudUtilServers.isEqualServer.bind(undefined, newServer)\n  )\n\n  return !exists\n}\n\nexport default function useServer({\n  project,\n  location,\n  dataset,\n  dicomStore,\n} = {}) {\n  // Hooks\n  const servers = useSelector(state => state && state.servers)\n  const previousServers = usePrevious(servers)\n  const dispatch = useDispatch()\n\n  const { appConfig = {} } = useContext(AppContext)\n\n  const activeServer = getActiveServer(servers)\n  const urlBasedServers =\n    getServers(appConfig, project, location, dataset, dicomStore) || []\n  const shouldUpdateServer = useServerFromUrl(\n    servers.servers,\n    previousServers,\n    activeServer,\n    urlBasedServers,\n    appConfig,\n    project,\n    location,\n    dataset,\n    dicomStore\n  )\n\n  if (shouldUpdateServer) {\n    setServers(dispatch, urlBasedServers)\n  } else if (isValidServer(activeServer, appConfig)) {\n    return activeServer\n  }\n}\n","import React from 'react'\nimport { useRouteMatch, useLocation } from 'react-router-dom'\nimport PropTypes from 'prop-types'\nimport { utils } from '@ohif/core'\nimport ViewerRetrieveStudyData from './components/ViewerRetrieveStudyData'\nimport useServer from './hooks/useServer'\n\nconst { urlUtil: UrlUtil } = utils\n\nfunction App(props) {\n  const {\n    project,\n    location,\n    dataset,\n    dicomStore,\n    studyInstanceUIDs,\n    seriesInstanceUIDs,\n  } = useRouteMatch().params\n\n  const routeLocation = useLocation()\n\n  const server = useServer({ project, location, dataset, dicomStore })\n  const studyUIDs = UrlUtil.paramString.parseParam(studyInstanceUIDs)\n  const seriesUIDs = getSeriesInstanceUIDs(seriesInstanceUIDs, routeLocation)\n\n  if (server && studyUIDs) {\n    return (\n      <ViewerRetrieveStudyData\n        {...props}\n        studyInstanceUIDs={studyUIDs}\n        seriesInstanceUIDs={seriesUIDs}\n      />\n    )\n  }\n\n  return null\n}\n\n/**\n * Get array of seriesUIDs from param or from queryString\n * @param {*} seriesInstanceUIDs\n * @param {*} location\n */\nconst getSeriesInstanceUIDs = (seriesInstanceUIDs, routeLocation) => {\n  const queryFilters = UrlUtil.queryString.getQueryFilters(routeLocation)\n  const querySeriesUIDs = queryFilters && queryFilters['seriesInstanceUID']\n  const _seriesInstanceUIDs = seriesInstanceUIDs || querySeriesUIDs\n\n  return UrlUtil.paramString.parseParam(_seriesInstanceUIDs)\n}\n\nApp.propTypes = {\n  config: PropTypes.oneOfType([\n    PropTypes.func,\n    PropTypes.shape({\n      extensions: PropTypes.array,\n    }),\n  ]),\n  defaultExtensions: PropTypes.array,\n  children: PropTypes.node,\n}\n\nexport default App\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\nexport function ViewportErrorIndicator(props) {\n  return (\n    <div\n      className=\"loadingIndicator\"\n      style={{\n        position: 'absolute',\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n        margin: 'auto',\n        textAlign: 'center',\n        pointerEvents: 'none',\n      }}>\n      <p>Error</p>\n      <p className=\"description\">An error has occurred.</p>\n      <p className=\"details\">{props.details}</p>\n    </div>\n  )\n}\n\nViewportErrorIndicator.propTypes = {\n  details: PropTypes.string,\n}\n\nexport default ViewportErrorIndicator\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\nexport function ViewportLoadingIndicator(props) {\n  return (\n    <div\n      className=\"loading-indicator\"\n      style={{\n        position: 'absolute',\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n        margin: 'auto',\n        textAlign: 'center',\n        pointerEvents: 'none',\n      }}>\n      {props.percentComplete}\n    </div>\n  )\n}\n\nViewportLoadingIndicator.propTypes = {\n  percentComplete: PropTypes.number,\n}\n\nexport default ViewportLoadingIndicator\n","/* global cornerstone */\n\nimport { utils } from '@ohif/core'\nimport React, { useState, useEffect, createRef } from 'react'\nimport styled, { keyframes } from 'styled-components'\nimport PropTypes from 'prop-types'\nimport ViewportErrorIndicator from './ViewportErrorIndicator'\nimport ViewportLoadingIndicator from './ViewportLoadingIndicator'\n\n// TODO: How should we have this component depend on Cornerstone?\n// - Passed in as a prop?\n// - Set as external dependency?\n// - Pass in the entire load and render function as a prop?\n//import cornerstone from 'cornerstone-core';\nfunction ImageThumbnail(props) {\n  const {\n    width,\n    height,\n    imageSrc,\n    imageId,\n    stackPercentComplete,\n    error: propsError,\n  } = props\n\n  const [isLoading, setLoading] = useState(false)\n  const [error, setError] = useState(false)\n  const [image, setImage] = useState({})\n  const canvasRef = createRef()\n\n  let loadingOrError\n  let cancelablePromise\n\n  if (propsError || error) {\n    loadingOrError = <ViewportErrorIndicator />\n  } else if (isLoading) {\n    loadingOrError = <ViewportLoadingIndicator />\n  }\n\n  const showStackLoadingProgressBar = stackPercentComplete !== undefined\n\n  const shouldRenderToCanvas = () => {\n    return imageId && !imageSrc\n  }\n\n  // eslint-disable-next-line\n  const fetchImagePromise = () => {\n    if (!cancelablePromise) {\n      return\n    }\n\n    setLoading(true)\n    cancelablePromise\n      .then(response => {\n        setImage(response)\n      })\n      .catch(error => {\n        if (error.isCanceled) return\n        setLoading(false)\n        setError(true)\n        throw new Error(error)\n      })\n  }\n\n  // eslint-disable-next-line\n  const setImagePromise = () => {\n    if (shouldRenderToCanvas()) {\n      cancelablePromise = utils.makeCancelable(\n        cornerstone.loadAndCacheImage(imageId)\n      )\n    }\n  }\n\n  // eslint-disable-next-line\n  const purgeCancelablePromise = () => {\n    if (cancelablePromise) {\n      cancelablePromise.cancel()\n    }\n  }\n\n  useEffect(() => {\n    return () => {\n      purgeCancelablePromise()\n    }\n  }, [purgeCancelablePromise])\n\n  useEffect(() => {\n    if (image.imageId) {\n      cornerstone.renderToCanvas(canvasRef.current, image)\n      setLoading(false)\n    }\n  }, [canvasRef, image, image.imageId])\n\n  useEffect(() => {\n    if (!image.imageId || image.imageId !== imageId) {\n      purgeCancelablePromise()\n      setImagePromise()\n      fetchImagePromise()\n    }\n  }, [\n    fetchImagePromise,\n    image.imageId,\n    imageId,\n    purgeCancelablePromise,\n    setImagePromise,\n  ])\n\n  return (\n    <ImageThumbnailWrapper className=\"ImageThumbnail\">\n      <div className=\"image-thumbnail-canvas\">\n        {shouldRenderToCanvas() ? (\n          <canvas ref={canvasRef} width={width} height={height} />\n        ) : (\n          <img\n            className=\"static-image\"\n            src={imageSrc}\n            //width={this.props.width}\n            height={height}\n            alt={''}\n          />\n        )}\n      </div>\n      {loadingOrError}\n      {showStackLoadingProgressBar && (\n        <div className=\"image-thumbnail-progress-bar\">\n          <div\n            className=\"image-thumbnail-progress-bar-inner\"\n            style={{ width: `${stackPercentComplete}%` }}\n          />\n        </div>\n      )}\n      {isLoading && <div className=\"image-thumbnail-loading-indicator\"></div>}\n    </ImageThumbnailWrapper>\n  )\n}\n\nconst imageThumbnailLoadingIndicator = keyframes`\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n`\n\nconst ImageThumbnailWrapper = styled.div`\n  .ThumbnailEntry.active .ImageThumbnail {\n    box-shadow: none;\n    transition: all 0.3s ease;\n  }\n\n  &.ImageThumbnail {\n    border-radius: 12px;\n    height: 135px;\n    margin: 0 auto;\n    padding 5px;\n    position: relative;\n    transition: all 0.3s ease;\n    width: 217px;\n    background-clip: padding-box;\n\n    .image-thumbnail-loading-indicator {\n      position: absolute;\n      left: 50%;\n      top: 50%;\n      margin: -22px 0 0 -22px;\n      display: block;\n      width: 44px;\n      height: 44px;\n\n      &:after {\n        content: \" \";\n        display: block;\n        width: 32px;\n        height: 32px;\n        margin: 1px;\n        border-radius: 50%;\n        border: 5px solid ${p => p.theme.primary};\n        border-color: ${p => p.theme.primary} transparent;\n        animation: ${imageThumbnailLoadingIndicator} 1.2s linear infinite;\n      }\n    }\n  }\n\n  .image-thumbnail-canvas {\n    height: 100%;\n    overflow: hidden;\n    display: flex;\n    justify-content: center;\n\n    img {\n      -webkit-user-drag: none;\n      pointer-events: none;\n    }\n  }\n\n  .thumbnailLoadingIndicator {\n    display: none;\n    pointer-events: none;\n    height: 20px;\n    width: 100%;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    margin: auto;\n    position: absolute;\n\n    &.d-block {\n      display: block;\n    }\n\n    p {\n      text-align: center;\n      font-size: 10pt;\n    }\n  }\n\n  .image-thumbnail-progress-bar {\n    position: relative;\n    width: 100%;\n    height: 3px;\n    top: -5px;\n\n    .image-thumbnail-progress-bar-inner {\n      height: 100%;\n      width: 0;\n      border-radius: 5px;\n    }\n  }\n`\n\nImageThumbnail.propTypes = {\n  imageSrc: PropTypes.string,\n  imageId: PropTypes.string,\n  error: PropTypes.bool,\n  width: PropTypes.number,\n  height: PropTypes.number,\n  stackPercentComplete: PropTypes.number.isRequired,\n}\n\nImageThumbnail.defaultProps = {\n  error: false,\n  stackPercentComplete: 0,\n  width: 217,\n  height: 123,\n}\n\nexport default ImageThumbnail\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { useDrag } from 'react-dnd'\nimport classNames from 'classnames'\nimport styled from 'styled-components'\nimport ImageThumbnail from './ImageThumbnail'\n\nfunction ThumbnailFooter({\n  SeriesDescription,\n  SeriesNumber,\n  InstanceNumber,\n  numImageFrames,\n}) {\n  const infoOnly = !SeriesDescription\n\n  const getInfo = (value, icon, className = '') => {\n    return (\n      <div\n        className={classNames('item item-series flex items-center', className)}>\n        <div className=\"icon\">{icon}</div>\n        <div className=\"value\">{value}</div>\n      </div>\n    )\n  }\n  const getSeriesInformation = (\n    SeriesNumber,\n    InstanceNumber,\n    numImageFrames\n  ) => {\n    if (!SeriesNumber && !InstanceNumber && !numImageFrames) {\n      return\n    }\n\n    return (\n      <div className=\"series-information\">\n        {getInfo(SeriesNumber, 'S:')}\n        {getInfo(InstanceNumber, 'I:')}\n        {getInfo(numImageFrames, '', 'image-frames')}\n      </div>\n    )\n  }\n\n  return (\n    <div className={classNames('series-details', { 'info-only': infoOnly })}>\n      <div className=\"series-description\">{SeriesDescription}</div>\n      {getSeriesInformation(SeriesNumber, InstanceNumber, numImageFrames)}\n    </div>\n  )\n}\n\nfunction Thumbnail(props) {\n  const {\n    active,\n    altImageText,\n    error,\n    displaySetInstanceUID,\n    imageId,\n    imageSrc,\n    // InstanceNumber,\n    // numImageFrames,\n    // SeriesDescription,\n    // SeriesNumber,\n    stackPercentComplete,\n    StudyInstanceUID,\n    onClick,\n    onDoubleClick,\n    onMouseDown,\n    supportsDrag,\n  } = props\n\n  const [, drag] = useDrag({\n    // `droppedItem` in `dropTarget`\n    // The only data it will have access to\n    item: {\n      StudyInstanceUID,\n      displaySetInstanceUID,\n      type: 'thumbnail', // Has to match `dropTarget`'s type\n    },\n    canDrag: function (monitor) {\n      return supportsDrag\n    },\n  })\n\n  const hasImage = imageSrc || imageId\n  const hasAltText = altImageText !== undefined\n\n  return (\n    <ThumbnailWrapper\n      ref={drag}\n      className={classNames('thumbnail', { active: active })}\n      onClick={onClick}\n      onDoubleClick={onDoubleClick}\n      onMouseDown={onMouseDown}>\n      {/* SHOW IMAGE */}\n      {hasImage && (\n        <ImageThumbnail\n          imageSrc={imageSrc}\n          imageId={imageId}\n          error={error}\n          stackPercentComplete={stackPercentComplete}\n        />\n      )}\n      {/* SHOW TEXT ALTERNATIVE */}\n      {!hasImage && hasAltText && (\n        <div className={'alt-image-text p-x-1'}>\n          <h1>{altImageText}</h1>\n        </div>\n      )}\n      {ThumbnailFooter(props)}\n    </ThumbnailWrapper>\n  )\n}\n\nconst ThumbnailWrapper = styled.div`\n  &.thumbnail {\n    cursor: pointer;\n    display: table;\n    margin: 0 auto;\n    min-width: 90%;\n    padding-bottom: 0.75rem;\n    /* border: 1px solid transparent;\n    transition: all 0.3s;\n\n    &:hover {\n      border: 1px solid ${p => p.theme.primary};\n    } */\n\n    .alt-image-text {\n      align-items: center;\n      justify-content: center;\n      border: 5px solid transparent;\n      border-radius: 12px;\n      height: 135px;\n      margin: 0 auto;\n      padding: 5px;\n      position: relative;\n      transition: all 0.3s ease;\n      width: 217px;\n      display: flex;\n\n      h1 {\n        text-align: center;\n      }\n    }\n\n    .series-details {\n      display: flex;\n      flex-direction: column;\n      font-size: 14px\n      line-height: 1.3em;\n      margin-top: 5px;\n      margin-right: 0.5rem;\n      max-width: 100%;\n      position: relative;\n      word-wrap: break-word;\n\n      .series-description {\n        flex-grow: 1;\n      }\n\n      &.info-only .series-description {\n        display: none;\n      }\n    }\n\n    .series-information {\n      display: flex;\n      flex-direction: row;\n      justify-content: space-between;\n      align-items: center;\n\n      .item-frames .icon {\n        height: 18px;\n      }\n\n      .item-series.image-frames .icon {\n        background-color: #678696;\n        margin-top: 6px;\n        position: relative;\n\n        &:after {\n          content: ''\n          background-color: #20a5d6;\n          box-shadow: 1px 1px rgba(0, 0, 0, .115);\n          left: -4px;\n          position: absolute;\n          top: -4px;\n        }\n\n        &:after {\n          content: '';\n          border: 0px solid #678696;\n          display: inline-block;\n          height: 11px;\n          width: 11px;\n        }\n      }\n\n      .value {\n        display: inline-block;\n        font-size: 12px;\n        margin-left: 4px;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        width: calc(100% - 15px);\n        vertical-align: middle;\n      }\n\n      .icon  {\n        display: inline-block;\n        font-size: 10px;\n        font-weight: 900;\n        text-align: right;\n        width: 11px;\n      }\n    }\n  }\n`\n\nconst noop = () => {}\n\nThumbnail.propTypes = {\n  supportsDrag: PropTypes.bool,\n  id: PropTypes.string.isRequired,\n  displaySetInstanceUID: PropTypes.string.isRequired,\n  StudyInstanceUID: PropTypes.string.isRequired,\n  imageSrc: PropTypes.string,\n  imageId: PropTypes.string,\n  error: PropTypes.bool,\n  active: PropTypes.bool,\n  stackPercentComplete: PropTypes.number,\n  /**\n  altImageText will be used when no imageId or imageSrc is provided.\nIt will be displayed inside the <div>. This is useful when it is difficult\n  to make a preview for a type of DICOM series (e.g. DICOM-SR)\n  */\n  altImageText: PropTypes.string,\n  SeriesDescription: PropTypes.string,\n  SeriesNumber: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  InstanceNumber: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  numImageFrames: PropTypes.number,\n  onDoubleClick: PropTypes.func,\n  onClick: PropTypes.func,\n  onMouseDown: PropTypes.func,\n}\n\nThumbnail.defaultProps = {\n  supportsDrag: false,\n  active: false,\n  error: false,\n  stackPercentComplete: 0,\n  onDoubleClick: noop,\n  onClick: noop,\n  onMouseDown: noop,\n}\n\nexport default Thumbnail\n","import classNames from 'classnames'\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport Transition, {\n  ENTERED,\n  ENTERING,\n} from 'react-transition-group/Transition'\n\nconst propTypes = {\n  /**\n   * Show the component; triggers the fade in or fade out animation\n   */\n  in: PropTypes.bool,\n\n  /**\n   * Wait until the first \"enter\" transition to mount the component (add it to the DOM)\n   */\n  mountOnEnter: PropTypes.bool,\n\n  /**\n   * Unmount the component (remove it from the DOM) when it is faded out\n   */\n  unmountOnExit: PropTypes.bool,\n\n  /**\n   * Run the fade in animation when the component mounts, if it is initially\n   * shown\n   */\n  appear: PropTypes.bool,\n\n  /**\n   * Duration of the fade animation in milliseconds, to ensure that finishing\n   * callbacks are fired even if the original browser transition end events are\n   * canceled\n   */\n  timeout: PropTypes.number,\n\n  /**\n   * Callback fired before the component fades in\n   */\n  onEnter: PropTypes.func,\n  /**\n   * Callback fired after the component starts to fade in\n   */\n  onEntering: PropTypes.func,\n  /**\n   * Callback fired after the has component faded in\n   */\n  onEntered: PropTypes.func,\n  /**\n   * Callback fired before the component fades out\n   */\n  onExit: PropTypes.func,\n  /**\n   * Callback fired after the component starts to fade out\n   */\n  onExiting: PropTypes.func,\n  /**\n   * Callback fired after the component has faded out\n   */\n  onExited: PropTypes.func,\n}\n\nconst defaultProps = {\n  in: false,\n  timeout: 300,\n  mountOnEnter: false,\n  unmountOnExit: false,\n  appear: false,\n}\n\nconst fadeStyles = {\n  [ENTERING]: 'in',\n  [ENTERED]: 'in',\n}\n\nclass Fade extends React.Component {\n  render() {\n    const { className, children, ...props } = this.props\n\n    return (\n      <Transition {...props}>\n        {(status, innerProps) =>\n          React.cloneElement(children, {\n            ...innerProps,\n            className: classNames(\n              'fade',\n              className,\n              children.props.className,\n              fadeStyles[status]\n            ),\n          })\n        }\n      </Transition>\n    )\n  }\n}\n\nFade.propTypes = propTypes\nFade.defaultProps = defaultProps\n\nexport default Fade\n","import classNames from 'classnames'\nimport React, { cloneElement } from 'react'\nimport PropTypes from 'prop-types'\nimport { Overlay as BaseOverlay } from 'react-overlays'\nimport elementType from 'prop-types-extra/lib/elementType'\n\nimport Fade from './Fade'\n\nconst propTypes = {\n  /**\n   * Set the visibility of the Overlay\n   */\n  show: PropTypes.bool,\n  /**\n   * Specify whether the overlay should trigger onHide when the user clicks outside the overlay\n   */\n  rootClose: PropTypes.bool,\n  /**\n   * A callback invoked by the overlay when it wishes to be hidden. Required if\n   * `rootClose` is specified.\n   */\n  onHide: PropTypes.func,\n\n  /**\n   * Use animation\n   */\n  animation: PropTypes.oneOfType([PropTypes.bool, elementType]),\n\n  /**\n   * Callback fired before the Overlay transitions in\n   */\n  onEnter: PropTypes.func,\n\n  /**\n   * Callback fired as the Overlay begins to transition in\n   */\n  onEntering: PropTypes.func,\n\n  /**\n   * Callback fired after the Overlay finishes transitioning in\n   */\n  onEntered: PropTypes.func,\n\n  /**\n   * Callback fired right before the Overlay transitions out\n   */\n  onExit: PropTypes.func,\n\n  /**\n   * Callback fired as the Overlay begins to transition out\n   */\n  onExiting: PropTypes.func,\n\n  /**\n   * Callback fired after the Overlay finishes transitioning out\n   */\n  onExited: PropTypes.func,\n\n  /**\n   * Sets the direction of the Overlay.\n   */\n  placement: PropTypes.oneOf(['top', 'right', 'bottom', 'left']),\n}\n\nconst defaultProps = {\n  animation: Fade,\n  rootClose: false,\n  show: false,\n  placement: 'right',\n}\n\nclass Overlay extends React.Component {\n  render() {\n    const { animation, children, ...props } = this.props\n\n    const transition = animation === true ? Fade : animation || null\n\n    let child\n\n    if (!transition) {\n      child = cloneElement(children, {\n        className: classNames(children.props.className, 'in'),\n      })\n    } else {\n      child = children\n    }\n\n    // let C = child\n\n    return (\n      <BaseOverlay {...props} transition={transition}>\n        {child}\n      </BaseOverlay>\n    )\n  }\n}\n\nOverlay.propTypes = propTypes\nOverlay.defaultProps = defaultProps\n\nexport default Overlay\n","import contains from 'dom-helpers/contains'\nimport React, { cloneElement } from 'react'\nimport PropTypes from 'prop-types'\nimport ReactDOM from 'react-dom'\nimport warning from 'warning'\n\nimport Overlay from './Overlay'\n\n/**\n * Safe chained function\n *\n * Will only create a new function if needed,\n * otherwise will pass back existing functions or null.\n *\n * @param {function} functions to chain\n * @returns {function|null}\n */\nfunction createChainedFunction(...funcs) {\n  return funcs\n    .filter(f => f != null)\n    .reduce((acc, f) => {\n      // if (typeof f !== 'function') {\n      //   throw new Error(\n      //     'Invalid Argument Type, must only provide functions, undefined, or null.'\n      //   )\n      // }\n\n      if (acc === null) {\n        return f\n      }\n\n      return function chainedFunction(...args) {\n        acc.apply(this, args)\n        f.apply(this, args)\n      }\n    }, null)\n}\n\n/**\n * Check if value one is inside or equal to the of value\n *\n * @param {string} one\n * @param {string|array} of\n * @returns {boolean}\n */\nfunction isOneOf(one, of) {\n  if (Array.isArray(of)) {\n    return of.indexOf(one) >= 0\n  }\n  return one === of\n}\n\nconst triggerType = PropTypes.oneOf(['click', 'hover', 'focus'])\n\nconst propTypes = {\n  /**\n   * Specify which action or actions trigger Overlay visibility\n   */\n  trigger: PropTypes.oneOfType([triggerType, PropTypes.arrayOf(triggerType)]),\n\n  /**\n   * A millisecond delay amount to show and hide the Overlay once triggered\n   */\n  delay: PropTypes.number,\n  /**\n   * A millisecond delay amount before showing the Overlay once triggered.\n   */\n  delayShow: PropTypes.number,\n  /**\n   * A millisecond delay amount before hiding the Overlay once triggered.\n   */\n  delayHide: PropTypes.number,\n\n  // FIXME: This should be `defaultShow`.\n  /**\n   * The initial visibility state of the Overlay. For more nuanced visibility\n   * control, consider using the Overlay component directly.\n   */\n  defaultOverlayShown: PropTypes.bool,\n\n  /**\n   * An element or text to overlay next to the target.\n   */\n  overlay: PropTypes.node.isRequired,\n\n  /**\n   * A function to be called once the hide is triggered\n   */\n  handleHide: PropTypes.func,\n\n  /**\n   * @private\n   */\n  onBlur: PropTypes.func,\n  /**\n   * @private\n   */\n  onClick: PropTypes.func,\n  /**\n   * @private\n   */\n  onFocus: PropTypes.func,\n  /**\n   * @private\n   */\n  onMouseOut: PropTypes.func,\n  /**\n   * @private\n   */\n  onMouseOver: PropTypes.func,\n\n  // Overridden props from `<Overlay>`.\n  /**\n   * @private\n   */\n  target: PropTypes.oneOf([null]),\n  /**\n   * @private\n   */\n  onHide: PropTypes.oneOf([null]),\n  /**\n   * @private\n   */\n  show: PropTypes.oneOf([null]),\n}\n\nconst defaultProps = {\n  defaultOverlayShown: false,\n  trigger: ['hover', 'focus'],\n}\n\nclass OverlayTrigger extends React.Component {\n  constructor(props, context) {\n    super(props, context)\n\n    this.handleToggle = this.handleToggle.bind(this)\n    this.handleDelayedShow = this.handleDelayedShow.bind(this)\n    this.handleDelayedHide = this.handleDelayedHide.bind(this)\n    this.handleHide = createChainedFunction(\n      this.handleHide.bind(this),\n      props.handleHide\n    )\n\n    this.handleMouseOver = e =>\n      this.handleMouseOverOut(this.handleDelayedShow, e, 'fromElement')\n    this.handleMouseOut = e =>\n      this.handleMouseOverOut(this.handleDelayedHide, e, 'toElement')\n\n    this._mountNode = null\n\n    this.state = {\n      show: props.defaultOverlayShown,\n    }\n  }\n\n  componentDidMount() {\n    this._mountNode = document.createElement('div')\n    this.renderOverlay()\n  }\n\n  componentDidUpdate() {\n    this.renderOverlay()\n  }\n\n  componentWillUnmount() {\n    ReactDOM.unmountComponentAtNode(this._mountNode)\n    this._mountNode = null\n\n    clearTimeout(this._hoverShowDelay)\n    clearTimeout(this._hoverHideDelay)\n  }\n\n  handleDelayedHide() {\n    if (this._hoverShowDelay != null) {\n      clearTimeout(this._hoverShowDelay)\n      this._hoverShowDelay = null\n      return\n    }\n\n    if (!this.state.show || this._hoverHideDelay != null) {\n      return\n    }\n\n    const delay =\n      this.props.delayHide != null ? this.props.delayHide : this.props.delay\n\n    if (!delay) {\n      this.hide()\n      return\n    }\n\n    this._hoverHideDelay = setTimeout(() => {\n      this._hoverHideDelay = null\n      this.hide()\n    }, delay)\n  }\n\n  handleDelayedShow() {\n    if (this._hoverHideDelay != null) {\n      clearTimeout(this._hoverHideDelay)\n      this._hoverHideDelay = null\n      return\n    }\n\n    if (this.state.show || this._hoverShowDelay != null) {\n      return\n    }\n\n    const delay =\n      this.props.delayShow != null ? this.props.delayShow : this.props.delay\n\n    if (!delay) {\n      this.show()\n      return\n    }\n\n    this._hoverShowDelay = setTimeout(() => {\n      this._hoverShowDelay = null\n      this.show()\n    }, delay)\n  }\n\n  handleHide() {\n    this.hide()\n  }\n\n  // Simple implementation of mouseEnter and mouseLeave.\n  // React's built version is broken: https://github.com/facebook/react/issues/4251\n  // for cases when the trigger is disabled and mouseOut/Over can cause flicker\n  // moving from one child element to another.\n  handleMouseOverOut(handler, e, relatedNative) {\n    const target = e.currentTarget\n    const related = e.relatedTarget || e.nativeEvent[relatedNative]\n\n    if ((!related || related !== target) && !contains(target, related)) {\n      handler(e)\n    }\n  }\n\n  handleToggle() {\n    if (this.state.show) {\n      this.hide()\n    } else {\n      this.show()\n    }\n  }\n\n  hide() {\n    this.setState({ show: false })\n  }\n\n  makeOverlay(overlay, props) {\n    return (\n      <Overlay\n        {...props}\n        show={this.state.show}\n        onHide={this.handleHide}\n        target={this}>\n        {overlay}\n      </Overlay>\n    )\n  }\n\n  show() {\n    this.setState({ show: true })\n  }\n\n  renderOverlay() {\n    ReactDOM.unstable_renderSubtreeIntoContainer(\n      this,\n      this._overlay,\n      this._mountNode\n    )\n  }\n\n  render() {\n    const {\n      trigger,\n      overlay,\n      children,\n      onBlur,\n      onClick,\n      onFocus,\n      onMouseOut,\n      onMouseOver,\n      ...props\n    } = this.props\n\n    delete props.delay\n    delete props.delayShow\n    delete props.delayHide\n    delete props.defaultOverlayShown\n\n    const child = React.Children.only(children)\n    const childProps = child.props\n    const triggerProps = {}\n\n    if (this.state.show) {\n      triggerProps['aria-describedby'] = overlay.props.id\n    }\n\n    // FIXME: The logic here for passing through handlers on this component is\n    // inconsistent. We shouldn't be passing any of these props through.\n\n    triggerProps.onClick = createChainedFunction(childProps.onClick, onClick)\n\n    if (isOneOf('click', trigger)) {\n      triggerProps.onClick = createChainedFunction(\n        triggerProps.onClick,\n        this.handleToggle\n      )\n    }\n\n    if (isOneOf('hover', trigger)) {\n      warning(\n        !(trigger === 'hover'),\n        '[react-bootstrap] Specifying only the `\"hover\"` trigger limits the ' +\n          'visibility of the overlay to just mouse users. Consider also ' +\n          'including the `\"focus\"` trigger so that touch and keyboard only ' +\n          'users can see the overlay as well.'\n      )\n\n      triggerProps.onMouseOver = createChainedFunction(\n        childProps.onMouseOver,\n        onMouseOver,\n        this.handleMouseOver\n      )\n      triggerProps.onMouseOut = createChainedFunction(\n        childProps.onMouseOut,\n        onMouseOut,\n        this.handleMouseOut\n      )\n    }\n\n    if (isOneOf('focus', trigger)) {\n      triggerProps.onFocus = createChainedFunction(\n        childProps.onFocus,\n        onFocus,\n        this.handleDelayedShow\n      )\n      triggerProps.onBlur = createChainedFunction(\n        childProps.onBlur,\n        onBlur,\n        this.handleDelayedHide\n      )\n    }\n\n    this._overlay = this.makeOverlay(overlay, props)\n\n    return cloneElement(child, triggerProps)\n  }\n}\n\nOverlayTrigger.propTypes = propTypes\nOverlayTrigger.defaultProps = defaultProps\n\nexport default OverlayTrigger\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"Adjust\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M12 22.5v-17c-4.688 0-8.5 3.813-8.5 8.5s3.813 8.5 8.5 8.5zM24 14c0 6.625-5.375 12-12 12s-12-5.375-12-12 5.375-12 12-12 12 5.375 12 12z\"\n});\n\nvar SvgAdjust = function SvgAdjust(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 24 28\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    fill: \"currentColor\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgAdjust, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/adjust.744f87cc.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"Angle Double Down\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M143 256.3L7 120.3c-9.4-9.4-9.4-24.6 0-33.9l22.6-22.6c9.4-9.4 24.6-9.4 33.9 0l96.4 96.4 96.4-96.4c9.4-9.4 24.6-9.4 33.9 0L313 86.3c9.4 9.4 9.4 24.6 0 33.9l-136 136c-9.4 9.5-24.6 9.5-34 .1zm34 192l136-136c9.4-9.4 9.4-24.6 0-33.9l-22.6-22.6c-9.4-9.4-24.6-9.4-33.9 0L160 352.1l-96.4-96.4c-9.4-9.4-24.6-9.4-33.9 0L7 278.3c-9.4 9.4-9.4 24.6 0 33.9l136 136c9.4 9.5 24.6 9.5 34 .1z\"\n});\n\nvar SvgAngleDoubleDown = function SvgAngleDoubleDown(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 350 512\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    fill: \"currentColor\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgAngleDoubleDown, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/angle-double-down.fdd54425.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"Angle Double Up\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M177 255.7l136 136c9.4 9.4 9.4 24.6 0 33.9l-22.6 22.6c-9.4 9.4-24.6 9.4-33.9 0L160 351.9l-96.4 96.4c-9.4 9.4-24.6 9.4-33.9 0L7 425.7c-9.4-9.4-9.4-24.6 0-33.9l136-136c9.4-9.5 24.6-9.5 34-.1zm-34-192L7 199.7c-9.4 9.4-9.4 24.6 0 33.9l22.6 22.6c9.4 9.4 24.6 9.4 33.9 0l96.4-96.4 96.4 96.4c9.4 9.4 24.6 9.4 33.9 0l22.6-22.6c9.4-9.4 9.4-24.6 0-33.9l-136-136c-9.2-9.4-24.4-9.4-33.8 0z\"\n});\n\nvar SvgAngleDoubleUp = function SvgAngleDoubleUp(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 350 512\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    fill: \"currentColor\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgAngleDoubleUp, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/angle-double-up.3c187af2.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"Angle Left\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M31.7 239l136-136c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9L127.9 256l96.4 96.4c9.4 9.4 9.4 24.6 0 33.9L201.7 409c-9.4 9.4-24.6 9.4-33.9 0l-136-136c-9.5-9.4-9.5-24.6-.1-34z\"\n});\n\nvar SvgAngleLeft = function SvgAngleLeft(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 256 512\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    fill: \"currentColor\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgAngleLeft, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/angle-left.ea9e7d30.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"Arrows\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"g\", {\n  fill: \"none\",\n  strokeWidth: 2,\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M9,1 L9,17\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M1,9 L17,9\"\n}), /*#__PURE__*/React.createElement(\"polyline\", {\n  points: \"7 3 9 1 11 3\"\n}), /*#__PURE__*/React.createElement(\"polyline\", {\n  points: \"15 11 17 9 15 7\"\n}), /*#__PURE__*/React.createElement(\"polyline\", {\n  points: \"11 15 9 17 7 15\"\n}), /*#__PURE__*/React.createElement(\"polyline\", {\n  points: \"3 7 1 9 3 11\"\n}));\n\nvar SvgArrows = function SvgArrows(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 18 18\",\n    \"aria-labelledby\": \"title\",\n    stroke: \"currentColor\",\n    width: \"1em\",\n    height: \"1em\",\n    fill: \"none\",\n    strokeWidth: 2,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgArrows, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/arrows.fcc6ff8a.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"Arrows Alt H\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M377.941 169.941V216H134.059v-46.059c0-21.382-25.851-32.09-40.971-16.971L7.029 239.029c-9.373 9.373-9.373 24.568 0 33.941l86.059 86.059c15.119 15.119 40.971 4.411 40.971-16.971V296h243.882v46.059c0 21.382 25.851 32.09 40.971 16.971l86.059-86.059c9.373-9.373 9.373-24.568 0-33.941l-86.059-86.059c-15.119-15.12-40.971-4.412-40.971 16.97z\"\n});\n\nvar SvgArrowsAltH = function SvgArrowsAltH(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 512 512\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    fill: \"currentColor\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgArrowsAltH, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/arrows-alt-h.03ad0534.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"Arrows Alt V\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M214.059 377.941H168V134.059h46.059c21.382 0 32.09-25.851 16.971-40.971L144.971 7.029c-9.373-9.373-24.568-9.373-33.941 0L24.971 93.088c-15.119 15.119-4.411 40.971 16.971 40.971H88v243.882H41.941c-21.382 0-32.09 25.851-16.971 40.971l86.059 86.059c9.373 9.373 24.568 9.373 33.941 0l86.059-86.059c15.12-15.119 4.412-40.971-16.97-40.971z\"\n});\n\nvar SvgArrowsAltV = function SvgArrowsAltV(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 256 512\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    fill: \"currentColor\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgArrowsAltV, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/arrows-alt-v.8188dade.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"Bars\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M1664 1344v128q0 26-19 45t-45 19h-1408q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1408q26 0 45 19t19 45zm0-512v128q0 26-19 45t-45 19h-1408q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1408q26 0 45 19t19 45zm0-512v128q0 26-19 45t-45 19h-1408q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1408q26 0 45 19t19 45z\"\n});\n\nvar SvgBars = function SvgBars(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 1792 1792\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    fill: \"currentColor\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgBars, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/bars.4c1347fe.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"Brain\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M9.477,17.251 C9.47700008,15.4559127 8.02208718,14.0005522 6.227,14 C6.174,14 6.127,14.013 6.074,14.016\"\n});\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M9.139,4.388 C10.1071794,4.06154926 10.6736294,3.05782814 10.4526509,2.06027619 C10.2316724,1.06272423 9.29432573,0.392125319 8.27885567,0.505094155 C7.26338561,0.618062991 6.49633799,1.47827206 6.5,2.5 C6.50273041,2.68084368 6.52997882,2.86048132 6.581,3.034 C6.47,3.025 6.363,3 6.25,3 C4.82125583,2.99272637 3.51375534,3.80180432 2.88272268,5.08366258 C2.25169001,6.36552084 2.40789271,7.89515 3.285,9.023 C1.71628128,9.12669427 0.496882579,10.4293579 0.496882579,12.0015 C0.496882579,13.5736421 1.71628128,14.8763057 3.285,14.98 C2.4088849,16.1076699 2.25328058,17.6364954 2.88423445,18.9175552 C3.51518832,20.198615 4.82200641,21.0071611 6.25,21 C6.363,21 6.47,20.977 6.581,20.967 C6.28383855,22.0182201 6.88514293,23.1134021 7.93160342,23.4269131 C8.97806392,23.7404241 10.0824855,23.1562636 10.4122698,22.114817 C10.7420542,21.0733704 10.1751796,19.9599776 9.139,19.614\"\n});\n\nvar _ref5 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M6.074,9.986 C6.126,9.986 6.174,10.001 6.227,10.001 C8.02169676,10.000448 9.47644804,8.54569676 9.477,6.751\"\n});\n\nvar _ref6 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M14.523,17.251 C14.5229999,15.4559127 15.9779128,14.0005522 17.773,14 C17.826,14 17.873,14.013 17.926,14.016\"\n});\n\nvar _ref7 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M14.861,4.388 C13.8928206,4.06154926 13.3263706,3.05782814 13.5473491,2.06027619 C13.7683276,1.06272423 14.7056743,0.392125319 15.7211443,0.505094155 C16.7366144,0.618062991 17.503662,1.47827206 17.5,2.5 C17.4972696,2.68084368 17.4700212,2.86048132 17.419,3.034 C17.53,3.024 17.637,3 17.75,3 C19.1783755,2.99302696 20.4854349,3.80196155 21.1163884,5.08344617 C21.7473419,6.36493078 21.5914958,7.89414352 20.715,9.022 C22.2837187,9.12569427 23.5031174,10.4283579 23.5031174,12.0005 C23.5031174,13.5726421 22.2837187,14.8753057 20.715,14.979 C21.5917266,16.1066634 21.7476874,17.6359054 21.1166544,18.9173389 C20.4856213,20.1987723 19.1783622,21.0074617 17.75,21 C17.637,21 17.53,20.977 17.419,20.967 C17.7161614,22.0182201 17.1148571,23.1134021 16.0683966,23.4269131 C15.0219361,23.7404241 13.9175145,23.1562636 13.5877302,22.114817 C13.2579458,21.0733704 13.8248204,19.9599776 14.861,19.614\"\n});\n\nvar _ref8 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M17.926,9.986 C17.874,9.986 17.826,10.001 17.773,10.001 C15.9783032,10.000448 14.523552,8.54569676 14.523,6.751\"\n});\n\nvar _ref9 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M10.5,2.4 C11.4282032,1.86410162 12.5717968,1.86410162 13.5,2.4\"\n});\n\nvar _ref10 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M10.409,22.1 C11.4022898,22.6360615 12.5987102,22.6360615 13.592,22.1\"\n});\n\nvar _ref11 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M12,7.001 L12,17.501\"\n});\n\nvar SvgBrain = function SvgBrain(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 26 26\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    stroke: \"currentColor\",\n    strokeWidth: 1.25,\n    fill: \"none\",\n    fillRule: \"evenodd\",\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9, _ref10, _ref11);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgBrain, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/brain.7f33ad28.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"Brush\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M167.02 309.34c-40.12 2.58-76.53 17.86-97.19 72.3-2.35 6.21-8 9.98-14.59 9.98-11.11 0-45.46-27.67-55.25-34.35C0 439.62 37.93 512 128 512c75.86 0 128-43.77 128-120.19 0-3.11-.65-6.08-.97-9.13l-88.01-73.34zM457.89 0c-15.16 0-29.37 6.71-40.21 16.45C213.27 199.05 192 203.34 192 257.09c0 13.7 3.25 26.76 8.73 38.7l63.82 53.18c7.21 1.8 14.64 3.03 22.39 3.03 62.11 0 98.11-45.47 211.16-256.46 7.38-14.35 13.9-29.85 13.9-45.99C512 20.64 486 0 457.89 0z\"\n});\n\nvar SvgBrush = function SvgBrush(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 512 512\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    fill: \"currentColor\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgBrush, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/brush.2c480a04.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"Caret Down\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M286.935,69.377c-3.614-3.617-7.898-5.424-12.848-5.424H18.274c-4.952,0-9.233,1.807-12.85,5.424 C1.807,72.998,0,77.279,0,82.228c0,4.948,1.807,9.229,5.424,12.847l127.907,127.907c3.621,3.617,7.902,5.428,12.85,5.428 s9.233-1.811,12.847-5.428L286.935,95.074c3.613-3.617,5.427-7.898,5.427-12.847C292.362,77.279,290.548,72.998,286.935,69.377z\"\n});\n\nvar SvgCaretDown = function SvgCaretDown(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 292.362 292.362\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    fill: \"currentColor\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgCaretDown, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/caret-down.ecf0ee87.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"Caret Up\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M44.68,29.383L26.728,11.52c-2.098-2.087-5.488-2.087-7.585,0L1.19,29.383c-1.16,1.155-1.509,2.707-0.884,4.222 c0.624,1.512,2.099,2.311,3.735,2.311h37.786c1.638,0,3.112-0.799,3.736-2.312C46.189,32.09,45.84,30.539,44.68,29.383z\"\n});\n\nvar SvgCaretUp = function SvgCaretUp(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 45.871 45.871\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    fill: \"currentColor\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgCaretUp, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/caret-up.3f411c46.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"Check\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z\"\n});\n\nvar SvgCheck = function SvgCheck(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 512 512\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    fill: \"currentColor\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgCheck, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/check.15eebce5.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"Check Circle\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M13.5,0 a13.5 13.5 0 0 1 0 27 a13.5 13.5 0 0 1 0 -27 M23,8 l-2,-2 -10,10, -5,-5 -2,2 7,7Z\"\n});\n\nvar SvgCheckCircle = function SvgCheckCircle(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 27 27\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    fill: \"currentColor\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgCheckCircle, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/check-circle.2e63a724.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"Check Circle\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M256 8C119.033 8 8 119.033 8 256s111.033 248 248 248 248-111.033 248-248S392.967 8 256 8zm0 48c110.532 0 200 89.451 200 200 0 110.532-89.451 200-200 200-110.532 0-200-89.451-200-200 0-110.532 89.451-200 200-200m140.204 130.267l-22.536-22.718c-4.667-4.705-12.265-4.736-16.97-.068L215.346 303.697l-59.792-60.277c-4.667-4.705-12.265-4.736-16.97-.069l-22.719 22.536c-4.705 4.667-4.736 12.265-.068 16.971l90.781 91.516c4.667 4.705 12.265 4.736 16.97.068l172.589-171.204c4.704-4.668 4.734-12.266.067-16.971z\"\n});\n\nvar SvgCheckCircleO = function SvgCheckCircleO(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 512 512\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    fill: \"currentColor\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgCheckCircleO, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/check-circle-o.f625914d.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"Chevron Down\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"polygon\", {\n  transform: \"translate(6.000000, 3.700000) rotate(-270.000000) translate(-6.000000, -3.700000)\",\n  points: \"3.7 -2.3 2.3 -0.9 6.9 3.7 2.3 8.3 3.7 9.7 9.7 3.7\"\n});\n\nvar SvgChevronDown = function SvgChevronDown(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 12 9\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    fill: \"currentColor\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgChevronDown, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/chevron-down.10fcf3ab.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"Circle\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z\"\n});\n\nvar SvgCircle = function SvgCircle(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 512 512\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    fill: \"currentColor\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgCircle, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/circle.c1ce063b.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"Circle Notch\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M288 39.056v16.659c0 10.804 7.281 20.159 17.686 23.066C383.204 100.434 440 171.518 440 256c0 101.689-82.295 184-184 184-101.689 0-184-82.295-184-184 0-84.47 56.786-155.564 134.312-177.219C216.719 75.874 224 66.517 224 55.712V39.064c0-15.709-14.834-27.153-30.046-23.234C86.603 43.482 7.394 141.206 8.003 257.332c.72 137.052 111.477 246.956 248.531 246.667C393.255 503.711 504 392.788 504 256c0-115.633-79.14-212.779-186.211-240.236C302.678 11.889 288 23.456 288 39.056z\"\n});\n\nvar SvgCircleNotch = function SvgCircleNotch(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 512 512\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    fill: \"currentColor\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgCircleNotch, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/circle-notch.efddf9fb.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"Circle Outline\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm0 448c-110.5 0-200-89.5-200-200S145.5 56 256 56s200 89.5 200 200-89.5 200-200 200z\"\n});\n\nvar SvgCircleO = function SvgCircleO(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 512 512\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    fill: \"currentColor\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgCircleO, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/circle-o.83085fd0.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"Cog\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M12.85 8.25C12.85 8.03 12.93 7.8 12.93 7.5 12.93 7.2 12.93 6.98 12.85 6.75L14.43 5.48C14.58 5.33 14.58 5.18 14.5 5.03L13 2.4C12.93 2.33 12.78 2.25 12.55 2.33L10.68 3.08C10.3 2.78 9.85 2.55 9.4 2.33L9.1 0.38C9.18 0.15 8.95 0 8.8 0L5.8 0C5.65 0 5.43 0.15 5.43 0.3L5.13 2.33C4.68 2.48 4.3 2.78 3.85 3.08L2.05 2.33C1.83 2.25 1.68 2.33 1.53 2.48L0.03 5.1C-0.05 5.18 0.03 5.4 0.18 5.55L1.75 6.75C1.75 6.98 1.68 7.2 1.68 7.5 1.68 7.8 1.68 8.03 1.75 8.25L0.18 9.53C0.03 9.68 0.03 9.82 0.1 9.98L1.6 12.6C1.68 12.68 1.83 12.75 2.05 12.68L3.93 11.93C4.3 12.23 4.75 12.45 5.2 12.68L5.5 14.63C5.5 14.78 5.65 14.93 5.88 14.93L8.88 14.93C9.03 14.93 9.25 14.78 9.25 14.63L9.55 12.68C10 12.45 10.45 12.23 10.83 11.93L12.7 12.68C12.85 12.75 13.08 12.68 13.15 12.53L14.65 9.9C14.73 9.75 14.73 9.53 14.58 9.45L12.85 8.25 12.85 8.25ZM7.3 10.13C5.88 10.13 4.68 8.93 4.68 7.5 4.68 6.08 5.88 4.88 7.3 4.88 8.73 4.88 9.93 6.08 9.93 7.5 9.93 8.93 8.73 10.13 7.3 10.13L7.3 10.13Z\"\n});\n\nvar SvgCog = function SvgCog(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 15 15\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    fill: \"currentColor\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgCog, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/cog.2f1b5351.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"Create Comment\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M22.32 14L35 14C36.1 14 37 14.9 37 16L37 28C37 29.1 36.1 30 35 30L21 30 17 34 17 20.39C19.45 18.97 21.36 16.71 22.32 14Z\"\n});\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M10 0C4.5 0 0 4.5 0 10 0 15.5 4.5 20 10 20 15.5 20 20 15.5 20 10 20 4.5 15.5 0 10 0L10 0ZM15 11L11 11 11 15 9 15 9 11 5 11 5 9 9 9 9 5 11 5 11 9 15 9 15 11 15 11Z\"\n});\n\nvar SvgCreateComment = function SvgCreateComment(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 37 34\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    fill: \"currentColor\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3, _ref4);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgCreateComment, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/create-comment.70e9dd93.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"Create Screen Capture\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"g\", {\n  transform: \"translate(17.000000, 17.000000)\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M10 13C11.66 13 13 11.66 13 10 13 8.34 11.66 7 10 7 8.34 7 7 8.34 7 10 7 11.66 8.34 13 10 13Z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M7 0L5.2 2 2 2C0.9 2 0 2.9 0 4L0 16C0 17.1 0.9 18 2 18L18 18C19.1 18 20 17.1 20 16L20 4C20 2.9 19.1 2 18 2L14.8 2 13 0 7 0 7 0ZM10 15C7.2 15 5 12.8 5 10 5 7.2 7.2 5 10 5 12.8 5 15 7.2 15 10 15 12.8 12.8 15 10 15L10 15Z\"\n}));\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M10 0C4.5 0 0 4.5 0 10 0 15.5 4.5 20 10 20 15.5 20 20 15.5 20 10 20 4.5 15.5 0 10 0L10 0ZM15 11L11 11 11 15 9 15 9 11 5 11 5 9 9 9 9 5 11 5 11 9 15 9 15 11 15 11Z\"\n});\n\nvar SvgCreateScreenCapture = function SvgCreateScreenCapture(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 37 35\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    fill: \"currentColor\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3, _ref4);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgCreateScreenCapture, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/create-screen-capture.b1c35083.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"Crosshairs\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M500 224h-30.364C455.724 130.325 381.675 56.276 288 42.364V12c0-6.627-5.373-12-12-12h-40c-6.627 0-12 5.373-12 12v30.364C130.325 56.276 56.276 130.325 42.364 224H12c-6.627 0-12 5.373-12 12v40c0 6.627 5.373 12 12 12h30.364C56.276 381.675 130.325 455.724 224 469.636V500c0 6.627 5.373 12 12 12h40c6.627 0 12-5.373 12-12v-30.364C381.675 455.724 455.724 381.675 469.636 288H500c6.627 0 12-5.373 12-12v-40c0-6.627-5.373-12-12-12zM288 404.634V364c0-6.627-5.373-12-12-12h-40c-6.627 0-12 5.373-12 12v40.634C165.826 392.232 119.783 346.243 107.366 288H148c6.627 0 12-5.373 12-12v-40c0-6.627-5.373-12-12-12h-40.634C119.768 165.826 165.757 119.783 224 107.366V148c0 6.627 5.373 12 12 12h40c6.627 0 12-5.373 12-12v-40.634C346.174 119.768 392.217 165.757 404.634 224H364c-6.627 0-12 5.373-12 12v40c0 6.627 5.373 12 12 12h40.634C392.232 346.174 346.243 392.217 288 404.634zM288 256c0 17.673-14.327 32-32 32s-32-14.327-32-32c0-17.673 14.327-32 32-32s32 14.327 32 32z\"\n});\n\nvar SvgCrosshairs = function SvgCrosshairs(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 512 512\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    fill: \"currentColor\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgCrosshairs, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/crosshairs.663cb44f.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"Cube\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M-115.1,280.3c0-0.1,0.1-0.1,0.1-0.2c0,0,0-0.1,0-0.1c0-0.1,0-0.2,0-0.3c0,0,0,0,0,0l0.1-45 c0-0.5-0.3-0.9-0.7-1.2L-154,211c-0.1,0-0.1,0-0.2-0.1c0,0,0,0,0,0c-0.4-0.2-0.8-0.1-1.2,0.1l-38.8,22.1     c-0.4,0.2-0.7,0.7-0.7,1.2l-0.3,44.6c0,0.5,0.3,0.9,0.7,1.2l38.7,22.9c0.2,0.1,0.5,0.2,0.7,0.2c0.2,0,0.5-0.1,0.7-0.2l38.8-22.1     c0,0,0,0,0,0c0.1,0,0.1-0.1,0.2-0.1c0.1,0,0.1-0.1,0.1-0.1c0-0.1,0.1-0.1,0.1-0.2C-115.1,280.4-115.1,280.4-115.1,280.3z      M-160.7,296.9c1.5-1.5,3-3,4.5-4.6l0,2.4c-1,1-2,2-3,3L-160.7,296.9z M-163.9,295c2.5-2.6,5.1-5.1,7.6-7.7l0,2.4     c-2,2.1-4.1,4.1-6.1,6.2L-163.9,295z M-167,293.2c3.6-3.6,7.1-7.2,10.7-10.8l0,2.4c-2.6,2.6-5.2,5.2-7.7,7.8     c-0.5,0.5-1,1-1.5,1.5L-167,293.2z M-170.1,291.3c4.6-4.7,9.2-9.3,13.8-14l0,2.4c-4.1,4.2-8.2,8.3-12.3,12.5L-170.1,291.3z      M-173.3,289.5C-173.2,289.4-173.2,289.4-173.3,289.5c5.7-5.7,11.3-11.4,17-17.1l0,2.4c-5.1,5.2-10.3,10.4-15.4,15.6c0,0,0,0,0,0     L-173.3,289.5z M-176.4,287.6C-176.4,287.6-176.4,287.6-176.4,287.6c6.7-6.8,13.4-13.6,20.1-20.3l0,2.4     c-6.1,6.2-12.3,12.4-18.4,18.6c-0.1,0.1-0.1,0.1-0.1,0.2L-176.4,287.6z M-179.5,285.7C-179.5,285.7-179.5,285.7-179.5,285.7     c7.7-7.8,15.5-15.6,23.2-23.4l0,2.4c-7.2,7.3-14.4,14.5-21.5,21.8c0,0-0.1,0.1-0.1,0.1L-179.5,285.7z M-182.7,283.9     C-182.6,283.9-182.6,283.8-182.7,283.9c8.7-8.9,17.4-17.6,26.1-26.4l0.2,0.1l0,2.1c-8.2,8.3-16.4,16.6-24.7,25     c0,0-0.1,0.1-0.1,0.1L-182.7,283.9z M-185.8,282.1c0.1-0.1,0.1-0.2,0.2-0.2c8.5-8.6,17-17.2,25.6-25.9c0.1-0.1,0.2-0.2,0.3-0.3     l1.5,0.9c-8.6,8.7-17.3,17.5-25.9,26.2c0,0-0.1,0.1-0.1,0.2L-185.8,282.1z M-188.9,280.2c0-0.1,0.1-0.1,0.1-0.2     c8.6-8.7,17.3-17.5,25.9-26.2l1.5,0.9c-8.6,8.7-17.3,17.5-25.9,26.2c-0.1,0.1-0.1,0.1-0.2,0.2L-188.9,280.2z M-192.1,278.3     c0.1-0.1,0.1-0.1,0.2-0.2c8.6-8.7,17.2-17.4,25.8-26.2l1.5,0.9c-8.6,8.7-17.1,17.3-25.7,26c-0.1,0.1-0.3,0.3-0.4,0.4     L-192.1,278.3z M-154.7,213.8l35.8,20.9l-36,20.5l-35.8-20.9L-154.7,213.8z M-191.2,237.2l1.5,0.9c-0.8,0.8-1.7,1.7-2.5,2.5     l0-2.4C-191.8,237.9-191.5,237.6-191.2,237.2z M-192.3,253.4c3.5-3.5,7-7.1,10.5-10.6l1.5,0.9c-4,4.1-8,8.1-12.1,12.2     L-192.3,253.4z M-192.2,250.8l0-2.4c0.9-0.9,1.8-1.9,2.8-2.8c1.5-1.6,3.1-3.1,4.6-4.7l1.5,0.9     C-186.3,244.8-189.3,247.8-192.2,250.8z M-192.2,245.7l0-2.4c1.4-1.4,2.8-2.8,4.2-4.2l1.5,0.9     C-188.4,241.9-190.3,243.8-192.2,245.7z M-178.6,244.6l1.5,0.9c-5.1,5.1-10.1,10.3-15.2,15.4l0-2.4     C-187.7,253.8-183.2,249.2-178.6,244.6z M-192.3,263.5c5.6-5.7,11.2-11.4,16.9-17.1l1.5,0.9c-6.1,6.2-12.3,12.4-18.4,18.6     L-192.3,263.5z M-192.4,268.6c6.7-6.8,13.4-13.5,20.1-20.3l1.5,0.9c-7.2,7.3-14.4,14.6-21.6,21.8L-192.4,268.6z M-192.4,273.6     c7.7-7.8,15.5-15.7,23.2-23.5l1.5,0.9c-8.3,8.4-16.5,16.7-24.8,25.1L-192.4,273.6z M-156.2,297.3l0,2.3l-1.4-0.8     C-157.1,298.2-156.7,297.7-156.2,297.3z M-153.6,257.6l36-20.5l-0.1,41.8l-35.8,20.4L-153.6,257.6z\"\n});\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M-154.9,232.7C-154.8,232.7-154.8,232.7-154.9,232.7c0.8,0,1.4-0.6,1.4-1.4c0-0.8-0.6-1.4-1.4-1.4     c-0.8,0-1.4,0.6-1.4,1.4C-156.2,232.1-155.6,232.7-154.9,232.7z\"\n});\n\nvar _ref5 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M-154.9,239.1C-154.9,239.1-154.9,239.1-154.9,239.1c0.8,0,1.4-0.6,1.4-1.4c0-0.8-0.6-1.4-1.4-1.4     c-0.8,0-1.4,0.6-1.4,1.4C-156.3,238.4-155.7,239.1-154.9,239.1z\"\n});\n\nvar _ref6 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M-155,249.1c-0.8,0-1.4,0.6-1.4,1.4c0,0.8,0.6,1.4,1.4,1.4c0,0,0,0,0,0c0.7,0,1.4-0.6,1.4-1.4     C-153.6,249.7-154.2,249.1-155,249.1z\"\n});\n\nvar _ref7 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M-154.9,245.4C-154.9,245.4-154.9,245.4-154.9,245.4c0.8,0,1.4-0.6,1.4-1.4c0-0.8-0.6-1.4-1.4-1.4     c-0.8,0-1.4,0.6-1.4,1.4C-156.3,244.8-155.7,245.4-154.9,245.4z\"\n});\n\nvar _ref8 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M-154.8,219.9C-154.8,219.9-154.8,219.9-154.8,219.9c0.8,0,1.4-0.6,1.4-1.4c0-0.8-0.6-1.4-1.4-1.4     c-0.8,0-1.4,0.6-1.4,1.4C-156.2,219.3-155.5,219.9-154.8,219.9z\"\n});\n\nvar _ref9 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M-154.8,226.3C-154.8,226.3-154.8,226.3-154.8,226.3c0.8,0,1.4-0.6,1.4-1.4c0-0.8-0.6-1.4-1.4-1.4     c-0.8,0-1.4,0.6-1.4,1.4C-156.2,225.7-155.6,226.3-154.8,226.3z\"\n});\n\nvar _ref10 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M-148.8,258.9c-0.7-0.4-1.5-0.2-1.9,0.5c-0.4,0.7-0.2,1.5,0.5,1.9c0.2,0.1,0.5,0.2,0.7,0.2     c0.5,0,0.9-0.2,1.2-0.7C-147.9,260.1-148.1,259.3-148.8,258.9z\"\n});\n\nvar _ref11 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M-121.1,275.3c-0.7-0.4-1.5-0.2-1.9,0.5c-0.4,0.7-0.2,1.5,0.5,1.9c0.2,0.1,0.5,0.2,0.7,0.2     c0.5,0,0.9-0.2,1.2-0.7C-120.2,276.5-120.5,275.7-121.1,275.3z\"\n});\n\nvar _ref12 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M-126.6,272c-0.7-0.4-1.5-0.2-1.9,0.5c-0.4,0.7-0.2,1.5,0.5,1.9c0.2,0.1,0.5,0.2,0.7,0.2     c0.5,0,0.9-0.2,1.2-0.7C-125.8,273.2-126,272.4-126.6,272z\"\n});\n\nvar _ref13 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M-143.2,262.2c-0.7-0.4-1.5-0.2-1.9,0.5c-0.4,0.7-0.2,1.5,0.5,1.9c0.2,0.1,0.5,0.2,0.7,0.2     c0.5,0,0.9-0.2,1.2-0.7C-142.4,263.4-142.6,262.6-143.2,262.2z\"\n});\n\nvar _ref14 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M-132.2,268.7c-0.7-0.4-1.5-0.2-1.9,0.5c-0.4,0.7-0.2,1.5,0.5,1.9c0.2,0.1,0.5,0.2,0.7,0.2     c0.5,0,0.9-0.2,1.2-0.7C-131.3,270-131.5,269.1-132.2,268.7z\"\n});\n\nvar _ref15 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M-137.7,265.5c-0.7-0.4-1.5-0.2-1.9,0.5c-0.4,0.7-0.2,1.5,0.5,1.9c0.2,0.1,0.5,0.2,0.7,0.2 c0.5,0,0.9-0.2,1.2-0.7C-136.8,266.7-137.1,265.8-137.7,265.5z\"\n});\n\nvar SvgCube = function SvgCube(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"-205 207 100 100\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    fill: \"currentColor\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9, _ref10, _ref11, _ref12, _ref13, _ref14, _ref15);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgCube, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/cube.2a35f636.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"3D Rotate\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"path\", {\n  fillRule: \"evenodd\",\n  clipRule: \"evenodd\",\n  d: \"M17.856,11.409c-0.004-0.127-0.006-0.165-0.013-0.335l-0.01-0.195 c0.001,0.02-0.01-0.159-0.008-0.14l-0.004-0.06l-1.214,0.08v0.004c0.005,0.071,0.009,0.137,0.013,0.209   c0-0.001,0.025,0.732,0.025,0.731l0.001,0.025l-0.001-0.01l0.001,0.029v0.021v-0.01v0.03v-0.009v0.03v-0.01l0.001,0.035   l-0.001-0.01l0.001,0.04v-0.01v0.045v-0.01v0.06V11.94V12c0,0.925-0.066,1.891-0.214,2.85c0.443-0.125,0.877-0.272,1.288-0.444   c0.097-0.8,0.143-1.604,0.143-2.405c-0.001-0.127-0.002-0.254-0.004-0.381L17.856,11.409L17.856,11.409z M5.386,16.674L2,15.691   l0.658-0.711C1.817,14.19,1.2,13.182,1.2,12c0.006-0.916,0.35-1.691,0.912-2.399c0.83-1.011,2.014-1.758,3.339-2.293   C5.335,7.792,5.239,8.281,5.162,8.774C4.584,9.066,4.053,9.41,3.592,9.812c-0.563,0.5-1.035,1.118-1.149,1.862   c-0.076,0.5,0.027,0.975,0.259,1.417c0.197,0.374,0.478,0.711,0.782,0.995l0.657-0.711L5.386,16.674L5.386,16.674z M9.6,6.283   C10.44,6.18,11.256,6.135,12,6.135c1.765,0,3.552,0.222,5.246,0.722C19.566,7.542,22.783,9.189,22.8,12   c-0.006,0.915-0.349,1.69-0.911,2.398c-2.151,2.622-6.685,3.467-9.889,3.467c-0.89,0-1.822-0.054-2.697-0.182l0.165-1.205   c0.82,0.12,1.699,0.17,2.533,0.17c2.71,0,6.298-0.621,8.408-2.46c0.644-0.572,1.167-1.297,1.175-2.188   c-0.013-1.455-1.41-2.516-2.574-3.134C16.924,7.773,14.333,7.351,12,7.351c-0.884,0-1.862,0.066-2.852,0.219   C9.275,7.128,9.425,6.697,9.6,6.283L9.6,6.283z M15.224,18.834c0.486-0.076,0.975-0.169,1.459-0.283   c-0.85,2.063-2.374,4.235-4.683,4.249c-0.916-0.006-1.691-0.349-2.399-0.911C6.979,19.737,6.135,15.204,6.135,12   c0-1.764,0.222-3.552,0.722-5.246C7.542,4.434,9.189,1.217,12,1.2c1.454,0,2.627,0.926,3.466,2.038l0.778-0.577l0.61,3.471   L13.71,4.539l0.778-0.577C13.907,3.175,13.023,2.417,12,2.417c-1.455,0.013-2.516,1.411-3.134,2.575   C7.773,7.076,7.351,9.667,7.351,12c0,2.71,0.621,6.298,2.461,8.408c0.572,0.644,1.296,1.167,2.188,1.175   c1.455-0.013,2.516-1.41,3.134-2.574L15.224,18.834z\"\n}));\n\nvar Svg3DRotate = function Svg3DRotate(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 24 30\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    fill: \"currentColor\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(Svg3DRotate, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/3d-rotate.1c03398e.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"Database\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M12 12c4.703 0 9.422-0.844 12-2.656v2.656c0 2.203-5.375 4-12 4s-12-1.797-12-4v-2.656c2.578 1.813 7.297 2.656 12 2.656zM12 24c4.703 0 9.422-0.844 12-2.656v2.656c0 2.203-5.375 4-12 4s-12-1.797-12-4v-2.656c2.578 1.813 7.297 2.656 12 2.656zM12 18c4.703 0 9.422-0.844 12-2.656v2.656c0 2.203-5.375 4-12 4s-12-1.797-12-4v-2.656c2.578 1.813 7.297 2.656 12 2.656zM12 0c6.625 0 12 1.797 12 4v2c0 2.203-5.375 4-12 4s-12-1.797-12-4v-2c0-2.203 5.375-4 12-4z\"\n});\n\nvar SvgDatabase = function SvgDatabase(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 24 28\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    fill: \"currentColor\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgDatabase, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/database.4c5f2aad.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"Dot Circle\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M256 56c110.532 0 200 89.451 200 200 0 110.532-89.451 200-200 200-110.532 0-200-89.451-200-200 0-110.532 89.451-200 200-200m0-48C119.033 8 8 119.033 8 256s111.033 248 248 248 248-111.033 248-248S392.967 8 256 8zm0 168c-44.183 0-80 35.817-80 80s35.817 80 80 80 80-35.817 80-80-35.817-80-80-80z\"\n});\n\nvar SvgDotCircle = function SvgDotCircle(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 512 512\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    fill: \"currentColor\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgDotCircle, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/dot-circle.c7711800.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"Edit\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z\"\n});\n\nvar SvgEdit = function SvgEdit(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 576 512\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    fill: \"currentColor\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgEdit, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/edit.d425fb0f.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"Ellipse Circle\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M9,0 a9 9 0 0 1 0 18 a9 9 0 0 1 0 -18 M4.5,8 a1.5 1.5 0 0 0 0 3 a1.5 1.5 0 0 0 0 -3 M9,8 a1.5 1.5 0 0 0 0 3 a1.5 1.5 0 0 0 0 -3  M13.5,8 a1.5 1.5 0 0 0 0 3 a1.5 1.5 0 0 0 0 -3\"\n});\n\nvar SvgEllipseCircle = function SvgEllipseCircle(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 18 18\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    fill: \"currentColor\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgEllipseCircle, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/ellipse-circle.5fc1b65b.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"Ellipse Horizontal\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M6 11.5v3c0 0.828-0.672 1.5-1.5 1.5h-3c-0.828 0-1.5-0.672-1.5-1.5v-3c0-0.828 0.672-1.5 1.5-1.5h3c0.828 0 1.5 0.672 1.5 1.5zM14 11.5v3c0 0.828-0.672 1.5-1.5 1.5h-3c-0.828 0-1.5-0.672-1.5-1.5v-3c0-0.828 0.672-1.5 1.5-1.5h3c0.828 0 1.5 0.672 1.5 1.5zM22 11.5v3c0 0.828-0.672 1.5-1.5 1.5h-3c-0.828 0-1.5-0.672-1.5-1.5v-3c0-0.828 0.672-1.5 1.5-1.5h3c0.828 0 1.5 0.672 1.5 1.5z\"\n});\n\nvar SvgEllipseH = function SvgEllipseH(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 22 28\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    fill: \"currentColor\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgEllipseH, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/ellipse-h.4084a5b5.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"Ellipse Vertical\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M6 19.5v3c0 0.828-0.672 1.5-1.5 1.5h-3c-0.828 0-1.5-0.672-1.5-1.5v-3c0-0.828 0.672-1.5 1.5-1.5h3c0.828 0 1.5 0.672 1.5 1.5zM6 11.5v3c0 0.828-0.672 1.5-1.5 1.5h-3c-0.828 0-1.5-0.672-1.5-1.5v-3c0-0.828 0.672-1.5 1.5-1.5h3c0.828 0 1.5 0.672 1.5 1.5zM6 3.5v3c0 0.828-0.672 1.5-1.5 1.5h-3c-0.828 0-1.5-0.672-1.5-1.5v-3c0-0.828 0.672-1.5 1.5-1.5h3c0.828 0 1.5 0.672 1.5 1.5z\"\n});\n\nvar SvgEllipseV = function SvgEllipseV(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 6 28\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    fill: \"currentColor\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgEllipseV, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/ellipse-v.2a27c686.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"Exclamation Circle\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M10,1 a9 9 0 0 1 0 18 a9 9 0 0 1 0 -18 M10,5 l0,2 m0,2 0,6\"\n});\n\nvar SvgExclamationCircle = function SvgExclamationCircle(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 20 20\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    stroke: \"currentColor\",\n    fill: \"none\",\n    strokeWidth: 2,\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgExclamationCircle, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/exclamation-circle.90c684d2.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"Exclamation Triangle\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m11,0 11,20 -22,0Z m1,7 -2,0 0,6 2,0Z m0,8 -2,0 0,2 2,0Z\"\n});\n\nvar SvgExclamationTriangle = function SvgExclamationTriangle(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 22 20\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    fill: \"currentColor\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgExclamationTriangle, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/exclamation-triangle.42035a99.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M0 436V76c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v151.9L235.5 71.4C256.1 54.3 288 68.6 288 96v131.9L459.5 71.4C480.1 54.3 512 68.6 512 96v320c0 27.4-31.9 41.7-52.5 24.6L288 285.3V416c0 27.4-31.9 41.7-52.5 24.6L64 285.3V436c0 6.6-5.4 12-12 12H12c-6.6 0-12-5.4-12-12z\"\n});\n\nvar SvgFastBackward = function SvgFastBackward(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 512 512\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    fill: \"currentColor\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgFastBackward, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/fast-backward.d321cde9.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M512 76v360c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12V284.1L276.5 440.6c-20.6 17.2-52.5 2.8-52.5-24.6V284.1L52.5 440.6C31.9 457.8 0 443.4 0 416V96c0-27.4 31.9-41.7 52.5-24.6L224 226.8V96c0-27.4 31.9-41.7 52.5-24.6L448 226.8V76c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12z\"\n});\n\nvar SvgFastForward = function SvgFastForward(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 512 512\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    fill: \"currentColor\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgFastForward, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/fast-forward.41a66fcf.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"Stop\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48z\"\n});\n\nvar SvgStop = function SvgStop(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 448 512\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    fill: \"currentColor\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgStop, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/stop.17be1337.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"Info\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M20 424.229h20V279.771H20c-11.046 0-20-8.954-20-20V212c0-11.046 8.954-20 20-20h112c11.046 0 20 8.954 20 20v212.229h20c11.046 0 20 8.954 20 20V492c0 11.046-8.954 20-20 20H20c-11.046 0-20-8.954-20-20v-47.771c0-11.046 8.954-20 20-20zM96 0C56.235 0 24 32.235 24 72s32.235 72 72 72 72-32.235 72-72S135.764 0 96 0z\"\n});\n\nvar SvgInfo = function SvgInfo(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 192 512\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    fill: \"currentColor\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgInfo, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/info.db34278e.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"Inline Edit\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M11,2 l1.85,-1.85 a1 1 0 0 1 1,0 l2,2 a1 1 0 0 1 0,1 l-1.85,1.85Z  M10,3 l-10,10 0,3 3,0 10,-10Z M16,16 l0,-2 -9,0 -2,2Z\"\n});\n\nvar SvgInlineEdit = function SvgInlineEdit(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 16 16\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    fill: \"currentColor\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgInlineEdit, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/inline-edit.48bca8de.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"Level\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M14.5,3.5 a1 1 0 0 1 -11,11 Z\",\n  stroke: \"none\",\n  opacity: 0.8\n});\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"circle\", {\n  cx: 9,\n  cy: 9,\n  r: 8,\n  fill: \"none\",\n  strokeWidth: 2\n});\n\nvar SvgLevel = function SvgLevel(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 18 18\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    fill: \"currentColor\",\n    stroke: \"currentColor\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3, _ref4);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgLevel, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/level.185d8f1b.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"Link\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m5.364 28.917c1.047 1.046 2.422 1.57 3.797 1.57 1.376 0 2.751-0.523 3.798-1.572l7.552-7.554c1.016-1.014 1.574-2.361 1.574-3.797 -0.001-1.432-0.558-2.781-1.574-3.796l-2.297-2.298 -2.009 2.009 2.297 2.298c0.478 0.478 0.741 1.113 0.741 1.788 0 0.674-0.264 1.309-0.741 1.786l-7.553 7.555c-0.987 0.985-2.59 0.985-3.576 0l-2.297-2.298c-0.987-0.985-0.987-2.589 0-3.576l3.775-3.776 -2.009-2.009 -3.776 3.776c-2.094 2.096-2.092 5.502 0 7.595l2.299 2.3zM26.695 2.992\"\n});\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m26.695 2.992c-1.014-1.016-2.362-1.575-3.797-1.575 -0.001 0-0.001 0-0.002 0 -1.435 0-2.784 0.56-3.798 1.573l-7.551 7.553c-1.017 1.016-1.576 2.363-1.576 3.799 0 1.434 0.558 2.784 1.574 3.797l2.297 2.297 2.01-2.009 -2.298-2.297c-0.477-0.477-0.741-1.113-0.741-1.788 0-0.676 0.265-1.311 0.742-1.788l7.553-7.555c0.477-0.477 1.111-0.74 1.789-0.74 0 0 0 0 0.001 0 0.674 0 1.309 0.264 1.786 0.74l2.297 2.299c0.477 0.477 0.74 1.111 0.74 1.788 0 0.674-0.264 1.311-0.74 1.788l-3.776 3.777 2.009 2.009 3.776-3.777c1.014-1.013 1.573-2.363 1.574-3.797 0-1.435-0.56-2.784-1.574-3.797l-2.295-2.296z\"\n});\n\nvar SvgLink = function SvgLink(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 32 32\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    fill: \"currentColor\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3, _ref4);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgLink, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/link.b22325d0.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"Link Circles\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"g\", {\n  transform: \"translate(1.0000, 1.000)\"\n}, /*#__PURE__*/React.createElement(\"circle\", {\n  opacity: 0.8,\n  cx: 7.5,\n  cy: 7.5,\n  r: 7.5\n}), /*#__PURE__*/React.createElement(\"circle\", {\n  opacity: 0.6,\n  cx: 15.5,\n  cy: 7.5,\n  r: 7.5\n}));\n\nvar SvgLinkCircles = function SvgLinkCircles(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 25 15\",\n    \"aria-labelledby\": \"title\",\n    stroke: \"currentColor\",\n    width: \"1em\",\n    height: \"1em\",\n    fill: \"none\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgLinkCircles, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/link-circles.40b39303.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"List\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M0,0 2,0 2,2 0,2Z M4,0 18,0 18,2 4,2Z M0,4 2,4 2,6 0,6Z M4,4 18,4 18,6 4,6Z M0,8 2,8 2,10 0,10Z M4,8 18,8 18,10 4,10Z\"\n});\n\nvar SvgList = function SvgList(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 18 10\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    fill: \"currentColor\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgList, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/list.b2f58b10.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"Liver\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"g\", {\n  transform: \"translate(1.000000, 1.000000)\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M14.1879883,0.427249956 C15.0074875,0.0422121769 15.9522148,-0.00109444417 16.862793,2.04322665e-05 C19.2959911,0.00285829955 21.7960518,0.267011807 24.2293553,0.267721274 C24.632253,0.267923979 24.8592123,0.398871284 24.9616761,0.681948546 C25.0607665,0.955904091 24.9707418,1.17928479 24.6560769,1.42090892 C23.2066152,2.5337583 22.5823452,4.01684802 22.5593647,5.76365669 C22.5282671,8.13499886 20.9667489,10.242014 18.6967339,10.9516835 C17.246956,11.4049314 15.8264835,11.3236468 14.4399549,10.7120864 C14.4015837,10.6951606 14.3626854,10.6791469 14.3462406,10.6721536 C14.0117575,11.143949 13.7204948,11.6275013 13.3572334,12.0543976 C11.801513,13.8830991 9.76720674,14.7494594 7.3234671,14.7689191 C5.91806908,14.7801692 4.5964763,15.1070307 3.37713644,15.7857877 C2.51715767,16.2644751 1.76470259,16.8644813 1.17047602,17.6383069 C0.975141299,17.8924988 0.719930632,17.9690198 0.430038301,17.8745594 C0.145838402,17.7820247 0.0129095911,17.6005025 0.0128041757,17.2720194 C0.0117500218,13.9612418 -0.0213504117,10.6500587 0.0232402996,7.33988926 C0.0699393187,3.87870469 2.93565678,0.850598944 6.47624358,0.427249956 C8.18898075,0.222411674 10.6852298,0.729934666 12.1266085,1.97171448 C12.3659471,2.17791002 12.7690956,2.58896084 13.0694221,3.04543956 C13.3112364,3.41298323 13.6364656,3.89746342 13.7521632,4.10220046 C13.8678607,4.30693751 12.0604076,1.92012611 12.1266085,1.97171448 C12.65611,1.40566131 13.4924575,0.754111457 14.1879883,0.427249956 Z\"\n}));\n\nvar SvgLiver = function SvgLiver(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 27 20\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    stroke: \"currentColor\",\n    strokeWidth: 1.65,\n    fill: \"none\",\n    fillRule: \"evenodd\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgLiver, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/liver.40ac3638.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"Lock\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M5 12h8v-3c0-2.203-1.797-4-4-4s-4 1.797-4 4v3zM18 13.5v9c0 0.828-0.672 1.5-1.5 1.5h-15c-0.828 0-1.5-0.672-1.5-1.5v-9c0-0.828 0.672-1.5 1.5-1.5h0.5v-3c0-3.844 3.156-7 7-7s7 3.156 7 7v3h0.5c0.828 0 1.5 0.672 1.5 1.5z\"\n});\n\nvar SvgLock = function SvgLock(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 18 28\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    fill: \"currentColor\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgLock, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/lock.ae7a00a3.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"Lock\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M14 7L13 7 13 5C13 2.2 10.8 0 8 0 5.2 0 3 2.2 3 5L3 7 2 7C0.9 7 0 7.9 0 9L0 19C0 20.1 0.9 21 2 21L14 21C15.1 21 16 20.1 16 19L16 9C16 7.9 15.1 7 14 7L14 7ZM11.1 7L4.9 7 4.9 5C4.9 3.3 6.3 1.9 8 1.9 9.7 1.9 11.1 3.3 11.1 5L11.1 7 11.1 7Z\"\n});\n\nvar SvgLockAlt = function SvgLockAlt(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 16 21\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    fill: \"currentColor\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgLockAlt, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/lock-alt.a9d7b01d.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"Lung\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"g\", {\n  transform: \"translate(1.000000, 0)\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M4.54995935,23.0682142 L5.21755165,23.0682142 C7.73042481,23.0682142 9.767511,21.031128 9.767511,18.5182549 L9.767511,15.6678583 C9.767511,14.5637174 9.41504385,13.4884059 8.76143431,12.5985061 L8.76143431,12.5985061 C8.10782476,11.7086062 7.75535761,10.6332948 7.75535761,9.52915385 L7.75535761,6.94406376 C7.75535761,6.32558369 7.38554676,5.76703946 6.81616159,5.52554801 C5.25840278,5.17062216 4.58145592,5.710798 3.84612497,6.74773742 C3.19639763,7.66396146 2.11984103,9.64970738 0.616455185,12.7049752 L0.616455169,12.7049752 C0.210903154,13.5291615 -1.12491357e-16,14.4354596 0,15.3540212 L0,18.5182549 C3.07738207e-16,21.031128 2.03708619,23.0682142 4.54995935,23.0682142 Z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M10.4645082,0 L10.4645082,7.63276134 C10.4645082,8.24023016 10.188418,8.81477376 9.7141179,9.19432323 L7.58333333,10.8994424\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M16.9645082,0 L16.9645082,7.63276134 C16.9645082,8.24023016 16.688418,8.81477376 16.2141179,9.19432323 L14.0833333,10.8994424\",\n  transform: \"translate(15.523921, 5.449721) scale(-1, 1) translate(-15.523921, -5.449721) \"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M19.716626,23.0682142 L20.3842183,23.0682142 C22.8970915,23.0682142 24.9341777,21.031128 24.9341777,18.5182549 L24.9341777,15.6678583 C24.9341777,14.5637174 24.5817105,13.4884059 23.928101,12.5985061 L23.928101,12.5985061 C23.2744914,11.7086062 22.9220243,10.6332948 22.9220243,9.52915385 L22.9220243,6.94406376 C22.9220243,6.32558369 22.5522134,5.76703946 21.9828283,5.52554801 C20.4250695,5.17062216 19.7481226,5.710798 19.0127916,6.74773742 C18.3630643,7.66396146 17.2865077,9.64970738 15.7831219,12.7049752 L15.7831218,12.7049752 C15.3775698,13.5291615 15.1666667,14.4354596 15.1666667,15.3540212 L15.1666667,18.5182549 C15.1666667,21.031128 17.2037529,23.0682142 19.716626,23.0682142 Z\",\n  transform: \"translate(20.050422, 14.242440) scale(-1, 1) translate(-20.050422, -14.242440) \"\n}));\n\nvar SvgLung = function SvgLung(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 28 24\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    stroke: \"currentColor\",\n    strokeWidth: 1.5,\n    fill: \"none\",\n    fillRule: \"nonzero\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgLung, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/lung.d895d8d4.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"Measure Non-Target\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"circle\", {\n  id: \"icon-tools-measure-non-target-circle\",\n  cx: 6.5,\n  cy: 6.5,\n  r: 6\n});\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"path\", {\n  id: \"icon-tools-measure-non-target-plus\",\n  d: \"M6.5,3 l0,7 M3,6.5 l7,0\"\n});\n\nvar _ref5 = /*#__PURE__*/React.createElement(\"path\", {\n  id: \"icon-tools-measure-non-target-arrow\",\n  d: \"M23,7 l-15,15 M7,17 l0,6 6,0\",\n  strokeWidth: 2\n});\n\nvar SvgMeasureNonTarget = function SvgMeasureNonTarget(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 24 24\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    stroke: \"currentColor\",\n    fill: \"none\",\n    strokeWidth: 1,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3, _ref4, _ref5);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgMeasureNonTarget, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/measure-non-target.d6f5fba5.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"Measure Target\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m9.5,26 2,-2 -1.5,-1.5 0.5,-0.5 1.5,1.5 1.5,-1.5 -2.5,-2.5 0.5,-0.5 2.5,2.5 1.5,-1.5 -1.5,-1.5 0.5,-0.5 1.5,1.5 1.5,-1.5 -2.5,-2.5 0.5,-0.5 2.5,2.5 1.5,-1.5 -1.5,-1.5 0.5,-0.5 1.5,1.5 1.5,-1.5 -2.5,-2.5 0.5,-0.5 2.5,2.5 1.5,-1.5 -1.5,-1.5 0.5,-0.5 1.5,1.5 2,-2 -4,-4 a2 2 0 0 0 -2.5 0 l-14 14 a2 2 0 0 0 0 2.5 l4,4 Z\"\n});\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m6,0 a6 6 0 0 1 0 12 a6 6 0 0 1 0 -12 m0.5,3 a0.5 0.5 0 0 0 -1 0 l0,2.5 -2.5,0 a0.5 0.5 0 0 0 0 1 l2.5,0 0,2.5 a0.5 0.5 0 0 0 1 0 l0,-2.5 2.5,0 a0.5 0.5 0 0 0 0 -1 l-2.5,0 z\"\n});\n\nvar SvgMeasureTarget = function SvgMeasureTarget(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 26 26\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    fill: \"currentColor\",\n    strokeWidth: 0,\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3, _ref4);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgMeasureTarget, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/measure-target.8448b2d3.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"Measure Target CR\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M23,7 l-15,15 M7,17 l0,6 6,0\",\n  strokeWidth: 2\n});\n\nvar SvgMeasureTargetCr = function SvgMeasureTargetCr(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 24 24\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    stroke: \"currentColor\",\n    fill: \"none\",\n    strokeWidth: 1,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, /*#__PURE__*/React.createElement(\"text\", {\n    fill: \"#000000\",\n    x: 0,\n    y: 8,\n    style: {\n      fontSize: 10\n    }\n  }, \"\\n    CR\\n  \"), _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgMeasureTargetCr, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/measure-target-cr.539121a5.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"Measure Target NE\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M23,7 l-15,15 M7,17 l0,6 6,0\",\n  strokeWidth: 2\n});\n\nvar SvgMeasureTargetNe = function SvgMeasureTargetNe(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 24 24\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    stroke: \"currentColor\",\n    fill: \"none\",\n    strokeWidth: 1,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, /*#__PURE__*/React.createElement(\"text\", {\n    fill: \"#000000\",\n    x: 0,\n    y: 8,\n    style: {\n      fontSize: 10,\n      fontFamily: \"sans-serif\"\n    }\n  }, \"NE\"), _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgMeasureTargetNe, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/measure-target-ne.520e9a0f.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"Measure Target UN\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M23,7 l-15,15 M7,17 l0,6 6,0\",\n  strokeWidth: 2\n});\n\nvar SvgMeasureTargetUn = function SvgMeasureTargetUn(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 24 24\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    stroke: \"currentColor\",\n    fill: \"none\",\n    strokeWidth: 1,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, /*#__PURE__*/React.createElement(\"text\", {\n    fill: \"#000000\",\n    x: 0,\n    y: 8,\n    style: {\n      fontSize: 10\n    }\n  }, \"\\n    UN\\n  \"), _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgMeasureTargetUn, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/measure-target-un.d7fc9121.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"Measure Temp\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"g\", {\n  fill: \"none\",\n  strokeWidth: 1,\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\"\n}, /*#__PURE__*/React.createElement(\"circle\", {\n  cx: 6.5,\n  cy: 6.5,\n  r: 6\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M6.5,3 l0,7 M3,6.5 l7,0\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m22.5,6 -16.5,16.5\",\n  strokeWidth: 3,\n  strokeDasharray: \"0.6666,5\"\n}));\n\nvar SvgMeasureTemp = function SvgMeasureTemp(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 24 24\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    stroke: \"currentColor\",\n    fill: \"none\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgMeasureTemp, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/measure-temp.7065e6c7.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"Object Group\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m14.5,2.75 2,0 a2.5 2.5 0 0 1 2.5 2.5 l0,13.25 a2.5 2.5 0 0 1 -2.5 2.5 l-11.5,0 a2.5 2.5 0 0 1 -2.5 -2.5 l0,-1\",\n  strokeDasharray: \"1,3\"\n});\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m0.5,2 0,14 a1.5 1.5 0 0 0 1.5 1.5 l12,0 a1.5 1.5 0 0 0 1.5 -1.5 l0,-14\"\n});\n\nvar _ref5 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m2,2 12,0\",\n  strokeWidth: 4\n});\n\nvar _ref6 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m4.4,7.5 7.2,0 m0,3 -7.2,0 m0,3 7.2,0\",\n  strokeLinecap: \"square\"\n});\n\nvar SvgObjectGroup = function SvgObjectGroup(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 20 22\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    fill: \"currentColor\",\n    strokeWidth: 1,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3, _ref4, _ref5, _ref6);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgObjectGroup, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/object-group.e12ec019.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"OHIF Logo\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"rect\", {\n  x: 1.25,\n  y: 1.25,\n  width: 18.8,\n  height: 18.8,\n  rx: 1,\n  ry: 1\n});\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"rect\", {\n  x: 26,\n  y: 1.25,\n  width: 18.8,\n  height: 18.8,\n  rx: 1,\n  ry: 1\n});\n\nvar _ref5 = /*#__PURE__*/React.createElement(\"rect\", {\n  x: 1.25,\n  y: 26,\n  width: 18.8,\n  height: 18.8,\n  rx: 1,\n  ry: 1\n});\n\nvar _ref6 = /*#__PURE__*/React.createElement(\"rect\", {\n  x: 26,\n  y: 26,\n  width: 18.8,\n  height: 18.8,\n  rx: 1,\n  ry: 1\n});\n\nvar SvgOhifLogo = function SvgOhifLogo(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 47 47\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    stroke: \"currentColor\",\n    fill: \"none\",\n    strokeWidth: 2.5,\n    strokeMiterlimit: 10,\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3, _ref4, _ref5, _ref6);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgOhifLogo, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/ohif-logo.9b2117f8.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M10.416 5.932C10.416 7.46267 9.954 8.70867 9.03 9.67C8.11533 10.622 6.958 11.098 5.558 11.098C4.16733 11.098 3.00533 10.6173 2.072 9.656C1.13867 8.68533 0.672 7.43933 0.672 5.918C0.672 4.38733 1.15267 3.16467 2.114 2.25C3.07533 1.326 4.22333 0.863999 5.558 0.863999C6.89267 0.863999 8.036 1.326 8.988 2.25C9.94 3.16467 10.416 4.392 10.416 5.932ZM3.052 8.9C3.77067 9.60933 4.606 9.964 5.558 9.964C6.51 9.964 7.34067 9.60933 8.05 8.9C8.75933 8.18133 9.114 7.20133 9.114 5.96C9.114 4.70933 8.75 3.734 8.022 3.034C7.30333 2.32467 6.482 1.97 5.558 1.97C4.634 1.97 3.808 2.32467 3.08 3.034C2.352 3.734 1.988 4.70933 1.988 5.96C1.988 7.20133 2.34267 8.18133 3.052 8.9ZM14.6296 14.15H11.8156C11.6942 14.15 11.6336 14.094 11.6336 13.982V13.38C11.6336 13.268 11.6942 13.212 11.8156 13.212H12.5996V5.05H11.8436C11.7222 5.05 11.6616 4.994 11.6616 4.882V4.28C11.6616 4.168 11.7222 4.112 11.8436 4.112H13.4816C13.6029 4.112 13.6636 4.168 13.6636 4.28L13.6496 5.386H13.6636C13.8409 5.00333 14.1256 4.68133 14.5176 4.42C14.9189 4.14933 15.4089 4.014 15.9876 4.014C16.9302 4.014 17.6909 4.336 18.2696 4.98C18.8482 5.61467 19.1376 6.464 19.1376 7.528C19.1376 8.58267 18.8529 9.44133 18.2836 10.104C17.7142 10.7667 16.9536 11.098 16.0016 11.098C15.4229 11.098 14.9376 10.9673 14.5456 10.706C14.1629 10.4353 13.8876 10.1087 13.7196 9.726H13.6776C13.7056 10.0247 13.7196 10.2393 13.7196 10.37V13.212H14.6296C14.7509 13.212 14.8116 13.268 14.8116 13.38V13.982C14.8116 14.094 14.7509 14.15 14.6296 14.15ZM13.6916 7.584C13.6916 8.396 13.9016 9.02133 14.3216 9.46C14.7509 9.89867 15.2642 10.118 15.8616 10.118C16.4682 10.118 16.9722 9.88467 17.3736 9.418C17.7842 8.942 17.9896 8.32133 17.9896 7.556C17.9896 6.78133 17.7842 6.16067 17.3736 5.694C16.9722 5.22733 16.4682 4.994 15.8616 4.994C15.2549 4.994 14.7416 5.22267 14.3216 5.68C13.9016 6.13733 13.6916 6.772 13.6916 7.584ZM26.3811 7.696H21.3411C21.3785 8.47067 21.6211 9.068 22.0691 9.488C22.5265 9.908 23.0398 10.118 23.6091 10.118C24.1785 10.118 24.6638 9.99667 25.0651 9.754C25.4758 9.51133 25.7511 9.27333 25.8911 9.04C25.9658 8.94667 26.0498 8.93267 26.1431 8.998L26.5211 9.376C26.5771 9.432 26.6051 9.48333 26.6051 9.53C26.6051 9.56733 26.5818 9.61867 26.5351 9.684C26.4978 9.74933 26.4138 9.852 26.2831 9.992C26.1525 10.132 25.9658 10.2907 25.7231 10.468C25.4898 10.6453 25.1818 10.7947 24.7991 10.916C24.4258 11.0373 24.0245 11.098 23.5951 11.098C22.6151 11.098 21.7938 10.776 21.1311 10.132C20.4778 9.488 20.1511 8.62467 20.1511 7.542C20.1511 6.45 20.4778 5.59133 21.1311 4.966C21.7845 4.33133 22.5825 4.014 23.5251 4.014C24.4771 4.014 25.2238 4.322 25.7651 4.938C26.3065 5.54467 26.5771 6.366 26.5771 7.402C26.5771 7.43933 26.5771 7.47667 26.5771 7.514C26.5771 7.63533 26.5118 7.696 26.3811 7.696ZM25.4151 6.842C25.3871 6.26333 25.2051 5.80133 24.8691 5.456C24.5331 5.11067 24.0851 4.938 23.5251 4.938C22.9651 4.938 22.4845 5.09667 22.0831 5.414C21.6818 5.73133 21.4438 6.20733 21.3691 6.842H25.4151ZM35.1323 11H33.8023C33.401 11 33.2003 10.804 33.2003 10.412V6.73C33.2003 6.18867 33.0697 5.76867 32.8083 5.47C32.547 5.17133 32.1643 5.022 31.6603 5.022C30.9417 5.022 30.3817 5.316 29.9803 5.904C29.9337 5.96 29.873 6.06267 29.7983 6.212V10.062H30.5403C30.6617 10.062 30.7223 10.118 30.7223 10.23V10.832C30.7223 10.944 30.6617 11 30.5403 11H27.8663C27.745 11 27.6843 10.944 27.6843 10.832V10.23C27.6843 10.118 27.745 10.062 27.8663 10.062H28.6363V5.05H27.8663C27.745 5.05 27.6843 4.994 27.6843 4.882V4.28C27.6843 4.168 27.745 4.112 27.8663 4.112H29.5043C29.6257 4.112 29.6863 4.168 29.6863 4.28L29.6583 5.232H29.7003C30.1857 4.42 30.937 4.014 31.9543 4.014C32.701 4.014 33.2843 4.23333 33.7043 4.672C34.1243 5.11067 34.339 5.70333 34.3483 6.45V10.062H35.1323C35.2537 10.062 35.3143 10.118 35.3143 10.23V10.832C35.3143 10.944 35.2537 11 35.1323 11ZM50.8763 11H47.5023C47.3903 11 47.3343 10.944 47.3343 10.832V10.118C47.3343 10.006 47.3903 9.95 47.5023 9.95H48.5803V6.52H43.3723V9.95H44.4503C44.5717 9.95 44.6323 10.006 44.6323 10.118V10.832C44.6323 10.944 44.5717 11 44.4503 11H41.0903C40.969 11 40.9083 10.944 40.9083 10.832V10.118C40.9083 10.006 40.969 9.95 41.0903 9.95H42.1543V1.998H41.0903C40.969 1.998 40.9083 1.942 40.9083 1.83V1.116C40.9083 1.004 40.969 0.947999 41.0903 0.947999H44.4503C44.5717 0.947999 44.6323 1.004 44.6323 1.116V1.83C44.6323 1.942 44.5717 1.998 44.4503 1.998H43.3723V5.498H48.5803V1.998H47.5023C47.3903 1.998 47.3343 1.942 47.3343 1.83V1.116C47.3343 1.004 47.3903 0.947999 47.5023 0.947999H50.8763C50.9883 0.947999 51.0443 1.004 51.0443 1.116V1.83C51.0443 1.942 50.9883 1.998 50.8763 1.998H49.7983V9.95H50.8763C50.9883 9.95 51.0443 10.006 51.0443 10.118V10.832C51.0443 10.944 50.9883 11 50.8763 11ZM58.0452 7.696H53.0052C53.0425 8.47067 53.2852 9.068 53.7332 9.488C54.1905 9.908 54.7039 10.118 55.2732 10.118C55.8425 10.118 56.3279 9.99667 56.7292 9.754C57.1399 9.51133 57.4152 9.27333 57.5552 9.04C57.6299 8.94667 57.7139 8.93267 57.8072 8.998L58.1852 9.376C58.2412 9.432 58.2692 9.48333 58.2692 9.53C58.2692 9.56733 58.2459 9.61867 58.1992 9.684C58.1619 9.74933 58.0779 9.852 57.9472 9.992C57.8165 10.132 57.6299 10.2907 57.3872 10.468C57.1539 10.6453 56.8459 10.7947 56.4632 10.916C56.0899 11.0373 55.6885 11.098 55.2592 11.098C54.2792 11.098 53.4579 10.776 52.7952 10.132C52.1419 9.488 51.8152 8.62467 51.8152 7.542C51.8152 6.45 52.1419 5.59133 52.7952 4.966C53.4485 4.33133 54.2465 4.014 55.1892 4.014C56.1412 4.014 56.8879 4.322 57.4292 4.938C57.9705 5.54467 58.2412 6.366 58.2412 7.402C58.2412 7.43933 58.2412 7.47667 58.2412 7.514C58.2412 7.63533 58.1759 7.696 58.0452 7.696ZM57.0792 6.842C57.0512 6.26333 56.8692 5.80133 56.5332 5.456C56.1972 5.11067 55.7492 4.938 55.1892 4.938C54.6292 4.938 54.1485 5.09667 53.7472 5.414C53.3459 5.73133 53.1079 6.20733 53.0332 6.842H57.0792ZM66.2087 11H64.9907C64.5894 11 64.3887 10.804 64.3887 10.412V9.698H64.3607C63.6794 10.6407 62.7694 11.112 61.6307 11.112C60.9587 11.112 60.4081 10.9393 59.9787 10.594C59.5494 10.2393 59.3347 9.76333 59.3347 9.166C59.3347 8.40067 59.6661 7.84067 60.3287 7.486C61.0007 7.122 61.9201 6.94 63.0867 6.94H64.2627V6.772C64.2627 5.60533 63.6561 5.022 62.4427 5.022C61.8734 5.022 61.4627 5.078 61.2107 5.19C60.9587 5.29267 60.7767 5.37667 60.6647 5.442C60.5621 5.50733 60.4827 5.55867 60.4267 5.596C60.2867 5.708 60.1841 5.71733 60.1187 5.624L59.7267 5.134C59.6614 5.05933 59.6707 4.98467 59.7547 4.91C59.9134 4.70467 60.2401 4.504 60.7347 4.308C61.2294 4.112 61.8127 4.014 62.4847 4.014C64.4447 4.014 65.4247 4.94733 65.4247 6.814V10.062H66.2087C66.3207 10.062 66.3767 10.118 66.3767 10.23V10.832C66.3767 10.944 66.3207 11 66.2087 11ZM64.2627 7.78H63.1567C62.6154 7.78 62.1674 7.808 61.8127 7.864C61.4581 7.92 61.1547 8.04133 60.9027 8.228C60.6601 8.41467 60.5387 8.67133 60.5387 8.998C60.5387 9.32467 60.6694 9.59533 60.9307 9.81C61.2014 10.0153 61.5514 10.118 61.9807 10.118C62.8861 10.118 63.6467 9.71667 64.2627 8.914V7.78ZM70.2298 11H67.5558C67.4345 11 67.3738 10.944 67.3738 10.832V10.23C67.3738 10.118 67.4345 10.062 67.5558 10.062H68.3258V1.886H67.5558C67.4345 1.886 67.3738 1.83 67.3738 1.718V1.116C67.3738 1.004 67.4345 0.947999 67.5558 0.947999H69.1098C69.3618 0.947999 69.4878 1.06467 69.4878 1.298V10.062H70.2298C70.3511 10.062 70.4118 10.118 70.4118 10.23V10.832C70.4118 10.944 70.3511 11 70.2298 11ZM76.083 10.286C76.1203 10.3233 76.139 10.3653 76.139 10.412C76.139 10.4493 76.111 10.496 76.055 10.552C75.6443 10.916 75.1263 11.098 74.501 11.098C73.885 11.098 73.3763 10.8973 72.975 10.496C72.583 10.0853 72.387 9.49267 72.387 8.718V5.05H71.603C71.4723 5.05 71.407 4.98933 71.407 4.868V4.294C71.407 4.17267 71.4723 4.112 71.603 4.112H72.387V2.698C72.387 2.56733 72.4523 2.502 72.583 2.502H73.367C73.4883 2.502 73.549 2.56733 73.549 2.698V4.112H75.327C75.4577 4.112 75.523 4.17267 75.523 4.294V4.868C75.523 4.98933 75.4577 5.05 75.327 5.05H73.549V8.69C73.549 9.15667 73.6517 9.51133 73.857 9.754C74.0717 9.98733 74.3517 10.104 74.697 10.104C75.0517 10.104 75.3177 10.0153 75.495 9.838C75.5883 9.754 75.6723 9.75867 75.747 9.852L76.083 10.286ZM84.3511 11H83.0211C82.6198 11 82.4191 10.804 82.4191 10.412V6.73C82.4191 6.18867 82.2884 5.76867 82.0271 5.47C81.7658 5.17133 81.3831 5.022 80.8791 5.022C80.4964 5.022 80.2024 5.08267 79.9971 5.204C79.8011 5.316 79.6518 5.41867 79.5491 5.512C79.4464 5.596 79.3624 5.68 79.2971 5.764C79.1851 5.91333 79.0918 6.06733 79.0171 6.226V10.062H79.7591C79.8804 10.062 79.9411 10.118 79.9411 10.23V10.832C79.9411 10.944 79.8804 11 79.7591 11H77.0851C76.9638 11 76.9031 10.944 76.9031 10.832V10.23C76.9031 10.118 76.9638 10.062 77.0851 10.062H77.8551V1.886H77.0851C76.9638 1.886 76.9031 1.83 76.9031 1.718V1.116C76.9031 1.004 76.9638 0.947999 77.0851 0.947999H78.8491C78.9611 0.947999 79.0171 1.004 79.0171 1.116V4.238C79.0171 4.546 78.9984 4.83067 78.9611 5.092H78.9891C79.4464 4.37333 80.1744 4.014 81.1731 4.014C81.9198 4.014 82.5031 4.23333 82.9231 4.672C83.3431 5.11067 83.5578 5.70333 83.5671 6.45V10.062H84.3511C84.4724 10.062 84.5331 10.118 84.5331 10.23V10.832C84.5331 10.944 84.4724 11 84.3511 11ZM93.6691 11H90.3091C90.1877 11 90.1271 10.944 90.1271 10.832V10.118C90.1271 10.006 90.1877 9.95 90.3091 9.95H91.3731V1.998H90.3091C90.1877 1.998 90.1271 1.942 90.1271 1.83V1.116C90.1271 1.004 90.1877 0.947999 90.3091 0.947999H93.6691C93.7904 0.947999 93.8511 1.004 93.8511 1.116V1.83C93.8511 1.942 93.7904 1.998 93.6691 1.998H92.5911V9.95H93.6691C93.7904 9.95 93.8511 10.006 93.8511 10.118V10.832C93.8511 10.944 93.7904 11 93.6691 11ZM106.793 11H105.463C105.248 11 105.089 10.958 104.987 10.874C104.893 10.7807 104.847 10.6267 104.847 10.412V6.73C104.847 6.18867 104.716 5.76867 104.455 5.47C104.203 5.17133 103.825 5.022 103.321 5.022C102.583 5.022 102.005 5.344 101.585 5.988C101.641 6.156 101.669 6.34267 101.669 6.548V10.062H102.453C102.565 10.062 102.621 10.118 102.621 10.23V10.832C102.621 10.944 102.565 11 102.453 11H99.7787C99.6573 11 99.5967 10.944 99.5967 10.832V10.23C99.5967 10.118 99.6573 10.062 99.7787 10.062H100.521V6.73C100.521 6.18867 100.39 5.76867 100.129 5.47C99.8673 5.17133 99.4847 5.022 98.9807 5.022C98.598 5.022 98.304 5.08267 98.0987 5.204C97.9027 5.316 97.7533 5.41867 97.6507 5.512C97.548 5.596 97.464 5.68 97.3987 5.764C97.2867 5.91333 97.1933 6.06733 97.1187 6.226V10.062H97.8047C97.9167 10.062 97.9727 10.118 97.9727 10.23V10.832C97.9727 10.944 97.9167 11 97.8047 11H95.1867C95.0653 11 95.0047 10.944 95.0047 10.832V10.23C95.0047 10.118 95.0653 10.062 95.1867 10.062H95.9567V5.05H95.1867C95.0653 5.05 95.0047 4.994 95.0047 4.882V4.28C95.0047 4.168 95.0653 4.112 95.1867 4.112H96.5587C96.7173 4.112 96.8293 4.14467 96.8947 4.21C96.9693 4.266 97.0067 4.37333 97.0067 4.532L96.9787 5.232H97.0207C97.506 4.42 98.2573 4.014 99.2747 4.014C100.301 4.014 101.001 4.40133 101.375 5.176C101.907 4.40133 102.658 4.014 103.629 4.014C104.375 4.014 104.954 4.23333 105.365 4.672C105.785 5.11067 105.995 5.70333 105.995 6.45L106.009 10.062H106.793C106.914 10.062 106.975 10.118 106.975 10.23V10.832C106.975 10.944 106.914 11 106.793 11ZM114.771 11H113.553C113.152 11 112.951 10.804 112.951 10.412V9.698H112.923C112.242 10.6407 111.332 11.112 110.193 11.112C109.521 11.112 108.971 10.9393 108.541 10.594C108.112 10.2393 107.897 9.76333 107.897 9.166C107.897 8.40067 108.229 7.84067 108.891 7.486C109.563 7.122 110.483 6.94 111.649 6.94H112.825V6.772C112.825 5.60533 112.219 5.022 111.005 5.022C110.436 5.022 110.025 5.078 109.773 5.19C109.521 5.29267 109.339 5.37667 109.227 5.442C109.125 5.50733 109.045 5.55867 108.989 5.596C108.849 5.708 108.747 5.71733 108.681 5.624L108.289 5.134C108.224 5.05933 108.233 4.98467 108.317 4.91C108.476 4.70467 108.803 4.504 109.297 4.308C109.792 4.112 110.375 4.014 111.047 4.014C113.007 4.014 113.987 4.94733 113.987 6.814V10.062H114.771C114.883 10.062 114.939 10.118 114.939 10.23V10.832C114.939 10.944 114.883 11 114.771 11ZM112.825 7.78H111.719C111.178 7.78 110.73 7.808 110.375 7.864C110.021 7.92 109.717 8.04133 109.465 8.228C109.223 8.41467 109.101 8.67133 109.101 8.998C109.101 9.32467 109.232 9.59533 109.493 9.81C109.764 10.0153 110.114 10.118 110.543 10.118C111.449 10.118 112.209 9.71667 112.825 8.914V7.78ZM119.061 14.276C118.594 14.276 118.239 14.2433 117.997 14.178C117.763 14.1127 117.572 14.052 117.423 13.996C117.283 13.9493 117.161 13.898 117.059 13.842C116.956 13.7953 116.858 13.744 116.765 13.688C116.354 13.4173 116.2 13.2213 116.303 13.1L116.667 12.582C116.723 12.498 116.802 12.4933 116.905 12.568C116.914 12.568 116.942 12.5867 116.989 12.624C117.045 12.6707 117.096 12.7127 117.143 12.75C117.199 12.7873 117.269 12.8293 117.353 12.876C117.446 12.932 117.549 12.9787 117.661 13.016C117.773 13.0627 117.894 13.1047 118.025 13.142C118.333 13.226 118.673 13.268 119.047 13.268C119.719 13.268 120.255 13.1047 120.657 12.778C121.067 12.4607 121.273 11.9567 121.273 11.266V9.67C121.105 10.062 120.825 10.398 120.433 10.678C120.05 10.958 119.569 11.098 118.991 11.098C118.039 11.098 117.273 10.7667 116.695 10.104C116.125 9.44133 115.841 8.58267 115.841 7.528C115.841 6.47333 116.13 5.624 116.709 4.98C117.297 4.336 118.057 4.014 118.991 4.014C119.569 4.014 120.055 4.14933 120.447 4.42C120.848 4.68133 121.137 5.00333 121.315 5.386H121.343L121.329 4.28C121.329 4.168 121.385 4.112 121.497 4.112H123.149C123.261 4.112 123.317 4.168 123.317 4.28V4.882C123.317 4.994 123.261 5.05 123.149 5.05H122.393V11.266C122.393 12.2647 122.085 13.016 121.469 13.52C120.862 14.024 120.059 14.276 119.061 14.276ZM116.989 7.556C116.989 8.32133 117.194 8.942 117.605 9.418C118.015 9.88467 118.529 10.118 119.145 10.118C119.761 10.118 120.269 9.88467 120.671 9.418C121.081 8.95133 121.287 8.326 121.287 7.542C121.287 6.758 121.081 6.13733 120.671 5.68C120.269 5.22267 119.761 4.994 119.145 4.994C118.529 4.994 118.015 5.22733 117.605 5.694C117.194 6.16067 116.989 6.78133 116.989 7.556ZM127.255 11H124.581C124.46 11 124.399 10.944 124.399 10.832V10.23C124.399 10.118 124.46 10.062 124.581 10.062H125.351V5.05H124.581C124.46 5.05 124.399 4.994 124.399 4.882V4.28C124.399 4.168 124.46 4.112 124.581 4.112H126.345C126.457 4.112 126.513 4.168 126.513 4.28V10.062H127.255C127.377 10.062 127.437 10.118 127.437 10.23V10.832C127.437 10.944 127.377 11 127.255 11ZM126.457 2.04C126.616 2.19867 126.695 2.38533 126.695 2.6C126.695 2.81467 126.616 2.99667 126.457 3.146C126.308 3.29533 126.126 3.37 125.911 3.37C125.697 3.37 125.51 3.29533 125.351 3.146C125.202 2.99667 125.127 2.81467 125.127 2.6C125.127 2.38533 125.202 2.19867 125.351 2.04C125.51 1.88133 125.697 1.802 125.911 1.802C126.126 1.802 126.308 1.88133 126.457 2.04ZM135.949 11H134.619C134.217 11 134.017 10.804 134.017 10.412V6.73C134.017 6.18867 133.886 5.76867 133.625 5.47C133.363 5.17133 132.981 5.022 132.477 5.022C131.758 5.022 131.198 5.316 130.797 5.904C130.75 5.96 130.689 6.06267 130.615 6.212V10.062H131.357C131.478 10.062 131.539 10.118 131.539 10.23V10.832C131.539 10.944 131.478 11 131.357 11H128.683C128.561 11 128.501 10.944 128.501 10.832V10.23C128.501 10.118 128.561 10.062 128.683 10.062H129.453V5.05H128.683C128.561 5.05 128.501 4.994 128.501 4.882V4.28C128.501 4.168 128.561 4.112 128.683 4.112H130.321C130.442 4.112 130.503 4.168 130.503 4.28L130.475 5.232H130.517C131.002 4.42 131.753 4.014 132.771 4.014C133.517 4.014 134.101 4.23333 134.521 4.672C134.941 5.11067 135.155 5.70333 135.165 6.45V10.062H135.949C136.07 10.062 136.131 10.118 136.131 10.23V10.832C136.131 10.944 136.07 11 135.949 11ZM140.156 14.276C139.69 14.276 139.335 14.2433 139.092 14.178C138.859 14.1127 138.668 14.052 138.518 13.996C138.378 13.9493 138.257 13.898 138.154 13.842C138.052 13.7953 137.954 13.744 137.86 13.688C137.45 13.4173 137.296 13.2213 137.398 13.1L137.762 12.582C137.818 12.498 137.898 12.4933 138 12.568C138.01 12.568 138.038 12.5867 138.084 12.624C138.14 12.6707 138.192 12.7127 138.238 12.75C138.294 12.7873 138.364 12.8293 138.448 12.876C138.542 12.932 138.644 12.9787 138.756 13.016C138.868 13.0627 138.99 13.1047 139.12 13.142C139.428 13.226 139.769 13.268 140.142 13.268C140.814 13.268 141.351 13.1047 141.752 12.778C142.163 12.4607 142.368 11.9567 142.368 11.266V9.67C142.2 10.062 141.92 10.398 141.528 10.678C141.146 10.958 140.665 11.098 140.086 11.098C139.134 11.098 138.369 10.7667 137.79 10.104C137.221 9.44133 136.936 8.58267 136.936 7.528C136.936 6.47333 137.226 5.624 137.804 4.98C138.392 4.336 139.153 4.014 140.086 4.014C140.665 4.014 141.15 4.14933 141.542 4.42C141.944 4.68133 142.233 5.00333 142.41 5.386H142.438L142.424 4.28C142.424 4.168 142.48 4.112 142.592 4.112H144.244C144.356 4.112 144.412 4.168 144.412 4.28V4.882C144.412 4.994 144.356 5.05 144.244 5.05H143.488V11.266C143.488 12.2647 143.18 13.016 142.564 13.52C141.958 14.024 141.155 14.276 140.156 14.276ZM138.084 7.556C138.084 8.32133 138.29 8.942 138.7 9.418C139.111 9.88467 139.624 10.118 140.24 10.118C140.856 10.118 141.365 9.88467 141.766 9.418C142.177 8.95133 142.382 8.326 142.382 7.542C142.382 6.758 142.177 6.13733 141.766 5.68C141.365 5.22267 140.856 4.994 140.24 4.994C139.624 4.994 139.111 5.22733 138.7 5.694C138.29 6.16067 138.084 6.78133 138.084 7.556ZM154.07 11H150.206C150.084 11 150.024 10.944 150.024 10.832V10.118C150.024 10.006 150.084 9.95 150.206 9.95H151.27V1.998H150.206C150.084 1.998 150.024 1.942 150.024 1.83V1.116C150.024 1.004 150.084 0.947999 150.206 0.947999H157.388C157.509 0.947999 157.57 1.004 157.57 1.116V3.37C157.57 3.49133 157.509 3.552 157.388 3.552H156.632C156.52 3.552 156.464 3.49133 156.464 3.37V1.998H152.488V5.47H155.778C155.899 5.47 155.96 5.526 155.96 5.638V6.352C155.96 6.464 155.899 6.52 155.778 6.52H152.488V9.95H154.07C154.182 9.95 154.238 10.006 154.238 10.118V10.832C154.238 10.944 154.182 11 154.07 11ZM163.682 10.118C163.029 10.7713 162.194 11.098 161.176 11.098C160.159 11.098 159.324 10.776 158.67 10.132C158.017 9.47867 157.69 8.61533 157.69 7.542C157.69 6.45933 158.022 5.60067 158.684 4.966C159.347 4.33133 160.178 4.014 161.176 4.014C162.184 4.014 163.015 4.336 163.668 4.98C164.331 5.61467 164.662 6.46867 164.662 7.542C164.662 8.606 164.336 9.46467 163.682 10.118ZM158.866 7.542C158.866 8.30733 159.09 8.928 159.538 9.404C159.986 9.88 160.532 10.118 161.176 10.118C161.83 10.118 162.38 9.88 162.828 9.404C163.276 8.928 163.5 8.30733 163.5 7.542C163.5 6.77667 163.272 6.16067 162.814 5.694C162.366 5.22733 161.825 4.994 161.19 4.994C160.556 4.994 160.01 5.22733 159.552 5.694C159.095 6.16067 158.866 6.77667 158.866 7.542ZM172.763 11H171.545C171.144 11 170.943 10.804 170.943 10.412V9.894H170.901C170.518 10.6967 169.79 11.098 168.717 11.098C167.97 11.098 167.378 10.8787 166.939 10.44C166.51 9.992 166.29 9.39933 166.281 8.662V5.05H165.483C165.371 5.05 165.315 4.994 165.315 4.882V4.28C165.315 4.168 165.371 4.112 165.483 4.112H166.827C167.228 4.112 167.429 4.308 167.429 4.7V8.382C167.429 8.92333 167.56 9.34333 167.821 9.642C168.082 9.94067 168.465 10.09 168.969 10.09C169.65 10.09 170.187 9.838 170.579 9.334C170.747 9.11933 170.831 8.97467 170.831 8.9V5.05H170.075C169.963 5.05 169.907 4.994 169.907 4.882V4.28C169.907 4.168 169.963 4.112 170.075 4.112H171.811C171.923 4.112 171.979 4.168 171.979 4.28V10.062H172.763C172.884 10.062 172.945 10.118 172.945 10.23V10.832C172.945 10.944 172.884 11 172.763 11ZM181.421 11H180.091C179.69 11 179.489 10.804 179.489 10.412V6.73C179.489 6.18867 179.359 5.76867 179.097 5.47C178.836 5.17133 178.453 5.022 177.949 5.022C177.231 5.022 176.671 5.316 176.269 5.904C176.223 5.96 176.162 6.06267 176.087 6.212V10.062H176.829C176.951 10.062 177.011 10.118 177.011 10.23V10.832C177.011 10.944 176.951 11 176.829 11H174.155C174.034 11 173.973 10.944 173.973 10.832V10.23C173.973 10.118 174.034 10.062 174.155 10.062H174.925V5.05H174.155C174.034 5.05 173.973 4.994 173.973 4.882V4.28C173.973 4.168 174.034 4.112 174.155 4.112H175.793C175.915 4.112 175.975 4.168 175.975 4.28L175.947 5.232H175.989C176.475 4.42 177.226 4.014 178.243 4.014C178.99 4.014 179.573 4.23333 179.993 4.672C180.413 5.11067 180.628 5.70333 180.637 6.45V10.062H181.421C181.543 10.062 181.603 10.118 181.603 10.23V10.832C181.603 10.944 181.543 11 181.421 11ZM189.636 11H188.418C188.203 11 188.044 10.958 187.942 10.874C187.848 10.7807 187.802 10.6267 187.802 10.412V9.628H187.788C187.638 10.02 187.358 10.3653 186.948 10.664C186.537 10.9533 186.038 11.098 185.45 11.098C184.516 11.098 183.756 10.7713 183.168 10.118C182.589 9.46467 182.3 8.61067 182.3 7.556C182.3 6.492 182.589 5.638 183.168 4.994C183.756 4.34067 184.521 4.014 185.464 4.014C186.042 4.014 186.523 4.14933 186.906 4.42C187.288 4.68133 187.564 5.00333 187.732 5.386H187.746C187.736 5.19933 187.732 5.04533 187.732 4.924V1.886H186.948C186.826 1.886 186.766 1.83 186.766 1.718V1.116C186.766 1.004 186.826 0.947999 186.948 0.947999H188.684C188.796 0.947999 188.852 1.004 188.852 1.116V10.062H189.636C189.748 10.062 189.804 10.118 189.804 10.23V10.832C189.804 10.944 189.748 11 189.636 11ZM183.448 7.528C183.448 8.30267 183.648 8.928 184.05 9.404C184.46 9.88 184.978 10.118 185.604 10.118C186.229 10.118 186.742 9.88467 187.144 9.418C187.545 8.942 187.746 8.312 187.746 7.528C187.746 6.744 187.54 6.128 187.13 5.68C186.719 5.22267 186.21 4.994 185.604 4.994C184.997 4.994 184.484 5.22267 184.064 5.68C183.653 6.13733 183.448 6.75333 183.448 7.528ZM197.746 11H196.528C196.127 11 195.926 10.804 195.926 10.412V9.698H195.898C195.217 10.6407 194.307 11.112 193.168 11.112C192.496 11.112 191.945 10.9393 191.516 10.594C191.087 10.2393 190.872 9.76333 190.872 9.166C190.872 8.40067 191.203 7.84067 191.866 7.486C192.538 7.122 193.457 6.94 194.624 6.94H195.8V6.772C195.8 5.60533 195.193 5.022 193.98 5.022C193.411 5.022 193 5.078 192.748 5.19C192.496 5.29267 192.314 5.37667 192.202 5.442C192.099 5.50733 192.02 5.55867 191.964 5.596C191.824 5.708 191.721 5.71733 191.656 5.624L191.264 5.134C191.199 5.05933 191.208 4.98467 191.292 4.91C191.451 4.70467 191.777 4.504 192.272 4.308C192.767 4.112 193.35 4.014 194.022 4.014C195.982 4.014 196.962 4.94733 196.962 6.814V10.062H197.746C197.858 10.062 197.914 10.118 197.914 10.23V10.832C197.914 10.944 197.858 11 197.746 11ZM195.8 7.78H194.694C194.153 7.78 193.705 7.808 193.35 7.864C192.995 7.92 192.692 8.04133 192.44 8.228C192.197 8.41467 192.076 8.67133 192.076 8.998C192.076 9.32467 192.207 9.59533 192.468 9.81C192.739 10.0153 193.089 10.118 193.518 10.118C194.423 10.118 195.184 9.71667 195.8 8.914V7.78ZM203.259 10.286C203.296 10.3233 203.315 10.3653 203.315 10.412C203.315 10.4493 203.287 10.496 203.231 10.552C202.82 10.916 202.302 11.098 201.677 11.098C201.061 11.098 200.552 10.8973 200.151 10.496C199.759 10.0853 199.563 9.49267 199.563 8.718V5.05H198.779C198.648 5.05 198.583 4.98933 198.583 4.868V4.294C198.583 4.17267 198.648 4.112 198.779 4.112H199.563V2.698C199.563 2.56733 199.628 2.502 199.759 2.502H200.543C200.664 2.502 200.725 2.56733 200.725 2.698V4.112H202.503C202.633 4.112 202.699 4.17267 202.699 4.294V4.868C202.699 4.98933 202.633 5.05 202.503 5.05H200.725V8.69C200.725 9.15667 200.827 9.51133 201.033 9.754C201.247 9.98733 201.527 10.104 201.873 10.104C202.227 10.104 202.493 10.0153 202.671 9.838C202.764 9.754 202.848 9.75867 202.923 9.852L203.259 10.286ZM206.949 11H204.275C204.153 11 204.093 10.944 204.093 10.832V10.23C204.093 10.118 204.153 10.062 204.275 10.062H205.045V5.05H204.275C204.153 5.05 204.093 4.994 204.093 4.882V4.28C204.093 4.168 204.153 4.112 204.275 4.112H206.039C206.151 4.112 206.207 4.168 206.207 4.28V10.062H206.949C207.07 10.062 207.131 10.118 207.131 10.23V10.832C207.131 10.944 207.07 11 206.949 11ZM206.151 2.04C206.309 2.19867 206.389 2.38533 206.389 2.6C206.389 2.81467 206.309 2.99667 206.151 3.146C206.001 3.29533 205.819 3.37 205.605 3.37C205.39 3.37 205.203 3.29533 205.045 3.146C204.895 2.99667 204.821 2.81467 204.821 2.6C204.821 2.38533 204.895 2.19867 205.045 2.04C205.203 1.88133 205.39 1.802 205.605 1.802C205.819 1.802 206.001 1.88133 206.151 2.04ZM214.022 10.118C213.369 10.7713 212.533 11.098 211.516 11.098C210.499 11.098 209.663 10.776 209.01 10.132C208.357 9.47867 208.03 8.61533 208.03 7.542C208.03 6.45933 208.361 5.60067 209.024 4.966C209.687 4.33133 210.517 4.014 211.516 4.014C212.524 4.014 213.355 4.336 214.008 4.98C214.671 5.61467 215.002 6.46867 215.002 7.542C215.002 8.606 214.675 9.46467 214.022 10.118ZM209.206 7.542C209.206 8.30733 209.43 8.928 209.878 9.404C210.326 9.88 210.872 10.118 211.516 10.118C212.169 10.118 212.72 9.88 213.168 9.404C213.616 8.928 213.84 8.30733 213.84 7.542C213.84 6.77667 213.611 6.16067 213.154 5.694C212.706 5.22733 212.165 4.994 211.53 4.994C210.895 4.994 210.349 5.22733 209.892 5.694C209.435 6.16067 209.206 6.77667 209.206 7.542ZM223.49 11H222.16C221.758 11 221.558 10.804 221.558 10.412V6.73C221.558 6.18867 221.427 5.76867 221.166 5.47C220.904 5.17133 220.522 5.022 220.018 5.022C219.299 5.022 218.739 5.316 218.338 5.904C218.291 5.96 218.23 6.06267 218.156 6.212V10.062H218.898C219.019 10.062 219.08 10.118 219.08 10.23V10.832C219.08 10.944 219.019 11 218.898 11H216.224C216.102 11 216.042 10.944 216.042 10.832V10.23C216.042 10.118 216.102 10.062 216.224 10.062H216.994V5.05H216.224C216.102 5.05 216.042 4.994 216.042 4.882V4.28C216.042 4.168 216.102 4.112 216.224 4.112H217.862C217.983 4.112 218.044 4.168 218.044 4.28L218.016 5.232H218.058C218.543 4.42 219.294 4.014 220.312 4.014C221.058 4.014 221.642 4.23333 222.062 4.672C222.482 5.11067 222.696 5.70333 222.706 6.45V10.062H223.49C223.611 10.062 223.672 10.118 223.672 10.23V10.832C223.672 10.944 223.611 11 223.49 11Z\",\n  fill: \"white\"\n});\n\nvar SvgOhifTextLogo = function SvgOhifTextLogo(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 224 15\",\n    fill: \"none\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgOhifTextLogo, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/ohif-text-logo.b1984f79.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"Oval\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M12 5.5c-4.688 0-8.5 3.813-8.5 8.5s3.813 8.5 8.5 8.5 8.5-3.813 8.5-8.5-3.813-8.5-8.5-8.5zM24 14c0 6.625-5.375 12-12 12s-12-5.375-12-12 5.375-12 12-12v0c6.625 0 12 5.375 12 12z\"\n});\n\nvar SvgOval = function SvgOval(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 24 28\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    fill: \"currentColor\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgOval, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/oval.7a8ee179.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"Pallete\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M17.484 12c0.844 0 1.5-0.656 1.5-1.5s-0.656-1.5-1.5-1.5-1.5 0.656-1.5 1.5 0.656 1.5 1.5 1.5zM14.484 8.016c0.844 0 1.5-0.656 1.5-1.5s-0.656-1.5-1.5-1.5-1.5 0.656-1.5 1.5 0.656 1.5 1.5 1.5zM9.516 8.016c0.844 0 1.5-0.656 1.5-1.5s-0.656-1.5-1.5-1.5-1.5 0.656-1.5 1.5 0.656 1.5 1.5 1.5zM6.516 12c0.844 0 1.5-0.656 1.5-1.5s-0.656-1.5-1.5-1.5-1.5 0.656-1.5 1.5 0.656 1.5 1.5 1.5zM12 3c4.969 0 9 3.609 9 8.016 0 2.766-2.25 4.969-5.016 4.969h-1.734c-0.844 0-1.5 0.656-1.5 1.5 0 0.375 0.141 0.703 0.375 0.984s0.375 0.656 0.375 1.031c0 0.844-0.656 1.5-1.5 1.5-4.969 0-9-4.031-9-9s4.031-9 9-9z\"\n});\n\nvar SvgPalette = function SvgPalette(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 24 24\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    fill: \"currentColor\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgPalette, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/palette.7c20ddec.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z\"\n});\n\nvar SvgPlay = function SvgPlay(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 448 512\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    fill: \"currentColor\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgPlay, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/play.a549796b.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"Add\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M6.5 7L6.5 12C6.5 12.28 6.28 12.5 6 12.5 5.72 12.5 5.5 12.28 5.5 12L5.5 7 0.5 7C0.22 7 0 6.78 0 6.5 0 6.22 0.22 6 0.5 6L5.5 6 5.5 1C5.5 0.72 5.72 0.5 6 0.5 6.28 0.5 6.5 0.72 6.5 1L6.5 6 11.5 6C11.78 6 12 6.22 12 6.5 12 6.78 11.78 7 11.5 7L6.5 7Z\"\n});\n\nvar SvgPlus = function SvgPlus(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 12 13\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    fill: \"currentColor\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgPlus, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/plus.09b1a167.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"Power Off\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M24 14c0 6.609-5.391 12-12 12s-12-5.391-12-12c0-3.797 1.75-7.297 4.797-9.578 0.891-0.672 2.141-0.5 2.797 0.391 0.672 0.875 0.484 2.141-0.391 2.797-2.031 1.531-3.203 3.859-3.203 6.391 0 4.406 3.594 8 8 8s8-3.594 8-8c0-2.531-1.172-4.859-3.203-6.391-0.875-0.656-1.062-1.922-0.391-2.797 0.656-0.891 1.922-1.062 2.797-0.391 3.047 2.281 4.797 5.781 4.797 9.578zM14 2v10c0 1.094-0.906 2-2 2s-2-0.906-2-2v-10c0-1.094 0.906-2 2-2s2 0.906 2 2z\"\n});\n\nvar SvgPowerOff = function SvgPowerOff(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 24 28\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    fill: \"currentColor\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgPowerOff, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/power-off.73305f54.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"Reset\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M24 14c0 6.609-5.391 12-12 12-3.578 0-6.953-1.578-9.234-4.328-0.156-0.203-0.141-0.5 0.031-0.672l2.141-2.156c0.109-0.094 0.25-0.141 0.391-0.141 0.141 0.016 0.281 0.078 0.359 0.187 1.531 1.984 3.828 3.109 6.312 3.109 4.406 0 8-3.594 8-8s-3.594-8-8-8c-2.047 0-3.984 0.781-5.437 2.141l2.141 2.156c0.297 0.281 0.375 0.719 0.219 1.078-0.156 0.375-0.516 0.625-0.922 0.625h-7c-0.547 0-1-0.453-1-1v-7c0-0.406 0.25-0.766 0.625-0.922 0.359-0.156 0.797-0.078 1.078 0.219l2.031 2.016c2.203-2.078 5.187-3.313 8.266-3.313 6.609 0 12 5.391 12 12z\"\n});\n\nvar SvgReset = function SvgReset(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 24 28\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    fill: \"currentColor\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgReset, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/reset.b5d72a3b.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"Rotate\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M24 4v7c0 0.547-0.453 1-1 1h-7c-0.406 0-0.766-0.25-0.922-0.625-0.156-0.359-0.078-0.797 0.219-1.078l2.156-2.156c-1.469-1.359-3.406-2.141-5.453-2.141-4.406 0-8 3.594-8 8s3.594 8 8 8c2.484 0 4.781-1.125 6.312-3.109 0.078-0.109 0.219-0.172 0.359-0.187 0.141 0 0.281 0.047 0.391 0.141l2.141 2.156c0.187 0.172 0.187 0.469 0.031 0.672-2.281 2.75-5.656 4.328-9.234 4.328-6.609 0-12-5.391-12-12s5.391-12 12-12c3.078 0 6.062 1.234 8.266 3.313l2.031-2.016c0.281-0.297 0.719-0.375 1.094-0.219 0.359 0.156 0.609 0.516 0.609 0.922z\"\n});\n\nvar SvgRotate = function SvgRotate(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 24 28\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    fill: \"currentColor\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgRotate, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/rotate.808d8faf.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"Rotate Right\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M16.875 15.469c0.563-0.75 0.891-1.594 1.031-2.484h2.016c-0.188 1.406-0.703 2.719-1.594 3.891zM12.984 17.906c0.891-0.141 1.734-0.469 2.484-1.031l1.453 1.453c-1.172 0.891-2.531 1.406-3.938 1.594v-2.016zM19.922 11.016h-2.016c-0.141-0.891-0.469-1.734-1.031-2.484l1.453-1.406c0.891 1.172 1.406 2.484 1.594 3.891zM15.563 5.531l-4.547 4.453v-3.891c-2.859 0.469-5.016 2.953-5.016 5.906s2.156 5.438 5.016 5.906v2.016c-3.938-0.469-7.031-3.844-7.031-7.922s3.094-7.453 7.031-7.922v-3.094z\"\n});\n\nvar SvgRotateRight = function SvgRotateRight(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 24 24\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    fill: \"currentColor\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgRotateRight, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/rotate-right.3848e5c2.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  fill: \"currentColor\",\n  d: \"M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM272 80v80H144V80h128zm122 352H54a6 6 0 0 1-6-6V86a6 6 0 0 1 6-6h42v104c0 13.255 10.745 24 24 24h176c13.255 0 24-10.745 24-24V83.882l78.243 78.243a6 6 0 0 1 1.757 4.243V426a6 6 0 0 1-6 6zM224 232c-48.523 0-88 39.477-88 88s39.477 88 88 88 88-39.477 88-88-39.477-88-88-88zm0 128c-22.056 0-40-17.944-40-40s17.944-40 40-40 40 17.944 40 40-17.944 40-40 40z\"\n});\n\nvar SvgSaveRegular = function SvgSaveRegular(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    \"aria-hidden\": \"true\",\n    focusable: \"false\",\n    \"data-icon\": \"save\",\n    role: \"img\",\n    viewBox: \"0 0 448 512\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgSaveRegular, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/save-regular.cddfca36.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"Scissors\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M278.06 256L444.48 89.57c4.69-4.69 4.69-12.29 0-16.97-32.8-32.8-85.99-32.8-118.79 0L210.18 188.12l-24.86-24.86c4.31-10.92 6.68-22.81 6.68-35.26 0-53.02-42.98-96-96-96S0 74.98 0 128s42.98 96 96 96c4.54 0 8.99-.32 13.36-.93L142.29 256l-32.93 32.93c-4.37-.61-8.83-.93-13.36-.93-53.02 0-96 42.98-96 96s42.98 96 96 96 96-42.98 96-96c0-12.45-2.37-24.34-6.68-35.26l24.86-24.86L325.69 439.4c32.8 32.8 85.99 32.8 118.79 0 4.69-4.68 4.69-12.28 0-16.97L278.06 256zM96 160c-17.64 0-32-14.36-32-32s14.36-32 32-32 32 14.36 32 32-14.36 32-32 32zm0 256c-17.64 0-32-14.36-32-32s14.36-32 32-32 32 14.36 32 32-14.36 32-32 32z\"\n});\n\nvar SvgScissors = function SvgScissors(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 448 512\",\n    \"aria-labelby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    fill: \"currentColor\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgScissors, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/scissors.f205f9d6.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"Search\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M9.516 14.016c2.484 0 4.5-2.016 4.5-4.5s-2.016-4.5-4.5-4.5-4.5 2.016-4.5 4.5 2.016 4.5 4.5 4.5zM15.516 14.016l4.969 4.969-1.5 1.5-4.969-4.969v-0.797l-0.281-0.281c-1.125 0.984-2.625 1.547-4.219 1.547-3.609 0-6.516-2.859-6.516-6.469s2.906-6.516 6.516-6.516 6.469 2.906 6.469 6.516c0 1.594-0.563 3.094-1.547 4.219l0.281 0.281h0.797z\"\n});\n\nvar SvgSearch = function SvgSearch(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 24 24\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    fill: \"currentColor\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgSearch, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/search.244348f3.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"Search Plus\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"g\", {\n  fill: \"none\",\n  strokeWidth: 2,\n  strokeLinecap: \"round\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m11.5,11.5 4.5,4.5\"\n}), /*#__PURE__*/React.createElement(\"circle\", {\n  cx: 7,\n  cy: 7,\n  r: 6\n}));\n\nvar SvgSearchPlus = function SvgSearchPlus(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 17 17\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    stroke: \"currentColor\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgSearchPlus, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/search-plus.334d888a.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"Soft Tissue\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M14.967698,4.34501388 C15.2550298,4.40495392 15.4415328,4.45457827 15.49227,4.47472995 L18.99227,5.87472995 C19.9229327,6.24535421 20.6071984,7.05604396 20.81627,8.03572995 L22.9240586,12.8507299 C22.9557821,12.9984259 22.9190298,13.1525467 22.8240697,13.2700332 C22.7291096,13.3875196 22.5861231,13.4557751 22.4350586,13.4557299 L19.8300586,13.4557299 C19.59777,13.4558087 19.3960204,13.2959003 19.3430586,13.0697299 C18.4206468,11.3443101 17.9482939,10.4360314 17.926,10.3448938 C17.8925591,10.2081875 16.5995878,10.2646269 16.459794,10.2808938 C16.3200002,10.2971607 16.2142084,10.4149977 16.2130513,10.5557299 L17.00127,20.3677299 C17.00127,20.3924522 16.9994757,20.4167554 16.9960103,20.4405163 L17.339103,24.2068239 C17.3452344,24.3460372 17.2941797,24.4817044 17.197789,24.5823363 C17.1013983,24.6829682 16.9680538,24.7398138 16.8287056,24.7396788 L13.9563203,24.7396788 C13.6914418,24.7407536 13.46976,24.5390231 13.4459229,24.2752171 L12.8473618,20.8677299 L10.1448444,20.8677299 L9.49110077,24.2803211 C9.46701518,24.5439249 9.24540292,24.7453704 8.98070334,24.7442724 L6.11087007,24.7442724 C5.97161444,24.7444012 5.83835272,24.6876252 5.74197794,24.5871063 C5.64560316,24.4865874 5.59448459,24.3510547 5.60047264,24.2119279 L6.14951108,15.8281788 L6.32074271,10.6197299 C6.31958556,10.4789977 6.21379378,10.3611607 6.074,10.3448938 C5.93420622,10.3286269 4.85576757,10.2964486 4.82232666,10.433155 L3.7992041,13.0707299 C3.74559243,13.2975992 3.54231637,13.4573161 3.3092041,13.4557299 L0.709204102,13.4557299 C0.557909896,13.4562444 0.414519128,13.3882257 0.319204102,13.2707299 C0.224030189,13.1530765 0.187261793,12.9986492 0.219204102,12.8507299 L2.18526996,8.03772995 C2.39454762,7.05764471 3.08031159,6.24726462 4.01226996,5.87872995 L7.51226996,4.47872995 C7.56317342,4.45842417 7.74746599,4.41024276 8.03238467,4.35190973 L8.61849365,0.987915039 C9.55902913,1.39587402 10.4626872,1.59985352 11.3294678,1.59985352 C12.1962484,1.59985352 13.0229899,1.39587402 13.8096924,0.987915039 L14.967698,4.34501388 Z\"\n});\n\nvar SvgSoftTissue = function SvgSoftTissue(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 25 26\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    stroke: \"currentColor\",\n    strokeWidth: 1.5,\n    fill: \"none\",\n    fillRule: \"evenodd\",\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgSoftTissue, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/soft-tissue.713872de.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"Sort\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M41 288h238c21.4 0 32.1 25.9 17 41L177 448c-9.4 9.4-24.6 9.4-33.9 0L24 329c-15.1-15.1-4.4-41 17-41zm255-105L177 64c-9.4-9.4-24.6-9.4-33.9 0L24 183c-15.1 15.1-4.4 41 17 41h238c21.4 0 32.1-25.9 17-41z\"\n});\n\nvar SvgSort = function SvgSort(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 320 512\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    fill: \"currentColor\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgSort, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/sort.9b3858ed.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"Sort Down\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M41 288h238c21.4 0 32.1 25.9 17 41L177 448c-9.4 9.4-24.6 9.4-33.9 0L24 329c-15.1-15.1-4.4-41 17-41z\"\n});\n\nvar SvgSortDown = function SvgSortDown(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 320 512\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    fill: \"currentColor\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgSortDown, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/sort-down.5eca6af5.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"Sort Up\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M279 224H41c-21.4 0-32.1-25.9-17-41L143 64c9.4-9.4 24.6-9.4 33.9 0l119 119c15.2 15.1 4.5 41-16.9 41z\"\n});\n\nvar SvgSortUp = function SvgSortUp(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 320 512\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    fill: \"currentColor\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgSortUp, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/sort-up.1e2d562b.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"Sphere\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M256,0C114.837,0,0,114.837,0,256s114.837,256,256,256s256-114.837,256-256S397.163,0,256,0z M256,21.333     c129.387,0,234.667,105.28,234.667,234.667c0,40.363-96.384,85.333-234.667,85.333c-28.629,0-55.339-2.005-79.893-5.44     c-3.435-24.555-5.44-51.264-5.44-79.893C170.667,117.717,215.637,21.333,256,21.333z M208.512,26.176     C173.184,67.435,149.333,153.707,149.333,256c0,26.688,1.621,52.309,4.651,76.309C72.683,317.205,21.333,285.419,21.333,256     C21.333,142.869,101.824,48.192,208.512,26.176z M26.176,303.488c27.072,23.168,73.429,41.429,131.136,51.2     c9.792,57.707,28.032,104.064,51.2,131.136C117.163,466.965,45.035,394.837,26.176,303.488z M256,490.667     c-29.419,0-61.205-51.349-76.309-132.651c24,3.029,49.621,4.651,76.309,4.651c102.293,0,188.565-23.851,229.824-59.179     C463.808,410.176,369.131,490.667,256,490.667z\"\n});\n\nvar SvgSphere = function SvgSphere(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 512 512\",\n    \"aria-labelby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    fill: \"currentColor\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgSphere, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/sphere.3f2404c1.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"Square Outline\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zm-6 400H54c-3.3 0-6-2.7-6-6V86c0-3.3 2.7-6 6-6h340c3.3 0 6 2.7 6 6v340c0 3.3-2.7 6-6 6z\"\n});\n\nvar SvgSquareO = function SvgSquareO(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 448 512\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    fill: \"currentColor\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgSquareO, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/square-o.8de99cfb.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"Star\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z\"\n});\n\nvar SvgStar = function SvgStar(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 576 512\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    fill: \"currentColor\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgStar, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/star.6a5d589f.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M64 468V44c0-6.6 5.4-12 12-12h48c6.6 0 12 5.4 12 12v176.4l195.5-181C352.1 22.3 384 36.6 384 64v384c0 27.4-31.9 41.7-52.5 24.6L136 292.7V468c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12z\"\n});\n\nvar SvgStepBackward = function SvgStepBackward(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 448 512\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    fill: \"currentColor\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgStepBackward, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/step-backward.3f0e1363.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M384 44v424c0 6.6-5.4 12-12 12h-48c-6.6 0-12-5.4-12-12V291.6l-195.5 181C95.9 489.7 64 475.4 64 448V64c0-27.4 31.9-41.7 52.5-24.6L312 219.3V44c0-6.6 5.4-12 12-12h48c6.6 0 12 5.4 12 12z\"\n});\n\nvar SvgStepForward = function SvgStepForward(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 448 512\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    fill: \"currentColor\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgStepForward, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/step-forward.72a21c60.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"Sun\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M494.2 221.9l-59.8-40.5 13.7-71c2.6-13.2-1.6-26.8-11.1-36.4-9.6-9.5-23.2-13.7-36.2-11.1l-70.9 13.7-40.4-59.9c-15.1-22.3-51.9-22.3-67 0l-40.4 59.9-70.8-13.7C98 60.4 84.5 64.5 75 74.1c-9.5 9.6-13.7 23.1-11.1 36.3l13.7 71-59.8 40.5C6.6 229.5 0 242 0 255.5s6.7 26 17.8 33.5l59.8 40.5-13.7 71c-2.6 13.2 1.6 26.8 11.1 36.3 9.5 9.5 22.9 13.7 36.3 11.1l70.8-13.7 40.4 59.9C230 505.3 242.6 512 256 512s26-6.7 33.5-17.8l40.4-59.9 70.9 13.7c13.4 2.7 26.8-1.6 36.3-11.1 9.5-9.5 13.6-23.1 11.1-36.3l-13.7-71 59.8-40.5c11.1-7.5 17.8-20.1 17.8-33.5-.1-13.6-6.7-26.1-17.9-33.7zm-112.9 85.6l17.6 91.2-91-17.6L256 458l-51.9-77-90.9 17.6 17.6-91.2-76.8-52 76.8-52-17.6-91.2 91 17.6L256 53l51.9 76.9 91-17.6-17.6 91.1 76.8 52-76.8 52.1zM256 152c-57.3 0-104 46.7-104 104s46.7 104 104 104 104-46.7 104-104-46.7-104-104-104zm0 160c-30.9 0-56-25.1-56-56s25.1-56 56-56 56 25.1 56 56-25.1 56-56 56z\"\n});\n\nvar SvgSun = function SvgSun(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 512 512\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    fill: \"currentColor\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgSun, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/sun.f0aca067.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"TH\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M149.333 56v80c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V56c0-13.255 10.745-24 24-24h101.333c13.255 0 24 10.745 24 24zm181.334 240v-80c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24h101.333c13.256 0 24.001-10.745 24.001-24zm32-240v80c0 13.255 10.745 24 24 24H488c13.255 0 24-10.745 24-24V56c0-13.255-10.745-24-24-24H386.667c-13.255 0-24 10.745-24 24zm-32 80V56c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24h101.333c13.256 0 24.001-10.745 24.001-24zm-205.334 56H24c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24h101.333c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24zM0 376v80c0 13.255 10.745 24 24 24h101.333c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H24c-13.255 0-24 10.745-24 24zm386.667-56H488c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H386.667c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24zm0 160H488c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H386.667c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24zM181.333 376v80c0 13.255 10.745 24 24 24h101.333c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24z\"\n});\n\nvar SvgTh = function SvgTh(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 512 512\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    fill: \"currentColor\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgTh, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/th.44fbb78a.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"TH Large\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M0,0 7,0 7,6 0,6Z M8,0 15,0 15,6 8,6Z M0,7 7,7 7,13 0,13Z M8,7 15,7 15,13 8,13Z\"\n});\n\nvar SvgThLarge = function SvgThLarge(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 15 13\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    stroke: \"none\",\n    fill: \"currentColor\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgThLarge, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/th-large.90252bba.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"TH List\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M9 5.016h12v3.984h-12v-3.984zM9 18.984v-3.984h12v3.984h-12zM9 14.016v-4.031h12v4.031h-12zM3.984 9v-3.984h4.031v3.984h-4.031zM3.984 18.984v-3.984h4.031v3.984h-4.031zM3.984 14.016v-4.031h4.031v4.031h-4.031z\"\n});\n\nvar SvgThList = function SvgThList(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 24 24\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    fill: \"currentColor\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgThList, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/th-list.5ed288e1.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"Times\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M1,1 13,13 M1,13 13,1\"\n});\n\nvar SvgTimes = function SvgTimes(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 14 14\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    stroke: \"currentColor\",\n    strokeWidth: 1.75,\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgTimes, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/times.376e2533.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"Trash\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M32 464a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128H32zm272-256a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zM432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16z\"\n});\n\nvar SvgTrash = function SvgTrash(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 448 512\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    fill: \"currentColor\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgTrash, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/trash.82aa7920.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"Unlink\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M304.083 388.936c4.686 4.686 4.686 12.284 0 16.971l-65.057 65.056c-54.709 54.711-143.27 54.721-197.989 0-54.713-54.713-54.719-143.27 0-197.989l65.056-65.057c4.686-4.686 12.284-4.686 16.971 0l22.627 22.627c4.686 4.686 4.686 12.284 0 16.971L81.386 311.82c-34.341 34.341-33.451 88.269.597 120.866 32.577 31.187 84.788 31.337 117.445-1.32l65.057-65.056c4.686-4.686 12.284-4.686 16.971 0l22.627 22.626zm-56.568-243.245l64.304-64.304c34.346-34.346 88.286-33.453 120.882.612 31.18 32.586 31.309 84.785-1.335 117.43l-65.056 65.057c-4.686 4.686-4.686 12.284 0 16.971l22.627 22.627c4.686 4.686 12.284 4.686 16.971 0l65.056-65.057c54.711-54.709 54.721-143.271 0-197.99-54.71-54.711-143.27-54.72-197.989 0l-65.057 65.057c-4.686 4.686-4.686 12.284 0 16.971l22.627 22.627c4.685 4.685 12.283 4.685 16.97-.001zm238.343 362.794l22.627-22.627c4.686-4.686 4.686-12.284 0-16.971L43.112 3.515c-4.686-4.686-12.284-4.686-16.971 0L3.515 26.142c-4.686 4.686-4.686 12.284 0 16.971l465.373 465.373c4.686 4.686 12.284 4.686 16.97-.001z\"\n});\n\nvar SvgUnlink = function SvgUnlink(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    \"aria-labelledby\": \"unlink\",\n    viewBox: \"0 0 512 512\",\n    width: \"1em\",\n    height: \"1em\",\n    fill: \"currentColor\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgUnlink, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/unlink.3dc6fa11.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"User\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M313.6 304c-28.7 0-42.5 16-89.6 16-47.1 0-60.8-16-89.6-16C60.2 304 0 364.2 0 438.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-25.6c0-74.2-60.2-134.4-134.4-134.4zM400 464H48v-25.6c0-47.6 38.8-86.4 86.4-86.4 14.6 0 38.3 16 89.6 16 51.7 0 74.9-16 89.6-16 47.6 0 86.4 38.8 86.4 86.4V464zM224 288c79.5 0 144-64.5 144-144S303.5 0 224 0 80 64.5 80 144s64.5 144 144 144zm0-240c52.9 0 96 43.1 96 96s-43.1 96-96 96-96-43.1-96-96 43.1-96 96-96z\"\n});\n\nvar SvgUser = function SvgUser(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 448 512\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    fill: \"currentColor\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgUser, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/user.f7ef3853.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", {\n  id: \"title\"\n}, \"YouTube Logo\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M11.109 17.625l7.562-3.906-7.562-3.953v7.859zM14 4.156c5.891 0 9.797 0.281 9.797 0.281 0.547 0.063 1.75 0.063 2.812 1.188 0 0 0.859 0.844 1.109 2.781 0.297 2.266 0.281 4.531 0.281 4.531v2.125s0.016 2.266-0.281 4.531c-0.25 1.922-1.109 2.781-1.109 2.781-1.062 1.109-2.266 1.109-2.812 1.172 0 0-3.906 0.297-9.797 0.297v0c-7.281-0.063-9.516-0.281-9.516-0.281-0.625-0.109-2.031-0.078-3.094-1.188 0 0-0.859-0.859-1.109-2.781-0.297-2.266-0.281-4.531-0.281-4.531v-2.125s-0.016-2.266 0.281-4.531c0.25-1.937 1.109-2.781 1.109-2.781 1.062-1.125 2.266-1.125 2.812-1.188 0 0 3.906-0.281 9.797-0.281v0z\"\n});\n\nvar SvgYoutube = function SvgYoutube(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 28 28\",\n    \"aria-labelledby\": \"title\",\n    width: \"1em\",\n    height: \"1em\",\n    fill: \"currentColor\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: \"title\"\n  }, title) : null, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgYoutube, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/youtube.2b912127.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  fill: \"currentColor\",\n  d: \"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z\"\n});\n\nvar SvgEye = function SvgEye(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    \"aria-hidden\": \"true\",\n    focusable: \"false\",\n    \"data-prefix\": \"fas\",\n    \"data-icon\": \"eye\",\n    className: \"svg-inline--fa fa-eye fa-w-18\",\n    role: \"img\",\n    viewBox: \"0 0 576 512\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgEye, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/eye.d7bae75d.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  fill: \"currentColor\",\n  d: \"M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1l-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142l-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z\"\n});\n\nvar SvgEyeClosed = function SvgEyeClosed(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    \"aria-hidden\": \"true\",\n    focusable: \"false\",\n    \"data-prefix\": \"fas\",\n    \"data-icon\": \"eye-slash\",\n    className: \"svg-inline--fa fa-eye-slash fa-w-20\",\n    role: \"img\",\n    viewBox: \"0 0 640 512\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgEyeClosed, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/eye-closed.654fd735.svg\";\nexport { ForwardRef as ReactComponent };","// import './Icon.styl'\n\nimport React from 'react'\nimport PropTypes from 'prop-types'\n\nimport { ReactComponent as adjust } from '../assets/adjust.svg'\nimport { ReactComponent as angleDoubleDown } from '../assets/angle-double-down.svg'\nimport { ReactComponent as angleDoubleUp } from '../assets/angle-double-up.svg'\nimport { ReactComponent as angleLeft } from '../assets/angle-left.svg'\nimport { ReactComponent as arrows } from '../assets/arrows.svg'\nimport { ReactComponent as arrowsAltH } from '../assets/arrows-alt-h.svg'\nimport { ReactComponent as arrowsAltV } from '../assets/arrows-alt-v.svg'\nimport { ReactComponent as bars } from '../assets/bars.svg'\nimport { ReactComponent as brain } from '../assets/brain.svg'\nimport { ReactComponent as brush } from '../assets/brush.svg'\nimport { ReactComponent as caretDown } from '../assets/caret-down.svg'\nimport { ReactComponent as caretUp } from '../assets/caret-up.svg'\nimport { ReactComponent as check } from '../assets/check.svg'\nimport { ReactComponent as checkCircle } from '../assets/check-circle.svg'\nimport { ReactComponent as checkCircleO } from '../assets/check-circle-o.svg'\nimport { ReactComponent as chevronDown } from '../assets/chevron-down.svg'\nimport { ReactComponent as circle } from '../assets/circle.svg'\nimport { ReactComponent as circleNotch } from '../assets/circle-notch.svg'\nimport { ReactComponent as circleO } from '../assets/circle-o.svg'\nimport { ReactComponent as cog } from '../assets/cog.svg'\nimport { ReactComponent as createComment } from '../assets/create-comment.svg'\nimport { ReactComponent as createScreenCapture } from '../assets/create-screen-capture.svg'\nimport { ReactComponent as crosshairs } from '../assets/crosshairs.svg'\nimport { ReactComponent as cube } from '../assets/cube.svg'\nimport { ReactComponent as d3Rotate } from '../assets/3d-rotate.svg'\nimport { ReactComponent as database } from '../assets/database.svg'\nimport { ReactComponent as dotCircle } from '../assets/dot-circle.svg'\nimport { ReactComponent as edit } from '../assets/edit.svg'\nimport { ReactComponent as ellipseCircle } from '../assets/ellipse-circle.svg'\nimport { ReactComponent as ellipseH } from '../assets/ellipse-h.svg'\nimport { ReactComponent as ellipseV } from '../assets/ellipse-v.svg'\nimport { ReactComponent as exclamationCircle } from '../assets/exclamation-circle.svg'\nimport { ReactComponent as exclamationTriangle } from '../assets/exclamation-triangle.svg'\nimport { ReactComponent as fastBackward } from '../assets/fast-backward.svg'\nimport { ReactComponent as fastForward } from '../assets/fast-forward.svg'\nimport { ReactComponent as stop } from '../assets/stop.svg'\nimport { ReactComponent as info } from '../assets/info.svg'\nimport { ReactComponent as inlineEdit } from '../assets/inline-edit.svg'\nimport { ReactComponent as level } from '../assets/level.svg'\nimport { ReactComponent as link } from '../assets/link.svg'\nimport { ReactComponent as linkCircles } from '../assets/link-circles.svg'\nimport { ReactComponent as list } from '../assets/list.svg'\nimport { ReactComponent as liver } from '../assets/liver.svg'\nimport { ReactComponent as lock } from '../assets/lock.svg'\nimport { ReactComponent as lockAlt } from '../assets/lock-alt.svg'\nimport { ReactComponent as lung } from '../assets/lung.svg'\nimport { ReactComponent as measureNonTarget } from '../assets/measure-non-target.svg'\nimport { ReactComponent as measureTarget } from '../assets/measure-target.svg'\nimport { ReactComponent as measureTargetCr } from '../assets/measure-target-cr.svg'\nimport { ReactComponent as measureTargetNe } from '../assets/measure-target-ne.svg'\nimport { ReactComponent as measureTargetUn } from '../assets/measure-target-un.svg'\nimport { ReactComponent as measureTemp } from '../assets/measure-temp.svg'\nimport { ReactComponent as objectGroup } from '../assets/object-group.svg'\nimport { ReactComponent as ohifLogo } from '../assets/ohif-logo.svg'\nimport { ReactComponent as ohifTextLogo } from '../assets/ohif-text-logo.svg'\nimport { ReactComponent as oval } from '../assets/oval.svg'\nimport { ReactComponent as palette } from '../assets/palette.svg'\nimport { ReactComponent as play } from '../assets/play.svg'\nimport { ReactComponent as plus } from '../assets/plus.svg'\nimport { ReactComponent as powerOff } from '../assets/power-off.svg'\nimport { ReactComponent as reset } from '../assets/reset.svg'\nimport { ReactComponent as rotate } from '../assets/rotate.svg'\nimport { ReactComponent as rotateRight } from '../assets/rotate-right.svg'\nimport { ReactComponent as saveRegular } from '../assets/save-regular.svg'\nimport { ReactComponent as scissors } from '../assets/scissors.svg'\nimport { ReactComponent as search } from '../assets/search.svg'\nimport { ReactComponent as searchPlus } from '../assets/search-plus.svg'\nimport { ReactComponent as softTissue } from '../assets/soft-tissue.svg'\nimport { ReactComponent as sort } from '../assets/sort.svg'\nimport { ReactComponent as sortDown } from '../assets/sort-down.svg'\nimport { ReactComponent as sortUp } from '../assets/sort-up.svg'\nimport { ReactComponent as sphere } from '../assets/sphere.svg'\nimport { ReactComponent as squareO } from '../assets/square-o.svg'\nimport { ReactComponent as star } from '../assets/star.svg'\nimport { ReactComponent as stepBackward } from '../assets/step-backward.svg'\nimport { ReactComponent as stepForward } from '../assets/step-forward.svg'\nimport { ReactComponent as sun } from '../assets/sun.svg'\nimport { ReactComponent as th } from '../assets/th.svg'\nimport { ReactComponent as thLarge } from '../assets/th-large.svg'\nimport { ReactComponent as thList } from '../assets/th-list.svg'\nimport { ReactComponent as times } from '../assets/times.svg'\nimport { ReactComponent as trash } from '../assets/trash.svg'\nimport { ReactComponent as unlink } from '../assets/unlink.svg'\nimport { ReactComponent as user } from '../assets/user.svg'\nimport { ReactComponent as youtube } from '../assets/youtube.svg'\nimport { ReactComponent as eye } from '../assets/eye.svg'\nimport { ReactComponent as eyeClosed } from '../assets/eye-closed.svg'\n\nconst ICONS = {\n  eye,\n  'eye-closed': eyeClosed,\n  brush,\n  scissors,\n  user,\n  sort,\n  th,\n  star,\n  'sort-up': sortUp,\n  sphere,\n  'sort-down': sortDown,\n  info,\n  cube,\n  crosshairs,\n  'dot-circle': dotCircle,\n  'angle-left': angleLeft,\n  '3d-rotate': d3Rotate,\n  plus,\n  'chevron-down': chevronDown,\n  'angle-double-down': angleDoubleDown,\n  'angle-double-up': angleDoubleUp,\n  'arrows-alt-h': arrowsAltH,\n  'arrows-alt-v': arrowsAltV,\n  bars,\n  'caret-down': caretDown,\n  'caret-up': caretUp,\n  'check-circle-o': checkCircleO,\n  check,\n  circle,\n  'circle-o': circleO,\n  times,\n  'create-comment': createComment,\n  'create-screen-capture': createScreenCapture,\n  edit,\n  'fast-backward': fastBackward,\n  'fast-forward': fastForward,\n  'object-group': objectGroup,\n  search,\n  'power-off': powerOff,\n  'inline-edit': inlineEdit,\n  list,\n  'ohif-logo': ohifLogo,\n  'ohif-text-logo': ohifTextLogo,\n  lock,\n  play,\n  database,\n  cog,\n  'circle-notch': circleNotch,\n  'square-o': squareO,\n  'check-circle': checkCircle,\n  'lock-alt': lockAlt,\n  'step-backward': stepBackward,\n  'step-forward': stepForward,\n  stop,\n  'th-large': thLarge,\n  'th-list': thList,\n  sun,\n  palette,\n  youtube,\n  oval,\n  'ellipse-h': ellipseH,\n  'ellipse-v': ellipseV,\n  adjust,\n  level,\n  'link-circles': linkCircles,\n  'search-plus': searchPlus,\n  'measure-non-target': measureNonTarget,\n  'measure-target': measureTarget,\n  'measure-target-cr': measureTargetCr,\n  'measure-target-un': measureTargetUn,\n  'measure-target-ne': measureTargetNe,\n  'measure-temp': measureTemp,\n  'ellipse-circle': ellipseCircle,\n  arrows,\n  reset,\n  rotate,\n  'rotate-right': rotateRight,\n  trash,\n  unlink,\n  'exclamation-circle': exclamationCircle,\n  link,\n  'exclamation-triangle': exclamationTriangle,\n  brain,\n  'soft-tissue': softTissue,\n  lung,\n  liver,\n  save: saveRegular,\n}\n\n/**\n * Return the matching SVG Icon as a React Component.\n * Results in an inlined SVG Element. If there's no match,\n * return `null`\n */\nexport function getIcon(key, props) {\n  if (!key || !ICONS[key]) {\n    return React.createElement('div', null, 'Missing Icon')\n  }\n\n  return React.createElement(ICONS[key], props)\n}\n\nexport { ICONS }\n\nconst Icon = props => {\n  return getIcon(props.name, props)\n}\n\nIcon.propTypes = {\n  /** The string name of the icon to display */\n  name: PropTypes.string.isRequired,\n}\n\nexport default Icon\n","// import './toolbar-button.styl'\nimport React from 'react'\nimport styled from 'styled-components'\nimport PropTypes from 'prop-types'\nimport classnames from 'classnames'\nimport Icon from './Icon'\n\nexport function ToolbarButton(props) {\n  const { isActive, icon, labelWhenActive, onClick } = props\n  const className = classnames(props.className, { active: isActive })\n  const iconProps = typeof icon === 'string' ? { name: icon } : icon\n  const label = isActive && labelWhenActive ? labelWhenActive : props.label\n\n  const arrowIconName = props.isExpanded ? 'caret-up' : 'caret-down'\n  const arrowIcon = props.isExpandable && (\n    <Icon name={arrowIconName} className=\"expand-caret\" />\n  )\n\n  const handleClick = event => {\n    if (onClick) {\n      onClick(event, props)\n    }\n  }\n\n  const cypressSelectorId = props.label.toLowerCase()\n\n  return (\n    <ToolbarButtonWrapper\n      className={className}\n      onClick={handleClick}\n      data-cy={cypressSelectorId}>\n      {iconProps && <Icon {...iconProps} />}\n      <div className=\"toolbar-button-label\">\n        {label}\n        {arrowIcon}\n      </div>\n    </ToolbarButtonWrapper>\n  )\n}\n\nconst ToolbarButtonWrapper = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  flex-direction: column;\n  padding: 0 10px;\n  margin-bottom: 16px;\n  height: 48px;\n  text-align: center;\n  cursor: pointer;\n  user-select: none;\n  float: left;\n  width: 80px;\n\n  .toolbar-button-label {\n    display: flex;\n    font-size: 12px;\n    font-weight: 500;\n  }\n\n  .expand-caret {\n    width: 8px;\n    height: 8px;\n    transform: translate(2px, 2px);\n  }\n\n  svg {\n    height: 21px;\n    width: 21px;\n    margin: 2px;\n  }\n\n  &.active,\n  &:active,\n  &:hover {\n    color: ${p => p.theme.primary};\n  }\n`\n\nToolbarButton.propTypes = {\n  id: PropTypes.string,\n  isActive: PropTypes.bool,\n  /** Display label for button */\n  label: PropTypes.string.isRequired,\n  /** Alternative text to show when button is active */\n  labelWhenActive: PropTypes.string,\n  className: PropTypes.string.isRequired,\n  icon: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.shape({\n      name: PropTypes.string.isRequired,\n    }),\n  ]),\n  onClick: PropTypes.func,\n  /** Determines if we show expandable 'caret' symbol */\n  isExpandable: PropTypes.bool,\n  /** Direction of expandable 'caret' symbol */\n  isExpanded: PropTypes.bool,\n  t: PropTypes.func,\n}\n\nToolbarButton.defaultProps = {\n  isActive: false,\n  className: 'toolbar-button',\n}\n\nexport default ToolbarButton\n","import classNames from 'classnames'\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport styled from 'styled-components'\n\nconst propTypes = {\n  /** Sets the direction the Tooltip is positioned towards. */\n  placement: PropTypes.oneOf(['top', 'right', 'bottom', 'left']),\n\n  /** The \"top\" position value for the Tooltip. */\n  positionTop: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  /** The \"left\" position value for the Tooltip. */\n  positionLeft: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n\n  /** The \"top\" position value for the Tooltip arrow. */\n  arrowOffsetTop: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  /** The \"left\" position value for the Tooltip arrow. */\n  arrowOffsetLeft: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n}\n\nconst defaultProps = {\n  placement: 'right',\n}\n\nclass Tooltip extends React.Component {\n  render() {\n    const {\n      placement,\n      positionTop,\n      positionLeft,\n      arrowOffsetTop,\n      arrowOffsetLeft,\n      className,\n      style,\n      children,\n    } = this.props\n\n    const outerStyle = {\n      top: positionTop,\n      left: positionLeft,\n      ...style,\n    }\n\n    const arrowStyle = {\n      top: arrowOffsetTop,\n      left: arrowOffsetLeft,\n    }\n\n    return (\n      <TooltipWrapper\n        role=\"tooltip\"\n        className={classNames(className, 'tooltip', placement)}\n        style={outerStyle}>\n        <div className=\"tooltip-arrow\" style={arrowStyle} />\n        <div className=\"tooltip-inner\">{children}</div>\n      </TooltipWrapper>\n    )\n  }\n}\n\nconst TooltipWrapper = styled.div`\n  .tooltip {\n    position: absolute;\n    z-index: 1070;\n    display: block;\n    font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;\n    font-size: 12px;\n    font-style: normal;\n    font-weight: 400;\n    line-height: 1.42857143;\n    text-align: left;\n    text-align: start;\n    text-decoration: none;\n    text-shadow: none;\n    text-transform: none;\n    letter-spacing: normal;\n    word-break: normal;\n    word-spacing: normal;\n    word-wrap: normal;\n    white-space: normal;\n    opacity: 0;\n    line-break: auto;\n\n    &.in {\n      opacity: 0.9;\n    }\n\n    &.top {\n      margin-top: -3px;\n      padding: 5px 0;\n    }\n\n    &.right {\n      margin-left: 3px;\n      padding: 0 5px;\n    }\n\n    &.bottom {\n      margin-top: 3px;\n      padding: 5px 0;\n    }\n    &.left {\n      margin-left: -3px;\n      padding: 0 5px;\n    }\n    &.top .tooltip-arrow {\n      bottom: 0;\n      left: 50%;\n      margin-left: -5px;\n      border-width: 5px 5px 0;\n      border-top-color: #000;\n    }\n\n    &.right .tooltip-arrow {\n      top: 50%;\n      left: 0;\n      margin-top: -5px;\n      border-width: 5px 5px 5px 0;\n      border-right-color: #000;\n    }\n    &.left .tooltip-arrow {\n      top: 50%;\n      right: 0;\n      margin-top: -5px;\n      border-width: 5px 0 5px 5px;\n      border-left-color: #000;\n    }\n    &.bottom .tooltip-arrow {\n      top: 0;\n      left: 50%;\n      margin-left: -5px;\n      border-width: 0 5px 5px;\n      border-bottom-color: #000;\n    }\n  }\n\n  .tooltip-inner {\n    max-width: 200px;\n    padding: 3px 8px;\n    color: #fff;\n    text-align: center;\n    background-color: #000;\n    border-radius: 4px;\n  }\n\n  .tooltip-arrow {\n    position: absolute;\n    width: 0;\n    height: 0;\n    border-color: transparent;\n    border-style: solid;\n  }\n\n  .tooltip.in {\n    opacity: 0.9;\n  }\n`\n\nTooltip.propTypes = propTypes\nTooltip.defaultProps = defaultProps\n\nexport default Tooltip\n","import { createGlobalStyle } from 'styled-components'\nimport PropTypes from 'prop-types'\nimport React from 'react'\nimport OverlayTrigger from './OverlayTrigger'\nimport ToolbarButton from './ToolbarButton.js'\nimport Tooltip from './Tooltip'\n\nclass ExpandableToolMenu extends React.Component {\n  static propTypes = {\n    /** Button label */\n    label: PropTypes.string.isRequired,\n    /** Array of buttons to render when expanded */\n    buttons: PropTypes.arrayOf(\n      PropTypes.shape({\n        id: PropTypes.string,\n        label: PropTypes.string.isRequired,\n        icon: PropTypes.oneOfType([\n          PropTypes.string,\n          PropTypes.shape({\n            name: PropTypes.string.isRequired,\n          }),\n        ]),\n      })\n    ).isRequired,\n    icon: PropTypes.oneOfType([\n      PropTypes.string,\n      PropTypes.shape({\n        name: PropTypes.string.isRequired,\n      }),\n    ]),\n    onGroupMenuClick: PropTypes.func,\n    activeCommand: PropTypes.string,\n  }\n\n  static defaultProps = {\n    buttons: [],\n    icon: 'ellipse-circle',\n    label: 'More',\n  }\n\n  constructor(props) {\n    super(props)\n    this.state = {\n      isExpanded: false,\n    }\n  }\n\n  toolbarMenuOverlay = () => (\n    <Tooltip\n      placement=\"bottom\"\n      className=\"tooltip-toolbar-overlay\"\n      id={`${Math.random()}_tooltip-toolbar-overlay}`}>\n      {this.getButtons()}\n    </Tooltip>\n  )\n\n  getButtons = () => {\n    return this.props.buttons.map((button, index) => {\n      return (\n        <ToolbarButton\n          key={index}\n          {...button}\n          isActive={button.id === this.props.activeCommand}\n        />\n      )\n    })\n  }\n\n  isActive = () => {\n    let isActive = false\n    if (this.props.activeCommand) {\n      this.props.buttons.forEach(button => {\n        if (this.props.activeCommand === button.id) {\n          isActive = true\n        }\n      })\n    }\n\n    return isActive\n  }\n\n  activeIcon = () => {\n    if (this.props.activeCommand) {\n      return (\n        this.props.buttons.find(btn => this.props.activeCommand === btn.id)\n          .icon || this.props.icon\n      )\n    }\n\n    return this.props.icon\n  }\n\n  onExpandableToolClick = () => {\n    if (this.props.onGroupMenuClick) {\n      this.props.onGroupMenuClick()\n    }\n    this.setState({\n      isExpanded: !this.state.isExpanded,\n    })\n  }\n\n  onOverlayHide = () => {\n    this.setState({\n      isExpanded: false,\n    })\n  }\n\n  render() {\n    const getToolBarButtonComponent = () => {\n      return (\n        <ToolbarButton\n          key=\"menu-button\"\n          type=\"tool\"\n          label={this.props.label}\n          icon={this.activeIcon()}\n          className={'toolbar-button expandableToolMenu'}\n          isActive={this.isActive()}\n          isExpandable={true}\n          isExpanded={this.state.isExpanded}\n        />\n      )\n    }\n\n    const toolbarComponent = getToolBarButtonComponent()\n\n    return (\n      <>\n        <ExpandableToolStyles />\n        <OverlayTrigger\n          key=\"menu-button\"\n          trigger=\"click\"\n          placement=\"bottom\"\n          rootClose={true}\n          handleHide={this.onOverlayHide}\n          onClick={this.onExpandableToolClick}\n          overlay={this.toolbarMenuOverlay()}>\n          {toolbarComponent}\n        </OverlayTrigger>\n      </>\n    )\n  }\n}\n\nconst ExpandableToolStyles = createGlobalStyle`\n  .toolbarOverlay {\n    /* border 2px solid var(--ui-border-color-dark) */\n    padding: 5px;\n  }\n\n  .tooltip-toolbar-overlay {\n    margin-top: 40px;\n    /* background-color: var(--primary-background-color);\n    border: 1px solid var(--default-color); */\n    border-radius: 8px;\n\n    .tooltip-arrow {\n      display none;\n    }\n    \n    .tooltip-inner {\n      max-width: unset;\n      background: none;\n    }\n  }\n\n  .tooltip {\n    position: absolute;\n    z-index: 1070;\n    display: block;\n    font-style: normal;\n    font-weight: normal;\n    letter-spacing: normal;\n    line-break: auto;\n    line-height: 1.42857143;\n    text-align: left;\n    text-align: start;\n    text-decoration: none;\n    text-shadow: none;\n    text-transform: none;\n    white-space: normal;\n    word-break: normal;\n    word-spacing: normal;\n    word-wrap: normal;\n    font-size: 12px;\n    opacity: 0;\n  \n    &.in {\n      opacity: 0.9;\n    }\n\n    &.top {\n      margin-top: -3px;\n      padding: 5px 0;\n\n      .tooltip-arrow {\n        bottom: 0;\n        left: 50%;\n        margin-left: -5px;\n        border-width: 5px 5px 0;\n        border-top-color: #000;\n      }\n    }\n\n    &.right {\n      margin-left: 3px;\n      padding: 0 5px;\n\n      .tooltip-arrow{\n        top: 50%;\n        left: 0;\n        margin-top: -5px;\n        border-width: 5px 5px 5px 0;\n        border-right-color: #000;\n      }\n    }\n\n    &.bottom {\n      margin-top: 3px;\n      padding: 5px 0;\n\n      .tooltip-arrow {\n        top: 0;\n        left: 50%;\n        margin-left: -5px;\n        border-width: 0 5px 5px;\n        border-bottom-color: #000;\n      }\n    }\n\n    &.left {\n      margin-left: -3px;\n      padding: 0 5px;\n\n      .tooltip-arrow {\n        top: 50%;\n        right: 0;\n        margin-top: -5px;\n        border-width: 5px 0 5px 5px;\n        border-left-color: #000;\n      }\n    }\n\n    &.top-left .tooltip-arrow {\n      bottom: 0;\n      right: 5px;\n      margin-bottom: -5px;\n      border-width: 5px 5px 0;\n      border-top-color: #000;\n    }\n\n    &.top-right .tooltip-arrow {\n      bottom: 0;\n      left: 5px;\n      margin-bottom: -5px;\n      border-width: 5px 5px 0;\n      border-top-color: #000;\n    }\n    \n    &.bottom-left .tooltip-arrow {\n      top: 0;\n      right: 5px;\n      margin-top: -5px;\n      border-width: 0 5px 5px;\n      border-bottom-color: #000;\n    }\n    \n    &.bottom-right .tooltip-arrow {\n      top: 0;\n      left: 5px;\n      margin-top: -5px;\n      border-width: 0 5px 5px;\n      border-bottom-color: #000;\n    }\n  }\n\n  .tooltip-inner {\n    max-width: 200px;\n    padding: 3px 8px;\n    color: #fff;\n    text-align: center;\n    background-color: #000;\n    border-radius: 4px;\n  }\n\n  .tooltip-arrow {\n    position: absolute;\n    width: 0;\n    height: 0;\n    border-color: transparent;\n    border-style: solid;\n  }\n\n  .fade {\n    opacity: 0;\n    -webkit-transition: opacity 0.15s linear;\n    -o-transition: opacity 0.15s linear;\n    transition: opacity 0.15s linear;\n  }\n\n  .fade.in {\n    opacity: 1;\n  }\n`\n\nexport default ExpandableToolMenu\n","// import './CineDialog.styl'\n\nimport React from 'react'\nimport { connect } from 'react-redux'\nimport styled from 'styled-components'\nimport PropTypes from 'prop-types'\nimport OHIF from '@ohif/core'\nimport csTools from 'cornerstone-tools'\nimport { clone } from 'ramda'\nimport Icon from './Icon'\nimport { commandsManager } from '../AppContext'\n// Our target output kills the `as` and \"import\" throws a keyword error\n// import { import as toolImport, getToolState } from 'cornerstone-tools';\n\nconst toolImport = csTools.import\nconst scrollToIndex = toolImport('util/scrollToIndex')\nconst { setViewportSpecificData } = OHIF.redux.actions\n\nclass CineDialog extends React.PureComponent {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      cineFrameRate: props.cineFrameRate,\n      isPlaying: props.isPlaying,\n    }\n  }\n\n  static propTypes = {\n    /** Minimum value for range slider */\n    cineMinFrameRate: PropTypes.number.isRequired,\n    /** Maximum value for range slider */\n    cineMaxFrameRate: PropTypes.number.isRequired,\n    /** Increment range slider can \"step\" in either direction. */\n    cineStepFrameRate: PropTypes.number.isRequired,\n    cineFrameRate: PropTypes.number.isRequired,\n    /** 'True' if playing, 'False' if paused. */\n    isPlaying: PropTypes.bool.isRequired,\n    onPlayPauseChanged: PropTypes.func,\n    onFrameRateChanged: PropTypes.func,\n    onClickNextButton: PropTypes.func,\n    onClickBackButton: PropTypes.func,\n    onClickSkipToStart: PropTypes.func,\n    onClickSkipToEnd: PropTypes.func,\n    /** i18next translation function */\n    t: PropTypes.func.isRequired,\n  }\n\n  static defaultProps = {\n    cineMinFrameRate: 1,\n    cineMaxFrameRate: 90,\n    cineStepFrameRate: 1,\n    cineFrameRate: 24,\n    isPlaying: false,\n  }\n\n  componentDidUpdate(prevProps) {\n    // TODO: Not sure if we should just switch this to a stateless\n    // fully-controlled component instead\n    if (\n      this.props.isPlaying !== prevProps.isPlaying ||\n      this.props.isPlaying !== this.state.isPlaying\n    ) {\n      this.setState({\n        isPlaying: this.props.isPlaying,\n      })\n    }\n\n    if (\n      this.props.cineFrameRate !== prevProps.cineFrameRate ||\n      this.props.cineFrameRate !== this.state.cineFrameRate\n    ) {\n      this.setState({\n        cineFrameRate: this.props.cineFrameRate,\n      })\n    }\n  }\n\n  handleInputChange = event => {\n    const target = event.target\n\n    let value = target.value\n\n    if (target.type === 'range') {\n      value = parseFloat(target.value)\n    }\n\n    const name = target.name\n\n    this.setState({\n      [name]: value,\n    })\n\n    if (name === 'cineFrameRate' && this.props.onFrameRateChanged) {\n      this.props.onFrameRateChanged(parseFloat(value))\n    }\n  }\n\n  onClickPlayPause = () => {\n    const value = !this.state.isPlaying\n\n    this.setState({\n      isPlaying: value,\n    })\n\n    if (this.props.onPlayPauseChanged) {\n      this.props.onPlayPauseChanged(value)\n    }\n  }\n\n  onClickNextButton = event => {\n    if (this.props.onClickNextButton) {\n      this.props.onClickNextButton(event)\n    }\n  }\n\n  onClickBackButton = event => {\n    if (this.props.onClickBackButton) {\n      this.props.onClickBackButton(event)\n    }\n  }\n\n  onClickSkipToStart = event => {\n    if (this.props.onClickSkipToStart) {\n      this.props.onClickSkipToStart(event)\n    }\n  }\n\n  onClickSkipToEnd = event => {\n    if (this.props.onClickSkipToEnd) {\n      this.props.onClickSkipToEnd(event)\n    }\n  }\n\n  render() {\n    // const { t } = this.props\n    return (\n      <CineDialogWrapper className=\"CineDialog\">\n        <div className=\"noselect double-row-style\">\n          <div className=\"cine-controls\">\n            <div className=\"btn-group\">\n              <button\n                title=\"\"\n                className=\"btn\"\n                data-toggle=\"tooltip\"\n                onClick={this.onClickSkipToStart}>\n                <Icon name=\"fast-backward\" />\n              </button>\n              <button\n                title=\"\"\n                className=\"btn\"\n                data-toggle=\"tooltip\"\n                onClick={this.onClickBackButton}>\n                <Icon name=\"step-backward\" />\n              </button>\n              <button\n                title=\"/\"\n                className=\"btn\"\n                data-toggle=\"tooltip\"\n                onClick={this.onClickPlayPause}>\n                <Icon name={this.state.isPlaying ? 'stop' : 'play'} />\n              </button>\n              <button\n                title=\"\"\n                className=\"btn\"\n                data-toggle=\"tooltip\"\n                onClick={this.onClickNextButton}>\n                <Icon name=\"step-forward\" />\n              </button>\n              <button\n                title=\"\"\n                className=\"btn\"\n                data-toggle=\"tooltip\"\n                onClick={this.onClickSkipToEnd}>\n                <Icon name=\"fast-forward\" />\n              </button>\n            </div>\n          </div>\n          <div className=\"cine-options\">\n            <div className=\"fps-section\">\n              <input\n                type=\"range\"\n                name=\"cineFrameRate\"\n                min={this.props.cineMinFrameRate}\n                max={this.props.cineMaxFrameRate}\n                step={this.props.cineStepFrameRate}\n                value={this.state.cineFrameRate}\n                onChange={this.handleInputChange}\n              />\n            </div>\n            <span className=\"fps\">\n              {this.state.cineFrameRate.toFixed(1)} \n            </span>\n          </div>\n        </div>\n      </CineDialogWrapper>\n    )\n  }\n}\n\nconst CineDialogWrapper = styled.div`\n  &.CineDialog {\n    background: #14202a;\n    /* color: var(--text-secondary-color); */\n    filter: 0 0 3px #14202a;\n    border: none;\n    border-radius: 8px;\n    width: inherit;\n\n    h5 {\n      font-size: 20px;\n      line-height: 35px;\n      margin: 0;\n    }\n\n    h5, label {\n      font-weight: 400;\n    }\n\n    .cine-navigation, .cine-controls, .cine-options {\n      cursor: default;\n    }\n\n    .fps-section {\n      input[type=\"range\"] {\n        background-color: transparent;\n        border: 0 none;\n        outline: 0 none;\n\n        &::-ms-tooltip {\n          display: none;\n        }\n      }\n    }\n\n    .double-row-style {\n      box-sizing: border-box;\n      width: 290px;\n      height: 84px;\n      padding: 10px;\n      top: 2%;\n      left: 35%;\n\n      .cine-navigation {\n        position: absolute;\n        right: 16px;\n        top: 10px;\n\n        .btn {\n          padding: 0 4px;\n\n          i {\n            font-size: 32px;\n            line-height: 32px;\n          }\n        }\n      }\n\n      .cine-controls {\n        left: 0px;\n      }\n\n      .cine-options {\n        padding: 0px 0;\n\n        .fps-section {\n          width: 175px;\n          float: left;\n        }\n\n        .fps {\n          float: right;\n        }\n      }\n    }\n\n    .single-row-style {\n      box-sizing: content-box;\n      width: 425px;\n      height: 45px;\n      padding: 4px 8px;\n      top: 2%;\n      left: 35%;\n\n      .cine-navigation {\n        float: right;\n        overflow: hidden;\n        padding-right: 12px;\n        position: relative;\n\n        .btn {\n          padding: 0 2px;\n          margin: 0 0 0 2px;\n          border: 0 none;\n          &:first-of-type {\n            margin-left: 0;\n          }\n          i {\n            font-size: 32px;\n            line-height: 45px;\n          }\n        }\n      }\n\n      .cine-controls {\n        position: relative;\n        float: left;\n        overflow: hidden;\n\n        .btn {\n          font-size: 22px;\n          line-height: 45px;\n          min-width: 28px;\n          padding: 0 0px;\n          margin: 0 4px;\n          border: 0 none;\n        }\n      }\n\n      .cine-options {\n        display: block;\n        position: relative;\n        width: 150px;\n        float: left;\n        overflow: hidden;\n        padding: 0;\n        margin: 0 0 0 10px;\n\n        .fps-section {\n          display: block;\n          float: left;\n          width: 80px;\n          input[type=\"range\"] {\n            line-height: 45px;\n            height: 45px;\n          }\n        }\n\n        .fps {\n          display: block;\n          width: 68px;\n          float: left;\n          padding: 0;\n          margin: 0 0 0 2px;\n          text-align: center;\n          line-height: 45px;\n          font-size: 14px;\n          line-height: 1.42857143;\n        }\n      }\n    }\n\n    .btn {\n      /* color: var(--text-secondary-color); */\n      background-color: transparent;\n      border: 0;\n      border-radius: 4px;\n      font-size: 15px;\n      width: 45px;\n      font-weight: normal;\n      height: 37px;\n      line-height: 37px;\n      padding: 0 12px;\n\n      &:hover, &:active, &.active {\n        /* color: var(--hover-color); */\n      }\n\n      &[disabled] {\n        &:hover {\n          color: inherit;\n        }\n        &:active {\n          /* color: var(--text-secondary-color); */\n        }\n      }\n\n      &.btn-primary, &.btn-secondary, &.btn-danger {\n        transition: background-color 0.3s ease;\n\n        &:hover, &:active, &:focus {\n          opacity: 0.8;\n        }\n      }\n\n      &.btn-primary {\n        /* background-color: var(--active-color); */\n        /* color: var(--primary-background-color) */\n      }\n\n      &.btn-secondary {\n        /* background-color: var(--text-secondary-color); */\n        /* color: var(--primary-background-color) */\n      }\n\n      &.btn-danger {\n        /* background-color: var(--text-destructive-color);\n        color: var(--text-primary-color); */\n      }\n\n      &.active {\n        /* box-shadow: inset 1px 1px 2px var(--ui-gray-darkest) */\n      }\n    }\n  }\n`\n\n// Why do I need or care about any of this info?\n// A dispatch action should be able to pull this at the time of an event?\n// `isPlaying` and `cineFrameRate` might matter, but I think we can prop pass for those.\nconst mapStateToProps = state => {\n  // Get activeViewport's `cine` and `stack`\n  const { viewportSpecificData, activeViewportIndex } = state.viewports\n  const { cine } = viewportSpecificData[activeViewportIndex] || {}\n  const dom = commandsManager.runCommand('getActiveViewportEnabledElement')\n\n  const cineData = cine || {\n    isPlaying: false,\n    cineFrameRate: 24,\n  }\n\n  // New props we're creating?\n  return {\n    activeEnabledElement: dom,\n    activeViewportCineData: cineData,\n    activeViewportIndex: state.viewports.activeViewportIndex,\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    dispatchSetViewportSpecificData: (viewportIndex, data) => {\n      dispatch(setViewportSpecificData(viewportIndex, data))\n    },\n  }\n}\n\nconst mergeProps = (propsFromState, propsFromDispatch, ownProps) => {\n  const {\n    activeEnabledElement,\n    activeViewportCineData,\n    activeViewportIndex,\n  } = propsFromState\n\n  return {\n    cineFrameRate: activeViewportCineData.cineFrameRate,\n    isPlaying: activeViewportCineData.isPlaying,\n    onPlayPauseChanged: isPlaying => {\n      const cine = clone(activeViewportCineData)\n      cine.isPlaying = !cine.isPlaying\n\n      propsFromDispatch.dispatchSetViewportSpecificData(activeViewportIndex, {\n        cine,\n      })\n    },\n    onFrameRateChanged: frameRate => {\n      const cine = clone(activeViewportCineData)\n      cine.cineFrameRate = frameRate\n\n      propsFromDispatch.dispatchSetViewportSpecificData(activeViewportIndex, {\n        cine,\n      })\n    },\n    onClickNextButton: () => {\n      const stackData = csTools.getToolState(activeEnabledElement, 'stack')\n      if (!stackData || !stackData.data || !stackData.data.length) return\n      const { currentImageIdIndex, imageIds } = stackData.data[0]\n      if (currentImageIdIndex >= imageIds.length - 1) return\n      scrollToIndex(activeEnabledElement, currentImageIdIndex + 1)\n    },\n    onClickBackButton: () => {\n      const stackData = csTools.getToolState(activeEnabledElement, 'stack')\n      if (!stackData || !stackData.data || !stackData.data.length) return\n      const { currentImageIdIndex } = stackData.data[0]\n      if (currentImageIdIndex === 0) return\n      scrollToIndex(activeEnabledElement, currentImageIdIndex - 1)\n    },\n    onClickSkipToStart: () => {\n      const stackData = csTools.getToolState(activeEnabledElement, 'stack')\n      if (!stackData || !stackData.data || !stackData.data.length) return\n      scrollToIndex(activeEnabledElement, 0)\n    },\n    onClickSkipToEnd: () => {\n      const stackData = csTools.getToolState(activeEnabledElement, 'stack')\n      if (!stackData || !stackData.data || !stackData.data.length) return\n      const lastIndex = stackData.data[0].imageIds.length - 1\n      scrollToIndex(activeEnabledElement, lastIndex)\n    },\n  }\n}\n\nconst ConnectedCineDialog = connect(\n  mapStateToProps,\n  mapDispatchToProps,\n  mergeProps\n)(CineDialog)\n\nexport default ConnectedCineDialog\n","import React, { PureComponent } from 'react'\nimport PropTypes from 'prop-types'\nimport styled from 'styled-components'\n// import './LayoutChooser.styl'\n\n/**\n * Adds the 'hover' class to cells above and to the left of the current cell\n * This is used to \"fill in\" the grid that the user will change the layout to,\n * if they click on a specific table cell.\n **/\n\nclass LayoutChooser extends PureComponent {\n  static propTypes = {\n    Rows: PropTypes.number.isRequired,\n    Columns: PropTypes.number.isRequired,\n    visible: PropTypes.bool.isRequired,\n    selectedCell: PropTypes.object,\n    boxSize: PropTypes.number.isRequired,\n    cellBorder: PropTypes.number.isRequired,\n    onClick: PropTypes.func,\n    onChange: PropTypes.func,\n  }\n\n  static defaultProps = {\n    Rows: 3,\n    Columns: 3,\n    visible: true,\n    boxSize: 20,\n    cellBorder: 1,\n    selectedCell: {\n      row: -1,\n      col: -1,\n    },\n  }\n\n  constructor(props) {\n    super(props)\n    this.emptyCell = {\n      row: -1,\n      column: -1,\n    }\n    this.state = {\n      table: [[]],\n      selectedCell: this.props.selectedCell,\n    }\n  }\n  componentDidMount() {\n    this.highlightCells(this.emptyCell)\n  }\n  onClick(currentCell) {\n    this.setState({\n      selectedCell: currentCell,\n    })\n    this.highlightCells(currentCell)\n    if (this.props.onClick) {\n      this.props.onClick(currentCell)\n    }\n    if (this.props.onChange) {\n      this.props.onChange(currentCell)\n    }\n  }\n  isRange = (cell, parentCell) => {\n    return cell.row <= parentCell.row && cell.col <= parentCell.col\n  }\n  highlightCells = currentCell => {\n    let table = []\n    for (let row = 0; row < this.props.Rows; row++) {\n      let newRow = []\n      for (let col = 0; col < this.props.Columns; col++) {\n        let cell = { row: row, col: col }\n        if (this.isRange(cell, currentCell)) {\n          cell.className = 'hover'\n        } else if (\n          this.isRange(currentCell, this.emptyCell) &&\n          this.isRange(cell, this.state.selectedCell)\n        ) {\n          cell.className = 'selectedBefore'\n        }\n        newRow.push(cell)\n      }\n      table.push(newRow)\n    }\n    this.setState({ table: table })\n  }\n\n  render() {\n    let Columns = this.props.Columns\n    const style = {\n      display: this.props.visible ? 'block' : 'none',\n      minWidth:\n        Columns * this.props.boxSize + (Columns + 5) * this.props.cellBorder,\n    }\n    return (\n      <LayoutChooserWrapper\n        className=\"layoutChooser layoutChooser-dropdown-menu\"\n        role=\"menu\"\n        style={style}>\n        <table>\n          <tbody>\n            {this.state.table.map((row, i) => {\n              return (\n                <tr key={i}>\n                  {row.map((cell, j) => {\n                    return (\n                      <td\n                        className={cell.className}\n                        style={{\n                          width: this.props.boxSize,\n                          height: this.props.boxSize,\n                          border: 'solid 1px black',\n                        }}\n                        key={j}\n                        onMouseEnter={() => this.highlightCells(cell)}\n                        onMouseLeave={() => this.highlightCells(this.emptyCell)}\n                        onClick={() => this.onClick(cell)}\n                      />\n                    )\n                  })}\n                </tr>\n              )\n            })}\n          </tbody>\n        </table>\n      </LayoutChooserWrapper>\n    )\n  }\n}\n\nconst LayoutChooserWrapper = styled.div`\n  &.layoutChooser-dropdown-menu {\n    position: absolute;\n    top: 100%;\n    margin-left: 8px;\n    z-index: 1000;\n    display: none;\n    float: left;\n    min-width: 160px;\n    padding: 5px 0;\n    margin: 2px 0 0;\n    font-size: 14px;\n    text-align: left;\n    list-style: none;\n    background-color: #fff;\n    background-clip: padding-box;\n    border: 1px solid #ccc;\n    border: 1px solid rgba(0,0,0,.15);\n    border-radius: 4px;\n    box-shadow: 0 6px 12px rgba(0,0,0,.175);\n  }\n\n  &.layoutChooser {\n    .selectedBefore {\n      background-color: #5cc3eb;\n    }\n\n    border: 1px solid rgba(77, 99, 110, 0.81);\n    border-radius: 8px\n    padding: 5px 0;\n    position: absolute;\n    z-index: 5000;\n\n    table {\n      margin: 0 auto;\n      border-spacing: 0;\n      border-collapse: collapse;\n      td {\n        cursor: pointer;\n        transition(background-color 0.1s ease);\n\n        &:hover, &.hover {\n          background-color: #209ac9;\n        }\n      }\n    }\n  }\n`\n\nexport { LayoutChooser }\n","import React, { PureComponent } from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport OHIF from '@ohif/core'\nimport { LayoutChooser } from './LayoutChooser'\nimport ToolbarButton from './ToolbarButton'\nconst { setLayout, setViewportActive } = OHIF.redux.actions\n\nexport class LayoutButton extends PureComponent {\n  static defaultProps = {\n    dropdownVisible: false,\n  }\n\n  static propTypes = {\n    dropdownVisible: PropTypes.bool.isRequired,\n    /** Called with the selectedCell number when grid sell is selected */\n    onChange: PropTypes.func,\n    /** The cell to show as selected */\n    selectedCell: PropTypes.object,\n  }\n\n  state = {\n    dropdownVisible: this.props.dropdownVisible,\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.dropdownVisible !== prevProps.dropdownVisible) {\n      this.setState({\n        dropdownVisible: this.props.dropdownVisible,\n      })\n    }\n  }\n\n  onClick = () => {\n    this.setState({\n      dropdownVisible: !this.state.dropdownVisible,\n    })\n  }\n\n  onChange = selectedCell => {\n    if (this.props.onChange) {\n      this.props.onChange(selectedCell)\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"btn-group\">\n        <ToolbarButton\n          isActive={this.state.dropdownVisible}\n          label=\"\"\n          icon=\"th\"\n          onClick={this.onClick}\n        />\n        <LayoutChooser\n          visible={this.state.dropdownVisible}\n          onChange={this.onChange}\n          onClick={this.onClick}\n          selectedCell={this.props.selectedCell}\n        />\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    currentLayout: state.viewports.layout,\n    activeViewportIndex: state.viewports.activeViewportIndex,\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    // TODO: Change if layout switched becomes more complex\n    onChange: (selectedCell, currentLayout, activeViewportIndex) => {\n      const viewports = []\n      const numRows = selectedCell.row + 1\n      const numColumns = selectedCell.col + 1\n      const numViewports = numRows * numColumns\n\n      for (let i = 0; i < numViewports; i++) {\n        // Hacky way to allow users to exit MPR \"mode\"\n        const viewport = currentLayout.viewports[i]\n        let plugin = viewport && viewport.plugin\n        if (viewport && viewport.vtk) {\n          plugin = 'cornerstone'\n        }\n\n        viewports.push({\n          plugin,\n        })\n      }\n      const layout = {\n        numRows,\n        numColumns,\n        viewports,\n      }\n\n      const maxActiveIndex = numViewports - 1\n      if (activeViewportIndex > maxActiveIndex) {\n        dispatch(setViewportActive(0))\n      }\n\n      dispatch(setLayout(layout))\n    },\n  }\n}\n\nconst mergeProps = (propsFromState, propsFromDispatch) => {\n  const onChangeFromDispatch = propsFromDispatch.onChange\n  const { currentLayout, activeViewportIndex } = propsFromState\n\n  return {\n    onChange: selectedCell =>\n      onChangeFromDispatch(selectedCell, currentLayout, activeViewportIndex),\n  }\n}\n\nconst ConnectedLayoutButton = connect(\n  mapStateToProps,\n  mapDispatchToProps,\n  mergeProps\n)(LayoutButton)\n\nexport default ConnectedLayoutButton\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport classnames from 'classnames'\nimport Icon from './Icon'\n// import './RoundedButtonGroup.css'\n\n// TODO: Rename to Toggle?\nclass RoundedButtonGroup extends Component {\n  static className = 'RoundedButtonGroup'\n\n  static propTypes = {\n    options: PropTypes.arrayOf(\n      PropTypes.shape({\n        value: PropTypes.any,\n        label: PropTypes.string,\n        icon: PropTypes.oneOfType([\n          PropTypes.string,\n          PropTypes.shape({\n            name: PropTypes.string.isRequired,\n          }),\n        ]),\n      })\n    ),\n    value: PropTypes.string,\n    onValueChanged: PropTypes.func,\n  }\n\n  static defaultProps = {\n    options: [],\n    value: null,\n  }\n\n  onClickOption = value => {\n    let newValue = value\n    if (this.props.value === value) {\n      newValue = null\n    }\n\n    if (this.props.onValueChanged) {\n      this.props.onValueChanged(newValue)\n    }\n  }\n\n  render() {\n    let className = classnames(\n      RoundedButtonGroup.className,\n      'clearfix center-table'\n    )\n\n    const buttons = this.props.options.map((option, index) => {\n      const className = classnames({\n        roundedButtonWrapper: true,\n        noselect: true,\n        active: this.props.value === option.value,\n      })\n\n      const optionText = option.label && <span>{option.label}</span>\n      const iconProps =\n        typeof option.icon === 'string' ? { name: option.icon } : option.icon\n\n      const bottomLabel = option.bottomLabel && (\n        <div className=\"bottomLabel\">{option.bottomLabel}</div>\n      )\n\n      return (\n        <div\n          key={index}\n          className={className}\n          onClick={() => this.onClickOption(option.value)}>\n          <div className=\"roundedButton\">\n            {optionText}\n            {iconProps && <Icon {...iconProps} />}\n          </div>\n          {bottomLabel}\n        </div>\n      )\n    })\n\n    return <div className={className}>{buttons}</div>\n  }\n}\n\nexport default RoundedButtonGroup\n","import React, { Component } from 'react'\nimport cx from 'classnames'\nimport PropTypes from 'prop-types'\nimport styled from 'styled-components'\nimport { MODULE_TYPES } from '@ohif/core'\n// import { ExpandableToolMenu } from '@ohif/ui'\n\n// import './ToolbarRow.css'\n\nimport { withDialog } from '../contexts/DialogContext'\nimport { withModal } from '../contexts/ModalContext'\nimport ExpandableToolMenu from './ExpandableToolMenu'\nimport CineDialog from './CineDialog'\nimport LayoutButton from './LayoutButton'\nimport ToolbarButton from './ToolbarButton'\nimport RoundedButtonGroup from './RoundedButtonGroup'\nimport {\n  withAppContext,\n  commandsManager,\n  extensionManager,\n} from '../AppContext'\n\nclass ToolbarRow extends Component {\n  // TODO: Simplify these? isOpen can be computed if we say \"any\" value for selected,\n  // closed if selected is null/undefined\n  static propTypes = {\n    isLeftSidePanelOpen: PropTypes.bool.isRequired,\n    isRightSidePanelOpen: PropTypes.bool.isRequired,\n    selectedLeftSidePanel: PropTypes.string.isRequired,\n    selectedRightSidePanel: PropTypes.string.isRequired,\n    handleSidePanelChange: PropTypes.func.isRequired,\n    activeContexts: PropTypes.arrayOf(PropTypes.string).isRequired,\n    studies: PropTypes.array,\n    t: PropTypes.func,\n    // NOTE: withDialog, withModal HOCs\n    dialog: PropTypes.any,\n    modal: PropTypes.any,\n  }\n\n  static defaultProps = {\n    studies: [],\n  }\n\n  constructor(props) {\n    super(props)\n\n    const toolbarButtonDefinitions = _getVisibleToolbarButtons.call(this)\n    // TODO:\n    // If it's a tool that can be active... Mark it as active?\n    // - Tools that are on/off?\n    // - Tools that can be bound to multiple buttons?\n\n    // Normal ToolbarButtons...\n    // Just how high do we need to hoist this state?\n    // Why ToolbarRow instead of just Toolbar? Do we have any others?\n    this.state = {\n      toolbarButtons: toolbarButtonDefinitions,\n      activeButtons: [],\n    }\n\n    this.seriesPerStudyCount = []\n\n    this._handleBuiltIn = _handleBuiltIn.bind(this)\n\n    this.updateButtonGroups()\n  }\n\n  updateButtonGroups() {\n    const panelModules = extensionManager.modules[MODULE_TYPES.PANEL]\n\n    this.buttonGroups = {\n      left: [],\n      right: [],\n    }\n\n    // ~ FIND MENU OPTIONS\n    panelModules.forEach(panelExtension => {\n      const panelModule = panelExtension.module\n      const defaultContexts = Array.from(panelModule.defaultContext)\n\n      panelModule.menuOptions.forEach(menuOption => {\n        const contexts = Array.from(menuOption.context || defaultContexts)\n        const hasActiveContext = this.props.activeContexts.some(actx =>\n          contexts.includes(actx)\n        )\n\n        // It's a bit beefy to pass studies; probably only need to be reactive on `studyInstanceUIDs` and activeViewport?\n        // Note: This does not cleanly handle `studies` prop updating with panel open\n        const isDisabled =\n          typeof menuOption.isDisabled === 'function' &&\n          menuOption.isDisabled(this.props.studies)\n\n        if (hasActiveContext && !isDisabled) {\n          const menuOptionEntry = {\n            value: menuOption.target,\n            icon: menuOption.icon,\n            bottomLabel: menuOption.label,\n          }\n          const from = menuOption.from || 'right'\n\n          this.buttonGroups[from].push(menuOptionEntry)\n        }\n      })\n    })\n\n    // TODO: This should come from extensions, instead of being baked in\n    this.buttonGroups.left.unshift({\n      value: 'studies',\n      icon: 'th-large',\n      bottomLabel: '',\n    })\n  }\n\n  componentDidUpdate(prevProps) {\n    const activeContextsChanged =\n      prevProps.activeContexts !== this.props.activeContexts\n\n    const prevStudies = prevProps.studies\n    const studies = this.props.studies\n    const seriesPerStudyCount = this.seriesPerStudyCount\n\n    let studiesUpdated = false\n\n    if (prevStudies.length !== studies.length) {\n      studiesUpdated = true\n    } else {\n      for (let i = 0; i < studies.length; i++) {\n        if (studies[i].series.length !== seriesPerStudyCount[i]) {\n          seriesPerStudyCount[i] = studies[i].series.length\n\n          studiesUpdated = true\n          break\n        }\n      }\n    }\n\n    if (studiesUpdated) {\n      this.updateButtonGroups()\n    }\n\n    if (activeContextsChanged) {\n      this.setState(\n        {\n          toolbarButtons: _getVisibleToolbarButtons.call(this),\n        },\n        this.closeCineDialogIfNotApplicable\n      )\n    }\n  }\n\n  closeCineDialogIfNotApplicable = () => {\n    const { dialog } = this.props\n    let { dialogId, activeButtons, toolbarButtons } = this.state\n    if (dialogId) {\n      const cineButtonPresent = toolbarButtons.find(\n        button => button.options && button.options.behavior === 'CINE'\n      )\n      if (!cineButtonPresent) {\n        dialog.dismiss({ id: dialogId })\n        activeButtons = activeButtons.filter(\n          button => button.options && button.options.behavior !== 'CINE'\n        )\n        this.setState({ dialogId: null, activeButtons })\n      }\n    }\n  }\n\n  render() {\n    const buttonComponents = _getButtonComponents.call(\n      this,\n      this.state.toolbarButtons,\n      this.state.activeButtons\n    )\n\n    const onPress = (side, value) => {\n      this.props.handleSidePanelChange(side, value)\n    }\n    // const onPressLeft = onPress.bind(this, 'left')\n    const onPressRight = onPress.bind(this, 'right')\n\n    return (\n      <>\n        <ToolbarRowWrapper className={cx('ToolbarRow', this.props.className)}>\n          {/* <div className=\"pull-left m-t-1 p-y-1\" style={{ padding: '10px' }}>\n            <RoundedButtonGroup\n              options={this.buttonGroups.left}\n              value={this.props.selectedLeftSidePanel || ''}\n              onValueChanged={onPressLeft}\n            />\n          </div> */}\n          {buttonComponents}\n          <LayoutButton />\n          {this.buttonGroups.right.length > 0 ? (\n            <div\n              className=\"pull-right m-t-1 rm-x-1\"\n              style={{ marginLeft: 'auto' }}>\n              <RoundedButtonGroup\n                options={this.buttonGroups.right}\n                value={this.props.selectedRightSidePanel || ''}\n                onValueChanged={onPressRight}\n              />\n            </div>\n          ) : null}\n        </ToolbarRowWrapper>\n      </>\n    )\n  }\n}\n\nfunction _getCustomButtonComponent(button, activeButtons) {\n  const CustomComponent = button.CustomComponent\n  const isValidComponent = typeof CustomComponent === 'function'\n\n  // Check if its a valid customComponent. Later on an CustomToolbarComponent interface could be implemented.\n  if (isValidComponent) {\n    const parentContext = this\n    const activeButtonsIds = activeButtons.map(button => button.id)\n    const isActive = activeButtonsIds.includes(button.id)\n\n    return (\n      <CustomComponent\n        parentContext={parentContext}\n        toolbarClickCallback={_handleToolbarButtonClick.bind(this)}\n        button={button}\n        key={button.id}\n        activeButtons={activeButtonsIds}\n        isActive={isActive}\n      />\n    )\n  }\n}\n\nfunction _getExpandableButtonComponent(button, activeButtons) {\n  // Iterate over button definitions and update `onClick` behavior\n  let activeCommand\n  const childButtons = button.buttons.map(childButton => {\n    childButton.onClick = _handleToolbarButtonClick.bind(this, childButton)\n\n    if (activeButtons.map(button => button.id).indexOf(childButton.id) > -1) {\n      activeCommand = childButton.id\n    }\n\n    return childButton\n  })\n\n  return (\n    <ExpandableToolMenu\n      key={button.id}\n      label={button.label}\n      icon={button.icon}\n      buttons={childButtons}\n      activeCommand={activeCommand}\n    />\n  )\n}\n\nfunction _getDefaultButtonComponent(button, activeButtons) {\n  return (\n    <ToolbarButton\n      key={button.id}\n      label={button.label}\n      icon={button.icon}\n      onClick={_handleToolbarButtonClick.bind(this, button)}\n      isActive={activeButtons.map(button => button.id).includes(button.id)}\n    />\n  )\n}\n/**\n * Determine which extension buttons should be showing, if they're\n * active, and what their onClick behavior should be.\n */\nfunction _getButtonComponents(toolbarButtons, activeButtons) {\n  const _this = this\n  return toolbarButtons.map(button => {\n    const hasCustomComponent = button.CustomComponent\n    const hasNestedButtonDefinitions = button.buttons && button.buttons.length\n\n    if (hasCustomComponent) {\n      return _getCustomButtonComponent.call(_this, button, activeButtons)\n    }\n\n    if (hasNestedButtonDefinitions) {\n      return _getExpandableButtonComponent.call(_this, button, activeButtons)\n    }\n\n    return _getDefaultButtonComponent.call(_this, button, activeButtons)\n  })\n}\n\n/**\n * TODO: DEPRECATE\n * This is used exclusively in `extensions/cornerstone/src`\n * We have better ways with new UI Services to trigger \"builtin\" behaviors\n *\n * A handy way for us to handle different button types. IE. firing commands for\n * buttons, or initiation built in behavior.\n *\n * @param {*} button\n * @param {*} evt\n * @param {*} props\n */\nfunction _handleToolbarButtonClick(button, evt, props) {\n  const { activeButtons } = this.state\n\n  if (button.commandName) {\n    const options = Object.assign({ evt }, button.commandOptions)\n    commandsManager.runCommand(button.commandName, options)\n  }\n\n  // TODO: Use Types ENUM\n  // TODO: We can update this to be a `getter` on the extension to query\n  //       For the active tools after we apply our updates?\n  if (button.type === 'setToolActive') {\n    const toggables = activeButtons.filter(\n      ({ options }) => options && !options.togglable\n    )\n    this.setState({ activeButtons: [...toggables, button] })\n  } else if (button.type === 'builtIn') {\n    this._handleBuiltIn(button)\n  }\n}\n\n/**\n *\n */\nfunction _getVisibleToolbarButtons() {\n  const toolbarModules = extensionManager.modules[MODULE_TYPES.TOOLBAR]\n  const toolbarButtonDefinitions = []\n\n  toolbarModules.forEach(extension => {\n    const { definitions, defaultContext } = extension.module\n    definitions.forEach(definition => {\n      const context = definition.context || defaultContext\n\n      if (this.props.activeContexts.includes(context)) {\n        toolbarButtonDefinitions.push(definition)\n      }\n    })\n  })\n\n  return toolbarButtonDefinitions\n}\n\nfunction _handleBuiltIn(button) {\n  /* TODO: Keep cine button active until its unselected. */\n  const { dialog } = this.props\n  const { dialogId } = this.state\n  const { id, options } = button\n\n  if (options.behavior === 'CINE') {\n    if (dialogId) {\n      dialog.dismiss({ id: dialogId })\n      this.setState(state => ({\n        dialogId: null,\n        activeButtons: [\n          ...state.activeButtons.filter(button => button.id !== id),\n        ],\n      }))\n    } else {\n      const spacing = 20\n      const { x, y } = document\n        .querySelector(`.ViewerMain`)\n        .getBoundingClientRect()\n      const newDialogId = dialog.create({\n        content: CineDialog,\n        defaultPosition: {\n          x: x + spacing || 0,\n          y: y + spacing || 0,\n        },\n      })\n      this.setState(state => ({\n        dialogId: newDialogId,\n        activeButtons: [...state.activeButtons, button],\n      }))\n    }\n  }\n\n  if (options.behavior === 'DOWNLOAD_SCREEN_SHOT') {\n    commandsManager.runCommand('showDownloadViewportModal', {\n      // title: t('Download High Quality Image'),\n      title: 'Download High Quality Image',\n    })\n  }\n}\n\nconst ToolbarRowWrapper = styled.div`\n  /* flex: 0 0 auto; */\n  /* padding-right: 1.5rem; */\n  margin-bottom: 24px;\n  position: relative;\n  transition: height 300ms ease;\n  width: 100%;\n  /* display: flex; */\n`\n\nexport default withModal(withDialog(withAppContext(ToolbarRow)))\n","import React from 'react'\nimport { useDrop } from 'react-dnd'\nimport styled from 'styled-components'\nimport PropTypes from 'prop-types'\nimport classNames from 'classnames'\n\nconst ViewportPane = function (props) {\n  const { children, onDrop, viewportIndex, className: propClassName } = props\n  const [{ hovered, highlighted }, drop] = useDrop({\n    accept: 'thumbnail',\n    drop: (droppedItem, monitor) => {\n      const canDrop = monitor.canDrop()\n      const isOver = monitor.isOver()\n\n      if (canDrop && isOver && onDrop) {\n        const { StudyInstanceUID, displaySetInstanceUID } = droppedItem\n\n        onDrop({ viewportIndex, StudyInstanceUID, displaySetInstanceUID })\n      }\n    },\n    // Monitor, and collect props.\n    // Returned as values by `useDrop`\n    collect: monitor => ({\n      highlighted: monitor.canDrop(),\n      hovered: monitor.isOver(),\n    }),\n  })\n\n  return (\n    <ViewportPaneWrapper\n      className={classNames(\n        'viewport-drop-target',\n        { hovered: hovered },\n        { highlighted: highlighted },\n        propClassName\n      )}\n      ref={drop}\n      data-cy={`viewport-container-${viewportIndex}`}>\n      {children}\n    </ViewportPaneWrapper>\n  )\n}\n\nconst ViewportPaneWrapper = styled.div`\n  &.viewport-drop-target {\n    opacity: 1;\n    position: relative; /* Locks in Scrollbar */\n    transition: 0.3s all ease;\n  }\n\n  &.viewport-drop-target.hovered {\n    opacity: 0.5;\n    cursor: copy;\n  }\n`\n\nViewportPane.propTypes = {\n  children: PropTypes.node.isRequired,\n  viewportIndex: PropTypes.number.isRequired,\n  onDrop: PropTypes.func.isRequired,\n  className: PropTypes.string,\n}\n\nexport default ViewportPane\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport PropTypes from 'prop-types'\nimport styled from 'styled-components'\nimport classNames from 'classnames'\nimport memoize from 'lodash.memoize'\nimport { MODULE_TYPES, utils } from '@ohif/core'\nimport ViewportPane from './ViewportPane'\nimport { extensionManager } from '../AppContext'\n\nconst { loadAndCacheDerivedDisplaySets } = utils\n\nfunction DefaultViewport(props) {\n  return <div>{JSON.stringify(props)}</div>\n}\n\nfunction EmptyViewport() {\n  return (\n    <div className=\"empty-viewport\">\n      <p>Please drag a stack here to view images.</p>\n    </div>\n  )\n}\n\nconst ViewportGrid = function (props) {\n  const {\n    activeViewportIndex,\n    availablePlugins,\n    defaultPlugin: defaultPluginName,\n    layout,\n    numRows,\n    numColumns,\n    setViewportData,\n    studies,\n    viewportData,\n    children,\n    isStudyLoaded,\n  } = props\n\n  React.useEffect(() => {\n    if (isStudyLoaded) {\n      viewportData.forEach(displaySet => {\n        const promises = loadAndCacheDerivedDisplaySets(displaySet, studies)\n\n        promises.forEach(promise => {\n          promise.catch(error => {\n            // snackbar.show({\n            //   title: 'Error loading derived display set:',\n            //   message: error.message,\n            //   type: 'error',\n            //   autoClose: false,\n            // })\n            console.log(error.message)\n          })\n        })\n      })\n    }\n  }, [studies, viewportData, isStudyLoaded])\n\n  const getViewportPanes = () =>\n    layout.viewports.map((layout, viewportIndex) => {\n      const displaySet = viewportData[viewportIndex]\n\n      if (!displaySet) {\n        return null\n      }\n\n      const data = {\n        displaySet,\n        studies,\n      }\n\n      // JAMES TODO:\n\n      // Use whichever plugin is currently in use in the panel\n      // unless nothing is specified. If nothing is specified\n      // and the display set has a plugin specified, use that.\n      //\n      // TODO: Change this logic to:\n      // - Plugins define how capable they are of displaying a SopClass\n      // - When updating a panel, ensure that the currently enabled plugin\n      // in the viewport is capable of rendering this display set. If not\n      // then use the most capable available plugin\n\n      const pluginName =\n        !layout.plugin && displaySet && displaySet.plugin\n          ? displaySet.plugin\n          : layout.plugin\n\n      const ViewportComponent = _getViewportComponent(\n        data, // Why do we pass this as `ViewportData`, when that's not really what it is?\n        viewportIndex,\n        children,\n        availablePlugins,\n        pluginName,\n        defaultPluginName\n      )\n\n      return (\n        <ViewportPane\n          onDrop={setViewportData}\n          viewportIndex={viewportIndex} // Needed by `setViewportData`\n          className={classNames('viewport-container', {\n            active: activeViewportIndex === viewportIndex,\n          })}\n          key={viewportIndex}>\n          {ViewportComponent}\n        </ViewportPane>\n      )\n    })\n\n  const ViewportPanes = React.useMemo(getViewportPanes, [\n    layout,\n    viewportData,\n    studies,\n    children,\n    availablePlugins,\n    defaultPluginName,\n    setViewportData,\n    activeViewportIndex,\n  ])\n\n  const rowSize = 100 / numRows\n  const colSize = 100 / numColumns\n\n  // http://grid.malven.co/\n  if (!viewportData || !viewportData.length) {\n    return null\n  }\n\n  return (\n    <ViewportGridWrapper\n      data-cy=\"viewprt-grid\"\n      style={{\n        display: 'grid',\n        gridTemplateRows: `repeat(${numRows}, ${rowSize}%)`,\n        gridTemplateColumns: `repeat(${numColumns}, ${colSize}%)`,\n        height: '100%',\n        width: '100%',\n      }}>\n      {ViewportPanes}\n    </ViewportGridWrapper>\n  )\n}\n\nconst ViewportGridWrapper = styled.div`\n  &.viewport-container {\n    float: left;\n    position: relative;\n    /* border: var(--viewport-border-thickness) solid var(--ui-border-color); */\n  }\n\n  &.viewport-container.active {\n    /* border: var(--viewport-border-thickness) solid var(--active-color); */\n  }\n`\n\nViewportGrid.propTypes = {\n  viewportData: PropTypes.array.isRequired,\n  supportsDrop: PropTypes.bool.isRequired,\n  activeViewportIndex: PropTypes.number.isRequired,\n  layout: PropTypes.object.isRequired,\n  availablePlugins: PropTypes.object.isRequired,\n  setViewportData: PropTypes.func.isRequired,\n  studies: PropTypes.array,\n  children: PropTypes.node,\n  defaultPlugin: PropTypes.string,\n  numRows: PropTypes.number.isRequired,\n  numColumns: PropTypes.number.isRequired,\n}\n\nViewportGrid.defaultProps = {\n  viewportData: [],\n  numRows: 1,\n  numColumns: 1,\n  layout: {\n    viewports: [{}],\n  },\n  activeViewportIndex: 0,\n  supportsDrop: true,\n  availablePlugins: {\n    DefaultViewport,\n  },\n  defaultPlugin: 'defaultViewportPlugin',\n}\n\n/**\n *\n *\n * @param {*} plugin\n * @param {*} viewportData\n * @param {*} viewportIndex\n * @param {*} children\n * @returns\n */\nfunction _getViewportComponent(\n  viewportData,\n  viewportIndex,\n  children,\n  availablePlugins,\n  pluginName,\n  defaultPluginName\n) {\n  if (viewportData.displaySet) {\n    pluginName = pluginName || defaultPluginName\n    const ViewportComponent = availablePlugins[pluginName]\n\n    if (!ViewportComponent) {\n      throw new Error(\n        `No Viewport Component available for name ${pluginName}.\n         Available plugins: ${JSON.stringify(availablePlugins)}`\n      )\n    }\n\n    return (\n      <ViewportComponent\n        viewportData={viewportData}\n        viewportIndex={viewportIndex}\n        children={[children]}\n      />\n    )\n  }\n\n  return <EmptyViewport />\n}\n\nconst getAvailableViewportModules = memoize(viewportModules => {\n  const availableViewportModules = {}\n  viewportModules.forEach(moduleDefinition => {\n    availableViewportModules[moduleDefinition.extensionId] =\n      moduleDefinition.module\n  })\n  return availableViewportModules\n})\n\nconst mapStateToProps = state => {\n  const viewportModules = extensionManager.modules[MODULE_TYPES.VIEWPORT]\n  const availableViewportModules = getAvailableViewportModules(viewportModules)\n\n  // TODO: Use something like state.plugins.defaultPlugin[MODULE_TYPES.VIEWPORT]\n  let defaultPlugin\n  if (viewportModules.length) {\n    defaultPlugin = viewportModules[0].extensionId\n  }\n\n  const { numRows, numColumns, layout, activeViewportIndex } = state.viewports\n\n  return {\n    numRows,\n    numColumns,\n    layout,\n    activeViewportIndex,\n    // TODO: rename `availableViewportModules`\n    availablePlugins: availableViewportModules,\n    // TODO: rename `defaultViewportModule`\n    defaultPlugin,\n  }\n}\n\nconst ConnectedViewportGrid = connect(mapStateToProps, null)(ViewportGrid)\n\nexport default ConnectedViewportGrid\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport OHIF from '@ohif/core'\nimport PropTypes from 'prop-types'\nimport styled from 'styled-components'\nimport memoize from 'lodash.memoize'\nimport _values from 'lodash.values'\nimport ConnectedViewportGrid from './ViewportGrid'\n\nconst {\n  setViewportSpecificData,\n  clearViewportSpecificData,\n} = OHIF.redux.actions\n\nvar values = memoize(_values)\n\nclass ViewerMain extends Component {\n  static propTypes = {\n    activeViewportIndex: PropTypes.number.isRequired,\n    studies: PropTypes.array,\n    viewportSpecificData: PropTypes.object.isRequired,\n    layout: PropTypes.object.isRequired,\n    setViewportSpecificData: PropTypes.func.isRequired,\n    clearViewportSpecificData: PropTypes.func.isRequired,\n  }\n\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      displaySets: [],\n    }\n  }\n\n  getDisplaySets(studies) {\n    const displaySets = []\n    studies.forEach(study => {\n      study.displaySets.forEach(dSet => {\n        if (!dSet.plugin) {\n          dSet.plugin = 'cornerstone'\n        }\n        displaySets.push(dSet)\n      })\n    })\n\n    return displaySets\n  }\n\n  findDisplaySet(studies, StudyInstanceUID, displaySetInstanceUID) {\n    const study = studies.find(study => {\n      return study.StudyInstanceUID === StudyInstanceUID\n    })\n\n    if (!study) {\n      return\n    }\n\n    return study.displaySets.find(displaySet => {\n      return displaySet.displaySetInstanceUID === displaySetInstanceUID\n    })\n  }\n\n  componentDidMount() {\n    // Add beforeUnload event handler to check for unsaved changes\n    //window.addEventListener('beforeunload', unloadHandlers.beforeUnload);\n\n    // Get all the display sets for the viewer studies\n    if (this.props.studies) {\n      const displaySets = this.getDisplaySets(this.props.studies)\n      this.setState({ displaySets }, this.fillEmptyViewportPanes)\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    const prevViewportAmount = prevProps.layout.viewports.length\n    const viewportAmount = this.props.layout.viewports.length\n    const isVtk = this.props.layout.viewports.some(vp => !!vp.vtk)\n\n    if (\n      this.props.studies !== prevProps.studies ||\n      (viewportAmount !== prevViewportAmount && !isVtk)\n    ) {\n      const displaySets = this.getDisplaySets(this.props.studies)\n      this.setState({ displaySets }, this.fillEmptyViewportPanes)\n    }\n  }\n\n  fillEmptyViewportPanes = () => {\n    // TODO: Here is the entry point for filling viewports on load.\n    const dirtyViewportPanes = []\n    const { layout, viewportSpecificData } = this.props\n    const { displaySets } = this.state\n\n    if (!displaySets || !displaySets.length) {\n      return\n    }\n\n    for (let i = 0; i < layout.viewports.length; i++) {\n      const viewportPane = viewportSpecificData[i]\n      const isNonEmptyViewport =\n        viewportPane &&\n        viewportPane.StudyInstanceUID &&\n        viewportPane.displaySetInstanceUID\n\n      if (isNonEmptyViewport) {\n        dirtyViewportPanes.push({\n          StudyInstanceUID: viewportPane.StudyInstanceUID,\n          displaySetInstanceUID: viewportPane.displaySetInstanceUID,\n        })\n\n        continue\n      }\n\n      const foundDisplaySet =\n        displaySets.find(\n          ds =>\n            !dirtyViewportPanes.some(\n              v => v.displaySetInstanceUID === ds.displaySetInstanceUID\n            )\n        ) || displaySets[displaySets.length - 1]\n\n      dirtyViewportPanes.push(foundDisplaySet)\n    }\n\n    dirtyViewportPanes.forEach((vp, i) => {\n      if (vp && vp.StudyInstanceUID) {\n        this.setViewportData({\n          viewportIndex: i,\n          StudyInstanceUID: vp.StudyInstanceUID,\n          displaySetInstanceUID: vp.displaySetInstanceUID,\n        })\n      }\n    })\n  }\n\n  setViewportData = ({\n    viewportIndex,\n    StudyInstanceUID,\n    displaySetInstanceUID,\n  }) => {\n    let displaySet = this.findDisplaySet(\n      this.props.studies,\n      StudyInstanceUID,\n      displaySetInstanceUID\n    )\n\n    if (displaySet.isDerived) {\n      const { Modality } = displaySet\n      displaySet = displaySet.getSourceDisplaySet(this.props.studies)\n\n      if (!displaySet) {\n        throw new Error(\n          `Referenced series for ${Modality} dataset not present.`\n        )\n      }\n    }\n\n    this.props.setViewportSpecificData(viewportIndex, displaySet)\n  }\n\n  render() {\n    const { viewportSpecificData } = this.props\n    const viewportData = values(viewportSpecificData)\n\n    return (\n      <ViewerMainWrapper className=\"ViewerMain\">\n        {this.state.displaySets.length > 0 ? (\n          <ConnectedViewportGrid\n            isStudyLoaded={this.props.isStudyLoaded}\n            studies={this.props.studies}\n            viewportData={viewportData}\n            setViewportData={this.setViewportData}>\n            {/* Children to add to each viewport that support children */}\n          </ConnectedViewportGrid>\n        ) : null}\n      </ViewerMainWrapper>\n    )\n  }\n\n  componentWillUnmount() {\n    // Clear the entire viewport specific data\n    const { viewportSpecificData } = this.props\n    Object.keys(viewportSpecificData).forEach(viewportIndex => {\n      this.props.clearViewportSpecificData(viewportIndex)\n    })\n\n    // TODO: These don't have to be viewer specific?\n    // Could qualify for other routes?\n    // hotkeys.destroy();\n\n    // Remove beforeUnload event handler...\n    //window.removeEventListener('beforeunload', unloadHandlers.beforeUnload);\n    // Destroy the synchronizer used to update reference lines\n    //OHIF.viewer.updateImageSynchronizer.destroy();\n    // TODO: Instruct all plugins to clean up themselves\n    //\n    // Clear references to all stacks in the StackManager\n    //StackManager.clearStacks();\n    // @TypeSafeStudies\n    // Clears OHIF.viewer.Studies collection\n    //OHIF.viewer.Studies.removeAll();\n    // @TypeSafeStudies\n    // Clears OHIF.viewer.StudyMetadataList collection\n    //OHIF.viewer.StudyMetadataList.removeAll();\n  }\n}\n\nconst ViewerMainWrapper = styled.div`\n  height: 100%;\n  width: 100%;\n  transition: all 0.3s ease;\n\n  > div {\n    width: 100%;\n    height: 100%;\n  }\n\n  #viewer {\n    height: calc(100% - 60px);\n  }\n\n  #viewer > .loadingTextDiv {\n    /* color: var(--text-secondary-color); */\n    font-size: 30px;\n    height: 100%;\n    line-height: calc(100% - 60px);\n  }\n`\n\nconst mapStateToProps = state => {\n  const { activeViewportIndex, layout, viewportSpecificData } = state.viewports\n\n  return {\n    activeViewportIndex,\n    layout,\n    viewportSpecificData,\n    viewports: state.viewports,\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    setViewportSpecificData: (viewportIndex, data) => {\n      dispatch(setViewportSpecificData(viewportIndex, data))\n    },\n    clearViewportSpecificData: () => {\n      dispatch(clearViewportSpecificData())\n    },\n  }\n}\n\nconst ConnectedViewerMain = connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(ViewerMain)\n\nexport default ConnectedViewerMain\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport OHIF from '@ohif/core'\nimport styled from 'styled-components'\nimport { connect } from 'react-redux'\nimport { clone } from 'ramda'\nimport Thumbnail from './Thumbnail'\n\n// const { studyMetadataManager } = OHIF.utils\n\nconst { setActiveViewportSpecificData } = OHIF.redux.actions\n\n/**\n * Finds displaySet by UID across all displaySets inside studyMetadata\n * @param {Array} studyMetadata\n * @param {string} displaySetInstanceUID\n */\nfunction findDisplaySetByUID(studyMetadata, displaySetInstanceUID) {\n  if (!Array.isArray(studyMetadata)) return null\n\n  const allDisplaySets = studyMetadata.reduce((all, current) => {\n    let currentDisplaySet = []\n    if (current && Array.isArray(current.displaySets)) {\n      currentDisplaySet = current.displaySets\n    }\n    return all.concat(currentDisplaySet)\n  }, [])\n\n  const bySetInstanceUID = ds =>\n    ds.displaySetInstanceUID === displaySetInstanceUID\n\n  const displaySet = allDisplaySets.find(bySetInstanceUID)\n  return displaySet || null\n}\n\nfunction StudyBrowser(props) {\n  const {\n    studies,\n    onThumbnailClick,\n    onThumbnailDoubleClick,\n    supportsDrag,\n  } = props\n\n  return (\n    <StyledBrowserWrapper className=\"study-browser\">\n      <div className=\"scrollable-study-thumbnails\">\n        {studies\n          .map((study, studyIndex) => {\n            const { StudyInstanceUID } = study\n            return study.thumbnails.map((thumb, thumbIndex) => {\n              // TODO: Thumb has more props than we care about?\n              const {\n                altImageText,\n                displaySetInstanceUID,\n                imageId,\n                InstanceNumber,\n                numImageFrames,\n                SeriesDescription,\n                SeriesNumber,\n                stackPercentComplete,\n              } = thumb\n\n              return (\n                <div\n                  key={thumb.displaySetInstanceUID}\n                  className=\"thumbnail-container\"\n                  data-cy=\"thumbnail-list\">\n                  <Thumbnail\n                    supportsDrag={supportsDrag}\n                    key={`${studyIndex}_${thumbIndex}`}\n                    id={`${studyIndex}_${thumbIndex}`} // Unused?\n                    // Study\n                    StudyInstanceUID={StudyInstanceUID} // used by drop\n                    // Thumb\n                    altImageText={altImageText}\n                    imageId={imageId}\n                    InstanceNumber={InstanceNumber}\n                    displaySetInstanceUID={displaySetInstanceUID} // used by drop\n                    numImageFrames={numImageFrames}\n                    SeriesDescription={SeriesDescription}\n                    SeriesNumber={SeriesNumber}\n                    stackPercentComplete={stackPercentComplete}\n                    // Events\n                    onClick={onThumbnailClick.bind(\n                      undefined,\n                      displaySetInstanceUID\n                    )}\n                    onDoubleClick={onThumbnailDoubleClick}\n                  />\n                </div>\n              )\n            })\n          })\n          .flat()}\n      </div>\n    </StyledBrowserWrapper>\n  )\n}\n\nconst StyledBrowserWrapper = styled.div`\n  &.study-browser {\n    float: left;\n    height: 100%;\n    width: 100%;\n    overflow: hidden;\n    padding-top: 10px;\n\n    .scrollable-study-thumbnails {\n      height: 100%;\n      overflow-y: auto;\n      overflow-x: hidden;\n\n      display: flex;\n      flex-direction: column;\n\n      &::-webkit-scrollbar {\n        display: none;\n      }\n\n      .thumbnail-container {\n        margin: 0 auto;\n        padding-bottom: 0.5rem;\n\n        .noselect {\n          -moz-user-select: none; /* Firefox */\n          -ms-user-select: none; /* Internet Explorer */\n          -khtml-user-select: none; /* KHTML browsers (e.g. Konqueror) */\n          -webkit-user-select: none; /* Chrome, Safari, and Opera */\n          -webkit-touch-callout: none; /* Disable Android and iOS callouts*/\n        }\n      }\n    }\n  }\n\n  .draggable {\n    cursor: copy;\n  }\n`\n\nconst noop = () => {}\n\nStudyBrowser.propTypes = {\n  studies: PropTypes.arrayOf(\n    PropTypes.shape({\n      StudyInstanceUID: PropTypes.string.isRequired,\n      thumbnails: PropTypes.arrayOf(\n        PropTypes.shape({\n          altImageText: PropTypes.string,\n          displaySetInstanceUID: PropTypes.string.isRequired,\n          imageId: PropTypes.string,\n          InstanceNumber: PropTypes.number,\n          numImageFrames: PropTypes.number,\n          SeriesDescription: PropTypes.string,\n          SeriesNumber: PropTypes.number,\n          stackPercentComplete: PropTypes.number,\n        })\n      ),\n    })\n  ).isRequired,\n  supportsDrag: PropTypes.bool,\n  onThumbnailClick: PropTypes.func,\n  onThumbnailDoubleClick: PropTypes.func,\n}\n\nStudyBrowser.defaultProps = {\n  studies: [],\n  supportsDrag: true,\n  onThumbnailClick: noop,\n  onThumbnailDoubleClick: noop,\n}\n\n// TODO\n// - Determine in which display set is active from Redux (activeViewportIndex and layout viewportData)\n// - Pass in errors and stack loading progress from Redux\nconst mapStateToProps = (state, ownProps) => {\n  // If we know that the stack loading progress details have changed,\n  // we can try to update the component state so that the thumbnail\n  // progress bar is updated\n  const stackLoadingProgressMap = state.loading.progress\n  const studiesWithLoadingData = clone(ownProps.studies)\n\n  studiesWithLoadingData.forEach(study => {\n    study.thumbnails.forEach(data => {\n      const { displaySetInstanceUID } = data\n      const stackId = `StackProgress:${displaySetInstanceUID}`\n      const stackProgressData = stackLoadingProgressMap[stackId]\n\n      let stackPercentComplete = 0\n      if (stackProgressData) {\n        stackPercentComplete = stackProgressData.percentComplete\n      }\n\n      data.stackPercentComplete = stackPercentComplete\n    })\n  })\n\n  return {\n    studies: studiesWithLoadingData,\n  }\n}\n\nconst mapDispatchToProps = (dispatch, ownProps) => {\n  return {\n    onThumbnailClick: displaySetInstanceUID => {\n      let displaySet = findDisplaySetByUID(\n        ownProps.studyMetadata,\n        displaySetInstanceUID\n      )\n\n      if (displaySet.isDerived) {\n        const { Modality } = displaySet\n\n        displaySet = displaySet.getSourceDisplaySet(ownProps.studyMetadata)\n\n        if (!displaySet) {\n          throw new Error(\n            `Referenced series for ${Modality} dataset not present.`\n          )\n        }\n\n        if (!displaySet) {\n          throw new Error('Source data not present')\n        }\n      }\n\n      dispatch(setActiveViewportSpecificData(displaySet))\n    },\n  }\n}\n\nconst ConnectedStudyBrowser = connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(StudyBrowser)\n\nexport default ConnectedStudyBrowser\n","import React from 'react'\nimport { Provider } from 'react-redux'\nimport { utils } from '@ohif/core'\nimport setConfiguration from './utils/setConfiguration'\nimport initWebWorkers from './utils/initWebWorker'\nimport ModalProvider from './contexts/ModalContext'\nimport DialogProvider from './contexts/DialogContext'\nimport Modal from './components/Modal'\nimport App from './App'\nimport store from './configureStore'\nimport defaultConfig from './config'\nimport {\n  commandsManager,\n  servicesManager,\n  hotkeysManager,\n  extensionManager,\n  AppProvider,\n} from './AppContext'\n\n// TODO[react] Use a provider when the whole tree is React\nwindow.store = store\n\nwindow.ohif = window.ohif || {}\nwindow.ohif.app = {\n  commandsManager,\n  hotkeysManager,\n  servicesManager,\n  extensionManager,\n}\n\nlet config = {}\n\nif (window) {\n  config = window.config || defaultConfig\n}\n\nconst appDefaultConfig = {\n  showStudyList: true,\n  cornerstoneExtensionConfig: {},\n  extensions: [],\n}\n\nconst appConfig = {\n  ...appDefaultConfig,\n  ...(typeof config === 'function' ? config({ servicesManager }) : config),\n}\n\nif (appConfig.servers) {\n  utils.addServers(appConfig.servers, store)\n}\n\nsetConfiguration(appConfig)\ninitWebWorkers()\n\nexport function ViewerWithStudies(props) {\n  const { UIDialogService, UIModalService } = servicesManager.services\n\n  return (\n    <Provider store={store}>\n      <AppProvider config={appConfig}>\n        <DialogProvider service={UIDialogService}>\n          <ModalProvider modal={Modal} service={UIModalService}>\n            <App {...props} />\n          </ModalProvider>\n        </DialogProvider>\n      </AppProvider>\n    </Provider>\n  )\n}\n\nexport { default as Thumbnail } from './components/Thumbnail'\n\nexport { default as ToolbarRow } from './components/ToolbarRow'\n\nexport { default as ViewerMain } from './components/ViewerMain'\n\nexport { default as StudyBrowser } from './components/StudyBrowser'\n","import OHIF from '@ohif/core'\nimport cornerstone from 'cornerstone-core'\nimport cornerstoneWADOImageLoader from 'cornerstone-wado-image-loader'\nimport dicomParser from 'dicom-parser'\n// import AppContext from './app-context'\n\nexport default function setConfiguration(appConfig) {\n  // For debugging\n  //if (process.env.node_env === 'development') {\n  window.cornerstone = cornerstone\n  window.cornerstoneWADOImageLoader = cornerstoneWADOImageLoader\n  //}\n\n  cornerstoneWADOImageLoader.external.cornerstone = cornerstone\n  cornerstoneWADOImageLoader.external.dicomParser = dicomParser\n\n  OHIF.errorHandler.getHTTPErrorHandler = () => {\n    // const { appConfig = {} } = AppContext;\n\n    return appConfig.httpErrorHandler\n  }\n\n  cornerstoneWADOImageLoader.configure({\n    beforeSend: function (xhr) {\n      const headers = OHIF.DICOMWeb.getAuthorizationHeader()\n\n      if (headers.Authorization) {\n        xhr.setRequestHeader('Authorization', headers.Authorization)\n      }\n    },\n    errorInterceptor: error => {\n      // const { appConfig = {} } = AppContext;\n\n      if (typeof appConfig.httpErrorHandler === 'function') {\n        appConfig.httpErrorHandler(error)\n      }\n    },\n  })\n}\n","import React from 'react'\nimport { Card, Row, Col } from 'antd'\nimport cx from 'classnames'\nimport { RouteComponentProps } from 'react-router-dom'\nimport { Page } from '@/components/layout'\nimport Input from '@/components/input'\nimport Collapse from '@/components/collapse'\nimport useTitle from '@/hooks/useTitle'\nimport { useBreadcrumb, useHeaderContent } from '@/hooks/useApp'\nimport Button from '@/components/button'\nimport useVisible from '@/hooks/useVisible'\nimport {\n  ViewerWithStudies,\n  ViewerMain,\n  ToolbarRow,\n  StudyBrowser,\n} from '@/dicom-viewer'\n\ninterface Props extends RouteComponentProps<{ studyInstanceUIDs: string }> {}\n\nexport default function RadiolImageViewer(props: Props) {\n  useTitle('')\n\n  useBreadcrumb([{ name: '' }, { name: '' }])\n\n  const [annotationListVisible, handleAnnotationListVisible] = useVisible()\n\n  useHeaderContent(\n    <div className=\"inline-flex\">\n      <Button\n        color=\"outline\"\n        className=\"ml-6 bg-transparent text-white border-white\"\n        onClick={handleAnnotationListVisible}>\n        Annotation List\n      </Button>\n    </div>\n  )\n\n  return (\n    <Page className=\"pr-8\">\n      <ViewerWithStudies>\n        {({ state, props, onChange }: any) => (\n          <div className=\"flex\">\n            <Card\n              className=\"rounded-lg shadow-2xl h-full mr-4\"\n              style={{ width: 250 }}\n              bodyStyle={{ padding: 12, paddingTop: 24 }}>\n              <Row className=\"mb-2 text-sm text-primary\">\n                <Col span={24} className=\"mb-3\">\n                  <div className=\"inline-block\" css={{ width: 65 }}>\n                    \n                  </div>\n                  <Input className=\"w-2/3\" bordered={false} />\n                </Col>\n                <Col span={24} className=\"my-3\">\n                  <div className=\"inline-block\" css={{ width: 65 }}>\n                    \n                  </div>\n                  <Input className=\"w-2/3\" bordered={false} />\n                </Col>\n                <Col span={24} className=\"my-3\">\n                  <div className=\"inline-block\" css={{ width: 65 }}>\n                    \n                  </div>\n                  <Input className=\"w-2/3\" bordered={false} />\n                </Col>\n                <Col span={24} className=\"mt-3\">\n                  <StudyBrowser\n                    studies={state.thumbnails}\n                    studyMetadata={props.studies}\n                  />\n                </Col>\n              </Row>\n            </Card>\n            <Row className=\"flex-1\" gutter={16}>\n              <Col span={annotationListVisible ? 20 : 24}>\n                <div\n                  className=\"p-8 bg-white rounded-lg shadow-2xl flex flex-col\"\n                  // style={{ height: '100vh' }}\n                >\n                  <ToolbarRow\n                    isLeftSidePanelOpen={state.isLeftSidePanelOpen}\n                    isRightSidePanelOpen={state.isRightSidePanelOpen}\n                    selectedLeftSidePanel={\n                      state.isLeftSidePanelOpen\n                        ? state.selectedLeftSidePanel\n                        : ''\n                    }\n                    selectedRightSidePanel={\n                      state.isRightSidePanelOpen\n                        ? state.selectedRightSidePanel\n                        : ''\n                    }\n                    handleSidePanelChange={(side: any, selectedPanel: any) => {\n                      const sideClicked =\n                        side && side[0].toUpperCase() + side.slice(1)\n                      const openKey = `is${sideClicked}SidePanelOpen`\n                      const selectedKey = `selected${sideClicked}SidePanel`\n                      const updatedState = Object.assign({}, state)\n\n                      const isOpen = updatedState[openKey]\n                      const prevSelectedPanel = updatedState[selectedKey]\n                      // RoundedButtonGroup returns `null` if selected button is clicked\n                      const isSameSelectedPanel =\n                        prevSelectedPanel === selectedPanel ||\n                        selectedPanel === null\n\n                      updatedState[selectedKey] =\n                        selectedPanel || prevSelectedPanel\n\n                      const isClosedOrShouldClose =\n                        !isOpen || isSameSelectedPanel\n                      if (isClosedOrShouldClose) {\n                        updatedState[openKey] = !updatedState[openKey]\n                      }\n\n                      onChange(updatedState)\n                    }}\n                    studies={props.studies}\n                  />\n                  <ViewerMain\n                    studies={props.studies}\n                    isStudyLoaded={props.isStudyLoaded}\n                  />\n                </div>\n              </Col>\n              {annotationListVisible && (\n                <Col className={cx('flex-1', {})}>\n                  <Collapse\n                    activeKey={[1, 2, 3, 4]}\n                    expandIcon={() => null}\n                    className=\"shadow-2xl\">\n                    <Collapse.Panel\n                      header={\n                        <div className=\"text-center\">Annotation List</div>\n                      }\n                      key={1}>\n                      <div className=\"border-b border-gray-600 p-3\">\n                        \n                      </div>\n                      <div className=\"border-b border-gray-600 p-3\"></div>\n                      <div className=\"border-b border-gray-600 p-3\">\n                        \n                      </div>\n                      <div className=\"border-b border-gray-600 p-3\"></div>\n                      <div className=\"border-b border-gray-600 p-3\">\n                        \n                      </div>\n                      <div className=\"border-b border-gray-600 p-3\"></div>\n                      <div className=\"border-b border-gray-600 p-3\">\n                        \n                      </div>\n                      <div className=\"border-b border-gray-600 p-3\">\n                        \n                      </div>\n                      <div className=\"border-b border-gray-600 p-3\">\n                        \n                      </div>\n                      <div className=\"border-b border-gray-600 p-3\">\n                        \n                      </div>\n                      <div className=\"border-b border-gray-600 p-3\"></div>\n                    </Collapse.Panel>\n                  </Collapse>\n                </Col>\n              )}\n            </Row>\n          </div>\n        )}\n      </ViewerWithStudies>\n    </Page>\n  )\n}\n"],"sourceRoot":""}