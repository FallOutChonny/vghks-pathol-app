{"version":3,"sources":["../node_modules/@ant-design/icons-svg/es/asn/EyeOutlined.js","../node_modules/@ant-design/icons/es/icons/EyeOutlined.js","containers/report-list/report-list.tsx"],"names":["EyeOutlined","props","ref","React","AntdIcon","Object","assign","icon","EyeOutlinedSvg","displayName","types","formItemLayout","createFormItemLayout","ReportList","useTitle","setBreadcrumb","useBreadcrumb","name","useForm","form","useReports","data","refetch","console","log","useState","ORREQNO","type","setType","handleToReport","evt","history","push","replace","currentTarget","dataset","id","REPORT_EDIT","handleToImageViewer","PATHOL_IMAGE","handleToMedicalOrder","MEDICAL_ORDER","columns","title","dataIndex","render","_","__","idx","v","r","data-id","className","onClick","style","height","justify","md","xs","layout","hideRequiredMark","labelAlign","colon","gutter","Item","label","rules","required","addonBefore","width","defaultValue","onChange","value","Option","HHISNUM","ORWORKNO","initialValue","allowClear","color","resetFields","validateFields","then","values","date","rest","getRangeDate","startDate","endDate","noType","length","content","total","rowKey","dataSource"],"mappings":"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","file":"static/js/13.fad8ad29.chunk.js","sourcesContent":["// This icon file is generated automatically.\nvar EyeOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z\" } }] }, \"name\": \"eye\", \"theme\": \"outlined\" };\nexport default EyeOutlined;\n","// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport EyeOutlinedSvg from \"@ant-design/icons-svg/es/asn/EyeOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar EyeOutlined = function EyeOutlined(props, ref) {\n  return React.createElement(AntdIcon, Object.assign({}, props, {\n    ref: ref,\n    icon: EyeOutlinedSvg\n  }));\n};\n\nEyeOutlined.displayName = 'EyeOutlined';\nexport default React.forwardRef(EyeOutlined);","import React from 'react'\nimport { replace, length } from 'ramda'\nimport { Row, Col, Form, Tooltip } from 'antd'\nimport { ColumnProps } from 'antd/lib/table'\nimport { EyeOutlined, EditOutlined } from '@ant-design/icons'\nimport useTitle from '@/hooks/useTitle'\nimport { useBreadcrumb } from '@/hooks/useApp'\nimport { useReports } from '@/services/report'\nimport { DoctorSelect } from '@/services/pathology'\nimport Select from '@/components/select'\nimport Input from '@/components/input'\nimport { RangePicker } from '@/components/datepicker'\nimport { Page } from '@/components/layout'\nimport Table from '@/components/query-table'\nimport Button from '@/components/button'\nimport history from '@/utils/history'\nimport { getRangeDate } from '@/utils/webHelper'\nimport { REPORT_EDIT, PATHOL_IMAGE, MEDICAL_ORDER } from '@/constants/routes'\nimport { createFormItemLayout, rules } from '@/utils/form'\n\nconst formItemLayout = createFormItemLayout(6)\n\nenum types {\n  ORREQNO = 'ORREQNO',\n  HHISNUM = 'HHISNUM',\n  ORWORKNO = 'ORWORKNO',\n}\n\nexport default function ReportList() {\n  useTitle('清單查詢')\n\n  const setBreadcrumb = useBreadcrumb([{ name: '清單查詢' }])\n\n  const [form] = Form.useForm()\n\n  const { data, refetch } = useReports()\n\n  console.log(data);\n\n  const [type, setType] = React.useState(types.ORREQNO)\n\n  const handleOk = () => {\n    form.validateFields().then(values => {\n      const { date = [], ...rest } = values\n      const [startDate, endDate] = getRangeDate(date)\n\n      refetch({\n        ...rest,\n        startDate,\n        endDate,\n        noType: type,\n      })\n\n      setBreadcrumb([{ name: '清單查詢' }, { name: '查詢結果' }])\n    })\n  }\n\n  const handleToReport = (evt: React.MouseEvent<HTMLElement>) => {\n    history.push(replace(':id', `${evt.currentTarget.dataset.id}`)(REPORT_EDIT))\n  }\n\n  const handleToImageViewer = (evt: React.MouseEvent<HTMLElement>) => {\n    history.push(replace(':id', '')(PATHOL_IMAGE))\n  }\n\n  const handleToMedicalOrder = (evt: React.MouseEvent<HTMLElement>) => {\n    history.push(\n      replace(':id', `${evt.currentTarget.dataset.id}`)(MEDICAL_ORDER)\n    )\n  }\n\n  const handleResetFields = () => form.resetFields()\n\n  const handleTypeChange = (value: any) => {\n    setType(value)\n  }\n\n  const columns: ColumnProps<any>[] = [\n    {\n      title: '編號',\n      dataIndex: 'id',\n      render: (_, __, idx) => idx + 1,\n    },\n    { title: '申請序號', dataIndex: 'serialNo' },\n    { title: '姓名', dataIndex: 'HNAMEC' },\n    { title: '病理號', dataIndex: 'ORWORKNO' },\n    { title: '病歷號', dataIndex: 'HHISNUM' },\n    { title: '病房', dataIndex: 'HNURSTA' },\n    { title: '床號', dataIndex: 'HBED' },\n    { title: '性別', dataIndex: 'HSEX' },\n    { title: '簽收日期', dataIndex: 'ZRSREGORD' },\n    { title: '收費碼', dataIndex: 'createAt' },\n    { title: '科別', dataIndex: 'CSECT' },\n    { title: '狀態', dataIndex: 'ORSTATUS' },\n    {\n      title: '醫囑',\n      dataIndex: 'ORPROCED',\n      render: (v, r) => (\n        <Tooltip title=\"查看醫囑內容\">\n          <EyeOutlined\n            data-id={r.id}\n            className=\"cursor-pointer text-lg\"\n            onClick={handleToMedicalOrder}\n          />\n        </Tooltip>\n      ),\n    },\n    {\n      title: '報告',\n      dataIndex: 'x',\n      render: (v, r) => (\n        <Tooltip title=\"編輯、查看報告內容\">\n          <EditOutlined\n            data-id={r.id}\n            className=\"cursor-pointer text-lg\"\n            onClick={handleToReport}\n          />\n        </Tooltip>\n      ),\n    },\n    {\n      title: '影像',\n      dataIndex: 'createAt',\n      render: (v, r) => (\n        <Tooltip title=\"開啟新視窗查看影像\">\n          <EyeOutlined\n            data-id={r.id}\n            className=\"cursor-pointer text-lg\"\n            onClick={handleToImageViewer}\n          />\n        </Tooltip>\n      ),\n    },\n    // { title: '入賬日期', dataIndex: 'creditDate' },\n    // { title: '入賬時間', dataIndex: 'creditTime' },\n  ]\n\n  return (\n    <Page style={{ height: 'calc(100vh - 203px)' }}>\n      <Row justify=\"center\">\n        <Col md={22} xs={24}>\n          <Form\n            form={form}\n            layout=\"horizontal\"\n            hideRequiredMark={true}\n            labelAlign=\"left\"\n            colon={false}>\n            <Row gutter={12} justify=\"space-between\">\n              <Col md={7} xs={24}>\n                <Form.Item\n                  {...formItemLayout}\n                  label=\"查詢單號\"\n                  name=\"no\"\n                  rules={[rules.required]}>\n                  <Input\n                    addonBefore={\n                      <Select\n                        style={{ width: 100 }}\n                        defaultValue={types.ORREQNO}\n                        onChange={handleTypeChange}>\n                        <Select.Option value={types.ORREQNO}>\n                          申請序號\n                        </Select.Option>\n                        <Select.Option value={types.HHISNUM}>\n                          病理號\n                        </Select.Option>\n                        <Select.Option value={types.ORWORKNO}>\n                          病歷號\n                        </Select.Option>\n                      </Select>\n                    }\n                  />\n                </Form.Item>\n              </Col>\n              <Col md={7} xs={24}>\n                <Form.Item\n                  {...formItemLayout}\n                  label=\"查詢類別\"\n                  name=\"classification\"\n                  initialValue={'rpresult'}\n                  rules={[rules.required]}>\n                  <Select allowClear>\n                    <Select.Option value=\"pathorderview\">醫囑</Select.Option>\n                    <Select.Option value=\"rpresult\">\b報告</Select.Option>\n                  </Select>\n                </Form.Item>\n              </Col>\n              <Col md={7} xs={24}>\n                <Form.Item {...formItemLayout} label=\"簽收日期\" name=\"date\">\n                  <RangePicker className=\"w-full\" />\n                </Form.Item>\n              </Col>\n            </Row>\n            <Row gutter={12} justify=\"space-between\">\n              <Col md={7} xs={24}>\n                <Form.Item {...formItemLayout} label=\"醫師\" name=\"doctor\">\n                  <DoctorSelect allowClear />\n                </Form.Item>\n              </Col>\n              <Col md={7} xs={24}>\n                <Form.Item\n                  {...formItemLayout}\n                  label=\"報告狀態\"\n                  name=\"reportStatus\">\n                  <Select allowClear>\n                    <Select.Option value={1}>未輸入</Select.Option>\n                    <Select.Option value={2}>複審</Select.Option>\n                    <Select.Option value={3}>暫存</Select.Option>\n                    <Select.Option value={4}>不確定</Select.Option>\n                    <Select.Option value={5}>正式</Select.Option>\n                    <Select.Option value={6}>全部</Select.Option>\n                  </Select>\n                </Form.Item>\n              </Col>\n              <Col md={7} xs={24}>\n                <Form.Item>\n                  <Button\n                    color=\"primary\"\n                    style={{ width: 120 }}\n                    className=\"mr-3\"\n                    onClick={handleResetFields}>\n                    重設\n                  </Button>\n                  <Button\n                    color=\"primary\"\n                    style={{ width: 120 }}\n                    onClick={handleOk}>\n                    搜尋\n                  </Button>\n                </Form.Item>\n              </Col>\n            </Row>\n          </Form>\n        </Col>\n      </Row>\n      {length(data.content) > 0 && (\n        <>\n          <Row className=\"mb-2 mt-4\" justify=\"center\">\n            <Col md={22} xs={24} className=\"text-sm\">\n              檢索結果共 <span className=\"text-primary\">{data.total}</span> 筆\n            </Col>\n          </Row>\n          <Row justify=\"center\">\n            <Col md={22} xs={24}>\n              <Table rowKey=\"id\" dataSource={data} columns={columns} />\n            </Col>\n          </Row>\n        </>\n      )}\n    </Page>\n  )\n}\n"],"sourceRoot":""}