{"version":3,"sources":["../node_modules/@ant-design/icons-svg/es/asn/MinusOutlined.js","../node_modules/@ant-design/icons/es/icons/MinusOutlined.js","components/snippet-drag-preview.js","components/snippet-drag-layer.tsx","containers/report-template-editor/report-template-builder.tsx","components/input.tsx","hooks/useReportTemplate.ts","constants/item-types.ts","components/app-footer.tsx","components/layout.tsx","utils/message.tsx","hooks/useTitle.ts","components/snippet-utils.ts","components/modal.tsx","components/select.tsx","hooks/useVisible.ts","components/checkbox.tsx","components/report-template-modal.tsx","components/report-template-wrapper.tsx","utils/form.ts","components/report-template-input-text.tsx","components/input-number.tsx","components/report-template-input-number.tsx","components/editable-table.tsx","components/report-template-selection-modal.tsx","components/report-template-multiple-selection.tsx","components/radio.tsx","components/report-template-single-selection.tsx","components/datepicker.tsx","components/report-template-date.tsx","components/report-template-time.tsx","components/report-template-select.tsx","components/report-template-section-header.tsx","components/report-template-list.tsx","components/snippet-toolbar.tsx","components/snippet.tsx","components/table.tsx","components/collapse.ts","components/withScroll.js","components/snippet-scrollable-container.tsx","components/snippet-preview-modal.tsx","components/tabs.ts","components/draggable-tabs.js","components/snippet-list-menu-item.tsx","components/snippet-list-menu.tsx","components/snippet-block-placeholder.ts","components/snippets-container.tsx"],"names":["MinusOutlined","props","ref","React","AntdIcon","Object","assign","icon","MinusOutlinedSvg","displayName","SnippetDragPreview","Component","layerStyles","position","pointerEvents","zIndex","left","top","width","height","getItemStyles","initialOffset","currentOffset","display","x","y","transform","WebkitTransform","DragLayer","monitor","item","getItem","itemType","getItemType","getInitialSourceClientOffset","getSourceClientOffset","isDragging","element","document","elementFromPoint","canDrop","canMoveSnippet","className","style","ItemTypes","BOARD","SNIPPET","renderItem","compose","require","whiteSpace","ReportTemplateBuilder","useTitle","useBreadcrumb","href","REPORT_TEMPLATE_LIST","name","params","match","useReportTemplate","id","category","snippetList","handleTabChange","handleTabEdit","handleTabMove","handleTabNameChange","handleSnippetUpdate","useState","setTemplateInfo","useReportPreview","isPreview","handlePreview","useHeaderContent","color","onClick","handleInputChange","field","evt","prev","target","value","onCancel","gutter","span","defaultActiveKey","expandIconPosition","expandIcon","isActive","PlusOutlined","Panel","header","key","onChange","type","activeKey","onEdit","moveTabNode","map","TabPane","closable","tab","contentEditable","suppressContentEditableWarning","spellCheck","draggable","onSnippetUpdate","keys","borderLess","css","p","theme","primary","StyledInput","styled","secondary","TextArea","faker","snippetCategoryOfReport","CLINICAL_HISTORY","HIGHT_RISK_REASONS","DATA_OF_PRIOR_SIMILAR_STUDY","IMAGING_PROTOCOL","TUMOR_LOCATION","fakeReportTemplateList","Array","from","length","_","idx","lorem","word","author","findName","status","statusName","createdAt","moment","createdAtStr","format","updatedAt","updatedAtStr","description","setting","mergeAll","path","reportTemplateById","pathOr","fakeSetting","defaultSnippetsOfReport","values","snippetsOfReportState","atomFamily","default","find","propEq","Number","reportTemplateListState","atom","content","total","reportPreviewState","categoryState","head","useReportTemplates","useRecoilState","_snippetList","useEffect","setSnippetList","JSON","stringify","setCategory","handleTabAdd","last","inc","getNumberFromString","Rlast","sort","a","b","handleTabRemove","targetKey","confirm","title","onOk","omit","filter","snippetById","e","action","order","snippetKeys","orderA","indexOf","orderB","newTabName","innerHTML","data","flatten","setIsPreview","useToggleReportPreview","state","useUpdateSnippet","options","onUpdate","defaultValue","setSetting","handleOk","CARD","AppFooter","Footer","background","borderTopLeftRadius","borderTopRightRadius","Page","children","Content","cx","marginTop","marginBottom","okText","cancelText","centered","autoFocusButton","okButtonProps","minWidth","marginRight","cancelButtonProps","modalDefaultProps","DEFAULT_USE_TITLE_OPTIONS","restoreOnUnmount","prevTitleRef","useRef","replace","envStore","appTitle","current","_title","hasClassName","nodes","n","isNil","includes","elem","push","parentNode","unshift","getPlaceHolderIndex","clientOffset","overSnippet","findSnippet","classList","contains","parentElement","snippetIndex","dataset","index","placeholderIndex","isOverSnippet","getDisplayName","StyledModal","ModalComponent","this","error","success","info","StyledSelect","SelectComponent","Option","useVisible","onRequestOpen","visible","setVisible","handleVisible","handleClose","CheckboxGroup","Group","StyledCheckbox","CheckboxComponent","forwardRef","TemplateModal","maskClosable","keyboard","footer","StyledCard","TemplateWrapper","onDelete","titleVisible","bodyVisible","FontColorsOutlined","createFormItemLayout","label","wrapper","labelCol","xs","sm","wrapperCol","thosandSeprartor","formatter","parser","currency","percent","max","RegExp","InputTextModal","useForm","form","validateFields","then","labelAlign","initialValues","Item","valuePropName","StyledInputNumber","attrs","min","ThousandSeprartorInput","CurrencyInput","PercentInput","InputNumberModal","EditableTable","onRowAdd","onRowDelete","triggerChange","changedValue","rowKey","pagination","size","dataSource","onAddRowClick","onDeleteRowClick","editable","uuid","text","selected","freetext","TemplateSelectionModal","columns","render","v","r","noStyle","align","concat","__","undefined","invoker","ReportTemplateMultipleSelection","editModalVisible","handleEditModalVisible","bodyStyle","paddingLeft","mapIndexed","defaultChecked","bordered","placeholder","StyledRadio","darkGrey","RadioComponent","ReportTemplateSingleSelection","StyledDatePicker","StyledTimePicker","DatePickerComponent","InputDateModal","allowClear","picker","InputTimeModal","reportTemplateList","componentType","BoldOutlined","FontSizeOutlined","inputProps","tooltip","multipleLine","autoSize","minRows","NumberOutlined","units","DatabaseOutlined","UnorderedListOutlined","TemplateMultipleSelection","OrderedListOutlined","TemplateSingleSelection","CalendarOutlined","ClockCircleOutlined","ToolbarWrapper","div","SHIFT_TYPES","SnippetToolbar","tabIndex","onShift","handleShift","shift","LeftOutlined","RightOutlined","EditOutlined","DeleteOutlined","withDragSource","DragSource","beginDrag","fromMenu","originalIndex","canDrag","connect","connectDragSource","dragSource","connectDragPreview","dragPreview","Snippet","componentDidMount","getEmptyImage","shiftSnippet","handleRemove","removeSnippet","setState","_onMouseOver","_onMouseOut","wrapperId","styles","mergeRight","tabSize","isFocus","borderRadius","border","outlineColor","purple150","cursor","marginLeft","onMouseOver","onMouseOut","data-index","Children","child","cloneElement","StyledTable","TableComponent","isRowDeletable","isCanEdit","_columns","useMemo","canEdit","placement","locale","emptyText","image","PRESENTED_IMAGE_SIMPLE","Column","StyledCollapse","noop","intBetween","val","Math","floor","createVerticalStrength","_buffer","point","h","w","buffer","defaultHorizontalStrength","defaultVerticalStrength","ScrollableComponent","WrappedComponent","ScrollingComponent","ctx","handleEvent","dragging","attached","attach","updateScrolling","throttle","container","getBoundingClientRect","box","coords","changedTouches","clientX","clientY","getCoords","scaleX","horizontalStrength","scaleY","verticalStrength","frame","startScrolling","trailing","useScroll","_initial","findDOMNode","wrappedInstance","addEventListener","window","body","clearMonitorSubscription","context","dragDropManager","getMonitor","subscribeToStateChange","handleMonitorChange","_remove","removeEventListener","stopScrolling","i","tick","strengthMultiplier","onScrollChange","scrollLeft","scrollTop","scrollWidth","scrollHeight","clientWidth","clientHeight","raf","detach","cancel","defaultProps","contextType","DndContext","hoist","withScroll","vStrength","ReactDndProvider","SnippetPreviewModal","gt","bg","TabNode","connectDropTarget","isOver","draggingItem","withDropTarget","DropTarget","drop","dragKey","hoverKey","dropTarget","WrapTabNode","DraggableTabs","newOrder","slice","forEach","c","dragIndex","hoverIndex","splice","renderTabBar","DefaultTabBar","node","Tabs","rest","endDrag","didDrop","SnippetListMenuItem","SnippetListMenuWrapper","comp","SnippetListMenu","component","handleSnippetDrop","handleSnippetMove","getClientOffset","hover","hoverBoundingRect","hoverMiddleY","bottom","equals","SnippetsContainer","atIndex","handleFindSnippet","snippet","newList","isPlaced","s","droppedItem","nextIndex","insert","handleSnippetRemove","remove","handleSnippetShift","cond","always","lt","T","identity","add","update","isPlaceHold","cardList","withRouter"],"mappings":"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","file":"static/js/10.870e5bb8.chunk.js","sourcesContent":["// This icon file is generated automatically.\nvar MinusOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M872 474H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h720c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z\" } }] }, \"name\": \"minus\", \"theme\": \"outlined\" };\nexport default MinusOutlined;\n","// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport MinusOutlinedSvg from \"@ant-design/icons-svg/es/asn/MinusOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar MinusOutlined = function MinusOutlined(props, ref) {\n  return React.createElement(AntdIcon, Object.assign({}, props, {\n    ref: ref,\n    icon: MinusOutlinedSvg\n  }));\n};\n\nMinusOutlined.displayName = 'MinusOutlined';\nexport default React.forwardRef(MinusOutlined);","import React from 'react'\n// import { envStore } from '@/constants/env'\n\nexport default class SnippetDragPreview extends React.Component {\n  render() {\n    // const dropType = this.props.canDrop ? 'allow' : 'forbid'\n    // const url = `${envStore.publicUrl}/images/icon-drag-${dropType}-drop@2x.png`\n\n    return <div>{/* <img width={160} src={url} alt={url} /> */}</div>\n  }\n}\n","import React from 'react'\nimport { XYCoord, DragLayer } from 'react-dnd'\nimport { Identifier } from 'dnd-core'\nimport ItemTypes from '@/constants/item-types'\nimport SnippetDragPreview from '@/components/snippet-drag-preview'\nimport { canMoveSnippet } from './snippet-utils'\n\nconst layerStyles: React.CSSProperties = {\n  position: 'fixed',\n  pointerEvents: 'none',\n  zIndex: 100,\n  left: 0,\n  top: 0,\n  width: '100%',\n  height: '100%',\n}\n\ninterface DragLayerProps {\n  item?: any\n  itemType?: Identifier | null\n  initialOffset?: XYCoord | null\n  currentOffset?: XYCoord | null\n  isDragging?: boolean\n}\n\nfunction getItemStyles(props: DragLayerProps) {\n  const { initialOffset, currentOffset } = props\n\n  if (!initialOffset || !currentOffset) {\n    return {\n      display: 'none',\n    }\n  }\n\n  const { x, y } = currentOffset\n\n  const transform = `translate(${x}px, ${y}px)`\n  return {\n    transform,\n    WebkitTransform: transform,\n  }\n}\n\nconst SnippetDragLayer: React.FC<DragLayerProps> = props => {\n  const { itemType, isDragging, currentOffset } = props\n\n  function renderItem({ canDrop }: { canDrop: boolean }) {\n    switch (itemType) {\n      case ItemTypes.BOARD:\n      case ItemTypes.SNIPPET:\n        return <SnippetDragPreview canDrop={canDrop} />\n      default:\n        return null\n    }\n  }\n\n  if (!isDragging) {\n    return null\n  }\n\n  if (!currentOffset) {\n    return null\n  }\n\n  const element = document.elementFromPoint(currentOffset.x, currentOffset.y)\n\n  let canDrop = false\n  if (element) {\n    canDrop = canMoveSnippet(element)\n  }\n\n  return (\n    <div className=\"report-template-builder__drag-layer\" style={layerStyles}>\n      <div style={getItemStyles(props)}>{renderItem({ canDrop })}</div>\n    </div>\n  )\n}\n\nexport default DragLayer(monitor => ({\n  item: monitor.getItem(),\n  itemType: monitor.getItemType(),\n  initialOffset: monitor.getInitialSourceClientOffset(),\n  currentOffset: monitor.getSourceClientOffset(),\n  isDragging: monitor.isDragging(),\n}))(SnippetDragLayer)\n","import React from 'react'\nimport { Row, Col } from 'antd'\nimport { PlusOutlined, MinusOutlined } from '@ant-design/icons'\nimport { RouteComponentProps } from 'react-router-dom'\nimport { keys, map } from 'ramda'\nimport { Page } from '@/components/layout'\nimport Button from '@/components/button'\nimport Input from '@/components/input'\nimport useTitle from '@/hooks/useTitle'\nimport { useBreadcrumb, useHeaderContent } from '@/hooks/useApp'\nimport { useReportTemplate, useReportPreview } from '@/hooks/useReportTemplate'\nimport { REPORT_TEMPLATE_LIST } from '@/constants/routes'\nimport Tabs from '@/components/draggable-tabs'\nimport ReactDndProvider from '@/components/snippet-scrollable-container'\nimport SnippetListMenu from '@/components/snippet-list-menu'\nimport SnippetDragLayer from '@/components/snippet-drag-layer'\nimport SnippetsContainer from '@/components/snippets-container'\nimport SnippetPreviewModal from '@/components/snippet-preview-modal'\nimport Collapse from '@/components/collapse'\nconst { compose } = require('ramda')\n\ninterface Props extends RouteComponentProps<{ id: string }> {}\n\nfunction ReportTemplateBuilder(props: Props) {\n  useTitle('結構式報告模版編輯')\n\n  useBreadcrumb([\n    { href: REPORT_TEMPLATE_LIST, name: '結構式報告' },\n    { name: '結構式報告模版編輯' },\n  ])\n\n  const { params } = props.match\n\n  const {\n    category,\n    snippetList,\n    handleTabChange,\n    handleTabEdit,\n    handleTabMove,\n    handleTabNameChange,\n    handleSnippetUpdate,\n  } = useReportTemplate(params.id)\n\n  const [, setTemplateInfo] = React.useState({})\n\n  // React.useEffect(() => {\n  //   console.log(\n  //     JSON.stringify(\n  //       compose(\n  //         mergeAll,\n  //         map((key: string) => ({\n  //           [key]: compose(\n  //             map(omit(['Component'])),\n  //             pathOr([], [key])\n  //           )(snippetList),\n  //         })),\n  //         keys\n  //       )(snippetList)\n  //     )\n  //   )\n  // }, [JSON.stringify(snippetList)]) // eslint-disable-line\n\n  const [isPreview, handlePreview] = useReportPreview()\n\n  const handleSave = () => {}\n\n  useHeaderContent(\n    <div className=\"inline-flex\">\n      <Button\n        color=\"outline\"\n        className=\"bg-transparent text-white border-white\">\n        發佈\n      </Button>\n      <Button\n        color=\"outline\"\n        className=\"ml-6 bg-transparent text-white border-white\"\n        onClick={handleSave}>\n        儲存\n      </Button>\n      <Button\n        color=\"outline\"\n        className=\"ml-6 bg-transparent text-white border-white\"\n        onClick={handlePreview}>\n        預覽\n      </Button>\n    </div>\n  )\n\n  const handleInputChange = (field: string) => (\n    evt: React.ChangeEvent<HTMLInputElement>\n  ) => {\n    setTemplateInfo(prev => ({ ...prev, [field]: evt.target.value }))\n  }\n\n  return (\n    <ReactDndProvider>\n      {isPreview && (\n        <SnippetPreviewModal\n          snippetList={snippetList}\n          onCancel={handlePreview}\n        />\n      )}\n      <SnippetDragLayer />\n      <Page>\n        <Row gutter={48} className=\"pt-2 relative\">\n          <Col span={5}>\n            <Collapse\n              defaultActiveKey={[1, 2]}\n              expandIconPosition=\"right\"\n              className=\"shadow-2xl header-pl-clear\"\n              expandIcon={({ isActive }) =>\n                isActive ? <MinusOutlined /> : <PlusOutlined />\n              }>\n              <Collapse.Panel header=\"模版資訊\" key={1}>\n                <Row className=\"mb-2 text-sm text-darkGrey\">\n                  <Col span={24} className=\"mb-3\">\n                    <div className=\"inline-block\" css={{ width: 60 }}>\n                      名稱:\n                    </div>\n                    <Input\n                      className=\"w-2/3\"\n                      onChange={handleInputChange('name')}\n                    />\n                  </Col>\n                  <Col span={24} className=\"my-3\">\n                    <div className=\"inline-block\" css={{ width: 60 }}>\n                      描述:\n                    </div>\n                    <Input\n                      className=\"w-2/3\"\n                      onChange={handleInputChange('description')}\n                    />\n                  </Col>\n                  <Col span={24} className=\"my-3\">\n                    <div className=\"inline-block\" css={{ width: 60 }}>\n                      創作者:\n                    </div>\n                    <Input\n                      className=\"w-2/3\"\n                      onChange={handleInputChange('author')}\n                    />\n                  </Col>\n                </Row>\n              </Collapse.Panel>\n              <Collapse.Panel header=\"工具列\" key={2}>\n                <Row>\n                  <Col span={24}>\n                    <SnippetListMenu />\n                  </Col>\n                </Row>\n              </Collapse.Panel>\n            </Collapse>\n          </Col>\n          <Tabs\n            type=\"editable-card\"\n            activeKey={category}\n            onChange={handleTabChange}\n            onEdit={handleTabEdit}\n            moveTabNode={handleTabMove}\n            className=\"flex-1\">\n            {compose(\n              map((key: string) => (\n                <Tabs.TabPane\n                  closable\n                  key={key}\n                  tab={\n                    <span\n                      contentEditable\n                      suppressContentEditableWarning\n                      spellCheck={false}\n                      className=\"outline-none\"\n                      css={{ whiteSpace: 'nowrap' }}\n                      onChange={handleTabNameChange(key)}\n                      // onBlur={handleTabNameChange(key)}\n                    >\n                      {key}\n                    </span>\n                  }>\n                  <Col\n                    span={19}\n                    className=\"report-template-builder__main-content\">\n                    <SnippetsContainer\n                      draggable={!isPreview}\n                      snippetList={snippetList[key]}\n                      onSnippetUpdate={handleSnippetUpdate}\n                    />\n                  </Col>\n                </Tabs.TabPane>\n              )),\n              keys\n            )(snippetList)}\n          </Tabs>\n        </Row>\n      </Page>\n    </ReactDndProvider>\n  )\n}\n\nexport default ReportTemplateBuilder\n","import { Input } from 'antd'\nimport styled, { css } from 'styled-components'\n\nconst borderLess = css`\n  &.ant-input-borderless {\n    border: none;\n    border-bottom: 1px solid ${p => p.theme.primary};\n    border-bottom-left-radius: 0;\n    border-bottom-right-radius: 0;\n  }\n\n  &:active:not(.ant-input-borderless) {\n    box-shadow: 0 0 0 1px ${p => p.theme.primary};\n  }\n`\n\nconst StyledInput = styled(Input)`\n  &.ant-input-affix-wrapper .ant-input,\n  &.ant-input {\n    border-color: ${p => p.theme.primary};\n\n    &:hover,\n    &:focus {\n      border-color: ${p => p.theme.secondary};\n    }\n\n    ${borderLess};\n  }\n`\n\nconst Search = styled(Input.Search)`\n  &.ant-input-search {\n    .ant-input {\n      border-color: ${p => p.theme.primary};\n\n      &:hover,\n      &:focus {\n        border-color: ${p => p.theme.secondary};\n      }\n\n      &:focus {\n        box-shadow: 0 0 0 1px ${p => p.theme.primary};\n      }\n    }\n\n    .anticon-search {\n      font-size: 20px;\n      color: ${p => p.theme.primary};\n    }\n  }\n`\n\nconst TextArea = styled(Input.TextArea)`\n  &.ant-input {\n    resize: none;\n    border: 1px solid ${p => p.theme.primary};\n\n    &:hover,\n    &:focus {\n      border-color: ${p => p.theme.secondary};\n    }\n\n    ${borderLess};\n  }\n`\n\nexport { StyledInput as Input, TextArea, Search }\n\nexport default StyledInput\n","import React from 'react'\nimport { atom, atomFamily, useRecoilState } from 'recoil'\nimport {\n  find,\n  mergeAll,\n  map,\n  values,\n  head,\n  keys,\n  path,\n  pathOr,\n  propEq,\n  sort,\n  last as Rlast,\n  omit,\n  inc,\n  filter,\n  flatten,\n  length,\n} from 'ramda'\nimport moment from 'moment'\nimport fakeSetting from '@/mocks/fake-snippet-setting.json'\nimport { reportTemplateById } from '@/components/report-template-list'\nimport { getNumberFromString } from '@/utils/webHelper'\nimport { confirm } from '@/utils/message'\nimport { SnippetProps, ReportTemplateSetting } from '@/constants/types'\nconst { compose } = require('ramda')\nconst faker = require('faker')\n\ntype Snippets = { [key: string]: any[] }\n\n// 模版分類\nconst snippetCategoryOfReport = {\n  CLINICAL_HISTORY: 'Clinical History',\n  HIGHT_RISK_REASONS: 'Hight Risk Reasons',\n  DATA_OF_PRIOR_SIMILAR_STUDY: 'Data of prior similar study',\n  IMAGING_PROTOCOL: 'Imaging Protocal',\n  TUMOR_LOCATION: 'Tumor Location/Size',\n}\n\nconst fakeReportTemplateList = Array.from({ length: 100 }).map((_, idx) => ({\n  id: idx + 1,\n  name: faker.lorem.word(),\n  author: faker.name.findName(),\n  status: 1,\n  statusName: '已發佈',\n  createdAt: moment(),\n  createdAtStr: moment().format('YYYY/MM/DD HH:mm'),\n  updatedAt: moment(),\n  updatedAtStr: moment().format('YYYY/MM/DD HH:mm'),\n  description: faker.lorem.word(),\n  setting: compose(\n    mergeAll,\n    map((key: string) => ({\n      [key]: compose(\n        map((x: any) => ({\n          ...x,\n          Component: path([x.type, 'Component'])(reportTemplateById),\n        })),\n        pathOr([], [key])\n      )(fakeSetting),\n    })),\n    keys\n  )(fakeSetting) as { [key: string]: any[] },\n}))\n\nconst defaultSnippetsOfReport = compose(\n  mergeAll,\n  map((key: string) => ({ [key]: [] })),\n  values\n)(snippetCategoryOfReport)\n\nconst snippetsOfReportState = atomFamily<Snippets, React.Key | undefined>({\n  key: 'reportSnippetsState',\n  default: id =>\n    compose(\n      pathOr(defaultSnippetsOfReport, ['setting']),\n      find(propEq('id', Number(id)))\n    )(fakeReportTemplateList),\n})\n\nconst reportTemplateListState = atom({\n  key: 'reportTemplateListState',\n  default: {\n    content: fakeReportTemplateList,\n    total: 100,\n  },\n})\n\nconst reportPreviewState = atom({\n  key: 'reportPreviewState',\n  default: false,\n})\n\nconst categoryState = atom<string>({\n  key: 'categoryState',\n  default: compose(head, values)(snippetCategoryOfReport),\n})\n\n// 報告模版清單\nexport function useReportTemplates() {\n  return useRecoilState(reportTemplateListState)\n}\n\n// 模版報告資料\nexport function useReportTemplate(id?: React.Key) {\n  const [_snippetList] = useRecoilState(snippetsOfReportState(id))\n\n  React.useEffect(() => {\n    setSnippetList(_snippetList)\n  }, [JSON.stringify(_snippetList)]) // eslint-disable-line\n\n  const [snippetList, setSnippetList] = React.useState<Snippets>(_snippetList)\n\n  const [category, setCategory] = useRecoilState(categoryState)\n\n  const handleSnippetUpdate = (data: any[]) => {\n    setSnippetList(prev => ({ ...prev, [category]: data }))\n  }\n\n  const handleTabChange = (activeKey: string) => {\n    setCategory(activeKey)\n  }\n\n  const handleTabMove = (order: string[]) => {\n    const snippetKeys = keys(snippetList)\n\n    setSnippetList(\n      compose(\n        mergeAll,\n        map((key: string) => ({ [key]: snippetList[key] })),\n        sort((a: string, b: string) => {\n          const orderA = order.indexOf(a)\n          const orderB = order.indexOf(b)\n\n          if (orderA !== -1 && orderB !== -1) {\n            return orderA - orderB\n          }\n          if (orderA !== -1) {\n            return -1\n          }\n          if (orderB !== -1) {\n            return 1\n          }\n\n          const ia = snippetKeys.indexOf(a)\n          const ib = snippetKeys.indexOf(b)\n\n          return ia - ib\n        }),\n        keys\n      )(snippetList)\n    )\n  }\n\n  const handleTabAdd = () => {\n    const last = compose(\n      inc,\n      pathOr(0, []),\n      getNumberFromString,\n      Rlast,\n      sort((a: any, b: any) => a - b),\n      keys\n    )(snippetList)\n\n    setSnippetList(prev => ({ ...prev, [`新標籤頁${last}`]: [] }))\n    setCategory(`新標籤頁${last}`)\n  }\n\n  const handleTabRemove = (targetKey: string) => {\n    confirm({\n      title: '確認要刪除此頁籤嗎？',\n      content: '刪除會連同模版資料一起刪除，確認繼續？',\n      onOk: () => {\n        setSnippetList(prev => omit([targetKey], prev))\n\n        if (category === targetKey) {\n          setCategory(\n            compose(\n              Rlast,\n              filter((key: string) => key !== targetKey),\n              keys\n            )(snippetList)\n          )\n        }\n      },\n    })\n  }\n\n  const handleTabNameChange = (targetKey: string) => (\n    evt: React.FocusEvent<HTMLSpanElement>\n  ) => {\n    const newTabName = evt.target.innerHTML\n\n    setSnippetList(prev =>\n      compose(\n        mergeAll,\n        map((key: string) => ({\n          [key === targetKey ? newTabName : key]: prev[key],\n        })),\n        keys\n      )(prev)\n    )\n    setCategory(newTabName)\n  }\n\n  const handleTabEdit = (\n    e:\n      | string\n      | React.MouseEvent<Element, MouseEvent>\n      | React.KeyboardEvent<Element>,\n    action: 'add' | 'remove'\n  ) => {\n    const handler = action === 'add' ? handleTabAdd : handleTabRemove\n\n    handler(e as string)\n  }\n\n  let snippetById: { [key: string]: SnippetProps } = {}\n\n  return {\n    category,\n    snippetList,\n    setCategory,\n    setSnippetList,\n    handleTabEdit,\n    handleTabChange,\n    handleTabMove,\n    handleTabAdd,\n    handleTabRemove,\n    handleTabNameChange,\n    handleSnippetUpdate,\n    total: compose(length, flatten, values)(snippetList),\n    snippetById: compose(\n      map((x: SnippetProps) => (snippetById[x.id] = x)),\n      flatten,\n      values\n    )(snippetList),\n  }\n}\n\n// 切換編輯/檢視模式\nexport function useReportPreview() {\n  const [isPreview, setIsPreview] = useRecoilState(reportPreviewState)\n\n  return [isPreview, () => setIsPreview(prev => !prev)] as [boolean, () => void]\n}\n\n// 更方便切換編輯/檢視模式\nexport function useToggleReportPreview(state: boolean = false) {\n  const [isPreview, setIsPreview] = useRecoilState(reportPreviewState)\n\n  React.useEffect(() => {\n    setIsPreview(state)\n\n    return () => {\n      setIsPreview(false)\n    }\n  }, [state]) // eslint-disable-line\n\n  return [isPreview, () => setIsPreview(prev => !prev)] as [boolean, () => void]\n}\n\nexport function useUpdateSnippet<T = ReportTemplateSetting>(options: {\n  item: SnippetProps\n  onUpdate: (data: any) => void\n  defaultValue?: any\n}) {\n  const { item, onUpdate, defaultValue = {} } = options\n\n  const [setting, setSetting] = React.useState<T>(\n    pathOr(defaultValue, ['setting'], item) as T\n  )\n\n  const handleOk = (values: T) => {\n    setSetting(values)\n    onUpdate({ ...item, setting: values })\n  }\n\n  return { setting, handleOk }\n}\n","export default {\n  CARD: 'card',\n  BOARD: 'board',\n  SNIPPET: 'snippet',\n}\n","import React from 'react'\nimport { Layout } from 'antd'\n\nexport default function AppFooter() {\n  return (\n    <Layout.Footer\n      className=\"pb-6 text-center text-lg text-gray-600 border-t border-gray-400\"\n      style={{ background: 'rgb(221, 228, 237)' }}>\n      高雄榮總數位病理平台\n    </Layout.Footer>\n  )\n}\n","import React from 'react'\nimport { Layout } from 'antd'\nimport cx from 'classnames'\nimport AppFooter from '@/components/app-footer'\nimport theme from '../theme'\n\ninterface PageProps {\n  children: React.ReactNode\n  style?: React.CSSProperties\n  className?: string\n}\n\nexport function Page({ children, style, className = 'pr-16' }: PageProps) {\n  return (\n    <>\n      <Layout.Content\n        style={{\n          background: `linear-gradient(-90deg,#42c2b8,${theme.primary})`,\n        }}>\n        <div\n          className={cx('pl-8 pt-6 pb-12', className)}\n          style={style}\n          css={{\n            background: 'rgb(221, 228, 237)',\n            borderTopLeftRadius: 32,\n            borderTopRightRadius: 32,\n          }}>\n          {children}\n        </div>\n      </Layout.Content>\n      <AppFooter />\n    </>\n  )\n}\n","import React from 'react'\nimport { Modal } from 'antd'\nimport { ModalProps, ModalFuncProps } from 'antd/lib/modal'\n\nexport const modalDefaultProps = (\n  content?: React.ReactNode,\n  props?: ModalProps\n): ModalFuncProps => ({\n  content: (\n    <div\n      className=\"text-darkGrey font-medium\"\n      css={{ marginTop: 16, marginBottom: 30 }}>\n      {content}\n    </div>\n  ),\n  icon: null,\n  width: 440,\n  okText: '刪除',\n  cancelText: '取消',\n  centered: true,\n  // maskStyle: {\n  //   background: theme.modal.maskDarken,\n  // },\n  autoFocusButton: null,\n  okButtonProps: {\n    className: 'c-btn is--danger',\n    style: { minWidth: 80, marginRight: 24 },\n  },\n  cancelButtonProps: {\n    className: 'c-btn is--outline mr-0 float-right',\n    style: { minWidth: 80 },\n  },\n  ...props,\n})\n\nexport const confirm = ({\n  onOk,\n  onCancel,\n  content = '刪除後將無法還原，確認繼續？',\n  ...props\n}: ModalFuncProps) => {\n  Modal.confirm({\n    ...modalDefaultProps(content),\n    ...props,\n    onOk: () => {\n      if (onOk) {\n        onOk()\n      }\n    },\n    onCancel() {\n      if (onCancel) {\n        onCancel()\n      }\n    },\n  })\n}\n","import React from 'react'\nimport { replace } from 'ramda'\nimport { envStore } from '@/constants/env'\n\nexport interface UseTitleOptions {\n  restoreOnUnmount?: boolean\n}\n\nconst DEFAULT_USE_TITLE_OPTIONS: UseTitleOptions = {\n  restoreOnUnmount: false,\n}\n\nfunction useTitle(\n  title: string,\n  options: UseTitleOptions = DEFAULT_USE_TITLE_OPTIONS\n) {\n  const prevTitleRef = React.useRef(document.title)\n  document.title = replace(/%s/, title)(envStore.appTitle)\n  React.useEffect(() => {\n    if (options && options.restoreOnUnmount) {\n      return () => {\n        document.title = prevTitleRef.current // eslint-disable-line\n      }\n    } else {\n      return\n    }\n  }, []) // eslint-disable-line\n}\n\nexport default typeof document !== 'undefined'\n  ? useTitle\n  : (_title: string) => {}\n","import { includes } from 'ramda'\nimport { XYCoord } from 'react-dnd'\nimport { isNil } from '@/utils/webHelper'\n\n/* prettier-ignore */\nconst REPORT_TEMPLATE_BUILDER_CLASSNAME = 'report-template-builder__main-content'\nconst UI_DRAGGABLE_CLASSNAME = 'ui-draggable'\n\nconst hasClassName = (nodes: Element[], className: string) => {\n  return nodes.find(\n    n => !isNil(n.className) && includes(className)(n.className)\n  )\n}\n\nexport function canMoveSnippet(\n  element: Element | null,\n  className = REPORT_TEMPLATE_BUILDER_CLASSNAME\n) {\n  let elem = element\n\n  const nodes: Element[] = []\n  nodes.push(elem as Element)\n\n  while (elem?.parentNode) {\n    nodes.unshift(elem.parentNode as Element)\n    elem = elem.parentNode as Element\n  }\n\n  if (\n    hasClassName(nodes, 'report-template-builder-contentarea--fixed-layout') ||\n    hasClassName(nodes, 'snippet-drawer-menu')\n  ) {\n    return false\n  }\n  if (\n    hasClassName(nodes, className) ||\n    hasClassName(nodes, UI_DRAGGABLE_CLASSNAME)\n  ) {\n    return true\n  }\n\n  return false\n}\n\nfunction findSnippet(\n  element: HTMLElement,\n  className = UI_DRAGGABLE_CLASSNAME\n): HTMLElement | null {\n  if (element.classList.contains(className)) {\n    return element\n  }\n  return element.parentElement && findSnippet(element.parentElement, className)\n}\n\nexport function getPlaceHolderIndex(clientOffset: XYCoord) {\n  const hoverElement = document.elementFromPoint(clientOffset.x, clientOffset.y)\n\n  // find ui-draggable classname\n  const overSnippet = findSnippet(hoverElement as NonNullable<HTMLElement>)\n\n  const snippetIndex = overSnippet && overSnippet.dataset.index\n  const placeholderIndex = overSnippet ? Number(overSnippet.dataset.index) : -1\n\n  const isOverSnippet = !isNil(snippetIndex)\n\n  return {\n    overSnippet,\n    placeholderIndex,\n    isOverSnippet: isOverSnippet,\n  }\n}\n\nexport default function getDisplayName(Component: any) {\n  return (\n    Component.displayName ||\n    Component.name ||\n    (typeof Component === 'string' && Component.length > 0\n      ? Component\n      : 'Unknown')\n  )\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport { Modal } from 'antd'\nimport { ModalProps } from 'antd/lib/modal'\n\nconst StyledModal = styled(Modal)`\n  animation-duration: 0s !important;\n  transition: none !important;\n\n  .ant-modal-header--border-none {\n    border-bottom: none;\n  }\n\n  .ant-modal-footer {\n    padding-top: 14px;\n    padding-bottom: 14px;\n  }\n`\n\nexport default class ModalComponent extends React.Component<ModalProps, any> {\n  static confirm = Modal.confirm\n  static error = Modal.error\n  static success = Modal.success\n  static info = Modal.info\n\n  render() {\n    return <StyledModal {...this.props}>{this.props.children}</StyledModal>\n  }\n}\n","import React from 'react'\nimport { Select } from 'antd'\nimport { SelectProps } from 'antd/lib/select'\nimport styled from 'styled-components'\n\nconst StyledSelect: any = styled(Select)`\n  &.ant-select {\n    &.ant-select-single:not(.ant-select-customize-input) .ant-select-selector,\n    .ant-select-selection:hover,\n    .ant-select-selection:active,\n    .ant-select-selection:focus {\n      border-color: ${p => p.theme.primary};\n    }\n\n    .ant-select-selection {\n      border-color: ${p => p.theme.secondary};\n    }\n\n    .ant-select-selection:active,\n    .ant-select-selection:focus {\n      box-shadow: none;\n    }\n\n    .ant-select-arrow {\n      color: ${p => p.theme.primary};\n    }\n\n    .ant-select-arrow-icon {\n      position: relative;\n      top: -1px;\n      font-size: 14px;\n    }\n\n    &.ant-select-borderless .ant-select-selector {\n      position: relative;\n      bottom: 1px;\n      border: 0;\n      border-bottom: 1px solid ${p => p.theme.primary} !important;\n      border-bottom-left-radius: 0;\n      border-bottom-right-radius: 0;\n    }\n  }\n\n  &.ant-select.is--outline {\n    > .ant-select-selector {\n      background: transparent;\n      border: 1px solid #fff;\n      color: #fff;\n\n      &:active,\n      &:focus,\n      &:hover {\n        border: 1px solid #fff;\n      }\n    }\n\n    .ant-select-selection-placeholder,\n    .ant-select-arrow {\n      color: #fff;\n    }\n\n    .ant-select-selection-placeholder {\n      opacity: 1;\n      left: 30%;\n    }\n  }\n\n  &.ant-select.is--transparent {\n    &.ant-select-focused > .ant-select-selector {\n      border: 1px solid #666a8f;\n    }\n\n    > .ant-select-selector {\n      background: transparent;\n      border: 1px solid #666a8f;\n      color: #a9b6d8;\n\n      &:active,\n      &:focus,\n      &:hover {\n        border: 1px solid #666a8f;\n      }\n    }\n\n    .ant-select-arrow {\n      color: #a9b6d8;\n    }\n  }\n`\n\nclass SelectComponent<T = any> extends React.Component<SelectProps<T>, any> {\n  public static Option = Select.Option\n\n  public static displayName = 'Select'\n\n  render() {\n    return <StyledSelect {...this.props}>{this.props.children}</StyledSelect>\n  }\n}\n\nexport default SelectComponent\n","import React from 'react'\n\ntype Props = {\n  /**\n   * 開關 Modal 時希望處理的事情\n   */\n  onRequestOpen?: () => any\n}\n\nexport default function useVisible({ onRequestOpen }: Props = {}) {\n  const [visible, setVisible] = React.useState(false)\n\n  const handleVisible: any = (evt: React.MouseEvent<HTMLElement>) => {\n    setVisible(prev => !prev)\n\n    if (onRequestOpen) {\n      onRequestOpen()\n    }\n  }\n\n  const handleClose = () => {\n    setVisible(false)\n  }\n\n  return [visible, handleVisible, handleClose]\n}\n","import React from 'react'\nimport { Checkbox } from 'antd'\nimport { CheckboxProps } from 'antd/lib/checkbox'\nimport styled from 'styled-components'\nimport { RefProps } from '@/constants/types'\n\nconst CheckboxGroup = Checkbox.Group\n\nconst StyledCheckbox = styled(Checkbox)`\n  .ant-checkbox-checked .ant-checkbox-inner {\n    background-color: ${p => p.theme.primary};\n    border-color: ${p => p.theme.primary};\n  }\n\n  &.ant-checkbox-wrapper:hover .ant-checkbox-inner,\n  .ant-checkbox:hover .ant-checkbox-inner,\n  .ant-checkbox-input:focus + .ant-checkbox-inner {\n    border-color: ${p => p.theme.primary};\n  }\n\n  .ant-checkbox-checked .ant-checkbox-inner:after {\n    border: 2px solid #fff;\n    border-top: 0;\n    border-left: 0;\n  }\n\n  .ant-checkbox-inner {\n    border: 1px solid ${p => p.theme.secondary};\n  }\n\n  &.is--normal {\n    font-size: 14px !important;\n    font-weight: normal !important;\n  }\n`\n\ntype Props = RefProps & CheckboxProps\n\nconst CheckboxComponent: React.ElementType<Props> = React.forwardRef<\n  typeof StyledCheckbox,\n  Props\n>(({ ...props }, ref) => <StyledCheckbox forwardRef={ref} {...props} />)\n\nCheckboxComponent.displayName = 'Checkbox'\n\nexport { CheckboxComponent as Checkbox, CheckboxGroup }\n\nexport default CheckboxComponent\n","import React from 'react'\nimport { ModalProps as AntModalProps } from 'antd/lib/modal'\nimport Modal from '@/components/modal'\nimport Button from '@/components/button'\n\nexport interface ModalProps<T = any>\n  extends Omit<AntModalProps, 'onOk' | 'onCancel'> {\n  item?: T\n  onOk?: (data?: any) => void\n  onCancel: () => void\n  children?: React.ReactNode\n}\n\nfunction TemplateModal<T = any>({\n  onCancel,\n  onOk,\n  item,\n  children,\n  ...props\n}: ModalProps<T>) {\n  const handleOk = () => {\n    if (onOk) {\n      onOk()\n    }\n  }\n  return (\n    <Modal\n      visible\n      onCancel={onCancel}\n      width={650}\n      maskClosable={false}\n      keyboard={false}\n      footer={[\n        <Button\n          key=\"btn-cancel\"\n          color=\"outline\"\n          style={{ minWidth: 80, marginRight: 16 }}\n          onClick={onCancel}>\n          取消\n        </Button>,\n        <Button\n          key=\"btn-save\"\n          color=\"primary\"\n          style={{ minWidth: 80 }}\n          onClick={handleOk}>\n          儲存\n        </Button>,\n      ]}\n      {...props}>\n      {children}\n    </Modal>\n  )\n}\n\nexport { TemplateModal as Modal }\n\nexport default TemplateModal\n","import React from 'react'\nimport cx from 'classnames'\nimport { Card } from 'antd'\nimport { CardProps } from 'antd/lib/card'\nimport { FontColorsOutlined } from '@ant-design/icons'\nimport styled from 'styled-components'\nimport { useReportPreview } from '@/hooks/useReportTemplate'\nimport { isNil } from '@/utils/webHelper'\n\nconst StyledCard = styled(Card)`\n  &.ant-card {\n    border-radius: 10px;\n    border: none;\n    cursor: move;\n  }\n\n  .ant-card-head {\n    padding-left: 18px;\n    border-bottom: none;\n    color: ${p => p.theme.primary};\n    font-size: 14px;\n    font-weight: 600;\n  }\n\n  &.ant-card-head--hide .ant-card-head {\n    display: none;\n  }\n\n  &.ant-card-body--hide {\n    .ant-card-head {\n      padding-bottom: 16px;\n      border-bottom: 1px dashed #f0f0f0;\n    }\n\n    .ant-card-body {\n      display: none;\n    }\n  }\n\n  &.is--preview .ant-card-head {\n    min-height: auto;\n  }\n\n  &.is--preview .ant-card-head-title {\n    padding-top: 0;\n  }\n\n  &.is--preview .ant-card-body {\n    padding-top: 12px;\n    padding-bottom: 8px;\n  }\n\n  .ant-card-head-title {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    padding-bottom: 0;\n  }\n\n  .ant-card-body {\n    padding-top: 6px;\n    padding-left: 26px;\n    padding-bottom: 20px;\n  }\n`\n\ninterface Props extends CardProps {\n  titleVisible?: boolean\n  bodyVisible?: boolean\n  onEdit?: () => void\n  onDelete?: () => void\n}\n\nfunction TemplateWrapper({\n  title,\n  children,\n  onDelete,\n  onEdit,\n  titleVisible = false,\n  bodyVisible = true,\n  ...props\n}: Props) {\n  const [isPreview] = useReportPreview()\n\n  return (\n    <StyledCard\n      title={\n        <div className=\"flex items-center\">\n          {!isPreview && <FontColorsOutlined className=\"mr-3\" />}\n          {title || '預設標題 (可點鉛筆圖示可進行編輯)'}\n        </div>\n      }\n      className={cx({\n        'ant-card-head--hide': isNil(title) && !titleVisible,\n        'ant-card-body--hide': !bodyVisible,\n        // 'is--preview': isPreview,\n      })}\n      {...props}>\n      {children}\n    </StyledCard>\n  )\n}\n\nexport default TemplateWrapper\n","import { ReactText } from 'react'\n\nexport const createFormItemLayout = (label: number = 3, wrapper?: number) => ({\n  labelCol: {\n    xs: { span: label },\n    sm: { span: label },\n  },\n  wrapperCol: {\n    xs: { span: wrapper || 24 - label },\n    sm: { span: wrapper || 24 - label },\n  },\n})\n\nexport const thosandSeprartor = {\n  formatter: (value: number | string | undefined) => {\n    if (!value) {\n      return value as string\n    }\n    return `${value}`.replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')\n  },\n  parser: (value: string | undefined) =>\n    (value ? value.replace(/\\$\\s?|(,*)/g, '') : value) as ReactText,\n}\n\nexport const currency = {\n  formatter: (value: number | string | undefined) => {\n    if (!value) {\n      return value as string\n    }\n    return `$ ${value}`.replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')\n  },\n  parser: (value: string | undefined) =>\n    (value ? value.replace(/\\$\\s?|(,*)/g, '') : value) as ReactText,\n}\n\nexport const percent = {\n  // min: 0,\n  max: 100,\n  formatter: (value: number | string | undefined) => {\n    if (!value) {\n      return value as string\n    }\n    return `${value}%`\n  },\n  parser: (value: string | undefined) =>\n    (value ? value.replace('%', '') : value) as ReactText,\n}\n\nexport const rules = {\n  required: { required: true, message: '此欄位必填' },\n  number: {\n    required: false,\n    type: 'number',\n    message: '請填寫數字',\n    transform(value: any) {\n      if (!value) {\n        return value\n      }\n      return Number(value)\n    },\n  },\n  account: {\n    required: true,\n    message: '欄位長度為8~128字元,特殊符號-,_',\n    pattern: new RegExp(/^.{8,128}$/),\n  },\n  password: {\n    required: true,\n    message: '密碼長度為6~128字元',\n    pattern: new RegExp(/^.{6,128}$/),\n  },\n}\n","import React from 'react'\nimport { Form } from 'antd'\nimport { Input, TextArea } from '@/components/input'\nimport Checkbox from '@/components/checkbox'\nimport { Modal, ModalProps } from '@/components/report-template-modal'\nimport TemplateWrapper from '@/components/report-template-wrapper'\nimport { createFormItemLayout } from '@/utils/form'\nimport { ReportTemplateSetting, ReportTemplateProps } from '@/constants/types'\nimport { useUpdateSnippet } from '@/hooks/useReportTemplate'\n\ninterface Setting extends ReportTemplateSetting {\n  defaultValue?: string\n  multipleLine?: boolean\n}\n\nexport default function ReportTemplateInputText(props: ReportTemplateProps) {\n  const { editModalVisible, handleEditModalVisible, onUpdate, item } = props\n\n  const { setting, handleOk } = useUpdateSnippet<Setting>({ item, onUpdate })\n\n  const inputProps = {\n    bordered: false,\n    className: 'w-2/3',\n    placeholder: setting.tooltip || '輸入內容',\n    defaultValue: setting.defaultValue,\n  }\n\n  return (\n    <>\n      {editModalVisible && (\n        <InputTextModal\n          item={setting}\n          onCancel={handleEditModalVisible}\n          onOk={handleOk}\n        />\n      )}\n      <TemplateWrapper title={setting.text || ''}>\n        <Form.Item noStyle name={['data', item.id]}>\n          {setting.multipleLine ? (\n            <TextArea {...inputProps} autoSize={{ minRows: 3 }} />\n          ) : (\n            <Input {...inputProps} />\n          )}\n        </Form.Item>\n      </TemplateWrapper>\n    </>\n  )\n}\n\nfunction InputTextModal({\n  onOk,\n  onCancel,\n  item,\n  ...props\n}: ModalProps<Setting>) {\n  const [form] = Form.useForm()\n\n  const handleOk = () => {\n    form.validateFields().then(values => {\n      if (onOk) {\n        onOk(values)\n      }\n      onCancel()\n    })\n  }\n\n  return (\n    <Modal<Setting>\n      {...props}\n      title={\n        <>\n          <div>\n            Text\n            <div className=\"inline ml-2 text-sm text-gray-600\">\n              typically used for description something.\n            </div>\n          </div>\n        </>\n      }\n      onCancel={onCancel}\n      onOk={handleOk}>\n      <Form\n        {...createFormItemLayout(5, 16)}\n        labelAlign=\"left\"\n        form={form}\n        initialValues={item}>\n        <Form.Item label=\"Text\" name=\"text\">\n          <Input />\n        </Form.Item>\n        <Form.Item label=\"Default Value\" name=\"defaultValue\">\n          <Input />\n        </Form.Item>\n        <Form.Item label=\"Tooltip\" name=\"tooltip\">\n          <Input />\n        </Form.Item>\n        <Form.Item\n          label=\"Multiple Lines\"\n          name=\"multipleLine\"\n          valuePropName=\"checked\">\n          <Checkbox />\n        </Form.Item>\n      </Form>\n    </Modal>\n  )\n}\n","import React from 'react'\nimport { InputNumber } from 'antd'\nimport { InputNumberProps } from 'antd/lib/input-number'\nimport styled from 'styled-components'\nimport { RefProps } from '@/constants/types'\nimport { percent, currency, thosandSeprartor } from '@/utils/form'\n\ntype Props = RefProps & InputNumberProps & { bordered?: boolean }\n\nconst StyledInputNumber = styled(InputNumber).attrs({\n  min: 0 as any, // dont know why error\n})<Props>`\n  &.ant-input-number {\n    border-color: ${p => p.theme.primary};\n\n    ::placeholder {\n      color: red;\n    }\n  }\n\n  &.ant-input-number-focused,\n  &.ant-input-number:focus,\n  &.ant-input-number:hover {\n    border-color: ${p => p.theme.primary};\n  }\n\n  &.ant-input-number-focused:not(.ant-input-number-borderless),\n  &.ant-input-number:focus:not(.ant-input-number-borderless) {\n    box-shadow: 0 0 0 1px ${p => p.theme.primary};\n  }\n\n  &.ant-input-number-borderless,\n  &.ant-input-number-borderless:hover,\n  &.ant-input-number-borderless:focus,\n  &.ant-input-number-borderless-focused,\n  &.ant-input-number-borderless-disabled,\n  &.ant-input-number-borderless[disabled] {\n    border: none;\n    border-bottom: 1px solid ${p => p.theme.primary};\n  }\n`\n\nexport const ThousandSeprartorInput = React.forwardRef<\n  typeof InputNumber,\n  Props\n>(({ ...props }, ref) => (\n  <StyledInputNumber forwardRef={ref} {...props} {...thosandSeprartor} />\n))\n\nexport const CurrencyInput = React.forwardRef<typeof InputNumber, Props>(\n  ({ ...props }, ref) => (\n    <StyledInputNumber forwardRef={ref} {...props} {...currency} />\n  )\n)\n\nexport const PercentInput = React.forwardRef<typeof InputNumber, Props>(\n  ({ ...props }, ref) => (\n    <StyledInputNumber forwardRef={ref} {...props} {...percent} />\n  )\n)\n\nThousandSeprartorInput.displayName = 'ThousandSeprartorInput'\n\nCurrencyInput.displayName = 'CurrencyInput'\n\nPercentInput.displayName = 'PercentInput'\n\nexport { StyledInputNumber as InputNumber }\n\nexport default StyledInputNumber\n","import React from 'react'\nimport { Form } from 'antd'\nimport Input from '@/components/input'\nimport InputNumber from '@/components/input-number'\nimport { Modal, ModalProps } from '@/components/report-template-modal'\nimport TemplateWrapper from '@/components/report-template-wrapper'\nimport { createFormItemLayout } from '@/utils/form'\nimport { ReportTemplateSetting, ReportTemplateProps } from '@/constants/types'\nimport { useUpdateSnippet } from '@/hooks/useReportTemplate'\n\ninterface Setting extends ReportTemplateSetting {\n  defaultValue?: number\n  max?: number\n  min?: number\n  units?: string\n}\n\nexport default function ReportTemplateInputNumber(props: ReportTemplateProps) {\n  const { editModalVisible, handleEditModalVisible, item, onUpdate } = props\n\n  const { setting, handleOk } = useUpdateSnippet<Setting>({ item, onUpdate })\n\n  return (\n    <>\n      {editModalVisible && (\n        <InputNumberModal\n          item={setting}\n          onCancel={handleEditModalVisible}\n          onOk={handleOk}\n        />\n      )}\n      <TemplateWrapper title={setting.text || ''}>\n        <Form.Item noStyle name={['data', item.id]}>\n          <InputNumber\n            style={{ width: '33.333333%' }}\n            className=\"ant-input-number-borderless\"\n            defaultValue={setting.defaultValue}\n            min={setting.min}\n            max={setting.max}\n            formatter={value => `${setting.units || ''} ${value}`}\n            placeholder={setting.tooltip || '輸入數值'}\n          />\n        </Form.Item>\n      </TemplateWrapper>\n    </>\n  )\n}\n\nfunction InputNumberModal({ onOk, onCancel, item, ...props }: ModalProps) {\n  const [form] = Form.useForm()\n\n  const handleOk = () => {\n    form.validateFields().then(values => {\n      if (onOk) {\n        onOk(values)\n      }\n      onCancel()\n    })\n  }\n\n  return (\n    <Modal\n      {...props}\n      title={\n        <>\n          <div>\n            Number\n            <div className=\"inline ml-2 text-sm text-gray-600\">\n              typically used for input number.\n            </div>\n          </div>\n        </>\n      }\n      onOk={handleOk}\n      onCancel={onCancel}>\n      <Form\n        {...createFormItemLayout(5, 16)}\n        labelAlign=\"left\"\n        form={form}\n        initialValues={item}>\n        <Form.Item label=\"Text\" name=\"text\">\n          <Input />\n        </Form.Item>\n        <Form.Item label=\"Default Value\" name=\"defaultValue\">\n          <Input />\n        </Form.Item>\n        <Form.Item label=\"Tooltip\" name=\"tooltip\">\n          <Input />\n        </Form.Item>\n        <Form.Item label=\"Minimum Value\" name=\"min\">\n          <InputNumber />\n        </Form.Item>\n        <Form.Item label=\"Maximum Value\" name=\"max\">\n          <InputNumber />\n        </Form.Item>\n        <Form.Item label=\"Units\" name=\"units\">\n          <Input />\n        </Form.Item>\n      </Form>\n    </Modal>\n  )\n}\n","// tslint:disable: quotemark no-implicit-dependencies no-shadowed-variable no-var-requires\nimport React from 'react'\nimport { TableProps } from 'antd/lib/table'\nimport { FormInstance } from 'antd/lib/form'\nimport Table from '@/components/table'\n\ntype EditableTableProps<T> = Omit<TableProps<T>, 'onChange'> & {\n  value?: T[]\n  form: FormInstance\n  onChange?(changedValue: T[] | null): void\n  onRowAdd: (form: FormInstance) => any\n  onRowDelete: (value: { id: React.Key; form: FormInstance }) => any\n}\n\nexport default function EditableTable<T = any>({\n  form,\n  value,\n  onChange,\n  onRowAdd,\n  onRowDelete,\n  ...props\n}: EditableTableProps<T>) {\n  const triggerChange = (changedValue: T[]) => {\n    if (onChange) {\n      onChange(changedValue)\n    }\n  }\n\n  const handleAdd = () => {\n    triggerChange(onRowAdd(form))\n  }\n\n  const handleDelete = (id: string) => {\n    triggerChange(onRowDelete({ id, form }))\n  }\n\n  return (\n    <Table\n      {...props}\n      rowKey=\"id\"\n      pagination={false}\n      size=\"small\"\n      dataSource={value as any}\n      onAddRowClick={handleAdd}\n      onDeleteRowClick={handleDelete}\n      editable={true}\n    />\n  )\n}\n","import React from 'react'\nimport { Form } from 'antd'\nimport { ColumnProps } from 'antd/lib/table'\nimport { FormInstance } from 'antd/lib/form'\nimport { concat, __, pathOr, invoker, filter } from 'ramda'\nimport Input from '@/components/input'\nimport Checkbox from '@/components/checkbox'\nimport EditableTable from '@/components/editable-table'\nimport { uuid } from '@/utils/webHelper'\nimport { createFormItemLayout } from '@/utils/form'\nimport { ReportTemplateSetting } from '@/constants/types'\nimport { Modal, ModalProps } from './report-template-modal'\nconst { compose } = require('ramda')\n\nexport interface Setting extends ReportTemplateSetting {\n  options?: Option[]\n}\n\nexport type Option = {\n  id: React.Key\n  text?: string\n  selected?: boolean\n  freetext?: boolean\n}\n\nexport const defaultValue: Setting = {\n  options: [\n    {\n      id: uuid(),\n      text: '預設選項 1',\n      selected: true,\n      freetext: false,\n    },\n    {\n      id: uuid(),\n      text: '預設選項 2',\n      selected: true,\n      freetext: false,\n    },\n    {\n      id: uuid(),\n      text: '預設選項 3',\n      selected: true,\n      freetext: false,\n    },\n  ],\n}\n\nexport function TemplateSelectionModal({\n  onCancel,\n  onOk,\n  item,\n  ...props\n}: ModalProps) {\n  const [form] = Form.useForm()\n\n  const handleOk = () => {\n    form.validateFields().then(values => {\n      if (onOk) {\n        onOk(values)\n      }\n      onCancel()\n    })\n  }\n\n  const handleRowAdd = (form: FormInstance) => {\n    return compose(\n      concat(__, [\n        {\n          id: uuid(),\n          text: undefined,\n          selected: true,\n          freetext: false,\n        },\n      ]),\n      pathOr([], ['options']),\n      invoker(0, 'getFieldsValue')()\n    )(form)\n  }\n\n  const handleRowDelete = ({\n    id,\n    form,\n  }: {\n    id: React.Key\n    form: FormInstance\n  }) => {\n    return compose(\n      filter((x: any) => x.id !== id),\n      pathOr([], ['options']),\n      invoker(0, 'getFieldsValue')()\n    )(form)\n  }\n\n  const columns: ColumnProps<Option>[] = [\n    {\n      title: '選項名稱',\n      render: (v, r, idx) => (\n        <Form.Item noStyle name={['options', idx, 'text']}>\n          <Input />\n        </Form.Item>\n      ),\n    },\n    {\n      title: '是否可選',\n      align: 'center',\n      render: (v, r, idx) => (\n        <Form.Item\n          noStyle\n          name={['options', idx, 'selected']}\n          valuePropName=\"checked\">\n          <Checkbox />\n        </Form.Item>\n      ),\n    },\n    {\n      title: '是否可輸入',\n      align: 'center',\n      render: (v, r, idx) => (\n        <Form.Item\n          noStyle\n          name={['options', idx, 'freetext']}\n          valuePropName=\"checked\">\n          <Checkbox />\n        </Form.Item>\n      ),\n    },\n  ]\n\n  return (\n    <Modal\n      {...props}\n      title={\n        <>\n          <div>Single Selection List</div>\n          <div className=\"mt-1 text-sm text-gray-600\">\n            Typically used for shorter lists so that all responses are visible\n            as radio buttons. Only allow a single selection.\n          </div>\n        </>\n      }\n      onCancel={onCancel}\n      onOk={handleOk}>\n      <Form\n        {...createFormItemLayout(3, 16)}\n        labelAlign=\"left\"\n        form={form}\n        initialValues={item}>\n        <Form.Item label=\"Text\" name=\"text\">\n          <Input />\n        </Form.Item>\n        <Form.Item label=\"Tooltip\" name=\"tooltip\">\n          <Input />\n        </Form.Item>\n        <Form.Item label=\"Options\" />\n        <Form.Item noStyle name=\"options\">\n          <EditableTable\n            columns={columns}\n            form={form}\n            onRowAdd={handleRowAdd}\n            onRowDelete={handleRowDelete}\n          />\n        </Form.Item>\n      </Form>\n    </Modal>\n  )\n}\n","import React from 'react'\nimport { Form } from 'antd'\nimport cx from 'classnames'\nimport { pathOr } from 'ramda'\nimport { Checkbox, CheckboxGroup } from '@/components/checkbox'\nimport Input from '@/components/input'\nimport TemplateWrapper from '@/components/report-template-wrapper'\nimport {\n  TemplateSelectionModal,\n  Setting,\n  Option,\n  defaultValue,\n} from '@/components/report-template-selection-modal'\nimport { mapIndexed } from '@/utils/webHelper'\nimport { ReportTemplateProps } from '@/constants/types'\nimport { useUpdateSnippet } from '@/hooks/useReportTemplate'\nconst { compose } = require('ramda')\n\nfunction ReportTemplateMultipleSelection(props: ReportTemplateProps) {\n  const { item, editModalVisible, handleEditModalVisible, onUpdate } = props\n\n  const { setting, handleOk } = useUpdateSnippet<Setting>({\n    item,\n    onUpdate,\n    defaultValue,\n  })\n\n  return (\n    <>\n      {editModalVisible && (\n        <TemplateSelectionModal\n          item={setting}\n          onCancel={handleEditModalVisible}\n          onOk={handleOk}\n          title={\n            <>\n              <div>Multiple Selection List</div>\n              <div className=\"mt-1 text-sm text-gray-600\">\n                typically used for shorter lists so that all responses are\n                visible as checkboxes. Allows Multiple selections.\n              </div>\n            </>\n          }\n        />\n      )}\n      <TemplateWrapper\n        title={setting.text || ''}\n        bodyStyle={{ paddingLeft: 36 }}>\n        <Form.Item noStyle name={['data', item.id]}>\n          <CheckboxGroup>\n            {compose(\n              mapIndexed((x: Option, idx: number) => (\n                <Checkbox\n                  key={x.id}\n                  className={cx('block ml-0', { 'mt-1': idx > 0 })}\n                  defaultChecked={false}\n                  value={`${idx}`}>\n                  {x.text}\n                  {x.freetext && (\n                    <Input\n                      bordered={false}\n                      size=\"small\"\n                      placeholder=\"輸入備註\"\n                      className=\"ml-4 w-1/3\"\n                    />\n                  )}\n                </Checkbox>\n              )),\n              pathOr([], ['options'])\n            )(setting)}\n          </CheckboxGroup>\n        </Form.Item>\n      </TemplateWrapper>\n    </>\n  )\n}\n\nexport default ReportTemplateMultipleSelection\n","import React from 'react'\nimport { Radio } from 'antd'\nimport { RadioProps } from 'antd/lib/radio'\nimport styled from 'styled-components'\n\nconst StyledRadio = styled(Radio)`\n  &.ant-radio-wrapper {\n    color: ${p => p.theme.darkGrey};\n\n    span.ant-radio + * {\n      padding-left: 16px;\n    }\n\n    .ant-radio-inner,\n    .ant-radio-checked .ant-radio-inner {\n      border-color: ${p => p.theme.primary};\n    }\n\n    .ant-radio-inner::after {\n      background: ${p => p.theme.primary};\n    }\n\n    &:hover,\n    .ant-radio:hover .ant-radio-inner,\n    .ant-radio-input:focus + .ant-radio-inner {\n      border-color: ${p => p.theme.primary};\n    }\n  }\n`\n\ninterface Props extends RadioProps {\n  css?: React.CSSProperties\n}\n\nclass RadioComponent extends React.Component<Props, any> {\n  public static Group = Radio.Group\n\n  public static displayName = 'Radio'\n\n  public render() {\n    return <StyledRadio {...this.props} />\n  }\n}\n\nexport default RadioComponent\n","import React from 'react'\nimport cx from 'classnames'\nimport { Form } from 'antd'\nimport { pathOr } from 'ramda'\nimport Radio from '@/components/radio'\nimport Input from '@/components/input'\nimport TemplateWrapper from '@/components/report-template-wrapper'\nimport {\n  TemplateSelectionModal,\n  Setting,\n  Option,\n  defaultValue,\n} from '@/components/report-template-selection-modal'\nimport { mapIndexed } from '@/utils/webHelper'\nimport { ReportTemplateProps } from '@/constants/types'\nimport { useUpdateSnippet } from '@/hooks/useReportTemplate'\nconst { compose } = require('ramda')\n\nfunction ReportTemplateSingleSelection(props: ReportTemplateProps) {\n  const { item, editModalVisible, handleEditModalVisible, onUpdate } = props\n\n  const { setting, handleOk } = useUpdateSnippet<Setting>({\n    item,\n    onUpdate,\n    defaultValue,\n  })\n\n  return (\n    <>\n      {editModalVisible && (\n        <TemplateSelectionModal\n          item={setting}\n          onCancel={handleEditModalVisible}\n          onOk={handleOk}\n        />\n      )}\n      <TemplateWrapper\n        title={setting.text || ''}\n        bodyStyle={{ paddingLeft: 36 }}>\n        <Form.Item noStyle name={['data', item.id]}>\n          <Radio.Group>\n            {compose(\n              mapIndexed((x: Option, idx: number) => (\n                <Radio\n                  key={x.id}\n                  className={cx('block', { 'mt-1': idx > 0 })}\n                  defaultChecked={false}\n                  value={`${idx}`}>\n                  {x.text}\n                  {x.freetext && (\n                    <Input\n                      size=\"small\"\n                      bordered={false}\n                      placeholder=\"輸入備註\"\n                      className=\"ml-3 w-1/3\"\n                    />\n                  )}\n                </Radio>\n              )),\n              pathOr([], ['options'])\n            )(setting)}\n          </Radio.Group>\n        </Form.Item>\n      </TemplateWrapper>\n    </>\n  )\n}\n\nexport default ReportTemplateSingleSelection\n","import React from 'react'\nimport styled, { css } from 'styled-components'\nimport { DatePicker, TimePicker } from 'antd'\nimport { DatePickerProps } from 'antd/lib/date-picker'\n\nconst borderLess = css`\n  &.ant-picker-borderless {\n    border: none;\n    border-bottom: 1px solid ${p => p.theme.primary} !important;\n    border-bottom-left-radius: 0;\n    border-bottom-right-radius: 0;\n  }\n\n  &.ant-picker-focused:not(.ant-picker-borderless) {\n    box-shadow: 0 0 0 1px ${p => p.theme.primary};\n  }\n`\n\nconst RangePicker = styled(DatePicker.RangePicker)`\n  &.ant-picker {\n    border: 1px solid ${p => p.theme.primary};\n\n    &:hover,\n    &:focus {\n      border-color: ${p => p.theme.secondary};\n    }\n\n    &.ant-picker-focused {\n      box-shadow: 0 0 0 1px ${p => p.theme.primary};\n    }\n  }\n`\n\nconst StyledDatePicker: any = styled(DatePicker)`\n  &.ant-picker {\n    border: 1px solid ${p => p.theme.primary};\n\n    &:hover,\n    &:focus {\n      border-color: ${p => p.theme.secondary};\n    }\n\n    .ant-picker-suffix {\n      color: ${p => p.theme.primary};\n    }\n\n    ${borderLess};\n  }\n`\n\nconst StyledTimePicker = styled(TimePicker)`\n  &.ant-picker {\n    border: 1px solid ${p => p.theme.primary};\n\n    &:hover,\n    &:focus {\n      border-color: ${p => p.theme.secondary};\n    }\n\n    .ant-picker-suffix {\n      color: ${p => p.theme.primary};\n    }\n\n    ${borderLess};\n  }\n`\n\nfunction DatePickerComponent(props: DatePickerProps) {\n  return <StyledDatePicker {...props} />\n}\n\nexport {\n  DatePickerComponent as DatePicker,\n  RangePicker,\n  StyledTimePicker as TimePicker,\n}\n\nexport default DatePickerComponent\n","import React from 'react'\nimport { Form } from 'antd'\nimport Input from '@/components/input'\nimport DatePicker from '@/components/datepicker'\nimport { Modal, ModalProps } from '@/components/report-template-modal'\nimport TemplateWrapper from '@/components/report-template-wrapper'\nimport { createFormItemLayout } from '@/utils/form'\nimport { ReportTemplateProps } from '@/constants/types'\nimport { useUpdateSnippet } from '@/hooks/useReportTemplate'\n\ntype Setting = {\n  text?: string\n  defaultValue?: moment.Moment\n  tooltip?: string\n}\n\nexport default function ReportTemplateDate(props: ReportTemplateProps) {\n  const { editModalVisible, handleEditModalVisible, item, onUpdate } = props\n\n  const { setting, handleOk } = useUpdateSnippet<Setting>({ item, onUpdate })\n\n  return (\n    <>\n      {editModalVisible && (\n        <InputDateModal\n          item={setting}\n          onCancel={handleEditModalVisible}\n          onOk={handleOk}\n        />\n      )}\n      <TemplateWrapper title={setting.text || ''}>\n        <Form.Item noStyle name={['data', item.id]}>\n          <DatePicker\n            bordered={false}\n            className=\"w-1/3\"\n            placeholder={setting.tooltip || '選擇日期'}\n            defaultValue={setting.defaultValue}\n          />\n        </Form.Item>\n      </TemplateWrapper>\n    </>\n  )\n}\n\nfunction InputDateModal({\n  onOk,\n  onCancel,\n  item,\n  ...props\n}: ModalProps<Setting>) {\n  const [form] = Form.useForm()\n\n  const handleOk = () => {\n    form.validateFields().then(values => {\n      if (onOk) {\n        onOk(values)\n      }\n      onCancel()\n    })\n  }\n\n  return (\n    <Modal<Setting>\n      {...props}\n      title={\n        <>\n          <div>\n            Date\n            <div className=\"inline ml-2 text-sm text-gray-600\">\n              typically used for target date.\n            </div>\n          </div>\n        </>\n      }\n      onCancel={onCancel}\n      onOk={handleOk}>\n      <Form\n        {...createFormItemLayout(5, 16)}\n        labelAlign=\"left\"\n        form={form}\n        initialValues={item}>\n        <Form.Item label=\"Text\" name=\"text\">\n          <Input />\n        </Form.Item>\n        <Form.Item label=\"Default Value\" name=\"defaultValue\">\n          <DatePicker allowClear picker=\"date\" className=\"w-full\" />\n        </Form.Item>\n        <Form.Item label=\"Tooltip\" name=\"tooltip\">\n          <Input />\n        </Form.Item>\n      </Form>\n    </Modal>\n  )\n}\n","import React from 'react'\nimport { Form } from 'antd'\nimport Input from '@/components/input'\nimport { TimePicker } from '@/components/datepicker'\nimport { Modal, ModalProps } from '@/components/report-template-modal'\nimport TemplateWrapper from '@/components/report-template-wrapper'\nimport { createFormItemLayout } from '@/utils/form'\nimport { ReportTemplateSetting, ReportTemplateProps } from '@/constants/types'\nimport { useUpdateSnippet } from '@/hooks/useReportTemplate'\n\ninterface Setting extends ReportTemplateSetting {\n  defaultValue?: moment.Moment\n}\n\nexport default function ReportTemplateTime(props: ReportTemplateProps) {\n  const { editModalVisible, handleEditModalVisible, item, onUpdate } = props\n\n  const { setting, handleOk } = useUpdateSnippet<Setting>({ item, onUpdate })\n\n  return (\n    <>\n      {editModalVisible && (\n        <InputTimeModal\n          item={setting}\n          onCancel={handleEditModalVisible}\n          onOk={handleOk}\n        />\n      )}\n      <TemplateWrapper title={setting.text || ''}>\n        <Form.Item noStyle name={['data', item.id]}>\n          <TimePicker\n            bordered={false}\n            className=\"w-1/3\"\n            placeholder={setting.tooltip || '選擇時間'}\n            defaultValue={setting.defaultValue}\n          />\n        </Form.Item>\n      </TemplateWrapper>\n    </>\n  )\n}\n\nfunction InputTimeModal({\n  onOk,\n  onCancel,\n  item,\n  ...props\n}: ModalProps<Setting>) {\n  const [form] = Form.useForm()\n\n  const handleOk = () => {\n    form.validateFields().then(values => {\n      if (onOk) {\n        onOk(values)\n      }\n      onCancel()\n    })\n  }\n\n  return (\n    <Modal<Setting>\n      {...props}\n      title={\n        <>\n          <div>\n            Time\n            <div className=\"inline ml-2 text-sm text-gray-600\">\n              typically used for target time.\n            </div>\n          </div>\n        </>\n      }\n      onCancel={onCancel}\n      onOk={handleOk}>\n      <Form\n        {...createFormItemLayout(5, 16)}\n        labelAlign=\"left\"\n        form={form}\n        initialValues={item}>\n        <Form.Item label=\"Text\" name=\"text\">\n          <Input />\n        </Form.Item>\n        <Form.Item label=\"Default Value\" name=\"defaultValue\">\n          <TimePicker allowClear format=\"HH:mm\" className=\"w-full\" />\n        </Form.Item>\n        <Form.Item label=\"Tooltip\" name=\"tooltip\">\n          <Input />\n        </Form.Item>\n      </Form>\n    </Modal>\n  )\n}\n","import React from 'react'\nimport { pathOr, map } from 'ramda'\nimport { Form } from 'antd'\nimport Select from '@/components/select'\nimport TemplateWrapper from '@/components/report-template-wrapper'\nimport {\n  TemplateSelectionModal,\n  Option,\n  defaultValue,\n} from '@/components/report-template-selection-modal'\nimport { ReportTemplateSetting, ReportTemplateProps } from '@/constants/types'\nimport { useUpdateSnippet } from '@/hooks/useReportTemplate'\nconst { compose } = require('ramda')\n\ninterface Setting extends ReportTemplateSetting {\n  options?: Option[]\n  selectionType?: 'single' | 'multiple'\n}\n\nexport default function ReportTemplateSelect(props: ReportTemplateProps) {\n  const { item, editModalVisible, handleEditModalVisible, onUpdate } = props\n\n  const { setting, handleOk } = useUpdateSnippet<Setting>({\n    item,\n    onUpdate,\n    defaultValue,\n  })\n\n  return (\n    <>\n      {editModalVisible && (\n        <TemplateSelectionModal\n          item={setting}\n          onCancel={handleEditModalVisible}\n          onOk={handleOk}\n          title={\n            <>\n              <div>Drop-down List</div>\n              <div className=\"mt-1 text-sm text-gray-600\">\n                typically used for lists of greater than 6 or 7 options.\n              </div>\n            </>\n          }\n        />\n      )}\n      <TemplateWrapper title={setting.text || ''}>\n        <Form.Item noStyle name={['data', item.id]}>\n          <Select\n            allowClear\n            bordered={false}\n            className=\"w-1/3\"\n            placeholder={setting.tooltip || '請選擇...'}>\n            {compose(\n              map((x: Option) => (\n                <Select.Option key={x.id} value={x.text as any}>\n                  {x.text}\n                </Select.Option>\n              )),\n              pathOr([], ['options'])\n            )(setting)}\n          </Select>\n        </Form.Item>\n      </TemplateWrapper>\n    </>\n  )\n}\n","import React from 'react'\nimport { Form } from 'antd'\nimport Input from '@/components/input'\nimport { Modal, ModalProps } from '@/components/report-template-modal'\nimport TemplateWrapper from '@/components/report-template-wrapper'\nimport useVisible from '@/hooks/useVisible'\nimport { createFormItemLayout } from '@/utils/form'\nimport { ReportTemplateSetting } from '@/constants/types'\n\ntype Props = {}\n\ninterface Setting extends ReportTemplateSetting {}\n\nexport default function TemplateSectionHeader(props: Props) {\n  const [setting, setSetting] = React.useState<Setting>({})\n\n  const [editModalVisible, handleEditModalVisible] = useVisible()\n\n  const handleOk = (values: Setting) => {\n    setSetting(values)\n  }\n\n  return (\n    <>\n      {editModalVisible && (\n        <InputTextModal\n          item={setting}\n          onCancel={handleEditModalVisible}\n          onOk={handleOk}\n        />\n      )}\n      <TemplateWrapper\n        titleVisible\n        bodyVisible={false}\n        title={setting.text}\n        onEdit={handleEditModalVisible}></TemplateWrapper>\n    </>\n  )\n}\n\nfunction InputTextModal({\n  onOk,\n  onCancel,\n  item,\n  ...props\n}: ModalProps<Setting>) {\n  const [form] = Form.useForm()\n\n  const handleOk = () => {\n    form.validateFields().then(values => {\n      if (onOk) {\n        onOk(values)\n      }\n      onCancel()\n    })\n  }\n\n  return (\n    <Modal<Setting>\n      {...props}\n      title={\n        <>\n          <div>\n            Section Header\n            <div className=\"inline ml-2 text-sm text-gray-600\">\n              typically used for section.\n            </div>\n          </div>\n        </>\n      }\n      onCancel={onCancel}\n      onOk={handleOk}>\n      <Form\n        {...createFormItemLayout(5, 16)}\n        labelAlign=\"left\"\n        form={form}\n        initialValues={item}>\n        <Form.Item label=\"Text\" name=\"text\">\n          <Input />\n        </Form.Item>\n        <Form.Item label=\"Tooltip\" name=\"tooltip\">\n          <Input />\n        </Form.Item>\n      </Form>\n    </Modal>\n  )\n}\n","import { map, mergeAll } from 'ramda'\nimport {\n  CalendarOutlined,\n  ClockCircleOutlined,\n  OrderedListOutlined,\n  UnorderedListOutlined,\n  FontSizeOutlined,\n  DatabaseOutlined,\n  NumberOutlined,\n  BoldOutlined,\n} from '@ant-design/icons'\nimport { uuid } from '@/utils/webHelper'\nimport TemplateInputText from '@/components/report-template-input-text'\nimport TemplateInputNumber from '@/components/report-template-input-number'\nimport TemplateMultipleSelection from '@/components/report-template-multiple-selection'\nimport TemplateSingleSelection from '@/components/report-template-single-selection'\nimport TemplateDate from '@/components/report-template-date'\nimport TemplateTime from '@/components/report-template-time'\nimport TemplateSelect from '@/components/report-template-select'\nimport TempldateSectionHeader from '@/components/report-template-section-header'\nconst { compose } = require('ramda')\n\ninterface ReportTemplateListItem {\n  id: React.Key\n  type: string\n  name: string\n  Component: React.Component\n}\n\nconst reportTemplateList = [\n  {\n    id: uuid(),\n    componentType: 'header',\n    name: 'Section Header',\n    icon: BoldOutlined,\n    Component: TempldateSectionHeader,\n  },\n  {\n    id: uuid(),\n    type: 'TemplateInputText',\n    name: 'Text',\n    icon: FontSizeOutlined,\n    Component: TemplateInputText,\n  },\n  {\n    id: uuid(),\n    type: 'TemplateInputNumber',\n    name: 'Number',\n    icon: NumberOutlined,\n    Component: TemplateInputNumber,\n  },\n  {\n    id: uuid(),\n    type: 'TemplateSelect',\n    name: 'Drop-down List',\n    icon: DatabaseOutlined,\n    Component: TemplateSelect,\n  },\n  {\n    id: uuid(),\n    type: 'TemplateMultipleSelection',\n    name: 'Multiple Selection List',\n    icon: UnorderedListOutlined,\n    Component: TemplateMultipleSelection,\n  },\n  {\n    id: uuid(),\n    type: 'TemplateSingleSelection',\n    name: 'Single Selection List',\n    icon: OrderedListOutlined,\n    Component: TemplateSingleSelection,\n  },\n  {\n    id: uuid(),\n    type: 'TemplateDate',\n    name: 'Date',\n    icon: CalendarOutlined,\n    Component: TemplateDate,\n  },\n  {\n    id: uuid(),\n    type: 'TemplateTime',\n    name: 'Time',\n    icon: ClockCircleOutlined,\n    Component: TemplateTime,\n  },\n]\n\nexport const reportTemplateById = compose(\n  mergeAll,\n  map((x: ReportTemplateListItem) => ({ [x.type]: x }))\n)(reportTemplateList)\n\nexport default reportTemplateList\n","import React from 'react'\nimport styled from 'styled-components'\nimport {\n  EditOutlined,\n  DeleteOutlined,\n  RightOutlined,\n  LeftOutlined,\n} from '@ant-design/icons'\nimport cx from 'classnames'\nimport { Tooltip } from 'antd'\n\ntype Props = {\n  tabIndex: number\n  onEdit: () => void\n  onDelete: () => void\n  onShift: (shift: number) => void\n}\n\nconst ToolbarWrapper = styled.div`\n  position: absolute;\n  top: 8px;\n  right: 15px;\n  visibility: hidden;\n  transition: visibility 0s, opacity 0.3s, max-height 0.6s linear;\n  opacity: 0;\n  z-index: 1;\n\n  &.is--over {\n    visibility: visible;\n    transition: visibility 0s, opacity 0.3s, max-height 0.6s linear;\n    opacity: 0.8;\n  }\n`\n\nexport const SHIFT_TYPES = {\n  LEFT: -1,\n  RIGHT: 1,\n}\n\nexport default function SnippetToolbar({\n  tabIndex,\n  onEdit,\n  onDelete,\n  onShift,\n}: Props) {\n  const handleShift = (shift: number) => () => {\n    onShift(shift)\n  }\n\n  return (\n    <ToolbarWrapper\n      className={cx('text-primary', { 'is--over': tabIndex === 1 })}>\n      <Tooltip title=\"向左縮排\">\n        <LeftOutlined\n          className=\"mr-2 cursor-pointer\"\n          onClick={handleShift(SHIFT_TYPES.LEFT)}\n        />\n      </Tooltip>\n      <Tooltip title=\"向右縮排\">\n        <RightOutlined\n          className=\"mr-2 cursor-pointer\"\n          onClick={handleShift(SHIFT_TYPES.RIGHT)}\n        />\n      </Tooltip>\n      <Tooltip title=\"編輯\">\n        <EditOutlined className=\"mr-2 cursor-pointer\" onClick={onEdit} />\n      </Tooltip>\n      <Tooltip title=\"刪除\">\n        <DeleteOutlined className=\"cursor-pointer\" onClick={onDelete} />\n      </Tooltip>\n    </ToolbarWrapper>\n  )\n}\n\nexport { SnippetToolbar }\n","import React from 'react'\nimport { DragSource, ConnectDragPreview, ConnectDragSource } from 'react-dnd'\nimport { getEmptyImage } from 'react-dnd-html5-backend'\nimport { mergeRight } from 'ramda'\nimport cx from 'classnames'\nimport { confirm } from '@/utils/message'\nimport { SnippetProps } from '@/constants/types'\nimport ItemTypes from '@/constants/item-types'\nimport SnippetToolbar from './snippet-toolbar'\nimport theme from '../theme'\n\ntype Props = {\n  id?: React.Key\n  wrapperId?: string\n  className?: string\n  style?: React.CSSProperties\n  index?: number\n  tabSize?: number\n  isDragging?: boolean\n  draggable?: boolean\n  fromMenu?: boolean\n  connectDragPreview: ConnectDragPreview\n  connectDragSource: ConnectDragSource\n  children?: React.ReactNode\n  findSnippet?(id: React.Key): { index: number; snippet: SnippetProps }\n  shiftSnippet?(id: React.Key, shift: number): any\n  removeSnippet?(index: number): void\n}\n\ntype State = {\n  top: number\n  tabIndex: number\n  editModalVisible: boolean\n}\n\nconst withDragSource = DragSource(\n  ItemTypes.BOARD,\n  {\n    beginDrag(props: Props) {\n      return {\n        ...props,\n        fromMenu: false,\n        originalIndex: (props as any).findSnippet(props.id).index,\n      }\n    },\n    canDrag(props: Props) {\n      return !!(props.draggable && !props.fromMenu)\n    },\n  },\n  (connect, monitor) => ({\n    connectDragSource: connect.dragSource(),\n    connectDragPreview: connect.dragPreview(),\n    isDragging: monitor.isDragging(),\n  })\n)\n\nclass Snippet extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props)\n\n    this.state = {\n      top: 0,\n      tabIndex: -1,\n      editModalVisible: false,\n    }\n  }\n\n  componentDidMount = () => {\n    const { connectDragPreview } = this.props\n    if (connectDragPreview) {\n      connectDragPreview(getEmptyImage() /* { anchorX: 0.2, anchorY: 0.1 } */)\n    }\n  }\n\n  handleShift = (shift: number) => {\n    const { id, shiftSnippet } = this.props\n\n    if (shiftSnippet && id) {\n      shiftSnippet(id, shift)\n    }\n  }\n\n  handleRemove = () => {\n    confirm({\n      content: '刪除後將無法還原，確認繼續？',\n      title: '確認要刪除這個模版?',\n      onOk: () => {\n        ;(this.props as any).removeSnippet(this.props.index)\n      },\n      onCancel() {},\n    })\n  }\n\n  handleEditModalVisible = () => {\n    this.setState(prev => ({ editModalVisible: !prev.editModalVisible }))\n  }\n\n  _onMouseOver = () => {\n    this.setState({ tabIndex: 1 })\n  }\n\n  _onMouseOut = () => {\n    this.setState({ tabIndex: -1 })\n  }\n\n  render() {\n    const {\n      props: {\n        connectDragSource,\n        connectDragPreview,\n        wrapperId,\n        index,\n        draggable,\n        style = {},\n        className = 'mb-3',\n      },\n      state: { tabIndex, editModalVisible },\n    } = this\n\n    const styles = mergeRight(\n      getItemStyles({ ...this.props, ...this.state }),\n      style\n    )\n\n    return connectDragSource(\n      connectDragPreview(\n        <div\n          id={wrapperId}\n          style={styles}\n          className={cx(\n            'ui-sortable',\n            { 'ui-draggable': draggable },\n            className\n          )}\n          tabIndex={tabIndex}\n          onMouseOver={this._onMouseOver}\n          onMouseOut={this._onMouseOut}\n          data-index={index}>\n          {draggable && (\n            <SnippetToolbar\n              tabIndex={tabIndex}\n              onEdit={this.handleEditModalVisible}\n              onDelete={this.handleRemove}\n              onShift={this.handleShift}\n            />\n          )}\n          {React.Children.map(this.props.children, child =>\n            React.cloneElement(child as any, {\n              editModalVisible,\n              handleEditModalVisible: this.handleEditModalVisible,\n            })\n          )}\n        </div>\n      )\n    )\n  }\n}\n\nfunction getItemStyles(props: Partial<Props & State>): React.CSSProperties {\n  const { isDragging, tabIndex, draggable, tabSize = 0 } = props\n\n  const isFocus = tabIndex === 1\n\n  return {\n    ...(isFocus ? { borderRadius: 3 } : {}),\n    ...(draggable\n      ? { border: `1px dashed ${draggable ? '#e7e7e7' : 'transparent'}` }\n      : {\n          outlineColor: isFocus ? theme.purple150 : 'transparent',\n        }),\n    cursor: 'default',\n    position: 'relative',\n    display: isDragging ? 'none' : 'block',\n    marginLeft: tabSize * 50,\n  }\n}\n\nexport default withDragSource(Snippet)\n","import React from 'react'\nimport { Table, Empty, Tooltip } from 'antd'\nimport { TableProps } from 'antd/lib/table'\nimport { CloseOutlined, PlusOutlined } from '@ant-design/icons'\nimport styled from 'styled-components'\n\nconst StyledTable: any = styled(Table)`\n  &.ant-table-wrapper {\n    .ant-pagination-prev .ant-pagination-item-link,\n    .ant-pagination-next .ant-pagination-item-link {\n      border-color: ${p => p.theme.pagination};\n      border-radius: 6px;\n      color: ${p => p.theme.pagination};\n    }\n\n    .ant-pagination-item {\n      border-color: ${p => p.theme.pagination};\n    }\n\n    .ant-pagination-item a {\n      color: ${p => p.theme.pagination};\n    }\n\n    .ant-pagination-item-active,\n    .ant-pagination-item-active:focus,\n    .ant-pagination-item:hover {\n      border-color: ${p => p.theme.pagination};\n      background: ${p => p.theme.pagination};\n\n      a {\n        color: #fff;\n      }\n    }\n\n    .ant-table-pagination.ant-pagination {\n      margin-top: 32px;\n    }\n\n    .ant-pagination-prev:hover .ant-pagination-item-link,\n    .ant-pagination-next:hover .ant-pagination-item-link {\n      border-color: ${p => p.theme.pagination};\n      background: ${p => p.theme.pagination};\n      color: #fff;\n    }\n\n    .ant-pagination-simple-pager {\n      color: ${p => p.theme.pagination};\n    }\n  }\n\n  .ant-table-tbody > tr > td {\n    height: 40px;\n    padding-top: 10px;\n    padding-bottom: 10px;\n    line-height: 1em;\n    color: #4a4a4a;\n    background: #f0f2f5;\n    border-bottom: 1px solid #e9e9e9;\n  }\n\n  .ant-table-thead > tr > th {\n    background: rgb(39, 189, 179);\n    border-bottom: 1px solid #e9e9e9;\n    color: #fff;\n    font-weight: 600;\n    font-size: 16px;\n  }\n`\n\ntype Props<T> = TableProps<T> & {\n  editable?: boolean\n  isRowDeletable?: (row: T) => boolean\n  onAddRowClick?: (param?: any) => any\n  onDeleteRowClick?: (param?: any) => any\n  isCanEdit?: any\n}\n\nfunction TableComponent<T = any>({\n  editable = false,\n  columns = [],\n  onAddRowClick,\n  isRowDeletable = () => true,\n  onDeleteRowClick,\n  isCanEdit = '',\n  ...props\n}: Props<T>) {\n  const _columns = React.useMemo(() => {\n    let canEdit: boolean = true\n    if (!editable) {\n      return columns\n    }\n    if (isCanEdit !== '') {\n      canEdit = isCanEdit\n    }\n\n    const handleRowDelete = (key: React.Key) => () => {\n      if (onDeleteRowClick) {\n        onDeleteRowClick(key)\n      }\n    }\n\n    return [\n      {\n        title: (\n          <Tooltip placement=\"topLeft\" title=\"新增\">\n            <PlusOutlined\n              className=\"ml-1 relative\"\n              style={{ top: -3 }}\n              onClick={canEdit ? onAddRowClick : undefined}\n            />\n          </Tooltip>\n        ),\n        width: 50,\n        render: (_: any, __: any, idx: number) => (\n          <div className=\"text-center\">#{idx + 1}</div>\n        ),\n      },\n      ...columns,\n      {\n        width: 50,\n        render: (_: any, r: any, idx: number) => (\n          <Tooltip placement=\"topLeft\" title=\"刪除\">\n            <CloseOutlined\n              onClick={isRowDeletable(r) ? handleRowDelete(r.id) : undefined}\n            />\n          </Tooltip>\n        ),\n      },\n    ]\n  }, [columns, editable]) // eslint-disable-line\n\n  return (\n    <StyledTable\n      columns={_columns}\n      locale={{\n        emptyText: (\n          <Empty\n            image={Empty.PRESENTED_IMAGE_SIMPLE}\n            description={\n              <span>\n                <span className=\"d-block\">\n                  尚無資料，請點選「＋新增」新增資料。\n                </span>\n              </span>\n            }\n          />\n        ),\n      }}\n      {...props}>\n      {props.children}\n    </StyledTable>\n  )\n}\n\nTableComponent.displayName = 'Table'\nTableComponent.Column = Table.Column\n\nexport default TableComponent\n","import { Collapse } from 'antd'\nimport styled from 'styled-components'\n\nconst borderRadius = '8px'\n\nconst StyledCollapse = styled(Collapse)`\n  &.ant-collapse {\n    border-radius: ${borderRadius};\n    border-bottom: none;\n\n    > .ant-collapse-item > .ant-collapse-header {\n      padding-left: 0;\n      background: ${p => p.theme.primary};\n      color: #fff;\n    }\n\n    &.header-pl-clear > .ant-collapse-item > .ant-collapse-header {\n      padding-left: 16px;\n    }\n\n    > .ant-collapse-item:first-child > .ant-collapse-header {\n      border-top-left-radius: ${borderRadius};\n      border-top-right-radius: ${borderRadius};\n    }\n\n    > .ant-collapse-item:last-child {\n      border-bottom: none;\n    }\n\n    > .ant-collapse-item:last-child > .ant-collapse-content {\n      border-bottom-left-radius: ${borderRadius};\n      border-bottom-right-radius: ${borderRadius};\n    }\n\n    > .ant-collapse-item.ant-collapse-item-active:last-child {\n      border-bottom: 1px solid #d9d9d9;\n    }\n\n    > .ant-collapse-item:not(.ant-collapse-item-active):last-child\n      > .ant-collapse-header {\n      border-bottom-left-radius: ${borderRadius};\n      border-bottom-right-radius: ${borderRadius};\n    }\n  }\n`\n\nexport default StyledCollapse\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { findDOMNode } from 'react-dom'\nimport { DndContext } from 'react-dnd'\nimport throttle from 'lodash.throttle'\nimport raf from 'raf'\nimport hoist from 'hoist-non-react-statics'\nimport getDisplayName from './snippet-utils'\n\nfunction noop() {}\n\nfunction intBetween(min, max, val) {\n  return Math.floor(Math.min(max, Math.max(min, val)))\n}\n\nfunction getCoords(evt) {\n  if (evt.type === 'touchmove') {\n    return {\n      x: evt.changedTouches[0].clientX,\n      y: evt.changedTouches[0].clientY,\n    }\n  }\n\n  return { x: evt.clientX, y: evt.clientY }\n}\n\nconst DEFAULT_BUFFER = 150\n\nexport function createHorizontalStrength(_buffer) {\n  return function defaultHorizontalStrength({ x, w, y, h }, point) {\n    const buffer = Math.min(w / 2, _buffer)\n    const inRange = point.x >= x && point.x <= x + w\n    const inBox = inRange && point.y >= y && point.y <= y + h\n\n    if (inBox) {\n      if (point.x < x + buffer) {\n        return (point.x - x - buffer) / buffer\n      } else if (point.x > x + w - buffer) {\n        return -(x + w - point.x - buffer) / buffer\n      }\n    }\n\n    return 0\n  }\n}\n\nexport function createVerticalStrength(_buffer) {\n  return function defaultVerticalStrength({ y, h, x, w }, point) {\n    const buffer = Math.min(h / 2, _buffer)\n    const inRange = point.y >= y && point.y <= y + h\n    const inBox = inRange && point.x >= x && point.x <= x + w\n\n    if (inBox) {\n      if (point.y < y + buffer) {\n        return (point.y - y - buffer) / buffer\n      } else if (point.y > y + h - buffer) {\n        return -(y + h - point.y - buffer) / buffer\n      }\n    }\n\n    return 0\n  }\n}\n\nexport const defaultHorizontalStrength = createHorizontalStrength(\n  DEFAULT_BUFFER\n)\n\nexport const defaultVerticalStrength = createVerticalStrength(DEFAULT_BUFFER)\n\nexport default function createScrollingComponent(WrappedComponent) {\n  class ScrollingComponent extends React.Component {\n    static displayName = `Scrolling(${getDisplayName(WrappedComponent)})`\n\n    static propTypes = {\n      onScrollChange: PropTypes.func,\n      verticalStrength: PropTypes.func,\n      horizontalStrength: PropTypes.func,\n      strengthMultiplier: PropTypes.number,\n    }\n\n    static defaultProps = {\n      useScroll: true,\n      onScrollChange: noop,\n      verticalStrength: defaultVerticalStrength,\n      horizontalStrength: defaultHorizontalStrength,\n      strengthMultiplier: 30,\n    }\n\n    static contextType = DndContext\n\n    constructor(props, ctx) {\n      super(props, ctx)\n\n      this.scaleX = 0\n      this.scaleY = 0\n      this.frame = null\n\n      this.attached = false\n      this.dragging = false\n    }\n\n    componentDidMount() {\n      if (this.props.useScroll) {\n        this._initial()\n      }\n    }\n\n    _initial() {\n      // window.document.body.addEventListener('dragover', this.handleEvent);\n      this.container = findDOMNode(this.wrappedInstance)\n      this.container.addEventListener('dragover', this.handleEvent)\n      // touchmove events don't seem to work across siblings, so we unfortunately\n      // have to attach the listeners to the body\n      window.document.body.addEventListener('touchmove', this.handleEvent)\n\n      this.clearMonitorSubscription = this.context.dragDropManager\n        .getMonitor()\n        .subscribeToStateChange(() => this.handleMonitorChange())\n    }\n\n    componentWillUnmount() {\n      if (this.props.useScroll) {\n        this._remove()\n      }\n    }\n\n    _remove() {\n      // window.document.body.removeEventListener('dragover', this.handleEvent);\n      this.container.removeEventListener('dragover', this.handleEvent)\n      window.document.body.removeEventListener('touchmove', this.handleEvent)\n      this.clearMonitorSubscription()\n      this.stopScrolling()\n    }\n\n    handleEvent = evt => {\n      if (this.dragging && !this.attached) {\n        this.attach()\n        this.updateScrolling(evt)\n      }\n    }\n\n    handleMonitorChange() {\n      const isDragging = this.context.dragDropManager.getMonitor().isDragging()\n\n      if (!this.dragging && isDragging) {\n        this.dragging = true\n      } else if (this.dragging && !isDragging) {\n        this.dragging = false\n        this.stopScrolling()\n      }\n    }\n\n    attach() {\n      this.attached = true\n      window.document.body.addEventListener('dragover', this.updateScrolling)\n      window.document.body.addEventListener('touchmove', this.updateScrolling)\n    }\n\n    detach() {\n      this.attached = false\n      window.document.body.removeEventListener('dragover', this.updateScrolling)\n      window.document.body.removeEventListener(\n        'touchmove',\n        this.updateScrolling\n      )\n    }\n\n    // Update scaleX and scaleY every 100ms or so\n    // and start scrolling if necessary\n    updateScrolling = throttle(\n      evt => {\n        const {\n          left: x,\n          top: y,\n          width: w,\n          height: h,\n        } = this.container.getBoundingClientRect()\n        const box = { x, y, w, h }\n        const coords = getCoords(evt)\n\n        // calculate strength\n        this.scaleX = this.props.horizontalStrength(box, coords)\n        this.scaleY = this.props.verticalStrength(box, coords)\n\n        // start scrolling if we need to\n        if (!this.frame && (this.scaleX || this.scaleY)) {\n          this.startScrolling()\n        }\n      },\n      100,\n      { trailing: false }\n    )\n\n    startScrolling() {\n      let i = 0\n      const tick = () => {\n        const { scaleX, scaleY, container } = this\n        const { strengthMultiplier, onScrollChange } = this.props\n\n        // stop scrolling if there's nothing to do\n        if (strengthMultiplier === 0 || scaleX + scaleY === 0) {\n          this.stopScrolling()\n          return\n        }\n\n        // there's a bug in safari where it seems like we can't get\n        // mousemove events from a container that also emits a scroll\n        // event that same frame. So we double the strengthMultiplier and only adjust\n        // the scroll position at 30fps\n        if (i++ % 2) {\n          const {\n            scrollLeft,\n            scrollTop,\n            scrollWidth,\n            scrollHeight,\n            clientWidth,\n            clientHeight,\n          } = container\n\n          const newLeft = scaleX\n            ? (container.scrollLeft = intBetween(\n                0,\n                scrollWidth - clientWidth,\n                scrollLeft + scaleX * strengthMultiplier\n              ))\n            : scrollLeft\n\n          const newTop = scaleY\n            ? (container.scrollTop = intBetween(\n                0,\n                scrollHeight - clientHeight,\n                scrollTop + scaleY * strengthMultiplier\n              ))\n            : scrollTop\n\n          onScrollChange(newLeft, newTop)\n        }\n        this.frame = raf(tick)\n      }\n\n      tick()\n    }\n\n    stopScrolling() {\n      this.detach()\n      this.scaleX = 0\n      this.scaleY = 0\n\n      if (this.frame) {\n        raf.cancel(this.frame)\n        this.frame = null\n      }\n    }\n\n    render() {\n      const {\n        // not passing down these props\n        strengthMultiplier,\n        verticalStrength,\n        horizontalStrength,\n        onScrollChange,\n        ...props\n      } = this.props\n\n      return (\n        <WrappedComponent\n          ref={ref => {\n            this.wrappedInstance = ref\n          }}\n          {...props}\n        />\n      )\n    }\n  }\n\n  return hoist(ScrollingComponent, WrappedComponent)\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport cx from 'classnames'\nimport withScroll, { createVerticalStrength } from './withScroll'\n\ninterface Props {\n  className?: string\n  useScroll?: boolean\n}\n\nconst DndScrollableElement = styled.div`\n  height: 85vh;\n  padding-top: 0;\n  overflow-y: scroll;\n\n  .report-template-builder {\n    &__main-content {\n      min-height: 371.25mm;\n      margin: 0 auto;\n      padding: 16px;\n      box-sizing: border-box;\n      max-width: 100%;\n      background: #fff;\n      border-top-right-radius: 16px;\n      border-bottom-left-radius: 16px;\n      border-bottom-right-radius: 16px;\n    }\n\n    &__contentarea {\n      min-height: 348.75mm;\n    }\n\n    &__contentarea--fixed-layout {\n      min-height: auto;\n    }\n\n    &__snippet-toolbar {\n      visibility: hidden;\n    }\n  }\n\n  .ui-draggable {\n    &:focus,\n    &:active {\n      outline: 0;\n\n      .course-builder__snippet-toolbar {\n        visibility: visible;\n        opacity: 1;\n        transition: visibility 0s, opacity 0.3s, max-height 0.6s linear;\n      }\n    }\n  }\n\n  &.is--preview {\n    height: auto;\n  }\n`\n\nconst ScrollableComponent = withScroll(DndScrollableElement)\n\nconst vStrength = createVerticalStrength(150)\n\nexport default class ReactDndProvider extends React.Component<Props> {\n  static defaultProps = {\n    useScroll: true,\n  }\n\n  render() {\n    const { className, useScroll } = this.props\n\n    return (\n      <ScrollableComponent\n        useScroll={useScroll}\n        verticalStrength={vStrength}\n        strengthMultiplier={100}\n        className={cx('report-template-builder', className)}>\n        {this.props.children}\n      </ScrollableComponent>\n    )\n  }\n}\n","import React from 'react'\nimport { ModalProps } from 'antd/lib/modal'\nimport { length, __, gt, keys, map, pathOr } from 'ramda'\nimport Modal from '@/components/modal'\nimport Snippet from '@/components/snippet'\nimport { mapIndexed } from '@/utils/webHelper'\nconst { compose } = require('ramda')\n\ninterface Props extends ModalProps {\n  snippetList?: { [key: string]: any[] }\n}\n\nexport default function SnippetPreviewModal({ onCancel, snippetList }: Props) {\n  return (\n    <Modal\n      visible\n      style={{ top: 30 }}\n      maskClosable={false}\n      className=\"ant-modal-header--border-none\"\n      keyboard={false}\n      width=\"85%\"\n      onCancel={onCancel}\n      footer={false}>\n      {compose(\n        map((key: string) => (\n          <div key={key}>\n            {compose(gt(__, 0), length, pathOr([], [key]))(snippetList) && (\n              <h2 className=\"my-2\">{key}</h2>\n            )}\n            {compose(\n              mapIndexed((item: any, idx: number) => (\n                <Snippet key={item.id} draggable={false}>\n                  <item.Component\n                    id={item.id}\n                    className={item.id}\n                    item={item}\n                    index={idx}\n                  />\n                </Snippet>\n              )),\n              pathOr([], [key])\n            )(snippetList)}\n          </div>\n        )),\n        keys\n      )(snippetList)}\n    </Modal>\n  )\n}\n","import { Tabs } from 'antd'\nimport styled from 'styled-components'\n\nconst bg = 'rgb(43,193,183)'\n\nexport default styled(Tabs)`\n  &.ant-tabs {\n    .ant-tabs-tab {\n      display: flex;\n      align-items: center;\n      padding: 10px 24px !important;\n      margin-right: 4px !important;\n      color: #fff !important;\n      border-color: ${bg} !important;\n      background: ${bg} !important;\n      border-top-left-radius: 12px !important;\n      border-top-right-radius: 12px !important;\n    }\n\n    .ant-tabs-tab-active {\n      border-color: #fff !important;\n      background: #fff !important;\n\n      svg path {\n        fill: ${p => p.theme.primary} !important;\n      }\n    }\n\n    .ant-tabs-tab .anticon {\n      color: #fff !important;\n    }\n\n    .ant-tabs-tab.is--over {\n      border: 1px dashed lightgrey !important;\n    }\n\n    .ant-tabs-tab.is--dragging {\n      opacity: 0.3;\n    }\n\n    > .ant-tabs-nav .ant-tabs-nav-add,\n    .ant-tabs > div > .ant-tabs-nav .ant-tabs-nav-add {\n      background: transparent;\n      border-color: transparent;\n      color: ${p => p.theme.darkGrey};\n\n      .anticon-plus {\n        color: ${p => p.theme.darkGrey};\n      }\n\n      .anticon-plus:hover {\n        color: ${p => p.theme.primary};\n      }\n    }\n\n    .ant-tabs-tab-btn:focus,\n    .ant-tabs-tab-remove:focus,\n    .ant-tabs-tab-btn:active,\n    .ant-tabs-tab-remove:active,\n    .ant-tabs-tab.ant-tabs-tab-active .ant-tabs-tab-btn {\n      color: ${p => p.theme.secondary} !important;\n    }\n  }\n\n  &.ant-tabs-top > .ant-tabs-nav,\n  &.ant-tabs-top > div > .ant-tabs-nav {\n    margin-bottom: 0;\n  }\n`\n","import React from 'react'\nimport { DragSource, DropTarget } from 'react-dnd'\nimport cx from 'classnames'\nimport { compose } from 'ramda'\nimport Tabs from '@/components/tabs'\n\n// Drag & Drop node\nclass TabNode extends React.Component {\n  render() {\n    const {\n      connectDragSource,\n      connectDropTarget,\n      isDragging,\n      isOver,\n      moveTabNode,\n      draggingItem,\n      id,\n      ...props\n    } = this.props\n\n    return connectDragSource(\n      connectDropTarget(\n        React.cloneElement(props.children, {\n          className: cx(props.children.props.className, {\n            'is--dragging': isDragging,\n            'is--over': isOver && id !== draggingItem?.id,\n          }),\n        })\n      )\n    )\n  }\n}\n\nconst withDropTarget = DropTarget(\n  'DND_NODE',\n  {\n    drop(props, monitor) {\n      const dragKey = monitor.getItem().index\n      const hoverKey = props.index\n\n      if (dragKey === hoverKey) {\n        return\n      }\n\n      props.moveTabNode(dragKey, hoverKey)\n      monitor.getItem().index = hoverKey\n    },\n  },\n  (connect, monitor) => ({\n    connectDropTarget: connect.dropTarget(),\n    isOver: monitor.isOver(),\n    draggingItem: monitor.getItem(),\n  })\n)\n\nconst withDragSource = DragSource(\n  'DND_NODE',\n  {\n    beginDrag(props) {\n      return {\n        id: props.id,\n        index: props.index,\n      }\n    },\n  },\n  (connect, monitor) => ({\n    connectDragSource: connect.dragSource(),\n    isDragging: monitor.isDragging(),\n  })\n)\n\nconst WrapTabNode = compose(withDropTarget, withDragSource)(TabNode)\n\nexport default class DraggableTabs extends React.Component {\n  static defaultProps = {\n    order: [],\n  }\n\n  moveTabNode = (dragKey, hoverKey) => {\n    const { children, order, moveTabNode } = this.props\n    const newOrder = order.slice()\n\n    React.Children.forEach(children, c => {\n      if (newOrder.indexOf(c.key) === -1) {\n        newOrder.push(c.key)\n      }\n    })\n\n    const dragIndex = newOrder.indexOf(dragKey)\n    const hoverIndex = newOrder.indexOf(hoverKey)\n\n    newOrder.splice(dragIndex, 1)\n    newOrder.splice(hoverIndex, 0, dragKey)\n\n    moveTabNode(newOrder)\n  }\n\n  renderTabBar = (props, DefaultTabBar) => (\n    <DefaultTabBar {...props}>\n      {node => (\n        <WrapTabNode\n          key={node.key}\n          id={node.key}\n          index={node.key}\n          moveTabNode={this.moveTabNode}>\n          {node}\n        </WrapTabNode>\n      )}\n    </DefaultTabBar>\n  )\n\n  render() {\n    const { moveTabNode, children, ...props } = this.props\n\n    return (\n      <Tabs renderTabBar={this.renderTabBar} {...props}>\n        {children}\n      </Tabs>\n    )\n  }\n}\n\nDraggableTabs.TabPane = Tabs.TabPane\n","import React from 'react'\nimport { DragSource, ConnectDragSource } from 'react-dnd'\nimport styled from 'styled-components'\nimport ItemTypes from '@/constants/item-types'\n\ninterface Props {\n  connectDragSource: ConnectDragSource\n  children?: React.ReactNode\n  className?: string\n  id?: React.Key\n}\n\nconst withDragSource = DragSource(\n  ItemTypes.BOARD,\n  {\n    beginDrag(props: Props) {\n      const { children, className, ...rest } = props // eslint-disable-line\n      return {\n        ...rest,\n        fromMenu: true,\n      }\n    },\n    endDrag(_, monitor) {\n      if (!monitor.didDrop()) {\n        return\n      }\n    },\n    isDragging(props, monitor) {\n      const isDragging = props.id === monitor.getItem().id\n\n      return isDragging\n    },\n  },\n  (connect, monitor) => ({\n    connectDragSource: connect.dragSource(),\n    connectDragPreview: connect.dragPreview(),\n    isDragging: monitor.isDragging(),\n  })\n)\n\nclass SnippetListMenuItem extends React.Component<Props> {\n  render() {\n    const { connectDragSource, id, ...rest } = this.props\n\n    return (\n      <SnippetListMenuWrapper\n        {...rest}\n        ref={comp => connectDragSource(comp)}\n        id={`${id}`}>\n        <div className=\"snippet-drawer-menu__item--content\">\n          {this.props.children}\n        </div>\n      </SnippetListMenuWrapper>\n    )\n  }\n}\n\nconst SnippetListMenuWrapper = styled.div`\n  cursor: move;\n`\n\nexport default withDragSource(SnippetListMenuItem)\n","import React from 'react'\nimport cx from 'classnames'\nimport { FontColorsOutlined } from '@ant-design/icons'\nimport styled from 'styled-components'\nimport SnippetListMenuItem from '@/components/snippet-list-menu-item'\nimport reportTemplateList from '@/components/report-template-list'\n\ninterface Props {\n  className?: string\n  style?: React.CSSProperties\n}\n\nexport default class SnippetListMenu extends React.Component<Props> {\n  render() {\n    return (\n      <SnippetListMenuWrapper\n        className={cx('snippet-drawer-menu', this.props.className)}\n        {...this.props}>\n        <div className=\"snippet-drawer-menu__list\">\n          {reportTemplateList.map(item => (\n            <SnippetListMenuItem\n              {...item}\n              key={item.id}\n              className=\"snippet-drawer-menu__item py-3\">\n              <div className=\"flex items-center\">\n                {item.icon ? (\n                  <item.icon className=\"mr-2\" />\n                ) : (\n                  <FontColorsOutlined className=\"mr-2\" />\n                )}\n                {item.name}\n              </div>\n            </SnippetListMenuItem>\n          ))}\n        </div>\n      </SnippetListMenuWrapper>\n    )\n  }\n}\n\nconst SnippetListMenuWrapper = styled.div`\n  .snippet-drawer-menu {\n    &__list {\n      height: 100%;\n      overflow-y: auto;\n      overflow-x: hidden;\n\n      ::-webkit-scrollbar {\n        display: none;\n      }\n    }\n  }\n`\n","import styled from 'styled-components'\n\ntype Props = {\n  border?: string\n}\n\nexport default styled.div.attrs({\n  className: 'block-placeholder',\n})<Props>`\n  display: flex;\n  align-items: center;\n  padding-left: 25px;\n  height: 50px;\n  border: rgba(225, 225, 225, 0.9) 2px ${p => p.border || 'dashed'};\n  background-color: transparent;\n  margin-bottom: 35px;\n`\n","/**\n * NOTE:\n * nerver using index as list component key forever,\n * it will completely fucked up your page\n */\nimport React from 'react'\nimport { withRouter } from 'react-router-dom'\nimport { DropTarget, ConnectDropTarget, XYCoord } from 'react-dnd'\nimport {\n  equals,\n  length,\n  remove,\n  update,\n  insert,\n  cond,\n  gt,\n  lt,\n  T,\n  __,\n  add,\n  pathOr,\n  identity,\n  always,\n} from 'ramda'\nimport cx from 'classnames'\nimport { uuid } from '@/utils/webHelper'\nimport ItemTypes from '@/constants/item-types'\nimport { SnippetProps } from '@/constants/types'\nimport Snippet from '@/components/snippet'\nimport BlockPlaceholder from '@/components/snippet-block-placeholder'\nimport { canMoveSnippet, getPlaceHolderIndex } from './snippet-utils'\nconst { compose } = require('ramda')\n\ninterface Props {\n  draggingItem: any\n  isOver?: boolean\n  draggable?: boolean\n  canDrop?: boolean\n  snippetList: SnippetProps[]\n  connectDropTarget: ConnectDropTarget\n  onSnippetUpdate(data: any): void\n}\n\ninterface State {\n  placeholderIndex: number | null\n}\n\nconst withDropTarget = DropTarget<Props>(\n  ItemTypes.BOARD,\n  {\n    drop(_, monitor, component) {\n      if (!component || !component.props.draggable) {\n        return\n      }\n\n      const canDrop = monitor.canDrop()\n      let { placeholderIndex } = component.state\n      const item = monitor.getItem()\n\n      if (canDrop && item.fromMenu) {\n        component.handleSnippetDrop({ ...item, placeholderIndex })\n      }\n\n      if (canDrop && !item.fromMenu) {\n        component.handleSnippetMove(item.id, placeholderIndex)\n      }\n    },\n    canDrop({ snippetList }, monitor) {\n      // if there is no items in cards, and is over on the board currently,\n      // we can display a placeholder and drop the snippet item on the board.\n      if (snippetList.length === 0 && monitor.isOver()) {\n        return true\n      }\n\n      const clientOffset = monitor.getClientOffset() as XYCoord\n      const element = document.elementFromPoint(clientOffset.x, clientOffset.y)\n\n      return canMoveSnippet(element)\n    },\n    hover(_, monitor, component) {\n      // Determine mouse position\n      const clientOffset = monitor.getClientOffset() as XYCoord\n\n      let {\n        placeholderIndex,\n        isOverSnippet,\n        overSnippet,\n      } = getPlaceHolderIndex(clientOffset)\n\n      // 還要判斷是否是在最後一個 snippet 下面及 snippets-container 裡面\n      if (!isOverSnippet) {\n        return\n      }\n\n      const hoverBoundingRect = (overSnippet as HTMLElement).getBoundingClientRect()\n      const hoverMiddleY =\n        (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2\n      const hoverClientY = clientOffset.y - hoverBoundingRect.top\n\n      if (hoverClientY < hoverMiddleY) {\n        placeholderIndex -= 1\n      }\n\n      if (\n        monitor.canDrop() &&\n        !equals(component.state.placeholderIndex, placeholderIndex)\n      ) {\n        component.setState({ placeholderIndex })\n      }\n    },\n  },\n  (connect, monitor) => ({\n    connectDropTarget: connect.dropTarget(),\n    isOver: monitor.isOver(),\n    canDrop: monitor.canDrop(),\n    didDrop: monitor.didDrop(),\n    draggingItem: monitor.getItem(),\n  })\n)\n\nclass SnippetsContainer extends React.Component<Props, State> {\n  static defaultProps = {\n    draggable: true,\n    snippetList: [],\n  }\n\n  public state: State = {\n    placeholderIndex: null,\n  }\n\n  handleSnippetMove = (id: React.Key, atIndex: number) => {\n    const { snippetList } = this.props\n    const { snippet, index } = this.handleFindSnippet(id)\n\n    const newList = []\n    let isPlaced = false\n\n    snippetList.forEach((s, idx) => {\n      if (idx === index) {\n        return\n      }\n\n      if (!isPlaced && atIndex < idx) {\n        newList.push(snippet)\n        isPlaced = true\n      }\n\n      newList.push(s)\n\n      if (!isPlaced && atIndex === idx) {\n        newList.push(snippet)\n        isPlaced = true\n      }\n    })\n\n    // we dropped the only one snippet in the list so let it back to list.\n    if (length(snippetList) === 1 && !atIndex) {\n      newList.push(snippet)\n    }\n\n    this.props.onSnippetUpdate(newList)\n    this.setState({ placeholderIndex: null })\n  }\n\n  // prettier-ignore\n  handleSnippetDrop = (droppedItem: { [key: string]: any; placeholderIndex: number }) => {\n    const { placeholderIndex, ...item } = droppedItem\n\n    const snippetList = [...this.props.snippetList]\n\n    const nextIndex = placeholderIndex + 1\n    let newList: any[] = []\n\n    const snippet: Partial<SnippetProps> = {\n      ...item,\n      fromMenu: false,\n      id: `${item.id}__${uuid()}`,\n    }\n\n    if (length(snippetList) === 0) {\n      newList = insert(0, snippet)(snippetList)\n    }\n    if (length(snippetList) > 0) {\n      newList = insert(nextIndex, snippet)(snippetList)\n    }\n\n    this.props.onSnippetUpdate(newList)\n    this.setState({ placeholderIndex: null })\n  }\n\n  handleSnippetRemove = (index: number) => {\n    this.props.onSnippetUpdate(remove(index, 1)(this.props.snippetList))\n  }\n\n  handleSnippetShift = (id: React.Key, shift: number) => {\n    const { snippet } = this.handleFindSnippet(id)\n\n    this.handleSnippetUpdate({\n      ...snippet,\n      tabSize: compose(\n        cond([\n          [gt(__, 2), always(2)],\n          [lt(__, 0), always(0)],\n          [T, identity],\n        ]),\n        add(shift),\n        pathOr(0, ['tabSize'])\n      )(snippet),\n    })\n  }\n\n  handleSnippetUpdate = (data: any) => {\n    const { snippet, index } = this.handleFindSnippet(data.id)\n\n    this.props.onSnippetUpdate(\n      update(index, { ...snippet, ...data })(this.props.snippetList)\n    )\n  }\n\n  handleFindSnippet = (id: React.Key) => {\n    const { snippetList } = this.props\n    const snippet = snippetList.filter(x => x.id === id)[0]\n\n    return {\n      snippet,\n      index: snippetList.indexOf(snippet),\n    }\n  }\n\n  render() {\n    const {\n      connectDropTarget,\n      isOver,\n      canDrop,\n      snippetList,\n      draggingItem,\n      draggable, // 模版是否可拖曳，編輯模式下才會是 true\n    } = this.props\n\n    const { placeholderIndex } = this.state\n\n    let isPlaceHold = false\n    const cardList = []\n\n    snippetList.forEach((item, idx) => {\n      if (isOver && canDrop) {\n        isPlaceHold = false\n        if (idx === 0 && placeholderIndex === -1) {\n          cardList.push(<BlockPlaceholder key={`block-placeholder-${idx}`} />)\n        } else if ((placeholderIndex as any) > idx) {\n          isPlaceHold = true\n        }\n      }\n\n      if (item !== undefined) {\n        cardList.push(\n          <Snippet\n            key={item.id}\n            id={item.id}\n            wrapperId={`snippet-wrapper-${idx}`}\n            index={idx}\n            draggable={draggable}\n            tabSize={item.tabSize}\n            findSnippet={this.handleFindSnippet}\n            shiftSnippet={this.handleSnippetShift}\n            removeSnippet={this.handleSnippetRemove}>\n            <item.Component\n              id={item.id}\n              className={item.id}\n              item={item}\n              index={idx}\n              onUpdate={this.handleSnippetUpdate}\n            />\n          </Snippet>\n        )\n      }\n\n      if (isOver && canDrop && placeholderIndex === idx) {\n        cardList.push(<BlockPlaceholder key={`block-placeholder-${idx}`} />)\n      }\n    })\n\n    // if placeholder index is greater than array.length, display placeholder as last\n    if (isPlaceHold) {\n      cardList.push(<BlockPlaceholder key={'block-placeholder-bottom'} />)\n    }\n\n    // if there is no items in cards currently, display a placeholder anyway\n    if (isOver && canDrop && snippetList.length === 0) {\n      cardList.push(<BlockPlaceholder key={'block-placeholder-zero'} />)\n    }\n\n    // if just has only one item in list and currently dragged, display a placeholder\n    if (isOver && canDrop && snippetList.length === 1) {\n      if (!draggingItem.fromMenu) {\n        cardList.push(<BlockPlaceholder key={'block-placeholder-zero'} />)\n      }\n    }\n\n    return connectDropTarget(\n      <div\n        className={cx('report-template-builder__contentarea', {\n          'report-template-builder__contentarea--fixed-layout': !draggable,\n        })}>\n        {cardList}\n      </div>\n    )\n  }\n}\n\nexport default compose(withRouter, withDropTarget)(SnippetsContainer)\n"],"sourceRoot":""}