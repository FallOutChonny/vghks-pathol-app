(this["webpackJsonpvghks-pathol-app"]=this["webpackJsonpvghks-pathol-app"]||[]).push([[12],{409:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return De}));a(255);var n=a(180),r=a.n(n),o=(a(256),a(181)),i=a.n(o),c=a(174),l=a(116),p=a(77),s=a(0),d=a.n(s),u=a(1818),m=a(1813),b=a(201),f=a(26),g=a(202),h=a(129),O=a(27),v=a(126),j=a(28),y=a(432),x=a(100),E=a(54),_=a(419),S=a(443);var N=a(184),I=a(222),k=a(71),w=a(125),C=a(143).compose,D={CLINICAL_HISTORY:"Clinical History",HIGHT_RISK_REASONS:"Hight Risk Reasons",DATA_OF_PRIOR_SIMILAR_STUDY:"Data of prior similar study",IMAGING_PROTOCOL:"Imaging Protocal",TUMOR_LOCATION:"Tumor Location/Size"},L=Object(k.atom)({key:"snippetListState",default:C(b.a,Object(f.a)((function(e){return Object(c.a)({},e,[])})),w.a)(D)}),R=Object(k.atom)({key:"snippetCategoryState",default:C(v.a,w.a)(D)});function T(e){var t=Object(k.useRecoilState)(L);return d.a.useEffect((function(){}),[]),t}var M=a(47),P=a(503),A=a(533),U=a(117),B=a(118),F=a(167),H=a(166),z=a(7),J=a.n(z),W=a(1817),$=a(97),G=a(408),K=a(444),Y=Object(G.DragSource)(K.a.BOARD,{beginDrag:function(e){e.children,e.className;var t=Object($.a)(e,["children","className"]);return Object(l.a)(Object(l.a)({},t),{},{fromMenu:!0})},endDrag:function(e,t){t.didDrop()},isDragging:function(e,t){var a=e.id===t.getItem().id;return a}},(function(e,t){return{connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview(),isDragging:t.isDragging()}})),q=function(e){Object(F.a)(a,e);var t=Object(H.a)(a);function a(){return Object(U.a)(this,a),t.apply(this,arguments)}return Object(B.a)(a,[{key:"render",value:function(){var e=this.props,t=e.connectDragSource,a=e.id,n=Object($.a)(e,["connectDragSource","id"]);return d.a.createElement(Q,Object.assign({},n,{ref:function(e){return t(e)},id:"".concat(a)}),d.a.createElement("div",{className:"snippet-drawer-menu__item--content"},this.props.children))}}]),a}(d.a.Component),Q=j.c.div.withConfig({displayName:"snippet-list-menu-item__SnippetListMenuWrapper",componentId:"sc-1m76oe2-0"})(["cursor:move;"]),V=Y(q),X=a(529),Z=function(e){Object(F.a)(a,e);var t=Object(H.a)(a);function a(){return Object(U.a)(this,a),t.apply(this,arguments)}return Object(B.a)(a,[{key:"render",value:function(){return d.a.createElement(ee,Object.assign({className:J()("snippet-drawer-menu",this.props.className)},this.props),d.a.createElement(E.a,{className:"snippet-drawer-menu__list"},X.a.map((function(e){return d.a.createElement(V,Object.assign({},e,{key:e.id,className:"snippet-drawer-menu__item py-3"}),d.a.createElement(E.a,{className:"flex items-center"},d.a.createElement(W.a,{className:"mr-2"}),e.name))}))))}}]),a}(d.a.Component),ee=j.c.div.withConfig({displayName:"snippet-list-menu__SnippetListMenuWrapper",componentId:"sc-1uabx26-0"})([".snippet-drawer-menu{&__list{height:100%;overflow-y:auto;overflow-x:hidden;::-webkit-scrollbar{display:none;}}}"]),te=function(e){Object(F.a)(a,e);var t=Object(H.a)(a);function a(){return Object(U.a)(this,a),t.apply(this,arguments)}return Object(B.a)(a,[{key:"render",value:function(){return d.a.createElement("div",null)}}]),a}(d.a.Component),ae=a(462),ne={position:"fixed",pointerEvents:"none",zIndex:100,left:0,top:0,width:"100%",height:"100%"};function re(e){var t=e.initialOffset,a=e.currentOffset;if(!t||!a)return{display:"none"};var n=a.x,r=a.y,o="translate(".concat(n,"px, ").concat(r,"px)");return{transform:o,WebkitTransform:o}}var oe=Object(G.DragLayer)((function(e){return{item:e.getItem(),itemType:e.getItemType(),initialOffset:e.getInitialSourceClientOffset(),currentOffset:e.getSourceClientOffset(),isDragging:e.isDragging()}}))((function(e){var t=e.itemType,a=e.isDragging,n=e.currentOffset;if(!a)return null;if(!n)return null;var r=document.elementFromPoint(n.x,n.y),o=!1;return r&&(o=Object(ae.a)(r)),d.a.createElement("div",{className:"report-template-builder__drag-layer",style:ne},d.a.createElement("div",{style:re(e)},function(e){var a=e.canDrop;switch(t){case K.a.BOARD:case K.a.SNIPPET:return d.a.createElement(te,{canDrop:a});default:return null}}({canDrop:o})))})),ie=a(149),ce=a(34),le=a(24),pe=a(128),se=a(1796),de=a.n(se),ue=a(168),me=a(535),be=j.c.div.attrs({className:"block-placeholder"}).withConfig({displayName:"block-placeholder",componentId:"sc-14ojret-0"})(["display:flex;align-items:center;padding-left:25px;height:50px;border:rgba(225,225,225,0.9) 2px ",";background-color:transparent;margin-bottom:35px;"],(function(e){return e.border||"dashed"})),fe=a(143).compose,ge=Object(G.DropTarget)(K.a.BOARD,{drop:function(e,t,a){if(a&&a.props.draggable){var n=t.canDrop(),r=a.state.placeholderIndex,o=t.getItem();n&&o.fromMenu&&a.handleSnippetDrop(Object(l.a)(Object(l.a)({},o),{},{placeholderIndex:r})),n&&!o.fromMenu&&a.handleSnippetMove(o.id,r)}},canDrop:function(e,t){if(0===e.snippetList.length&&t.isOver())return!0;var a=t.getClientOffset(),n=document.elementFromPoint(a.x,a.y);return Object(ae.a)(n)},hover:function(e,t,a){var n=t.getClientOffset(),r=Object(ae.c)(n),o=r.placeholderIndex,i=r.isOverSnippet,c=r.overSnippet;if(i){var l=c.getBoundingClientRect(),p=(l.bottom-l.top)/2;n.y-l.top<p&&(o-=1),t.canDrop()&&!Object(le.a)(a.state.placeholderIndex,o)&&a.setState({placeholderIndex:o})}else console.log(o)}},(function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver(),canDrop:t.canDrop(),didDrop:t.didDrop(),draggingItem:t.getItem()}})),he=function(e){Object(F.a)(a,e);var t=Object(H.a)(a);function a(){var e;Object(U.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={placeholderIndex:null},e.handleSnippetMove=function(t,a){var n=Object(ie.a)(e.props.snippetList),r=e.handleFindSnippet(t),o=r.snippet,i=r.index,c=[],l=!1;n.forEach((function(e,t){t!==i&&(!l&&a<t&&(c.push(o),l=!0),c.push(e),l||a!==t||(c.push(o),l=!0))})),1!==Object(pe.a)(n)||a||c.push(o),e.setState({placeholderIndex:null}),e.props.onSnippetUpdate(c)},e.handleSnippetDrop=function(t){var a=t.placeholderIndex,n=Object($.a)(t,["placeholderIndex"]),r=Object(ie.a)(e.props.snippetList),o=a+1,i=[],c=Object(l.a)(Object(l.a)({},n),{},{fromMenu:!1,id:"".concat(n.id,"__").concat(Object(ue.c)())});0===Object(pe.a)(r)&&(i=de()(r,{$splice:[[0,0,c]]})),Object(pe.a)(r)>0&&(i=de()(r,{$splice:[[o,0,c]]})),e.setState({placeholderIndex:null}),e.props.onSnippetUpdate(i)},e.handleSnippetRemove=function(t){e.props.onSnippetUpdate(de()(e.props.snippetList,{$splice:[[t,1]]}))},e.handleSnippetUpdate=function(t){var a=e.handleFindSnippet(t.id),n=a.snippet,r=a.index;e.props.onSnippetUpdate(de()(e.props.snippetList,Object(c.a)({},r,{$set:Object(l.a)(Object(l.a)({},n),t)})))},e.handleFindSnippet=function(t){var a=e.props.snippetList,n=a.filter((function(e){return e.id===t}))[0];return{snippet:n,index:a.indexOf(n)}},e}return Object(B.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.connectDropTarget,n=t.isOver,r=t.canDrop,o=t.snippetList,i=t.draggingItem,c=t.draggable,l=this.state.placeholderIndex,p=!1,s=[];return o.forEach((function(t,a){n&&r&&(p=!1,0===a&&-1===l?s.push(d.a.createElement(be,{key:"block-placeholder-".concat(a)})):l>a&&(p=!0)),void 0!==t&&s.push(d.a.createElement(me.a,{key:t.id,id:t.id,wrapperId:"snippet-wrapper-".concat(a),index:a,draggable:c,findSnippet:e.handleFindSnippet,removeSnippet:e.handleSnippetRemove},d.a.createElement(t.Component,{id:t.id,className:t.id,item:t,index:a,onUpdate:e.handleSnippetUpdate}))),n&&r&&l===a&&s.push(d.a.createElement(be,{key:"block-placeholder-".concat(a)}))})),p&&s.push(d.a.createElement(be,{key:"block-placeholder-bottom"})),n&&r&&0===o.length&&s.push(d.a.createElement(be,{key:"block-placeholder-zero"})),n&&r&&1===o.length&&(i.fromMenu||s.push(d.a.createElement(be,{key:"block-placeholder-zero"}))),a(d.a.createElement("div",{className:J()("report-template-builder__contentarea",{"report-template-builder__contentarea--fixed-layout":!c})},s))}}]),a}(d.a.Component);he.defaultProps={draggable:!0,snippetList:[]};var Oe=fe(ce.f,ge)(he),ve=a(497),je=(a(517),a(518)),ye=a.n(je),xe=(a(1797),a(1799)),Ee=a.n(xe),_e=Object(j.c)(Ee.a).withConfig({displayName:"components__StyledCollapse",componentId:"sc-179ck16-0"})(["&.ant-collapse{border-radius:16px;border-bottom:none;> .ant-collapse-item > .ant-collapse-header{background:rgb(207,224,245);color:",";}> .ant-collapse-item:first-child > .ant-collapse-header{border-top-left-radius:16px;border-top-right-radius:16px;}> .ant-collapse-item:last-child{border-bottom:none;}> .ant-collapse-item:last-child > .ant-collapse-content{border-bottom-left-radius:16px;border-bottom-right-radius:16px;}> .ant-collapse-item.ant-collapse-item-active:last-child{border-bottom:1px solid #d9d9d9;}> .ant-collapse-item:not(.ant-collapse-item-active):last-child > .ant-collapse-header{border-bottom-left-radius:16px;border-bottom-right-radius:16px;}}"],(function(e){return e.theme.primary})),Se=Object(j.c)(ye.a).withConfig({displayName:"components__StyledTabs",componentId:"sc-179ck16-1"})(["&.ant-tabs{.ant-tabs-tab{display:flex;align-items:center;padding:10px 24px !important;margin-right:4px !important;border-color:rgb(199,214,238) !important;background:rgb(199,214,238) !important;border-top-left-radius:12px !important;border-top-right-radius:12px !important;color:",";}.ant-tabs-tab-active{border-color:#fff !important;background:#fff !important;}.ant-tabs-tab .anticon{color:",";}> .ant-tabs-nav .ant-tabs-nav-add,.ant-tabs > div > .ant-tabs-nav .ant-tabs-nav-add{color:",";border-color:rgb(199,214,238);background:rgb(199,214,238);}.ant-tabs-tab-btn:focus,.ant-tabs-tab-remove:focus,.ant-tabs-tab-btn:active,.ant-tabs-tab-remove:active,.ant-tabs-tab.ant-tabs-tab-active .ant-tabs-tab-btn{color:"," !important;}}&.ant-tabs-top > .ant-tabs-nav,&.ant-tabs-top > div > .ant-tabs-nav{margin-bottom:0;}"],(function(e){return e.theme.primary}),(function(e){return e.theme.primary}),(function(e){return e.theme.primary}),(function(e){return e.theme.secondary})),Ne=a(143).compose,Ie=Object(j.c)(E.a).withConfig({displayName:"report-template-builder___StyledBox",componentId:"o8g10d-0"})({width:60}),ke=Object(j.c)(E.a).withConfig({displayName:"report-template-builder___StyledBox2",componentId:"o8g10d-1"})({width:60}),we=Object(j.c)(E.a).withConfig({displayName:"report-template-builder___StyledBox3",componentId:"o8g10d-2"})({width:60}),Ce=Object(j.c)("span").withConfig({displayName:"report-template-builder___StyledSpan",componentId:"o8g10d-3"})({whiteSpace:"nowrap"});function De(){Object(S.a)("\u7d50\u69cb\u5f0f\u5831\u544a\u6a21\u7248\u7de8\u8f2f");var e=Object(N.a)(),t=Object(p.a)(e,2)[1],a=Object(I.a)(),n=Object(p.a)(a,2)[1];d.a.useEffect((function(){t([{href:M.f,name:"\u7d50\u69cb\u5f0f\u5831\u544a"},{name:"\u7d50\u69cb\u5f0f\u5831\u544a\u6a21\u7248\u7de8\u8f2f"}])}),[]),d.a.useEffect((function(){return n(d.a.createElement(E.a,{className:"inline-flex"},d.a.createElement(x.a,{color:"outline",className:"bg-transparent text-white border-white"},"\u767c\u4f48"),d.a.createElement(x.a,{color:"outline",className:"ml-6 bg-transparent text-white border-white",onClick:q},"\u5132\u5b58"),d.a.createElement(x.a,{color:"outline",className:"ml-6 bg-transparent text-white border-white",onClick:$},"\u9810\u89bd"))),function(){n(null)}}),[]);var o=d.a.useState({}),s=Object(p.a)(o,2)[1],j=function(e){return function(t){s((function(a){return Object(l.a)(Object(l.a)({},a),{},Object(c.a)({},e,t.target.value))}))}},w=function(e){var t=Object(k.useRecoilState)(R);return d.a.useEffect((function(){}),[]),t}(),C=Object(p.a)(w,2),D=C[0],L=C[1],U=T(),B=Object(p.a)(U,2),F=B[0],H=B[1];d.a.useEffect((function(){console.log(JSON.stringify(Ne(b.a,Object(f.a)((function(e){return Object(c.a)({},e,Ne(Object(f.a)(Object(g.a)(["Component"])),Object(h.a)([],[e]))(F))})),O.a)(F)))}),[JSON.stringify(F)]);var z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onRequestOpen,a=d.a.useState(!1),n=Object(p.a)(a,2),r=n[0],o=n[1],i=function(e){o((function(e){return!e})),t&&t()},c=function(){o(!1)};return[r,i,c]}(),J=Object(p.a)(z,2),W=J[0],$=J[1],G=function(e){H((function(t){return Object(l.a)(Object(l.a)({},t),{},Object(c.a)({},D,e))}))},K=function(){H((function(e){return Object(l.a)(Object(l.a)({},e),{},{"\u65b0\u6a19\u7c64\u9801":[]})}))},Y=function(e){Object(P.a)({title:"\u78ba\u8a8d\u8981\u522a\u9664\u6b64\u9801\u7c64\u55ce\uff1f",content:"\u522a\u9664\u6703\u9023\u540c\u6a21\u7248\u8cc7\u6599\u4e00\u8d77\u522a\u9664\uff0c\u78ba\u8a8d\u7e7c\u7e8c\uff1f",onOk:function(){H((function(t){return Object(g.a)([e],t)})),D===e&&L(Ne(v.a,O.a)(F))}})},q=function(){},Q=Object(h.a)([],[D],F);return d.a.createElement(A.a,null,W&&d.a.createElement(ve.a,{snippetList:F,onCancel:$}),d.a.createElement(oe,null),d.a.createElement(y.a,null,d.a.createElement(Le,{gutter:48,className:"pt-2"},d.a.createElement(i.a,{span:5},d.a.createElement(_e,{defaultActiveKey:[1,2],expandIconPosition:"right",className:"shadow-2xl",expandIcon:function(e){return e.isActive?d.a.createElement(u.a,null):d.a.createElement(m.a,null)}},d.a.createElement(_e.Panel,{header:"\u6a21\u7248\u8cc7\u8a0a",key:1},d.a.createElement(r.a,{className:"mb-2 text-sm text-primary"},d.a.createElement(i.a,{span:24,className:"mb-3"},d.a.createElement(Ie,{className:"inline-block"},"\u540d\u7a31:"),d.a.createElement(_.c,{className:"w-2/3",onChange:j("name")})),d.a.createElement(i.a,{span:24,className:"my-3"},d.a.createElement(ke,{className:"inline-block"},"\u63cf\u8ff0:"),d.a.createElement(_.c,{className:"w-2/3",onChange:j("description")})),d.a.createElement(i.a,{span:24,className:"my-3"},d.a.createElement(we,{className:"inline-block"},"\u5275\u4f5c\u8005:"),d.a.createElement(_.c,{className:"w-2/3",onChange:j("author")})))),d.a.createElement(_e.Panel,{header:"\u5de5\u5177\u5217",key:2},d.a.createElement(r.a,null,d.a.createElement(i.a,{span:24},d.a.createElement(Z,{className:"text-primary"})))))),d.a.createElement(Se,{type:"editable-card",activeKey:D,onChange:function(e){L(e)},onEdit:function(e,t){("add"===t?K:Y)(e)},className:"flex-1"},Ne(Object(f.a)((function(e){return d.a.createElement(Se.TabPane,{forceRender:!0,closable:!0,key:e,tab:d.a.createElement(Ce,{contentEditable:!0,suppressContentEditableWarning:!0,spellCheck:!1,className:"outline-none",onChange:(t=e,function(e){console.log(e.target.innerHTML);var a=e.target.innerHTML;H((function(e){return Ne(b.a,Object(f.a)((function(n){return Object(c.a)({},n===t?a:n,e[n])})),O.a)(e)})),L(a)})},e)},d.a.createElement(i.a,{span:19,className:"report-template-builder__main-content"},d.a.createElement(Oe,{draggable:!W,snippetList:Q,onSnippetUpdate:G})));var t})),O.a)(F)))))}var Le=Object(j.c)(r.a).withConfig({displayName:"report-template-builder__RowM",componentId:"o8g10d-4"})(["position:relative;.report-template-builder{&__main-content{min-height:371.25mm;margin:0 auto;padding:16px;box-sizing:border-box;max-width:100%;background:#fff;border-top-right-radius:16px;border-bottom-left-radius:16px;border-bottom-right-radius:16px;}&__contentarea{min-height:348.75mm;}&__contentarea--fixed-layout{min-height:auto;}&__snippet-toolbar{visibility:hidden;}}.ui-draggable{&:focus,&:active{outline:0;.course-builder__snippet-toolbar{visibility:visible;opacity:1;transition:visibility 0s,opacity 0.3s,max-height 0.6s linear;}}}"])}}]);
//# sourceMappingURL=12.cc0474fd.chunk.js.map